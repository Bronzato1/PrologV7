import{a as v,b as P,c as Bt,d as rm,e as Pr,f as gE,g as om,h as S,i as ot}from"./chunk-JUI6DGJ4.js";var w4=rm((TVe,UI)=>{"use strict";var Me=String,b4=function(){return{isColorSupported:!1,reset:Me,bold:Me,dim:Me,italic:Me,underline:Me,inverse:Me,hidden:Me,strikethrough:Me,black:Me,red:Me,green:Me,yellow:Me,blue:Me,magenta:Me,cyan:Me,white:Me,gray:Me,bgBlack:Me,bgRed:Me,bgGreen:Me,bgYellow:Me,bgBlue:Me,bgMagenta:Me,bgCyan:Me,bgWhite:Me,blackBright:Me,redBright:Me,greenBright:Me,yellowBright:Me,blueBright:Me,magentaBright:Me,cyanBright:Me,whiteBright:Me,bgBlackBright:Me,bgRedBright:Me,bgGreenBright:Me,bgYellowBright:Me,bgBlueBright:Me,bgMagentaBright:Me,bgCyanBright:Me,bgWhiteBright:Me}};UI.exports=b4();UI.exports.createColors=b4});var qP=rm((cZe,$U)=>{"use strict";$U.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var GP=rm((dZe,qU)=>{"use strict";var ab=qP(),WU={};for(let n of Object.keys(ab))WU[ab[n]]=n;var ie={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};qU.exports=ie;for(let n of Object.keys(ie)){if(!("channels"in ie[n]))throw new Error("missing channels property: "+n);if(!("labels"in ie[n]))throw new Error("missing channel labels property: "+n);if(ie[n].labels.length!==ie[n].channels)throw new Error("channel and label counts mismatch: "+n);let{channels:e,labels:t}=ie[n];delete ie[n].channels,delete ie[n].labels,Object.defineProperty(ie[n],"channels",{value:e}),Object.defineProperty(ie[n],"labels",{value:t})}ie.rgb.hsl=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(e,t,i),o=Math.max(e,t,i),s=o-r,a,l;o===r?a=0:e===o?a=(t-i)/s:t===o?a=2+(i-e)/s:i===o&&(a=4+(e-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(r+o)/2;return o===r?l=0:c<=.5?l=s/(o+r):l=s/(2-o-r),[a,l*100,c*100]};ie.rgb.hsv=function(n){let e,t,i,r,o,s=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(s,a,l),u=c-Math.min(s,a,l),h=function(p){return(c-p)/6/u+1/2};return u===0?(r=0,o=0):(o=u/c,e=h(s),t=h(a),i=h(l),s===c?r=i-t:a===c?r=1/3+e-i:l===c&&(r=2/3+t-e),r<0?r+=1:r>1&&(r-=1)),[r*360,o*100,c*100]};ie.rgb.hwb=function(n){let e=n[0],t=n[1],i=n[2],r=ie.rgb.hsl(n)[0],o=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[r,o*100,i*100]};ie.rgb.cmyk=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.min(1-e,1-t,1-i),o=(1-e-r)/(1-r)||0,s=(1-t-r)/(1-r)||0,a=(1-i-r)/(1-r)||0;return[o*100,s*100,a*100,r*100]};function zpe(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}ie.rgb.keyword=function(n){let e=WU[n];if(e)return e;let t=1/0,i;for(let r of Object.keys(ab)){let o=ab[r],s=zpe(n,o);s<t&&(t=s,i=r)}return i};ie.keyword.rgb=function(n){return ab[n]};ie.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let r=e*.4124+t*.3576+i*.1805,o=e*.2126+t*.7152+i*.0722,s=e*.0193+t*.1192+i*.9505;return[r*100,o*100,s*100]};ie.rgb.lab=function(n){let e=ie.rgb.xyz(n),t=e[0],i=e[1],r=e[2];t/=95.047,i/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;let o=116*i-16,s=500*(t-i),a=200*(i-r);return[o,s,a]};ie.hsl.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100,r,o,s;if(t===0)return s=i*255,[s,s,s];i<.5?r=i*(1+t):r=i+t-i*t;let a=2*i-r,l=[0,0,0];for(let c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?s=a+(r-a)*6*o:2*o<1?s=r:3*o<2?s=a+(r-a)*(2/3-o)*6:s=a,l[c]=s*255;return l};ie.hsl.hsv=function(n){let e=n[0],t=n[1]/100,i=n[2]/100,r=t,o=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,r*=o<=1?o:2-o;let s=(i+t)/2,a=i===0?2*r/(o+r):2*t/(i+t);return[e,a*100,s*100]};ie.hsv.rgb=function(n){let e=n[0]/60,t=n[1]/100,i=n[2]/100,r=Math.floor(e)%6,o=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*o),l=255*i*(1-t*(1-o));switch(i*=255,r){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];case 5:return[i,s,a]}};ie.hsv.hsl=function(n){let e=n[0],t=n[1]/100,i=n[2]/100,r=Math.max(i,.01),o,s;s=(2-t)*i;let a=(2-t)*r;return o=t*r,o/=a<=1?a:2-a,o=o||0,s/=2,[e,o*100,s*100]};ie.hwb.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100,r=t+i,o;r>1&&(t/=r,i/=r);let s=Math.floor(6*e),a=1-i;o=6*e-s,s&1&&(o=1-o);let l=t+o*(a-t),c,u,h;switch(s){default:case 6:case 0:c=a,u=l,h=t;break;case 1:c=l,u=a,h=t;break;case 2:c=t,u=a,h=l;break;case 3:c=t,u=l,h=a;break;case 4:c=l,u=t,h=a;break;case 5:c=a,u=t,h=l;break}return[c*255,u*255,h*255]};ie.cmyk.rgb=function(n){let e=n[0]/100,t=n[1]/100,i=n[2]/100,r=n[3]/100,o=1-Math.min(1,e*(1-r)+r),s=1-Math.min(1,t*(1-r)+r),a=1-Math.min(1,i*(1-r)+r);return[o*255,s*255,a*255]};ie.xyz.rgb=function(n){let e=n[0]/100,t=n[1]/100,i=n[2]/100,r,o,s;return r=e*3.2406+t*-1.5372+i*-.4986,o=e*-.9689+t*1.8758+i*.0415,s=e*.0557+t*-.204+i*1.057,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),[r*255,o*255,s*255]};ie.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let r=116*t-16,o=500*(e-t),s=200*(t-i);return[r,o,s]};ie.lab.xyz=function(n){let e=n[0],t=n[1],i=n[2],r,o,s;o=(e+16)/116,r=t/500+o,s=o-i/200;let a=o**3,l=r**3,c=s**3;return o=a>.008856?a:(o-16/116)/7.787,r=l>.008856?l:(r-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,r*=95.047,o*=100,s*=108.883,[r,o,s]};ie.lab.lch=function(n){let e=n[0],t=n[1],i=n[2],r;r=Math.atan2(i,t)*360/2/Math.PI,r<0&&(r+=360);let s=Math.sqrt(t*t+i*i);return[e,s,r]};ie.lch.lab=function(n){let e=n[0],t=n[1],r=n[2]/360*2*Math.PI,o=t*Math.cos(r),s=t*Math.sin(r);return[e,o,s]};ie.rgb.ansi16=function(n,e=null){let[t,i,r]=n,o=e===null?ie.rgb.hsv(n)[2]:e;if(o=Math.round(o/50),o===0)return 30;let s=30+(Math.round(r/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return o===2&&(s+=60),s};ie.hsv.ansi16=function(n){return ie.rgb.ansi16(ie.hsv.rgb(n),n[2])};ie.rgb.ansi256=function(n){let e=n[0],t=n[1],i=n[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};ie.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(n>50)+1)*.5,i=(e&1)*t*255,r=(e>>1&1)*t*255,o=(e>>2&1)*t*255;return[i,r,o]};ie.ansi256.rgb=function(n){if(n>=232){let o=(n-232)*10+8;return[o,o,o]}n-=16;let e,t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,r=e%6/5*255;return[t,i,r]};ie.rgb.hex=function(n){let t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};ie.hex.rgb=function(n){let e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let i=parseInt(t,16),r=i>>16&255,o=i>>8&255,s=i&255;return[r,o,s]};ie.rgb.hcg=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,r=Math.max(Math.max(e,t),i),o=Math.min(Math.min(e,t),i),s=r-o,a,l;return s<1?a=o/(1-s):a=0,s<=0?l=0:r===e?l=(t-i)/s%6:r===t?l=2+(i-e)/s:l=4+(e-t)/s,l/=6,l%=1,[l*360,s*100,a*100]};ie.hsl.hcg=function(n){let e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t),r=0;return i<1&&(r=(t-.5*i)/(1-i)),[n[0],i*100,r*100]};ie.hsv.hcg=function(n){let e=n[1]/100,t=n[2]/100,i=e*t,r=0;return i<1&&(r=(t-i)/(1-i)),[n[0],i*100,r*100]};ie.hcg.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];let r=[0,0,0],o=e%1*6,s=o%1,a=1-s,l=0;switch(Math.floor(o)){case 0:r[0]=1,r[1]=s,r[2]=0;break;case 1:r[0]=a,r[1]=1,r[2]=0;break;case 2:r[0]=0,r[1]=1,r[2]=s;break;case 3:r[0]=0,r[1]=a,r[2]=1;break;case 4:r[0]=s,r[1]=0,r[2]=1;break;default:r[0]=1,r[1]=0,r[2]=a}return l=(1-t)*i,[(t*r[0]+l)*255,(t*r[1]+l)*255,(t*r[2]+l)*255]};ie.hcg.hsv=function(n){let e=n[1]/100,t=n[2]/100,i=e+t*(1-e),r=0;return i>0&&(r=e/i),[n[0],r*100,i*100]};ie.hcg.hsl=function(n){let e=n[1]/100,i=n[2]/100*(1-e)+.5*e,r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[n[0],r*100,i*100]};ie.hcg.hwb=function(n){let e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};ie.hwb.hcg=function(n){let e=n[1]/100,i=1-n[2]/100,r=i-e,o=0;return r<1&&(o=(i-r)/(1-r)),[n[0],r*100,o*100]};ie.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};ie.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};ie.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};ie.gray.hsl=function(n){return[0,0,n[0]]};ie.gray.hsv=ie.gray.hsl;ie.gray.hwb=function(n){return[0,100,n[0]]};ie.gray.cmyk=function(n){return[0,0,0,n[0]]};ie.gray.lab=function(n){return[n[0],0,0]};ie.gray.hex=function(n){let e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};ie.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]}});var KU=rm((hZe,GU)=>{"use strict";var d_=GP();function jpe(){let n={},e=Object.keys(d_);for(let t=e.length,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function $pe(n){let e=jpe(),t=[n];for(e[n].distance=0;t.length;){let i=t.pop(),r=Object.keys(d_[i]);for(let o=r.length,s=0;s<o;s++){let a=r[s],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function Wpe(n,e){return function(t){return e(n(t))}}function qpe(n,e){let t=[e[n].parent,n],i=d_[e[n].parent][n],r=e[n].parent;for(;e[r].parent;)t.unshift(e[r].parent),i=Wpe(d_[e[r].parent][r],i),r=e[r].parent;return i.conversion=t,i}GU.exports=function(n){let e=$pe(n),t={},i=Object.keys(e);for(let r=i.length,o=0;o<r;o++){let s=i[o];e[s].parent!==null&&(t[s]=qpe(s,e))}return t}});var QU=rm((fZe,YU)=>{"use strict";var KP=GP(),Gpe=KU(),xf={},Kpe=Object.keys(KP);function Ype(n){let e=function(...t){let i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Qpe(n){let e=function(...t){let i=t[0];if(i==null)return i;i.length>1&&(t=i);let r=n(t);if(typeof r=="object")for(let o=r.length,s=0;s<o;s++)r[s]=Math.round(r[s]);return r};return"conversion"in n&&(e.conversion=n.conversion),e}Kpe.forEach(n=>{xf[n]={},Object.defineProperty(xf[n],"channels",{value:KP[n].channels}),Object.defineProperty(xf[n],"labels",{value:KP[n].labels});let e=Gpe(n);Object.keys(e).forEach(i=>{let r=e[i];xf[n][i]=Qpe(r),xf[n][i].raw=Ype(r)})});YU.exports=xf});function jM(n,e){return Object.is(n,e)}var sn=null,Ub=!1,Hb=1,Zo=Symbol("SIGNAL");function Ge(n){let e=sn;return sn=n,e}function $M(){return sn}var am={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function vE(n){if(Ub)throw new Error("");if(sn===null)return;sn.consumerOnSignalRead(n);let e=sn.nextProducerIndex++;if(Wb(sn),e<sn.producerNode.length&&sn.producerNode[e]!==n&&sm(sn)){let t=sn.producerNode[e];$b(t,sn.producerIndexOfThis[e])}sn.producerNode[e]!==n&&(sn.producerNode[e]=n,sn.producerIndexOfThis[e]=sm(sn)?KM(n,sn,e):0),sn.producerLastReadVersion[e]=n.version}function d$(){Hb++}function WM(n){if(!(sm(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hb)){if(!n.producerMustRecompute(n)&&!_E(n)){n.dirty=!1,n.lastCleanEpoch=Hb;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Hb}}function qM(n){if(n.liveConsumerNode===void 0)return;let e=Ub;Ub=!0;try{for(let t of n.liveConsumerNode)t.dirty||h$(t)}finally{Ub=e}}function GM(){return sn?.consumerAllowSignalWrites!==!1}function h$(n){n.dirty=!0,qM(n),n.consumerMarkedDirty?.(n)}function jb(n){return n&&(n.nextProducerIndex=0),Ge(n)}function yE(n,e){if(Ge(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(sm(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)$b(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function _E(n){Wb(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(WM(t),i!==t.version))return!0}return!1}function CE(n){if(Wb(n),sm(n))for(let e=0;e<n.producerNode.length;e++)$b(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function KM(n,e,t){if(YM(n),n.liveConsumerNode.length===0&&QM(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=KM(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function $b(n,e){if(YM(n),n.liveConsumerNode.length===1&&QM(n))for(let i=0;i<n.producerNode.length;i++)$b(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],r=n.liveConsumerNode[e];Wb(r),r.producerIndexOfThis[i]=e}}function sm(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Wb(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function YM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function QM(n){return n.producerNode!==void 0}function ZM(n){let e=Object.create(f$);e.computation=n;let t=()=>{if(WM(e),vE(e),e.value===zb)throw e.error;return e.value};return t[Zo]=e,t}var bE=Symbol("UNSET"),wE=Symbol("COMPUTING"),zb=Symbol("ERRORED"),f$=P(v({},am),{value:bE,dirty:!0,error:null,equal:jM,producerMustRecompute(n){return n.value===bE||n.value===wE},producerRecomputeValue(n){if(n.value===wE)throw new Error("Detected cycle in computations.");let e=n.value;n.value=wE;let t=jb(n),i;try{i=n.computation()}catch(r){i=zb,n.error=r}finally{yE(n,t)}if(e!==bE&&e!==zb&&i!==zb&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function m$(){throw new Error}var JM=m$;function XM(){JM()}function eO(n){JM=n}var p$=null;function tO(n){let e=Object.create(iO);e.value=n;let t=()=>(vE(e),e.value);return t[Zo]=e,t}function EE(n,e){GM()||XM(),n.equal(n.value,e)||(n.value=e,g$(n))}function nO(n,e){GM()||XM(),EE(n,e(n.value))}var iO=P(v({},am),{equal:jM,value:void 0});function g$(n){n.version++,d$(),qM(n),p$?.()}function Ae(n){return typeof n=="function"}function ju(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var qb=ju(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hl(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ut=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ae(i))try{i()}catch(o){e=o instanceof qb?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{rO(o)}catch(s){e=e??[],s instanceof qb?e=[...e,...s.errors]:e.push(s)}}if(e)throw new qb(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rO(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hl(t,e)}remove(e){let{_finalizers:t}=this;t&&Hl(t,e),e instanceof n&&e._removeParent(this)}};Ut.EMPTY=(()=>{let n=new Ut;return n.closed=!0,n})();var SE=Ut.EMPTY;function Gb(n){return n instanceof Ut||n&&"closed"in n&&Ae(n.remove)&&Ae(n.add)&&Ae(n.unsubscribe)}function rO(n){Ae(n)?n():n.unsubscribe()}var Rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var $u={setTimeout(n,e,...t){let{delegate:i}=$u;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=$u;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kb(n){$u.setTimeout(()=>{let{onUnhandledError:e}=Rr;if(e)e(n);else throw n})}function lm(){}var oO=TE("C",void 0,void 0);function sO(n){return TE("E",void 0,n)}function aO(n){return TE("N",n,void 0)}function TE(n,e,t){return{kind:n,value:e,error:t}}var zl=null;function Wu(n){if(Rr.useDeprecatedSynchronousErrorHandling){let e=!zl;if(e&&(zl={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=zl;if(zl=null,t)throw i}}else n()}function lO(n){Rr.useDeprecatedSynchronousErrorHandling&&zl&&(zl.errorThrown=!0,zl.error=n)}var jl=class extends Ut{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gb(e)&&e.add(this)):this.destination=v$}static create(e,t,i){return new qu(e,t,i)}next(e){this.isStopped?AE(aO(e),this):this._next(e)}error(e){this.isStopped?AE(sO(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?AE(oO,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},b$=Function.prototype.bind;function kE(n,e){return b$.call(n,e)}var IE=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Yb(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Yb(i)}else Yb(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yb(t)}}},qu=class extends jl{constructor(e,t,i){super();let r;if(Ae(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let o;this&&Rr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&kE(e.next,o),error:e.error&&kE(e.error,o),complete:e.complete&&kE(e.complete,o)}):r=e}this.destination=new IE(r)}};function Yb(n){Rr.useDeprecatedSynchronousErrorHandling?lO(n):Kb(n)}function w$(n){throw n}function AE(n,e){let{onStoppedNotification:t}=Rr;t&&$u.setTimeout(()=>t(n,e))}var v$={closed:!0,next:lm,error:w$,complete:lm};var Gu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fi(n){return n}function xE(...n){return PE(n)}function PE(n){return n.length===0?Fi:n.length===1?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}var Ze=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){let o=_$(t)?t:new qu(t,i,r);return Wu(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=cO(i),new i((r,o)=>{let s=new qu({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Gu](){return this}pipe(...t){return PE(t)(this)}toPromise(t){return t=cO(t),new t((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return n.create=e=>new n(e),n})();function cO(n){var e;return(e=n??Rr.Promise)!==null&&e!==void 0?e:Promise}function y$(n){return n&&Ae(n.next)&&Ae(n.error)&&Ae(n.complete)}function _$(n){return n&&n instanceof jl||y$(n)&&Gb(n)}function RE(n){return Ae(n?.lift)}function Ke(n){return e=>{if(RE(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ze(n,e,t,i,r){return new DE(n,e,t,i,r)}var DE=class extends jl{constructor(e,t,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ku(){return Ke((n,e)=>{let t=null;n._refCount++;let i=ze(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let r=n._connection,o=t;t=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Yu=class extends Ze{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,RE(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ut;let t=this.getSubject();e.add(this.source.subscribe(ze(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ut.EMPTY)}return e}refCount(){return Ku()(this)}};var uO=ju(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Rt=(()=>{class n extends Ze{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Qb(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new uO}next(t){Wu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Wu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Wu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:r,observers:o}=this;return i||r?SE:(this.currentObservers=null,o.push(t),new Ut(()=>{this.currentObservers=null,Hl(o,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:r,isStopped:o}=this;i?t.error(r):o&&t.complete()}asObservable(){let t=new Ze;return t.source=this,t}}return n.create=(e,t)=>new Qb(e,t),n})(),Qb=class extends Rt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:SE}};var an=class extends Rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var cm={now(){return(cm.delegate||Date).now()},delegate:void 0};var $l=class extends Rt{constructor(e=1/0,t=1/0,i=cm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;t||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Zb=class extends Ut{constructor(e,t){super()}schedule(e,t=0){return this}};var um={setInterval(n,e,...t){let{delegate:i}=um;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=um;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Jb=class extends Zb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,i=0){return um.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&um.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hl(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Qu.now=cm.now;var Xb=class extends Qu{constructor(e,t=Qu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var dO=new Xb(Jb);var hi=new Ze(n=>n.complete());function hO(n){return n&&Ae(n.schedule)}function fO(n){return n[n.length-1]}function ew(n){return Ae(fO(n))?n.pop():void 0}function na(n){return hO(fO(n))?n.pop():void 0}function pO(n,e,t,i){function r(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(h){s(h)}}function l(u){try{c(i.throw(u))}catch(h){s(h)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function mO(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wl(n){return this instanceof Wl?(this.v=n,this):new Wl(n)}function gO(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(w){return Promise.resolve(w).then(g,h)}}function a(g,w){i[g]&&(r[g]=function(y){return new Promise(function(E,T){o.push([g,y,E,T])>1||l(g,y)})},w&&(r[g]=w(r[g])))}function l(g,w){try{c(i[g](w))}catch(y){p(o[0][3],y)}}function c(g){g.value instanceof Wl?Promise.resolve(g.value.v).then(u,h):p(o[0][2],g)}function u(g){l("next",g)}function h(g){l("throw",g)}function p(g,w){g(w),o.shift(),o.length&&l(o[0][0],o[0][1])}}function bO(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mO=="function"?mO(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(a,l){s=n[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var tw=n=>n&&typeof n.length=="number"&&typeof n!="function";function nw(n){return Ae(n?.then)}function iw(n){return Ae(n[Gu])}function rw(n){return Symbol.asyncIterator&&Ae(n?.[Symbol.asyncIterator])}function ow(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function C$(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var sw=C$();function aw(n){return Ae(n?.[sw])}function lw(n){return gO(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:r}=yield Wl(t.read());if(r)return yield Wl(void 0);yield yield Wl(i)}}finally{t.releaseLock()}})}function cw(n){return Ae(n?.getReader)}function Qt(n){if(n instanceof Ze)return n;if(n!=null){if(iw(n))return E$(n);if(tw(n))return S$(n);if(nw(n))return T$(n);if(rw(n))return wO(n);if(aw(n))return k$(n);if(cw(n))return A$(n)}throw ow(n)}function E$(n){return new Ze(e=>{let t=n[Gu]();if(Ae(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function S$(n){return new Ze(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function T$(n){return new Ze(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Kb)})}function k$(n){return new Ze(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function wO(n){return new Ze(e=>{I$(n,e).catch(t=>e.error(t))})}function A$(n){return wO(lw(n))}function I$(n,e){var t,i,r,o;return pO(this,void 0,void 0,function*(){try{for(t=bO(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=t.return)&&(yield o.call(t))}finally{if(r)throw r.error}}e.complete()})}function fi(n,e,t,i=0,r=!1){let o=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(o),!r)return o}function uw(n,e=0){return Ke((t,i)=>{t.subscribe(ze(i,r=>fi(i,n,()=>i.next(r),e),()=>fi(i,n,()=>i.complete(),e),r=>fi(i,n,()=>i.error(r),e)))})}function dw(n,e=0){return Ke((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function vO(n,e){return Qt(n).pipe(dw(e),uw(e))}function yO(n,e){return Qt(n).pipe(dw(e),uw(e))}function _O(n,e){return new Ze(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function CO(n,e){return new Ze(t=>{let i;return fi(t,e,()=>{i=n[sw](),fi(t,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){t.error(s);return}o?t.complete():t.next(r)},0,!0)}),()=>Ae(i?.return)&&i.return()})}function hw(n,e){if(!n)throw new Error("Iterable cannot be null");return new Ze(t=>{fi(t,e,()=>{let i=n[Symbol.asyncIterator]();fi(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function EO(n,e){return hw(lw(n),e)}function SO(n,e){if(n!=null){if(iw(n))return vO(n,e);if(tw(n))return _O(n,e);if(nw(n))return yO(n,e);if(rw(n))return hw(n,e);if(aw(n))return CO(n,e);if(cw(n))return EO(n,e)}throw ow(n)}function Qe(n,e){return e?SO(n,e):Qt(n)}function ae(...n){let e=na(n);return Qe(n,e)}function Jo(n,e){let t=Ae(n)?n:()=>n,i=r=>r.error(t());return new Ze(e?r=>e.schedule(i,0,r):i)}function ME(n){return!!n&&(n instanceof Ze||Ae(n.lift)&&Ae(n.subscribe))}var Xo=ju(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function me(n,e){return Ke((t,i)=>{let r=0;t.subscribe(ze(i,o=>{i.next(n.call(e,o,r++))}))})}var{isArray:x$}=Array;function P$(n,e){return x$(e)?n(...e):n(e)}function fw(n){return me(e=>P$(n,e))}var{isArray:R$}=Array,{getPrototypeOf:D$,prototype:M$,keys:O$}=Object;function mw(n){if(n.length===1){let e=n[0];if(R$(e))return{args:e,keys:null};if(N$(e)){let t=O$(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function N$(n){return n&&typeof n=="object"&&D$(n)===M$}function pw(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function gw(...n){let e=na(n),t=ew(n),{args:i,keys:r}=mw(n);if(i.length===0)return Qe([],e);let o=new Ze(L$(i,e,r?s=>pw(r,s):Fi));return t?o.pipe(fw(t)):o}function L$(n,e,t=Fi){return i=>{TO(e,()=>{let{length:r}=n,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)TO(e,()=>{let c=Qe(n[l],e),u=!1;c.subscribe(ze(i,h=>{o[l]=h,u||(u=!0,a--),a||i.next(t(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function TO(n,e,t){n?fi(t,n,e):e()}function kO(n,e,t,i,r,o,s,a){let l=[],c=0,u=0,h=!1,p=()=>{h&&!l.length&&!c&&e.complete()},g=y=>c<i?w(y):l.push(y),w=y=>{o&&e.next(y),c++;let E=!1;Qt(t(y,u++)).subscribe(ze(e,T=>{r?.(T),o?g(T):e.next(T)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<i;){let T=l.shift();s?fi(e,s,()=>w(T)):w(T)}p()}catch(T){e.error(T)}}))};return n.subscribe(ze(e,g,()=>{h=!0,p()})),()=>{a?.()}}function ln(n,e,t=1/0){return Ae(e)?ln((i,r)=>me((o,s)=>e(i,o,r,s))(Qt(n(i,r))),t):(typeof e=="number"&&(t=e),Ke((i,r)=>kO(i,r,n,t)))}function OE(n=1/0){return ln(Fi,n)}function AO(){return OE(1)}function Zu(...n){return AO()(Qe(n,na(n)))}function bw(n){return new Ze(e=>{Qt(n()).subscribe(e)})}function NE(...n){let e=ew(n),{args:t,keys:i}=mw(n),r=new Ze(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let h=!1;Qt(t[u]).subscribe(ze(o,p=>{h||(h=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||o.next(i?pw(i,a):a),o.complete())}))}});return e?r.pipe(fw(e)):r}function wn(n,e){return Ke((t,i)=>{let r=0;t.subscribe(ze(i,o=>n.call(e,o,r++)&&i.next(o)))})}function Tn(n){return Ke((e,t)=>{let i=null,r=!1,o;i=e.subscribe(ze(t,void 0,void 0,s=>{o=Qt(n(s,Tn(n)(e))),i?(i.unsubscribe(),i=null,o.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(t))})}function IO(n,e,t,i,r){return(o,s)=>{let a=t,l=e,c=0;o.subscribe(ze(s,u=>{let h=c++;l=a?n(l,u,h):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function Dr(n,e){return Ae(e)?ln(n,e,1):ln(n,1)}function LE(n,e=dO){return Ke((t,i)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=o;o=null,i.next(c)}};function l(){let c=s+n,u=e.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}t.subscribe(ze(i,c=>{o=c,s=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{o=r=null}))})}function ia(n){return Ke((e,t)=>{let i=!1;e.subscribe(ze(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function ao(n){return n<=0?()=>hi:Ke((e,t)=>{let i=0;e.subscribe(ze(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function FE(n){return me(()=>n)}function ww(n=F$){return Ke((e,t)=>{let i=!1;e.subscribe(ze(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function F$(){return new Xo}function ra(n){return Ke((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function rr(n,e){let t=arguments.length>=2;return i=>i.pipe(n?wn((r,o)=>n(r,o,i)):Fi,ao(1),t?ia(e):ww(()=>new Xo))}function Ju(n){return n<=0?()=>hi:Ke((e,t)=>{let i=[];e.subscribe(ze(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(let r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function VE(n,e){let t=arguments.length>=2;return i=>i.pipe(n?wn((r,o)=>n(r,o,i)):Fi,Ju(1),t?ia(e):ww(()=>new Xo))}function BE(n,e){return Ke(IO(n,e,arguments.length>=2,!0))}function UE(...n){let e=na(n);return Ke((t,i)=>{(e?Zu(n,t,e):Zu(n,t)).subscribe(i)})}function mi(n,e){return Ke((t,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();t.subscribe(ze(i,l=>{r?.unsubscribe();let c=0,u=o++;Qt(n(l,u)).subscribe(r=ze(i,h=>i.next(e?e(l,h,u,c++):h),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Xu(n){return Ke((e,t)=>{Qt(n).subscribe(ze(t,()=>t.complete(),lm)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let i=Ae(n)||e||t?{next:n,error:e,complete:t}:n;return i?Ke((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(ze(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Fi}var gN="https://g.co/ng/security#xss",F=class extends Error{constructor(e,t){super(t0(e,t)),this.code=e}};function t0(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Tm(n){return{toString:n}.toString()}var vw="__parameters__";function V$(n){return function(...t){if(n){let i=n(...t);for(let r in i)this[r]=i[r]}}}function bN(n,e,t){return Tm(()=>{let i=V$(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let h=l.hasOwnProperty(vw)?l[vw]:Object.defineProperty(l,vw,{value:[]})[vw];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}var sr=globalThis;function gt(n){for(let e in n)if(n[e]===gt)return e;throw Error("Could not find renamed property on target object.")}function B$(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Jn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Jn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function tS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var U$=gt({__forward_ref__:gt});function rs(n){return n.__forward_ref__=rs,n.toString=function(){return Jn(this())},n}function Zn(n){return wN(n)?n():n}function wN(n){return typeof n=="function"&&n.hasOwnProperty(U$)&&n.__forward_ref__===rs}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function vi(n){return{providers:n.providers||[],imports:n.imports||[]}}function n0(n){return xO(n,yN)||xO(n,_N)}function vN(n){return n0(n)!==null}function xO(n,e){return n.hasOwnProperty(e)?n[e]:null}function H$(n){let e=n&&(n[yN]||n[_N]);return e||null}function PO(n){return n&&(n.hasOwnProperty(RO)||n.hasOwnProperty(z$))?n[RO]:null}var yN=gt({\u0275prov:gt}),RO=gt({\u0275inj:gt}),_N=gt({ngInjectableDef:gt}),z$=gt({ngInjectorDef:gt}),X=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function CN(n){return n&&!!n.\u0275providers}var j$=gt({\u0275cmp:gt}),$$=gt({\u0275dir:gt}),W$=gt({\u0275pipe:gt}),q$=gt({\u0275mod:gt}),Dw=gt({\u0275fac:gt}),fm=gt({__NG_ELEMENT_ID__:gt}),DO=gt({__NG_ENV_ID__:gt});function i0(n){return typeof n=="string"?n:n==null?"":String(n)}function G$(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():i0(n)}function K$(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new F(-200,n)}function hT(n,e){throw new F(-201,!1)}var Fe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Fe||{}),nS;function EN(){return nS}function pi(n){let e=nS;return nS=n,e}function SN(n,e,t){let i=n0(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Fe.Optional)return null;if(e!==void 0)return e;hT(n,"Injector")}var Y$={},mm=Y$,iS="__NG_DI_FLAG__",Mw="ngTempTokenPath",Q$="ngTokenPath",Z$=/\n/gm,J$="\u0275",MO="__source",id;function X$(){return id}function oa(n){let e=id;return id=n,e}function eW(n,e=Fe.Default){if(id===void 0)throw new F(-203,!1);return id===null?SN(n,void 0,e):id.get(n,e&Fe.Optional?null:void 0,e)}function W(n,e=Fe.Default){return(EN()||eW)(Zn(n),e)}function L(n,e=Fe.Default){return W(n,r0(e))}function r0(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function rS(n){let e=[];for(let t=0;t<n.length;t++){let i=Zn(n[t]);if(Array.isArray(i)){if(i.length===0)throw new F(900,!1);let r,o=Fe.Default;for(let s=0;s<i.length;s++){let a=i[s],l=tW(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(W(r,o))}else e.push(W(i))}return e}function TN(n,e){return n[iS]=e,n.prototype[iS]=e,n}function tW(n){return n[iS]}function nW(n,e,t,i){let r=n[Mw];throw e[MO]&&r.unshift(e[MO]),n.message=iW(`
`+n.message,r,t,i),n[Q$]=r,n[Mw]=null,n}function iW(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==J$?n.slice(2):n;let r=Jn(e);if(Array.isArray(e))r=e.map(Jn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Jn(a)))}r=`{${o.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(Z$,`
  `)}`}var fT=TN(bN("Optional"),8);var kN=TN(bN("SkipSelf"),4);function Gl(n,e){let t=n.hasOwnProperty(Dw);return t?n[Dw]:null}function rW(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],o=e[i];if(t&&(r=t(r),o=t(o)),o!==r)return!1}return!0}function oW(n){return n.flat(Number.POSITIVE_INFINITY)}function mT(n,e){n.forEach(t=>Array.isArray(t)?mT(t,e):e(t))}function AN(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ow(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function sW(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(r===1)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;){let o=r-2;n[r]=n[o],r--}n[e]=t,n[e+1]=i}}function pT(n,e,t){let i=km(n,e);return i>=0?n[i|1]=t:(i=~i,sW(n,i,e,t)),i}function HE(n,e){let t=km(n,e);if(t>=0)return n[t|1]}function km(n,e){return aW(n,e,1)}function aW(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){let o=i+(r-i>>1),s=n[o<<t];if(e===s)return o<<t;s>e?r=o:i=o+1}return~(r<<t)}var od={},gi=[],sd=new X(""),IN=new X("",-1),xN=new X(""),Nw=class{get(e,t=mm){if(t===mm){let i=new Error(`NullInjectorError: No provider for ${Jn(e)}!`);throw i.name="NullInjectorError",i}return t}},PN=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(PN||{}),uo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(uo||{}),la=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(la||{});function lW(n,e,t){let i=n.length;for(;;){let r=n.indexOf(e,t);if(r===-1)return r;if(r===0||n.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||n.charCodeAt(r+o)<=32)return r}t=r+1}}function oS(n,e,t){let i=0;for(;i<t.length;){let r=t[i];if(typeof r=="number"){if(r!==0)break;i++;let o=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,o)}else{let o=r,s=t[++i];uW(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),i++}}return i}function cW(n){return n===3||n===4||n===6}function uW(n){return n.charCodeAt(0)===64}function pm(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?t=r:t===0||(t===-1||t===2?OO(n,t,r,null,e[++i]):OO(n,t,r,null,null))}}return n}function OO(n,e,t,i,r){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(i===null){r!==null&&(n[o+1]=r);return}else if(i===n[o+1]){n[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i),r!==null&&n.splice(o++,0,r)}var RN="ng-template";function dW(n,e,t,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&lW(e[r+1].toLowerCase(),t,0)!==-1)return!0}else if(gT(n))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===t)return!0}return!1}function gT(n){return n.type===4&&n.value!==RN}function hW(n,e,t){let i=n.type===4&&!t?RN:n.value;return e===i}function fW(n,e,t){let i=4,r=n.attrs,o=r!==null?gW(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Mr(i)&&!Mr(l))return!1;if(s&&Mr(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!hW(n,l,t)||l===""&&e.length===1){if(Mr(i))return!1;s=!0}}else if(i&8){if(r===null||!dW(n,r,l,t)){if(Mr(i))return!1;s=!0}}else{let c=e[++a],u=mW(l,r,gT(n),t);if(u===-1){if(Mr(i))return!1;s=!0;continue}if(c!==""){let h;if(u>o?h="":h=r[u+1].toLowerCase(),i&2&&c!==h){if(Mr(i))return!1;s=!0}}}}return Mr(i)||s}function Mr(n){return(n&1)===0}function mW(n,e,t,i){if(e===null)return-1;let r=0;if(i||!t){let o=!1;for(;r<e.length;){let s=e[r];if(s===n)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return bW(e,n)}function pW(n,e,t=!1){for(let i=0;i<e.length;i++)if(fW(n,e[i],t))return!0;return!1}function gW(n){for(let e=0;e<n.length;e++){let t=n[e];if(cW(t))return e}return n.length}function bW(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function NO(n,e){return n?":not("+e.trim()+")":e}function wW(n){let e=n[0],t=1,i=2,r="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!Mr(s)&&(e+=NO(o,r),r=""),i=s,o=o||!Mr(i);t++}return r!==""&&(e+=NO(o,r)),e}function vW(n){return n.map(wW).join(",")}function yW(n){let e=[],t=[],i=1,r=2;for(;i<n.length;){let o=n[i];if(typeof o=="string")r===2?o!==""&&e.push(o,n[++i]):r===8&&t.push(o);else{if(!Mr(r))break;r=o}i++}return{attrs:e,classes:t}}function ee(n){return Tm(()=>{let e=LN(n),t=P(v({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===PN.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||uo.Emulated,styles:n.styles||gi,_:null,schemas:n.schemas||null,tView:null,id:""});FN(t);let i=n.dependencies;return t.directiveDefs=FO(i,!1),t.pipeDefs=FO(i,!0),t.id=EW(t),t})}function _W(n){return Kl(n)||DN(n)}function CW(n){return n!==null}function yi(n){return Tm(()=>({type:n.type,bootstrap:n.bootstrap||gi,declarations:n.declarations||gi,imports:n.imports||gi,exports:n.exports||gi,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function LO(n,e){if(n==null)return od;let t={};for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],o,s,a=la.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(t[o]=a!==la.None?[i,a]:i,e[o]=s):t[o]=i}return t}function kn(n){return Tm(()=>{let e=LN(n);return FN(e),e})}function bT(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Kl(n){return n[j$]||null}function DN(n){return n[$$]||null}function MN(n){return n[W$]||null}function ON(n){let e=Kl(n)||DN(n)||MN(n);return e!==null?e.standalone:!1}function NN(n,e){let t=n[q$]||null;if(!t&&e===!0)throw new Error(`Type ${Jn(n)} does not have '\u0275mod' property.`);return t}function LN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||od,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||gi,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:LO(n.inputs,e),outputs:LO(n.outputs),debugInfo:null}}function FN(n){n.features?.forEach(e=>e(n))}function FO(n,e){if(!n)return null;let t=e?MN:_W;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(CW)}function EW(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let r of t)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function md(n){return{\u0275providers:n}}function wT(...n){return{\u0275providers:VN(!0,n),\u0275fromNgModule:!0}}function VN(n,...e){let t=[],i=new Set,r,o=s=>{t.push(s)};return mT(e,s=>{let a=s;sS(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&BN(r,o),t}function BN(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:r}=n[t];vT(r,o=>{e(o,i)})}}function sS(n,e,t,i){if(n=Zn(n),!n)return!1;let r=null,o=PO(n),s=!o&&Kl(n);if(!o&&!s){let l=n.ngModule;if(o=PO(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=n}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)sS(c,e,t,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{mT(o.imports,u=>{sS(u,e,t,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&BN(c,e)}if(!a){let c=Gl(r)||(()=>new r);e({provide:r,useFactory:c,deps:gi},r),e({provide:xN,useValue:r,multi:!0},r),e({provide:sd,useValue:()=>W(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=n;vT(l,u=>{e(u,c)})}}else return!1;return r!==n&&n.providers!==void 0}function vT(n,e){for(let t of n)CN(t)&&(t=t.\u0275providers),Array.isArray(t)?vT(t,e):e(t)}var SW=gt({provide:String,useValue:gt});function UN(n){return n!==null&&typeof n=="object"&&SW in n}function TW(n){return!!(n&&n.useExisting)}function kW(n){return!!(n&&n.useFactory)}function ad(n){return typeof n=="function"}function AW(n){return!!n.useClass}var o0=new X(""),kw={},IW={},zE;function yT(){return zE===void 0&&(zE=new Nw),zE}var bi=class{},gm=class extends bi{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,lS(e,s=>this.processProvider(s)),this.records.set(IN,ed(void 0,this)),r.has("environment")&&this.records.set(bi,ed(void 0,this));let o=this.records.get(o0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(xN,gi,Fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ge(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ge(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=oa(this),i=pi(void 0),r;try{return e()}finally{oa(t),pi(i)}}get(e,t=mm,i=Fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(DO))return e[DO](this);i=r0(i);let r,o=oa(this),s=pi(void 0);try{if(!(i&Fe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=MW(e)&&n0(e);c&&this.injectableDefInScope(c)?l=ed(aS(e),kw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&Fe.Self?yT():this.parent;return t=i&Fe.Optional&&t===mm?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Mw]=a[Mw]||[]).unshift(Jn(e)),o)throw a;return nW(a,e,"R3InjectorError",this.source)}else throw a}finally{pi(s),oa(o)}}resolveInjectorInitializers(){let e=Ge(null),t=oa(this),i=pi(void 0),r;try{let o=this.get(sd,gi,Fe.Self);for(let s of o)s()}finally{oa(t),pi(i),Ge(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(Jn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=Zn(e);let t=ad(e)?e:Zn(e&&e.provide),i=PW(e);if(!ad(e)&&e.multi===!0){let r=this.records.get(t);r||(r=ed(void 0,kw,!0),r.factory=()=>rS(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=Ge(null);try{return t.value===kw&&(t.value=IW,t.value=t.factory()),typeof t.value=="object"&&t.value&&DW(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ge(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Zn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function aS(n){let e=n0(n),t=e!==null?e.factory:Gl(n);if(t!==null)return t;if(n instanceof X)throw new F(204,!1);if(n instanceof Function)return xW(n);throw new F(204,!1)}function xW(n){if(n.length>0)throw new F(204,!1);let t=H$(n);return t!==null?()=>t.factory(n):()=>new n}function PW(n){if(UN(n))return ed(void 0,n.useValue);{let e=HN(n);return ed(e,kw)}}function HN(n,e,t){let i;if(ad(n)){let r=Zn(n);return Gl(r)||aS(r)}else if(UN(n))i=()=>Zn(n.useValue);else if(kW(n))i=()=>n.useFactory(...rS(n.deps||[]));else if(TW(n))i=()=>W(Zn(n.useExisting));else{let r=Zn(n&&(n.useClass||n.provide));if(RW(n))i=()=>new r(...rS(n.deps));else return Gl(r)||aS(r)}return i}function ed(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function RW(n){return!!n.deps}function DW(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function MW(n){return typeof n=="function"||typeof n=="object"&&n instanceof X}function lS(n,e){for(let t of n)Array.isArray(t)?lS(t,e):t&&CN(t)?lS(t.\u0275providers,e):e(t)}function Fr(n,e){n instanceof gm&&n.assertNotDestroyed();let t,i=oa(n),r=pi(void 0);try{return e()}finally{oa(i),pi(r)}}function OW(){return EN()!==void 0||X$()!=null}function NW(n){return typeof n=="function"}var os=0,_e=1,ve=2,Un=3,Nr=4,Vr=5,bm=6,Lw=7,Vn=8,ld=9,ho=10,Zt=11,wm=12,VO=13,pd=14,Lr=15,Yl=16,td=17,es=18,s0=19,zN=20,sa=21,jE=22,or=23,wi=25,jN=1;var Ql=7,Fw=8,cd=9,Bn=10,Vw=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Vw||{});function aa(n){return Array.isArray(n)&&typeof n[jN]=="object"}function ss(n){return Array.isArray(n)&&n[jN]===!0}function $N(n){return(n.flags&4)!==0}function a0(n){return n.componentOffset>-1}function _T(n){return(n.flags&1)===1}function ca(n){return!!n.template}function cS(n){return(n[ve]&512)!==0}var uS=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function WN(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function fa(){return qN}function qN(n){return n.type.prototype.ngOnChanges&&(n.setInput=FW),LW}fa.ngInherit=!0;function LW(){let n=KN(this),e=n?.current;if(e){let t=n.previous;if(t===od)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function FW(n,e,t,i,r){let o=this.declaredInputs[i],s=KN(n)||VW(n,{previous:od,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new uS(c&&c.currentValue,t,l===od),WN(n,e,r,t)}var GN="__ngSimpleChanges__";function KN(n){return n[GN]||null}function VW(n,e){return n[GN]=e}var BO=null;var lo=function(n,e,t){BO?.(n,e,t)},YN="svg",BW="math";function fo(n){for(;Array.isArray(n);)n=n[os];return n}function QN(n,e){return fo(e[n])}function ar(n,e){return fo(e[n.index])}function CT(n,e){return n.data[e]}function ZN(n,e){return n[e]}function ma(n,e){let t=e[n];return aa(t)?t:t[os]}function UW(n){return(n[ve]&4)===4}function ET(n){return(n[ve]&128)===128}function HW(n){return ss(n[Un])}function ud(n,e){return e==null?null:n[e]}function JN(n){n[td]=0}function XN(n){n[ve]&1024||(n[ve]|=1024,ET(n)&&c0(n))}function zW(n,e){for(;n>0;)e=e[pd],n--;return e}function l0(n){return!!(n[ve]&9216||n[or]?.dirty)}function dS(n){n[ho].changeDetectionScheduler?.notify(8),n[ve]&64&&(n[ve]|=1024),l0(n)&&c0(n)}function c0(n){n[ho].changeDetectionScheduler?.notify(0);let e=Zl(n);for(;e!==null&&!(e[ve]&8192||(e[ve]|=8192,!ET(e)));)e=Zl(e)}function e5(n,e){if((n[ve]&256)===256)throw new F(911,!1);n[sa]===null&&(n[sa]=[]),n[sa].push(e)}function jW(n,e){if(n[sa]===null)return;let t=n[sa].indexOf(e);t!==-1&&n[sa].splice(t,1)}function Zl(n){let e=n[Un];return ss(e)?e[Un]:e}var Re={lFrame:u5(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var t5=!1;function $W(){return Re.lFrame.elementDepthCount}function WW(){Re.lFrame.elementDepthCount++}function qW(){Re.lFrame.elementDepthCount--}function n5(){return Re.bindingsEnabled}function GW(){return Re.skipHydrationRootTNode!==null}function KW(n){return Re.skipHydrationRootTNode===n}function YW(){Re.skipHydrationRootTNode=null}function Ye(){return Re.lFrame.lView}function vn(){return Re.lFrame.tView}function _i(n){return Re.lFrame.contextLView=n,n[Vn]}function Ci(n){return Re.lFrame.contextLView=null,n}function Ei(){let n=i5();for(;n!==null&&n.type===64;)n=n.parent;return n}function i5(){return Re.lFrame.currentTNode}function QW(){let n=Re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Am(n,e){let t=Re.lFrame;t.currentTNode=n,t.isParent=e}function r5(){return Re.lFrame.isParent}function ZW(){Re.lFrame.isParent=!1}function JW(){return Re.lFrame.contextLView}function o5(){return t5}function UO(n){t5=n}function XW(){let n=Re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function eq(n){return Re.lFrame.bindingIndex=n}function gd(){return Re.lFrame.bindingIndex++}function s5(n){let e=Re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function tq(){return Re.lFrame.inI18n}function nq(n,e){let t=Re.lFrame;t.bindingIndex=t.bindingRootIndex=n,hS(e)}function iq(){return Re.lFrame.currentDirectiveIndex}function hS(n){Re.lFrame.currentDirectiveIndex=n}function rq(n){let e=Re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function a5(){return Re.lFrame.currentQueryIndex}function ST(n){Re.lFrame.currentQueryIndex=n}function oq(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Vr]:null}function l5(n,e,t){if(t&Fe.SkipSelf){let r=e,o=n;for(;r=r.parent,r===null&&!(t&Fe.Host);)if(r=oq(o),r===null||(o=o[pd],r.type&10))break;if(r===null)return!1;e=r,n=o}let i=Re.lFrame=c5();return i.currentTNode=e,i.lView=n,!0}function TT(n){let e=c5(),t=n[_e];Re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function c5(){let n=Re.lFrame,e=n===null?null:n.child;return e===null?u5(n):e}function u5(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function d5(){let n=Re.lFrame;return Re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var h5=d5;function kT(){let n=d5();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function sq(n){return(Re.lFrame.contextLView=zW(n,Re.lFrame.contextLView))[Vn]}function pa(){return Re.lFrame.selectedIndex}function Jl(n){Re.lFrame.selectedIndex=n}function AT(){let n=Re.lFrame;return CT(n.tView,n.selectedIndex)}function Ve(){Re.lFrame.currentNamespace=YN}function Be(){aq()}function aq(){Re.lFrame.currentNamespace=null}function lq(){return Re.lFrame.currentNamespace}var f5=!0;function IT(){return f5}function xT(n){f5=n}function cq(n,e,t){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=qN(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}r&&(t.preOrderHooks??=[]).push(0-n,r),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function PT(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Aw(n,e,t){m5(n,e,3,t)}function Iw(n,e,t,i){(n[ve]&3)===t&&m5(n,e,t,i)}function $E(n,e){let t=n[ve];(t&3)===e&&(t&=16383,t+=1,n[ve]=t)}function m5(n,e,t,i){let r=i!==void 0?n[td]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[td]+=65536),(a<o||o==-1)&&(uq(n,t,e,l),n[td]=(n[td]&4294901760)+l+2),l++}function HO(n,e){lo(4,n,e);let t=Ge(null);try{e.call(n)}finally{Ge(t),lo(5,n,e)}}function uq(n,e,t,i){let r=t[i]<0,o=t[i+1],s=r?-t[i]:t[i],a=n[s];r?n[ve]>>14<n[td]>>16&&(n[ve]&3)===e&&(n[ve]+=16384,HO(a,o)):HO(a,o)}var rd=-1,Xl=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function dq(n){return n instanceof Xl}function hq(n){return(n.flags&8)!==0}function fq(n){return(n.flags&16)!==0}var WE={},fS=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=r0(i);let r=this.injector.get(e,WE,i);return r!==WE||t===WE?r:this.parentInjector.get(e,t,i)}};function p5(n){return n!==rd}function Bw(n){return n&32767}function mq(n){return n>>16}function Uw(n,e){let t=mq(n),i=e;for(;t>0;)i=i[pd],t--;return i}var mS=!0;function Hw(n){let e=mS;return mS=n,e}var pq=256,g5=pq-1,b5=5,gq=0,co={};function bq(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(fm)&&(i=t[fm]),i==null&&(i=t[fm]=gq++);let r=i&g5,o=1<<r;e.data[n+(r>>b5)]|=o}function zw(n,e){let t=w5(n,e);if(t!==-1)return t;let i=e[_e];i.firstCreatePass&&(n.injectorIndex=e.length,qE(i.data,n),qE(e,null),qE(i.blueprint,null));let r=RT(n,e),o=n.injectorIndex;if(p5(r)){let s=Bw(r),a=Uw(r,e),l=a[_e].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function qE(n,e){n.push(0,0,0,0,0,0,0,0,e)}function w5(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function RT(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;r!==null;){if(i=E5(r),i===null)return rd;if(t++,r=r[pd],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return rd}function pS(n,e,t){bq(n,e,t)}function v5(n,e,t){if(t&Fe.Optional||n!==void 0)return n;hT(e,"NodeInjector")}function y5(n,e,t,i){if(t&Fe.Optional&&i===void 0&&(i=null),!(t&(Fe.Self|Fe.Host))){let r=n[ld],o=pi(void 0);try{return r?r.get(e,i,t&Fe.Optional):SN(e,i,t&Fe.Optional)}finally{pi(o)}}return v5(i,e,t)}function _5(n,e,t,i=Fe.Default,r){if(n!==null){if(e[ve]&2048&&!(i&Fe.Self)){let s=_q(n,e,t,i,co);if(s!==co)return s}let o=C5(n,e,t,i,co);if(o!==co)return o}return y5(e,t,i,r)}function C5(n,e,t,i,r){let o=vq(t);if(typeof o=="function"){if(!l5(e,n,i))return i&Fe.Host?v5(r,t,i):y5(e,t,i,r);try{let s;if(s=o(i),s==null&&!(i&Fe.Optional))hT(t);else return s}finally{h5()}}else if(typeof o=="number"){let s=null,a=w5(n,e),l=rd,c=i&Fe.Host?e[Lr][Vr]:null;for((a===-1||i&Fe.SkipSelf)&&(l=a===-1?RT(n,e):e[a+8],l===rd||!jO(i,!1)?a=-1:(s=e[_e],a=Bw(l),e=Uw(l,e)));a!==-1;){let u=e[_e];if(zO(o,a,u.data)){let h=wq(a,e,t,s,i,c);if(h!==co)return h}l=e[a+8],l!==rd&&jO(i,e[_e].data[a+8]===c)&&zO(o,a,e)?(s=u,a=Bw(l),e=Uw(l,e)):a=-1}}return r}function wq(n,e,t,i,r,o){let s=e[_e],a=s.data[n+8],l=i==null?a0(a)&&mS:i!=s&&(a.type&3)!==0,c=r&Fe.Host&&o===a,u=xw(a,s,t,l,c);return u!==null?ec(e,s,u,a):co}function xw(n,e,t,i,r){let o=n.providerIndexes,s=e.data,a=o&1048575,l=n.directiveStart,c=n.directiveEnd,u=o>>20,h=i?a:a+u,p=r?a+u:c;for(let g=h;g<p;g++){let w=s[g];if(g<l&&t===w||g>=l&&w.type===t)return g}if(r){let g=s[l];if(g&&ca(g)&&g.type===t)return l}return null}function ec(n,e,t,i){let r=n[t],o=e.data;if(dq(r)){let s=r;s.resolving&&K$(G$(o[t]));let a=Hw(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?pi(s.injectImpl):null,u=l5(n,i,Fe.Default);try{r=n[t]=s.factory(void 0,o,n,i),e.firstCreatePass&&t>=i.directiveStart&&cq(t,o[t],e)}finally{c!==null&&pi(c),Hw(a),s.resolving=!1,h5()}}return r}function vq(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fm)?n[fm]:void 0;return typeof e=="number"?e>=0?e&g5:yq:e}function zO(n,e,t){let i=1<<n;return!!(t[e+(n>>b5)]&i)}function jO(n,e){return!(n&Fe.Self)&&!(n&Fe.Host&&e)}var ql=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return _5(this._tNode,this._lView,e,r0(i),t)}};function yq(){return new ql(Ei(),Ye())}function Vi(n){return Tm(()=>{let e=n.prototype.constructor,t=e[Dw]||gS(e),i=Object.prototype,r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){let o=r[Dw]||gS(r);if(o&&o!==t)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function gS(n){return wN(n)?()=>{let e=gS(Zn(n));return e&&e()}:Gl(n)}function _q(n,e,t,i,r){let o=n,s=e;for(;o!==null&&s!==null&&s[ve]&2048&&!(s[ve]&512);){let a=C5(o,s,t,i|Fe.Self,co);if(a!==co)return a;let l=o.parent;if(!l){let c=s[zN];if(c){let u=c.get(t,co,i);if(u!==co)return u}l=E5(s),s=s[pd]}o=l}return r}function E5(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Vr]:null}function $O(n,e=null,t=null,i){let r=S5(n,e,t,i);return r.resolveInjectorInitializers(),r}function S5(n,e=null,t=null,i,r=new Set){let o=[t||gi,wT(n)];return i=i||(typeof n=="object"?void 0:Jn(n)),new gm(o,e||yT(),i||null,r)}var ua=class n{static{this.THROW_IF_NOT_FOUND=mm}static{this.NULL=new Nw}static create(e,t){if(Array.isArray(e))return $O({name:""},t,e,"");{let i=e.name??"";return $O({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=K({token:n,providedIn:"any",factory:()=>W(IN)})}static{this.__NG_ELEMENT_ID__=-1}};var Cq=new X("");Cq.__NG_ELEMENT_ID__=n=>{let e=Ei();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(n&Fe.Optional)return null;throw new F(204,!1)};var Eq="ngOriginalError";function GE(n){return n[Eq]}var T5=!0,k5=(()=>{class n{static{this.__NG_ELEMENT_ID__=Sq}static{this.__NG_ENV_ID__=t=>t}}return n})(),bS=class extends k5{constructor(e){super(),this._lView=e}onDestroy(e){return e5(this._lView,e),()=>jW(this._lView,e)}};function Sq(){return new bS(Ye())}var as=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new an(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})();var wS=class extends Rt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,OW()&&(this.destroyRef=L(k5,{optional:!0})??void 0,this.pendingTasks=L(as,{optional:!0})??void 0)}emit(e){let t=Ge(null);try{super.next(e)}finally{Ge(t)}}subscribe(e,t,i){let r=e,o=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof Ut&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},yt=wS;function jw(...n){}function A5(n){let e,t;function i(){n=jw;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function WO(n){return queueMicrotask(()=>n()),()=>{n=jw}}var DT="isAngularZone",$w=DT+"_ID",Tq=0,st=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yt(!1),this.onMicrotaskEmpty=new yt(!1),this.onStable=new yt(!1),this.onError=new yt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=T5}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Iq(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(DT)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new F(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,kq,jw,jw);try{return o.runTask(s,t,i)}finally{o.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},kq={};function MT(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Aq(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){A5(()=>{n.callbackScheduled=!1,vS(n),n.isCheckStableRunning=!0,MT(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),vS(n)}function Iq(n){let e=()=>{Aq(n)},t=Tq++;n._inner=n._inner.fork({name:"angular",properties:{[DT]:!0,[$w]:t,[$w+t]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(xq(l))return i.invokeTask(o,s,a,l);try{return qO(n),i.invokeTask(o,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),GO(n)}},onInvoke:(i,r,o,s,a,l,c)=>{try{return qO(n),i.invoke(o,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Pq(l)&&e(),GO(n)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,vS(n),MT(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function vS(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qO(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function GO(n){n._nesting--,MT(n)}var yS=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yt,this.onMicrotaskEmpty=new yt,this.onStable=new yt,this.onError=new yt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}};function xq(n){return I5(n,"__ignore_ng_zone__")}function Pq(n){return I5(n,"__scheduler_tick__")}function I5(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var ts=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&GE(e);for(;t&&GE(t);)t=GE(t);return t||null}},Rq=new X("",{providedIn:"root",factory:()=>{let n=L(st),e=L(ts);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Dq(){return bd(Ei(),Ye())}function bd(n,e){return new Si(ar(n,e))}var Si=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Dq}}return n})();function Mq(n){return n instanceof Si?n.nativeElement:n}function Oq(){return this._results[Symbol.iterator]()}var _S=class n{get changes(){return this._changes??=new yt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Oq)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=oW(e);(this._changesDetected=!rW(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function x5(n){return(n.flags&128)===128}var P5=new Map,Nq=0;function Lq(){return Nq++}function Fq(n){P5.set(n[s0],n)}function CS(n){P5.delete(n[s0])}var KO="__ngContext__";function tc(n,e){aa(e)?(n[KO]=e[s0],Fq(e)):n[KO]=e}function R5(n){return M5(n[wm])}function D5(n){return M5(n[Nr])}function M5(n){for(;n!==null&&!ss(n);)n=n[Nr];return n}var ES;function O5(n){ES=n}function N5(){if(ES!==void 0)return ES;if(typeof document<"u")return document;throw new F(210,!1)}var u0=new X("",{providedIn:"root",factory:()=>Vq}),Vq="ng",OT=new X(""),ga=new X("",{providedIn:"platform",factory:()=>"unknown"});var NT=new X(""),LT=new X("",{providedIn:"root",factory:()=>N5().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Bq="h",Uq="b";var Hq=()=>null;function FT(n,e,t=!1){return Hq(n,e,t)}var L5=!1,zq=new X("",{providedIn:"root",factory:()=>L5});var yw;function jq(){if(yw===void 0&&(yw=null,sr.trustedTypes))try{yw=sr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yw}function d0(n){return jq()?.createHTML(n)||n}var _w;function $q(){if(_w===void 0&&(_w=null,sr.trustedTypes))try{_w=sr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return _w}function YO(n){return $q()?.createHTML(n)||n}var ns=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gN})`}},SS=class extends ns{getTypeName(){return"HTML"}},TS=class extends ns{getTypeName(){return"Style"}},kS=class extends ns{getTypeName(){return"Script"}},AS=class extends ns{getTypeName(){return"URL"}},IS=class extends ns{getTypeName(){return"ResourceURL"}};function mo(n){return n instanceof ns?n.changingThisBreaksApplicationSecurity:n}function oc(n,e){let t=Wq(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${gN})`)}return t===e}function Wq(n){return n instanceof ns&&n.getTypeName()||null}function F5(n){return new SS(n)}function V5(n){return new TS(n)}function B5(n){return new kS(n)}function U5(n){return new AS(n)}function H5(n){return new IS(n)}function qq(n){let e=new PS(n);return Gq()?new xS(e):e}var xS=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(d0(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},PS=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=d0(e),t}};function Gq(){try{return!!new window.DOMParser().parseFromString(d0(""),"text/html")}catch{return!1}}var Kq=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VT(n){return n=String(n),n.match(Kq)?n:"unsafe:"+n}function ls(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Im(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var z5=ls("area,br,col,hr,img,wbr"),j5=ls("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),$5=ls("rp,rt"),Yq=Im($5,j5),Qq=Im(j5,ls("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zq=Im($5,ls("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),QO=Im(z5,Qq,Zq,Yq),W5=ls("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jq=ls("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xq=ls("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),eG=Im(W5,Jq,Xq),tG=ls("script,style,template"),RS=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,r=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){r.push(t),t=rG(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let o=iG(t);if(o){t=o;break}t=r.pop()}}return this.buf.join("")}startElement(e){let t=ZO(e).toLowerCase();if(!QO.hasOwnProperty(t))return this.sanitizedSomething=!0,!tG.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let r=0;r<i.length;r++){let o=i.item(r),s=o.name,a=s.toLowerCase();if(!eG.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=o.value;W5[a]&&(l=VT(l)),this.buf.push(" ",s,'="',JO(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=ZO(e).toLowerCase();QO.hasOwnProperty(t)&&!z5.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(JO(e))}};function nG(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function iG(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw q5(e);return e}function rG(n){let e=n.firstChild;if(e&&nG(n,e))throw q5(e);return e}function ZO(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function q5(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var oG=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sG=/([^\#-~ |!])/g;function JO(n){return n.replace(/&/g,"&amp;").replace(oG,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(sG,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Cw;function BT(n,e){let t=null;try{Cw=Cw||qq(n);let i=e?String(e):"";t=Cw.getInertBodyElement(i);let r=5,o=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=o,o=t.innerHTML,t=Cw.getInertBodyElement(i)}while(i!==o);let a=new RS().sanitizeChildren(XO(t)||t);return d0(a)}finally{if(t){let i=XO(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function XO(n){return"content"in n&&aG(n)?n.content:null}function aG(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var cs=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(cs||{});function G5(n){let e=lG();return e?YO(e.sanitize(cs.HTML,n)||""):oc(n,"HTML")?YO(mo(n)):BT(N5(),i0(n))}function lG(){let n=Ye();return n&&n[ho].sanitizer}function K5(n){return n.ownerDocument}function Y5(n){return n instanceof Function?n():n}var is=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(is||{}),cG;function UT(n,e){return cG(n,e)}function nd(n,e,t,i,r){if(i!=null){let o,s=!1;ss(i)?o=i:aa(i)&&(s=!0,i=i[os]);let a=fo(i);n===0&&t!==null?r==null?X5(e,t,a):Ww(e,t,a,r||null,!0):n===1&&t!==null?Ww(e,t,a,r||null,!0):n===2?SG(e,a,s):n===3&&e.destroyNode(a),o!=null&&kG(e,n,o,t,r)}}function uG(n,e){return n.createText(e)}function dG(n,e,t){n.setValue(e,t)}function Q5(n,e,t){return n.createElement(e,t)}function hG(n,e){Z5(n,e),e[os]=null,e[Vr]=null}function fG(n,e,t,i,r,o){i[os]=r,i[Vr]=e,f0(n,i,t,1,r,o)}function Z5(n,e){e[ho].changeDetectionScheduler?.notify(9),f0(n,e,e[Zt],2,null,null)}function mG(n){let e=n[wm];if(!e)return KE(n[_e],n);for(;e;){let t=null;if(aa(e))t=e[wm];else{let i=e[Bn];i&&(t=i)}if(!t){for(;e&&!e[Nr]&&e!==n;)aa(e)&&KE(e[_e],e),e=e[Un];e===null&&(e=n),aa(e)&&KE(e[_e],e),t=e&&e[Nr]}e=t}}function pG(n,e,t,i){let r=Bn+i,o=t.length;i>0&&(t[r-1][Nr]=e),i<o-Bn?(e[Nr]=t[r],AN(t,Bn+i,e)):(t.push(e),e[Nr]=null),e[Un]=t;let s=e[Yl];s!==null&&t!==s&&J5(s,e);let a=e[es];a!==null&&a.insertView(n),dS(e),e[ve]|=128}function J5(n,e){let t=n[cd],i=e[Un];if(aa(i))n[ve]|=Vw.HasTransplantedViews;else{let r=i[Un][Lr];e[Lr]!==r&&(n[ve]|=Vw.HasTransplantedViews)}t===null?n[cd]=[e]:t.push(e)}function HT(n,e){let t=n[cd],i=t.indexOf(e);t.splice(i,1)}function vm(n,e){if(n.length<=Bn)return;let t=Bn+e,i=n[t];if(i){let r=i[Yl];r!==null&&r!==n&&HT(r,i),e>0&&(n[t-1][Nr]=i[Nr]);let o=Ow(n,Bn+e);hG(i[_e],i);let s=o[es];s!==null&&s.detachView(o[_e]),i[Un]=null,i[Nr]=null,i[ve]&=-129}return i}function h0(n,e){if(!(e[ve]&256)){let t=e[Zt];t.destroyNode&&f0(n,e,t,3,null,null),mG(e)}}function KE(n,e){if(e[ve]&256)return;let t=Ge(null);try{e[ve]&=-129,e[ve]|=256,e[or]&&CE(e[or]),bG(n,e),gG(n,e),e[_e].type===1&&e[Zt].destroy();let i=e[Yl];if(i!==null&&ss(e[Un])){i!==e[Un]&&HT(i,e);let r=e[es];r!==null&&r.detachView(n)}CS(e)}finally{Ge(t)}}function gG(n,e){let t=n.cleanup,i=e[Lw];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[t[o+1]];t[o].call(s)}i!==null&&(e[Lw]=null);let r=e[sa];if(r!==null){e[sa]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function bG(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let r=e[t[i]];if(!(r instanceof Xl)){let o=t[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];lo(4,a,l);try{l.call(a)}finally{lo(5,a,l)}}else{lo(4,r,o);try{o.call(r)}finally{lo(5,r,o)}}}}}function wG(n,e,t){return vG(n,e.parent,t)}function vG(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[os];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=n.data[i.directiveStart+r];if(o===uo.None||o===uo.Emulated)return null}return ar(i,t)}}function Ww(n,e,t,i,r){n.insertBefore(e,t,i,r)}function X5(n,e,t){n.appendChild(e,t)}function eN(n,e,t,i,r){i!==null?Ww(n,e,t,i,r):X5(n,e,t)}function e3(n,e){return n.parentNode(e)}function yG(n,e){return n.nextSibling(e)}function _G(n,e,t){return EG(n,e,t)}function CG(n,e,t){return n.type&40?ar(n,t):null}var EG=CG,tN;function zT(n,e,t,i){let r=wG(n,i,e),o=e[Zt],s=i.parent||e[Vr],a=_G(s,i,e);if(r!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)eN(o,r,t[l],a,!1);else eN(o,r,t,a,!1);tN!==void 0&&tN(o,i,e,t,r)}function dm(n,e){if(e!==null){let t=e.type;if(t&3)return ar(e,n);if(t&4)return DS(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return dm(n,i);{let r=n[e.index];return ss(r)?DS(-1,r):fo(r)}}else{if(t&128)return dm(n,e.next);if(t&32)return UT(e,n)()||fo(n[e.index]);{let i=t3(n,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Zl(n[Lr]);return dm(r,i)}else return dm(n,e.next)}}}return null}function t3(n,e){if(e!==null){let i=n[Lr][Vr],r=e.projection;return i.projection[r]}return null}function DS(n,e){let t=Bn+n+1;if(t<e.length){let i=e[t],r=i[_e].firstChild;if(r!==null)return dm(i,r)}return e[Ql]}function SG(n,e,t){n.removeChild(null,e,t)}function jT(n,e,t,i,r,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&tc(fo(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)jT(n,e,t.child,i,r,o,!1),nd(e,n,r,a,o);else if(l&32){let c=UT(t,i),u;for(;u=c();)nd(e,n,r,u,o);nd(e,n,r,a,o)}else l&16?TG(n,e,i,t,r,o):nd(e,n,r,a,o);t=s?t.projectionNext:t.next}}function f0(n,e,t,i,r,o){jT(t,i,n.firstChild,e,r,o,!1)}function TG(n,e,t,i,r,o){let s=t[Lr],l=s[Vr].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];nd(e,n,r,u,o)}else{let c=l,u=s[Un];x5(i)&&(c.flags|=128),jT(n,e,c,u,r,o,!0)}}function kG(n,e,t,i,r){let o=t[Ql],s=fo(t);o!==s&&nd(e,n,i,o,r);for(let a=Bn;a<t.length;a++){let l=t[a];f0(l[_e],l,n,e,i,o)}}function AG(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let o=i.indexOf("-")===-1?void 0:is.DashCase;r==null?n.removeStyle(t,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=is.Important),n.setStyle(t,i,r,o))}}function IG(n,e,t){n.setAttribute(e,"style",t)}function n3(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function i3(n,e,t){let{mergedAttrs:i,classes:r,styles:o}=t;i!==null&&oS(n,e,i),r!==null&&n3(n,e,r),o!==null&&IG(n,e,o)}var po={};function Oe(n=1){r3(vn(),Ye(),pa()+n,!1)}function r3(n,e,t,i){if(!i)if((e[ve]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Aw(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Iw(e,o,0,t)}Jl(t)}function Ne(n,e=Fe.Default){let t=Ye();if(t===null)return W(n,e);let i=Ei();return _5(i,t,Zn(n),e)}function o3(n,e,t,i,r,o){let s=Ge(null);try{let a=null;r&la.SignalBased&&(a=e[i][Zo]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&la.HasDecoratorInputTransform&&(o=n.inputTransforms[i].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,i):WN(e,a,i,o)}finally{Ge(s)}}function xG(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let r=t[i];if(r<0)Jl(~r);else{let o=r,s=t[++i],a=t[++i];nq(s,o);let l=e[o];a(2,l)}}}finally{Jl(-1)}}function m0(n,e,t,i,r,o,s,a,l,c,u){let h=e.blueprint.slice();return h[os]=r,h[ve]=i|4|128|8|64,(c!==null||n&&n[ve]&2048)&&(h[ve]|=2048),JN(h),h[Un]=h[pd]=n,h[Vn]=t,h[ho]=s||n&&n[ho],h[Zt]=a||n&&n[Zt],h[ld]=l||n&&n[ld]||null,h[Vr]=o,h[s0]=Lq(),h[bm]=u,h[zN]=c,h[Lr]=e.type==2?n[Lr]:h,h}function p0(n,e,t,i,r){let o=n.data[e];if(o===null)o=PG(n,e,t,i,r),tq()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=i,o.attrs=r;let s=QW();o.injectorIndex=s===null?-1:s.injectorIndex}return Am(o,!0),o}function PG(n,e,t,i,r){let o=i5(),s=r5(),a=s?o:o&&o.parent,l=n.data[e]=LG(n,a,t,e,i,r);return n.firstChild===null&&(n.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function s3(n,e,t,i){if(t===0)return-1;let r=e.length;for(let o=0;o<t;o++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function a3(n,e,t,i,r){let o=pa(),s=i&2;try{Jl(-1),s&&e.length>wi&&r3(n,e,wi,!1),lo(s?2:0,r),t(i,r)}finally{Jl(o),lo(s?3:1,r)}}function l3(n,e,t){if($N(e)){let i=Ge(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{Ge(i)}}}function c3(n,e,t){n5()&&(zG(n,e,t,ar(t,e)),(t.flags&64)===64&&p3(n,e,t))}function u3(n,e,t=ar){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?t(e,n):n[s];n[r++]=a}}}function d3(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=$T(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function $T(n,e,t,i,r,o,s,a,l,c,u){let h=wi+i,p=h+r,g=RG(h,p),w=typeof c=="function"?c():c;return g[_e]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:u}}function RG(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:po);return t}function DG(n,e,t,i){let o=i.get(zq,L5)||t===uo.ShadowDom,s=n.selectRootElement(e,o);return MG(s),s}function MG(n){OG(n)}var OG=()=>null;function NG(n,e,t,i){let r=w3(e);r.push(t),n.firstCreatePass&&v3(n).push(i,r.length-1)}function LG(n,e,t,i,r,o){let s=e?e.injectorIndex:-1,a=0;return GW()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nN(n,e,t,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,l=la.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(r!==null){if(!r.hasOwnProperty(o))continue;c=r[o]}n===0?iN(i,t,c,a,l):iN(i,t,c,a)}return i}function iN(n,e,t,i,r){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,i):o=n[t]=[e,i],r!==void 0&&o.push(r)}function FG(n,e,t){let i=e.directiveStart,r=e.directiveEnd,o=n.data,s=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let h=o[u],p=t?t.get(h):null,g=p?p.inputs:null,w=p?p.outputs:null;l=nN(0,h.inputs,u,l,g),c=nN(1,h.outputs,u,c,w);let y=l!==null&&s!==null&&!gT(e)?XG(l,u,s):null;a.push(y)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function VG(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function h3(n,e,t,i,r,o,s,a){let l=ar(e,t),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(WT(n,t,u,i,r),a0(e)&&BG(t,e.index)):e.type&3?(i=VG(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)):e.type&12}function BG(n,e){let t=ma(e,n);t[ve]&16||(t[ve]|=64)}function f3(n,e,t,i){if(n5()){let r=i===null?null:{"":-1},o=$G(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&m3(n,e,t,s,r,a),r&&WG(t,i,r)}t.mergedAttrs=pm(t.mergedAttrs,t.attrs)}function m3(n,e,t,i,r,o){for(let c=0;c<i.length;c++)pS(zw(t,e),n,i[c].type);GG(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=s3(n,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];t.mergedAttrs=pm(t.mergedAttrs,u.hostAttrs),KG(n,t,e,l,u),qG(l,u,r),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let h=u.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}FG(n,t,o)}function UG(n,e,t,i,r){let o=r.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HG(s)!=a&&s.push(a),s.push(t,i,o)}}function HG(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function zG(n,e,t,i){let r=t.directiveStart,o=t.directiveEnd;a0(t)&&YG(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||zw(t,e),tc(i,e);let s=t.initialInputs;for(let a=r;a<o;a++){let l=n.data[a],c=ec(e,n,a,t);if(tc(c,e),s!==null&&JG(e,a-r,c,l,t,s),ca(l)){let u=ma(t.index,e);u[Vn]=ec(e,n,a,t)}}}function p3(n,e,t){let i=t.directiveStart,r=t.directiveEnd,o=t.index,s=iq();try{Jl(o);for(let a=i;a<r;a++){let l=n.data[a],c=e[a];hS(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&jG(l,c)}}finally{Jl(-1),hS(s)}}function jG(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $G(n,e){let t=n.directiveRegistry,i=null,r=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(pW(e,s.selectors,!1))if(i||(i=[]),ca(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;MS(n,e,l)}else i.unshift(s),MS(n,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function MS(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function WG(n,e,t){if(e){let i=n.localNames=[];for(let r=0;r<e.length;r+=2){let o=t[e[r+1]];if(o==null)throw new F(-301,!1);i.push(e[r],o)}}}function qG(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ca(e)&&(t[""]=n)}}function GG(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function KG(n,e,t,i,r){n.data[i]=r;let o=r.factory||(r.factory=Gl(r.type,!0)),s=new Xl(o,ca(r),Ne);n.blueprint[i]=s,t[i]=s,UG(n,e,i,s3(n,t,r.hostVars,po),r)}function YG(n,e,t){let i=ar(e,n),r=d3(t),o=n[ho].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=g0(n,m0(n,r,null,s,i,e,null,o.createRenderer(i,t),null,null,null));n[e.index]=a}function QG(n,e,t,i,r,o){let s=ar(n,e);ZG(e[Zt],s,o,n.value,t,i,r)}function ZG(n,e,t,i,r,o,s){if(o==null)n.removeAttribute(e,r,t);else{let a=s==null?i0(o):s(o,i||"",r);n.setAttribute(e,r,a,t)}}function JG(n,e,t,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],h=s[a++];o3(i,t,l,c,u,h)}}function XG(n,e,t){let i=null,r=0;for(;r<t.length;){let o=t[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){i===null&&(i=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],t[r+1]);break}}r+=2}return i}function g3(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function b3(n,e){let t=n.contentQueries;if(t!==null){let i=Ge(null);try{for(let r=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s!==-1){let a=n.data[s];ST(o),a.contentQueries(2,e[s],s)}}}finally{Ge(i)}}}function g0(n,e){return n[wm]?n[VO][Nr]=e:n[wm]=e,n[VO]=e,e}function OS(n,e,t){ST(0);let i=Ge(null);try{e(n,t)}finally{Ge(i)}}function w3(n){return n[Lw]??=[]}function v3(n){return n.cleanup??=[]}function y3(n,e){let t=n[ld],i=t?t.get(ts,null):null;i&&i.handleError(e)}function WT(n,e,t,i,r){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],c=e[s],u=n.data[s];o3(u,c,i,a,l,r)}}function eK(n,e,t){let i=QN(e,n);dG(n[Zt],i,t)}function tK(n,e){let t=ma(e,n),i=t[_e];nK(i,t);let r=t[os];r!==null&&t[bm]===null&&(t[bm]=FT(r,t[ld])),qT(i,t,t[Vn])}function nK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qT(n,e,t){TT(e);try{let i=n.viewQuery;i!==null&&OS(1,i,t);let r=n.template;r!==null&&a3(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[es]?.finishViewCreation(n),n.staticContentQueries&&b3(n,e),n.staticViewQueries&&OS(2,n.viewQuery,t);let o=n.components;o!==null&&iK(e,o)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ve]&=-5,kT()}}function iK(n,e){for(let t=0;t<e.length;t++)tK(n,e[t])}function b0(n,e,t,i){let r=Ge(null);try{let o=e.tView,a=n[ve]&4096?4096:16,l=m0(n,o,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[Yl]=c;let u=n[es];return u!==null&&(l[es]=u.createEmbeddedView(o)),qT(o,l,t),l}finally{Ge(r)}}function _3(n,e){let t=Bn+e;if(t<n.length)return n[t]}function ym(n,e){return!e||e.firstChild===null||x5(n)}function w0(n,e,t,i=!0){let r=e[_e];if(pG(r,e,n,t),i){let s=DS(t,n),a=e[Zt],l=e3(a,n[Ql]);l!==null&&fG(r,n[Vr],a,e,l,s)}let o=e[bm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function C3(n,e){let t=vm(n,e);return t!==void 0&&h0(t[_e],t),t}function qw(n,e,t,i,r=!1){for(;t!==null;){if(t.type===128){t=r?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&i.push(fo(o)),ss(o)&&rK(o,i);let s=t.type;if(s&8)qw(n,e,t.child,i);else if(s&32){let a=UT(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=t3(e,t);if(Array.isArray(a))i.push(...a);else{let l=Zl(e[Lr]);qw(l[_e],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}function rK(n,e){for(let t=Bn;t<n.length;t++){let i=n[t],r=i[_e].firstChild;r!==null&&qw(i[_e],i,r,e)}n[Ql]!==n[os]&&e.push(n[Ql])}var E3=[];function oK(n){return n[or]??sK(n)}function sK(n){let e=E3.pop()??Object.create(lK);return e.lView=n,e}function aK(n){n.lView[or]!==n&&(n.lView=null,E3.push(n))}var lK=P(v({},am),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{c0(n.lView)},consumerOnSignalRead(){this.lView[or]=this}});function cK(n){let e=n[or]??Object.create(uK);return e.lView=n,e}var uK=P(v({},am),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Zl(n.lView);for(;e&&!S3(e[_e]);)e=Zl(e);e&&XN(e)},consumerOnSignalRead(){this.lView[or]=this}});function S3(n){return n.type!==2}var dK=100;function T3(n,e=!0,t=0){let i=n[ho],r=i.rendererFactory,o=!1;o||r.begin?.();try{hK(n,t)}catch(s){throw e&&y3(n,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function hK(n,e){let t=o5();try{UO(!0),NS(n,e);let i=0;for(;l0(n);){if(i===dK)throw new F(103,!1);i++,NS(n,1)}}finally{UO(t)}}function fK(n,e,t,i){let r=e[ve];if((r&256)===256)return;let o=!1,s=!1;!o&&e[ho].inlineEffectRunner?.flush(),TT(e);let a=!0,l=null,c=null;o||(S3(n)?(c=oK(e),l=jb(c)):$M()===null?(a=!1,c=cK(e),l=jb(c)):e[or]&&(CE(e[or]),e[or]=null));try{JN(e),eq(n.bindingStartIndex),t!==null&&a3(n,e,t,2,i);let u=(r&3)===3;if(!o)if(u){let g=n.preOrderCheckHooks;g!==null&&Aw(e,g,null)}else{let g=n.preOrderHooks;g!==null&&Iw(e,g,0,null),$E(e,0)}if(s||mK(e),k3(e,0),n.contentQueries!==null&&b3(n,e),!o)if(u){let g=n.contentCheckHooks;g!==null&&Aw(e,g)}else{let g=n.contentHooks;g!==null&&Iw(e,g,1),$E(e,1)}xG(n,e);let h=n.components;h!==null&&I3(e,h,0);let p=n.viewQuery;if(p!==null&&OS(2,p,i),!o)if(u){let g=n.viewCheckHooks;g!==null&&Aw(e,g)}else{let g=n.viewHooks;g!==null&&Iw(e,g,2),$E(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[jE]){for(let g of e[jE])g();e[jE]=null}o||(e[ve]&=-73)}catch(u){throw o||c0(e),u}finally{c!==null&&(yE(c,l),a&&aK(c)),kT()}}function k3(n,e){for(let t=R5(n);t!==null;t=D5(t))for(let i=Bn;i<t.length;i++){let r=t[i];A3(r,e)}}function mK(n){for(let e=R5(n);e!==null;e=D5(e)){if(!(e[ve]&Vw.HasTransplantedViews))continue;let t=e[cd];for(let i=0;i<t.length;i++){let r=t[i];XN(r)}}}function pK(n,e,t){let i=ma(e,n);A3(i,t)}function A3(n,e){ET(n)&&NS(n,e)}function NS(n,e){let i=n[_e],r=n[ve],o=n[or],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&_E(o)),s||=!1,o&&(o.dirty=!1),n[ve]&=-9217,s)fK(i,n,i.template,n[Vn]);else if(r&8192){k3(n,1);let a=i.components;a!==null&&I3(n,a,1)}}function I3(n,e,t){for(let i=0;i<e.length;i++)pK(n,e[i],t)}function GT(n,e){let t=o5()?64:1088;for(n[ho].changeDetectionScheduler?.notify(e);n;){n[ve]|=t;let i=Zl(n);if(cS(n)&&!i)return n;n=i}return null}var nc=class{get rootNodes(){let e=this._lView,t=e[_e];return qw(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vn]}set context(e){this._lView[Vn]=e}get destroyed(){return(this._lView[ve]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Un];if(ss(e)){let t=e[Fw],i=t?t.indexOf(this):-1;i>-1&&(vm(e,i),Ow(t,i))}this._attachedToViewContainer=!1}h0(this._lView[_e],this._lView)}onDestroy(e){e5(this._lView,e)}markForCheck(){GT(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ve]&=-129}reattach(){dS(this._lView),this._lView[ve]|=128}detectChanges(){this._lView[ve]|=1024,T3(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=cS(this._lView),t=this._lView[Yl];t!==null&&!e&&HT(t,this._lView),Z5(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let t=cS(this._lView),i=this._lView[Yl];i!==null&&!t&&J5(i,this._lView),dS(this._lView)}},ic=(()=>{class n{static{this.__NG_ELEMENT_ID__=wK}}return n})(),gK=ic,bK=class extends gK{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let r=b0(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new nc(r)}};function wK(){return KT(Ei(),Ye())}function KT(n,e){return n.type&4?new bK(e,n,bd(n,e)):null}var kAe=new RegExp(`^(\\d+)*(${Uq}|${Bq})*(.*)`);var vK=()=>null;function _m(n,e){return vK(n,e)}var dd=class{},v0=new X("",{providedIn:"root",factory:()=>!1});var x3=new X(""),P3=new X(""),LS=class{},Gw=class{};function yK(n){let e=Error(`No component factory found for ${Jn(n)}.`);return e[_K]=n,e}var _K="ngComponent";var FS=class{resolveComponentFactory(e){throw yK(e)}},hd=class{static{this.NULL=new FS}},da=class{},ba=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>CK()}}return n})();function CK(){let n=Ye(),e=Ei(),t=ma(e.index,n);return(aa(t)?t:n)[Zt]}var EK=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>null})}}return n})();function VS(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=tS(r,a);else if(o==2){let l=a,c=e[++s];i=tS(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}var Kw=class extends hd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Kl(e);return new Cm(t,this.ngModule)}};function rN(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let r=n[i];if(r===void 0)continue;let o=Array.isArray(r),s=o?r[0]:r,a=o?r[1]:la.None;e?t.push({propName:s,templateName:i,isSignal:(a&la.SignalBased)!==0}):t.push({propName:s,templateName:i})}return t}function SK(n){let e=n.toLowerCase();return e==="svg"?YN:e==="math"?BW:null}var Cm=class extends Gw{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=rN(e.inputs,!0);if(t!==null)for(let r of i)t.hasOwnProperty(r.propName)&&(r.transform=t[r.propName]);return i}get outputs(){return rN(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=vW(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let o=Ge(null);try{r=r||this.ngModule;let s=r instanceof bi?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new fS(e,s):e,l=a.get(da,null);if(l===null)throw new F(407,!1);let c=a.get(EK,null),u=a.get(dd,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:u},p=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",w=i?DG(p,i,this.componentDef.encapsulation,a):Q5(p,g,SK(g)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let E=null;w!==null&&(E=FT(w,a,!0));let T=$T(0,null,null,1,0,null,null,null,null,null,null),x=m0(null,T,null,y,null,null,h,p,a,null,E);TT(x);let V,Q,he=null;try{let N=this.componentDef,$,H=null;N.findHostDirectiveDefs?($=[],H=new Map,N.findHostDirectiveDefs(N,$,H),$.push(N)):$=[N];let qe=TK(x,w);he=kK(qe,w,N,$,x,h,p),Q=CT(T,wi),w&&xK(p,N,w,i),t!==void 0&&PK(Q,this.ngContentSelectors,t),V=IK(he,N,$,H,x,[RK]),qT(T,x,null)}catch(N){throw he!==null&&CS(he),CS(x),N}finally{kT()}return new BS(this.componentType,V,bd(Q,x),x,Q)}finally{Ge(o)}}},BS=class extends LS{constructor(e,t,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new nc(r,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;WT(o[_e],o,r,e,t),this.previousInputValues.set(e,t);let s=ma(this._tNode.index,o);GT(s,1)}}get injector(){return new ql(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function TK(n,e){let t=n[_e],i=wi;return n[i]=e,p0(t,i,2,"#host",null)}function kK(n,e,t,i,r,o,s){let a=r[_e];AK(i,n,e,s);let l=null;e!==null&&(l=FT(e,r[ld]));let c=o.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let h=m0(r,d3(t),null,u,r[n.index],n,o,c,null,null,l);return a.firstCreatePass&&MS(a,n,i.length-1),g0(r,h),r[n.index]=h}function AK(n,e,t,i){for(let r of n)e.mergedAttrs=pm(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(VS(e,e.mergedAttrs,!0),t!==null&&i3(i,t,e))}function IK(n,e,t,i,r,o){let s=Ei(),a=r[_e],l=ar(s,r);m3(a,r,s,t,null,i);for(let u=0;u<t.length;u++){let h=s.directiveStart+u,p=ec(r,a,h,s);tc(p,r)}p3(a,r,s),l&&tc(l,r);let c=ec(r,a,s.directiveStart+s.componentOffset,s);if(n[Vn]=r[Vn]=c,o!==null)for(let u of o)u(c,e);return l3(a,s,r),c}function xK(n,e,t,i){if(i)oS(n,t,["ng-version","18.2.11"]);else{let{attrs:r,classes:o}=yW(e.selectors[0]);r&&oS(n,t,r),o&&o.length>0&&n3(n,t,o.join(" "))}}function PK(n,e,t){let i=n.projection=[];for(let r=0;r<e.length;r++){let o=t[r];i.push(o!=null?Array.from(o):null)}}function RK(){let n=Ei();PT(Ye()[_e],n)}var wa=(()=>{class n{static{this.__NG_ELEMENT_ID__=DK}}return n})();function DK(){let n=Ei();return D3(n,Ye())}var MK=wa,R3=class extends MK{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return bd(this._hostTNode,this._hostLView)}get injector(){return new ql(this._hostTNode,this._hostLView)}get parentInjector(){let e=RT(this._hostTNode,this._hostLView);if(p5(e)){let t=Uw(e,this._hostLView),i=Bw(e),r=t[_e].data[i+8];return new ql(r,t)}else return new ql(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=oN(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=_m(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,r,ym(this._hostTNode,s)),a}createComponent(e,t,i,r,o){let s=e&&!NW(e),a;if(s)a=t;else{let w=t||{};a=w.index,i=w.injector,r=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let l=s?e:new Cm(Kl(e)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let y=(s?c:this.parentInjector).get(bi,null);y&&(o=y)}let u=Kl(l.componentType??{}),h=_m(this._lContainer,u?.id??null),p=h?.firstChild??null,g=l.create(c,r,p,o);return this.insertImpl(g.hostView,a,ym(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let r=e._lView;if(HW(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Un],c=new R3(l,l[Vr],l[Un]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return w0(s,r,o,i),e.attachToViewContainerRef(),AN(YE(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=oN(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=vm(this._lContainer,t);i&&(Ow(YE(this._lContainer),t),h0(i[_e],i))}detach(e){let t=this._adjustIndex(e,-1),i=vm(this._lContainer,t);return i&&Ow(YE(this._lContainer),t)!=null?new nc(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function oN(n){return n[Fw]}function YE(n){return n[Fw]||(n[Fw]=[])}function D3(n,e){let t,i=e[n.index];return ss(i)?t=i:(t=g3(i,e,null,n),e[n.index]=t,g0(e,t)),NK(t,e,n,i),new R3(t,n,e)}function OK(n,e){let t=n[Zt],i=t.createComment(""),r=ar(e,n),o=e3(t,r);return Ww(t,o,i,yG(t,r),!1),i}var NK=VK,LK=()=>!1;function FK(n,e,t){return LK(n,e,t)}function VK(n,e,t,i){if(n[Ql])return;let r;t.type&8?r=fo(i):r=OK(e,t),n[Ql]=r}var US=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},HS=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,r=[];for(let o=0;o<i;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new n(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)YT(e,t).matches!==null&&this.queries[t].setDirty()}},zS=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=qK(e):this.predicate=e}},jS=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let r=t!==null?t.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},$S=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,t,BK(t,o)),this.matchTNodeWithReadOption(e,t,xw(t,e,o,!1,!1))}else i===ic?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,xw(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Si||r===wa||r===ic&&t.type&4)this.addMatch(t.index,-2);else{let o=xw(t,e,r,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function BK(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function UK(n,e){return n.type&11?bd(n,e):n.type&4?KT(n,e):null}function HK(n,e,t,i){return t===-1?UK(e,n):t===-2?zK(n,e,i):ec(n,n[_e],t,e)}function zK(n,e,t){if(t===Si)return bd(e,n);if(t===ic)return KT(e,n);if(t===wa)return D3(e,n)}function M3(n,e,t,i){let r=e[es].queries[i];if(r.matches===null){let o=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(HK(e,u,s[l+1],t.metadata.read))}}r.matches=a}return r.matches}function WS(n,e,t,i){let r=n.queries.getByIndex(t),o=r.matches;if(o!==null){let s=M3(n,e,r,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let h=Bn;h<u.length;h++){let p=u[h];p[Yl]===p[Un]&&WS(p[_e],p,c,i)}if(u[cd]!==null){let h=u[cd];for(let p=0;p<h.length;p++){let g=h[p];WS(g[_e],g,c,i)}}}}}return i}function jK(n,e){return n[es].queries[e].queryList}function $K(n,e,t){let i=new _S((t&4)===4);return NG(n,e,i,i.destroy),(e[es]??=new HS).queries.push(new US(i))-1}function WK(n,e,t){let i=vn();return i.firstCreatePass&&(GK(i,new zS(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),$K(i,Ye(),e)}function qK(n){return n.split(",").map(e=>e.trim())}function GK(n,e,t){n.queries===null&&(n.queries=new jS),n.queries.track(new $S(e,t))}function YT(n,e){return n.queries.getByIndex(e)}function KK(n,e){let t=n[_e],i=YT(t,e);return i.crossesNgTemplate?WS(t,n,e,[]):M3(t,n,i,e)}var sN=new Set;function us(n){sN.has(n)||(sN.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function YK(n){return typeof n=="function"&&n[Zo]!==void 0}function y0(n,e){us("NgSignals");let t=tO(n),i=t[Zo];return e?.equal&&(i.equal=e.equal),t.set=r=>EE(i,r),t.update=r=>nO(i,r),t.asReadonly=QK.bind(t),t}function QK(){let n=this[Zo];if(n.readonlyFn===void 0){let e=()=>this();e[Zo]=n,n.readonlyFn=e}return n.readonlyFn}function O3(n){return YK(n)&&typeof n.set=="function"}function ZK(n){return Object.getPrototypeOf(n.prototype).constructor}function oe(n){let e=ZK(n.type),t=!0,i=[n];for(;e;){let r;if(ca(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);let s=n;s.inputs=Ew(n.inputs),s.inputTransforms=Ew(n.inputTransforms),s.declaredInputs=Ew(n.declaredInputs),s.outputs=Ew(n.outputs);let a=r.hostBindings;a&&nY(n,a);let l=r.viewQuery,c=r.contentQueries;if(l&&eY(n,l),c&&tY(n,c),JK(n,r),B$(n.outputs,r.outputs),ca(r)&&r.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===oe&&(t=!1)}}e=Object.getPrototypeOf(e)}XK(i)}function JK(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;n.inputTransforms??={},n.inputTransforms[r]=e.inputTransforms[r]}}}function XK(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=pm(r.hostAttrs,t=pm(t,r.hostAttrs))}}function Ew(n){return n===od?{}:n===gi?[]:n}function eY(n,e){let t=n.viewQuery;t?n.viewQuery=(i,r)=>{e(i,r),t(i,r)}:n.viewQuery=e}function tY(n,e){let t=n.contentQueries;t?n.contentQueries=(i,r,o)=>{e(i,r,o),t(i,r,o)}:n.contentQueries=e}function nY(n,e){let t=n.hostBindings;t?n.hostBindings=(i,r)=>{e(i,r),t(i,r)}:n.hostBindings=e}var ha=class{},Em=class{};var qS=class extends ha{constructor(e,t,i,r=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Kw(this);let o=NN(e);this._bootstrapComponents=Y5(o.bootstrap),this._r3Injector=S5(e,t,[{provide:ha,useValue:this},{provide:hd,useValue:this.componentFactoryResolver},...i],Jn(e),new Set(["environment"])),r&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},GS=class extends Em{constructor(e){super(),this.moduleType=e}create(e){return new qS(this.moduleType,e,[])}};var Yw=class extends ha{constructor(e){super(),this.componentFactoryResolver=new Kw(this),this.instance=null;let t=new gm([...e.providers,{provide:ha,useValue:this},{provide:hd,useValue:this.componentFactoryResolver}],e.parent||yT(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function QT(n,e,t=null){return new Yw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function N3(n){return rY(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function iY(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function rY(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function oY(n,e,t){return n[e]=t}function ds(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function sY(n){return(n.flags&32)===32}function aY(n,e,t,i,r,o,s,a,l){let c=e.consts,u=p0(e,n,4,s||null,a||null);f3(e,t,u,ud(c,l)),PT(e,u);let h=u.tView=$T(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function KS(n,e,t,i,r,o,s,a,l,c){let u=t+wi,h=e.firstCreatePass?aY(u,e,n,i,r,o,s,a,l):e.data[u];Am(h,!1);let p=lY(e,n,h,t);IT()&&zT(e,n,p,h),tc(p,n);let g=g3(p,n,p,h);return n[u]=g,g0(n,g),FK(g,h,n),_T(h)&&c3(e,n,h),l!=null&&u3(n,h,c),h}function Hn(n,e,t,i,r,o,s,a){let l=Ye(),c=vn(),u=ud(c.consts,o);return KS(l,c,n,e,t,i,r,u,s,a),Hn}var lY=cY;function cY(n,e,t,i){return xT(!0),e[Zt].createComment("")}var hm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(hm||{}),uY=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}}return n})(),aN=class n{constructor(){this.ngZone=L(st),this.scheduler=L(dd),this.errorHandler=L(ts,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[hm.EarlyRead,hm.Write,hm.MixedReadWrite,hm.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=K({token:n,providedIn:"root",factory:()=>new n})}};function go(n,e,t,i){let r=Ye(),o=gd();if(ds(r,o,e)){let s=vn(),a=AT();QG(a,r,n,e,t,i)}return go}function L3(n,e,t,i){return ds(n,gd(),t)?e+i0(t)+i:po}function Sw(n,e){return n<<17|e<<2}function rc(n){return n>>17&32767}function dY(n){return(n&2)==2}function hY(n,e){return n&131071|e<<17}function YS(n){return n|2}function fd(n){return(n&131068)>>2}function QE(n,e){return n&-131069|e<<2}function fY(n){return(n&1)===1}function QS(n){return n|1}function mY(n,e,t,i,r,o){let s=o?e.classBindings:e.styleBindings,a=rc(s),l=fd(s);n[i]=t;let c=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||km(h,u)>0)&&(c=!0)}else u=t;if(r)if(l!==0){let p=rc(n[a+1]);n[i+1]=Sw(p,a),p!==0&&(n[p+1]=QE(n[p+1],i)),n[a+1]=hY(n[a+1],i)}else n[i+1]=Sw(a,0),a!==0&&(n[a+1]=QE(n[a+1],i)),a=i;else n[i+1]=Sw(l,0),a===0?a=i:n[l+1]=QE(n[l+1],i),l=i;c&&(n[i+1]=YS(n[i+1])),lN(n,u,i,!0),lN(n,u,i,!1),pY(e,u,n,i,o),s=Sw(a,l),o?e.classBindings=s:e.styleBindings=s}function pY(n,e,t,i,r){let o=r?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&km(o,e)>=0&&(t[i+1]=QS(t[i+1]))}function lN(n,e,t,i){let r=n[t+1],o=e===null,s=i?rc(r):fd(r),a=!1;for(;s!==0&&(a===!1||o);){let l=n[s],c=n[s+1];gY(l,e)&&(a=!0,n[s+1]=i?QS(c):YS(c)),s=i?rc(c):fd(c)}a&&(n[t+1]=i?YS(r):QS(r))}function gY(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?km(n,e)>=0:!1}var Or={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bY(n){return n.substring(Or.key,Or.keyEnd)}function wY(n){return vY(n),F3(n,V3(n,0,Or.textEnd))}function F3(n,e){let t=Or.textEnd;return t===e?-1:(e=Or.keyEnd=yY(n,Or.key=e,t),V3(n,e,t))}function vY(n){Or.key=0,Or.keyEnd=0,Or.value=0,Or.valueEnd=0,Or.textEnd=n.length}function V3(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function yY(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ti(n,e,t){let i=Ye(),r=gd();if(ds(i,r,e)){let o=vn(),s=AT();h3(o,s,i,n,e,i[Zt],t,!1)}return Ti}function ZS(n,e,t,i,r){let o=e.inputs,s=r?"class":"style";WT(n,t,o[s],s,i)}function xm(n,e){return CY(n,e,null,!0),xm}function _Y(n,e){for(let t=wY(e);t>=0;t=F3(e,t))pT(n,bY(e),!0)}function CY(n,e,t,i){let r=Ye(),o=vn(),s=s5(2);if(o.firstUpdatePass&&U3(o,n,s,i),e!==po&&ds(r,s,e)){let a=o.data[pa()];H3(o,a,r,r[Zt],n,r[s+1]=PY(e,t),i,s)}}function EY(n,e,t,i){let r=vn(),o=s5(2);r.firstUpdatePass&&U3(r,null,o,i);let s=Ye();if(t!==po&&ds(s,o,t)){let a=r.data[pa()];if(z3(a,i)&&!B3(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=tS(l,t||"")),ZS(r,a,s,t,i)}else xY(r,a,s,s[Zt],s[o+1],s[o+1]=IY(n,e,t),i,o)}}function B3(n,e){return e>=n.expandoStartIndex}function U3(n,e,t,i){let r=n.data;if(r[t+1]===null){let o=r[pa()],s=B3(n,t);z3(o,i)&&e===null&&!s&&(e=!1),e=SY(r,o,e,i),mY(r,o,e,t,s,i)}}function SY(n,e,t,i){let r=rq(n),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(t=ZE(null,n,e,t,i),t=Sm(t,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==r)if(t=ZE(r,n,e,t,i),o===null){let l=TY(n,e,i);l!==void 0&&Array.isArray(l)&&(l=ZE(null,n,e,l[1],i),l=Sm(l,e.attrs,i),kY(n,e,i,l))}else o=AY(n,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),t}function TY(n,e,t){let i=t?e.classBindings:e.styleBindings;if(fd(i)!==0)return n[rc(i)]}function kY(n,e,t,i){let r=t?e.classBindings:e.styleBindings;n[rc(r)]=i}function AY(n,e,t){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=n[o].hostAttrs;i=Sm(i,s,t)}return Sm(i,e.attrs,t)}function ZE(n,e,t,i,r){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],i=Sm(i,o.hostAttrs,r),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function Sm(n,e,t){let i=t?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),pT(n,s,t?!0:e[++o]))}return n===void 0?null:n}function IY(n,e,t){if(t==null||t==="")return gi;let i=[],r=mo(t);if(Array.isArray(r))for(let o=0;o<r.length;o++)n(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&n(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function xY(n,e,t,i,r,o,s,a){r===po&&(r=gi);let l=0,c=0,u=0<r.length?r[0]:null,h=0<o.length?o[0]:null;for(;u!==null||h!==null;){let p=l<r.length?r[l+1]:void 0,g=c<o.length?o[c+1]:void 0,w=null,y;u===h?(l+=2,c+=2,p!==g&&(w=h,y=g)):h===null||u!==null&&u<h?(l+=2,w=u):(c+=2,w=h,y=g),w!==null&&H3(n,e,t,i,w,y,s,a),u=l<r.length?r[l]:null,h=c<o.length?o[c]:null}}function H3(n,e,t,i,r,o,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],u=fY(c)?cN(l,e,t,r,fd(c),s):void 0;if(!Qw(u)){Qw(o)||dY(c)&&(o=cN(l,null,t,r,a,s));let h=QN(pa(),t);AG(i,s,h,r,o)}}function cN(n,e,t,i,r,o){let s=e===null,a;for(;r>0;){let l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=u===null,p=t[r+1];p===po&&(p=h?gi:void 0);let g=h?HE(p,i):u===i?p:void 0;if(c&&!Qw(g)&&(g=HE(l,i)),Qw(g)&&(a=g,s))return a;let w=n[r+1];r=s?rc(w):fd(w)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=HE(l,i))}return a}function Qw(n){return n!==void 0}function PY(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Jn(mo(n)))),n}function z3(n,e){return(n.flags&(e?8:16))!==0}function ZT(n,e,t){let i=Ye(),r=L3(i,n,e,t);EY(pT,_Y,r,!0)}var JS=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),r=Math.max(e,t),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,t){this.attach(t,this.detach(e))}};function JE(n,e,t,i,r){return n===t&&Object.is(e,i)?1:Object.is(r(n,e),r(t,i))?-1:0}function RY(n,e,t){let i,r,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=n.at(o),u=e[o],h=JE(o,c,o,u,t);if(h!==0){h<0&&n.updateValue(o,u),o++;continue}let p=n.at(s),g=e[l],w=JE(s,p,l,g,t);if(w!==0){w<0&&n.updateValue(s,g),s--,l--;continue}let y=t(o,c),E=t(s,p),T=t(o,u);if(Object.is(T,E)){let x=t(l,g);Object.is(x,y)?(n.swap(o,s),n.updateValue(s,g),l--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(i??=new Zw,r??=dN(n,o,s,t),XS(n,i,o,T))n.updateValue(o,u),o++,s++;else if(r.has(T))i.set(y,n.detach(o)),s--;else{let x=n.create(o,e[o]);n.attach(o,x),o++,s++}}for(;o<=l;)uN(n,i,t,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=n.at(o),h=c.value,p=JE(o,u,o,h,t);if(p!==0)p<0&&n.updateValue(o,h),o++,c=l.next();else{i??=new Zw,r??=dN(n,o,s,t);let g=t(o,h);if(XS(n,i,o,g))n.updateValue(o,h),o++,s++,c=l.next();else if(!r.has(g))n.attach(o,n.create(o,h)),o++,s++,c=l.next();else{let w=t(o,u);i.set(w,n.detach(o)),s--}}}for(;!c.done;)uN(n,i,t,n.length,c.value),c=l.next()}for(;o<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function XS(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function uN(n,e,t,i,r){if(XS(n,e,i,t(i,r)))n.updateValue(i,r);else{let o=n.create(i,r);n.attach(i,o)}}function dN(n,e,t,i){let r=new Set;for(let o=e;o<=t;o++)r.add(i(o,n.at(o)));return r}var Zw=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,t)}}};function bo(n,e){us("NgControlFlow");let t=Ye(),i=gd(),r=t[i]!==po?t[i]:-1,o=r!==-1?Jw(t,wi+r):void 0,s=0;if(ds(t,i,n)){let a=Ge(null);try{if(o!==void 0&&C3(o,s),n!==-1){let l=wi+n,c=Jw(t,l),u=iT(t[_e],l),h=_m(c,u.tView.ssrId),p=b0(t,u,e,{dehydratedView:h});w0(c,p,s,ym(u,h))}}finally{Ge(a)}}else if(o!==void 0){let a=_3(o,s);a!==void 0&&(a[Vn]=e)}}var eT=class{constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Bn}};function va(n){return n}var tT=class{constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function ya(n,e,t,i,r,o,s,a,l,c,u,h,p){us("NgControlFlow");let g=Ye(),w=vn(),y=l!==void 0,E=Ye(),T=a?s.bind(E[Lr][Vn]):s,x=new tT(y,T);E[wi+n]=x,KS(g,w,n+1,e,t,i,r,ud(w.consts,o)),y&&KS(g,w,n+2,l,c,u,h,ud(w.consts,p))}var nT=class extends JS{constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Bn}at(e){return this.getLView(e)[Vn].$implicit}attach(e,t){let i=t[bm];this.needsIndexUpdate||=e!==this.length,w0(this.lContainer,t,e,ym(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DY(this.lContainer,e)}create(e,t){let i=_m(this.lContainer,this.templateTNode.tView.ssrId),r=b0(this.hostLView,this.templateTNode,new eT(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){h0(e[_e],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Vn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Vn].$index=e}getLView(e){return MY(this.lContainer,e)}};function _a(n){let e=Ge(null),t=pa();try{let i=Ye(),r=i[_e],o=i[t],s=t+1,a=Jw(i,s);if(o.liveCollection===void 0){let c=iT(r,s);o.liveCollection=new nT(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(RY(l,n,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=gd(),u=l.length===0;if(ds(i,c,u)){let h=t+2,p=Jw(i,h);if(u){let g=iT(r,h),w=_m(p,g.tView.ssrId),y=b0(i,g,void 0,{dehydratedView:w});w0(p,y,0,ym(g,w))}else C3(p,0)}}}finally{Ge(e)}}function Jw(n,e){return n[e]}function DY(n,e){return vm(n,e)}function MY(n,e){return _3(n,e)}function iT(n,e){return CT(n,e)}function OY(n,e,t,i,r,o){let s=e.consts,a=ud(s,r),l=p0(e,n,2,i,a);return f3(e,t,l,ud(s,o)),l.attrs!==null&&VS(l,l.attrs,!1),l.mergedAttrs!==null&&VS(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function d(n,e,t,i){let r=Ye(),o=vn(),s=wi+n,a=r[Zt],l=o.firstCreatePass?OY(s,o,r,e,t,i):o.data[s],c=NY(o,r,l,a,e,n);r[s]=c;let u=_T(l);return Am(l,!0),i3(a,c,l),!sY(l)&&IT()&&zT(o,r,c,l),$W()===0&&tc(c,r),WW(),u&&(c3(o,r,l),l3(o,l,r)),i!==null&&u3(r,l),d}function f(){let n=Ei();r5()?ZW():(n=n.parent,Am(n,!1));let e=n;KW(e)&&YW(),qW();let t=vn();return t.firstCreatePass&&(PT(t,n),$N(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&hq(e)&&ZS(t,e,Ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fq(e)&&ZS(t,e,Ye(),e.stylesWithoutHost,!1),f}function b(n,e,t,i){return d(n,e,t,i),f(),b}var NY=(n,e,t,i,r,o)=>(xT(!0),Q5(i,r,lq()));function hs(){return Ye()}var Xw="en-US";var LY=Xw;function FY(n){typeof n=="string"&&(LY=n.toLowerCase().replace(/_/g,"-"))}var VY=(n,e,t)=>{};function M(n,e,t,i){let r=Ye(),o=vn(),s=Ei();return j3(o,r,r[Zt],s,n,e,i),M}function BY(n,e,t,i){let r=n.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===t&&r[o+1]===i){let a=e[Lw],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function j3(n,e,t,i,r,o,s){let a=_T(i),c=n.firstCreatePass&&v3(n),u=e[Vn],h=w3(e),p=!0;if(i.type&3||s){let y=ar(i,e),E=s?s(y):y,T=h.length,x=s?Q=>s(fo(Q[i.index])):i.index,V=null;if(!s&&a&&(V=BY(n,e,r,i.index)),V!==null){let Q=V.__ngLastListenerFn__||V;Q.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,p=!1}else{o=fN(i,e,u,o),VY(y,r,o);let Q=t.listen(E,r,o);h.push(o,Q),c&&c.push(r,x,T,T+1)}}else o=fN(i,e,u,o);let g=i.outputs,w;if(p&&g!==null&&(w=g[r])){let y=w.length;if(y)for(let E=0;E<y;E+=2){let T=w[E],x=w[E+1],he=e[T][x].subscribe(o),N=h.length;h.push(o,he),c&&c.push(r,i.index,N,-(N+1))}}}function hN(n,e,t,i){let r=Ge(null);try{return lo(6,e,t),t(i)!==!1}catch(o){return y3(n,o),!1}finally{lo(7,e,t),Ge(r)}}function fN(n,e,t,i){return function r(o){if(o===Function)return i;let s=n.componentOffset>-1?ma(n.index,e):e;GT(s,5);let a=hN(e,t,i,o),l=r.__ngNextListenerFn__;for(;l;)a=hN(e,t,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function cn(n=1){return sq(n)}function $3(n,e,t){WK(n,e,t)}function JT(n){let e=Ye(),t=vn(),i=a5();ST(i+1);let r=YT(t,i);if(n.dirty&&UW(e)===((r.metadata.flags&2)===2)){if(r.matches===null)n.reset([]);else{let o=KK(e,i);n.reset(o,Mq),n.notifyOnChanges()}return!0}return!1}function XT(){return jK(Ye(),a5())}function UY(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function W3(n){let e=JW();return ZN(e,wi+n)}function m(n,e=""){let t=Ye(),i=vn(),r=n+wi,o=i.firstCreatePass?p0(i,r,1,e,null):i.data[r],s=HY(i,t,o,e,n);t[r]=s,IT()&&zT(i,t,s,o),Am(o,!1)}var HY=(n,e,t,i,r)=>(xT(!0),uG(e[Zt],i));function Br(n){return Ur("",n,""),Br}function Ur(n,e,t){let i=Ye(),r=L3(i,n,e,t);return r!==po&&eK(i,pa(),r),Ur}function Ca(n,e,t){O3(e)&&(e=e());let i=Ye(),r=gd();if(ds(i,r,e)){let o=vn(),s=AT();h3(o,s,i,n,e,i[Zt],t,!1)}return Ca}function sc(n,e){let t=O3(n);return t&&n.set(e),t}function Ea(n,e){let t=Ye(),i=vn(),r=Ei();return j3(i,t,t[Zt],r,n,e),Ea}function zY(n,e,t){let i=vn();if(i.firstCreatePass){let r=ca(n);rT(t,i.data,i.blueprint,r,!0),rT(e,i.data,i.blueprint,r,!1)}}function rT(n,e,t,i,r){if(n=Zn(n),Array.isArray(n))for(let o=0;o<n.length;o++)rT(n[o],e,t,i,r);else{let o=vn(),s=Ye(),a=Ei(),l=ad(n)?n:Zn(n.provide),c=HN(n),u=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(ad(n)||!n.multi){let g=new Xl(c,r,Ne),w=eS(l,e,r?u:u+p,h);w===-1?(pS(zw(a,s),o,l),XE(o,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[w]=g,s[w]=g)}else{let g=eS(l,e,u+p,h),w=eS(l,e,u,u+p),y=g>=0&&t[g],E=w>=0&&t[w];if(r&&!E||!r&&!y){pS(zw(a,s),o,l);let T=WY(r?$Y:jY,t.length,r,i,c);!r&&E&&(t[w].providerFactory=T),XE(o,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),t.push(T),s.push(T)}else{let T=q3(t[r?w:g],c,!r&&i);XE(o,n,g>-1?g:w,T)}!r&&i&&E&&t[w].componentProviders++}}}function XE(n,e,t,i){let r=ad(e),o=AW(e);if(r||o){let l=(o?Zn(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(t);u===-1?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function q3(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function eS(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function jY(n,e,t,i){return oT(this.multi,[])}function $Y(n,e,t,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ec(t,t[_e],this.providerFactory.index,i);o=a.slice(0,s),oT(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],oT(r,o);return o}function oT(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function WY(n,e,t,i,r){let o=new Xl(n,t,Ne);return o.multi=[],o.index=e,o.componentProviders=0,q3(o,r,i&&!t),o}function ac(n,e=[]){return t=>{t.providersResolver=(i,r)=>zY(i,r?r(n):n,e)}}var qY=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=VN(!1,t.type),r=i.length>0?QT([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,r)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=K({token:n,providedIn:"environment",factory:()=>new n(W(bi))})}}return n})();function re(n){us("NgStandalone"),n.getStandaloneInjector=e=>e.get(qY).getOrCreateStandaloneInjector(n)}function GY(n,e){let t=n[e];return t===po?void 0:t}function KY(n,e,t,i,r,o){let s=e+t;return ds(n,s,r)?oY(n,s+1,o?i.call(o,r):i(r)):GY(n,s+1)}function G3(n,e){let t=vn(),i,r=n+wi;t.firstCreatePass?(i=YY(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??=[]).push(r,i.onDestroy)):i=t.data[r];let o=i.factory||(i.factory=Gl(i.type,!0)),s,a=pi(Ne);try{let l=Hw(!1),c=o();return Hw(l),UY(t,Ye(),r,c),c}finally{pi(a)}}function YY(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function K3(n,e,t){let i=n+wi,r=Ye(),o=ZN(r,i);return QY(r,i)?KY(r,XW(),e,o.transform,t,o):o.transform(t)}function QY(n,e){return n[_e].data[e].pure}var _0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var ek=new X(""),Pm=new X(""),C0=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,tk||(ZY(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(t)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},i)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}static{this.\u0275fac=function(i){return new(i||n)(W(st),W(E0),W(Pm))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),E0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return tk?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function ZY(n){tk=n}var tk;function lc(n){return!!n&&typeof n.then=="function"}function Y3(n){return!!n&&typeof n.subscribe=="function"}var Q3=new X(""),Z3=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=L(Q3,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let r of this.appInits){let o=r();if(lc(o))t.push(o);else if(Y3(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),S0=new X("");function JY(){eO(()=>{throw new F(600,!1)})}function XY(n){return n.isBoundToModule}var eQ=10;function tQ(n,e,t){try{let i=t();return lc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var fs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(Rq),this.afterRenderManager=L(uY),this.zonelessEnabled=L(v0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Rt,this.afterTick=new Rt,this.componentTypes=[],this.components=[],this.isStable=L(as).hasPendingTasks.pipe(me(t=>!t)),this._injector=L(bi)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let r=t instanceof Gw;if(!this._injector.get(Z3).done){let p=!r&&ON(t),g=!1;throw new F(405,g)}let s;r?s=t:s=this._injector.get(hd).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=XY(s)?void 0:this._injector.get(ha),l=i||s.selector,c=s.create(ua.NULL,[],l,a),u=c.location.nativeElement,h=c.injector.get(ek,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Pw(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new F(101,!1);let t=Ge(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ge(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(da,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<eQ;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:r,notifyErrorHandler:o}of this._views)nQ(r,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>l0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;Pw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(S0,[]);[...this._bootstrapListeners,...i].forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Pw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new F(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pw(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nQ(n,e,t,i){if(!t&&!l0(n))return;T3(n,e,t&&!i?0:1)}var sT=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},nk=(()=>{class n{compileModuleSync(t){return new GS(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),r=NN(t),o=Y5(r.declarations).reduce((s,a)=>{let l=Kl(a);return l&&s.push(new Cm(l)),s},[]);return new sT(i,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var iQ=(()=>{class n{constructor(){this.zone=L(st),this.changeDetectionScheduler=L(dd),this.applicationRef=L(fs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),rQ=new X("",{factory:()=>!1});function J3({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new st(P(v({},eL()),{scheduleInRootZone:t})),[{provide:st,useFactory:n},{provide:sd,multi:!0,useFactory:()=>{let i=L(iQ,{optional:!0});return()=>i.initialize()}},{provide:sd,multi:!0,useFactory:()=>{let i=L(oQ);return()=>{i.initialize()}}},e===!0?{provide:x3,useValue:!0}:[],{provide:P3,useValue:t??T5}]}function X3(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=J3({ngZoneFactory:()=>{let r=eL(n);return r.scheduleInRootZone=t,r.shouldCoalesceEventChangeDetection&&us("NgZone_CoalesceEvent"),new st(r)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return md([{provide:rQ,useValue:!0},{provide:v0,useValue:!1},i])}function eL(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var oQ=(()=>{class n{constructor(){this.subscription=new Ut,this.initialized=!1,this.zone=L(st),this.pendingTasks=L(as)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{st.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{st.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sQ=(()=>{class n{constructor(){this.appRef=L(fs),this.taskService=L(as),this.ngZone=L(st),this.zonelessEnabled=L(v0),this.disableScheduling=L(x3,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ut,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get($w):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(P3,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof yS||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?WO:A5;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get($w+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,WO(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function aQ(){return typeof $localize<"u"&&$localize.locale||Xw}var ik=new X("",{providedIn:"root",factory:()=>L(ik,Fe.Optional|Fe.SkipSelf)||aQ()});var aT=new X("");function Tw(n){return!n.moduleRef}function lQ(n){let e=Tw(n)?n.r3Injector:n.moduleRef.injector,t=e.get(st);return t.run(()=>{Tw(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(ts,null),r;if(t.runOutsideAngular(()=>{r=t.onError.subscribe({next:o=>{i.handleError(o)}})}),Tw(n)){let o=()=>e.destroy(),s=n.platformInjector.get(aT);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(aT);s.add(o),n.moduleRef.onDestroy(()=>{Pw(n.allPlatformModules,n.moduleRef),r.unsubscribe(),s.delete(o)})}return tQ(i,t,()=>{let o=e.get(Z3);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ik,Xw);if(FY(s||Xw),Tw(n)){let a=e.get(fs);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return cQ(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function cQ(n,e){let t=n.injector.get(fs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new F(-403,!1);e.push(n)}var Rw=null;function uQ(n=[],e){return ua.create({name:e,providers:[{provide:o0,useValue:"platform"},{provide:aT,useValue:new Set([()=>Rw=null])},...n]})}function dQ(n=[]){if(Rw)return Rw;let e=uQ(n);return Rw=e,JY(),hQ(e),e}function hQ(n){n.get(OT,null)?.forEach(t=>t())}var cc=(()=>{class n{static{this.__NG_ELEMENT_ID__=fQ}}return n})();function fQ(n){return mQ(Ei(),Ye(),(n&16)===16)}function mQ(n,e,t){if(a0(n)&&!t){let i=ma(n.index,e);return new nc(i,i)}else if(n.type&175){let i=e[Lr];return new nc(i,e)}return null}var lT=class{constructor(){}supports(e){return N3(e)}create(e){return new cT(e)}},pQ=(n,e)=>e,cT=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pQ}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,o=null;for(;t||i;){let s=!i||t&&t.currentIndex<mN(i,r,o)?t:i,a=mN(s,r,o),l=s.currentIndex;if(s===i)r--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)r++;else{o||(o=[]);let c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){let g=p<o.length?o[p]:o[p]=0,w=g+p;u<=w&&w<c&&(o[p]=g+1)}let h=s.previousIndex;o[h]=u-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!N3(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,r,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else r=0,iY(e,a=>{s=this._trackByFn(r,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,r),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,r)):e=this._addAfter(new uT(t,i),o,r)),e}_verifyReinsertion(e,t,i,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return o!==null?e=this._reinsertAfter(o,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,o=e._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let r=t===null?this._itHead:t._next;return e._next=r,e._prev=t,r===null?this._itTail=e:r._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new e0),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new e0),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},uT=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},dT=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},e0=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new dT,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,r=this.map.get(i);return r?r.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function mN(n,e,t){let i=n.previousIndex;if(i===null)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}function pN(){return new rk([new lT])}var rk=(()=>{class n{static{this.\u0275prov=K({token:n,providedIn:"root",factory:pN})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||pN()),deps:[[n,new kN,new fT]]}}find(t){let i=this.factories.find(r=>r.supports(t));if(i!=null)return i;throw new F(901,!1)}}return n})();var tL=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)(W(fs))}}static{this.\u0275mod=yi({type:n})}static{this.\u0275inj=vi({})}}return n})();function nL(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,r=dQ(i),o=[J3({}),{provide:dd,useExisting:sQ},...t||[]],s=new Yw({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1});return lQ({r3Injector:s.injector,platformInjector:r,rootComponent:e})}catch(e){return Promise.reject(e)}}function T0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function k0(n,e){us("NgSignals");let t=ZM(n);return e?.equal&&(t[Zo].equal=e.equal),t}function Sa(n){let e=Ge(null);try{return n()}finally{Ge(e)}}var aL=null;function wo(){return aL}function lL(n){aL??=n}var A0=class{};var An=new X(""),cL=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(vQ),providedIn:"platform"})}}return n})();var vQ=(()=>{class n extends cL{constructor(){super(),this._doc=L(An),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wo().getBaseHref(this._doc)}onPopState(t){let i=wo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=wo().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){this._history.pushState(t,i,r)}replaceState(t,i,r){this._history.replaceState(t,i,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function uL(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function iL(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function uc(n){return n&&n[0]!=="?"?"?"+n:n}var I0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(dL),providedIn:"root"})}}return n})(),yQ=new X(""),dL=(()=>{class n extends I0{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(An).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uL(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+uc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.pushState(t,i,s)}replaceState(t,i,r,o){let s=this.prepareExternalUrl(r+uc(o));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)(W(cL),W(yQ,8))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var vo=(()=>{class n{constructor(t){this._subject=new yt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=EQ(iL(rL(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+uc(i))}normalize(t){return n.stripTrailingSlash(CQ(this._basePath,rL(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+uc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}static{this.normalizeQueryParams=uc}static{this.joinWithSlash=uL}static{this.stripTrailingSlash=iL}static{this.\u0275fac=function(i){return new(i||n)(W(I0))}}static{this.\u0275prov=K({token:n,factory:()=>_Q(),providedIn:"root"})}}return n})();function _Q(){return new vo(W(I0))}function CQ(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function rL(n){return n.replace(/\/index.html$/,"")}function EQ(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function x0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[r,o]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var ok=class{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},hL=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((r,o,s)=>{if(r.previousIndex==null)i.createEmbeddedView(this._template,new ok(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(o===null?void 0:o);else if(o!==null){let a=i.get(o);i.move(a,s),oL(a,r)}});for(let r=0,o=i.length;r<o;r++){let a=i.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{let o=i.get(r.currentIndex);oL(o,r)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(Ne(wa),Ne(ic),Ne(rk))}}static{this.\u0275dir=kn({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function oL(n,e){n.context.$implicit=e.item}var fL=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new sk,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){sL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){sL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(Ne(wa),Ne(ic))}}static{this.\u0275dir=kn({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),sk=class{constructor(){this.$implicit=null,this.ngIf=null}};function sL(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Jn(e)}'.`)}var Ht=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=yi({type:n})}static{this.\u0275inj=vi({})}}return n})(),mL="browser",SQ="server";function P0(n){return n===SQ}var wd=class{};var Dm=class{},Mm=class{},ms=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),o=r.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var uk=class{encodeKey(e){return pL(e)}encodeValue(e){return pL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function TQ(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var kQ=/%(\d[a-f0-9])/gi,AQ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pL(n){return encodeURIComponent(n).replace(kQ,(e,t)=>AQ[t]??e)}function R0(n){return`${n}`}var ka=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uk,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=TQ(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(R0):[R0(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{t.push({param:i,value:o,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(R0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(R0(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var dk=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function IQ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gL(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function bL(n){return typeof Blob<"u"&&n instanceof Blob}function wL(n){return typeof FormData<"u"&&n instanceof FormData}function xQ(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Rm=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(IQ(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new ms,this.context??=new dk,!this.params)this.params=new ka,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gL(this.body)||bL(this.body)||wL(this.body)||xQ(this.body)?this.body:this.body instanceof ka?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wL(this.body)?null:bL(this.body)?this.body.type||null:gL(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ka?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),u)),new n(t,i,s,{params:u,headers:c,context:h,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Aa=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Aa||{}),Om=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new ms,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},D0=class n extends Om{constructor(e={}){super(e),this.type=Aa.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Nm=class n extends Om{constructor(e={}){super(e),this.type=Aa.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ta=class extends Om{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},EL=200,PQ=204;function ck(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var pk=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let o;if(t instanceof Rm)o=t;else{let l;r.headers instanceof ms?l=r.headers:l=new ms(r.headers);let c;r.params&&(r.params instanceof ka?c=r.params:c=new ka({fromObject:r.params})),o=new Rm(t,i,r.body!==void 0?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=ae(o).pipe(Dr(l=>this.handler.handle(l)));if(t instanceof Rm||r.observe==="events")return s;let a=s.pipe(wn(l=>l instanceof Nm));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(me(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(me(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(me(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(me(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new ka().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ck(r,i))}post(t,i,r={}){return this.request("POST",t,ck(r,i))}put(t,i,r={}){return this.request("PUT",t,ck(r,i))}static{this.\u0275fac=function(i){return new(i||n)(W(Dm))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),RQ=/^\)\]\}',?\n/,DQ="X-Request-URL";function vL(n){if(n.url)return n.url;let e=DQ.toLocaleLowerCase();return n.headers.get(e)}var hk=(()=>{class n{constructor(){this.fetchImpl=L(fk,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=L(st)}handle(t){return new Ze(i=>{let r=new AbortController;return this.doRequest(t,r.signal,i).then(mk,o=>i.error(new Ta({error:o}))),()=>r.abort()})}doRequest(t,i,r){return S(this,null,function*(){let o=this.createRequestInit(t),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,v({signal:i},o)));MQ(g),r.next({type:Aa.Sent}),s=yield g}catch(g){r.error(new Ta({error:g,status:g.status??0,statusText:g.statusText,url:t.urlWithParams,headers:g.headers}));return}let a=new ms(s.headers),l=s.statusText,c=vL(s)??t.urlWithParams,u=s.status,h=null;if(t.reportProgress&&r.next(new D0({headers:a,status:u,statusText:l,url:c})),s.body){let g=s.headers.get("content-length"),w=[],y=s.body.getReader(),E=0,T,x,V=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>S(this,null,function*(){for(;;){let{done:he,value:N}=yield y.read();if(he)break;if(w.push(N),E+=N.length,t.reportProgress){x=t.responseType==="text"?(x??"")+(T??=new TextDecoder).decode(N,{stream:!0}):void 0;let $=()=>r.next({type:Aa.DownloadProgress,total:g?+g:void 0,loaded:E,partialText:x});V?V.run($):$()}}}));let Q=this.concatChunks(w,E);try{let he=s.headers.get("Content-Type")??"";h=this.parseBody(t,Q,he)}catch(he){r.error(new Ta({error:he,headers:new ms(s.headers),status:s.status,statusText:s.statusText,url:vL(s)??t.urlWithParams}));return}}u===0&&(u=h?EL:0),u>=200&&u<300?(r.next(new Nm({body:h,headers:a,status:u,statusText:l,url:c})),r.complete()):r.error(new Ta({error:h,headers:a,status:u,statusText:l,url:c}))})}parseBody(t,i,r){switch(t.responseType){case"json":let o=new TextDecoder().decode(i).replace(RQ,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:r});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},r=t.withCredentials?"include":void 0;if(t.headers.forEach((o,s)=>i[o]=s.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let o=t.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:r}}concatChunks(t,i){let r=new Uint8Array(i),o=0;for(let s of t)r.set(s,o),o+=s.length;return r}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),fk=class{};function mk(){}function MQ(n){n.then(mk,mk)}function SL(n,e){return e(n)}function OQ(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}function NQ(n,e,t){return(i,r)=>Fr(t,()=>e(i,o=>n(o,r)))}var LQ=new X(""),gk=new X(""),FQ=new X(""),TL=new X("",{providedIn:"root",factory:()=>!0});function VQ(){let n=null;return(e,t)=>{n===null&&(n=(L(LQ,{optional:!0})??[]).reduceRight(OQ,SL));let i=L(as);if(L(TL)){let o=i.add();return n(e,t).pipe(ra(()=>i.remove(o)))}else return n(e,t)}}var yL=(()=>{class n extends Dm{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=L(as),this.contributeToStability=L(TL)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(gk),...this.injector.get(FQ,[])]));this.chain=i.reduceRight((r,o)=>NQ(r,o,this.injector),SL)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,r=>this.backend.handle(r)).pipe(ra(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)(W(Mm),W(bi))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();var BQ=/^\)\]\}',?\n/;function UQ(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var _L=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new F(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Qe(i.\u0275loadImpl()):ae(null)).pipe(mi(()=>new Ze(o=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((y,E)=>s.setRequestHeader(y,E.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let y=t.detectContentTypeHeader();y!==null&&s.setRequestHeader("Content-Type",y)}if(t.responseType){let y=t.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let y=s.statusText||"OK",E=new ms(s.getAllResponseHeaders()),T=UQ(s)||t.url;return l=new D0({headers:E,status:s.status,statusText:y,url:T}),l},u=()=>{let{headers:y,status:E,statusText:T,url:x}=c(),V=null;E!==PQ&&(V=typeof s.response>"u"?s.responseText:s.response),E===0&&(E=V?EL:0);let Q=E>=200&&E<300;if(t.responseType==="json"&&typeof V=="string"){let he=V;V=V.replace(BQ,"");try{V=V!==""?JSON.parse(V):null}catch(N){V=he,Q&&(Q=!1,V={error:N,text:V})}}Q?(o.next(new Nm({body:V,headers:y,status:E,statusText:T,url:x||void 0})),o.complete()):o.error(new Ta({error:V,headers:y,status:E,statusText:T,url:x||void 0}))},h=y=>{let{url:E}=c(),T=new Ta({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:E||void 0});o.error(T)},p=!1,g=y=>{p||(o.next(c()),p=!0);let E={type:Aa.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(E.total=y.total),t.responseType==="text"&&s.responseText&&(E.partialText=s.responseText),o.next(E)},w=y=>{let E={type:Aa.UploadProgress,loaded:y.loaded};y.lengthComputable&&(E.total=y.total),o.next(E)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),o.next({type:Aa.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)(W(wd))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),kL=new X(""),HQ="XSRF-TOKEN",zQ=new X("",{providedIn:"root",factory:()=>HQ}),jQ="X-XSRF-TOKEN",$Q=new X("",{providedIn:"root",factory:()=>jQ}),M0=class{},WQ=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=x0(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)(W(An),W(ga),W(zQ))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function qQ(n,e){let t=n.url.toLowerCase();if(!L(kL)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=L(M0).getToken(),r=L($Q);return i!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var bk=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(bk||{});function AL(n,e){return{\u0275kind:n,\u0275providers:e}}function IL(...n){let e=[pk,_L,yL,{provide:Dm,useExisting:yL},{provide:Mm,useFactory:()=>L(hk,{optional:!0})??L(_L)},{provide:gk,useValue:qQ,multi:!0},{provide:kL,useValue:!0},{provide:M0,useClass:WQ}];for(let t of n)e.push(...t.\u0275providers);return md(e)}var CL=new X("");function xL(){return AL(bk.LegacyInterceptors,[{provide:CL,useFactory:VQ},{provide:gk,useExisting:CL,multi:!0}])}function PL(){return AL(bk.Fetch,[hk,{provide:Mm,useExisting:hk}])}var yk=class extends A0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_k=class n extends yk{static makeCurrent(){lL(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=KQ();return t==null?null:YQ(t)}resetBaseElement(){Lm=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return x0(document.cookie,e)}},Lm=null;function KQ(){return Lm=Lm||document.querySelector("base"),Lm?Lm.getAttribute("href"):null}function YQ(n){return new URL(n,document.baseURI).pathname}var Ck=class{addToWindow(e){sr.getAngularTestability=(i,r=!0)=>{let o=e.findTestabilityInTree(i,r);if(o==null)throw new F(5103,!1);return o},sr.getAllAngularTestabilities=()=>e.getAllTestabilities(),sr.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let r=sr.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&i()};r.forEach(a=>{a.whenStable(s)})};sr.frameworkStabilizers||(sr.frameworkStabilizers=[]),sr.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let r=e.getTestability(t);return r??(i?wo().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},QQ=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Ek=new X(""),ML=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(o=>o.supports(t)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)(W(Ek),W(st))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),O0=class{constructor(e){this._doc=e}},wk="ng-app-id",OL=(()=>{class n{constructor(t,i,r,o={}){this.doc=t,this.appId=i,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=P0(o),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(r=>r.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${wk}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(r=>{r.textContent!=null&&i.set(r.textContent,r)}),i}return null}changeUsageCount(t,i){let r=this.styleRef;if(r.has(t)){let o=r.get(t);return o.usage+=i,o.usage}return r.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let r=this.styleNodesInDOM,o=r?.get(i);if(o?.parentNode===t)return r.delete(i),o.removeAttribute(wk),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(wk,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){let r=this.getStyleElement(t,i),o=this.styleRef,s=o.get(i)?.elements;s?s.push(r):o.set(i,{elements:[r],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)(W(An),W(u0),W(LT,8),W(ga))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),vk={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Tk=/%COMP%/g,NL="%COMP%",ZQ=`_nghost-${NL}`,JQ=`_ngcontent-${NL}`,XQ=!0,eZ=new X("",{providedIn:"root",factory:()=>XQ});function tZ(n){return JQ.replace(Tk,n)}function nZ(n){return ZQ.replace(Tk,n)}function LL(n,e){return e.map(t=>t.replace(Tk,n))}var N0=(()=>{class n{constructor(t,i,r,o,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=P0(a),this.defaultRenderer=new Fm(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===uo.ShadowDom&&(i=P(v({},i),{encapsulation:uo.Emulated}));let r=this.getOrCreateRenderer(t,i);return r instanceof L0?r.applyToHost(t):r instanceof Vm&&r.applyStyles(),r}getOrCreateRenderer(t,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case uo.Emulated:o=new L0(l,c,i,this.appId,u,s,a,h);break;case uo.ShadowDom:return new Sk(l,c,t,i,s,a,this.nonce,h);default:o=new Vm(l,c,i,u,s,a,h);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)(W(ML),W(OL),W(u0),W(eZ),W(An),W(ga),W(st),W(LT))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Fm=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(vk[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(RL(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(RL(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new F(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let o=vk[r];o?e.setAttributeNS(o,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=vk[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(is.DashCase|is.Important)?e.style.setProperty(t,i,r&is.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&is.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=wo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function RL(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Sk=class extends Fm{constructor(e,t,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=LL(r.id,r.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vm=class extends Fm{constructor(e,t,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?LL(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},L0=class extends Vm{constructor(e,t,i,r,o,s,a,l){let c=r+"-"+i.id;super(e,t,i,o,s,a,l,c),this.contentAttr=tZ(c),this.hostAttr=nZ(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},iZ=(()=>{class n extends O0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}static{this.\u0275fac=function(i){return new(i||n)(W(An))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),DL=["alt","control","meta","shift"],rZ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oZ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},sZ=(()=>{class n extends O0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,r){let o=n.parseEventName(i),s=n.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let i=t.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),DL.forEach(c=>{let u=i.indexOf(c);u>-1&&(i.splice(u,1),s+=c+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let r=rZ[t.key]||t.key,o="";return i.indexOf("code.")>-1&&(r=t.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),DL.forEach(s=>{if(s!==r){let a=oZ[s];a(t)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(t,i,r){return o=>{n.matchEventFullKeyCode(o,t)&&r.runGuarded(()=>i(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)(W(An))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function FL(n,e){return nL(v({rootComponent:n},aZ(e)))}function aZ(n){return{appProviders:[...VL,...n?.providers??[]],platformProviders:dZ}}function lZ(){_k.makeCurrent()}function cZ(){return new ts}function uZ(){return O5(document),document}var dZ=[{provide:ga,useValue:mL},{provide:OT,useValue:lZ,multi:!0},{provide:An,useFactory:uZ,deps:[]}];var hZ=new X(""),fZ=[{provide:Pm,useClass:Ck,deps:[]},{provide:ek,useClass:C0,deps:[st,E0,Pm]},{provide:C0,useClass:C0,deps:[st,E0,Pm]}],VL=[{provide:o0,useValue:"root"},{provide:ts,useFactory:cZ,deps:[]},{provide:Ek,useClass:iZ,multi:!0,deps:[An,st,ga]},{provide:Ek,useClass:sZ,multi:!0,deps:[An]},N0,OL,ML,{provide:da,useExisting:N0},{provide:wd,useClass:QQ,deps:[]},[]],kk=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u0,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)(W(hZ,12))}}static{this.\u0275mod=yi({type:n})}static{this.\u0275inj=vi({providers:[...VL,...fZ],imports:[Ht,tL]})}}return n})();var BL=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)(W(An))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ak=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:function(i){let r=null;return i?r=new(i||n):r=W(mZ),r},providedIn:"root"})}}return n})(),mZ=(()=>{class n extends Ak{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case cs.NONE:return i;case cs.HTML:return oc(i,"HTML")?mo(i):BT(this._doc,String(i)).toString();case cs.STYLE:return oc(i,"Style")?mo(i):i;case cs.SCRIPT:if(oc(i,"Script"))return mo(i);throw new F(5200,!1);case cs.URL:return oc(i,"URL")?mo(i):VT(String(i));case cs.RESOURCE_URL:if(oc(i,"ResourceURL"))return mo(i);throw new F(5201,!1);default:throw new F(5202,!1)}}bypassSecurityTrustHtml(t){return F5(t)}bypassSecurityTrustStyle(t){return V5(t)}bypassSecurityTrustScript(t){return B5(t)}bypassSecurityTrustUrl(t){return U5(t)}bypassSecurityTrustResourceUrl(t){return H5(t)}static{this.\u0275fac=function(i){return new(i||n)(W(An))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var De="primary",tp=Symbol("RouteTitle"),Dk=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Sd(n){return new Dk(n)}function pZ(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=n[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function gZ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yo(n[t],e[t]))return!1;return!0}function yo(n,e){let t=n?Mk(n):void 0,i=e?Mk(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let o=0;o<t.length;o++)if(r=t[o],!KL(n[r],e[r]))return!1;return!0}function Mk(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function KL(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,o)=>i[o]===r)}else return n===e}function YL(n){return n.length>0?n[n.length-1]:null}function xa(n){return ME(n)?n:lc(n)?Qe(Promise.resolve(n)):ae(n)}var bZ={exact:ZL,subset:JL},QL={exact:wZ,subset:vZ,ignored:()=>!0};function HL(n,e,t){return bZ[t.paths](n.root,e.root,t.matrixParams)&&QL[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function wZ(n,e){return yo(n,e)}function ZL(n,e,t){if(!hc(n.segments,e.segments)||!B0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!ZL(n.children[i],e.children[i],t))return!1;return!0}function vZ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>KL(n[t],e[t]))}function JL(n,e,t){return XL(n,e,e.segments,t)}function XL(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!hc(r,t)||e.hasChildren()||!B0(r,t,i))}else if(n.segments.length===t.length){if(!hc(n.segments,t)||!B0(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!JL(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!hc(n.segments,r)||!B0(n.segments,r,i)||!n.children[De]?!1:XL(n.children[De],e,o,i)}}function B0(n,e,t){return e.every((i,r)=>QL[t](n[r].parameters,i.parameters))}var gs=class{constructor(e=new at([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Sd(this.queryParams),this._queryParamMap}toString(){return CZ.serialize(this)}},at=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return U0(this)}},dc=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Sd(this.parameters),this._parameterMap}toString(){return tF(this)}};function yZ(n,e){return hc(n,e)&&n.every((t,i)=>yo(t.parameters,e[i].parameters))}function hc(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function _Z(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===De&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==De&&(t=t.concat(e(r,i)))}),t}var oA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>new Wm,providedIn:"root"})}}return n})(),Wm=class{parse(e){let t=new Nk(e);return new gs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Bm(e.root,!0)}`,i=TZ(e.queryParams),r=typeof e.fragment=="string"?`#${EZ(e.fragment)}`:"";return`${t}${i}${r}`}},CZ=new Wm;function U0(n){return n.segments.map(e=>tF(e)).join("/")}function Bm(n,e){if(!n.hasChildren())return U0(n);if(e){let t=n.children[De]?Bm(n.children[De],!1):"",i=[];return Object.entries(n.children).forEach(([r,o])=>{r!==De&&i.push(`${r}:${Bm(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=_Z(n,(i,r)=>r===De?[Bm(n.children[De],!1)]:[`${r}:${Bm(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${U0(n)}/${t[0]}`:`${U0(n)}/(${t.join("//")})`}}function eF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function F0(n){return eF(n).replace(/%3B/gi,";")}function EZ(n){return encodeURI(n)}function Ok(n){return eF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function H0(n){return decodeURIComponent(n)}function zL(n){return H0(n.replace(/\+/g,"%20"))}function tF(n){return`${Ok(n.path)}${SZ(n.parameters)}`}function SZ(n){return Object.entries(n).map(([e,t])=>`;${Ok(e)}=${Ok(t)}`).join("")}function TZ(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${F0(t)}=${F0(r)}`).join("&"):`${F0(t)}=${F0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kZ=/^[^\/()?;#]+/;function Ik(n){let e=n.match(kZ);return e?e[0]:""}var AZ=/^[^\/()?;=#]+/;function IZ(n){let e=n.match(AZ);return e?e[0]:""}var xZ=/^[^=?&#]+/;function PZ(n){let e=n.match(xZ);return e?e[0]:""}var RZ=/^[^&#]+/;function DZ(n){let e=n.match(RZ);return e?e[0]:""}var Nk=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[De]=new at(e,t)),i}parseSegment(){let e=Ik(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new dc(H0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=IZ(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Ik(this.remaining);r&&(i=r,this.capture(i))}e[H0(t)]=H0(i)}parseQueryParam(e){let t=PZ(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=DZ(this.remaining);s&&(i=s,this.capture(i))}let r=zL(t),o=zL(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Ik(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new F(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[De]:new at([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function nF(n){return n.segments.length>0?new at([],{[De]:n}):n}function iF(n){let e={};for(let[i,r]of Object.entries(n.children)){let o=iF(r);if(i===De&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new at(n.segments,e);return MZ(t)}function MZ(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new at(n.segments.concat(e.segments),e.children)}return n}function qm(n){return n instanceof gs}function OZ(n,e,t=null,i=null){let r=rF(n);return oF(r,e,t,i)}function rF(n){let e;function t(o){let s={};for(let l of o.children){let c=t(l);s[l.outlet]=c}let a=new at(o.url,s);return o===n&&(e=a),a}let i=t(n.root),r=nF(i);return e??r}function oF(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return xk(r,r,r,t,i);let o=NZ(e);if(o.toRoot())return xk(r,r,new at([],{}),t,i);let s=LZ(o,r,n),a=s.processChildren?zm(s.segmentGroup,s.index,o.commands):aF(s.segmentGroup,s.index,o.commands);return xk(r,s.segmentGroup,a,t,i)}function z0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gm(n){return typeof n=="object"&&n!=null&&n.outlets}function xk(n,e,t,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;n===e?s=t:s=sF(n,e,t);let a=nF(iF(s));return new gs(a,o,r)}function sF(n,e,t){let i={};return Object.entries(n.children).forEach(([r,o])=>{o===e?i[r]=t:i[r]=sF(o,e,t)}),new at(n.segments,i)}var j0=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&z0(i[0]))throw new F(4003,!1);let r=i.find(Gm);if(r&&r!==YL(i))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NZ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new j0(!0,0,n);let e=0,t=!1,i=n.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new j0(t,e,i)}var _d=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function LZ(n,e,t){if(n.isAbsolute)return new _d(e,!0,0);if(!t)return new _d(e,!1,NaN);if(t.parent===null)return new _d(t,!0,0);let i=z0(n.commands[0])?0:1,r=t.segments.length-1+i;return FZ(t,r,n.numberOfDoubleDots)}function FZ(n,e,t){let i=n,r=e,o=t;for(;o>r;){if(o-=r,i=i.parent,!i)throw new F(4005,!1);r=i.segments.length}return new _d(i,!1,r-o)}function VZ(n){return Gm(n[0])?n[0].outlets:{[De]:n}}function aF(n,e,t){if(n??=new at([],{}),n.segments.length===0&&n.hasChildren())return zm(n,e,t);let i=BZ(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let o=new at(n.segments.slice(0,i.pathIndex),{});return o.children[De]=new at(n.segments.slice(i.pathIndex),n.children),zm(o,0,r)}else return i.match&&r.length===0?new at(n.segments,{}):i.match&&!n.hasChildren()?Lk(n,e,t):i.match?zm(n,0,r):Lk(n,e,t)}function zm(n,e,t){if(t.length===0)return new at(n.segments,{});{let i=VZ(t),r={};if(Object.keys(i).some(o=>o!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let o=zm(n.children[De],e,t);return new at(n.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=aF(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new at(n.segments,r)}}function BZ(n,e,t){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return o;let s=n.segments[r],a=t[i];if(Gm(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!$L(l,c,s))return o;i+=2}else{if(!$L(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Lk(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let o=t[r];if(Gm(o)){let l=UZ(o.outlets);return new at(i,l)}if(r===0&&z0(t[0])){let l=n.segments[e];i.push(new dc(l.path,jL(t[0]))),r++;continue}let s=Gm(o)?o.outlets[De]:`${o}`,a=r<t.length-1?t[r+1]:null;s&&a&&z0(a)?(i.push(new dc(s,jL(a))),r+=2):(i.push(new dc(s,{})),r++)}return new at(i,{})}function UZ(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Lk(new at([],{}),0,i))}),e}function jL(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function $L(n,e,t){return n==t.path&&yo(e,t.parameters)}var jm="imperative",In=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(In||{}),lr=class{constructor(e,t){this.id=e,this.url=t}},Km=class extends lr{constructor(e,t,i="imperative",r=null){super(e,t),this.type=In.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fc=class extends lr{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ui=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ui||{}),Fk=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Fk||{}),ps=class extends lr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},mc=class extends lr{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=In.NavigationSkipped}},Ym=class extends lr{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},$0=class extends lr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vk=class extends lr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bk=class extends lr{constructor(e,t,i,r,o){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uk=class extends lr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hk=class extends lr{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zk=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},jk=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$k=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wk=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qk=class{constructor(e){this.snapshot=e,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gk=class{constructor(e){this.snapshot=e,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Qm=class{},Td=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function HZ(n,e){return n.providers&&!n._injector&&(n._injector=QT(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Hr(n){return n.outlet||De}function zZ(n,e){let t=n.filter(i=>Hr(i)===e);return t.push(...n.filter(i=>Hr(i)!==e)),t}function np(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Kk=class{get injector(){return np(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Z0(this.rootInjector),this.attachRef=null}},Z0=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new Kk(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)(W(bi))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),W0=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Yk(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Yk(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Qk(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Qk(e,this._root).map(t=>t.value)}};function Yk(n,e){if(n===e.value)return e;for(let t of e.children){let i=Yk(n,t);if(i)return i}return null}function Qk(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Qk(n,t);if(i.length)return i.unshift(e),i}return[]}var Bi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function yd(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var q0=class extends W0{constructor(e,t){super(e),this.snapshot=t,sA(this,e)}toString(){return this.snapshot.toString()}};function lF(n){let e=jZ(n),t=new an([new dc("",{})]),i=new an({}),r=new an({}),o=new an({}),s=new an(""),a=new Ia(t,i,o,s,r,De,n,e.root);return a.snapshot=e.root,new q0(new Bi(a,[]),e)}function jZ(n){let e={},t={},i={},r="",o=new Cd([],e,i,r,t,De,n,null,{});return new K0("",new Bi(o,[]))}var Ia=class{constructor(e,t,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(me(c=>c[tp]))??ae(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(me(e=>Sd(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(me(e=>Sd(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function G0(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:v(v({},e.params),n.params),data:v(v({},e.data),n.data),resolve:v(v(v(v({},n.data),e.data),r?.data),n._resolvedData)}:i={params:v({},n.params),data:v({},n.data),resolve:v(v({},n.data),n._resolvedData??{})},r&&uF(r)&&(i.resolve[tp]=r.title),i}var Cd=class{get title(){return this.data?.[tp]}constructor(e,t,i,r,o,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Sd(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Sd(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},K0=class extends W0{constructor(e,t){super(t),this.url=e,sA(this,t)}toString(){return cF(this._root)}};function sA(n,e){e.value._routerState=n,e.children.forEach(t=>sA(n,t))}function cF(n){let e=n.children.length>0?` { ${n.children.map(cF).join(", ")} } `:"";return`${n.value}${e}`}function Pk(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yo(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),yo(e.params,t.params)||n.paramsSubject.next(t.params),gZ(e.url,t.url)||n.urlSubject.next(t.url),yo(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zk(n,e){let t=yo(n.params,e.params)&&yZ(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Zk(n.parent,e.parent))}function uF(n){return typeof n.title=="string"||n.title===null}var aA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=De,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=L(Z0),this.location=L(wa),this.changeDetector=L(cc),this.inputBinder=L(lA,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=t;let r=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Jk(t,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=kn({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[fa]})}}return n})(),Jk=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Ia?this.route:e===Z0?this.childContexts:this.parent.get(e,t)}},lA=new X("");function $Z(n,e,t){let i=Zm(n,e._root,t?t._root:void 0);return new q0(i,e)}function Zm(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=WZ(n,e,t);return new Bi(i,r)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zm(n,a)),s}}let i=qZ(e.value),r=e.children.map(o=>Zm(n,o));return new Bi(i,r)}}function WZ(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Zm(n,i,r);return Zm(n,i)})}function qZ(n){return new Ia(new an(n.url),new an(n.params),new an(n.queryParams),new an(n.fragment),new an(n.data),n.outlet,n.component,n)}var Jm=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dF="ngNavigationCancelingError";function Y0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=qm(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=hF(!1,Ui.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function hF(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dF]=!0,t.cancellationCode=e,t}function GZ(n){return fF(n)&&qm(n.url)}function fF(n){return!!n&&n[dF]}var KZ=(n,e,t,i)=>me(r=>(new Xk(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),Xk=class{constructor(e,t,i,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Pk(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=yd(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=yd(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,o=yd(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=yd(t);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Gk(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Wk(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,o=t?t.value:null;if(Pk(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Pk(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},Q0=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ed=class{constructor(e,t){this.component=e,this.route=t}};function YZ(n,e,t){let i=n._root,r=e?e._root:null;return Um(i,r,t,[i.value])}function QZ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ad(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!vN(n)?n:e.get(n):i}function Um(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=yd(e);return n.children.forEach(s=>{ZZ(s,o[s.value.outlet],t,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>$m(a,t.getContext(s),r)),r}function ZZ(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=JZ(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Q0(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Um(n,e,a?a.children:null,i,r):Um(n,e,t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ed(a.outlet.component,s))}else s&&$m(e,a,r),r.canActivateChecks.push(new Q0(i)),o.component?Um(n,null,a?a.children:null,i,r):Um(n,null,t,i,r);return r}function JZ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!hc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hc(n.url,e.url)||!yo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zk(n,e)||!yo(n.queryParams,e.queryParams);case"paramsChange":default:return!Zk(n,e)}}function $m(n,e,t){let i=yd(n),r=n.value;Object.entries(i).forEach(([o,s])=>{r.component?e?$m(s,e.children.getContext(o),t):$m(s,null,t):$m(s,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ed(e.outlet.component,r)):t.canDeactivateChecks.push(new Ed(null,r)):t.canDeactivateChecks.push(new Ed(null,r))}function ip(n){return typeof n=="function"}function XZ(n){return typeof n=="boolean"}function eJ(n){return n&&ip(n.canLoad)}function tJ(n){return n&&ip(n.canActivate)}function nJ(n){return n&&ip(n.canActivateChild)}function iJ(n){return n&&ip(n.canDeactivate)}function rJ(n){return n&&ip(n.canMatch)}function mF(n){return n instanceof Xo||n?.name==="EmptyError"}var V0=Symbol("INITIAL_VALUE");function kd(){return mi(n=>gw(n.map(e=>e.pipe(ao(1),UE(V0)))).pipe(me(e=>{for(let t of e)if(t!==!0){if(t===V0)return V0;if(t===!1||oJ(t))return t}return!0}),wn(e=>e!==V0),ao(1)))}function oJ(n){return qm(n)||n instanceof Jm}function sJ(n,e){return ln(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ae(P(v({},t),{guardsResult:!0})):aJ(s,i,r,n).pipe(ln(a=>a&&XZ(a)?lJ(i,o,n,e):ae(a)),me(a=>P(v({},t),{guardsResult:a})))})}function aJ(n,e,t,i){return Qe(n).pipe(ln(r=>fJ(r.component,r.route,t,e,i)),rr(r=>r!==!0,!0))}function lJ(n,e,t,i){return Qe(e).pipe(Dr(r=>Zu(uJ(r.route.parent,i),cJ(r.route,i),hJ(n,r.path,t),dJ(n,r.route,t))),rr(r=>r!==!0,!0))}function cJ(n,e){return n!==null&&e&&e(new qk(n)),ae(!0)}function uJ(n,e){return n!==null&&e&&e(new $k(n)),ae(!0)}function dJ(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ae(!0);let r=i.map(o=>bw(()=>{let s=np(e)??t,a=Ad(o,s),l=tJ(a)?a.canActivate(e,n):Fr(s,()=>a(e,n));return xa(l).pipe(rr())}));return ae(r).pipe(kd())}function hJ(n,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>QZ(s)).filter(s=>s!==null).map(s=>bw(()=>{let a=s.guards.map(l=>{let c=np(s.node)??t,u=Ad(l,c),h=nJ(u)?u.canActivateChild(i,n):Fr(c,()=>u(i,n));return xa(h).pipe(rr())});return ae(a).pipe(kd())}));return ae(o).pipe(kd())}function fJ(n,e,t,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ae(!0);let s=o.map(a=>{let l=np(e)??r,c=Ad(a,l),u=iJ(c)?c.canDeactivate(n,e,t,i):Fr(l,()=>c(n,e,t,i));return xa(u).pipe(rr())});return ae(s).pipe(kd())}function mJ(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return ae(!0);let o=r.map(s=>{let a=Ad(s,n),l=eJ(a)?a.canLoad(e,t):Fr(n,()=>a(e,t));return xa(l)});return ae(o).pipe(kd(),pF(i))}function pF(n){return xE(ct(e=>{if(typeof e!="boolean")throw Y0(n,e)}),me(e=>e===!0))}function pJ(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return ae(!0);let o=r.map(s=>{let a=Ad(s,n),l=rJ(a)?a.canMatch(e,t):Fr(n,()=>a(e,t));return xa(l)});return ae(o).pipe(kd(),pF(i))}var Xm=class{constructor(e){this.segmentGroup=e||null}},ep=class extends Error{constructor(e){super(),this.urlTree=e}};function vd(n){return Jo(new Xm(n))}function gJ(n){return Jo(new F(4e3,!1))}function bJ(n){return Jo(hF(!1,Ui.GuardRejected))}var eA=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ae(i);if(r.numberOfChildren>1||!r.children[De])return gJ(`${e.redirectTo}`);r=r.children[De]}}applyRedirectCommands(e,t,i,r,o){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:u,url:h,outlet:p,params:g,data:w,title:y}=r,E=Fr(o,()=>a({params:g,data:w,queryParams:l,fragment:c,routeConfig:u,url:h,outlet:p,title:y}));if(E instanceof gs)throw new ep(E);t=E}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new ep(s);return s}applyRedirectCreateUrlTree(e,t,i,r){let o=this.createSegmentGroup(e,t.root,i,r);return new gs(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=t[a]}else i[r]=o}),i}createSegmentGroup(e,t,i,r){let o=this.createSegments(e,t.segments,i,r),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new at(o,s)}createSegments(e,t,i,r){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new F(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},tA={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function wJ(n,e,t,i,r){let o=gF(n,e,t);return o.matched?(i=HZ(e,i),pJ(i,e,t,r).pipe(me(s=>s===!0?o:v({},tA)))):ae(o)}function gF(n,e,t){if(e.path==="**")return vJ(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?v({},tA):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||pZ)(t,n,e);if(!r)return v({},tA);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?v(v({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function vJ(n){return{matched:!0,parameters:n.length>0?YL(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function WL(n,e,t,i){return t.length>0&&CJ(n,t,i)?{segmentGroup:new at(e,_J(i,new at(t,n.children))),slicedSegments:[]}:t.length===0&&EJ(n,t,i)?{segmentGroup:new at(n.segments,yJ(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new at(n.segments,n.children),slicedSegments:t}}function yJ(n,e,t,i){let r={};for(let o of t)if(J0(n,e,o)&&!i[Hr(o)]){let s=new at([],{});r[Hr(o)]=s}return v(v({},i),r)}function _J(n,e){let t={};t[De]=e;for(let i of n)if(i.path===""&&Hr(i)!==De){let r=new at([],{});t[Hr(i)]=r}return t}function CJ(n,e,t){return t.some(i=>J0(n,e,i)&&Hr(i)!==De)}function EJ(n,e,t){return t.some(i=>J0(n,e,i))}function J0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function SJ(n,e,t){return e.length===0&&!n.children[t]}var nA=class{};function TJ(n,e,t,i,r,o,s="emptyOnly"){return new iA(n,e,t,i,r,s,o).recognize()}var kJ=31,iA=class{constructor(e,t,i,r,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new eA(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=WL(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(me(({children:t,rootSnapshot:i})=>{let r=new Bi(i,t),o=new K0("",r),s=OZ(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Cd([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,t).pipe(me(i=>({children:i,rootSnapshot:t})),Tn(i=>{if(i instanceof ep)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xm?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,r,!0,o).pipe(me(s=>s instanceof Bi?[s]:[]))}processChildren(e,t,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return Qe(o).pipe(Dr(s=>{let a=i.children[s],l=zZ(t,s);return this.processSegmentGroup(e,l,a,s,r)}),BE((s,a)=>(s.push(...a),s)),ia(null),VE(),ln(s=>{if(s===null)return vd(i);let a=bF(s);return AJ(a),ae(a)}))}processSegment(e,t,i,r,o,s,a){return Qe(t).pipe(Dr(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,r,o,s,a).pipe(Tn(c=>{if(c instanceof Xm)return ae(null);throw c}))),rr(l=>!!l),Tn(l=>{if(mF(l))return SJ(i,r,o)?ae(new nA):vd(i);throw l}))}processSegmentAgainstRoute(e,t,i,r,o,s,a,l){return Hr(i)!==s&&(s===De||!J0(r,o,i))?vd(r):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,o,s,l):vd(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:h,remainingSegments:p}=gF(t,r,o);if(!l)return vd(t);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kJ&&(this.allowRedirects=!1));let g=new Cd(o,c,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,qL(r),Hr(r),r.component??r._loadedComponent??null,r,GL(r)),w=G0(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let y=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,h,g,e);return this.applyRedirects.lineralizeSegments(r,y).pipe(ln(E=>this.processSegment(e,i,t,E.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,r,o,s){let a=wJ(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(mi(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(mi(({routes:c})=>{let u=i._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:g}=l,w=new Cd(p,h,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,qL(i),Hr(i),i.component??i._loadedComponent??null,i,GL(i)),y=G0(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(y.params),w.data=Object.freeze(y.data);let{segmentGroup:E,slicedSegments:T}=WL(t,p,g,c);if(T.length===0&&E.hasChildren())return this.processChildren(u,c,E,w).pipe(me(V=>new Bi(w,V)));if(c.length===0&&T.length===0)return ae(new Bi(w,[]));let x=Hr(i)===o;return this.processSegment(u,c,E,T,x?De:o,!0,w).pipe(me(V=>new Bi(w,V instanceof Bi?[V]:[])))}))):vd(t)))}getChildConfig(e,t,i){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):mJ(e,t,i,this.urlSerializer).pipe(ln(r=>r?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):bJ(t))):ae({routes:[],injector:e})}};function AJ(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function IJ(n){let e=n.value.routeConfig;return e&&e.path===""}function bF(n){let e=[],t=new Set;for(let i of n){if(!IJ(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=bF(i.children);e.push(new Bi(i.value,r))}return e.filter(i=>!t.has(i))}function qL(n){return n.data||{}}function GL(n){return n.resolve||{}}function xJ(n,e,t,i,r,o){return ln(s=>TJ(n,e,t,i,s.extractedUrl,r,o).pipe(me(({state:a,tree:l})=>P(v({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function PJ(n,e){return ln(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ae(t);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of wF(l))s.add(c);let a=0;return Qe(s).pipe(Dr(l=>o.has(l)?RJ(l,i,n,e):(l.data=G0(l,l.parent,n).resolve,ae(void 0))),ct(()=>a++),Ju(1),ln(l=>a===s.size?ae(t):hi))})}function wF(n){let e=n.children.map(t=>wF(t)).flat();return[n,...e]}function RJ(n,e,t,i){let r=n.routeConfig,o=n._resolve;return r?.title!==void 0&&!uF(r)&&(o[tp]=r.title),DJ(o,n,e,i).pipe(me(s=>(n._resolvedData=s,n.data=G0(n,n.parent,t).resolve,null)))}function DJ(n,e,t,i){let r=Mk(n);if(r.length===0)return ae({});let o={};return Qe(r).pipe(ln(s=>MJ(n[s],e,t,i).pipe(rr(),ct(a=>{if(a instanceof Jm)throw Y0(new Wm,a);o[s]=a}))),Ju(1),FE(o),Tn(s=>mF(s)?hi:Jo(s)))}function MJ(n,e,t,i){let r=np(e)??i,o=Ad(n,r),s=o.resolve?o.resolve(e,t):Fr(r,()=>o(e,t));return xa(s)}function Rk(n){return mi(e=>{let t=n(e);return t?Qe(t).pipe(me(()=>e)):ae(e)})}var vF=(()=>{class n{buildTitle(t){let i,r=t.root;for(;r!==void 0;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(o=>o.outlet===De);return i}getResolvedTitleForRoute(t){return t.data[tp]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(OJ),providedIn:"root"})}}return n})(),OJ=(()=>{class n extends vF{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)(W(BL))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cA=new X("",{providedIn:"root",factory:()=>({})}),NJ=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ee({type:n,selectors:[["ng-component"]],standalone:!0,features:[re],decls:1,vars:0,template:function(i,r){i&1&&b(0,"router-outlet")},dependencies:[aA],encapsulation:2})}}return n})();function uA(n){let e=n.children&&n.children.map(uA),t=e?P(v({},n),{children:e}):v({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=NJ),t}var dA=new X(""),LJ=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(nk)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ae(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=xa(t.loadComponent()).pipe(me(yF),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ra(()=>{this.componentLoaders.delete(t)})),r=new Yu(i,()=>new Rt).pipe(Ku());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ae({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=FJ(i,this.compiler,t,this.onLoadEndListener).pipe(ra(()=>{this.childrenLoaders.delete(i)})),s=new Yu(o,()=>new Rt).pipe(Ku());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FJ(n,e,t,i){return xa(n.loadChildren()).pipe(me(yF),ln(r=>r instanceof Em||Array.isArray(r)?ae(r):Qe(e.compileModuleAsync(r))),me(r=>{i&&i(n);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(t).injector,s=o.get(dA,[],{optional:!0,self:!0}).flat()),{routes:s.map(uA),injector:o}}))}function VJ(n){return n&&typeof n=="object"&&"default"in n}function yF(n){return VJ(n)?n.default:n}var hA=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(BJ),providedIn:"root"})}}return n})(),BJ=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),UJ=new X("");var HJ=new X(""),zJ=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Rt,this.transitionAbortSubject=new Rt,this.configLoader=L(LJ),this.environmentInjector=L(bi),this.urlSerializer=L(oA),this.rootContexts=L(Z0),this.location=L(vo),this.inputBindingEnabled=L(lA,{optional:!0})!==null,this.titleStrategy=L(vF),this.options=L(cA,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(hA),this.createViewTransition=L(UJ,{optional:!0}),this.navigationErrorHandler=L(HJ,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let t=r=>this.events.next(new zk(r)),i=r=>this.events.next(new jk(r));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(P(v(v({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,r){return this.transitions=new an({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:jm,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wn(o=>o.id!==0),me(o=>P(v({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mi(o=>{let s=!1,a=!1;return ae(o).pipe(mi(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ui.SupersededByNewNavigation),hi;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?P(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&u!=="reload"){let h="";return this.events.next(new mc(l.id,this.urlSerializer.serialize(l.rawUrl),h,Fk.IgnoredSameUrlNavigation)),l.resolve(!1),hi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ae(l).pipe(mi(h=>{let p=this.transitions?.getValue();return this.events.next(new Km(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?hi:Promise.resolve(h)}),xJ(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=P(v({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new $0(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:p,source:g,restoredState:w,extras:y}=l,E=new Km(h,this.urlSerializer.serialize(p),g,w);this.events.next(E);let T=lF(this.rootComponentType).snapshot;return this.currentTransition=o=P(v({},l),{targetSnapshot:T,urlAfterRedirects:p,extras:P(v({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,ae(o)}else{let h="";return this.events.next(new mc(l.id,this.urlSerializer.serialize(l.extractedUrl),h,Fk.IgnoredByUrlHandlingStrategy)),l.resolve(!1),hi}}),ct(l=>{let c=new Vk(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),me(l=>(this.currentTransition=o=P(v({},l),{guards:YZ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),sJ(this.environmentInjector,l=>this.events.next(l)),ct(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Y0(this.urlSerializer,l.guardsResult);let c=new Bk(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),wn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Ui.GuardRejected),!1)),Rk(l=>{if(l.guards.canActivateChecks.length)return ae(l).pipe(ct(c=>{let u=new Uk(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),mi(c=>{let u=!1;return ae(c).pipe(PJ(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Ui.NoDataFromResolver)}}))}),ct(c=>{let u=new Hk(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Rk(l=>{let c=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(ct(p=>{u.component=p}),me(()=>{})));for(let p of u.children)h.push(...c(p));return h};return gw(c(l.targetSnapshot.root)).pipe(ia(null),ao(1))}),Rk(()=>this.afterPreactivation()),mi(()=>{let{currentSnapshot:l,targetSnapshot:c}=o,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?Qe(u).pipe(me(()=>o)):ae(o)}),me(l=>{let c=$Z(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=P(v({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,o}),ct(()=>{this.events.next(new Qm)}),KZ(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ao(1),ct({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Xu(this.transitionAbortSubject.pipe(ct(l=>{throw l}))),ra(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Ui.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tn(l=>{if(a=!0,fF(l))this.events.next(new ps(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),GZ(l)?this.events.next(new Td(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let c=new Ym(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let u=Fr(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Jm){let{message:h,cancellationCode:p}=Y0(this.urlSerializer,u);this.events.next(new ps(o.id,this.urlSerializer.serialize(o.extractedUrl),h,p)),this.events.next(new Td(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(c);let h=t.errorHandler(l);o.resolve(!!h)}}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return hi}))}))}cancelNavigationTransition(t,i,r){let o=new ps(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jJ(n){return n!==jm}var $J=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(WJ),providedIn:"root"})}}return n})(),rA=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},WJ=(()=>{class n extends rA{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Vi(n)))(r||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_F=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:()=>L(qJ),providedIn:"root"})}}return n})(),qJ=(()=>{class n extends _F{constructor(){super(...arguments),this.location=L(vo),this.urlSerializer=L(oA),this.options=L(cA,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(hA),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new gs,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lF(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Km)this.stateMemento=this.createStateMemento();else if(t instanceof mc)this.rawUrlTree=i.initialUrl;else if(t instanceof $0){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??r,i)}}else t instanceof Qm?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof ps&&(t.code===Ui.GuardRejected||t.code===Ui.NoDataFromResolver)?this.restoreHistory(i):t instanceof Ym?this.restoreHistory(i,!0):t instanceof fc&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let r=t instanceof gs?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){let o=this.browserPageId,s=v(v({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(r,"",s)}else{let o=v(v({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Vi(n)))(r||n)}})()}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Hm=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Hm||{});function GJ(n,e){n.events.pipe(wn(t=>t instanceof fc||t instanceof ps||t instanceof Ym||t instanceof mc),me(t=>t instanceof fc||t instanceof mc?Hm.COMPLETE:(t instanceof ps?t.code===Ui.Redirect||t.code===Ui.SupersededByNewNavigation:!1)?Hm.REDIRECTING:Hm.FAILED),wn(t=>t!==Hm.REDIRECTING),ao(1)).subscribe(()=>{e()})}function KJ(n){throw n}var YJ={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QJ={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pa=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(_0),this.stateManager=L(_F),this.options=L(cA,{optional:!0})||{},this.pendingTasks=L(as),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(zJ),this.urlSerializer=L(oA),this.location=L(vo),this.urlHandlingStrategy=L(hA),this._events=new Rt,this.errorHandler=this.options.errorHandler||KJ,this.navigated=!1,this.routeReuseStrategy=L($J),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(dA,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(lA,{optional:!0}),this.eventsSubscription=new Ut,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ps&&i.code!==Ui.Redirect&&i.code!==Ui.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof fc)this.navigated=!0;else if(i instanceof Td){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,r.currentRawUrl),l=v({browserUrl:r.extras.browserUrl,info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:r.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jJ(r.source)},s);this.scheduleNavigation(a,jm,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}JJ(i)&&this._events.next(i)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),jm,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let l=v({},r);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(uA),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=v(v({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let p=r?r.snapshot:this.routerState.snapshot.root;h=rF(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return oF(h,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let r=qm(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,jm,null,i)}navigate(t,i={skipLocationChange:!1}){return ZJ(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let r;if(i===!0?r=v({},YJ):i===!1?r=v({},QJ):r=i,qm(t))return HL(this.currentUrlTree,t,r);let o=this.parseUrl(t);return HL(this.currentUrlTree,o,r)}removeEmptyProps(t){return Object.entries(t).reduce((i,[r,o])=>(o!=null&&(i[r]=o),i),{})}scheduleNavigation(t,i,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((h,p)=>{a=h,l=p});let u=this.pendingTasks.add();return GJ(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZJ(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new F(4008,!1)}function JJ(n){return!(n instanceof Qm)&&!(n instanceof Td)}var XJ=new X("");function CF(n,...e){return md([{provide:dA,multi:!0,useValue:n},[],{provide:Ia,useFactory:eX,deps:[Pa]},{provide:S0,multi:!0,useFactory:tX},e.map(t=>t.\u0275providers)])}function eX(n){return n.routerState.root}function tX(){let n=L(ua);return e=>{let t=n.get(fs);if(e!==t.components[0])return;let i=n.get(Pa),r=n.get(nX);n.get(iX)===1&&i.initialNavigation(),n.get(rX,null,Fe.Optional)?.setUpPreloading(),n.get(XJ,null,Fe.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var nX=new X("",{factory:()=>new Rt}),iX=new X("",{providedIn:"root",factory:()=>1});var rX=new X("");var DF=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(Ne(ba),Ne(Si))}}static{this.\u0275dir=kn({type:n})}}return n})(),bA=(()=>{class n extends DF{static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Vi(n)))(r||n)}})()}static{this.\u0275dir=kn({type:n,features:[oe]})}}return n})(),Rd=new X("");var oX={provide:Rd,useExisting:rs(()=>Dd),multi:!0};function sX(){let n=wo()?wo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var aX=new X(""),Dd=(()=>{class n extends DF{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!sX())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(Ne(ba),Ne(Si),Ne(aX,8))}}static{this.\u0275dir=kn({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,r){i&1&&M("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[ac([oX]),oe]})}}return n})();var lX=new X(""),cX=new X("");function MF(n){return n!=null}function OF(n){return lc(n)?Qe(n):n}function NF(n){let e={};return n.forEach(t=>{e=t!=null?v(v({},e),t):e}),Object.keys(e).length===0?null:e}function LF(n,e){return e.map(t=>t(n))}function uX(n){return!n.validate}function FF(n){return n.map(e=>uX(e)?e:t=>e.validate(t))}function dX(n){if(!n)return null;let e=n.filter(MF);return e.length==0?null:function(t){return NF(LF(t,e))}}function VF(n){return n!=null?dX(FF(n)):null}function hX(n){if(!n)return null;let e=n.filter(MF);return e.length==0?null:function(t){let i=LF(t,e).map(OF);return NE(i).pipe(me(NF))}}function BF(n){return n!=null?hX(FF(n)):null}function SF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function fX(n){return n._rawValidators}function mX(n){return n._rawAsyncValidators}function fA(n){return n?Array.isArray(n)?n:[n]:[]}function ev(n,e){return Array.isArray(n)?n.includes(e):n===e}function TF(n,e){let t=fA(e);return fA(n).forEach(r=>{ev(t,r)||t.push(r)}),t}function kF(n,e){return fA(e).filter(t=>!ev(n,t))}var tv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=BF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},mA=class extends tv{get formDirective(){return null}get path(){return null}},lp=class extends tv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},pA=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},dxe=P(v({},pX),{"[class.ng-submitted]":"isSubmitted"}),iv=(()=>{class n extends pA{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(Ne(lp,2))}}static{this.\u0275dir=kn({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,r){i&2&&xm("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[oe]})}}return n})();var rp="VALID",X0="INVALID",Id="PENDING",op="DISABLED",Pd=class{},nv=class extends Pd{constructor(e,t){super(),this.value=e,this.source=t}},sp=class extends Pd{constructor(e,t){super(),this.pristine=e,this.source=t}},ap=class extends Pd{constructor(e,t){super(),this.touched=e,this.source=t}},xd=class extends Pd{constructor(e,t){super(),this.status=e,this.source=t}};function gX(n){return(rv(n)?n.validators:n)||null}function bX(n){return Array.isArray(n)?VF(n):n||null}function wX(n,e){return(rv(e)?e.asyncValidators:n)||null}function vX(n){return Array.isArray(n)?BF(n):n||null}function rv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var gA=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=k0(()=>this.statusReactive()),this.statusReactive=y0(void 0),this._pristine=k0(()=>this.pristineReactive()),this.pristineReactive=y0(!0),this._touched=k0(()=>this.touchedReactive()),this.touchedReactive=y0(!1),this._events=new Rt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Sa(this.statusReactive)}set status(e){Sa(()=>this.statusReactive.set(e))}get valid(){return this.status===rp}get invalid(){return this.status===X0}get pending(){return this.status==Id}get disabled(){return this.status===op}get enabled(){return this.status!==op}get pristine(){return Sa(this.pristineReactive)}set pristine(e){Sa(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Sa(this.touchedReactive)}set touched(e){Sa(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kF(e,this._rawAsyncValidators))}hasValidator(e){return ev(this._rawValidators,e)}hasAsyncValidator(e){return ev(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(P(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new ap(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new ap(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(P(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new sp(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new sp(!0,i))}markAsPending(e={}){this.status=Id;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xd(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(P(v({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=op,this.errors=null,this._forEachChild(r=>{r.disable(P(v({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,i)),this._events.next(new xd(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=rp,this._forEachChild(i=>{i.enable(P(v({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rp||this.status===Id)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new nv(this.value,t)),this._events.next(new xd(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(P(v({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?op:rp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Id,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=OF(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new xd(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?op:this.errors?X0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Id)?Id:this._anyControlsHaveStatus(X0)?X0:rp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new sp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ap(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){rv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=vX(this._rawAsyncValidators)}};var UF=new X("CallSetDisabledState",{providedIn:"root",factory:()=>wA}),wA="always";function yX(n,e){return[...e.path,n]}function _X(n,e,t=wA){EX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),SX(n,e),kX(n,e),TX(n,e),CX(n,e)}function AF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CX(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function EX(n,e){let t=fX(n);e.validator!==null?n.setValidators(SF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=mX(n);e.asyncValidator!==null?n.setAsyncValidators(SF(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();AF(e._rawValidators,r),AF(e._rawAsyncValidators,r)}function SX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&HF(n,e)})}function TX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&HF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function HF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function kX(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function AX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function IX(n){return Object.getPrototypeOf(n.constructor)===bA}function xX(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(o=>{o.constructor===Dd?t=o:IX(o)?i=o:r=o}),r||i||t||null}function IF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var PX=class extends gA{constructor(e=null,t,i){super(gX(t),wX(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),rv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(xF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){IF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){IF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){xF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RX={provide:lp,useExisting:rs(()=>cp)},PF=Promise.resolve(),cp=(()=>{class n extends lp{constructor(t,i,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new PX,this._registered=!1,this.name="",this.update=new yt,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=xX(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),AX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_X(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){PF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,r=i!==0&&T0(i);PF.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yX(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(Ne(mA,9),Ne(lX,10),Ne(cX,10),Ne(Rd,10),Ne(cc,8),Ne(UF,8))}}static{this.\u0275dir=kn({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ac([RX]),oe,fa]})}}return n})();var DX={provide:Rd,useExisting:rs(()=>Md),multi:!0};function zF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function MX(n){return n.split(":")[0]}var Md=(()=>{class n extends bA{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i=this._getOptionId(t),r=zF(i,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){let i=MX(t);return this._optionMap.has(i)?this._optionMap.get(i):t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Vi(n)))(r||n)}})()}static{this.\u0275dir=kn({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,r){i&1&&M("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ac([DX]),oe]})}}return n})(),ov=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(zF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(Ne(Si),Ne(ba),Ne(Md,9))}}static{this.\u0275dir=kn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),OX={provide:Rd,useExisting:rs(()=>jF),multi:!0};function RF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function NX(n){return n.split(":")[0]}var jF=(()=>{class n extends bA{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let i;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));i=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else i=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{let r=[],o=i.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);r.push(c)}}else{let s=i.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,t(r)}}_registerOption(t){let i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){let i=NX(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}static{this.\u0275fac=(()=>{let t;return function(r){return(t||(t=Vi(n)))(r||n)}})()}static{this.\u0275dir=kn({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,r){i&1&&M("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[ac([OX]),oe]})}}return n})(),sv=(()=>{class n{constructor(t,i,r){this._element=t,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(RF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(RF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(i){return new(i||n)(Ne(Si),Ne(ba),Ne(jF,9))}}static{this.\u0275dir=kn({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var LX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=yi({type:n})}static{this.\u0275inj=vi({})}}return n})();var yn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:UF,useValue:t.callSetDisabledState??wA}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=yi({type:n})}static{this.\u0275inj=vi({imports:[LX]})}}return n})();var ue=class n{route=L(Ia);router=L(Pa);location=L(vo);constructor(){}ngOnInit(){console.log("BaseComponent initialized by ",this.constructor.name.replace(/^_/,"")),this.initializeWithAnimation()}initializeWithAnimation(){this.route.queryParams.subscribe(e=>{let t=e.scrollTo;if(t){let i=document.getElementById(t);i&&setTimeout(()=>{document.body.classList.add("animate-in"),document.body.classList.remove("animate-out"),i.scrollIntoView({behavior:"auto"})},400)}else document.body.classList.remove("animate-out"),document.body.classList.add("animate-in"),window.scrollTo({top:0,behavior:"smooth"})})}navigateWithAnimation(e,t){document.body.classList.remove("animate-in"),document.body.classList.add("animate-out"),setTimeout(()=>{this.router.navigate(e,t)},400)}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=kn({type:n})};function FX(n,e){if(n&1){let t=hs();d(0,"li")(1,"a",5),M("click",function(){let r=_i(t).$implicit;return Ci(r.action())}),m(2),f()()}if(n&2){let t=e.$implicit;Oe(2),Br(t.label)}}function VX(n,e){if(n&1&&(d(0,"div",3)(1,"ul"),Hn(2,FX,3,1,"li",4),f()()),n&2){let t=cn();Oe(2),Ti("ngForOf",t.menuItems)}}var Ra=class n{constructor(e){this.router=e}menuItems=[];isMenuOpen=!1;handleClickOutside(e){e.target.closest(".menu-button-container")||(this.isMenuOpen=!1)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(t){return new(t||n)(Ne(Pa))};static \u0275cmp=ee({type:n,selectors:[["app-menu"]],hostBindings:function(t,i){t&1&&M("click",function(o){return i.handleClickOutside(o)},!1,K5)},inputs:{menuItems:"menuItems"},standalone:!0,features:[re],decls:4,vars:1,consts:[[1,"menu-button-container"],[1,"menu-button",3,"click"],["class","menu",4,"ngIf"],[1,"menu"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"button",1),M("click",function(){return i.toggleMenu()}),m(2," \u22EE "),f(),Hn(3,VX,3,1,"div",2),f()),t&2&&(Oe(3),Ti("ngIf",i.isMenuOpen))},dependencies:[Ht,hL,fL],styles:[".menu-button-container[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.menu-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;transition:background .3s}.menu-button[_ngcontent-%COMP%]:hover{background:#fff3}.menu[_ngcontent-%COMP%]{position:absolute;width:max-content;top:40px;right:10px;background:#fff;border:1px solid #ccc;z-index:1000}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:0}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]})};var Zv={};Pr(Zv,{blockAPICallsBeforeInitialize:()=>Yv,blockAcquireTokenInPopups:()=>IV,blockNonBrowserEnvironment:()=>Kv,blockRedirectInIframe:()=>AV,blockReloadInHiddenIframes:()=>kV,clearHash:()=>PI,createGuid:()=>MI,getCurrentUri:()=>oi,getHomepage:()=>DI,invoke:()=>ni,invokeAsync:()=>D,isInIframe:()=>Xp,isInPopup:()=>TV,preconnect:()=>tg,preflightCheck:()=>eg,redirectPreflightCheck:()=>Qv,replaceHash:()=>RI});var A={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Od={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Hi=[A.OPENID_SCOPE,A.PROFILE_SCOPE,A.OFFLINE_ACCESS_SCOPE],vA=[...Hi,A.EMAIL_SCOPE],Wt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},qt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},zr={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Nd={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},kt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},av={PLAIN:"plain",S256:"S256"},jr={QUERY:"query",FRAGMENT:"fragment"},yA=P(v({},jr),{FORM_POST:"form_post"}),up={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},Ld={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},zt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ce={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var dp="appmetadata",WF="client_info",Da="1",Fd={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Xn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},un={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ue={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},bs={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},lv={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},cv={username:"username",password:"password"},hp={httpSuccess:200,httpBadRequest:400},pc={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},uv={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},$r={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},dv={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var _A=300;var gc={};Pr(gc,{postRequestFailed:()=>mp,unexpectedError:()=>fp});var fp="unexpected_error",mp="post_request_failed";var hv={[fp]:"Unexpected error in authentication.",[mp]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},qF={unexpectedError:{code:fp,desc:hv[fp]},postRequestFailed:{code:mp,desc:hv[mp]}},Pe=class n extends Error{constructor(e,t,i){let r=t?`${e}: ${t}`:e;super(r),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||A.EMPTY_STRING,this.errorMessage=t||A.EMPTY_STRING,this.subError=i||A.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function pp(n,e){return new Pe(n,e?`${hv[n]} ${e}`:hv[n])}var dn={};Pr(dn,{authTimeNotFound:()=>ws,authorizationCodeMissingFromServerResponse:()=>Rc,bindingKeyNotRemoved:()=>Dc,cannotAppendScopeSet:()=>Ic,cannotRemoveEmptyScope:()=>Ac,clientInfoDecodingError:()=>Ma,clientInfoEmptyError:()=>bc,deviceCodeExpired:()=>vp,deviceCodePollingCancelled:()=>wp,deviceCodeUnknownError:()=>yp,emptyInputScopeSet:()=>La,endSessionEndpointNotSupported:()=>Mc,endpointResolutionError:()=>ei,hashNotDeserialized:()=>_c,invalidAssertion:()=>Ep,invalidCacheEnvironment:()=>ys,invalidCacheRecord:()=>xc,invalidClientCredential:()=>Sp,invalidState:()=>Wr,keyIdMissing:()=>Oc,maxAgeTranspired:()=>Sc,methodNotImplemented:()=>Ce,missingTenantIdError:()=>Ip,multipleMatchingAccounts:()=>bp,multipleMatchingAppMetadata:()=>Tc,multipleMatchingTokens:()=>gp,nestedAppAuthBridgeDisabled:()=>xp,networkError:()=>vc,noAccountFound:()=>_p,noAccountInSilentRequest:()=>vs,noCryptoObject:()=>Fa,noNetworkConnectivity:()=>kp,nonceMismatch:()=>Ec,nullOrEmptyToken:()=>wc,openIdConfigError:()=>yc,requestCannotBeMade:()=>kc,stateMismatch:()=>Cc,stateNotFound:()=>Na,tokenClaimsCnfRequiredForSignedJwt:()=>Pc,tokenParsingError:()=>Oa,tokenRefreshRequired:()=>_o,unexpectedCredentialType:()=>Cp,userCanceled:()=>Ap,userTimeoutReached:()=>Tp});var Ma="client_info_decoding_error",bc="client_info_empty_error",Oa="token_parsing_error",wc="null_or_empty_token",ei="endpoints_resolution_error",vc="network_error",yc="openid_config_error",_c="hash_not_deserialized",Wr="invalid_state",Cc="state_mismatch",Na="state_not_found",Ec="nonce_mismatch",ws="auth_time_not_found",Sc="max_age_transpired",gp="multiple_matching_tokens",bp="multiple_matching_accounts",Tc="multiple_matching_appMetadata",kc="request_cannot_be_made",Ac="cannot_remove_empty_scope",Ic="cannot_append_scopeset",La="empty_input_scopeset",wp="device_code_polling_cancelled",vp="device_code_expired",yp="device_code_unknown_error",vs="no_account_in_silent_request",xc="invalid_cache_record",ys="invalid_cache_environment",_p="no_account_found",Fa="no_crypto_object",Cp="unexpected_credential_type",Ep="invalid_assertion",Sp="invalid_client_credential",_o="token_refresh_required",Tp="user_timeout_reached",Pc="token_claims_cnf_required_for_signedjwt",Rc="authorization_code_missing_from_server_response",Dc="binding_key_not_removed",Mc="end_session_endpoint_not_supported",Oc="key_id_missing",kp="no_network_connectivity",Ap="user_canceled",Ip="missing_tenant_id_error",Ce="method_not_implemented",xp="nested_app_auth_bridge_disabled";var Ee={[Ma]:"The client info could not be parsed/decoded correctly",[bc]:"The client info was empty",[Oa]:"Token cannot be parsed",[wc]:"The token is null or empty",[ei]:"Endpoints cannot be resolved",[vc]:"Network request failed",[yc]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[_c]:"The hash parameters could not be deserialized",[Wr]:"State was not the expected format",[Cc]:"State mismatch error",[Na]:"State not found",[Ec]:"Nonce mismatch error",[ws]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Sc]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[gp]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[bp]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Tc]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[kc]:"Token request cannot be made without authorization code or refresh token.",[Ac]:"Cannot remove null or empty scope from ScopeSet",[Ic]:"Cannot append ScopeSet",[La]:"Empty input ScopeSet cannot be processed",[wp]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[vp]:"Device code is expired.",[yp]:"Device code stopped polling for unknown reasons.",[vs]:"Please pass an account object, silent flow is not supported without account information",[xc]:"Cache record object was null or undefined.",[ys]:"Invalid environment when attempting to create cache entry",[_p]:"No account found in cache for given key.",[Fa]:"No crypto object detected.",[Cp]:"Unexpected credential type.",[Ep]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Sp]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[_o]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[Tp]:"User defined timeout for device code polling reached",[Pc]:"Cannot generate a POP jwt if the token_claims are not populated",[Rc]:"Server response does not contain an authorization code to proceed",[Dc]:"Could not remove the credential's binding key from storage.",[Mc]:"The provided authority does not support logout",[Oc]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[kp]:"No network connectivity. Check your internet connection.",[Ap]:"User cancelled the flow.",[Ip]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Ce]:"This method has not been implemented",[xp]:"The nested app auth bridge is disabled"},GF={clientInfoDecodingError:{code:Ma,desc:Ee[Ma]},clientInfoEmptyError:{code:bc,desc:Ee[bc]},tokenParsingError:{code:Oa,desc:Ee[Oa]},nullOrEmptyToken:{code:wc,desc:Ee[wc]},endpointResolutionError:{code:ei,desc:Ee[ei]},networkError:{code:vc,desc:Ee[vc]},unableToGetOpenidConfigError:{code:yc,desc:Ee[yc]},hashNotDeserialized:{code:_c,desc:Ee[_c]},invalidStateError:{code:Wr,desc:Ee[Wr]},stateMismatchError:{code:Cc,desc:Ee[Cc]},stateNotFoundError:{code:Na,desc:Ee[Na]},nonceMismatchError:{code:Ec,desc:Ee[Ec]},authTimeNotFoundError:{code:ws,desc:Ee[ws]},maxAgeTranspired:{code:Sc,desc:Ee[Sc]},multipleMatchingTokens:{code:gp,desc:Ee[gp]},multipleMatchingAccounts:{code:bp,desc:Ee[bp]},multipleMatchingAppMetadata:{code:Tc,desc:Ee[Tc]},tokenRequestCannotBeMade:{code:kc,desc:Ee[kc]},removeEmptyScopeError:{code:Ac,desc:Ee[Ac]},appendScopeSetError:{code:Ic,desc:Ee[Ic]},emptyInputScopeSetError:{code:La,desc:Ee[La]},DeviceCodePollingCancelled:{code:wp,desc:Ee[wp]},DeviceCodeExpired:{code:vp,desc:Ee[vp]},DeviceCodeUnknownError:{code:yp,desc:Ee[yp]},NoAccountInSilentRequest:{code:vs,desc:Ee[vs]},invalidCacheRecord:{code:xc,desc:Ee[xc]},invalidCacheEnvironment:{code:ys,desc:Ee[ys]},noAccountFound:{code:_p,desc:Ee[_p]},noCryptoObj:{code:Fa,desc:Ee[Fa]},unexpectedCredentialType:{code:Cp,desc:Ee[Cp]},invalidAssertion:{code:Ep,desc:Ee[Ep]},invalidClientCredential:{code:Sp,desc:Ee[Sp]},tokenRefreshRequired:{code:_o,desc:Ee[_o]},userTimeoutReached:{code:Tp,desc:Ee[Tp]},tokenClaimsRequired:{code:Pc,desc:Ee[Pc]},noAuthorizationCodeFromServer:{code:Rc,desc:Ee[Rc]},bindingKeyNotRemovedError:{code:Dc,desc:Ee[Dc]},logoutNotSupported:{code:Mc,desc:Ee[Mc]},keyIdMissing:{code:Oc,desc:Ee[Oc]},noNetworkConnectivity:{code:kp,desc:Ee[kp]},userCanceledError:{code:Ap,desc:Ee[Ap]},missingTenantIdError:{code:Ip,desc:Ee[Ip]},nestedAppAuthBridgeDisabled:{code:xp,desc:Ee[xp]}},Nc=class n extends Pe{constructor(e,t){super(e,t?`${Ee[e]}: ${t}`:Ee[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function R(n,e){return new Nc(n,e)}var Va={createNewGuid:()=>{throw R(Ce)},base64Decode:()=>{throw R(Ce)},base64Encode:()=>{throw R(Ce)},base64UrlEncode:()=>{throw R(Ce)},encodeKid:()=>{throw R(Ce)},getPublicKeyThumbprint(){return S(this,null,function*(){throw R(Ce)})},removeTokenBindingKey(){return S(this,null,function*(){throw R(Ce)})},clearKeystore(){return S(this,null,function*(){throw R(Ce)})},signJwt(){return S(this,null,function*(){throw R(Ce)})},hashString(){return S(this,null,function*(){throw R(Ce)})}};var lt=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(lt||{}),ki=class n{constructor(e,t,i){this.level=lt.Info;let r=()=>{},o=e||n.createDefaultLoggerOptions();this.localCallback=o.loggerCallback||r,this.piiLoggingEnabled=o.piiLoggingEnabled||!1,this.level=typeof o.logLevel=="number"?o.logLevel:lt.Info,this.correlationId=o.correlationId||A.EMPTY_STRING,this.packageName=t||A.EMPTY_STRING,this.packageVersion=i||A.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:lt.Info}}clone(e,t,i){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:i||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let o=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${lt[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,i){this.localCallback&&this.localCallback(e,t,i)}error(e,t){this.logMessage(e,{logLevel:lt.Error,containsPii:!1,correlationId:t||A.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:lt.Error,containsPii:!0,correlationId:t||A.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:lt.Warning,containsPii:!1,correlationId:t||A.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:lt.Warning,containsPii:!0,correlationId:t||A.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:lt.Info,containsPii:!1,correlationId:t||A.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:lt.Info,containsPii:!0,correlationId:t||A.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:lt.Verbose,containsPii:!1,correlationId:t||A.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:lt.Verbose,containsPii:!0,correlationId:t||A.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:lt.Trace,containsPii:!1,correlationId:t||A.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:lt.Trace,containsPii:!0,correlationId:t||A.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var fv="@azure/msal-common",Vd="14.16.0";var Ba={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var bt={};Pr(bt,{createAccessTokenEntity:()=>SA,createIdTokenEntity:()=>EA,createRefreshTokenEntity:()=>TA,generateAppMetadataKey:()=>QX,generateAuthorityMetadataExpiresAt:()=>pv,generateCredentialKey:()=>Dp,isAccessTokenEntity:()=>UX,isAppMetadataEntity:()=>ZX,isAuthorityMetadataEntity:()=>JX,isAuthorityMetadataExpired:()=>gv,isCredentialEntity:()=>mv,isIdTokenEntity:()=>HX,isRefreshTokenEntity:()=>zX,isServerTelemetryEntity:()=>KX,isThrottlingEntity:()=>YX,updateAuthorityEndpointMetadata:()=>Ud,updateCloudDiscoveryMetadata:()=>Mp});var Ua={};Pr(Ua,{checkMaxAge:()=>Pp,extractTokenClaims:()=>_s,getJWSPayload:()=>KF});function _s(n,e){let t=KF(n);try{let i=e(t);return JSON.parse(i)}catch{throw R(Oa)}}function KF(n){if(!n)throw R(wc);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw R(Oa);return t[2]}function Pp(n,e){if(e===0||Date.now()-3e5>n+e)throw R(Sc)}var Rp={};Pr(Rp,{delay:()=>BX,isTokenExpired:()=>Bd,nowSeconds:()=>zi,wasClockTurnedBack:()=>CA});function zi(){return Math.round(new Date().getTime()/1e3)}function Bd(n,e){let t=Number(n)||0;return zi()+e>t}function CA(n){return Number(n)>zi()}function BX(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function Dp(n){return[jX(n),$X(n),WX(n),qX(n),GX(n)].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}function EA(n,e,t,i,r){return{credentialType:ce.ID_TOKEN,homeAccountId:n,environment:e,clientId:i,secret:t,realm:r}}function SA(n,e,t,i,r,o,s,a,l,c,u,h,p,g,w){let y={homeAccountId:n,credentialType:ce.ACCESS_TOKEN,secret:t,cachedAt:zi().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:i,realm:r,target:o,tokenType:u||Ue.BEARER};if(h&&(y.userAssertionHash=h),c&&(y.refreshOn=c.toString()),g&&(y.requestedClaims=g,y.requestedClaimsHash=w),y.tokenType?.toLowerCase()!==Ue.BEARER.toLowerCase())switch(y.credentialType=ce.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Ue.POP:let E=_s(t,l);if(!E?.cnf?.kid)throw R(Pc);y.keyId=E.cnf.kid;break;case Ue.SSH:y.keyId=p}return y}function TA(n,e,t,i,r,o,s){let a={credentialType:ce.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:i,secret:t};return o&&(a.userAssertionHash=o),r&&(a.familyId=r),s&&(a.expiresOn=s.toString()),a}function mv(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function UX(n){return n?mv(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===ce.ACCESS_TOKEN||n.credentialType===ce.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function HX(n){return n?mv(n)&&n.hasOwnProperty("realm")&&n.credentialType===ce.ID_TOKEN:!1}function zX(n){return n?mv(n)&&n.credentialType===ce.REFRESH_TOKEN:!1}function jX(n){return[n.homeAccountId,n.environment].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}function $X(n){let e=n.credentialType===ce.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}function WX(n){return(n.target||"").toLowerCase()}function qX(n){return(n.requestedClaimsHash||"").toLowerCase()}function GX(n){return n.tokenType&&n.tokenType.toLowerCase()!==Ue.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function KX(n,e){let t=n.indexOf(un.CACHE_KEY)===0,i=!0;return e&&(i=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&i}function YX(n,e){let t=!1;n&&(t=n.indexOf(bs.THROTTLING_PREFIX)===0);let i=!0;return e&&(i=e.hasOwnProperty("throttleTime")),t&&i}function QX({environment:n,clientId:e}){return[dp,n,e].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}function ZX(n,e){return e?n.indexOf(dp)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function JX(n,e){return e?n.indexOf(Fd.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function pv(){return zi()+Fd.REFRESH_TIME_SECONDS}function Ud(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Mp(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function gv(n){return n.expiresAt<=zi()}var qr={};Pr(qr,{authorityMismatch:()=>Up,authorityUriInsecure:()=>Fc,cannotAllowNativeBroker:()=>Bp,cannotSetOIDCOptions:()=>Vp,claimsRequestParsingError:()=>Op,emptyInputScopesError:()=>Bc,invalidAuthenticationHeader:()=>Fp,invalidAuthorityMetadata:()=>$c,invalidClaims:()=>Cs,invalidCloudDiscoveryMetadata:()=>Ha,invalidCodeChallengeMethod:()=>jc,invalidPromptValue:()=>Uc,logoutRequestEmpty:()=>zc,missingNonceAuthenticationHeader:()=>Lp,missingSshJwk:()=>Ss,missingSshKid:()=>Np,pkceParamsMissing:()=>Es,redirectUriEmpty:()=>Lc,tokenRequestEmpty:()=>Hc,untrustedAuthority:()=>Wc,urlEmptyError:()=>Vc,urlParseError:()=>Co});var Lc="redirect_uri_empty",Op="claims_request_parsing_error",Fc="authority_uri_insecure",Co="url_parse_error",Vc="empty_url_error",Bc="empty_input_scopes_error",Uc="invalid_prompt_value",Cs="invalid_claims",Hc="token_request_empty",zc="logout_request_empty",jc="invalid_code_challenge_method",Es="pkce_params_missing",Ha="invalid_cloud_discovery_metadata",$c="invalid_authority_metadata",Wc="untrusted_authority",Ss="missing_ssh_jwk",Np="missing_ssh_kid",Lp="missing_nonce_authentication_header",Fp="invalid_authentication_header",Vp="cannot_set_OIDCOptions",Bp="cannot_allow_native_broker",Up="authority_mismatch";var Nt={[Lc]:"A redirect URI is required for all calls, and none has been set.",[Op]:"Could not parse the given claims request object.",[Fc]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Co]:"URL could not be parsed into appropriate segments.",[Vc]:"URL was empty or null.",[Bc]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Uc]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[Cs]:"Given claims parameter must be a stringified JSON object.",[Hc]:"Token request was empty and not found in cache.",[zc]:"The logout request was null or undefined.",[jc]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Es]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Ha]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[$c]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Wc]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Ss]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Np]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Lp]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Fp]:"Invalid authentication header provided",[Vp]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Bp]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Up]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},YF={redirectUriNotSet:{code:Lc,desc:Nt[Lc]},claimsRequestParsingError:{code:Op,desc:Nt[Op]},authorityUriInsecure:{code:Fc,desc:Nt[Fc]},urlParseError:{code:Co,desc:Nt[Co]},urlEmptyError:{code:Vc,desc:Nt[Vc]},emptyScopesError:{code:Bc,desc:Nt[Bc]},invalidPrompt:{code:Uc,desc:Nt[Uc]},invalidClaimsRequest:{code:Cs,desc:Nt[Cs]},tokenRequestEmptyError:{code:Hc,desc:Nt[Hc]},logoutRequestEmptyError:{code:zc,desc:Nt[zc]},invalidCodeChallengeMethod:{code:jc,desc:Nt[jc]},invalidCodeChallengeParams:{code:Es,desc:Nt[Es]},invalidCloudDiscoveryMetadata:{code:Ha,desc:Nt[Ha]},invalidAuthorityMetadata:{code:$c,desc:Nt[$c]},untrustedAuthority:{code:Wc,desc:Nt[Wc]},missingSshJwk:{code:Ss,desc:Nt[Ss]},missingSshKid:{code:Np,desc:Nt[Np]},missingNonceAuthenticationHeader:{code:Lp,desc:Nt[Lp]},invalidAuthenticationHeader:{code:Fp,desc:Nt[Fp]},cannotSetOIDCOptions:{code:Vp,desc:Nt[Vp]},cannotAllowNativeBroker:{code:Bp,desc:Nt[Bp]},authorityMismatch:{code:Up,desc:Nt[Up]}},Hp=class n extends Pe{constructor(e){super(e,Nt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function je(n){return new Hp(n)}var Lt=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},i=e.split("&"),r=o=>decodeURIComponent(o.replace(/\+/g," "));return i.forEach(o=>{if(o.trim()){let[s,a]=o.split(/=(.+)/g,2);s&&a&&(t[r(s)]=r(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var At=class n{constructor(e){let t=e?Lt.trimArrayEntries([...e]):[],i=t?Lt.removeEmptyStringsFromArray(t):[];this.validateInputScopes(i),this.scopes=new Set,i.forEach(r=>this.scopes.add(r))}static fromString(e){let i=(e||A.EMPTY_STRING).split(" ");return new n(i)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(A.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw je(Bc)}containsScope(e){let t=this.printScopesLowerCase().split(" "),i=new n(t);return e?i.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return vA.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw R(Ic)}}removeScope(e){if(!e)throw R(Ac);this.scopes.delete(e.trim())}removeOIDCScopes(){vA.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw R(La);let t=new Set;return e.scopes.forEach(i=>t.add(i.toLowerCase())),this.scopes.forEach(i=>t.add(i.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw R(La);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),i=e.getScopeCount(),r=this.getScopeCount();return t.size<r+i}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):A.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Hd(n,e){if(!n)throw R(bc);try{let t=e(n);return JSON.parse(t)}catch{throw R(Ma)}}function Ts(n){if(!n)throw R(Ma);let e=n.split(zt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?A.EMPTY_STRING:e[1]}}function zd(n,e){return!!n&&!!e&&n===e.split(".")[1]}function jd(n,e,t,i){if(i){let{oid:r,sub:o,tid:s,name:a,tfp:l,acr:c}=i,u=s||l||c||"";return{tenantId:u,localAccountId:r||o||"",name:a,isHomeTenant:zd(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:zd(t,n)}}function qc(n,e,t,i){let r=n;if(e){let o=e,{isHomeTenant:a}=o,l=Bt(o,["isHomeTenant"]);r=v(v({},n),l)}if(t){let s=jd(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,l=Bt(s,["isHomeTenant"]);return r=P(v(v({},r),l),{idTokenClaims:t,idToken:i}),r}return r}var ti={Default:0,Adfs:1,Dsts:2,Ciam:3};function bv(n){return n&&(n.tid||n.tfp||n.acr)||null}var xn={AAD:"AAD",OIDC:"OIDC"};var _t=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(zt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,i){let r=new n;t.authorityType===ti.Adfs?r.authorityType=Ld.ADFS_ACCOUNT_TYPE:t.protocolMode===xn.AAD?r.authorityType=Ld.MSSTS_ACCOUNT_TYPE:r.authorityType=Ld.GENERIC_ACCOUNT_TYPE;let o;e.clientInfo&&i&&(o=Hd(e.clientInfo,i)),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw R(ys);r.environment=s,r.realm=o?.utid||bv(e.idTokenClaims)||"",r.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=a||l||"",r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{let c=jd(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[c]}return r}static createFromAccountInfo(e,t,i){let r=new n;return r.authorityType=e.authorityType||Ld.GENERIC_ACCOUNT_TYPE,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=i,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r}static generateHomeAccountId(e,t,i,r,o){if(!(t===ti.Adfs||t===ti.Dsts)){if(e)try{let s=Hd(e,r.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}i.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,i){if(!e||!t)return!1;let r=!0;if(i){let o=e.idTokenClaims||{},s=t.idTokenClaims||{};r=o.iat===s.iat&&o.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}};var za={};Pr(za,{getDeserializedResponse:()=>kA,stripLeadingHashOrQuery:()=>QF});function QF(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function kA(n){if(!n||n.indexOf("=")<0)return null;try{let e=QF(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw R(_c)}return null}var Se=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw je(Vc);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Lt.endsWith(t,"?")?t=t.slice(0,-1):Lt.endsWith(t,"?/")&&(t=t.slice(0,-2)),Lt.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw je(Co)}if(!e.HostNameAndPort||!e.PathSegments)throw je(Co);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw je(Fc)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),i=t.PathSegments;return e&&i.length!==0&&(i[0]===zr.COMMON||i[0]===zr.ORGANIZATIONS)&&(i[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw je(Co);let i={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},r=i.AbsolutePath.split("/");return r=r.filter(o=>o&&o.length>0),i.PathSegments=r,i.QueryString&&i.QueryString.endsWith("/")&&(i.QueryString=i.QueryString.substring(0,i.QueryString.length-1)),i}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),i=e.match(t);if(!i)throw je(Co);return i[2]}static getAbsoluteUrl(e,t){if(e[0]===A.FORWARD_SLASH){let r=new n(t).getUrlComponents();return r.Protocol+"//"+r.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!kA(e)}};var JF={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},AA=JF.endpointMetadata,IA=JF.instanceDiscoveryMetadata,xA=new Set;IA.metadata.forEach(n=>{n.aliases.forEach(e=>{xA.add(e)})});function XF(n,e){let t,i=n.canonicalAuthority;if(i){let r=new Se(i).getUrlComponents().HostNameAndPort;t=ZF(r,n.cloudDiscoveryMetadata?.metadata,Xn.CONFIG,e)||ZF(r,IA.metadata,Xn.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function ZF(n,e,t,i){if(i?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let r=zp(e,n);if(r)return i?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),r.aliases;i?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function eV(n){return zp(IA.metadata,n)}function zp(n,e){for(let t=0;t<n.length;t++){let i=n[t];if(i.aliases.includes(e))return i}return null}var wv="cache_quota_exceeded",jp="cache_error_unknown";var PA={[wv]:"Exceeded cache storage capacity.",[jp]:"Unexpected error occurred when using cache storage."},ks=class n extends Error{constructor(e,t){let i=t||(PA[e]?PA[e]:PA[jp]);super(`${e}: ${i}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=i}};var As=class n{constructor(e,t,i,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=i.clone(fv,Vd),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(r=>r.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,i,r){let o=null,s;if(r&&!this.tenantProfileMatchesFilter(i,r))return null;let a=this.getIdToken(e,t,i.tenantId);return a&&(s=_s(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,r))?null:(o=qc(e,i,s,a?.secret),o)}getTenantProfilesFromAccountEntity(e,t,i){let r=e.getAccountInfo(),o=r.tenantProfiles||new Map,s=this.getTokenKeys();if(t){let l=o.get(t);if(l)o=new Map([[t,l]]);else return[]}let a=[];return o.forEach(l=>{let c=this.getTenantedAccountInfoByFilter(r,s,l,i);c&&a.push(c)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,i){return S(this,null,function*(){if(!e)throw R(xc);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken)),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(r){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),r instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${r.message}`,i),r.name==="QuotaExceededError"||r.name==="NS_ERROR_DOM_QUOTA_REACHED"||r.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",i),new ks(wv)):new ks(r.name,r.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${r}`,i),new ks(jp))}})}saveAccessToken(e){return S(this,null,function*(){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),r=At.fromString(e.target),o=[];i.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,t,!1))return;let a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,t)&&At.fromString(a.target).intersectingScopeSets(r)&&o.push(this.removeAccessToken(s))}),yield Promise.all(o),this.setAccessTokenCredential(e)})}getAccountsFilteredBy(e){let t=this.getAccountKeys(),i=[];return t.forEach(r=>{if(!this.isAccountKey(r,e.homeAccountId))return;let o=this.getAccount(r,this.commonLogger);if(!o||e.homeAccountId&&!this.matchHomeAccountId(o,e.homeAccountId)||e.username&&!this.matchUsername(o.username,e.username)||e.environment&&!this.matchEnvironment(o,e.environment)||e.realm&&!this.matchRealm(o,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(o,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(o,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=o.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,s));a&&a.length===0||i.push(o)}),i}isAccountKey(e,t,i){return!(e.split(zt.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||i&&!e.toLowerCase().includes(i.toLowerCase()))}isCredentialKey(e){if(e.split(zt.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(ce.ID_TOKEN.toLowerCase())===-1&&t.indexOf(ce.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(ce.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(ce.REFRESH_TOKEN.toLowerCase())>-1){let i=`${ce.REFRESH_TOKEN}${zt.CACHE_KEY_SEPARATOR}${this.clientId}${zt.CACHE_KEY_SEPARATOR}`,r=`${ce.REFRESH_TOKEN}${zt.CACHE_KEY_SEPARATOR}${Da}${zt.CACHE_KEY_SEPARATOR}`;if(t.indexOf(i.toLowerCase())===-1&&t.indexOf(r.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===ce.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Ue.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),i={};return t.forEach(r=>{if(!this.isAppMetadata(r))return;let o=this.getAppMetadata(r);o&&(e.environment&&!this.matchEnvironment(o,e.environment)||e.clientId&&!this.matchClientId(o,e.clientId)||(i[r]=o))}),i}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),i=null;return t.forEach(r=>{if(!this.isAuthorityMetadata(r)||r.indexOf(this.clientId)===-1)return;let o=this.getAuthorityMetadata(r);o&&o.aliases.indexOf(e)!==-1&&(i=o)}),i}removeAllAccounts(){return S(this,null,function*(){let e=this.getAccountKeys(),t=[];e.forEach(i=>{t.push(this.removeAccount(i))}),yield Promise.all(t)})}removeAccount(e){return S(this,null,function*(){let t=this.getAccount(e,this.commonLogger);t&&(yield this.removeAccountContext(t),this.removeItem(e))})}removeAccountContext(e){return S(this,null,function*(){let t=this.getTokenKeys(),i=e.generateAccountId(),r=[];t.idToken.forEach(o=>{o.indexOf(i)===0&&this.removeIdToken(o)}),t.accessToken.forEach(o=>{o.indexOf(i)===0&&r.push(this.removeAccessToken(o))}),t.refreshToken.forEach(o=>{o.indexOf(i)===0&&this.removeRefreshToken(o)}),yield Promise.all(r)})}updateOutdatedCachedAccount(e,t,i){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let r=this.getAccountKeys().filter(c=>c.startsWith(t.homeAccountId)),o=[];r.forEach(c=>{let u=this.getCachedAccountEntity(c);u&&o.push(u)});let s=o.find(c=>zd(c.realm,c.homeAccountId))||o[0];s.tenantProfiles=o.map(c=>({tenantId:c.realm,localAccountId:c.localAccountId,name:c.name,isHomeTenant:zd(c.realm,c.homeAccountId)}));let a=n.toObject(new _t,v({},s)),l=a.generateAccountKey();return r.forEach(c=>{c!==l&&this.removeOutdatedAccount(e)}),this.setAccount(a),i?.verbose("Updated an outdated account entity in the cache"),a}return t}removeAccessToken(e){return S(this,null,function*(){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===ce.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Ue.POP){let r=t.keyId;if(r)try{yield this.cryptoImpl.removeTokenBindingKey(r)}catch{throw R(Dc)}}return this.removeItem(e)}})}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=_t.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,i,r,o){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ce.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(s,t),l=a.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let c=a;if(!i){let u=new Map;a.forEach((p,g)=>{p.realm===e.tenantId&&u.set(g,p)});let h=u.size;if(h<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(h===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;c=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((u,h)=>{this.removeIdToken(h)}),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let i=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return i.forEach(o=>{if(!this.idTokenKeyMatchesFilter(o,v({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(o);s&&this.credentialMatchesFilter(s,e)&&r.set(o,s)}),r}idTokenKeyMatchesFilter(e,t){let i=e.toLowerCase();return!(t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,i,r,o,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=At.createSearchScopes(t.scopes),l=t.authenticationScheme||Ue.BEARER,c=l&&l.toLowerCase()!==Ue.BEARER.toLowerCase()?ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:ce.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:l,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},h=i&&i.accessToken||this.getTokenKeys().accessToken,p=[];h.forEach(w=>{if(this.accessTokenKeyMatchesFilter(w,u,!0)){let y=this.getAccessTokenCredential(w);y&&this.credentialMatchesFilter(y,u)&&p.push(y)}});let g=p.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(w=>{this.removeAccessToken(Dp(w))}),o&&s&&o.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,t,i){let r=e.toLowerCase();if(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&r.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&r.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let o=t.target.asArray();for(let s=0;s<o.length;s++){if(i&&!r.includes(o[s].toLowerCase()))return!1;if(!i&&r.includes(o[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),i=[];return t.accessToken.forEach(r=>{if(!this.accessTokenKeyMatchesFilter(r,e,!0))return;let o=this.getAccessTokenCredential(r);o&&this.credentialMatchesFilter(o,e)&&i.push(o)}),i}getRefreshToken(e,t,i,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?Da:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ce.REFRESH_TOKEN,clientId:this.clientId,familyId:s},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,c=[];l.forEach(h=>{if(this.refreshTokenKeyMatchesFilter(h,a)){let p=this.getRefreshTokenCredential(h);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});let u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&r&&o&&r.addFields({multiMatchedRT:u},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){let i=e.toLowerCase();return!(t.familyId&&i.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},i=this.getAppMetadataFilteredBy(t),r=Object.keys(i).map(s=>i[s]),o=r.length;if(o<1)return null;if(o>1)throw R(Tc);return r[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===Da)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let i=e.oid||e.sub;return t===i}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let r=XF(this.staticAuthorityOptions,this.commonLogger);if(r.includes(t)&&r.includes(e.environment))return!0}let i=this.getAuthorityMetadataByAlias(t);return!!(i&&i.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==ce.ACCESS_TOKEN&&e.credentialType!==ce.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:At.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(dp)!==-1}isAuthorityMetadata(e){return e.indexOf(Fd.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Fd.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let i in t)e[i]=t[i];return e}},$p=class extends As{setAccount(){throw R(Ce)}getAccount(){throw R(Ce)}getCachedAccountEntity(){throw R(Ce)}setIdTokenCredential(){throw R(Ce)}getIdTokenCredential(){throw R(Ce)}setAccessTokenCredential(){throw R(Ce)}getAccessTokenCredential(){throw R(Ce)}setRefreshTokenCredential(){throw R(Ce)}getRefreshTokenCredential(){throw R(Ce)}setAppMetadata(){throw R(Ce)}getAppMetadata(){throw R(Ce)}setServerTelemetry(){throw R(Ce)}getServerTelemetry(){throw R(Ce)}setAuthorityMetadata(){throw R(Ce)}getAuthorityMetadata(){throw R(Ce)}getAuthorityMetadataKeys(){throw R(Ce)}setThrottlingCache(){throw R(Ce)}getThrottlingCache(){throw R(Ce)}removeItem(){throw R(Ce)}getKeys(){throw R(Ce)}getAccountKeys(){throw R(Ce)}getTokenKeys(){throw R(Ce)}updateCredentialCacheKey(){throw R(Ce)}removeOutdatedAccount(){throw R(Ce)}};var vv={tokenRenewalOffsetSeconds:_A,preventCorsPreflight:!1},XX={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:lt.Info,correlationId:A.EMPTY_STRING},eee={claimsBasedCachingEnabled:!1},tee={sendGetRequestAsync(){return S(this,null,function*(){throw R(Ce)})},sendPostRequestAsync(){return S(this,null,function*(){throw R(Ce)})}},nee={sku:A.SKU,version:Vd,cpu:A.EMPTY_STRING,os:A.EMPTY_STRING},iee={clientSecret:A.EMPTY_STRING,clientAssertion:void 0},ree={azureCloudInstance:Ba.None,tenant:`${A.DEFAULT_COMMON_TENANT}`},oee={application:{appName:"",appVersion:""}};function tV({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:i,storageInterface:r,networkInterface:o,cryptoInterface:s,clientCredentials:a,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:h,serializableCache:p}){let g=v(v({},XX),t);return{authOptions:see(n),systemOptions:v(v({},vv),e),loggerOptions:g,cacheOptions:v(v({},eee),i),storageInterface:r||new $p(n.clientId,Va,new ki(g)),networkInterface:o||tee,cryptoInterface:s||Va,clientCredentials:a||iee,libraryInfo:v(v({},nee),l),telemetry:v(v({},oee),c),serverTelemetryManager:u||null,persistencePlugin:h||null,serializableCache:p||null}}function see(n){return v({clientCapabilities:[],azureCloudOptions:ree,skipAuthorityMetadataCache:!1,instanceAware:!1},n)}function Wp(n){return n.authOptions.authority.options.protocolMode===xn.OIDC}var hn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var xs={};Pr(xs,{ACCESS_TOKEN:()=>cee,BROKER_CLIENT_ID:()=>Tv,BROKER_REDIRECT_URI:()=>hI,CCS_HEADER:()=>bee,CLAIMS:()=>MA,CLIENT_ASSERTION:()=>iI,CLIENT_ASSERTION_TYPE:()=>rI,CLIENT_ID:()=>Is,CLIENT_INFO:()=>mee,CLIENT_REQUEST_ID:()=>jA,CLIENT_SECRET:()=>nI,CODE:()=>BA,CODE_CHALLENGE:()=>UA,CODE_CHALLENGE_METHOD:()=>HA,CODE_VERIFIER:()=>zA,DEVICE_CODE:()=>tI,DOMAIN_HINT:()=>dI,ERROR:()=>aee,ERROR_DESCRIPTION:()=>lee,EXPIRES_IN:()=>dee,FOCI:()=>gee,GRANT_TYPE:()=>DA,ID_TOKEN:()=>uee,ID_TOKEN_HINT:()=>eI,LOGIN_HINT:()=>uI,LOGOUT_HINT:()=>lI,NATIVE_BROKER:()=>aI,NONCE:()=>FA,OBO_ASSERTION:()=>oI,ON_BEHALF_OF:()=>pee,POST_LOGOUT_URI:()=>XA,PROMPT:()=>VA,REDIRECT_URI:()=>yv,REFRESH_TOKEN:()=>NA,REFRESH_TOKEN_EXPIRES_IN:()=>hee,REQUESTED_TOKEN_USE:()=>sI,REQ_CNF:()=>Ev,RESPONSE_MODE:()=>RA,RESPONSE_TYPE:()=>_v,RETURN_SPA_CODE:()=>Sv,SCOPE:()=>OA,SESSION_STATE:()=>fee,SID:()=>cI,STATE:()=>LA,TOKEN_TYPE:()=>Cv,X_APP_NAME:()=>ZA,X_APP_VER:()=>JA,X_CLIENT_CPU:()=>GA,X_CLIENT_CURR_TELEM:()=>KA,X_CLIENT_EXTRA_SKU:()=>wee,X_CLIENT_LAST_TELEM:()=>YA,X_CLIENT_OS:()=>qA,X_CLIENT_SKU:()=>$A,X_CLIENT_VER:()=>WA,X_MS_LIB_CAPABILITY:()=>QA});var Is="client_id",yv="redirect_uri",_v="response_type",RA="response_mode",DA="grant_type",MA="claims",OA="scope",aee="error",lee="error_description",cee="access_token",uee="id_token",NA="refresh_token",dee="expires_in",hee="refresh_token_expires_in",LA="state",FA="nonce",VA="prompt",fee="session_state",mee="client_info",BA="code",UA="code_challenge",HA="code_challenge_method",zA="code_verifier",jA="client-request-id",$A="x-client-SKU",WA="x-client-VER",qA="x-client-OS",GA="x-client-CPU",KA="x-client-current-telemetry",YA="x-client-last-telemetry",QA="x-ms-lib-capability",ZA="x-app-name",JA="x-app-ver",XA="post_logout_redirect_uri",eI="id_token_hint",tI="device_code",nI="client_secret",iI="client_assertion",rI="client_assertion_type",Cv="token_type",Ev="req_cnf",oI="assertion",sI="requested_token_use",pee="on_behalf_of",gee="foci",bee="X-AnchorMailbox",Sv="return_spa_code",aI="nativebroker",lI="logout_hint",cI="sid",uI="login_hint",dI="domain_hint",wee="x-client-xtra-sku",Tv="brk_client_id",hI="brk_redirect_uri";var Eo=class{static validateRedirectUri(e){if(!e)throw je(Lc)}static validatePrompt(e){let t=[];for(let i in kt)t.push(kt[i]);if(t.indexOf(e)<0)throw je(Uc)}static validateClaims(e){try{JSON.parse(e)}catch{throw je(Cs)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw je(Es);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([av.PLAIN,av.S256].indexOf(e)<0)throw je(jc)}};function vee(n,e,t){if(!e)return;let i=n.get(Is);i&&n.has(Tv)&&t?.addFields({embeddedClientId:i,embeddedRedirectUri:n.get(yv)},e)}var So=class{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(_v,encodeURIComponent(A.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(_v,encodeURIComponent(`${A.TOKEN_RESPONSE_TYPE} ${A.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(RA,encodeURIComponent(e||yA.QUERY))}addNativeBroker(){this.parameters.set(aI,encodeURIComponent("1"))}addScopes(e,t=!0,i=Hi){t&&!i.includes("openid")&&!e.includes("openid")&&i.push("openid");let r=t?[...e||[],...i]:e||[],o=new At(r);this.parameters.set(OA,encodeURIComponent(o.printScopes()))}addClientId(e){this.parameters.set(Is,encodeURIComponent(e))}addRedirectUri(e){Eo.validateRedirectUri(e),this.parameters.set(yv,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Eo.validateRedirectUri(e),this.parameters.set(XA,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(eI,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(dI,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(uI,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Wt.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Wt.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(cI,encodeURIComponent(e))}addClaims(e,t){let i=this.addClientCapabilitiesToClaims(e,t);Eo.validateClaims(i),this.parameters.set(MA,encodeURIComponent(i))}addCorrelationId(e){this.parameters.set(jA,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set($A,e.sku),this.parameters.set(WA,e.version),e.os&&this.parameters.set(qA,e.os),e.cpu&&this.parameters.set(GA,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(ZA,e.appName),e?.appVersion&&this.parameters.set(JA,e.appVersion)}addPrompt(e){Eo.validatePrompt(e),this.parameters.set(`${VA}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(LA,encodeURIComponent(e))}addNonce(e){this.parameters.set(FA,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Eo.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(UA,encodeURIComponent(e)),this.parameters.set(HA,encodeURIComponent(t));else throw je(Es)}addAuthorizationCode(e){this.parameters.set(BA,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(tI,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(NA,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(zA,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(nI,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(iI,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(rI,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(oI,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(sI,encodeURIComponent(e))}addGrantType(e){this.parameters.set(DA,encodeURIComponent(e))}addClientInfo(){this.parameters.set(WF,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,i])=>{!this.parameters.has(t)&&i&&this.parameters.set(t,i)})}addClientCapabilitiesToClaims(e,t){let i;if(!e)i={};else try{i=JSON.parse(e)}catch{throw je(Cs)}return t&&t.length>0&&(i.hasOwnProperty(Nd.ACCESS_TOKEN)||(i[Nd.ACCESS_TOKEN]={}),i[Nd.ACCESS_TOKEN][Nd.XMS_CC]={values:t}),JSON.stringify(i)}addUsername(e){this.parameters.set(cv.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(cv.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Cv,Ue.POP),this.parameters.set(Ev,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Cv,Ue.SSH),this.parameters.set(Ev,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(KA,e.generateCurrentRequestHeaderValue()),this.parameters.set(YA,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(QA,bs.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(lI,encodeURIComponent(e))}addBrokerParameters(e){let t={};t[Tv]=e.brokerClientId,t[hI]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){let e=new Array;return this.parameters.forEach((t,i)=>{e.push(`${i}=${t}`)}),vee(this.parameters,this.correlationId,this.performanceClient),e.join("&")}};var Av={};Pr(Av,{createDiscoveredInstance:()=>pI});function nV(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function iV(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function rV(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var _={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},_Re=new Map([[_.AcquireTokenByCode,"ATByCode"],[_.AcquireTokenByRefreshToken,"ATByRT"],[_.AcquireTokenSilent,"ATS"],[_.AcquireTokenSilentAsync,"ATSAsync"],[_.AcquireTokenPopup,"ATPopup"],[_.AcquireTokenRedirect,"ATRedirect"],[_.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[_.CryptoOptsSignJwt,"CryptoSignJwt"],[_.SilentCacheClientAcquireToken,"SltCacheClientAT"],[_.SilentIframeClientAcquireToken,"SltIframeClientAT"],[_.SilentRefreshClientAcquireToken,"SltRClientAT"],[_.SsoSilent,"SsoSlt"],[_.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[_.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[_.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[_.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[_.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[_.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[_.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[_.BrokerHandhshake,"BrokerHandshake"],[_.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[_.AcquireTokenByBroker,"ATByBroker"],[_.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[_.RefreshTokenClientAcquireToken,"RTClientAT"],[_.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[_.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[_.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[_.AcquireTokenFromCache,"ATFromCache"],[_.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[_.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[_.AcquireTokenBySilentIframe,"ATBySltIframe"],[_.InitializeBaseRequest,"InitBaseReq"],[_.InitializeSilentRequest,"InitSltReq"],[_.InitializeClientApplication,"InitClientApplication"],[_.SilentIframeClientTokenHelper,"SIClientTHelper"],[_.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[_.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[_.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[_.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[_.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[_.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[_.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[_.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[_.GetAuthCodeUrl,"GetAuthCodeUrl"],[_.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[_.HandleCodeResponse,"HandleCodeResp"],[_.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[_.AuthClientAcquireToken,"AuthClientAT"],[_.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[_.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[_.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[_.PopTokenGenerateCnf,"PopTGenCnf"],[_.PopTokenGenerateKid,"PopTGenKid"],[_.HandleServerTokenResponse,"HandleServerTRes"],[_.DeserializeResponse,"DeserializeRes"],[_.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[_.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[_.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[_.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[_.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[_.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[_.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[_.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[_.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[_.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[_.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[_.AcquireTokenByCodeAsync,"ATByCodeAsync"],[_.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[_.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[_.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[_.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[_.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[_.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[_.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[_.NativeGenerateAuthResult,"NtvGenAuthRes"],[_.RemoveHiddenIframe,"RemoveHiddenIframe"],[_.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[_.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[_.GeneratePkceCodes,"GenPkceCodes"],[_.GenerateCodeVerifier,"GenCodeVerifier"],[_.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[_.Sha256Digest,"Sha256Digest"],[_.GetRandomValues,"GetRandomValues"]]),fI={NotStarted:0,InProgress:1,Completed:2};var ni=(n,e,t,i,r)=>(...o)=>{t.trace(`Executing function ${e}`);let s=i?.startMeasurement(e,r);if(r){let a=e+"CallCount";i?.incrementFields({[a]:1},r)}try{let a=n(...o);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},D=(n,e,t,i,r)=>(...o)=>{t.trace(`Executing function ${e}`);let s=i?.startMeasurement(e,r);if(r){let a=e+"CallCount";i?.incrementFields({[a]:1},r)}return i?.setPreQueueTime(e,r),n(...o).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var oV=(()=>{class n{constructor(t,i,r,o){this.networkInterface=t,this.logger=i,this.performanceClient=r,this.correlationId=o}detectRegion(t,i){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RegionDiscoveryDetectRegion,this.correlationId);let r=t;if(r)i.region_source=pc.ENVIRONMENT_VARIABLE;else{let o=n.IMDS_OPTIONS;try{let s=yield D(this.getRegionFromIMDS.bind(this),_.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(A.IMDS_VERSION,o);if(s.status===hp.httpSuccess&&(r=s.body,i.region_source=pc.IMDS),s.status===hp.httpBadRequest){let a=yield D(this.getCurrentVersion.bind(this),_.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(o);if(!a)return i.region_source=pc.FAILED_AUTO_DETECTION,null;let l=yield D(this.getRegionFromIMDS.bind(this),_.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,o);l.status===hp.httpSuccess&&(r=l.body,i.region_source=pc.IMDS)}}catch{return i.region_source=pc.FAILED_AUTO_DETECTION,null}}return r||(i.region_source=pc.FAILED_AUTO_DETECTION),r||null})}getRegionFromIMDS(t,i){return S(this,null,function*(){return this.performanceClient?.addQueueMeasurement(_.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${A.IMDS_ENDPOINT}?api-version=${t}&format=text`,i,A.IMDS_TIMEOUT)})}getCurrentVersion(t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let i=yield this.networkInterface.sendGetRequestAsync(`${A.IMDS_ENDPOINT}?format=json`,t);return i.status===hp.httpBadRequest&&i.body&&i.body["newest-versions"]&&i.body["newest-versions"].length>0?i.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var cr=class n{constructor(e,t,i,r,o,s,a,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=i,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=s,this.managedIdentity=l||!1,this.regionDiscovery=new oV(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(A.CIAM_AUTH_URL))return ti.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case A.ADFS:return ti.Adfs;case A.DSTS:return ti.Dsts}return ti.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Se(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw R(ei)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw R(ei)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw R(ei)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw R(Mc);return this.replacePath(this.metadata.end_session_endpoint)}else throw R(ei)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw R(ei)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw R(ei)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===ti.Default&&this.protocolMode===xn.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,r=new Se(this.metadata.canonical_authority).getUrlComponents(),o=r.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,l)=>{let c=o[l];if(l===0&&this.canReplaceTenant(r)){let u=new Se(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==u&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${u}`),c=u)}a!==c&&(t=t.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===ti.Adfs||this.protocolMode!==xn.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield D(this.updateCloudDiscoveryMetadata.bind(this),_.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let i=yield D(this.updateEndpointMetadata.bind(this),_.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:i}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:i},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:pv(),jwks_uri:""}),e}updateCachedMetadata(e,t,i){t!==Xn.CACHE&&i?.source!==Xn.CACHE&&(e.expiresAt=pv(),e.canonical_authority=this.canonicalAuthority);let r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}updateEndpointMetadata(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Xn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let r=yield D(this.updateMetadataWithRegionalInformation.bind(this),_.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);Ud(e,r,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let i=yield D(this.getEndpointMetadataFromNetwork.bind(this),_.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(i)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(i=yield D(this.updateMetadataWithRegionalInformation.bind(this),_.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(i)),Ud(e,i,!0),Xn.NETWORK;throw R(yc,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Ud(e,t,!1),{source:Xn.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let r=this.getEndpointMetadataFromHardcodedValues();if(r)return Ud(e,r,!1),{source:Xn.HARDCODED_VALUES,metadata:r};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let i=gv(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!i?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Xn.CACHE}):(i&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Se(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw je($c)}return null}getEndpointMetadataFromNetwork(){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let i=yield this.networkInterface.sendGetRequestAsync(t,e);return nV(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in AA?AA[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==A.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=uv.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let i=yield D(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),_.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(i)return this.regionDiscoveryMetadata.region_outcome=uv.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=i,n.replaceWithRegionalInformation(e,i);this.regionDiscoveryMetadata.region_outcome=uv.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let i=yield D(this.getCloudDiscoveryMetadataFromNetwork.bind(this),_.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(i)return Mp(e,i,!0),Xn.NETWORK;throw je(Wc)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||A.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||A.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||A.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Mp(e,t,!1),Xn.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let r=eV(this.hostnameAndPort);if(r)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Mp(e,r,!1),Xn.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let i=gv(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found cloud discovery metadata in the cache."),Xn.CACHE):(i&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===ti.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=zp(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),je(Ha)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${A.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},i=null;try{let r=yield this.networkInterface.sendGetRequestAsync(e,t),o,s;if(iV(r.body))o=r.body,s=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else if(rV(r.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),o=r.body,o.error===A.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),i=zp(s,this.hostnameAndPort)}catch(r){if(r instanceof Pe)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${r.errorCode}
Error Description: ${r.errorMessage}`);else{let o=r;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${o.name}
Error Description: ${o.message}`)}return null}return i||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),i=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),i})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&Se.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let i;if(t&&t.azureCloudInstance!==Ba.None){let r=t.tenant?t.tenant:A.DEFAULT_COMMON_TENANT;i=`${t.azureCloudInstance}/${r}/`}return i||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return A.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw R(ei)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return xA.has(e)}static isPublicCloudAuthority(e){return A.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,i){let r=new Se(e);r.validateAsUri();let o=r.getUrlComponents(),s=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(s=`${t}.${A.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=Se.constructAuthorityUriFromObject(P(v({},r.getUrlComponents()),{HostNameAndPort:s})).urlString;return i?`${a}?${i}`:a}static replaceWithRegionalInformation(e,t){let i=v({},e);return i.authorization_endpoint=n.buildRegionalAuthorityString(i.authorization_endpoint,t),i.token_endpoint=n.buildRegionalAuthorityString(i.token_endpoint,t),i.end_session_endpoint&&(i.end_session_endpoint=n.buildRegionalAuthorityString(i.end_session_endpoint,t)),i}static transformCIAMAuthority(e){let t=e,r=new Se(e).getUrlComponents();if(r.PathSegments.length===0&&r.HostNameAndPort.endsWith(A.CIAM_AUTH_URL)){let o=r.HostNameAndPort.split(".")[0];t=`${t}${o}${A.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};cr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",zr.COMMON,zr.CONSUMERS,zr.ORGANIZATIONS]);function sV(n){let i=new Se(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(i){case zr.COMMON:case zr.ORGANIZATIONS:case zr.CONSUMERS:return;default:return i}}function kv(n){return n.endsWith(A.FORWARD_SLASH)?n:`${n}${A.FORWARD_SLASH}`}function mI(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw je(Ha)}return{canonicalAuthority:n.authority?kv(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function pI(n,e,t,i,r,o,s){return S(this,null,function*(){s?.addQueueMeasurement(_.AuthorityFactoryCreateDiscoveredInstance,o);let a=cr.transformCIAMAuthority(kv(n)),l=new cr(a,e,t,i,r,o,s);try{return yield D(l.resolveEndpointsAsync.bind(l),_.AuthorityResolveEndpointsAsync,r,s,o)(),l}catch{throw R(ei)}})}var ii=class n extends Pe{constructor(e,t,i,r,o){super(e,t,i),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,n.prototype)}};var To=class n{static generateThrottlingStorageKey(e){return`${bs.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let i=n.generateThrottlingStorageKey(t),r=e.getThrottlingCache(i);if(r){if(r.throttleTime<Date.now()){e.removeItem(i);return}throw new ii(r.errorCodes?.join(" ")||A.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,i){if(n.checkResponseStatus(i)||n.checkResponseForRetryAfter(i)){let r={throttleTime:n.calculateThrottleTime(parseInt(i.headers[Wt.RETRY_AFTER])),error:i.body.error,errorCodes:i.body.error_codes,errorMessage:i.body.error_description,subError:i.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Wt.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,i=Date.now()/1e3;return Math.floor(Math.min(i+(t||bs.DEFAULT_THROTTLE_TIME_SECONDS),i+bs.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,i,r){let o={clientId:t,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:r,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid},s=this.generateThrottlingStorageKey(o);e.removeItem(s)}};var $d=class n extends Pe{constructor(e,t,i){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=i}};function Iv(n,e,t){return new $d(n,e,t)}var ja=class{constructor(e,t){this.config=tV(e),this.logger=new ki(this.config.loggerOptions,fv,Vd),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[Wt.CONTENT_TYPE]=A.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case hn.HOME_ACCOUNT_ID:try{let i=Ts(e.credential);t[Wt.CCS_HEADER]=`Oid:${i.uid}@${i.utid}`}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case hn.UPN:t[Wt.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,i,r,o,s){return S(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,o);let a=yield this.sendPostRequest(r,e,{body:t,headers:i},o);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,i,r){return S(this,null,function*(){To.preProcess(this.cacheManager,e);let o;try{o=yield D(this.networkClient.sendPostRequestAsync.bind(this.networkClient),_.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,r)(t,i);let s=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:s[Wt.X_MS_HTTP_VERSION]||"",requestId:s[Wt.X_MS_REQUEST_ID]||""},r)}catch(s){if(s instanceof $d){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[Wt.X_MS_HTTP_VERSION]||"",requestId:a[Wt.X_MS_REQUEST_ID]||"",contentTypeHeader:a[Wt.CONTENT_TYPE]||void 0,contentLengthHeader:a[Wt.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},r),s.error}throw s instanceof Pe?s:R(vc)}return To.postProcess(this.cacheManager,e,o),o})}updateAuthority(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.UpdateTokenEndpointAuthority,t);let i=`https://${e}/${this.authority.tenant}/`,r=yield pI(i,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r})}createTokenQueryParameters(e){let t=new So(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}};var Ps={};Pr(Ps,{badToken:()=>Wa,consentRequired:()=>bI,interactionRequired:()=>gI,loginRequired:()=>wI,nativeAccountUnavailable:()=>qp,noTokensFound:()=>$a,refreshTokenExpired:()=>Gp});var $a="no_tokens_found",qp="native_account_unavailable",Gp="refresh_token_expired",gI="interaction_required",bI="consent_required",wI="login_required",Wa="bad_token";var aV=[gI,bI,wI,Wa],yee=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],xv={[$a]:"No refresh token found in the cache. Please sign-in.",[qp]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Gp]:"Refresh token has expired.",[Wa]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},lV={noTokensFoundError:{code:$a,desc:xv[$a]},native_account_unavailable:{code:qp,desc:xv[qp]},bad_token:{code:Wa,desc:xv[Wa]}},Pn=class n extends Pe{constructor(e,t,i,r,o,s,a,l){super(e,t,i),Object.setPrototypeOf(this,n.prototype),this.timestamp=r||A.EMPTY_STRING,this.traceId=o||A.EMPTY_STRING,this.correlationId=s||A.EMPTY_STRING,this.claims=a||A.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function vI(n,e,t){let i=!!n&&aV.indexOf(n)>-1,r=!!t&&yee.indexOf(t)>-1,o=!!e&&aV.some(s=>e.indexOf(s)>-1);return i||o||r}function Wd(n){return new Pn(n,xv[n])}var fn=class n{static setRequestState(e,t,i){let r=n.generateLibraryState(e,i);return t?`${r}${A.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw R(Fa);let i={id:e.createNewGuid()};t&&(i.meta=t);let r=JSON.stringify(i);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw R(Fa);if(!t)throw R(Wr);try{let i=t.split(A.RESOURCE_DELIM),r=i[0],o=i.length>1?i.slice(1).join(A.RESOURCE_DELIM):A.EMPTY_STRING,s=e.base64Decode(r),a=JSON.parse(s);return{userRequestState:o||A.EMPTY_STRING,libraryState:a}}catch{throw R(Wr)}}};var _ee={SW:"sw",UHW:"uhw"},ji=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.PopTokenGenerateCnf,e.correlationId);let i=yield D(this.generateKid.bind(this),_.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(i));return{kid:i.kid,reqCnfString:r}})}generateKid(e){return S(this,null,function*(){return this.performanceClient?.addQueueMeasurement(_.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:_ee.SW}})}signPopToken(e,t,i){return S(this,null,function*(){return this.signPayload(e,t,i)})}signPayload(e,t,i,r){return S(this,null,function*(){let{resourceRequestMethod:o,resourceRequestUri:s,shrClaims:a,shrNonce:l,shrOptions:c}=i,h=(s?new Se(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(v({at:e,ts:zi(),m:o?.toUpperCase(),u:h?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:h?.AbsolutePath,q:h?.QueryString?[[],h.QueryString]:void 0,client_claims:a||void 0},r),t,c,i.correlationId)})}};var Pv=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function Cee(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}var ko=class n{constructor(e,t,i,r,o,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=i,this.logger=r,this.serializableCache=o,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?R(Na,"Cached State"):R(Na,"Server State");let i,r;try{i=decodeURIComponent(e.state)}catch{throw R(Wr,e.state)}try{r=decodeURIComponent(t)}catch{throw R(Wr,e.state)}if(i!==r)throw R(Cc);if(e.error||e.error_description||e.suberror){let o=Cee(e);throw vI(e.error,e.error_description,e.suberror)?new Pn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",o):new ii(e.error||"",e.error_description,e.suberror,o)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let i=`Error(s): ${e.error_codes||A.NOT_AVAILABLE} - Timestamp: ${e.timestamp||A.NOT_AVAILABLE} - Description: ${e.error_description||A.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||A.NOT_AVAILABLE} - Trace ID: ${e.trace_id||A.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,o=new ii(e.error,i,e.suberror,r,e.status);if(t&&e.status&&e.status>=Od.SERVER_ERROR_RANGE_START&&e.status<=Od.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${o}`);return}else if(t&&e.status&&e.status>=Od.CLIENT_ERROR_RANGE_START&&e.status<=Od.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${o}`);return}throw vI(e.error,e.error_description,e.suberror)?new Pn(e.error,e.error_description,e.suberror,e.timestamp||A.EMPTY_STRING,e.trace_id||A.EMPTY_STRING,e.correlation_id||A.EMPTY_STRING,e.claims||A.EMPTY_STRING,r):o}}handleServerTokenResponse(e,t,i,r,o,s,a,l,c){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=_s(e.id_token||A.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw R(Ec);if(r.maxAge||r.maxAge===0){let w=u.auth_time;if(!w)throw R(ws);Pp(w,r.maxAge)}}this.homeAccountIdentifier=_t.generateHomeAccountId(e.client_info||A.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let h;o&&o.state&&(h=fn.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;let p=this.generateCacheRecord(e,t,i,r,u,s,o),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Pv(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(g)),a&&!l&&p.account){let w=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(w,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,p,!1,r,u,h,void 0,c)}yield this.cacheStorage.saveCacheRecord(p,r.storeInCache,r.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(g))}return n.generateAuthenticationResult(this.cryptoObj,t,p,!1,r,u,h,e,c)})}generateCacheRecord(e,t,i,r,o,s,a){let l=t.getPreferredCache();if(!l)throw R(ys);let c=bv(o),u,h;e.id_token&&o&&(u=EA(this.homeAccountIdentifier,l,e.id_token,this.clientId,c||""),h=qd(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,l,c,a,void 0,this.logger));let p=null;if(e.access_token){let y=e.scope?At.fromString(e.scope):new At(r.scopes||[]),E=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,T=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,x=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,V=i+E,Q=V+T,he=x&&x>0?i+x:void 0;p=SA(this.homeAccountIdentifier,l,e.access_token,this.clientId,c||t.tenant||"",y.printScopes(),V,Q,this.cryptoObj.base64Decode,he,e.token_type,s,e.key_id,r.claims,r.requestedClaimsHash)}let g=null;if(e.refresh_token){let y;if(e.refresh_token_expires_in){let E=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;y=i+E}g=TA(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,s,y)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:l,familyId:e.foci}),{account:h,idToken:u,accessToken:p,refreshToken:g,appMetadata:w}}static generateAuthenticationResult(e,t,i,r,o,s,a,l,c){return S(this,null,function*(){let u=A.EMPTY_STRING,h=[],p=null,g,w,y=A.EMPTY_STRING;if(i.accessToken){if(i.accessToken.tokenType===Ue.POP&&!o.popKid){let V=new ji(e),{secret:Q,keyId:he}=i.accessToken;if(!he)throw R(Oc);u=yield V.signPopToken(Q,he,o)}else u=i.accessToken.secret;h=At.fromString(i.accessToken.target).asArray(),p=new Date(Number(i.accessToken.expiresOn)*1e3),g=new Date(Number(i.accessToken.extendedExpiresOn)*1e3),i.accessToken.refreshOn&&(w=new Date(Number(i.accessToken.refreshOn)*1e3))}i.appMetadata&&(y=i.appMetadata.familyId===Da?Da:"");let E=s?.oid||s?.sub||"",T=s?.tid||"";l?.spa_accountid&&i.account&&(i.account.nativeAccountId=l?.spa_accountid);let x=i.account?qc(i.account.getAccountInfo(),void 0,s,i.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:E,tenantId:T,scopes:h,account:x,idToken:i?.idToken?.secret||"",idTokenClaims:s||{},accessToken:u,fromCache:r,expiresOn:p,extExpiresOn:g,refreshOn:w,correlationId:o.correlationId,requestId:c||A.EMPTY_STRING,familyId:y,tokenType:i.accessToken?.tokenType||A.EMPTY_STRING,state:a?a.userRequestState:A.EMPTY_STRING,cloudGraphHostName:i.account?.cloudGraphHostName||A.EMPTY_STRING,msGraphHost:i.account?.msGraphHost||A.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}})}};function qd(n,e,t,i,r,o,s,a,l,c,u){u?.verbose("setCachedAccount called");let p=n.getAccountKeys().find(T=>T.startsWith(t)),g=null;p&&(g=n.getAccount(p,u));let w=g||_t.createAccount({homeAccountId:t,idTokenClaims:r,clientInfo:o,environment:s,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:c},e,i),y=w.tenantProfiles||[],E=a||w.realm;if(E&&!y.find(T=>T.tenantId===E)){let T=jd(t,w.localAccountId,E,r);y.push(T)}return w.tenantProfiles=y,w}function Rv(n,e,t){return S(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var Gc=class extends ja{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.GetAuthCodeUrl,e.correlationId);let t=yield D(this.createAuthCodeUrlQueryString.bind(this),_.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return Se.appendQueryString(this.authority.authorizationEndpoint,t)})}acquireToken(e,t){return S(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(_.AuthClientAcquireToken,e.correlationId),!e.code)throw R(kc);let i=zi(),r=yield D(this.executeTokenRequest.bind(this),_.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=r.headers?.[Wt.X_MS_REQUEST_ID],s=new ko(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(r.body),D(s.handleServerTokenResponse.bind(s),_.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,i,e,t,void 0,void 0,void 0,o)})}handleFragmentResponse(e,t){if(new ko(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw R(Rc);return e}getLogoutUri(e){if(!e)throw je(zc);let t=this.createLogoutUrlQueryString(e);return Se.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthClientExecuteTokenRequest,t.correlationId);let i=this.createTokenQueryParameters(t),r=Se.appendQueryString(e.tokenEndpoint,i),o=yield D(this.createTokenRequestBody.bind(this),_.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let c=Hd(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${c.uid}${zt.CLIENT_INFO_SEPARATOR}${c.utid}`,type:hn.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),l={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return D(this.executePostToTokenEndpoint.bind(this),_.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(r,o,a,l,t.correlationId,_.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.AuthClientCreateTokenRequestBody,e.correlationId);let t=new So(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Is]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Eo.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Wp(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;t.addClientAssertion(yield Rv(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(r.assertionType)}if(t.addGrantType(up.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Ue.POP){let r=new ji(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield D(r.generateCnf.bind(r),_.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(o)}else if(e.authenticationScheme===Ue.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw je(Ss);(!Lt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let i;if(e.clientInfo)try{let r=Hd(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${r.uid}${zt.CLIENT_INFO_SEPARATOR}${r.utid}`,type:hn.HOME_ACCOUNT_ID}}catch(r){this.logger.verbose("Could not parse client info for CCS Header: "+r)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case hn.HOME_ACCOUNT_ID:try{let r=Ts(i.credential);t.addCcsOid(r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case hn.UPN:t.addCcsUpn(i.credential);break}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[Sv])&&t.addExtraQueryParameters({[Sv]:"1"}),t.createQueryString()})}createAuthCodeUrlQueryString(e){return S(this,null,function*(){let t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(_.AuthClientCreateQueryString,t);let i=new So(t,this.performanceClient);i.addClientId(e.embeddedClientId||e.extraQueryParameters?.[Is]||this.config.authOptions.clientId);let r=[...e.scopes||[],...e.extraScopesToConsent||[]];if(i.addScopes(r,!0,this.oidcDefaultScopes),i.addRedirectUri(e.redirectUri),i.addCorrelationId(t),i.addResponseMode(e.responseMode),i.addResponseTypeCode(),i.addLibraryInfo(this.config.libraryInfo),Wp(this.config)||i.addApplicationTelemetry(this.config.telemetry.application),i.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&i.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&i.addPrompt(e.prompt),e.domainHint&&i.addDomainHint(e.domainHint),e.prompt!==kt.SELECT_ACCOUNT)if(e.sid&&e.prompt===kt.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),i.addSid(e.sid);else if(e.account){let o=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),i.addLoginHint(s);try{let a=Ts(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(o&&e.prompt===kt.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),i.addSid(o);try{let a=Ts(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),i.addLoginHint(e.loginHint),i.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),i.addLoginHint(e.account.username);try{let a=Ts(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),i.addLoginHint(e.loginHint),i.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&i.addNonce(e.nonce),e.state&&i.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,i),e.nativeBroker&&(i.addNativeBroker(),e.authenticationScheme===Ue.POP)){let o=new ji(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield D(o.generateCnf.bind(o),_.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,i.addPopToken(s)}return i.createQueryString()})}createLogoutUrlQueryString(e){let t=new So(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var Eee=300,qa=class extends ja{constructor(e,t){super(e,t)}acquireToken(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RefreshTokenClientAcquireToken,e.correlationId);let t=zi(),i=yield D(this.executeTokenRequest.bind(this),_.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=i.headers?.[Wt.X_MS_REQUEST_ID],o=new ko(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(i.body),D(o.handleServerTokenResponse.bind(o),_.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)})}acquireTokenByRefreshToken(e){return S(this,null,function*(){if(!e)throw je(Hc);if(this.performanceClient?.addQueueMeasurement(_.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw R(vs);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield D(this.acquireTokenWithCachedRefreshToken.bind(this),_.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){let r=i instanceof Pn&&i.errorCode===$a,o=i instanceof ii&&i.errorCode===lv.INVALID_GRANT_ERROR&&i.subError===lv.CLIENT_MISMATCH_ERROR;if(r||o)return D(this.acquireTokenWithCachedRefreshToken.bind(this),_.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return D(this.acquireTokenWithCachedRefreshToken.bind(this),_.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let i=ni(this.cacheManager.getRefreshToken.bind(this.cacheManager),_.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!i)throw Wd($a);if(i.expiresOn&&Bd(i.expiresOn,e.refreshTokenExpirationOffsetSeconds||Eee))throw Wd(Gp);let r=P(v({},e),{refreshToken:i.secret,authenticationScheme:e.authenticationScheme||Ue.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:hn.HOME_ACCOUNT_ID}});try{return yield D(this.acquireToken.bind(this),_.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(r)}catch(o){if(o instanceof Pn&&o.subError===Wa){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=Dp(i);this.cacheManager.removeRefreshToken(s)}throw o}})}executeTokenRequest(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RefreshTokenClientExecuteTokenRequest,e.correlationId);let i=this.createTokenQueryParameters(e),r=Se.appendQueryString(t.tokenEndpoint,i),o=yield D(this.createTokenRequestBody.bind(this),_.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return D(this.executePostToTokenEndpoint.bind(this),_.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(r,o,s,a,e.correlationId,_.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,i=new So(t,this.performanceClient);if(i.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Is]||this.config.authOptions.clientId),e.redirectUri&&i.addRedirectUri(e.redirectUri),i.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),i.addGrantType(up.REFRESH_TOKEN_GRANT),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&!Wp(this.config)&&i.addServerTelemetry(this.serverTelemetryManager),i.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&i.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let r=this.config.clientCredentials.clientAssertion;i.addClientAssertion(yield Rv(r.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),i.addClientAssertionType(r.assertionType)}if(e.authenticationScheme===Ue.POP){let r=new ji(this.cryptoUtils,this.performanceClient),o;e.popKid?o=this.cryptoUtils.encodeKid(e.popKid):o=(yield D(r.generateCnf.bind(r),_.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,i.addPopToken(o)}else if(e.authenticationScheme===Ue.SSH)if(e.sshJwk)i.addSshJwk(e.sshJwk);else throw je(Ss);if((!Lt.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case hn.HOME_ACCOUNT_ID:try{let r=Ts(e.ccsCredential.credential);i.addCcsOid(r)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case hn.UPN:i.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&i.addExtraQueryParameters(e.tokenBodyParameters),i.createQueryString()})}};var Kp=class extends ja{constructor(e,t){super(e,t)}acquireToken(e){return S(this,null,function*(){try{let[t,i]=yield this.acquireCachedToken(P(v({},e),{scopes:e.scopes?.length?e.scopes:[...Hi]}));return i===$r.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new qa(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof Nc&&t.errorCode===_o)return new qa(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}})}acquireCachedToken(e){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.SilentFlowClientAcquireCachedToken,e.correlationId);let t=$r.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Lt.isEmptyObj(e.claims))throw this.setCacheOutcome($r.FORCE_REFRESH_OR_CLAIMS,e.correlationId),R(_o);if(!e.account)throw R(vs);let i=e.account.tenantId||sV(e.authority),r=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,r,i,this.performanceClient,e.correlationId);if(o){if(CA(o.cachedAt)||Bd(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome($r.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),R(_o);o.refreshOn&&Bd(o.refreshOn,0)&&(t=$r.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome($r.NO_CACHED_ACCESS_TOKEN,e.correlationId),R(_o);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,r,i,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield D(this.generateResultFromCacheRecord.bind(this),_.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==$r.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return S(this,null,function*(){this.performanceClient?.addQueueMeasurement(_.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let i;if(e.idToken&&(i=_s(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let r=i?.auth_time;if(!r)throw R(ws);Pp(r,t.maxAge)}return ko.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,i)})}};var yI={sendGetRequestAsync:()=>Promise.reject(R(Ce)),sendPostRequestAsync:()=>Promise.reject(R(Ce))};var cV=",",uV="|";function See(n){let{skus:e,libraryName:t,libraryVersion:i,extensionName:r,extensionVersion:o}=n,s=new Map([[0,[t,i]],[2,[r,o]]]),a=[];if(e?.length){if(a=e.split(cV),a.length<4)return e}else a=Array.from({length:4},()=>uV);return s.forEach((l,c)=>{l.length===2&&l[0]?.length&&l[1]?.length&&Tee({skuArr:a,index:c,skuName:l[0],skuVersion:l[1]})}),a.join(cV)}function Tee(n){let{skuArr:e,index:t,skuName:i,skuVersion:r}=n;t>=e.length||(e[t]=[i,r].join(uV))}var Kc=class n{constructor(e,t){this.cacheOutcome=$r.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||A.EMPTY_STRING,this.wrapperVer=e.wrapperVer||A.EMPTY_STRING,this.telemetryCacheKey=un.CACHE_KEY+zt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${un.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],i=this.getNativeBrokerErrorCode();i?.length&&t.push(`broker_error=${i}`);let r=t.join(un.VALUE_SEPARATOR),o=this.getRegionDiscoveryFields(),s=[e,o].join(un.VALUE_SEPARATOR);return[un.SCHEMA_VERSION,s,r].join(un.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),i=e.failedRequests.slice(0,2*t).join(un.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(un.VALUE_SEPARATOR),o=e.errors.length,s=t<o?un.OVERFLOW_TRUE:un.OVERFLOW_FALSE,a=[o,s].join(un.VALUE_SEPARATOR);return[un.SCHEMA_VERSION,e.cacheHits,i,r,a].join(un.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=un.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Pe?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(un.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),i=e.errors.length;if(t===i)this.cacheManager.removeItem(this.telemetryCacheKey);else{let r={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,r)}}static maxErrorsToSend(e){let t,i=0,r=0,o=e.errors.length;for(t=0;t<o;t++){let s=e.failedRequests[2*t]||A.EMPTY_STRING,a=e.failedRequests[2*t+1]||A.EMPTY_STRING,l=e.errors[t]||A.EMPTY_STRING;if(r+=s.toString().length+a.toString().length+l.length+3,r<un.MAX_LAST_HEADER_BYTES)i+=1;else break}return i}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||A.EMPTY_STRING),e.push(this.regionSource||A.EMPTY_STRING),e.push(this.regionOutcome||A.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return See(e)}};var Dv="missing_kid_error",Mv="missing_alg_error";var kee={[Dv]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Mv]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},_I=class n extends Pe{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function CI(n){return new _I(n,kee[n])}var Yp=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw CI(Dv);if(!e.alg)throw CI(Mv);let t=new n({typ:e.typ||dv.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var Ov=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Gd=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:fI.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Ov}}startPerformanceMeasurement(){return new Ov}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Yc="pkce_not_created",Qc="crypto_nonexistent",Ao="empty_navigate_uri",Kd="hash_empty_error",Ga="no_state_in_hash",Yd="hash_does_not_contain_known_properties",Qd="unable_to_parse_state",Zd="state_interaction_type_mismatch",Jd="interaction_in_progress",Xd="popup_window_error",eh="empty_window_error",Ai="user_cancelled",Nv="monitor_popup_timeout",th="monitor_window_timeout",nh="redirect_in_iframe",ih="block_iframe_reload",rh="block_nested_popups",Lv="iframe_closed_prematurely",Io="silent_logout_unsupported",oh="no_account_error",Fv="silent_prompt_value_error",sh="no_token_request_cache_error",ah="unable_to_parse_token_request_cache_error",Ka="no_cached_authority_error",Vv="auth_request_not_set_error",Bv="invalid_cache_type",xo="non_browser_environment",Po="database_not_open",Rs="no_network_connectivity",lh="post_request_failed",ch="get_request_failed",Zc="failed_to_parse_response",uh="unable_to_load_token",Ya="crypto_key_not_found",dh="auth_code_required",hh="auth_code_or_nativeAccountId_required",fh="spa_code_and_nativeAccountId_present",Qa="database_unavailable",mh="unable_to_acquire_token_from_native_platform",ph="native_handshake_timeout",gh="native_extension_not_installed",ur="native_connection_not_established",bh="uninitialized_public_client_application",wh="native_prompt_not_supported",vh="invalid_base64_string",yh="invalid_pop_token_request",Uv="failed_to_build_headers",Hv="failed_to_parse_headers";var Ds="For more visit: aka.ms/msaljs/browser-errors",be={[Yc]:"The PKCE code challenge and verifier could not be generated.",[Qc]:"The crypto object or function is not available.",[Ao]:"Navigation URI is empty. Please check stack trace for more info.",[Kd]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ds}`,[Ga]:"Hash does not contain state. Please verify that the request originated from msal.",[Yd]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ds}`,[Qd]:"Unable to parse state. Please verify that the request originated from msal.",[Zd]:"Hash contains state but the interaction type does not match the caller.",[Jd]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ds}`,[Xd]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[eh]:"window.open returned null or undefined window object.",[Ai]:"User cancelled the flow.",[Nv]:`Token acquisition in popup failed due to timeout.  ${Ds}`,[th]:`Token acquisition in iframe failed due to timeout.  ${Ds}`,[nh]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[ih]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ds}`,[rh]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Lv]:"The iframe being monitored was closed prematurely.",[Io]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[oh]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Fv]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[sh]:"No token request found in cache.",[ah]:"The cached token request could not be parsed.",[Ka]:"No cached authority found.",[Vv]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Bv]:"Invalid cache type",[xo]:"Login and token requests are not supported in non-browser environments.",[Po]:"Database is not open!",[Rs]:"No network connectivity. Check your internet connection.",[lh]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ch]:"Network request failed. Please check the network trace to determine root cause.",[Zc]:"Failed to parse network response. Check network trace.",[uh]:"Error loading token to cache.",[Ya]:"Cryptographic Key or Keypair not found in browser storage.",[dh]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[hh]:"An authorization code or nativeAccountId must be provided to this flow.",[fh]:"Request cannot contain both spa code and native account id.",[Qa]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[mh]:`Unable to acquire token from native platform.  ${Ds}`,[ph]:"Timed out while attempting to establish connection to browser extension",[gh]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ur]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ds}`,[bh]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ds}`,[wh]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[vh]:"Invalid base64 encoded string.",[yh]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Uv]:"Failed to build request headers object.",[Hv]:"Failed to parse response headers"},gOe={pkceNotGenerated:{code:Yc,desc:be[Yc]},cryptoDoesNotExist:{code:Qc,desc:be[Qc]},emptyNavigateUriError:{code:Ao,desc:be[Ao]},hashEmptyError:{code:Kd,desc:be[Kd]},hashDoesNotContainStateError:{code:Ga,desc:be[Ga]},hashDoesNotContainKnownPropertiesError:{code:Yd,desc:be[Yd]},unableToParseStateError:{code:Qd,desc:be[Qd]},stateInteractionTypeMismatchError:{code:Zd,desc:be[Zd]},interactionInProgress:{code:Jd,desc:be[Jd]},popupWindowError:{code:Xd,desc:be[Xd]},emptyWindowError:{code:eh,desc:be[eh]},userCancelledError:{code:Ai,desc:be[Ai]},monitorPopupTimeoutError:{code:Nv,desc:be[Nv]},monitorIframeTimeoutError:{code:th,desc:be[th]},redirectInIframeError:{code:nh,desc:be[nh]},blockTokenRequestsInHiddenIframeError:{code:ih,desc:be[ih]},blockAcquireTokenInPopupsError:{code:rh,desc:be[rh]},iframeClosedPrematurelyError:{code:Lv,desc:be[Lv]},silentLogoutUnsupportedError:{code:Io,desc:be[Io]},noAccountError:{code:oh,desc:be[oh]},silentPromptValueError:{code:Fv,desc:be[Fv]},noTokenRequestCacheError:{code:sh,desc:be[sh]},unableToParseTokenRequestCacheError:{code:ah,desc:be[ah]},noCachedAuthorityError:{code:Ka,desc:be[Ka]},authRequestNotSet:{code:Vv,desc:be[Vv]},invalidCacheType:{code:Bv,desc:be[Bv]},notInBrowserEnvironment:{code:xo,desc:be[xo]},databaseNotOpen:{code:Po,desc:be[Po]},noNetworkConnectivity:{code:Rs,desc:be[Rs]},postRequestFailed:{code:lh,desc:be[lh]},getRequestFailed:{code:ch,desc:be[ch]},failedToParseNetworkResponse:{code:Zc,desc:be[Zc]},unableToLoadTokenError:{code:uh,desc:be[uh]},signingKeyNotFoundInStorage:{code:Ya,desc:be[Ya]},authCodeRequired:{code:dh,desc:be[dh]},authCodeOrNativeAccountRequired:{code:hh,desc:be[hh]},spaCodeAndNativeAccountPresent:{code:fh,desc:be[fh]},databaseUnavailable:{code:Qa,desc:be[Qa]},unableToAcquireTokenFromNativePlatform:{code:mh,desc:be[mh]},nativeHandshakeTimeout:{code:ph,desc:be[ph]},nativeExtensionNotInstalled:{code:gh,desc:be[gh]},nativeConnectionNotEstablished:{code:ur,desc:be[ur]},uninitializedPublicClientApplication:{code:bh,desc:be[bh]},nativePromptNotSupported:{code:wh,desc:be[wh]},invalidBase64StringError:{code:vh,desc:be[vh]},invalidPopTokenRequest:{code:yh,desc:be[yh]}},Jc=class n extends Pe{constructor(e,t){super(e,be[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function B(n,e){return new Jc(n,e)}var Gt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Za={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},Ms={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ft={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},EI={GET:"GET",POST:"POST"},Je={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Os={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Qp={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},tt={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},q=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(q||{}),Jt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},SI={scopes:Hi},TI="jwk",kI={React:"@azure/msal-react",Angular:"@azure/msal-angular"},zv="msal.db",dV=1,hV=`${zv}.keys`,ri={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},fV=[ri.Default,ri.Skip,ri.RefreshTokenAndNetwork],mV="msal.browser.log.level",pV="msal.browser.log.pii";function Zp(n){return encodeURIComponent(Jp(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Xc(n){return gV(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Jp(n){return gV(new TextEncoder().encode(n))}function gV(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}var Aee="RSASSA-PKCS1-v1_5",vV="SHA-256",Iee=2048,xee=new Uint8Array([1,0,1]),bV="0123456789abcdef",wV=new Uint32Array(1),Pee="crypto_subtle_undefined",II={name:Aee,hash:vV,modulusLength:Iee,publicExponent:xee};function yV(){if(!window)throw B(xo);if(!window.crypto)throw B(Qc);if(!window.crypto.subtle)throw B(Qc,Pee)}function xI(n,e,t){return S(this,null,function*(){e?.addQueueMeasurement(_.Sha256Digest,t);let r=new TextEncoder().encode(n);return window.crypto.subtle.digest(vV,r)})}function _V(n){return window.crypto.getRandomValues(n)}function AI(){return window.crypto.getRandomValues(wV),wV[0]}function zn(){let n=Date.now(),e=AI()*1024+(AI()&1023),t=new Uint8Array(16),i=Math.trunc(e/2**30),r=e&2**30-1,o=AI();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|i>>>8,t[7]=i,t[8]=128|r>>>24,t[9]=r>>>16,t[10]=r>>>8,t[11]=r,t[12]=o>>>24,t[13]=o>>>16,t[14]=o>>>8,t[15]=o;let s="";for(let a=0;a<t.length;a++)s+=bV.charAt(t[a]>>>4),s+=bV.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function CV(n,e){return S(this,null,function*(){return window.crypto.subtle.generateKey(II,n,e)})}function jv(n){return S(this,null,function*(){return window.crypto.subtle.exportKey(TI,n)})}function EV(n,e,t){return S(this,null,function*(){return window.crypto.subtle.importKey(TI,n,II,e,t)})}function SV(n,e){return S(this,null,function*(){return window.crypto.subtle.sign(II,n,e)})}function $v(n){return S(this,null,function*(){let e=yield xI(n),t=new Uint8Array(e);return Xc(t)})}var _h="storage_not_supported",Wv="stubbed_public_client_application_called",Ch="in_mem_redirect_unavailable";var qv={[_h]:"Given storage configuration option was not supported.",[Wv]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Ch]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},Ree={storageNotSupportedError:{code:_h,desc:qv[_h]},stubPcaInstanceCalled:{code:Wv,desc:qv[Wv]},inMemRedirectUnavailable:{code:Ch,desc:qv[Ch]}},Eh=class n extends Pe{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Gv(n){return new Eh(n,qv[n])}function PI(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function RI(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function Xp(){return window.parent!==window}function TV(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${Gt.POPUP_NAME_PREFIX}.`)===0}function oi(){return window.location.href.split("?")[0].split("#")[0]}function DI(){let e=new Se(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function kV(){if(Se.hashContainsKnownProperties(window.location.hash)&&Xp())throw B(ih)}function AV(n){if(Xp()&&!n)throw B(nh)}function IV(){if(TV())throw B(rh)}function Kv(){if(typeof window>"u")throw B(xo)}function Yv(n){if(!n)throw B(bh)}function eg(n){Kv(),kV(),IV(),Yv(n)}function Qv(n,e){if(eg(n),AV(e.system.allowRedirectInIframe),e.cache.cacheLocation===ft.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Gv(Ch)}function tg(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function MI(){return zn()}var ng=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(i=>{setTimeout(()=>{i(!0)},t.timeout)})}};var Jv=class{sendGetRequestAsync(e,t){return S(this,null,function*(){let i,r={},o=0,s=xV(t);try{i=yield fetch(e,{method:EI.GET,headers:s})}catch{throw B(window.navigator.onLine?ch:Rs)}r=PV(i.headers);try{return o=i.status,{headers:r,body:yield i.json(),status:o}}catch{throw Iv(B(Zc),o,r)}})}sendPostRequestAsync(e,t){return S(this,null,function*(){let i=t&&t.body||"",r=xV(t),o,s=0,a={};try{o=yield fetch(e,{method:EI.POST,headers:r,body:i})}catch{throw B(window.navigator.onLine?lh:Rs)}a=PV(o.headers);try{return s=o.status,{headers:a,body:yield o.json(),status:s}}catch{throw Iv(B(Zc),s,a)}})}};function xV(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([i,r])=>{e.append(i,r)}),e}catch{throw B(Uv)}}function PV(n){try{let e={};return n.forEach((t,i)=>{e[i]=t}),e}catch{throw B(Hv)}}var Dee=6e4,Xv=1e4,Mee=3e4,Oee=2e3;function RV({auth:n,cache:e,system:t,telemetry:i},r){let o={clientId:A.EMPTY_STRING,authority:`${A.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:A.EMPTY_STRING,authorityMetadata:A.EMPTY_STRING,redirectUri:typeof window<"u"?oi():"",postLogoutRedirectUri:A.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:xn.AAD,OIDCOptions:{serverResponseType:jr.FRAGMENT,defaultScopes:[A.OPENID_SCOPE,A.PROFILE_SCOPE,A.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Ba.None,tenant:A.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:ft.SessionStorage,temporaryCacheLocation:ft.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ft.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:lt.Info,piiLoggingEnabled:!1},l=P(v({},vv),{loggerOptions:a,networkClient:r?new Jv:yI,navigationClient:new ng,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||Dee,iframeHashTimeout:t?.loadFrameTimeout||Xv,navigateFrameWait:0,redirectNavigationTimeout:Mee,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||Oee,pollIntervalMilliseconds:Gt.DEFAULT_POLL_INTERVAL_MS}),c=P(v(v({},l),t),{loggerOptions:t?.loggerOptions||a}),u={application:{appName:A.EMPTY_STRING,appVersion:A.EMPTY_STRING},client:new Gd};if(n?.protocolMode!==xn.OIDC&&n?.OIDCOptions&&new ki(c.loggerOptions).warning(JSON.stringify(je(qr.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode!==xn.AAD&&c?.allowNativeBroker)throw je(qr.cannotAllowNativeBroker);return{auth:P(v(v({},o),n),{OIDCOptions:v(v({},o.OIDCOptions),n?.OIDCOptions)}),cache:v(v({},s),e),system:c,telemetry:v(v({},u),i)}}var DV="@azure/msal-browser",Ja="3.27.0";var ey=class n{static loggerCallback(e,t){switch(e){case lt.Error:console.error(t);return;case lt.Info:console.info(t);return;case lt.Verbose:console.debug(t);return;case lt.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=RV(e,this.browserEnvironment);let t;try{t=window[ft.SessionStorage]}catch{}let i=t?.getItem(mV),r=t?.getItem(pV)?.toLowerCase(),o=r==="true"?!0:r==="false"?!1:void 0,s=v({},this.config.system.loggerOptions),a=i&&Object.keys(lt).includes(i)?lt[i]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),o!==void 0&&(s.piiLoggingEnabled=o),this.logger=new ki(s,DV,Ja),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var ty=(()=>{class n extends ey{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return S(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();function Ii(n){return new TextDecoder().decode(Nee(n))}function Nee(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw B(vh)}let t=atob(e);return Uint8Array.from(t,i=>i.codePointAt(0)||0)}var ny=class{constructor(){this.dbName=zv,this.version=dV,this.tableName=hV,this.dbOpen=!1}open(){return S(this,null,function*(){return new Promise((e,t)=>{let i=window.indexedDB.open(this.dbName,this.version);i.addEventListener("upgradeneeded",r=>{r.target.result.createObjectStore(this.tableName)}),i.addEventListener("success",r=>{let o=r;this.db=o.target.result,this.dbOpen=!0,e()}),i.addEventListener("error",()=>t(B(Qa)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return S(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return S(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(Po));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let l=a;this.closeConnection(),t(l.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}setItem(e,t){return S(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((i,r)=>{if(!this.db)return r(B(Po));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),i()}),a.addEventListener("error",l=>{this.closeConnection(),r(l)})})})}removeItem(e){return S(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(Po));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}getKeys(){return S(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(B(Po));let o=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();o.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),o.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return S(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(Po));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let l=a;this.closeConnection(),t(l.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}deleteDatabase(){return S(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let i=window.indexedDB.deleteDatabase(zv),r=setTimeout(()=>t(!1),200);i.addEventListener("success",()=>(clearTimeout(r),e(!0))),i.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),i.addEventListener("error",()=>(clearTimeout(r),t(!1)))})})}};var eu=class{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,i)=>{e.push(i)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var iy=class{constructor(e){this.inMemoryCache=new eu,this.indexedDBCache=new ny,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Jc&&e.errorCode===Qa)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return S(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(i){this.handleDatabaseAccessError(i)}return t})}setItem(e,t){return S(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(i){this.handleDatabaseAccessError(i)}})}removeItem(e){return S(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return S(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return S(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(i){this.handleDatabaseAccessError(i)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return S(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var OV=(()=>{class n{constructor(t,i){this.logger=t,yV(),this.cache=new iy(this.logger),this.performanceClient=i}createNewGuid(){return zn()}base64Encode(t){return Jp(t)}base64Decode(t){return Ii(t)}base64UrlEncode(t){return Zp(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return S(this,null,function*(){let i=this.performanceClient?.startMeasurement(_.CryptoOptsGetPublicKeyThumbprint,t.correlationId),r=yield CV(n.EXTRACTABLE,n.POP_KEY_USAGES),o=yield jv(r.publicKey),s={e:o.e,kty:o.kty,n:o.n},a=MV(s),l=yield this.hashString(a),c=yield jv(r.privateKey),u=yield EV(c,!1,["sign"]);return yield this.cache.setItem(l,{privateKey:u,publicKey:r.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),i&&i.end({success:!0}),l})}removeTokenBindingKey(t){return S(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return S(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,i,r,o){return S(this,null,function*(){let s=this.performanceClient?.startMeasurement(_.CryptoOptsSignJwt,o),a=yield this.cache.getItem(i);if(!a)throw B(Ya);let l=yield jv(a.publicKey),c=MV(l),u=Zp(JSON.stringify({kid:i})),h=Yp.getShrHeaderString(P(v({},r?.header),{alg:l.alg,kid:u})),p=Zp(h);t.cnf={jwk:JSON.parse(c)};let g=Zp(JSON.stringify(t)),w=`${p}.${g}`,E=new TextEncoder().encode(w),T=yield SV(a.privateKey,E),x=Xc(new Uint8Array(T)),V=`${w}.${x}`;return s&&s.end({success:!0}),V})}hashString(t){return S(this,null,function*(){return $v(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function MV(n){return JSON.stringify(n,Object.keys(n).sort())}var ig=class{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==ft.LocalStorage&&e!==ft.SessionStorage||!window[e])throw Gv(_h)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,t){this.windowStorage.setItem(e,t)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}};function ry(n,e){if(!e)return null;try{return fn.parseRequestState(n,e).libraryState.meta}catch{throw R(dn.invalidState)}}var Sh=class n extends As{constructor(e,t,i,r,o,s){super(e,i,r,o),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=t,this.logger=r,this.internalStorage=new eu,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case ft.LocalStorage:case ft.SessionStorage:try{return new ig(e)}catch(t){this.logger.verbose(t);break}}return this.cacheConfig.cacheLocation=ft.MemoryStorage,new eu}setupTemporaryCacheStorage(e,t){switch(t){case ft.LocalStorage:case ft.SessionStorage:try{return new ig(e||ft.SessionStorage)}catch(i){return this.logger.verbose(i),this.internalStorage}case ft.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){let e=`${A.CACHE_PREFIX}.${qt.ID_TOKEN}`,t=`${A.CACHE_PREFIX}.${qt.CLIENT_INFO}`,i=`${A.CACHE_PREFIX}.${qt.ERROR}`,r=`${A.CACHE_PREFIX}.${qt.ERROR_DESC}`,o=this.browserStorage.getItem(e),s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(i),l=this.browserStorage.getItem(r),c=[o,s,a,l];[qt.ID_TOKEN,qt.CLIENT_INFO,qt.ERROR,qt.ERROR_DESC].forEach((h,p)=>{let g=c[p];g&&this.setTemporaryCache(h,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let e=this.getItem(Os.ACCOUNT_KEYS),t=this.getItem(`${Os.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(r=>{if(this.isCredentialKey(r)){let o=this.getItem(r);if(o){let s=this.validateAndParseJson(o);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case ce.ID_TOKEN:if(bt.isIdTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${r} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(r,a);this.addTokenKey(l,ce.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${r}`);break;case ce.ACCESS_TOKEN:case ce.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(bt.isAccessTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${r} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(r,a);this.addTokenKey(l,ce.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${r}`);break;case ce.REFRESH_TOKEN:if(bt.isRefreshTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${r} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(r,a);this.addTokenKey(l,ce.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${r}`);break}}}if(this.isAccountKey(r)){let o=this.getItem(r);if(o){let s=this.validateAndParseJson(o);s&&_t.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${r} found, saving key to account key map`),this.addAccountKeyToMap(r))}}})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let i=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,i,t)}getCachedAccountEntity(e){let t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;let i=this.validateAndParseJson(t);return!i||!_t.isAccountEntity(i)?(this.removeAccountKeyFromMap(e),null):As.toObject(new _t,i)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");let t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let e=this.getItem(Os.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(Os.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),i=t.indexOf(e);i>-1?(t.splice(i,1),this.setItem(Os.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){return S(this,null,function*(){om(n.prototype,this,"removeAccount").call(this,e),this.removeAccountKeyFromMap(e)})}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,ce.ID_TOKEN)}removeAccessToken(e){return S(this,null,function*(){om(n.prototype,this,"removeAccessToken").call(this,e),this.removeTokenKey(e,ce.ACCESS_TOKEN)})}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,ce.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let e=this.getItem(`${Os.TOKEN_KEYS}.${this.clientId}`);if(e){let t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let i=this.getTokenKeys();switch(t){case ce.ID_TOKEN:i.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(e));break;case ce.ACCESS_TOKEN:i.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),i.accessToken.push(e));break;case ce.REFRESH_TOKEN:i.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),R(dn.unexpectedCredentialType)}this.setItem(`${Os.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(i))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let i=this.getTokenKeys();switch(t){case ce.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let r=i.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),i.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case ce.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let o=i.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),i.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case ce.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let s=i.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),i.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),R(dn.unexpectedCredentialType)}this.setItem(`${Os.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(i))}getIdTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.ID_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!bt.isIdTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let t=bt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ce.ID_TOKEN)}getAccessTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.ACCESS_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!bt.isAccessTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let t=bt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ce.ACCESS_TOKEN)}getRefreshTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.REFRESH_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!bt.isRefreshTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ce.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let t=bt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ce.REFRESH_TOKEN)}getAppMetadata(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!bt.isAppMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),i)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=bt.generateAppMetadataKey(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!bt.isServerTelemetryEntity(e,i)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),i)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let i=this.validateAndParseJson(t);return i&&bt.isAuthorityMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),i):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Qp.WRAPPER_SKU,e),this.internalStorage.setItem(Qp.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(Qp.WRAPPER_SKU)||A.EMPTY_STRING,t=this.internalStorage.getItem(Qp.WRAPPER_VER)||A.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(qt.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let r=this.generateCacheKey(qt.ACTIVE_ACCOUNT),o=this.getItem(r);if(!o)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let s=this.getAccountInfoFilteredBy({localAccountId:o});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}let i=this.validateAndParseJson(t);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(qt.ACTIVE_ACCOUNT_FILTERS),i=this.generateCacheKey(qt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");let r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(r)),this.browserStorage.setItem(i,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(i)}getThrottlingCache(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!bt.isThrottlingEntity(e,i)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),i)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let i=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let o=this.getItemCookie(i);if(o)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),o}let r=this.temporaryCacheStorage.getItem(i);if(!r){if(this.cacheConfig.cacheLocation===ft.LocalStorage){let o=this.browserStorage.getItem(i);if(o)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),o}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,i){let r=i?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(r,t))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}clear(){return S(this,null,function*(){yield this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(A.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(A.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return S(this,null,function*(){e.addQueueMeasurement(_.ClearTokensAndKeysWithClaims,t);let i=this.getTokenKeys(),r=[];i.accessToken.forEach(o=>{let s=this.getAccessTokenCredential(o);s?.requestedClaimsHash&&o.includes(s.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(o))}),yield Promise.all(r),r.length>0&&this.logger.warning(`${r.length} access tokens with claims in the cache keys have been removed from the cache.`)})}setItemCookie(e,t,i){let r=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(i){let o=this.getCookieExpirationTime(i);r+=`expires=${o};`}this.cacheConfig.secureCookies&&(r+="Secure;"),document.cookie=r}getItemCookie(e){let t=`${encodeURIComponent(e)}=`,i=document.cookie.split(";");for(let r=0;r<i.length;r++){let o=i[r];for(;o.charAt(0)===" ";)o=o.substring(1);if(o.indexOf(t)===0)return decodeURIComponent(o.substring(t.length,o.length))}return A.EMPTY_STRING}clearMsalCookies(){let e=`${A.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(i=>{for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(e)===0){let r=i.split("=")[0];this.clearItemCookie(r)}})}clearItemCookie(e){this.setItemCookie(e,A.EMPTY_STRING,-1)}getCookieExpirationTime(e){let t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Lt.startsWith(e,A.CACHE_PREFIX)||Lt.startsWith(e,qt.ADAL_ID_TOKEN)?e:`${A.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=fn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Je.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=fn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Je.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=fn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Je.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),i=this.getTemporaryCache(t);if(!i)return null;let r=this.generateAuthorityKey(i);return this.getTemporaryCache(r)}updateCacheEntries(e,t,i,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let l=this.generateAuthorityKey(e);if(this.setTemporaryCache(l,i,!1),o){let c={credential:o.homeAccountId,type:hn.HOME_ACCOUNT_ID};this.setTemporaryCache(Je.CCS_CREDENTIAL,JSON.stringify(c),!0)}else if(r){let c={credential:r,type:hn.UPN};this.setTemporaryCache(Je.CCS_CREDENTIAL,JSON.stringify(c),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Je.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Je.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Je.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Je.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Je.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Je.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),i=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${i}`),this.resetRequestCache(i||A.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(Je.REQUEST_STATE)===-1)return;let i=this.temporaryCacheStorage.getItem(t);if(!i)return;let r=ry(this.cryptoImpl,i);r&&r.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${i}`),this.resetRequestCache(i))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=Jp(JSON.stringify(e));this.setTemporaryCache(Je.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");let t=this.getTemporaryCache(Je.REQUEST_PARAMS,!0);if(!t)throw B(sh);let i;try{i=JSON.parse(Ii(t))}catch(r){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${r}`),B(ah)}if(this.removeTemporaryItem(this.generateCacheKey(Je.REQUEST_PARAMS)),!i.authority){let r=this.generateAuthorityKey(e),o=this.getTemporaryCache(r);if(!o)throw B(Ka);i.authority=o}return i}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(Je.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${A.CACHE_PREFIX}.${Je.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${A.CACHE_PREFIX}.${Je.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw B(Jd);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){let e=this.getTemporaryCache(qt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(qt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let t=this.getTemporaryCache(qt.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(qt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let i=t||e;if(i){let r=Ua.extractTokenClaims(i,Ii);if(r.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),r.preferred_username;if(r.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),r.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){let i=bt.generateCredentialKey(t);if(e!==i){let r=this.getItem(e);if(r)return this.browserStorage.removeItem(e),this.setItem(i,r),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),i;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){return S(this,null,function*(){let i=bt.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),r;t.claims&&(r=yield this.cryptoImpl.hashString(t.claims));let o=bt.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Ii,void 0,e.tokenType,void 0,t.sshKid,t.claims,r),s={idToken:i,accessToken:o};return this.saveCacheRecord(s)})}saveCacheRecord(e,t,i){return S(this,null,function*(){try{yield om(n.prototype,this,"saveCacheRecord").call(this,e,t,i)}catch(r){if(r instanceof ks&&this.performanceClient&&i)try{let o=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:o.refreshToken.length,cacheIdCount:o.idToken.length,cacheAtCount:o.accessToken.length},i)}catch{}throw r}})}},NV=(n,e)=>{let t={cacheLocation:ft.MemoryStorage,temporaryCacheLocation:ft.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Sh(n,t,Va,e)};function LV(n,e,t,i){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(i):[]}function FV(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let i=t.getAccountInfoFilteredBy(n);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function VV(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let i=t.getAccountInfoFilteredBy({username:n});return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function BV(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let i=t.getAccountInfoFilteredBy({homeAccountId:n});return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function UV(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let i=t.getAccountInfoFilteredBy({localAccountId:n});return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function HV(n,e){e.setActiveAccount(n)}function zV(n){return n.getActiveAccount()}var G={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var oy=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new ki({})}addEventCallback(e,t,i){if(typeof window<"u"){let r=i||MI();return this.eventCallbacks.has(r)?(this.logger.error(`Event callback with id: ${r} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${r}`),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,i,r){if(typeof window<"u"){let o={eventType:e,interactionType:t||null,payload:i||null,error:r||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],l)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${l}: ${e}`),s.apply(null,[o]))})}}};var Th=class{constructor(e,t,i,r,o,s,a,l,c){this.config=e,this.browserStorage=t,this.browserCrypto=i,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=s,this.nativeMessageHandler=l,this.correlationId=c||zn(),this.logger=r.clone(Gt.MSAL_SKU,Ja,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return S(this,null,function*(){if(e){_t.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{yield this.browserStorage.removeAccount(_t.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return Se.getAbsoluteUrl(t,oi())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let i={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Kc(i,this.browserStorage)}getDiscoveredAuthority(e){return S(this,null,function*(){let{account:t}=e,i=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(_.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,s=i?.length?i==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(Se.getDomainFromUrl(o),t.environment):o,l=cr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=yield D(Av.createDiscoveredInstance,_.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(l,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw je(qr.authorityMismatch);return c})}};var Lee=32;function jV(n,e,t){return S(this,null,function*(){n.addQueueMeasurement(_.GeneratePkceCodes,t);let i=ni(Fee,_.GenerateCodeVerifier,e,n,t)(n,e,t),r=yield D(Vee,_.GenerateCodeChallengeFromVerifier,e,n,t)(i,n,e,t);return{verifier:i,challenge:r}})}function Fee(n,e,t){try{let i=new Uint8Array(Lee);return ni(_V,_.GetRandomValues,e,n,t)(i),Xc(i)}catch{throw B(Yc)}}function Vee(n,e,t,i){return S(this,null,function*(){e.addQueueMeasurement(_.GenerateCodeChallengeFromVerifier,i);try{let r=yield D(xI,_.Sha256Digest,t,e,i)(n,e,i);return Xc(new Uint8Array(r))}catch{throw B(Yc)}})}function rg(n,e,t,i){return S(this,null,function*(){t.addQueueMeasurement(_.InitializeBaseRequest,n.correlationId);let r=n.authority||e.auth.authority,o=[...n&&n.scopes||[]],s=P(v({},n),{correlationId:n.correlationId,authority:r,scopes:o});if(!s.authenticationScheme)s.authenticationScheme=Ue.BEARER,i.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Ue.SSH){if(!n.sshJwk)throw je(qr.missingSshJwk);if(!n.sshKid)throw je(qr.missingSshKid)}i.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!Lt.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield $v(n.claims)),s})}function $V(n,e,t,i,r){return S(this,null,function*(){i.addQueueMeasurement(_.InitializeSilentRequest,n.correlationId);let o=yield D(rg,_.InitializeBaseRequest,r,i,n.correlationId)(n,t,i,r);return P(v(v({},n),o),{account:e,forceRefresh:n.forceRefresh||!1})})}var xi=class extends Th{initializeAuthorizationCodeRequest(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let t=yield D(jV,_.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),i=P(v({},e),{redirectUri:e.redirectUri,code:A.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=A.S256_CODE_CHALLENGE_METHOD,i})}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=v({correlationId:this.correlationId||zn()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let i=this.getLogoutHintFromIdTokenClaims(e.account);i&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=i)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Se.getAbsoluteUrl(e.postLogoutRedirectUri,oi())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Se.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,oi())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Se.getAbsoluteUrl(oi(),oi())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield D(this.getClientConfiguration.bind(this),_.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Gc(t,this.performanceClient)})}getClientConfiguration(e){return S(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:i,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:s}=e;this.performanceClient.addQueueMeasurement(_.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield D(this.getDiscoveredAuthority.bind(this),_.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:i,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:s}),l=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Gt.MSAL_SKU,version:Ja,cpu:A.EMPTY_STRING,os:A.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let i=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=fn.setRequestState(this.browserCrypto,e&&e.state||A.EMPTY_STRING,r),s=yield D(rg,_.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(P(v({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=P(v({},s),{redirectUri:i,state:o,nonce:e.nonce||zn(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),l=e.account||this.browserStorage.getActiveAccount();if(l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),a.account=l),!a.loginHint&&!l){let c=this.browserStorage.getLegacyLoginHint();c&&(a.loginHint=c)}return a})}};var WV="ContentError",sy="user_switch";var qV="USER_INTERACTION_REQUIRED",GV="USER_CANCEL",KV="NO_NETWORK",YV="PERSISTENT_ERROR",QV="DISABLED",ZV="ACCOUNT_UNAVAILABLE";var Bee=-2147186943,Uee={[sy]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},dr=class n extends Pe{constructor(e,t,i){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=i}};function Xa(n){if(n.ext&&n.ext.status&&(n.ext.status===YV||n.ext.status===QV)||n.ext&&n.ext.error&&n.ext.error===Bee)return!0;switch(n.errorCode){case WV:return!0;default:return!1}}function og(n,e,t){if(t&&t.status)switch(t.status){case ZV:return Wd(Ps.nativeAccountUnavailable);case qV:return new Pn(n,e);case GV:return B(Ai);case KV:return B(Rs)}return new dr(n,Uee[n]||e,t)}var kh=class extends xi{acquireToken(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(tt.acquireTokenSilent_silentFlow),i=yield D(this.getClientConfiguration.bind(this),_.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Kp(i,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield D(r.acquireCachedToken.bind(r),_.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(o){throw o instanceof Jc&&o.errorCode===Ya&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var hr=class extends Th{constructor(e,t,i,r,o,s,a,l,c,u,h,p){super(e,t,i,r,o,s,l,c,p),this.apiId=a,this.accountId=u,this.nativeMessageHandler=c,this.nativeStorageManager=h,this.silentCacheClient=new kh(e,this.nativeStorageManager,i,r,o,s,l,c,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let g=this.nativeMessageHandler.getExtensionId()===Za.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Kc.makeExtraSkuString({libraryName:Gt.MSAL_SKU,libraryVersion:Ja,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=P(v({},e.extraParameters),{[xs.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let t=this.performanceClient.startMeasurement(_.NativeInteractionClientAcquireToken,e.correlationId),i=Rp.nowSeconds();try{let r=yield this.initializeNativeRequest(e);try{let c=yield this.acquireTokensFromCache(this.accountId,r);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let o=Bt(r,[]),s={method:Ms.GetToken,request:o},a=yield this.nativeMessageHandler.sendMessage(s),l=this.validateNativeResponse(a);return yield this.handleNativeResponse(l,r,i).then(c=>(t.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),c)).catch(c=>{throw t.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError,isNativeBroker:!0}),c})}catch(r){throw r instanceof dr&&this.serverTelemetryManager.setNativeBrokerErrorCode(r.errorCode),r}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:At.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return S(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),R(dn.noAccountFound);let i=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!i)throw R(dn.noAccountFound);try{let r=this.createSilentCacheRequest(t,i),o=yield this.silentCacheClient.acquireToken(r),s=P(v({},i),{idTokenClaims:o?.idTokenClaims,idToken:o?.idToken});return P(v({},o),{account:s})}catch(r){throw r}})}acquireTokenRedirect(e,t){return S(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let i=Bt(e,[]);delete i.onRedirectNavigate;let r=yield this.initializeNativeRequest(i),o={method:Ms.GetToken,request:r};try{let l=yield this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(l)}catch(l){if(l instanceof dr&&(this.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Xa(l)))throw l}this.browserStorage.setTemporaryCache(Je.NATIVE_REQUEST,JSON.stringify(r),!0);let s={apiId:tt.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return S(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let i=this.browserStorage.getCachedNativeRequest();if(!i)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let l=i,{prompt:r}=l,o=Bt(l,["prompt"]);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.NATIVE_REQUEST));let s={method:Ms.GetToken,request:o},a=Rp.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(c);let u=this.handleNativeResponse(c,o,a);this.browserStorage.setInteractionInProgress(!1);let h=yield u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),h}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,i){return S(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let r=Ua.extractTokenClaims(e.id_token,Ii),o=this.createHomeAccountIdentifier(e,r),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(o!==s&&e.account.id!==t.accountId)throw og(sy);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),l=qd(this.browserStorage,a,o,Ii,r,e.client_info,void 0,r.tid,void 0,e.account.id,this.logger),c=yield this.generateAuthenticationResult(e,t,r,l,a.canonicalAuthority,i);return this.cacheAccount(l),this.cacheNativeTokens(e,t,o,r,e.access_token,c.tenantId,i),c})}createHomeAccountIdentifier(e,t){return _t.generateHomeAccountId(e.client_info||A.EMPTY_STRING,ti.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?At.fromString(e.scope):At.fromString(t.scope)}generatePopAccessToken(e,t){return S(this,null,function*(){if(t.tokenType===Ue.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let i=new ji(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw R(dn.keyIdMissing);return i.signPopToken(e.access_token,t.keyId,r)}else return e.access_token})}generateAuthenticationResult(e,t,i,r,o,s){return S(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),l=e.scope?At.fromString(e.scope):At.fromString(t.scope),c=e.account.properties||{},u=c.UID||i.oid||i.sub||A.EMPTY_STRING,h=c.TenantId||i.tid||A.EMPTY_STRING,p=qc(r.getAccountInfo(),void 0,i,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);let g=yield this.generatePopAccessToken(e,t),w=t.tokenType===Ue.POP?Ue.POP:Ue.BEARER;return{authority:o,uniqueId:u,tenantId:h,scopes:l.asArray(),account:p,idToken:e.id_token,idTokenClaims:i,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,i,r,o,s,a){let l=bt.createIdTokenEntity(i,t.authority,e.id_token||"",t.clientId,r.tid||""),c=t.tokenType===Ue.POP?A.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+c,h=this.generateScopes(e,t),p=bt.createAccessTokenEntity(i,t.authority,o,t.clientId,r.tid||s,h.printScopes(),u,0,Ii,void 0,t.tokenType,void 0,t.keyId),g={idToken:l,accessToken:p};this.nativeStorageManager.saveCacheRecord(g,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw pp(gc.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return S(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let i=new Se(t);i.validateAsUri();let c=e,{scopes:r}=c,o=Bt(c,["scopes"]),s=new At(r||[]);s.appendScopes(Hi);let a=()=>{switch(this.apiId){case tt.ssoSilent:case tt.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),kt.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),B(wh)}},l=P(v({},o),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:i.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:v(v({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(l.signPopToken&&e.popKid)throw B(yh);if(this.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry=Za.MATS_TELEMETRY,e.authenticationScheme===Ue.POP){let u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},h=new ji(this.browserCrypto),p;if(l.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{let g=yield D(h.generateCnf.bind(h),_.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);p=g.reqCnfString,l.keyId=g.kid,l.signPopToken=!0}l.reqCnf=p}return this.addRequestSKUs(l),l})}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(xs.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(xs.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(xs.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let i="",r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,i=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[xs.BROKER_REDIRECT_URI],i=e.extraParameters[xs.CLIENT_ID]),e.extraParameters={child_client_id:i,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:i,embeddedRedirectUri:r},e.correlationId)}};var $i=class n{constructor(e,t,i,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=i,this.handshakeEvent=i.startMeasurement(_.NativeMessageHandlerHandshake)}sendMessage(e){return S(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:Za.CHANNEL_ID,extensionId:this.extensionId,responseId:zn(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((i,r)=>{this.resolvers.set(t.responseId,{resolve:i,reject:r})})})}static createProvider(e,t,i){return S(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let r=new n(e,t,i,Za.PREFERRED_EXTENSION_ID);return yield r.sendHandshakeRequest(),r}catch{let o=new n(e,t,i);return yield o.sendHandshakeRequest(),o}})}sendHandshakeRequest(){return S(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:Za.CHANNEL_ID,extensionId:this.extensionId,responseId:zn(),body:{method:Ms.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,i)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:i}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),i(B(ph)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==Za.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===Ms.HandshakeRequest){let i=this.handshakeResolvers.get(t.responseId);if(!i){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),i.reject(B(gh))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,i=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{let o=t.body.method;if(o===Ms.Response){if(!i)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")i.reject(og(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?i.reject(og(s.result.code,s.result.description,s.result.ext)):i.resolve(s.result);else throw pp(gc.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(o===Ms.HandshakeResponse){if(!r){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${o}`),this.logger.errorPii(`Unable to parse ${e}`),i?i.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,i,r){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!i)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(r)switch(r){case Ue.BEARER:case Ue.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var el=class{constructor(e,t,i,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=i,this.logger=r,this.performanceClient=o}handleCodeResponse(e,t){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.HandleCodeResponse,t.correlationId);let i;try{i=this.authModule.handleFragmentResponse(e,t.state)}catch(r){throw r instanceof ii&&r.subError===Ai?B(Ai):r}return D(this.handleCodeResponseFromServer.bind(this),_.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(i,t)})}handleCodeResponseFromServer(e,t,i=!0){return S(this,null,function*(){if(this.performanceClient.addQueueMeasurement(_.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield D(this.authModule.updateAuthority.bind(this.authModule),_.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),i&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let o=this.createCcsCredentials(t);o&&(this.authCodeRequest.ccsCredential=o)}return yield D(this.authModule.acquireToken.bind(this.authModule),_.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:hn.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:hn.UPN}:null}};function ay(n,e,t){let i=za.getDeserializedResponse(n);if(!i)throw za.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),B(Yd)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),B(Kd));return i}function JV(n,e,t){if(!n.state)throw B(Ga);let i=ry(e,n.state);if(!i)throw B(Qd);if(i.interactionType!==t)throw B(Zd)}var ly=class extends xi{constructor(e,t,i,r,o,s,a,l,c,u){super(e,t,i,r,o,s,a,c,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=l}acquireToken(e){try{let i={popupName:this.generatePopupName(e.scopes||Hi,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,i)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),i.popup=this.openSizedPopup("about:blank",i),this.acquireTokenPopupAsync(e,i))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),i={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},r=e&&e.authority,o=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,i,r,o)):(this.logger.verbose("asyncPopup set to false, opening popup"),i.popup=this.openSizedPopup("about:blank",i),this.logoutPopupAsync(t,i,r,o))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t){return S(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let i=this.initializeServerTelemetryManager(tt.acquireTokenPopup),r=yield D(this.initializeAuthorizationRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,q.Popup);tg(r.authority);try{let o=yield D(this.initializeAuthorizationCodeRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(r),s=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=$i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),l;a&&(l=this.performanceClient.startMeasurement(_.FetchAccountIdWithNativeBroker,e.correlationId));let c=yield s.getAuthCodeUrl(P(v({},r),{nativeBroker:a})),u=new el(s,this.browserStorage,o,this.logger,this.performanceClient),h=this.initiateAuthRequest(c,t);this.eventHandler.emitEvent(G.POPUP_OPENED,q.Popup,{popupWindow:h},null);let p=yield this.monitorPopupForHash(h,t.popupWindowParent),g=ni(ay,_.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(To.removeThrottle(this.browserStorage,this.config.auth.clientId,o),g.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw B(ur);let y=new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,g.accountId,this.nativeStorage,r.correlationId),{userRequestState:E}=fn.parseRequestState(this.browserCrypto,r.state);return yield y.acquireToken(P(v({},r),{state:E,prompt:void 0}))}return yield u.handleCodeResponse(g,r)}catch(o){throw t.popup?.close(),o instanceof Pe&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),o}})}logoutPopupAsync(e,t,i,r){return S(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(G.LOGOUT_START,q.Popup,e);let o=this.initializeServerTelemetryManager(tt.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let s=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:i,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===xn.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,q.Popup,e),r){let c={apiId:tt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=Se.getAbsoluteUrl(r,oi());yield this.navigationClient.navigateInternal(u,c)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,q.Popup,e);let l=this.openPopup(a,t);if(this.eventHandler.emitEvent(G.POPUP_OPENED,q.Popup,{popupWindow:l},null),yield this.monitorPopupForHash(l,t.popupWindowParent).catch(()=>{}),r){let c={apiId:tt.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},u=Se.getAbsoluteUrl(r,oi());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${u}`),yield this.navigationClient.navigateInternal(u,c)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof Pe&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(G.LOGOUT_FAILURE,q.Popup,null,s),this.eventHandler.emitEvent(G.LOGOUT_END,q.Popup),s}this.eventHandler.emitEvent(G.LOGOUT_END,q.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),B(Ao)}monitorPopupForHash(e,t){return new Promise((i,r)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let o=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(o),r(B(Ai));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(o);let a="",l=this.config.auth.OIDCOptions.serverResponseType;e&&(l===jr.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let i;if(t.popup?(i=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),i.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),i=this.openSizedPopup(e,t)),!i)throw B(eh);return i.focus&&i.focus(),this.currentWindow=i,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),i}catch(i){throw this.logger.error("error opening popup "+i.message),this.browserStorage.setInteractionInProgress(!1),B(Xd)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:i,popupWindowParent:r}){let o=r.screenLeft?r.screenLeft:r.screenX,s=r.screenTop?r.screenTop:r.screenY,a=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=i.popupSize?.width,u=i.popupSize?.height,h=i.popupPosition?.top,p=i.popupPosition?.left;return(!c||c<0||c>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=Gt.POPUP_WIDTH),(!u||u<0||u>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Gt.POPUP_HEIGHT),(!h||h<0||h>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),h=Math.max(0,l/2-Gt.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-Gt.POPUP_WIDTH/2+o)),r.open(e,t,`width=${c}, height=${u}, top=${h}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(q.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Gt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${Gt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};var sg=class{constructor(e,t,i,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=i,this.logger=r,this.performanceClient=o}initiateAuthRequest(e,t){return S(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Je.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let i={apiId:tt.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield t.navigationClient.navigateExternal(e,i);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield t.navigationClient.navigateExternal(e,i);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),B(Ao)})}handleCodeResponse(e,t){return S(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let i=this.browserStorage.generateStateKey(t),r=this.browserStorage.getTemporaryCache(i);if(!r)throw R(dn.stateNotFound,"Cached State");let o;try{o=this.authModule.handleFragmentResponse(e,r)}catch(c){throw c instanceof ii&&c.subError===Ai?B(Ai):c}let s=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield D(this.authModule.updateAuthority.bind(this.authModule),_.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(o.cloud_instance_host_name,this.authCodeRequest.correlationId)),o.nonce=a||void 0,o.state=r,o.client_info)this.authCodeRequest.clientInfo=o.client_info;else{let c=this.checkCcsCredentials();c&&(this.authCodeRequest.ccsCredential=c)}let l=yield this.authModule.acquireToken(this.authCodeRequest,o);return this.browserStorage.cleanRequestByState(t),l})}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(Je.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};function Hee(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var cy=class extends xi{constructor(e,t,i,r,o,s,a,l,c,u){super(e,t,i,r,o,s,a,c,u),this.nativeStorage=l}acquireToken(e){return S(this,null,function*(){let t=yield D(this.initializeAuthorizationRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,q.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let i=this.initializeServerTelemetryManager(tt.acquireTokenRedirect),r=o=>{o.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(G.RESTORE_FROM_BFCACHE,q.Redirect))};try{let o=yield D(this.initializeAuthorizationCodeRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new sg(s,this.browserStorage,o,this.logger,this.performanceClient),l=yield s.getAuthCodeUrl(P(v({},t),{nativeBroker:$i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",r),yield a.initiateAuthRequest(l,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(o){throw o instanceof Pe&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(t.state),o}})}handleRedirectPromise(e="",t){return S(this,null,function*(){let i=this.initializeServerTelemetryManager(tt.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(q.Redirect),Hee()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let s=this.browserStorage.getTemporaryCache(Je.ORIGIN_URI,!0)||A.EMPTY_STRING,a=Se.removeHashFromUrl(s),l=Se.removeHashFromUrl(window.location.href);if(a===l&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&RI(s),yield this.handleResponse(r,i);if(this.config.auth.navigateToLoginRequestUrl){if(!Xp()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Je.URL_HASH,o,!0);let c={apiId:tt.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},u=!0;if(!s||s==="null"){let h=DI();this.browserStorage.setTemporaryCache(Je.ORIGIN_URI,h,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),u=yield this.navigationClient.navigateInternal(h,c)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),u=yield this.navigationClient.navigateInternal(s,c);if(!u)return yield this.handleResponse(r,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(r,i);return null}catch(r){throw r instanceof Pe&&(r.setCorrelationId(this.correlationId),i.cacheFailedRequest(r)),this.browserStorage.cleanRequestByInteractionType(q.Redirect),r}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===jr.QUERY?t=window.location.search:t=window.location.hash);let i=za.getDeserializedResponse(t);if(i){try{JV(i,this.browserCrypto,q.Redirect)}catch(o){return o instanceof Pe&&this.logger.error(`Interaction type validation failed due to ${o.errorCode}: ${o.errorMessage}`),[null,""]}return PI(window),this.logger.verbose("Hash contains known properties, returning response hash"),[i,t]}let r=this.browserStorage.getTemporaryCache(Je.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Je.URL_HASH)),r&&(i=za.getDeserializedResponse(r),i)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[i,r]):[null,""]}handleResponse(e,t){return S(this,null,function*(){let i=e.state;if(!i)throw B(Ga);let r=this.browserStorage.getCachedRequest(i);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(ur);let l=new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:c}=fn.parseRequestState(this.browserCrypto,i);return l.acquireToken(P(v({},r),{state:c,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(i)})}let o=this.browserStorage.getCachedAuthority(i);if(!o)throw B(Ka);let s=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});return To.removeThrottle(this.browserStorage,this.config.auth.clientId,r),new sg(s,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,i)})}logout(e){return S(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),i=this.initializeServerTelemetryManager(tt.logout);try{this.eventHandler.emitEvent(G.LOGOUT_START,q.Redirect,e),yield this.clearCacheOnLogout(t.account);let r={apiId:tt.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===xn.OIDC)try{o.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,q.Redirect,t);return}}let s=o.getLogoutUri(t);if(this.eventHandler.emitEvent(G.LOGOUT_SUCCESS,q.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,r);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,r);return}}catch(r){throw r instanceof Pe&&(r.setCorrelationId(this.correlationId),i.cacheFailedRequest(r)),this.eventHandler.emitEvent(G.LOGOUT_FAILURE,q.Redirect,null,r),this.eventHandler.emitEvent(G.LOGOUT_END,q.Redirect),r}this.eventHandler.emitEvent(G.LOGOUT_END,q.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return Se.getAbsoluteUrl(t,oi())}};function XV(n,e,t,i,r){return S(this,null,function*(){if(e.addQueueMeasurement(_.SilentHandlerInitiateAuthRequest,i),!n)throw t.info("Navigate url is empty"),B(Ao);return r?D(zee,_.SilentHandlerLoadFrame,t,e,i)(n,r,e,i):ni(jee,_.SilentHandlerLoadFrameSync,t,e,i)(n)})}function e4(n,e,t,i,r,o,s){return S(this,null,function*(){return i.addQueueMeasurement(_.SilentHandlerMonitorIframeForHash,o),new Promise((a,l)=>{e<Xv&&r.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Xv}ms). This may result in timeouts.`);let c=window.setTimeout(()=>{window.clearInterval(u),l(B(th))},e),u=window.setInterval(()=>{let h="",p=n.contentWindow;try{h=p?p.location.href:""}catch{}if(!h||h==="about:blank")return;let g="";p&&(s===jr.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(c),window.clearInterval(u),a(g)},t)}).finally(()=>{ni($ee,_.RemoveHiddenIframe,r,i,o)(n)})})}function zee(n,e,t,i){return t.addQueueMeasurement(_.SilentHandlerLoadFrame,i),new Promise((r,o)=>{let s=t4();window.setTimeout(()=>{if(!s){o("Unable to load iframe");return}s.src=n,r(s)},e)})}function jee(n){let e=t4();return e.src=n,e}function t4(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function $ee(n){document.body===n.parentNode&&document.body.removeChild(n)}var uy=class extends xi{constructor(e,t,i,r,o,s,a,l,c,u,h){super(e,t,i,r,o,s,l,u,h),this.apiId=a,this.nativeStorage=c}acquireToken(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=v({},e);t.prompt?t.prompt!==kt.NONE&&t.prompt!==kt.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${kt.NONE}`),t.prompt=kt.NONE):t.prompt=kt.NONE;let i=yield D(this.initializeAuthorizationRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,q.Silent);tg(i.authority);let r=this.initializeServerTelemetryManager(this.apiId),o;try{return o=yield D(this.createAuthCodeClient.bind(this),_.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),yield D(this.silentTokenHelper.bind(this),_.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(o,i)}catch(s){if(s instanceof Pe&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),!o||!(s instanceof Pe)||s.errorCode!==Gt.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);let a=yield D(this.initializeAuthorizationRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,q.Silent);return yield D(this.silentTokenHelper.bind(this),_.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(o,a)}})}logout(){return Promise.reject(B(Io))}silentTokenHelper(e,t){return S(this,null,function*(){let i=t.correlationId;this.performanceClient.addQueueMeasurement(_.SilentIframeClientTokenHelper,i);let r=yield D(this.initializeAuthorizationCodeRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,i)(t),o=yield D(e.getAuthCodeUrl.bind(e),_.GetAuthCodeUrl,this.logger,this.performanceClient,i)(P(v({},t),{nativeBroker:$i.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),s=new el(e,this.browserStorage,r,this.logger,this.performanceClient),a=yield D(XV,_.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,i)(o,this.performanceClient,this.logger,i,this.config.system.navigateFrameWait),l=this.config.auth.OIDCOptions.serverResponseType,c=yield D(e4,_.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,i,l),u=ni(ay,_.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(c,l,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(ur);let h=new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,i),{userRequestState:p}=fn.parseRequestState(this.browserCrypto,t.state);return D(h.acquireToken.bind(h),_.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,i)(P(v({},t),{state:p,prompt:t.prompt||kt.NONE}))}return D(s.handleCodeResponse.bind(s),_.HandleCodeResponse,this.logger,this.performanceClient,i)(u,t)})}};var dy=class extends xi{acquireToken(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.SilentRefreshClientAcquireToken,e.correlationId);let t=yield D(rg,_.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),i=v(v({},e),t);e.redirectUri&&(i.redirectUri=this.getRedirectUri(e.redirectUri));let r=this.initializeServerTelemetryManager(tt.acquireTokenSilent_silentFlow),o=yield this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:i.authority,azureCloudOptions:i.azureCloudOptions,account:i.account});return D(o.acquireTokenByRefreshToken.bind(o),_.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(i).catch(s=>{throw s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s),s})})}logout(){return Promise.reject(B(Io))}createRefreshTokenClient(e){return S(this,null,function*(){let t=yield D(this.getClientConfiguration.bind(this),_.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new qa(t,this.performanceClient)})}};var hy=class{constructor(e,t,i,r){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=i,this.cryptoObj=r}loadExternalTokens(e,t,i){if(!this.isBrowserEnvironment)throw B(xo);let r=t.id_token?Ua.extractTokenClaims(t.id_token,Ii):void 0,o={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new cr(cr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,o,this.logger,e.correlationId||zn()):void 0,a=this.loadAccount(e,i.clientInfo||t.client_info||"",r,s),l=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),c=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,i),u=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:l,accessToken:c,refreshToken:u},r,s)}loadAccount(e,t,i,r){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=_t.createFromAccountInfo(e.account);return this.storage.setAccount(l),l}else if(!r||!t&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),B(uh);let o=_t.generateHomeAccountId(t,r.authorityType,this.logger,this.cryptoObj,i),s=i?.tid,a=qd(this.storage,r,o,Ii,i,t,r.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,i,r){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let o=bt.createIdTokenEntity(t,i,e.id_token,this.config.auth.clientId,r);return this.storage.setIdTokenCredential(o),o}loadAccessToken(e,t,i,r,o,s){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let a=t.scope?At.fromString(t.scope):new At(e.scopes),l=s.expiresOn||t.expires_in+new Date().getTime()/1e3,c=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,u=bt.createAccessTokenEntity(i,r,t.access_token,this.config.auth.clientId,o,a.printScopes(),l,c,Ii);return this.storage.setAccessTokenCredential(u),u}loadRefreshToken(e,t,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let r=bt.createRefreshTokenEntity(t,i,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(r),r}generateAuthenticationResult(e,t,i,r){let o="",s=[],a=null,l;t?.accessToken&&(o=t.accessToken.secret,s=At.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),l=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));let c=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:c.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:i||{},accessToken:o,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:l,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}};var fy=class extends Gc{constructor(e){super(e),this.includeRedirectUri=!1}};var my=class extends xi{constructor(e,t,i,r,o,s,a,l,c,u){super(e,t,i,r,o,s,l,c,u),this.apiId=a}acquireToken(e){return S(this,null,function*(){if(!e.code)throw B(dh);let t=yield D(this.initializeAuthorizationRequest.bind(this),_.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,q.Silent),i=this.initializeServerTelemetryManager(this.apiId);try{let r=P(v({},t),{code:e.code}),o=yield D(this.getClientConfiguration.bind(this),_.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new fy(o);this.logger.verbose("Auth code client created");let a=new el(s,this.browserStorage,r,this.logger,this.performanceClient);return yield D(a.handleCodeResponseFromServer.bind(a),_.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof Pe&&(r.setCorrelationId(this.correlationId),i.cacheFailedRequest(r)),r}})}logout(){return Promise.reject(B(Io))}};function Ro(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function py(n,e){try{eg(n)}catch(t){throw e.end({success:!1},t),t}}var Ah=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new OV(this.logger,this.performanceClient):Va,this.eventHandler=new oy(this.logger),this.browserStorage=this.isBrowserEnvironment?new Sh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,mI(this.config.auth),this.performanceClient):NV(this.config.auth.clientId,this.logger);let t={cacheLocation:ft.MemoryStorage,temporaryCacheLocation:ft.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Sh(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new hy(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,t){return S(this,null,function*(){let i=new n(e);return yield i.initialize(t),i})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){return S(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(G.INITIALIZE_END);return}let t=e?.correlationId||this.getRequestCorrelationId(),i=this.config.system.allowNativeBroker,r=this.performanceClient.startMeasurement(_.InitializeClientApplication,t);if(this.eventHandler.emitEvent(G.INITIALIZE_START),i)try{this.nativeExtensionProvider=yield $i.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield D(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),_.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(G.INITIALIZE_END),r.end({allowNativeBroker:i,success:!0})})}handleRedirectPromise(e){return S(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),Yv(this.initialized),this.isBrowserEnvironment){let t=e||"",i=this.redirectResponse.get(t);return typeof i>"u"?(i=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,i),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),i}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return S(this,null,function*(){let t=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),r=i&&$i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,o=r?i?.correlationId:this.browserStorage.getTemporaryCache(Je.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(_.AcquireTokenRedirect,o);this.eventHandler.emitEvent(G.HANDLE_REDIRECT_START,q.Redirect);let a;if(r&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let l=new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=D(l.handleRedirectPromise.bind(l),_.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let l=this.createRedirectClient(o);a=D(l.handleRedirectPromise.bind(l),_.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(l=>(l?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(G.LOGIN_SUCCESS,q.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,q.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:Ro(l.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(G.HANDLE_REDIRECT_END,q.Redirect),l)).catch(l=>{let c=l;throw t.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,q.Redirect,null,c):this.eventHandler.emitEvent(G.LOGIN_FAILURE,q.Redirect,null,c),this.eventHandler.emitEvent(G.HANDLE_REDIRECT_END,q.Redirect),s.end({success:!1},c),l})})}acquireTokenRedirect(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let i=this.performanceClient.startMeasurement(_.AcquireTokenPreRedirect,t);i.add({accountType:Ro(e.account),scenarioId:e.scenarioId});let r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=s=>{let a=typeof r=="function"?r(s):void 0;return a!==!1?i.end({success:!0}):i.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let l=typeof s=="function"?s(a):void 0;return l!==!1?i.end({success:!0}):i.discard(),l}}let o=this.getAllAccounts().length>0;try{Qv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,q.Redirect,e):this.eventHandler.emitEvent(G.LOGIN_START,q.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,i).catch(l=>{if(l instanceof dr&&Xa(l))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(l instanceof Pn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),l}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw i.end({success:!1},s),o?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,q.Redirect,null,s):this.eventHandler.emitEvent(G.LOGIN_FAILURE,q.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(_.AcquireTokenPopup,t);i.add({scenarioId:e.scenarioId,accountType:Ro(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),py(this.initialized,i),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}let r=this.getAllAccounts();r.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,q.Popup,e):this.eventHandler.emitEvent(G.LOGIN_START,q.Popup,e);let o;return this.canUseNative(e)?o=this.acquireTokenNative(P(v({},e),{correlationId:t}),tt.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),i.end({success:!0,isNativeBroker:!0,accountType:Ro(s.account)}),s)).catch(s=>{if(s instanceof dr&&Xa(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof Pn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):o=this.createPopupClient(t).acquireToken(e),o.then(s=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(G.LOGIN_SUCCESS,q.Popup,s):this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,q.Popup,s),i.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Ro(s.account)}),s)).catch(s=>(r.length>0?this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,q.Popup,null,s):this.eventHandler.emitEvent(G.LOGIN_FAILURE,q.Popup,null,s),i.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e),i=P(v({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(_.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:Ro(e.account)}),py(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(G.SSO_SILENT_START,q.Silent,i);let r;return this.canUseNative(i)?r=this.acquireTokenNative(i,tt.ssoSilent).catch(o=>{if(o instanceof dr&&Xa(o))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(i.correlationId).acquireToken(i);throw o}):r=this.createSilentIframeClient(i.correlationId).acquireToken(i),r.then(o=>(this.eventHandler.emitEvent(G.SSO_SILENT_SUCCESS,q.Silent,o),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:o.fromNativeBroker,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,accountType:Ro(o.account)}),o)).catch(o=>{throw this.eventHandler.emitEvent(G.SSO_SILENT_FAILURE,q.Silent,null,o),this.ssoSilentMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let i=this.performanceClient.startMeasurement(_.AcquireTokenByCode,t);py(this.initialized,i),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_START,q.Silent,e),i.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw B(fh);if(e.code){let r=e.code,o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),i.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(P(v({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_SUCCESS,q.Silent,s),this.hybridAuthCodeResponses.delete(r),i.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:Ro(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_FAILURE,q.Silent,null,s),i.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(r,o)),yield o}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){let r=yield this.acquireTokenNative(P(v({},e),{correlationId:t}),tt.acquireTokenByCode,e.nativeAccountId).catch(o=>{throw o instanceof dr&&Xa(o)&&(this.nativeExtensionProvider=void 0),o});return i.end({accountType:Ro(r.account),success:!0}),r}else throw B(mh);else throw B(hh)}catch(r){throw this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_BY_CODE_FAILURE,q.Silent,null,r),i.end({success:!1},r),r}})}acquireTokenByCodeAsync(e){return S(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(_.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(r=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:r.fromCache,isNativeBroker:r.fromNativeBroker}),r)).catch(r=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},r),r}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return S(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(_.AcquireTokenFromCache,e.correlationId),t){case ri.Default:case ri.AccessToken:case ri.AccessTokenAndRefreshToken:let i=this.createSilentCacheClient(e.correlationId);return D(i.acquireToken.bind(i),_.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw R(dn.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return S(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(_.AcquireTokenByRefreshToken,e.correlationId),t){case ri.Default:case ri.AccessTokenAndRefreshToken:case ri.RefreshToken:case ri.RefreshTokenAndNetwork:let i=this.createSilentRefreshClient(e.correlationId);return D(i.acquireToken.bind(i),_.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw R(dn.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return S(this,null,function*(){this.performanceClient.addQueueMeasurement(_.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return D(t.acquireToken.bind(t),_.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(v({correlationId:t},e))})}logoutRedirect(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e);return Qv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return eg(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){return S(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){return LV(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return FV(e,this.logger,this.browserStorage)}getAccountByUsername(e){return VV(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return BV(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return UV(e,this.logger,this.browserStorage)}setActiveAccount(e){HV(e,this.browserStorage)}getActiveAccount(){return zV(this.browserStorage)}hydrateCache(e,t){return S(this,null,function*(){this.logger.verbose("hydrateCache called");let i=_t.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(i),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,i){return S(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw B(ur);return new hr(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,i||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)})}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!$i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case kt.NONE:case kt.CONSENT:case kt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new ly(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new cy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new uy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new kh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new dy(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new my(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,tt.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Kv(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(qt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(G.ACTIVE_ACCOUNT_CHANGED);let t=e.newValue||e.oldValue;if(!t)return;let i=JSON.parse(t);if(typeof i!="object"||!_t.isAccountEntity(i))return;let o=As.toObject(new _t,i).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(G.ACCOUNT_ADDED,void 0,o)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(G.ACCOUNT_REMOVED,void 0,o))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?zn():A.EMPTY_STRING}loginRedirect(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(v({correlationId:t},e||SI))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(v({correlationId:t},e||SI))}acquireTokenSilent(e){return S(this,null,function*(){let t=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(_.AcquireTokenSilent,t);i.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),py(this.initialized,i),this.logger.verbose("acquireTokenSilent called",t);let r=e.account||this.getActiveAccount();if(!r)throw B(oh);i.add({accountType:Ro(r)});let o={clientId:this.config.auth.clientId,authority:e.authority||A.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(o),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);let l=D(this.acquireTokenSilentAsync.bind(this),_.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)(P(v({},e),{correlationId:t}),r).then(c=>(this.activeSilentTokenRequests.delete(s),i.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),c)).catch(c=>{throw this.activeSilentTokenRequests.delete(s),i.end({success:!1},c),c});return this.activeSilentTokenRequests.set(s,l),P(v({},yield l),{state:e.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),i.discard(),P(v({},yield a),{state:e.state})})}acquireTokenSilentAsync(e,t){return S(this,null,function*(){let i=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(_.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_START,q.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",i);let r=yield D($V,_.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||ri.Default;return this.acquireTokenSilentNoIframe(r,o).catch(a=>S(this,null,function*(){if(Wee(a,o))if(this.activeIframeRequest)if(o!==ri.Skip){let[c,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,r.correlationId);let h=this.performanceClient.startMeasurement(_.AwaitConcurrentIframe,r.correlationId);h.add({awaitIframeCorrelationId:u});let p=yield c;if(h.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),D(this.acquireTokenBySilentIframe.bind(this),_.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r);else{let c;return this.activeIframeRequest=[new Promise(u=>{c=u}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),D(this.acquireTokenBySilentIframe.bind(this),_.AcquireTokenBySilentIframe,this.logger,this.performanceClient,r.correlationId)(r).then(u=>(c(!0),u)).catch(u=>{throw c(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_SUCCESS,q.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_FAILURE,q.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",i)})})}acquireTokenSilentNoIframe(e,t){return S(this,null,function*(){return $i.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,tt.acquireTokenSilent_silentFlow).catch(i=>S(this,null,function*(){throw i instanceof dr&&Xa(i)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,R(dn.tokenRefreshRequired)):i}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),D(this.acquireTokenFromCache.bind(this),_.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(i=>{if(t===ri.AccessToken)throw i;return this.eventHandler.emitEvent(G.ACQUIRE_TOKEN_NETWORK_START,q.Silent,e),D(this.acquireTokenByRefreshToken.bind(this),_.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}};function Wee(n,e){let t=!(n instanceof Pn&&n.subError!==Ps.badToken),i=n.errorCode===Gt.INVALID_GRANT_ERROR||n.errorCode===dn.tokenRefreshRequired,r=t&&i||n.errorCode===Ps.noTokensFound||n.errorCode===Ps.refreshTokenExpired,o=fV.includes(e);return r&&o}function n4(n,e){return S(this,null,function*(){let t=new ty(n);return yield t.initialize(),Ah.createController(t,e)})}var ag=class n{static createPublicClientApplication(e){return S(this,null,function*(){let t=yield n4(e);return new n(e,t)})}constructor(e,t){this.controller=t||new Ah(new ty(e))}initialize(e){return S(this,null,function*(){return this.controller.initialize(e)})}acquireTokenPopup(e){return S(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return S(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var lg=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case G.LOGIN_START:return Jt.Login;case G.SSO_SILENT_START:return Jt.SsoSilent;case G.ACQUIRE_TOKEN_START:if(e.interactionType===q.Redirect||e.interactionType===q.Popup)return Jt.AcquireToken;break;case G.HANDLE_REDIRECT_START:return Jt.HandleRedirect;case G.LOGOUT_START:return Jt.Logout;case G.SSO_SILENT_SUCCESS:case G.SSO_SILENT_FAILURE:if(t&&t!==Jt.SsoSilent)break;return Jt.None;case G.LOGOUT_END:if(t&&t!==Jt.Logout)break;return Jt.None;case G.HANDLE_REDIRECT_END:if(t&&t!==Jt.HandleRedirect)break;return Jt.None;case G.LOGIN_SUCCESS:case G.LOGIN_FAILURE:case G.ACQUIRE_TOKEN_SUCCESS:case G.ACQUIRE_TOKEN_FAILURE:case G.RESTORE_FROM_BFCACHE:if(e.interactionType===q.Redirect||e.interactionType===q.Popup){if(t&&t!==Jt.Login&&t!==Jt.AcquireToken)break;return Jt.None}break}return null}};var i4="@azure/msal-angular",OI="3.1.0",gy=new X("MSAL_INSTANCE"),cg=new X("MSAL_GUARD_CONFIG"),r4=new X("MSAL_INTERCEPTOR_CONFIG"),qee=new X("MSAL_BROADCAST_CONFIG"),Ih=(()=>{class n{constructor(t,i){this.instance=t,this.location=i;let r=this.location.path(!0).split("#").pop();r&&(this.redirectHash=`#${r}`),this.instance.initializeWrapperLibrary(kI.Angular,OI)}initialize(){return Qe(this.instance.initialize())}acquireTokenPopup(t){return Qe(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return Qe(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return Qe(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return Qe(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return Qe(this.instance.loginPopup(t))}loginRedirect(t){return Qe(this.instance.loginRedirect(t))}logout(t){return Qe(this.instance.logout(t))}logoutRedirect(t){return Qe(this.instance.logoutRedirect(t))}logoutPopup(t){return Qe(this.instance.logoutPopup(t))}ssoSilent(t){return Qe(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(i4,OI)),this.logger}setLogger(t){this.logger=t.clone(i4,OI),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)(W(gy),W(vo))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),ug=(()=>{class n{constructor(t,i,r){this.msalInstance=t,this.authService=i,this.msalBroadcastConfig=r,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new $l(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new Rt,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new an(Jt.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(o=>{this._msalSubject.next(o);let s=lg.getInteractionStatusFromEvent(o,this._inProgress.value);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${o.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)(W(gy),W(Ih),W(qee,8))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})(),by=(()=>{class n{constructor(t,i,r,o,s){this.msalGuardConfig=t,this.msalBroadcastService=i,this.authService=r,this.location=o,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let i=document.getElementsByTagName("base"),r=this.location.normalize(i.length?i[0].href:window.location.origin),o=this.location.prepareExternalUrl(t);return o.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${r}/${o}`):`${r}${t}`}loginInteractively(t){let i=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):v({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===q.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(i).pipe(me(o=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(o.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let r=this.getDestinationUrl(t.url);return this.authService.loginRedirect(v({redirectStartPage:r},i)).pipe(me(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==q.Popup&&this.msalGuardConfig.interactionType!==q.Redirect)throw new Eh("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(Se.hashContainsKnownProperties(window.location.hash)&&Zv.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),ae(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),ae(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let i=this.location.path(!0);return this.authService.initialize().pipe(Dr(()=>this.authService.handleRedirectObservable()),Dr(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),ae(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let r=this.includesCode(t.url),o=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(r&&(o||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),i.indexOf("#")>-1?ae(this.parseUrl(this.location.path())):ae(this.parseUrl(""))}return ae(!0)}),Tn(r=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${r.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),ae(this.loginFailedRoute)):ae(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,i){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(i)}canActivateChild(t,i){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(i)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)(W(cg),W(ug),W(Ih),W(vo),W(Pa))},n.\u0275prov=K({token:n,factory:n.\u0275fac}),n})();var xh=class n{constructor(e,t,i){this.msalGuardConfig=e;this.authService=t;this.msalBroadcastService=i}isIframe=!1;isLoggedIn=!1;_destroying$=new Rt;authStatus$=new Rt;ngOnInit(){this.msalInit()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}msalInit(){this.authService.handleRedirectObservable().subscribe(),this.isIframe=window!==window.parent&&!window.opener,this.setLoggedInStatus(),this.authService.instance.enableAccountStorageEvents(),this.msalBroadcastService.msalSubject$.pipe(wn(e=>e.eventType===G.ACCOUNT_ADDED||e.eventType===G.ACCOUNT_REMOVED)).subscribe(e=>{this.authService.instance.getAllAccounts().length===0?window.location.pathname="/":this.setLoggedInStatus()}),this.msalBroadcastService.inProgress$.pipe(wn(e=>e===Jt.None),Xu(this._destroying$)).subscribe(()=>{this.setLoggedInStatus(),this.checkAndSetActiveAccount()})}setLoggedInStatus(){this.isLoggedIn=this.authService.instance.getAllAccounts().length>0,this.emitAuthStatus(this.isLoggedIn)}emitAuthStatus(e){this.authStatus$.next(e)}getAuthStatus(){return this.authStatus$.asObservable()}checkAndSetActiveAccount(){if(!this.authService.instance.getActiveAccount()&&this.authService.instance.getAllAccounts().length>0){let t=this.authService.instance.getAllAccounts();this.authService.instance.setActiveAccount(t[0])}}loginRedirect(){this.msalGuardConfig.authRequest?this.authService.loginRedirect(v({},this.msalGuardConfig.authRequest)).subscribe(e=>{console.log(e)}):this.authService.loginRedirect()}logout(e){e?this.authService.logoutPopup({mainWindowRedirectUri:"/"}):this.authService.logoutRedirect()}static \u0275fac=function(t){return new(t||n)(W(cg),W(Ih),W(ug))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var NI=(o=>(o[o.none=0]="none",o[o.white=1]="white",o[o.purple=2]="purple",o[o.green=3]="green",o[o.red=4]="red",o))(NI||{});var dg=(s=>(s[s.ANGULAR=0]="ANGULAR",s[s.TYPESCRIPT=1]="TYPESCRIPT",s[s.JAVASCRIPT=2]="JAVASCRIPT",s[s.CSHARP=3]="CSHARP",s[s.DOTNET=4]="DOTNET",s[s.AZURE=5]="AZURE",s))(dg||{});var fr={production:!0,apiUrl:"https://serverless-prologv7.azurewebsites.net/api/",msalConfig:{auth:{clientId:"175fef89-c02f-4e52-bbfe-426af94dee83",authority:"https://login.microsoftonline.com/f4f321ee-5728-48e6-85f7-62dc63501868",redirectUri:"https://www.prolog.red/",postLogoutRedirectUri:"https://www.prolog.red/"}},apiConfig:{scopes:["User.Read"],uri:"https://serverless-prologv7.azurewebsites.net/api/"}};function Dt(n){let e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Le(n,e){let t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}function Ph(n,e){let t=Dt(n);if(isNaN(t.getTime()))throw new RangeError("Invalid time value");let i=e?.format??"extended",r=e?.representation??"complete",o="",s="",a=i==="extended"?"-":"",l=i==="extended"?":":"";if(r!=="time"){let c=Le(t.getDate(),2),u=Le(t.getMonth()+1,2);o=`${Le(t.getFullYear(),4)}${a}${u}${a}${c}`}if(r!=="date"){let c=t.getTimezoneOffset();if(c!==0){let y=Math.abs(c),E=Le(Math.trunc(y/60),2),T=Le(y%60,2);s=`${c<0?"+":"-"}${E}:${T}`}else s="Z";let u=Le(t.getHours(),2),h=Le(t.getMinutes(),2),p=Le(t.getSeconds(),2),g=o===""?"":"T",w=[u,h,p].join(l);o=`${o}${g}${w}${s}`}return o}var wy=class{globalStore;constructor(e){this.globalStore=e}clear(){console.clear()}filterByLabel(e){o4(e,this.globalStore.cache).forEach(i=>{hg(i)})}filterByNamespace(...e){s4(e,this.globalStore.cache).forEach(i=>{hg(i)})}filterByLevel(e){a4(e,this.globalStore.cache).forEach(i=>{hg(i)})}renderAll(){this.globalStore.cache.forEach(e=>{hg(e)})}};var fg=class{config;pidCounter=1;labels=new Map;_listenerCounter=0;_levelsToListeners=new Map;_cache=[];constructor(e={}){this.config=e}get cache(){return this._cache}get configuration(){return this.config}get pid(){let e=this.pidCounter;return this.pidCounter++,e}get tools(){return new wy(this)}addLogToCache(e){this._cache.length<(this.config.cacheSize??300)&&this._cache.push(e)}clearCache(){this._cache=[]}getLabel(e){return this.labels.get(e)}setLabel(e,t){this.labels.set(e,t)}addListener(e,t){let i=this._listenerCounter+=1;return mg(v(v({},Wi.levels),this.config.levels??{}),e).forEach(o=>{this._levelsToListeners.has(o)?this._levelsToListeners.get(o).set(i,t):this._levelsToListeners.set(o,new Map([[i,t]]))}),i}removeListener(e){this._levelsToListeners.forEach(t=>{t.delete(e)})}getListeners(e){return Array.from(this._levelsToListeners.get(e)?.values()??[])}};function pg(n){let e=globalThis.$adzeGlobal;if(Kee(e))return e;let t=new fg(n);return globalThis.$adzeGlobal=t,t}function Kee(n){return n instanceof fg}function Rh(){return typeof window<"u"&&typeof window.location<"u"&&typeof window.navigator.userAgent<"u"&&!Yee()}function Yee(){return typeof Deno<"u"}function l4(n){return Rh()}function c4(){let n=!1;return Rh()&&(n=new URLSearchParams(globalThis.location.search).get("ADZE_ENV")==="test"),globalThis.$ADZE_ENV==="test"||n}function u4(){let n=globalThis;return l4(n)?n.navigator.userAgent.includes("Firefox"):!1}function Dh(n){return Object.prototype.toString.call(n)==="[object String]"}function Mh(n){return n!==null&&!isNaN(Number(n))}function vy(n){return VI.includes(n)}function d4(n){return m4.includes(n)}function h4(n){return FI.includes(n)}function LI(n){return n.every(e=>Dh(e))}function f4(n){return Array.isArray(n)&&n.length===3&&n[1]==="-"}function p4(){return Error().stack?.replace(/^Error\n/,`
`)}function g4(n){return Mh(n.activeLevel)?n.activeLevel:n.levels[n.activeLevel].level}var HI=gE(w4(),1),v4=HI.default??HI;function y4(n){return n.charAt(0).toUpperCase()+n.slice(1)}function zI(n){return Object.values(n).map(e=>e.level)}function jI(n,e,t){return n.filter(i=>i>=e&&i<=t)}function _4(n,e=!1,t){let r=(e&&t?9+t.length:9)-n.length,o=n;for(let s=0;s<=r;s+=1)o+=" ";return o}function C4(n,e){return e.reduce((t,i)=>v4[i](t),n)}function hg(n){n.data&&console[n.data.method](...n.data.message)}function E4(n){return n.filter(e=>e!=="")}function S4(n){return typeof n=="object"&&n!==null}function mg(n,e){if(e==="*")return Object.values(n).map(t=>t.level);if(Dh(e))return[n[e].level];if(Mh(e))return[e];if(f4(e)){if(LI(e)){let t=n[e[0]].level,i=n[e[2]].level;return jI(zI(n),t,i)}return jI(zI(n),e[0],e[2])}return Array.isArray(e)&&LI(e)?e.map(t=>n[t].level):e}function $I(n,e,t){return e.length===0?!1:n==="include"?!e.includes(t):e.includes(t)}function WI(n,e){return n.length===0?!1:n.length>0&&e.length===0?!0:!e.map(t=>n.includes(t)).includes(!0)}function qI(n,e){return n.length===0?!1:n.length>0&&e.length===0?!0:e.map(t=>n.includes(t)).includes(!0)}function o4(n,e){return e.filter(t=>t.data?.label?.name===n)}function s4(n,e){return e.filter(t=>t.data?.namespace?t.data.namespace.map(r=>n.includes(r)).includes(!0):!1)}function a4(n,e){return e.filter(t=>{let i=mg(t.configuration.levels,n);return t.data?.level===void 0?!1:$I("exclude",i,t.data.level)})}function T4(n){return n&&n.length>0?n.reduce((e,t)=>`${e}#${t} `,""):""}function k4(n){return n?`[${n.name}] `:""}function A4(n){return n!==void 0?`(Count: ${n}) `:""}function I4(n,e){return n!==void 0&&!n?`${e?"\u274C ":""}Assertion failed:`:""}function x4(n,e){return n!==void 0&&n?`${e?"\u2705 ":""}Expression passed:`:""}var P4=typeof self=="object"?self:globalThis,Qee=(n,e)=>{let t=(r,o)=>(n.set(o,r),r),i=r=>{if(n.has(r))return n.get(r);let[o,s]=e[r];switch(o){case 0:case-1:return t(s,r);case 1:{let a=t([],r);for(let l of s)a.push(i(l));return a}case 2:{let a=t({},r);for(let[l,c]of s)a[i(l)]=i(c);return a}case 3:return t(new Date(s),r);case 4:{let{source:a,flags:l}=s;return t(new RegExp(a,l),r)}case 5:{let a=t(new Map,r);for(let[l,c]of s)a.set(i(l),i(c));return a}case 6:{let a=t(new Set,r);for(let l of s)a.add(i(l));return a}case 7:{let{name:a,message:l}=s;return t(new P4[a](l),r)}case 8:return t(BigInt(s),r);case"BigInt":return t(Object(BigInt(s)),r)}return t(new P4[o](s),r)};return i},QI=n=>Qee(new Map,n)(0);var Oh="",{toString:Zee}={},{keys:Jee}=Object,vg=n=>{let e=typeof n;if(e!=="object"||!n)return[0,e];let t=Zee.call(n).slice(8,-1);switch(t){case"Array":return[1,Oh];case"Object":return[2,Oh];case"Date":return[3,Oh];case"RegExp":return[4,Oh];case"Map":return[5,Oh];case"Set":return[6,Oh]}return t.includes("Array")?[1,t]:t.includes("Error")?[7,t]:[2,t]},Sy=([n,e])=>n===0&&(e==="function"||e==="symbol"),Xee=(n,e,t,i)=>{let r=(s,a)=>{let l=i.push(s)-1;return t.set(a,l),l},o=s=>{if(t.has(s))return t.get(s);let[a,l]=vg(s);switch(a){case 0:{let u=s;switch(l){case"bigint":a=8,u=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return r([-1],s)}return r([a,u],s)}case 1:{if(l)return r([l,[...s]],s);let u=[],h=r([a,u],s);for(let p of s)u.push(o(p));return h}case 2:{if(l)switch(l){case"BigInt":return r([l,s.toString()],s);case"Boolean":case"Number":case"String":return r([l,s.valueOf()],s)}if(e&&"toJSON"in s)return o(s.toJSON());let u=[],h=r([a,u],s);for(let p of Jee(s))(n||!Sy(vg(s[p])))&&u.push([o(p),o(s[p])]);return h}case 3:return r([a,s.toISOString()],s);case 4:{let{source:u,flags:h}=s;return r([a,{source:u,flags:h}],s)}case 5:{let u=[],h=r([a,u],s);for(let[p,g]of s)(n||!(Sy(vg(p))||Sy(vg(g))))&&u.push([o(p),o(g)]);return h}case 6:{let u=[],h=r([a,u],s);for(let p of s)(n||!Sy(vg(p)))&&u.push(o(p));return h}}let{message:c}=s;return r([a,{name:l,message:c}],s)};return o},ZI=(n,{json:e,lossy:t}={})=>{let i=[];return Xee(!(e||t),!!e,new Map,i)(n),i};var JI=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?QI(ZI(n,e)):structuredClone(n):(n,e)=>QI(ZI(n,e));function XI(n,e,t,i){let c=e.exportValues(),{formatters:r,middleware:o=[]}=c,s=Bt(c,["formatters","middleware"]);return class extends n{_cfg=new tu(P(v({},JI(s)),{formatters:v({},r),middleware:[...o]}));_modifierData=JI(t);modifierQueue=[...i]}}function ex([n,e]){return`${n}s ${e/1e6}ms`}function R4(){return ex(Ty())}function Ty(n){let e=performance.now()*.001,t=Math.floor(e),i=Math.floor(e%1*1e9);if(n===void 0)return[t,i];let r=t-n[0],o=i-n[1];return o<0&&(r-=1,o+=1e9),[r,o]}var Gr=class{cfg;level;timestampFormatFunction=e=>Ph(e);constructor(e,t){this.cfg=e,this.level=t}get timestampFormatter(){return this.cfg.timestampFormatter?this.cfg.timestampFormatter:this.timestampFormatFunction}print(e,t,i){if(this.level.level>g4(this.cfg))return[];if(this.failsFilters(e))return[];if(e.assertion===!0)return[];if(e.if===!1)return[];if(e.method&&!h4(e.method)&&d4(e.method)&&vy(e.method))return i;let r=Rh()?this.formatBrowser(e,t,i):this.formatServer(e,t,i);return e.stacktrace&&r.push(e.stacktrace),r}failsFilters(e){return!!(this.failsLevelSelector()||this.failsNamespacesFilter(e)||this.failsLabelsFilter(e))}failsLevelSelector(){if(this.cfg.filters?.levels===void 0)return!1;let e=mg(this.cfg.levels,this.cfg.filters.levels.values);return!!$I(this.cfg.filters.levels.type,e,this.level.level)}failsNamespacesFilter(e){if(this.cfg.filters?.namespaces===void 0)return!1;if(this.cfg.filters.namespaces.values.length>0&&e.namespace===void 0)return!0;if(this.cfg.filters.namespaces.type==="include"){let i=e.namespace??[];return WI(this.cfg.filters.namespaces.values,i)}let t=e.namespace??[];return qI(this.cfg.filters.namespaces.values,t)}failsLabelsFilter(e){if(this.cfg.filters?.labels===void 0)return!1;if(this.cfg.filters.labels.values.length>0&&e.label===void 0)return!0;let t=e.label?[e.label.name]:[];return this.cfg.filters.labels.type==="include"?WI(this.cfg.filters.labels.values,t):qI(this.cfg.filters.labels.values,t)}};var ete={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},D4=(n,e,t)=>{let i,r=ete[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function ky(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var tte={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},nte={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ite={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M4={date:ky({formats:tte,defaultWidth:"full"}),time:ky({formats:nte,defaultWidth:"full"}),dateTime:ky({formats:ite,defaultWidth:"full"})};var rte={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},O4=(n,e,t,i)=>rte[n];function Nh(n){return(e,t)=>{let i=t?.context?String(t.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;r=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return r[o]}}var ote={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ste={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ate={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lte={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},ute={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dte=(n,e)=>{let t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},N4={ordinalNumber:dte,era:Nh({values:ote,defaultWidth:"wide"}),quarter:Nh({values:ste,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Nh({values:ate,defaultWidth:"wide"}),day:Nh({values:lte,defaultWidth:"wide"}),dayPeriod:Nh({values:cte,defaultWidth:"wide",formattingValues:ute,defaultFormattingWidth:"wide"})};function Lh(n){return(e,t={})=>{let i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],o=e.match(r);if(!o)return null;let s=o[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?fte(a,h=>h.test(s)):hte(a,h=>h.test(s)),c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;let u=e.slice(s.length);return{value:c,rest:u}}}function hte(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function fte(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function L4(n){return(e,t={})=>{let i=e.match(n.matchPattern);if(!i)return null;let r=i[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(r.length);return{value:s,rest:a}}}var mte=/^(\d+)(th|st|nd|rd)?/i,pte=/\d+/i,gte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bte={any:[/^b/i,/^(a|c)/i]},wte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},vte={any:[/1/i,/2/i,/3/i,/4/i]},yte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_te={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ete={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Ste={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Tte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},F4={ordinalNumber:L4({matchPattern:mte,parsePattern:pte,valueCallback:n=>parseInt(n,10)}),era:Lh({matchPatterns:gte,defaultMatchWidth:"wide",parsePatterns:bte,defaultParseWidth:"any"}),quarter:Lh({matchPatterns:wte,defaultMatchWidth:"wide",parsePatterns:vte,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Lh({matchPatterns:yte,defaultMatchWidth:"wide",parsePatterns:_te,defaultParseWidth:"any"}),day:Lh({matchPatterns:Cte,defaultMatchWidth:"wide",parsePatterns:Ete,defaultParseWidth:"any"}),dayPeriod:Lh({matchPatterns:Ste,defaultMatchWidth:"any",parsePatterns:Tte,defaultParseWidth:"any"})};var tx={code:"en-US",formatDistance:D4,formatLong:M4,formatRelative:O4,localize:N4,match:F4,options:{weekStartsOn:0,firstWeekContainsDate:1}};var kte={};function tl(){return kte}var Ate=Math.pow(10,8)*24*60*60*1e3,x4e=-Ate,Ay=6048e5,V4=864e5;var Ite=3600;var B4=Ite*24,P4e=B4*7,xte=B4*365.2425,Pte=xte/12,R4e=Pte*3;function nx(n){let e=Dt(n);return e.setHours(0,0,0,0),e}function ix(n){let e=Dt(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function U4(n,e){let t=nx(n),i=nx(e),r=+t-ix(t),o=+i-ix(i);return Math.round((r-o)/V4)}function mr(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function H4(n){let e=Dt(n),t=mr(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function z4(n){let e=Dt(n);return U4(e,H4(e))+1}function Ns(n,e){let t=tl(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=Dt(n),o=r.getDay(),s=(o<i?7:0)+o-i;return r.setDate(r.getDate()-s),r.setHours(0,0,0,0),r}function nu(n){return Ns(n,{weekStartsOn:1})}function Iy(n){let e=Dt(n),t=e.getFullYear(),i=mr(n,0);i.setFullYear(t+1,0,4),i.setHours(0,0,0,0);let r=nu(i),o=mr(n,0);o.setFullYear(t,0,4),o.setHours(0,0,0,0);let s=nu(o);return e.getTime()>=r.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function j4(n){let e=Iy(n),t=mr(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),nu(t)}function $4(n){let e=Dt(n),t=+nu(e)-+j4(e);return Math.round(t/Ay)+1}function xy(n,e){let t=Dt(n),i=t.getFullYear(),r=tl(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=mr(n,0);s.setFullYear(i+1,0,o),s.setHours(0,0,0,0);let a=Ns(s,e),l=mr(n,0);l.setFullYear(i,0,o),l.setHours(0,0,0,0);let c=Ns(l,e);return t.getTime()>=a.getTime()?i+1:t.getTime()>=c.getTime()?i:i-1}function W4(n,e){let t=tl(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=xy(n,e),o=mr(n,0);return o.setFullYear(r,0,i),o.setHours(0,0,0,0),Ns(o,e)}function q4(n,e){let t=Dt(n),i=+Ns(t,e)-+W4(t,e);return Math.round(i/Ay)+1}var Ls={y(n,e){let t=n.getFullYear(),i=t>0?t:1-t;return Le(e==="yy"?i%100:i,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):Le(t+1,2)},d(n,e){return Le(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Le(n.getHours()%12||12,e.length)},H(n,e){return Le(n.getHours(),e.length)},m(n,e){return Le(n.getMinutes(),e.length)},s(n,e){return Le(n.getSeconds(),e.length)},S(n,e){let t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return Le(r,e.length)}};var Fh={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rx={G:function(n,e,t){let i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return Ls.y(n,e)},Y:function(n,e,t,i){let r=xy(n,i),o=r>0?r:1-r;if(e==="YY"){let s=o%100;return Le(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Le(o,e.length)},R:function(n,e){let t=Iy(n);return Le(t,e.length)},u:function(n,e){let t=n.getFullYear();return Le(t,e.length)},Q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Le(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Le(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){let i=n.getMonth();switch(e){case"M":case"MM":return Ls.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){let i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Le(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){let r=q4(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):Le(r,e.length)},I:function(n,e,t){let i=$4(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Le(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Ls.d(n,e)},D:function(n,e,t){let i=z4(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Le(i,e.length)},E:function(n,e,t){let i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){let r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Le(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){let r=n.getDay(),o=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Le(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){let i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return Le(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){let r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){let i=n.getHours(),r;switch(i===12?r=Fh.noon:i===0?r=Fh.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){let i=n.getHours(),r;switch(i>=17?r=Fh.evening:i>=12?r=Fh.afternoon:i>=4?r=Fh.morning:r=Fh.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return Ls.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Ls.H(n,e)},K:function(n,e,t){let i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Le(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Le(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Ls.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Ls.s(n,e)},S:function(n,e){return Ls.S(n,e)},X:function(n,e,t){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return K4(i);case"XXXX":case"XX":return iu(i);case"XXXXX":case"XXX":default:return iu(i,":")}},x:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"x":return K4(i);case"xxxx":case"xx":return iu(i);case"xxxxx":case"xxx":default:return iu(i,":")}},O:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+G4(i,":");case"OOOO":default:return"GMT"+iu(i,":")}},z:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+G4(i,":");case"zzzz":default:return"GMT"+iu(i,":")}},t:function(n,e,t){let i=Math.trunc(n.getTime()/1e3);return Le(i,e.length)},T:function(n,e,t){let i=n.getTime();return Le(i,e.length)}};function G4(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),o=i%60;return o===0?t+String(r):t+String(r)+e+Le(o,2)}function K4(n,e){return n%60===0?(n>0?"-":"+")+Le(Math.abs(n)/60,2):iu(n,e)}function iu(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),r=Le(Math.trunc(i/60),2),o=Le(i%60,2);return t+r+e+o}var Y4=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Q4=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Rte=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return Y4(n,e);let o;switch(i){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",Y4(i,e)).replace("{{time}}",Q4(r,e))},Z4={p:Q4,P:Rte};var Dte=/^D+$/,Mte=/^Y+$/,Ote=["D","DD","YY","YYYY"];function J4(n){return Dte.test(n)}function X4(n){return Mte.test(n)}function eB(n,e,t){let i=Nte(n,e,t);if(console.warn(i),Ote.includes(n))throw new RangeError(i)}function Nte(n,e,t){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function tB(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function nB(n){if(!tB(n)&&typeof n!="number")return!1;let e=Dt(n);return!isNaN(Number(e))}var Lte=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vte=/^'([^]*?)'?$/,Bte=/''/g,Ute=/[a-zA-Z]/;function iB(n,e,t){let i=tl(),r=t?.locale??i.locale??tx,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=Dt(n);if(!nB(a))throw new RangeError("Invalid time value");let l=e.match(Fte).map(u=>{let h=u[0];if(h==="p"||h==="P"){let p=Z4[h];return p(u,r.formatLong)}return u}).join("").match(Lte).map(u=>{if(u==="''")return{isToken:!1,value:"'"};let h=u[0];if(h==="'")return{isToken:!1,value:Hte(u)};if(rx[h])return{isToken:!0,value:u};if(h.match(Ute))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});r.localize.preprocessor&&(l=r.localize.preprocessor(a,l));let c={firstWeekContainsDate:o,weekStartsOn:s,locale:r};return l.map(u=>{if(!u.isToken)return u.value;let h=u.value;(!t?.useAdditionalWeekYearTokens&&X4(h)||!t?.useAdditionalDayOfYearTokens&&J4(h))&&eB(h,e,String(n));let p=rx[h[0]];return p(a,h,r.localize,c)}).join("")}function Hte(n){let e=n.match(Vte);return e?e[1].replace(Bte,"'"):n}var Py=class extends Gr{timestampFormatFunction=e=>iB(e,"dd/MMM/yyyy:HH:mm:ss xx");formatBrowser(e,t,i){return this.formatMessage(e,t,i)}formatServer(e,t,i){return this.formatMessage(e,t,i)}formatMessage(e,t,i){this.cfg.meta.hostname===void 0&&console.warn(new Error("Adze: 'hostname' is required for the common log format. Please provide this value in your log's meta data."));let r=this.cfg.meta.hostname,o=this.cfg.meta.ident??"-",s=this.cfg.meta.user??"-",a=i[0];return[`${r} ${o} ${s} [${t}] ${a}`]}};var rB=Py;function oB(n){return typeof n.name=="string"&&typeof n.hostname=="string"}var Ry=class extends Gr{timestampFormatFunction=e=>Ph(e);formatBrowser(e,t,i){return this.formatMessage(e,t,i)}formatServer(e,t,i){return this.formatMessage(e,t,i)}formatMessage(e,t,i){let r=pg(),o=[...i],s=o.shift();if(oB(this.cfg.meta)){let a=this.cfg.meta,{src:l,err:c,req_id:u,req:h,res:p,latency:g,hostname:w,name:y}=a,E=Bt(a,["src","err","req_id","req","res","latency","hostname","name"]),{namespace:T,label:x}=e,V={v:1,level:this.level.level,levelName:this.level.levelName,name:y,hostname:w,msg:s,args:o,pid:r.pid,time:t,meta:Object.keys(E).length>0?E:void 0,namespace:T,label:x?.name,src:l,err:c,req_id:u,req:h,res:p,latency:g};return[JSON.stringify(V)]}return console.warn(new Error("Adze: Required fields are missing from the log meta for generating a JSON log.")),[...o]}};var sB=Ry;var Dy=class extends Gr{formatBrowser(e,t,i){let r=this.formatLeader(),o=this.formatMeta(e,t);return this.cfg.withEmoji?[r,"font-size: 12px;",this.level.style,o,...i]:[r,this.level.style,o,...i]}formatServer(e,t,i){let r=[],s=`${_4(this.formatLeader(!1),this.cfg.withEmoji,this.level.emoji)} `,a=this.formatMeta(e,t),l=C4(s,this.level.terminalStyle);return r.push(l),a!==""&&r.push(a),[l,a,...i]}formatLeader(e=!0){let t=e?"%c":"",i=" "+y4(this.level.levelName);return this.cfg.withEmoji?`${t}${this.formatEmoji(e)}${t}${i}`:`${t}${i}`}formatEmoji(e){let t=e?" ":"";return this.level.emoji?`${this.level.emoji}${t}`:""}formatMeta(e,t){let i=this.cfg.showTimestamp?`${t} `:"",r=T4(e.namespace),o=k4(e.label),s=this.formatTime(e),a=A4(e.label?.count),l=I4(e.assertion,this.cfg.withEmoji),c=x4(e.if,this.cfg.withEmoji),u=l!==""?l:c!==""?c:"";return i+r+o+s+a+u}formatTime(e){let t=this.cfg.withEmoji?"\u23F1 ":"Time elapsed: ";return e.timeNow?`(${t}${e.timeNow})`:e.label?.timeElapsed?`(${t}${e.label.timeElapsed})`:""}};var ox=Dy;var yg=class extends Gr{timestampFormatFunction=e=>Ph(e);formatBrowser(e,t,i){return this.formatMessage(t,e,i)}formatServer(e,t,i){return this.formatMessage(t,e,i)}formatMessage(e,t,i){let r="",{appname:o,hostname:s,port:a}=this.cfg.meta,l=Mh(a)?`/${a}`:"",c=Dh(o)?`${o}${l}`:"",u=Dh(s)?` on ${s}: `:"",h=this.formatNamespace(t.namespace),p=t.label?`[${t.label.name}] `:"";return r=`${c}${u}${h}${p}`,[`[${e}] ${this.level.levelName.toUpperCase()}: ${r}${i[0]} `,i.map(g=>S4(g)?JSON.stringify(g):g).slice(1).join(" ")]}formatNamespace(e){return e&&e.length>0?`${e.reduce((i,r,o)=>o===e.length-1?`${i}${r}`:`${i}${r}/`,"")} `:""}};var FI=["group","groupCollapsed"],aB=["dir","dirxml","table",...FI],VI=["error","warn","info","log","debug",...aB],BI=["clear","groupEnd"],m4=[...aB,...BI],R6e=[...VI,...BI];var Wi={activeLevel:"log",cache:!1,cacheSize:300,dump:!1,format:"pretty",meta:{},middleware:[],showTimestamp:!1,silent:!1,withEmoji:!1,levels:{alert:zte(),error:jte(),warn:$te(),info:Wte(),fail:qte(),success:Gte(),log:Kte(),debug:Yte(),verbose:Qte()},formatters:{default:ox,pretty:ox,standard:yg,common:rB,json:sB}};function zte(n={}){return v({levelName:"alert",level:0,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fc8585, #fc2323); color: #fff; border-color: #b70101;",terminalStyle:["white","bold","bgRed"],method:"error",emoji:"\u{1F6A8}"},n)}function jte(n={}){return v({levelName:"error",level:1,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fff, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"error",emoji:"\u{1F525}"},n)}function $te(n={}){return v({levelName:"warn",level:2,style:`font-size: 12px; border-radius: 4px;  background: linear-gradient(to right, #fff, #fff0a8); color: #715100; border-color: #e3d696; padding-right: ${u4()?"44px":"30px"};`,terminalStyle:["white","bgYellow"],method:"warn",emoji:"\u{1F514}"},n)}function Wte(n={}){return v({levelName:"info",level:3,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #d8ebff, #b2d7ff); color: #465464; border-color: #96b5d7;",terminalStyle:["white","bgBlue"],method:"info",emoji:"\u2139\uFE0F"},n)}function qte(n={}){return v({levelName:"fail",level:4,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #ffe8e8, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"info",emoji:"\u274C"},n)}function Gte(n={}){return v({levelName:"success",level:5,style:"font-size: 12px; border-radius: 4px; padding-right: 22px; background: linear-gradient(to right, #e6f6e4, #ceedc9); color: #4e594d; border-color: #b7d1b3;",terminalStyle:["white","bgGreen"],method:"info",emoji:"\u{1F389}"},n)}function Kte(n={}){return v({levelName:"log",level:6,style:"font-size: 12px; border-radius: 4px; padding-right: 51px; background: linear-gradient(to right, #ecedef, #d9dce0); color: #333435; border-color: #bfc1c5;",terminalStyle:["white","bgBlackBright"],method:"log",emoji:"\u{1FAB5}"},n)}function Yte(n={}){return v({levelName:"debug",level:7,style:"font-size: 12px; padding-right: 36px; border-right: 1px solid #d9dce0; color: #465464; border-color: #999999;",terminalStyle:["white","bgBlack"],method:"debug",emoji:"\u{1F41E}"},n)}function Qte(n={}){return v({levelName:"verbose",level:8,style:"font-size: 12px; padding-right: 22px; color: #999999;",terminalStyle:["black","italic"],method:"debug",emoji:"\u{1F4AC}"},n)}var tu=class{logCfg;glblCfg;constructor(e){this.logCfg=e??{},this.glblCfg=globalThis.$adzeGlobal?.configuration}updateConfiguration(e){this.logCfg=e}get activeLevel(){return this.glblCfg?.activeLevel??this.logCfg.activeLevel??Wi.activeLevel}set activeLevel(e){this.logCfg.activeLevel=e}get cache(){return this.glblCfg?.cache??this.logCfg.cache??Wi.cache}set cache(e){this.logCfg.cache=e}get cacheSize(){return this.glblCfg?.cacheSize??this.logCfg.cacheSize??Wi.cacheSize}set cacheSize(e){this.logCfg.cacheSize=e}get dump(){return this.glblCfg?.dump??this.logCfg.dump??Wi.dump}set dump(e){this.logCfg.dump=e}get meta(){return v(v({},this.logCfg.meta),this.glblCfg?.meta)}set meta(e){this.logCfg.meta=e}get silent(){return this.glblCfg?.silent??this.logCfg.silent??Wi.silent}set silent(e){this.logCfg.silent=e}get showTimestamp(){return this.glblCfg?.showTimestamp??this.logCfg.showTimestamp??Wi.showTimestamp}set showTimestamp(e){this.logCfg.showTimestamp=e}get withEmoji(){return this.glblCfg?.withEmoji??this.logCfg.withEmoji??Wi.withEmoji}set withEmoji(e){this.logCfg.withEmoji=e}get format(){return this.glblCfg?.format??this.logCfg.format??Wi.format}set format(e){this.logCfg.format=e}get levels(){return v(v(v({},Wi.levels),this.logCfg.levels??{}),this.glblCfg?.levels??{})}set levels(e){this.logCfg.levels=e}get middleware(){return[...this.glblCfg?.middleware??[],...this.logCfg.middleware??[]]}set middleware(e){this.logCfg.middleware=e}get filters(){return this.glblCfg?.filters??this.logCfg.filters}set filters(e){this.logCfg.filters=e}get timestampFormatter(){return this.glblCfg?.timestampFormatter??this.logCfg.timestampFormatter}set timestampFormatter(e){this.logCfg.timestampFormatter=e}get formatters(){return v(v(v({},Wi.formatters),this.logCfg.formatters??{}),this.glblCfg?.formatters??{})}set formatters(e){this.logCfg.formatters=e}exportValues(){return{activeLevel:this.logCfg.activeLevel,cache:this.logCfg.cache,cacheSize:this.logCfg.cacheSize,dump:this.logCfg.dump,meta:this.logCfg.meta,silent:this.logCfg.silent,showTimestamp:this.logCfg.showTimestamp,withEmoji:this.logCfg.withEmoji,format:this.logCfg.format,levels:this.logCfg.levels,middleware:this.logCfg.middleware,filters:this.logCfg.filters,timestampFormatter:this.logCfg.timestampFormatter,formatters:this.logCfg.formatters}}};function Zte(n){return typeof n=="function"}var My=class n{globalStore;_cfg;_modifierData;_data;modifierQueue=[];constructor(e={},t){this.globalStore=pg(e),this._modifierData=t??{},this._cfg=new tu(e),this.doHook(i=>{i.constructed&&i.constructed(this)})}get data(){return this._data}get modifierData(){return this._modifierData}get configuration(){return this._cfg}alert(...e){this.terminate("alert",e)}static alert(...e){new this().alert(...e)}error(...e){this.terminate("error",e)}static error(...e){new this().error(...e)}warn(...e){this.terminate("warn",e)}static warn(...e){new this().warn(...e)}info(...e){this.terminate("info",e)}static info(...e){new this().info(...e)}fail(...e){this.terminate("fail",e)}static fail(...e){new this().fail(...e)}success(...e){this.terminate("success",e)}static success(...e){new this().success(...e)}log(...e){this.terminate("log",e)}static log(e,...t){new this().log(e,...t)}debug(...e){this.terminate("debug",e)}static debug(...e){new this().debug(...e)}verbose(...e){this.terminate("verbose",e)}static verbose(...e){new this().verbose(...e)}clear(){console.clear()}static clear(){console.clear()}clr(){console.clear()}static clr(){console.clear()}custom(e,...t){return this._cfg.levels[e]?(this.terminate(e,t),this):(console.warn(new Error("Custom log level not found in configuration.")),this)}static custom(e,...t){return new this().custom(e,...t)}seal(e){return e&&this._cfg.updateConfiguration(e),XI(n,this._cfg,this.modifierData,this.modifierQueue)}static seal(e){return new this().seal(e)}sealTag(e,t){return this._cfg=new tu(v(v({},this._cfg.exportValues()),t)),(i,...r)=>{let o=String.raw({raw:i},...r),s=XI(n,this._cfg,this.modifierData,this.modifierQueue),a=e;Zte(s[a])&&s[a](o)}}static sealTag(e,t){return new this().sealTag(e,t)}thread(e,t){this.runModifierQueue(),this._modifierData.label&&(this._modifierData.label.context||(this._modifierData.label.context={}),this._modifierData.label.context=P(v({},this._modifierData.label.context),{[e]:t}))}static thread(e,t){new this().thread(e,t)}assert(e){return this.modifierQueue.push(["assert",t=>(t.assertion=e,t)]),this}static assert(e){return new this().assert(e)}get closeThread(){return this.modifierQueue.push(["closeThread",e=>(e.label?.context&&(e.label.context=void 0),e)]),this}static get closeThread(){return new this().closeThread}get count(){return this.modifierQueue.push(["count",e=>(e.label&&(e.label.count=e.label.count!==void 0?e.label.count+1:1),e)]),this}static get count(){return new this().count}get countClear(){return this.modifierQueue.push(["countClear",e=>(e.label&&delete e.label.count,e)]),this}static get countClear(){return new this().countClear}get countReset(){return this.modifierQueue.push(["countReset",e=>(e.label&&(e.label.count=0),e)]),this}static get countReset(){return new this().countReset}get dir(){return this.modifierQueue.push(["dir",e=>(e.method="dir",e)]),this}static get dir(){return new this().dir}get dirxml(){return this.modifierQueue.push(["dirxml",e=>(e.method="dirxml",e)]),this}static get dirxml(){return new this().dirxml}get dump(){return this.modifierQueue.push(["dump",(e,t)=>(t._cfg.dump=!0,e)]),this}static get dump(){return new this().dump}format(e){return this.modifierQueue.push(["format",(t,i)=>Object.keys(i._cfg.formatters).includes(e)?(i._cfg.format=e,t):(console.warn(new Error(`Adze: Formatter "${e}" not found in configuration.`)),t)]),this}static format(e){return new this().format(e)}get group(){return this.modifierQueue.push(["group",e=>(e.method="group",e)]),this}static get group(){return new this().group}get groupCollapsed(){return this.modifierQueue.push(["groupCollapsed",e=>(e.method="groupCollapsed",e)]),this}static get groupCollapsed(){return new this().groupCollapsed}get groupEnd(){return this.modifierQueue.push(["groupEnd",e=>(e.method="groupEnd",e)]),this}static get groupEnd(){return new this().groupEnd}if(e){return this.modifierQueue.push(["if",t=>(t.if=e,t)]),this}static if(e){return new this().if(e)}test(e){return this.if(e)}static test(e){return new this().if(e)}label(e){return this.modifierQueue.unshift(["label",t=>{let i=this.globalStore.getLabel(e)??{name:e};return t.label=i,this.globalStore.setLabel(e,i),t}]),this}static label(e){return new this().label(e)}meta(e){return this.modifierQueue.push(["meta",(t,i)=>(i._cfg.meta=v(v({},i._cfg.meta),e),t)]),this}static meta(e){return new this().meta(e)}namespace(...e){return this.modifierQueue.push(["namespace",t=>{let i=t.namespace??[];return t.namespace=i.length>0?[...i,...e]:e,t}]),this}static namespace(...e){return new this().namespace(...e)}ns(...e){return this.namespace(...e)}static ns(...e){return new this().namespace(...e)}get silent(){return this.modifierQueue.push(["silent",(e,t)=>(t._cfg.silent=!0,e)]),this}static get silent(){return new this().silent}get table(){return this.modifierQueue.push(["table",e=>(e.method="table",e)]),this}static get table(){return new this().table}get time(){return this.modifierQueue.push(["time",e=>{let t=Ty();return e.label&&(e.label.timeStart=t),e}]),this}static get time(){return new this().time}get timeEnd(){return this.modifierQueue.push(["timeEnd",e=>(e.label?.timeStart&&(e.label.timeElapsed=ex(Ty(e.label.timeStart))),e)]),this}static get timeEnd(){return new this().timeEnd}get timeNow(){return this.modifierQueue.push(["timeNow",e=>(e.timeNow=R4(),e)]),this}static get timeNow(){return new this().timeNow}get timestamp(){return this.modifierQueue.push(["timestamp",(e,t)=>(t._cfg.showTimestamp=!0,e)]),this}static get timestamp(){return new this().timestamp}get trace(){return this.modifierQueue.push(["trace",e=>(e.stacktrace=p4(),e)]),this}static get trace(){return new this().trace}get withEmoji(){return this.modifierQueue.push(["withEmoji",(e,t)=>(t._cfg.withEmoji=!0,e)]),this}static get withEmoji(){return new this().withEmoji}print(e){c4()||e.silent||e.message.length<1||(vy(e.method)?console[e.method](...e.message):console[e.method]())}terminate(e,t){this.doHook(x=>{x.beforeTerminated&&x.beforeTerminated(this,e,t)}),this.runModifierQueue();let i=this.getLevelConfig(e),r=this.selectFormatter(this._cfg.format),o=new r(this._cfg,i),s=o.timestampFormatter(new Date),a=E4(o.print(this.modifierData,s,t));this._cfg.dump&&this.modifierData.label?.context&&a.push(this.modifierData.label.context),this.doHook(x=>{x.beforeFormatApplied&&(a=x.beforeFormatApplied(this,this._cfg.format,a))});let{activeLevel:l,cache:c,cacheSize:u,dump:h,format:p,meta:g,showTimestamp:w,silent:y,withEmoji:E}=this._cfg,T=P(v(v({activeLevel:l,cache:c,cacheSize:u,dump:h,format:p,meta:g,showTimestamp:w,silent:y,withEmoji:E},i),this._modifierData),{terminator:e,args:t,timestamp:s,message:a});this.doHook(x=>{x.afterFormatApplied&&x.afterFormatApplied(this,this._cfg.format,a)}),this._data=T,this._cfg.cache&&this.globalStore.addLogToCache(this),this.doHook(x=>{x.beforePrint&&x.beforePrint(this)}),this.print(this._data),this.doHook(x=>{x.afterTerminated&&x.afterTerminated(this,e,t)}),this.globalStore.getListeners(i.level).forEach(x=>{x(this)})}selectFormatter(e){return this._cfg.formatters[e]}getLevelConfig(e){return this._cfg.levels[e]}runModifierQueue(){this.modifierQueue.forEach(([e,t])=>{let i=t(this.modifierData,this);this.doHook(r=>{r.beforeModifierApplied&&r.beforeModifierApplied(this,e,i)}),this._modifierData=i,this.doHook(r=>{r.afterModifierApplied&&r.afterModifierApplied(this,e,i)})})}doHook(e){this._cfg.middleware?.forEach(t=>{e(t)})}};var Jte=["black","red","green","yellow","blue","magenta","cyan","white","gray","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","reset","bold","dim","italic","underline","inverse","hidden","strikethrough"],G6e=Object.freeze(Jte);var Oy=My;var ru=Oy.namespace("PostDataService").seal(),nl=class n{constructor(e){this.http=e}baseUrl=fr.apiUrl;basePostUrl=this.baseUrl+"posts";getPosts(){return this.http.get(this.basePostUrl).pipe(ct(()=>ru.label("getPosts").info("Posts fetched successfully")),me(e=>e),Tn(this.handleError))}getPostById(e){return this.http.get(this.basePostUrl+"/id/"+e).pipe(ct(()=>ru.label("getPostById").info(`post id ${e} fetched successfully`)),Tn(this.handleError))}getPostBySlug(e){return this.http.get(this.basePostUrl+"/slug/"+e).pipe(ct(()=>ru.label("getPostBySlug").info(`post ${e} fetched successfully`)),Tn(this.handleError))}insertPost(e){return this.http.post(this.basePostUrl,e).pipe(ct(t=>ru.label("insertPost").info("status: "+t.status)),me(t=>t.post),Tn(this.handleError))}updatePost(e){return this.http.put(this.basePostUrl+"/"+e.id,e).pipe(ct(t=>ru.label("updatePost").info("Backend response status: "+t.status,t)),me(t=>t.post),Tn(this.handleError))}deletePost(e){return this.http.delete(this.basePostUrl+"/"+e).pipe(ct(()=>ru.label("deletePost").info(`post id ${e} deleted successfully`)),Tn(this.handleError))}handleError(e){if(ru.label("handleError").error("server error:",e),e.error instanceof Error){let t=e.error.message;return Jo(()=>new Error(t))}return Jo(()=>new Error(e.message||"Node.js server error"))}static \u0275fac=function(t){return new(t||n)(W(pk))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};function Xte(n,e){if(n&1){let t=hs();d(0,"select",14),Ea("ngModelChange",function(r){_i(t);let o=cn();return sc(o.blogFilterCategory,r)||(o.blogFilterCategory=r),Ci(r)}),d(1,"option"),m(2,"Category"),f(),d(3,"option",15),m(4,"Angular"),f(),d(5,"option",16),m(6,"TypeScript"),f(),d(7,"option",17),m(8,"JavaScript"),f(),d(9,"option",18),m(10,"CSharp"),f(),d(11,"option",19),m(12,".Net"),f(),d(13,"option",20),m(14,"Azure"),f()()}if(n&2){let t=cn();Ca("ngModel",t.blogFilterCategory)}}function ene(n,e){n&1&&m(0," Angular ")}function tne(n,e){n&1&&m(0," TypeScript ")}function nne(n,e){n&1&&m(0," JavaScript ")}function ine(n,e){n&1&&m(0," C-Sharp ")}function rne(n,e){n&1&&m(0," .Net ")}function one(n,e){n&1&&m(0," Azure ")}function sne(n,e){if(n&1&&(d(0,"a",27),m(1),f()),n&2){let t=e.$implicit;go("data-open","modal-"+t.trim().replace(" ","-")),Oe(),Ur(" ",t.trim()," ")}}function ane(n,e){if(n&1&&(d(0,"div",23),ya(1,sne,2,2,"a",27,va),f()),n&2){let t=cn().$implicit;Oe(),_a(t.tags.split(";"))}}function lne(n,e){if(n&1){let t=hs();m(0," \u25CF "),d(1,"a",25),M("click",function(){_i(t);let r=cn().$implicit,o=cn();return Ci(o.viewPost(r.title))}),m(2),f()}if(n&2){let t=cn().$implicit,i=cn();Oe(2),Ur(" ",i.stripHtmlTags(t.content)," ")}}function cne(n,e){if(n&1){let t=hs();d(0,"div",13)(1,"div",21)(2,"a",22),M("click",function(){let r=_i(t).$implicit,o=cn();return Ci(o.editPost(r.title))}),Hn(3,ene,1,0)(4,tne,1,0)(5,nne,1,0)(6,ine,1,0)(7,rne,1,0)(8,one,1,0),f()(),Hn(9,ane,3,0,"div",23),d(10,"div",24)(11,"a",25),M("click",function(){let r=_i(t).$implicit,o=cn();return Ci(o.viewPost(r.title))}),d(12,"strong"),m(13),f()(),Hn(14,lne,3,1,"a",26),f()()}if(n&2){let t,i=e.$implicit,r=cn();Oe(3),bo((t=i.category)===r.PostCategoryEnum.ANGULAR?3:t===r.PostCategoryEnum.TYPESCRIPT?4:t===r.PostCategoryEnum.JAVASCRIPT?5:t===r.PostCategoryEnum.CSHARP?6:t===r.PostCategoryEnum.DOTNET?7:t===r.PostCategoryEnum.AZURE?8:-1),Oe(6),bo(i.tags.trim().length>0?9:-1),Oe(4),Ur(" ",i.title," "),Oe(),bo(i.content!==""?14:-1)}}var Ny=class n extends ue{postDataService=L(nl);authService=L(xh);posts=[];blogFilterCategoryVisible=!1;blogFilterCategory;blogFilterText="";PostColorEnum=NI;PostCategoryEnum=dg;ngOnInit(){this.getPosts()}getPosts(){this.postDataService.getPosts().subscribe({next:e=>{this.posts=e},error:e=>{console.log(e)},complete:()=>{}})}editPost(e){if(!this.authService.isLoggedIn){this.viewPost(e);return}let t=e.toLocaleLowerCase().replace(/\s+/g,"_");this.navigateWithAnimation(["/editor",t])}viewPost(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"_");this.navigateWithAnimation(["/viewer",t])}getSlug(e){return e.toLocaleLowerCase().replace(/\s+/g,"_")}toggleBlogFilterView(){this.blogFilterCategoryVisible=!this.blogFilterCategoryVisible,this.blogFilterCategoryVisible||(this.blogFilterCategory=void 0)}stripHtmlTags(e){var t=new DOMParser().parseFromString(e,"text/html");return t.body.textContent||""}get filteredPosts(){var e=this.posts;return this.blogFilterText&&(e=e.filter(t=>t.title.toLowerCase().includes(this.blogFilterText.toLowerCase())||t.content.toLowerCase().includes(this.blogFilterText.toLowerCase()))),console.log(this.blogFilterCategory),this.blogFilterCategory&&(console.log("filtering"),e=e.filter(t=>t.category==this.blogFilterCategory)),e}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vi(n)))(i||n)}})();static \u0275cmp=ee({type:n,selectors:[["app-blog"]],standalone:!0,features:[oe,re],decls:17,vars:3,consts:[["id","blog"],[1,"spacer"],[1,"row"],[1,"small-16","columns"],[2,"float","left"],[2,"float","right"],[1,"switch"],["type","checkbox",1,"check",3,"change","value"],[1,"sliding","round"],["type","text","placeholder","Search",1,"filterText",3,"ngModelChange","ngModel"],[1,"filterCategory",3,"ngModel"],[1,"small-16","columns","list"],[1,"table","table-striped"],[1,"trow"],[1,"filterCategory",3,"ngModelChange","ngModel"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"tcol","first","hide-on-mobile"],[1,"button","purple-tint1-button","hollow-button","shadow-button",3,"click"],[1,"tcol","last","hide-on-mobile"],[1,"tcol","adjust"],[1,"link",3,"click"],[1,"link"],[1,"button","hollow-button"]],template:function(t,i){t&1&&(d(0,"section",0),b(1,"hr",1),d(2,"div",2)(3,"header",3)(4,"div",4)(5,"h2"),m(6,"Blog"),f()(),d(7,"div",5)(8,"label",6)(9,"input",7),M("change",function(){return i.toggleBlogFilterView()}),f(),b(10,"span",8),f(),d(11,"input",9),Ea("ngModelChange",function(o){return sc(i.blogFilterText,o)||(i.blogFilterText=o),o}),f(),Hn(12,Xte,15,1,"select",10),f()(),d(13,"div",11)(14,"div",12),ya(15,cne,15,4,"div",13,va),f()()()()),t&2&&(Oe(9),Ti("value",i.blogFilterCategoryVisible),Oe(2),Ca("ngModel",i.blogFilterText),Oe(),bo(i.blogFilterCategoryVisible?12:-1),Oe(3),_a(i.filteredPosts))},dependencies:[Ht,yn,ov,sv,Dd,Md,iv,cp],encapsulation:2})};var Ly=class n extends ue{constructor(){super()}ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-projects"]],standalone:!0,features:[oe,re],decls:369,vars:0,consts:[["id","projects"],[1,"spacer"],[1,"row"],[1,"small-16","columns"],[1,"table","table-striped"],[1,"trow"],[1,"tcol","first","hide-on-mobile"],[1,"button","purple-tint1-button","hollow-button","shadow-button",3,"click"],[1,"badge"],[1,"tcol","last","hide-on-mobile"],["data-open","modal-dot-net",1,"button","hollow-button"],["data-open","modal-sql-server",1,"button","hollow-button"],["data-open","modal-digipass",1,"button","hollow-button"],["data-open","modal-on-premise",1,"button","hollow-button"],[1,"tcol","adjust"],["src","assets/images/icons/icon-nuclear.svg","alt","",1,"width-20"],[1,"link",3,"click"],["data-open","modal-dot-net-core",1,"button","hollow-button"],["data-open","modal-okta",1,"button","hollow-button"],["data-open","modal-ubikey",1,"button","hollow-button"],["data-open","modal-csharp",1,"button","hollow-button"],["src","assets/images/icons/icon-energy.svg","alt","",1,"width-20"],["data-open","modal-dot-net-framework",1,"button","hollow-button"],["src","assets/images/icons/icon-service.svg","alt","",1,"width-20"],["data-open","modal-excel-vba",1,"button","hollow-button"],["data-open","modal-mainframe",1,"button","hollow-button"],["data-open","modal-crystal-reports",1,"button","hollow-button"],["src","assets/images/icons/icon-industry.svg","alt","",1,"width-20"],["data-open","modal-access-vba",1,"button","hollow-button"],["src","assets/images/icons/icon-medal.svg","alt","",1,"width-20"],["data-open","modal-vb-dot-net",1,"button","hollow-button"],["src","assets/images/icons/icon-pill.svg","alt","",1,"width-20"],["data-open","modal-barcode-reader",1,"button","hollow-button"],["data-open","modal-access-database",1,"button","hollow-button"],["data-open","modal-access-reporting",1,"button","hollow-button"],["data-open","modal-e-banking",1,"button","hollow-button"],["src","assets/images/icons/icon-cash.svg","alt","",1,"width-20"],["data-open","modal-visual-basic",1,"button","hollow-button"],["data-open","modal-word-vba",1,"button","hollow-button"],["src","assets/images/icons/icon-tech.svg","alt","",1,"width-20"],["data-open","modal-powerbuilder",1,"button","hollow-button"],["data-open","modal-omnis-studio",1,"button","hollow-button"],["src","assets/images/icons/icon-marketing.svg","alt","",1,"width-20"],["data-open","modal-autocad-api",1,"button","hollow-button"],["src","assets/images/icons/icon-connect.svg","alt","",1,"width-20"],["src","assets/images/icons/icon-wine.svg","alt","",1,"width-20"],["src","assets/images/icons/icon-soda.svg","alt","",1,"width-20"],["data-open","modal-outlook-vba",1,"button","hollow-button"],["data-open","modal-outlook-form",1,"button","hollow-button"],["src","assets/images/icons/icon-chef.svg","alt","",1,"width-20"]],template:function(t,i){t&1&&(d(0,"section",0),b(1,"hr",1),d(2,"div",2)(3,"header",3)(4,"h2"),m(5,"Projects"),f()(),d(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6)(10,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/transnubel"])}),m(11,"Nuclear"),f(),d(12,"span",8),m(13,"5"),f()(),d(14,"div",9)(15,"a",10),m(16,".Net"),f(),d(17,"a",11),m(18,"Sql Server"),f(),d(19,"a",12),m(20,"Digipass"),f(),d(21,"a",13),m(22,"On premise"),f()(),d(23,"div",14),b(24,"img",15),d(25,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/transnubel"])}),d(26,"strong"),m(27,"Transnubel"),f()(),m(28," \u25CF "),d(29,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/transnubel"])}),m(30," Web applications for Transport / Packing / Content Management Systems "),f()()(),d(31,"div",5)(32,"div",6)(33,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/engie"])}),m(34,"Energy"),f(),d(35,"span",8),m(36,"4"),f()(),d(37,"div",9)(38,"a",17),m(39,".Net Framework"),f(),d(40,"a",11),m(41,"Sql Server"),f(),d(42,"a",18),m(43,"Okta"),f(),d(44,"a",19),m(45,"Ubikey"),f(),d(46,"a",20),m(47,"C#"),f()(),d(48,"div",14),b(49,"img",21),d(50,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/engie"])}),d(51,"strong"),m(52,"Engie Solutions"),f()(),m(53," \u25CF "),d(54,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/engie"])}),m(55," Migration tasks from on-premises infrastructure to Azure cloud servers plus implemented effective strategies to ensure seamless transition "),f()()(),d(56,"div",5)(57,"div",6)(58,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/equans"])}),m(59,"Industry"),f(),d(60,"span",8),m(61,"3"),f()(),d(62,"div",9)(63,"a",22),m(64,".Net Framework"),f(),d(65,"a",11),m(66,"Sql Server"),f(),d(67,"a",18),m(68,"Okta"),f(),d(69,"a",19),m(70,"Ubikey"),f(),d(71,"a",20),m(72,"C#"),f()(),d(73,"div",14),b(74,"img",23),d(75,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/equans"])}),d(76,"strong"),m(77,"Equans Belgium"),f()(),m(78," \u25CF "),d(79,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/equans"])}),m(80,"Okta integration with existing web applications for simplifying the process of securing sensitive data"),f()()(),d(81,"div",5)(82,"div",6)(83,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/akzonobel"])}),m(84,"Industry"),f(),d(85,"span",8),m(86,"1"),f()(),d(87,"div",9)(88,"a",24),m(89,"Excel\xAE VBA"),f(),d(90,"a",25),m(91,"Mainframe"),f(),d(92,"a",26),m(93,"Crystal Reports"),f()(),d(94,"div",14),b(95,"img",27),d(96,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/akzonobel"])}),d(97,"strong"),m(98,"AkzoNobel"),f()(),m(99," \u25CF "),d(100,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/akzonobel"])}),m(101," Production Management Template for Microsoft Excel\xAE "),f()()(),d(102,"div",5)(103,"div",6)(104,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/olympic"])}),m(105,"Sport"),f(),d(106,"span",8),m(107,"1"),f()(),d(108,"div",9)(109,"a",11),m(110,"Sql Server"),f(),d(111,"a",28),m(112,"Access\xAE VBA"),f()(),d(113,"div",14),b(114,"img",29),d(115,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/olympic"])}),d(116,"strong"),m(117,"Belgian Olympic Committee"),f()(),m(118," \u25CF "),d(119,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/olympic"])}),m(120," Sport Information Management for recording individual athlete's profiles "),f()()(),d(121,"div",5)(122,"div",6)(123,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/baxter"])}),m(124,"Pharma"),f(),d(125,"span",8),m(126,"1"),f()(),d(127,"div",9)(128,"a",22),m(129,".Net Framework"),f(),d(130,"a",11),m(131,"Sql Server"),f(),d(132,"a",30),m(133,"VB.Net"),f()(),d(134,"div",14),b(135,"img",31),d(136,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/baxter"])}),d(137,"strong"),m(138,"Baxter Belgium"),f()(),m(139," \u25CF "),d(140,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/baxter"])}),m(141," Environment Health Safety software and Industrial hygiene and chemical risk management solution "),f()()(),d(142,"div",5)(143,"div",6)(144,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/gsk"])}),m(145,"Pharma"),f(),d(146,"span",8),m(147,"3"),f()(),d(148,"div",9)(149,"a",32),m(150,"Barcode reader"),f(),d(151,"a",10),m(152,".Net"),f(),d(153,"a",24),m(154,"Excel\xAE VBA"),f(),d(155,"a",20),m(156,"C#"),f()(),d(157,"div",14),b(158,"img",31),d(159,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/gsk"])}),d(160,"strong"),m(161,"Glaxo Smith Kline"),f()(),m(162," \u25CF "),d(163,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/gsk"])}),m(164," Scientific data collection and analysis software "),f()()(),d(165,"div",5)(166,"div",6)(167,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/labima"])}),m(168,"Pharma"),f(),d(169,"span",8),m(170,"1"),f()(),d(171,"div",9)(172,"a",28),m(173,"Access\xAE VBA"),f(),d(174,"a",33),m(175,"Access\xAE Database"),f(),d(176,"a",34),m(177,"Access\xAE Reporting"),f()(),d(178,"div",14),b(179,"img",31),d(180,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/labima"])}),d(181,"strong"),m(182,"Labima"),f()(),m(183," \u25CF "),d(184,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/labima"])}),m(185," Sales Representative software for monitoring commercial delegates performance "),f()()(),d(186,"div",5)(187,"div",6)(188,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/fib"])}),m(189,"Banking"),f(),d(190,"span",8),m(191,"5"),f()(),d(192,"div",9)(193,"a",22),m(194,".Net Framework"),f(),d(195,"a",30),m(196,"VB.Net"),f(),d(197,"a",12),m(198,"Digipass"),f(),d(199,"a",35),m(200,"e-Banking"),f()(),d(201,"div",14),b(202,"img",36),d(203,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/fib"])}),d(204,"strong"),m(205,"Fortis Insurance Belgium"),f()(),m(206," \u25CF "),d(207,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/fib"])}),m(208," Financial Operations software. Authentication modules. "),f()()(),d(209,"div",5)(210,"div",6)(211,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/credit-general"])}),m(212,"Banking"),f(),d(213,"span",8),m(214,"1"),f()(),d(215,"div",9)(216,"a",37),m(217,"Visual Basic"),f(),d(218,"a",33),m(219,"Access\xAE Database"),f(),d(220,"a",26),m(221,"Crystal Reports"),f()(),d(222,"div",14),b(223,"img",36),d(224,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/credit-general"])}),d(225,"strong"),m(226,"Credit General"),f()(),m(227," \u25CF "),d(228,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/credit-general"])}),m(229," Prospection Software designed for the Credit General "),f()()(),d(230,"div",5)(231,"div",6)(232,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/tott-systems"])}),m(233,"Tech"),f(),d(234,"span",8),m(235,"3"),f()(),d(236,"div",9)(237,"a",37),m(238,"Visual Basic"),f(),d(239,"a",24),m(240,"Excel\xAE VBA"),f(),d(241,"a",38),m(242,"Word\xAE VBA"),f()(),d(243,"div",14),b(244,"img",39),d(245,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/tott-systems"])}),d(246,"strong"),m(247,"Tott Systems"),f()(),m(248," \u25CF "),d(249,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/tott-systems"])}),m(250," Helpdesk Solution to streamline IT support processes "),f()()(),d(251,"div",5)(252,"div",6)(253,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/jpass"])}),m(254,"Tech"),f(),d(255,"span",8),m(256,"1"),f()(),d(257,"div",9)(258,"a",40),m(259,"PowerBuilder"),f(),d(260,"a",41),m(261,"Omnis Studio"),f()(),d(262,"div",14),b(263,"img",39),d(264,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/jpass"])}),d(265,"strong"),m(266,"JPass International"),f()(),m(267," \u25CF "),d(268,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/jpass"])}),m(269," Material Safety Data Sheets (MSDS) expert software for Windows. "),f()()(),d(270,"div",5)(271,"div",6)(272,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/sopres"])}),m(273,"Marketing"),f(),d(274,"span",8),m(275,"1"),f()(),d(276,"div",9)(277,"a",37),m(278,"Visual Basic"),f(),d(279,"a",25),m(280,"Mainframe"),f()(),d(281,"div",14),b(282,"img",42),d(283,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/sopres"])}),d(284,"strong"),m(285,"Sopres"),f()(),m(286," \u25CF "),d(287,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/sopres"])}),m(288," Rental Mailing List software designed with IT and business collaboration in mind "),f()()(),d(289,"div",5)(290,"div",6)(291,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/tplan"])}),m(292,"Telecom"),f(),d(293,"span",8),m(294,"1"),f()(),d(295,"div",9)(296,"a",37),m(297,"Visual Basic"),f(),d(298,"a",43),m(299,"Autocad API"),f()(),d(300,"div",14),b(301,"img",44),d(302,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/tplan"])}),d(303,"strong"),m(304,"T Plan"),f()(),m(305," \u25CF "),d(306,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/tplan"])}),m(307," Geographic Information System (GIS) software used to establish routes for placement of optic fibers in the ground. "),f()()(),d(308,"div",5)(309,"div",6)(310,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/schenk"])}),m(311,"Beverage"),f(),d(312,"span",8),m(313,"1"),f()(),d(314,"div",9)(315,"a",37),m(316,"Visual Basic"),f(),d(317,"a",33),m(318,"Access\xAE Database"),f(),d(319,"a",26),m(320,"Crystal Reports"),f()(),d(321,"div",14),b(322,"img",45),d(323,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/schenk"])}),d(324,"strong"),m(325,"Schenk Holding"),f()(),m(326," \u25CF "),d(327,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/schenk"])}),m(328," Stock Management System with statistics and reports "),f()()(),d(329,"div",5)(330,"div",6)(331,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/coca-cola"])}),m(332,"Beverage"),f(),d(333,"span",8),m(334,"1"),f()(),d(335,"div",9)(336,"a",24),m(337,"Excel\xAE VBA"),f(),d(338,"a",25),m(339,"Mainframe"),f(),d(340,"a",37),m(341,"Visual Basic"),f()(),d(342,"div",14),b(343,"img",46),d(344,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/coca-cola"])}),d(345,"strong"),m(346,"Coca-Cola"),f()(),m(347," \u25CF "),d(348,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/coca-cola"])}),m(349," Y2K millennium bug \u25CF Transition to the Euro \u25CF Excel Macros migration "),f()()(),d(350,"div",5)(351,"div",6)(352,"a",7),M("click",function(){return i.navigateWithAnimation(["/clients/kjs"])}),m(353,"Food"),f(),d(354,"span",8),m(355,"1"),f()(),d(356,"div",9)(357,"a",47),m(358,"Outlook\xAE VBA"),f(),d(359,"a",48),m(360,"Outlook\xAE Form"),f()(),d(361,"div",14),b(362,"img",49),d(363,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/kjs"])}),d(364,"strong"),m(365,"Kraft Jacobs Suchard"),f()(),m(366," \u25CF "),d(367,"a",16),M("click",function(){return i.navigateWithAnimation(["/clients/kjs"])}),m(368," European Survey on sales performance. Electronic forms dispatched via Outlook. "),f()()()()()()())},dependencies:[Ht,yn],encapsulation:2})};var Fy=class n extends ue{constructor(){super()}ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-profile"]],standalone:!0,features:[oe,re],decls:252,vars:1,consts:[["id","profile"],[1,"row"],[1,"small-16","columns"],[1,"small-8","columns","width-100-on-mobile"],[1,"table"],[1,"trow"],[1,"tcol","last"],[1,"tcol","limit"],[1,"hide-on-mobile"],[1,"spacer"],[1,"small-16","columns","width-100-on-mobile"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"row","hide-on-mobile"],[1,"small-16","columns","width-100-on-mobile","grid"],["data-open","modal-csharp",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-asp-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-web-api",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-razor",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-blazor",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net-core",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-html",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-css",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-scss",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-javascript",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-typescript",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-jquery",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ajax",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-angular",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-visual-studio",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-entity-framework",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-message-queuing",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-progressive-web-apps",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-aurelia",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-architecture-design",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-okta",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-data-visualization",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-api-management",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-gulp",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dependency-injection",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-tfs",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-active-directory",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-agile",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-enterprise-resource-planning",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-event-driven",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-iis",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-continuous-deployment",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-linq",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-asynchronous",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-design-pattern",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-mvc",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microservices",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-containers",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-docker",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ci-cd-pipelines",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-performance-tuning",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-signalr",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-web-forms",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-powershell",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-caching",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-maui",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-kubernetes",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-on-premise",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-word-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-reporting",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-outlook-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-outlook-form",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-e-banking",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-barcode-reader",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-c-sharp-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-autocas-api",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-omnis-studio",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-cognitive-services",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microsoft-authenticator",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-serverless",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-functions",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-sql-database",1,"button","hollow-button","tiny-button","grid-item"]],template:function(t,i){t&1&&(d(0,"section",0)(1,"div",1)(2,"header",2)(3,"h2"),m(4,"Profile"),f()(),d(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6),m(9," Thierry Langie "),f(),d(10,"div",7)(11,"strong"),m(12,"Name"),f(),m(13," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(14,"div",5)(15,"div",6),m(16," Full stack .Net "),d(17,"span",8),m(18,"Angular"),f()(),d(19,"div",7)(20,"strong"),m(21,"Role"),f(),m(22," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(23,"div",5)(24,"div",6),m(25),f(),d(26,"div",7)(27,"strong"),m(28,"Email"),f(),m(29," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(30,"div",5)(31,"div",6),m(32," +32 486 96 45 77 "),f(),d(33,"div",7)(34,"strong"),m(35,"Phone"),f(),m(36," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(37,"div",5)(38,"div",6),m(39," Namur, Belgium "),f(),d(40,"div",7)(41,"strong"),m(42,"Location"),f(),m(43," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()()()(),d(44,"div",3)(45,"div",4)(46,"div",5)(47,"div",6),m(48," French, English "),f(),d(49,"div",7)(50,"strong"),m(51,"Languages"),f(),m(52," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(53,"div",5)(54,"div",6),m(55," 51 years old "),f(),d(56,"div",7)(57,"strong"),m(58,"Age"),f(),m(59," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(60,"div",5)(61,"div",6),m(62," 30+ years "),d(63,"span",8),m(64,"of experience"),f()(),d(65,"div",7)(66,"strong"),m(67,"Experience"),f(),m(68," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(69,"div",5)(70,"div",6),m(71," 33+ "),d(72,"span",8),m(73,"completed"),f(),m(74," projects "),f(),d(75,"div",7)(76,"strong"),m(77,"Missions"),f(),m(78," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()(),d(79,"div",5)(80,"div",6)(81,"span",8),m(82,"Remotely &"),f(),m(83," Part-time only "),f(),d(84,"div",7)(85,"strong"),m(86,"Availability"),f(),m(87," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),f()()()(),b(88,"hr",9),d(89,"div",10)(90,"div",11)(91,"strong"),m(92,"Disponibility"),f(),m(93," I will not be available for freelance work over the next year. I must dedicate my time and resources to my current mission at Equans. However, I am always open to new connections and would love to stay in touch. Whether it's for networking, collaboration on future projects, or simply sharing insights and experiences. "),d(94,"button",12)(95,"span",13),Ve(),d(96,"svg",14),b(97,"path",15),f()()()()()(),Be(),d(98,"div",16)(99,"div",17)(100,"a",18),m(101,"C#"),f(),d(102,"a",19),m(103,"Asp.Net"),f(),d(104,"a",20),m(105,"Web API"),f(),d(106,"a",21),m(107,"Razor"),f(),d(108,"a",22),m(109,"Blazor"),f(),d(110,"a",23),m(111,".Net Core"),f(),d(112,"a",24),m(113,"Sql Server"),f(),d(114,"a",25),m(115,"HTML"),f(),d(116,"a",26),m(117,"CSS"),f(),d(118,"a",27),m(119,"SCSS"),f(),d(120,"a",28),m(121,"JavaScript"),f(),d(122,"a",29),m(123,"TypeScript"),f(),d(124,"a",30),m(125,"jQuery"),f(),d(126,"a",31),m(127,"Ajax"),f(),d(128,"a",32),m(129,"Angular"),f(),d(130,"a",33),m(131,"Visual Studio"),f(),d(132,"a",34),m(133,".Net"),f(),d(134,"a",35),m(135,"Entity Framework"),f(),d(136,"a",36),m(137,"Digpass"),f(),d(138,"a",37),m(139,"Ubikey"),f(),d(140,"a",38),m(141,"Message Queuing"),f(),d(142,"a",39),m(143,"Azure"),f(),d(144,"a",40),m(145,"Progressive Web Apps"),f(),d(146,"a",41),m(147,"Aurelia"),f(),d(148,"a",42),m(149,"Architecture Design"),f(),d(150,"a",43),m(151,"OKTA"),f(),d(152,"a",44),m(153,"Data Visualization"),f(),d(154,"a",45),m(155,"API Management"),f(),d(156,"a",46),m(157,"Gulp"),f(),d(158,"a",47),m(159,"Dependency Injection"),f(),d(160,"a",48),m(161,"TFS"),f(),d(162,"a",49),m(163,"Azure Active Directory"),f(),d(164,"a",50),m(165,"Agile"),f(),d(166,"a",51),m(167,"Enterprise Resource Planning"),f(),d(168,"a",52),m(169,"Event Driven"),f(),d(170,"a",53),m(171,"IIS"),f(),d(172,"a",54),m(173,"Continuous Deployment"),f(),d(174,"a",55),m(175,"Linq"),f(),d(176,"a",56),m(177,"Asynchronous"),f(),d(178,"a",57),m(179,"Design Pattern"),f(),d(180,"a",58),m(181,"MVC"),f(),d(182,"a",59),m(183,"Microservices"),f(),d(184,"a",60),m(185,"Containers"),f(),d(186,"a",61),m(187,"Docker"),f(),d(188,"a",62),m(189,"CI/CD Pipelines"),f(),d(190,"a",63),m(191,"Performance Tuning"),f(),d(192,"a",64),m(193,"SignalR"),f(),d(194,"a",65),m(195,"Web Forms"),f(),d(196,"a",66),m(197,"PowerShell"),f(),d(198,"a",67),m(199,"Caching"),f(),d(200,"a",68),m(201,"MAUI"),f(),d(202,"a",69),m(203,"Kubernetes"),f(),d(204,"a",70),m(205,"Visual Basic"),f(),d(206,"a",71),m(207,"On premise"),f(),d(208,"a",72),m(209,"Excel\xAE VBA"),f(),d(210,"a",73),m(211,"Word\xAE VBA"),f(),d(212,"a",74),m(213,"Access\xAE VBA"),f(),d(214,"a",75),m(215,"Access\xAE Database"),f(),d(216,"a",76),m(217,"Access\xAE Reporting"),f(),d(218,"a",77),m(219,"Outlook\xAE VBA"),f(),d(220,"a",78),m(221,"Outlook\xAE Form"),f(),d(222,"a",79),m(223,"Mainframe"),f(),d(224,"a",80),m(225,".Net Framework"),f(),d(226,"a",81),m(227,"Crystal Reports"),f(),d(228,"a",82),m(229,"e-Banking"),f(),d(230,"a",83),m(231,"Barcode Reader"),f(),d(232,"a",84),m(233,"VB.Net"),f(),d(234,"a",85),m(235,"C#.Net"),f(),d(236,"a",86),m(237,"Autocad API"),f(),d(238,"a",87),m(239,"Omnis Studio"),f(),d(240,"a",88),m(241,"Microsoft Graph"),f(),d(242,"a",89),m(243,"Azure Cognitive Services"),f(),d(244,"a",90),m(245,"Microsoft Authenticator"),f(),d(246,"a",91),m(247,"Serverless"),f(),d(248,"a",92),m(249,"Azure Functions"),f(),d(250,"a",93),m(251,"Azure Sql Database"),f()()()()),t&2&&(Oe(25),Ur(" ","thierry@prolog.red"," "))},dependencies:[Ht,yn],encapsulation:2})};var Vy=class n extends ue{constructor(){super()}ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-links"]],standalone:!0,features:[oe,re],decls:9,vars:0,consts:[["id","links"],["href","./assets/cv/cv_Thierry_Langie.docx","target","_blank"],["src","assets/images/icons/icon-word.svg","alt",""],["href","https://www.linkedin.com/in/thierrylangie/","target","_blank"],["src","assets/images/icons/icon-linkedin.svg","alt",""],["href","./assets/cv/cv_Thierry_Langie.pdf","target","_blank"],["src","assets/images/icons/icon-pdf.svg","alt",""],[1,"spacer"]],template:function(t,i){t&1&&(d(0,"section",0)(1,"a",1),b(2,"img",2),f(),d(3,"a",3),b(4,"img",4),f(),d(5,"a",5),b(6,"img",6),f(),b(7,"hr",7)(8,"hr",7),f())},dependencies:[Ht,yn],encapsulation:2})};var By=class n extends ue{constructor(){super()}ngOnInit(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-about"]],standalone:!0,features:[oe,re],decls:13,vars:0,consts:[["id","about"],[1,"row"],[1,"small-16","columns"]],template:function(t,i){t&1&&(d(0,"section",0)(1,"div",1)(2,"header",2)(3,"h2"),m(4,"About"),f(),d(5,"p"),m(6," With nearly 3 decades of programming experience, I am \u2764\uFE0F"),d(7,"strong"),m(8,"deeply passionate"),f(),m(9," about my work. Over the years, I have encountered a multitude of challenges that have not only tested my skills but also provided me with invaluable learning opportunities. \u{1F680}"),d(10,"strong"),m(11,"Prolog.red"),f(),m(12," is my personal playground! This is a space to explore, experiment, and share a variety of ideas, projects, and interests. Whether I'm diving into the latest tech trends or simply sharing my thoughts, you'll find a little bit of everything here. "),f()()()())},dependencies:[Ht,yn],encapsulation:2})};var une=Oy.namespace("MainComponent").seal(),Uy=class n extends ue{authStatusSubscription;authService=L(xh);menuItems;constructor(){super()}ngOnInit(){super.ngOnInit(),this.authService.ngOnInit(),this.initializeMenu(),this.authStatusSubscription=this.authService.getAuthStatus().subscribe(e=>{une.label("ngOnInit").info("Authentication status: "+e),this.initializeMenu()})}ngOnDestroy(){this.authStatusSubscription&&this.authStatusSubscription.unsubscribe()}initializeMenu(){this.menuItems=[],this.authService.isLoggedIn?(this.menuItems.push({label:"Logout",action:()=>this.authService.logout()}),this.menuItems.push({label:"Create new post",action:()=>this.router.navigateByUrl("/editor/")})):this.menuItems.push({label:"Login",action:()=>this.authService.loginRedirect()})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-main"]],standalone:!0,features:[oe,re],decls:33,vars:1,consts:[[3,"menuItems"],["id","main-header",1,"purple"],[1,"bg"],[1,"row"],[1,"small-16","columns"],[1,"stars"],["src","assets/images/illustrations/stars-home.svg","alt","",1,"animated","infinite","flash"],[1,"identity"],["id","logo","src","assets/images/logos/logo.png","alt","placeholder logo",1,"center-image"],[1,"tagline"],["src","assets/images/illustrations/ship-illustration.svg","alt","rocket",1,"rocket","center-image","animated","bounceInUp"],[1,"main-footer"],[1,"spacer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(b(0,"app-menu",0),d(1,"header",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5),b(6,"img",6),f()()()(),d(7,"section",7)(8,"div",3)(9,"div",4),b(10,"img",8),d(11,"p",9),m(12,"Full stack .Net Angular developer"),f()()(),d(13,"div",3)(14,"div",4),b(15,"img",10),f()()()(),b(16,"app-about")(17,"app-links")(18,"app-profile")(19,"app-projects")(20,"app-blog"),d(21,"footer",11),b(22,"hr",12),d(23,"div",13)(24,"div",3)(25,"div",4)(26,"p",14),m(27,"Copyright \xA9 2025 "),d(28,"a",15),m(29,"Prolog.Red"),f(),b(30,"img",16),d(31,"span",17),m(32," All Rights Reserved"),f()()()()()()),t&2&&Ti("menuItems",i.menuItems)},dependencies:[Ht,yn,Ra,Ny,Ly,Fy,Vy,By],encapsulation:2})};var Hy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-equans"]],standalone:!0,features:[oe,re],decls:113,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],["data-closable","fade-out",1,"alert","callout"],[1,"text-center"],["data-open","modal-angular",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-functions",1,"button","hollow-button","tiny-button"],["data-open","modal-dot-net-core",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-sql-database",1,"button","hollow-button","tiny-button"],["data-open","modal-csharp",1,"button","hollow-button","tiny-button"],["data-open","modal-okta",1,"button","hollow-button","tiny-button"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-authenticator",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-cognitive-services",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Equans Belgium"),f()(),d(13,"div")(14,"p"),m(15," Leading global player in multi-technical installations and maintenance services. They design, install and deliver customised solutions and services to improve customers' infrastructure, equipment, systems and technical processes. "),f(),d(16,"div",11)(17,"strong"),m(18,"Equans"),f(),m(19," (formerly known as Transnubel) is linked to the "),d(20,"strong"),m(21,"ENGIE group"),f(),m(22," which is made up of 71 companies. I have been working for Equans since 2022 as a freelance. This experience has allowed me to contribute to and learn from a leading company in the Nuclear industry. "),d(23,"button",12)(24,"span",13),Ve(),d(25,"svg",14),b(26,"path",15),f()()()(),Be(),d(27,"p")(28,"strong"),m(29,"Platon"),f(),d(30,"span",16),m(31,"WEB\xB7APP"),f(),m(32," Shuttle Transport Booking web application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),f(),d(33,"p")(34,"strong"),m(35,"Transportboek"),f(),d(36,"span",16),m(37,"WEB\xB7APP"),f(),m(38," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),f(),d(39,"p")(40,"strong"),m(41,"Paris"),f(),d(42,"span",16),m(43,"WEB\xB7APP"),f(),m(44," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),f(),d(45,"div",17)(46,"strong"),m(47,"Gaffe"),f(),d(48,"span",16),m(49,"DISCONTINUED"),f(),m(50," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),b(51,"br"),d(52,"strong"),m(53,"Replaced by SharePoint"),f(),d(54,"button",12)(55,"span",13),Ve(),d(56,"svg",14),b(57,"path",15),f()()()(),Be(),d(58,"div",17)(59,"strong"),m(60,"Launcher"),f(),d(61,"span",16),m(62,"DISCONTINUED"),f(),m(63," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),b(64,"br"),d(65,"strong"),m(66,"Replaced by SharePoint"),f(),d(67,"button",12)(68,"span",13),Ve(),d(69,"svg",14),b(70,"path",15),f()()()(),Be(),d(71,"p")(72,"code"),m(73,"Okta"),f(),m(74," integration on smartphones to align with modern security standards. This includes the implementation of two-factor authentication (2FA), adding an additional layer of protection. With 2FA, users must provide two forms of identification before accessing the web applications listed above, this significantly bolstering security. "),f(),d(75,"p")(76,"code"),m(77,"Yubikey"),f(),m(78," are used when smartphones are not allowed on certain sites (nuclear power plants). People need an alternative way to authenticate securely. For these situations, we use YubiKey. Which is a physical security key that provides strong authentication without the need for a smartphone. Just plug it into a USB port and tap the key to authenticate, ensuring secure access to web applications listed above. "),f()(),b(79,"hr"),d(80,"footer")(81,"div",18)(82,"a",19),m(83,"Angular"),f(),d(84,"a",20),m(85,"Azure Functions"),f(),d(86,"a",21),m(87,".Net Core"),f(),d(88,"a",22),m(89,"Azure Sql Database"),f(),d(90,"a",23),m(91,"c#"),f(),d(92,"a",24),m(93,"Okta"),f(),d(94,"a",25),m(95,"Ubikey (2FA)"),f(),d(96,"a",26),m(97,"Microsoft Authenticator"),f(),d(98,"a",27),m(99,"Microsoft Graph"),f(),d(100,"a",28),m(101,"Azure Cognitive Services"),f()()()()()()()(),d(102,"footer",29)(103,"div",30)(104,"div",5)(105,"div",6)(106,"p",31),m(107,"Copyright \xA9 2025 "),d(108,"a",32),m(109,"Prolog.Red"),f(),b(110,"img",33),d(111,"span",34),m(112," All Rights Reserved"),f()()()()()())},encapsulation:2})};var zy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-equans"]],standalone:!0,features:[oe,re],decls:52,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"AkzoNobel"),f()(),d(13,"div")(14,"p"),m(15," Dutch multinational company which creates paints and performance coatings for both industry and consumers worldwide. Headquartered in Amsterdam, the company has activities in more than 80 countries, and employs over 32,000 people. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"AkzoNobel"),f(),m(20," from 2010 to 2011 as a freelance. This experience provided me the opportunity to contribute to and gain valuable insights from a top-tier company in the industry. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Production Management Template for Microsoft Excel\xAE"),f(),d(28,"span",16),m(29,"EXCEL\xB7TEMPLATE"),f(),m(30," Generator and calculator of production orders. Main features are planning, monitoring, production statistics and reporting. Furthermore the elimination of manual data entry and manual transposition errors improved the process. "),f(),b(31,"p"),f(),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Excel\xAE VBA"),f(),d(36,"a",19),m(37,"Mainframe"),f(),d(38,"a",20),m(39,"Crystal Reports"),f()()()()()()()(),b(40,"hr"),d(41,"footer",21)(42,"div",22)(43,"div",5)(44,"div",6)(45,"p",23),m(46,"Copyright \xA9 2025 "),d(47,"a",24),m(48,"Prolog.Red"),f(),b(49,"img",25),d(50,"span",26),m(51," All Rights Reserved "),f()()()()()())},encapsulation:2})};var jy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-olympic"]],standalone:!0,features:[oe,re],decls:49,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Olympic Committee"),f()(),d(13,"div")(14,"p"),m(15," National Olympic Committee (NOC) that represents the Olympic movement and its values in Belgium. "),f(),d(16,"div",11),m(17," I worked for the "),d(18,"strong"),m(19,"National Olympic Committee"),f(),m(20," from 2011 to 2012 as a freelance. This role allowed me to gain deep insights from a prestigious organization. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Sport Information Management System"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Windows application for recording of individual athlete's profiles for fast and reliable access to information. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Sql Server"),f(),d(36,"a",19),m(37,"Access VBA"),f()()()()()()()(),d(38,"footer",20)(39,"div",21)(40,"div",5)(41,"div",6)(42,"p",22),m(43,"Copyright \xA9 2025 "),d(44,"a",23),m(45,"Prolog.Red"),f(),b(46,"img",24),d(47,"span",25),m(48," All Rights Reserved"),f()()()()()())},encapsulation:2})};var $y=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-baxter"]],standalone:!0,features:[oe,re],decls:51,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Baxter Belgium"),f()(),d(13,"div")(14,"p"),m(15," American multinational health care company with headquarters in Deerfield, Illinois. The company primarily focuses on products to treat hemophilia, kidney disease, immune disorders and other chronic and acute medical conditions. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Baxter"),f(),m(20," from 2010 to 2011 as a freelance. During this period, I gained valuable insights from a leading pharmaceutical company, known for its impactful advancements in healthcare. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Environment Health Safety (EHS)"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Industrial hygiene and chemical risk management to improve well-being at work. Help reduce time, effort and cost by standardizing and automating processes in order to improve effectiveness and efficiency. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,".Net Framework"),f(),d(36,"a",19),m(37,"Sql Server"),f(),d(38,"a",20),m(39,"VB.Net"),f()()()()()()()(),d(40,"footer",21)(41,"div",22)(42,"div",5)(43,"div",6)(44,"p",23),m(45,"Copyright \xA9 2025 "),d(46,"a",24),m(47,"Prolog.Red"),f(),b(48,"img",25),d(49,"span",26),m(50," All Rights Reserved "),f()()()()()())},encapsulation:2})};var Wy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-gsk"]],standalone:!0,features:[oe,re],decls:67,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-barcode-scanner",1,"button","hollow-button","tiny-button"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-csharp",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Glaxo Smith Kline"),f()(),d(13,"div")(14,"p"),m(15," British multinational pharmaceutical company headquartered in London, England. Established in 2000 by a merger of Glaxo Wellcome and SmithKline Beecham, GSK was the world\u2019s sixth largest pharmaceutical company according to Forbes as of 2019, after Pfizer, Novartis, Roche, Sanofi, and Merck & Co. "),f(),d(16,"div",11),m(17," I worked as a freelance for "),d(18,"strong"),m(19,"Glaxo Smith Kline"),f(),m(20," from 2009 to 2010. During this time, I was able to make significant contributions and acquire valuable insights from this esteemed pharmaceutical company. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Bio Stat"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Scientific data collection and analysis application. The objectives laid down for this program are multiple like the ease of use, the clear presentation of results. All the possible statistical procedures have not been included yet but any such additions are quite simple. "),f(),d(31,"p")(32,"strong"),m(33,"Dynamic Planner"),f(),d(34,"span",16),m(35,"EXCEL\xB7TEMPLATE"),f(),m(36," Template for Microsoft Excel\xAE. Custom made tool allowing order taking of new preparations and their planning on a dynamic schedule covering a full year. Daily, weekly, monthly planner that helps teams to keep well organized. Includes up to 52 weeks on separate worksheets. Designed to be printed on both sides of A3 format with a month on each side. "),f(),d(37,"p")(38,"strong"),m(39,"Tratt Scan"),f(),d(40,"span",16),m(41,"WIN\xB7APP"),f(),m(42," In-house Management Training Courses application updated in 2010 with enhancements and bug fixes. This tool can help teams to stay up-to-date and quickly gain new skills with engaging training modules by connecting users to their every process, policy, and procedure. "),f()(),b(43,"hr"),d(44,"footer")(45,"div",17)(46,"a",18),m(47,".Net Framework"),f(),d(48,"a",19),m(49,"Barcode Scanner"),f(),d(50,"a",20),m(51,"Excel\xAE VBA"),f(),d(52,"a",21),m(53,"Access\xAE VBA"),f(),d(54,"a",22),m(55,"C#"),f()()()()()()()(),d(56,"footer",23)(57,"div",24)(58,"div",5)(59,"div",6)(60,"p",25),m(61,"Copyright \xA9 2025 "),d(62,"a",26),m(63,"Prolog.Red"),f(),b(64,"img",27),d(65,"span",28),m(66," All Rights Reserved "),f()()()()()())},encapsulation:2})};var qy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-labima"]],standalone:!0,features:[oe,re],decls:51,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-access-reporting",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Labima"),f()(),d(13,"div")(14,"p"),m(15," Belgian private pharmaceutical laboratory, located in the region of Brussels (Belgium). She ceased her activities in 2016. The objectives of Labima are clear: delivering high quality products and services in a win-win way for our partners and ourselves. "),f(),d(16,"div",11),m(17," I worked at "),d(18,"strong"),m(19,"Labima"),f(),m(20," from 1997 to 1999. During this period, I made significant contributions and gained valuable insights from this dedicated small company. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Sales Representative"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," windows application for monitoring commercial delegates performance. The bi-directional synchronization is done daily. Main features are as follows: recording sales visit data; arranging follow-up calls or visits; route planning between appointments; sales reporting. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Access\xAE VBA"),f(),d(36,"a",19),m(37,"Access\xAE Database"),f(),d(38,"a",20),m(39,"Access\xAE Reporting"),f()()()()()()()(),d(40,"footer",21)(41,"div",22)(42,"div",5)(43,"div",6)(44,"p",23),m(45,"Copyright \xA9 2025 "),d(46,"a",24),m(47,"Prolog.Red"),f(),b(48,"img",25),d(49,"span",26),m(50," All Rights Reserved "),f()()()()()())},encapsulation:2})};var Gy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-fib"]],standalone:!0,features:[oe,re],decls:89,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-asp-dot-net",1,"button","hollow-button","tiny-button"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Fortis Insurance Belgium"),f()(),d(13,"div")(14,"p"),m(15," Belgian insurance company providing life insurance and non-life insurance (auto, fire, accident, hospitalization, civil liability and other) and supplementary pensions. It has been present on the Belgian insurance market since 1824. It targets private individuals, as well as self-employed persons, SMEs and large companies. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Fortis Insurance Belgium"),f(),m(20," from 2000 to 2005 as a freelance. During this time, I acquired profound knowledge from this leading financial institution. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"FinOp"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Financial Operations windows application. Enhancements, bug fixing. "),f(),d(31,"p")(32,"strong"),m(33,"Authentication APIs"),f(),d(34,"span",16),m(35,"MODULE"),f(),m(36," to gain access to internet services. "),f(),d(37,"p")(38,"strong"),m(39,"E-banking Access"),f(),d(40,"span",16),m(41,"MODULE"),f(),m(42," updated in 2002. "),f(),d(43,"p")(44,"strong"),m(45,"Tax Records Management"),f(),d(46,"span",16),m(47,"WIN\xB7APP"),f(),m(48," designed in 2003 for internal use. "),f(),d(49,"p")(50,"strong"),m(51,"Expenses Validation"),f(),d(52,"span",16),m(53,"WEB\xB7APP"),f(),m(54," updated in 2004. "),f(),d(55,"p")(56,"strong"),m(57,"Brokers Bank"),f(),d(58,"span",16),m(59,"WEB\xB7SITE"),f(),m(60," Collaborated closely with a fifteenperson team. "),f()(),b(61,"hr"),d(62,"footer")(63,"div",17)(64,"a",18),m(65,".Net Framework"),f(),d(66,"a",19),m(67,"Visual Basic"),f(),d(68,"a",20),m(69,"ASP.Net"),f(),d(70,"a",21),m(71,"VB.Net"),f(),d(72,"a",22),m(73,"Access\xAE VBA"),f(),d(74,"a",23),m(75,"Mainframe"),f(),d(76,"a",24),m(77,"Digipass"),f()()()()()()()(),d(78,"footer",25)(79,"div",26)(80,"div",5)(81,"div",6)(82,"p",27),m(83,"Copyright \xA9 2025 "),d(84,"a",28),m(85,"Prolog.Red"),f(),b(86,"img",29),d(87,"span",30),m(88," All Rights Reserved"),f()()()()()())},encapsulation:2})};var Ky=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-equans"]],standalone:!0,features:[oe,re],decls:51,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Credit General"),f()(),d(13,"div")(14,"p"),m(15," Now parts of the group CBC (french-speaking branch of the KBC group). Belgian group of international scope, active mainly in Belgium as well as in Central and Eastern Europe. "),f(),d(16,"div",11),m(17," I worked for the "),d(18,"strong"),m(19,"Credit General"),f(),m(20," from 1996 to 1997, gaining extensive expertise and knowledge from this prominent financial institution during that period. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Prospection "),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Windows application designed for the Credit General. Complete module of prospection and qualification of prospects and customers files. Complete history of all actions on prospect/client files and contacts. Complete workflow on appointments management : appointments orders, confirmation of appointments, appointment status by employees, full statistics. Contact file entirely configurable (numbers of columns, column nominations). "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Visual Basic"),f(),d(36,"a",19),m(37,"Access\xAE Database"),f(),d(38,"a",20),m(39,"Crystal Reports"),f()()()()()()()(),d(40,"footer",21)(41,"div",22)(42,"div",5)(43,"div",6)(44,"p",23),m(45,"Copyright \xA9 2025 "),d(46,"a",24),m(47,"Prolog.Red"),f(),b(48,"img",25),d(49,"span",26),m(50," All Rights Reserved"),f()()()()()())},encapsulation:2})};var Yy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-engie"]],standalone:!0,features:[oe,re],decls:110,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],["data-closable","fade-out",1,"alert","callout"],[1,"text-center"],["data-open","modal-iis",1,"button","hollow-button","tiny-button"],["data-open","modal-virtual-machine",1,"button","hollow-button","tiny-button"],["data-open","modal-aurelia",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-csharp",1,"button","hollow-button","tiny-button"],["data-open","modal-okta",1,"button","hollow-button","tiny-button"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Engie Solutions"),f()(),d(13,"div")(14,"p"),m(15," Engie Solutions supports cities, industries and tertiary sector companies by providing them with answers to the challenge of the energy transition through turnkey and tailor-made offers. "),f(),d(16,"div",11),m(17," The "),d(18,"strong"),m(19,"Engie group"),f(),m(20," is made up of 71 companies including Transubel (now known as Equans). I worked for them from 2021 to 2022. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Platon"),f(),d(28,"span",16),m(29,"WEB\xB7APP"),f(),m(30," Shuttle Transport Booking application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),f(),d(31,"p")(32,"strong"),m(33,"Transportboek"),f(),d(34,"span",16),m(35,"WEB\xB7APP"),f(),m(36," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),f(),d(37,"p")(38,"strong"),m(39,"Paris"),f(),d(40,"span",16),m(41,"WEB\xB7APP"),f(),m(42," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),f(),d(43,"p")(44,"strong"),m(45,"Gaffe"),f(),d(46,"span",16),m(47,"WEB\xB7APP"),f(),m(48," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),f(),d(49,"div",17)(50,"strong"),m(51,"Launcher"),f(),d(52,"span",16),m(53,"DISCONTINUED"),f(),m(54," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),b(55,"br"),d(56,"strong"),m(57,"Replaced by SharePoint"),f(),d(58,"button",12)(59,"span",13),Ve(),d(60,"svg",14),b(61,"path",15),f()()()(),Be(),d(62,"p")(63,"code"),m(64,"Okta"),f(),m(65," integration on smartphones to align with modern security standards. This includes the implementation of two-factor authentication (2FA), adding an additional layer of protection. With 2FA, users must provide two forms of identification before accessing the web applications listed above, this significantly bolstering security. "),f(),d(66,"p")(67,"code"),m(68,"Yubikey"),f(),m(69," are used when smartphones are not allowed on certain sites (nuclear power plants). People need an alternative way to authenticate securely. For these situations, we use YubiKey. Which is a physical security key that provides strong authentication without the need for a smartphone. Just plug it into a USB port and tap the key to authenticate, ensuring secure access to web applications listed above. "),f(),d(70,"p")(71,"code"),m(72,"Migration"),f(),m(73," tasks from on-premises infrastructure in Transnubel offices located in Dessel to Azure cloud servers. Implemented effective strategies to ensure seamless transition. "),f(),d(74,"p")(75,"code"),m(76,"Microsoft Graph"),f(),m(77," integration into web applications listed above to manage emails. This integration allows my applications to send emails seamlessly using Microsoft 365 services, enhancing email functionality and improving overall user experience. "),f()(),b(78,"hr"),d(79,"footer")(80,"div",18)(81,"a",19),m(82,"IIS"),f(),d(83,"a",20),m(84,"Virtual Machine"),f(),d(85,"a",21),m(86,"Aurelia"),f(),d(87,"a",22),m(88,"Microsoft Graph"),f(),d(89,"a",23),m(90,".Net Framework"),f(),d(91,"a",24),m(92,"Sql Server"),f(),d(93,"a",25),m(94,"c#"),f(),d(95,"a",26),m(96,"Okta"),f(),d(97,"a",27),m(98,"Ubikey (2FA)"),f()()()()()()()(),d(99,"footer",28)(100,"div",29)(101,"div",5)(102,"div",6)(103,"p",30),m(104,"Copyright \xA9 2025 "),d(105,"a",31),m(106,"Prolog.Red"),f(),b(107,"img",32),d(108,"span",33),m(109,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var Qy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-tott-systems"]],standalone:!0,features:[oe,re],decls:77,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-word-vba",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Tott Systems"),f()(),d(13,"div")(14,"p"),m(15," Belgian private ICT company, located in the region of Brussels (Belgium). She ceased her activities in 2005. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Tott Systems"),f(),m(20," from 1999 to 2001. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Helpdesk"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," solution to streamline IT support processes. Developed features for ticket management, user authentication, and automated responses. Collaborated with cross-functional teams to ensure seamless integration with existing systems "),f(),d(31,"p")(32,"strong"),m(33,"Freight Transport Management"),f(),d(34,"span",16),m(35,"WIN\xB7APP"),f(),m(36," Bug-fixes & added features. "),f(),d(37,"p")(38,"strong"),m(39,"Y2K"),f(),d(40,"span",16),m(41,"FIX"),f(),m(42," developments related & the changeover to the euro currency. "),f(),d(43,"p")(44,"strong"),m(45,"Backup solution"),f(),d(46,"span",16),m(47,"WIN\xB7APP"),f(),m(48," remotely controlled through a phone connection (RDC). "),f(),d(49,"p")(50,"strong"),m(51,"Documentation Automation"),f(),d(52,"span",16),m(53,"WORD PLUGIN"),f(),m(54," solution from source code. "),f()(),b(55,"hr"),d(56,"footer")(57,"div",17)(58,"a",18),m(59,"Visual Basic"),f(),d(60,"a",19),m(61,"Excel\xAE VBA"),f(),d(62,"a",20),m(63,"Access\xAE VBA"),f(),d(64,"a",21),m(65,"Word\xAE VBA"),f()()()()()()()(),d(66,"footer",22)(67,"div",23)(68,"div",5)(69,"div",6)(70,"p",24),m(71,"Copyright \xA9 2025 "),d(72,"a",25),m(73,"Prolog.Red"),f(),b(74,"img",26),d(75,"span",27),m(76,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var Zy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-equans"]],standalone:!0,features:[oe,re],decls:49,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"copyright"],[1,"text-center"],["data-open","modal-powerbuilder",1,"button","hollow-button","tiny-button"],["data-open","modal-omnis-studio",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"JPass International"),f()(),d(13,"div")(14,"p"),m(15," Belgian private ICT company, located in the region of Brussels (Belgium). she ceased her activities in 2016. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"JPass International"),f(),m(20," from 1997 to 1999. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong")(27,"span",16),m(28,"\xA9"),f(),m(29,"Pollux"),f(),m(30," Material Safety Data Sheets (MSDS) expert software. Manage transport documents and security documents related to chemicals. Users can easily search and print SDS\u2019s for all of the chemicals they work with. Software used by clients like Petrofina, Texaco and Total to name a few. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"PowerBuilder"),f(),d(36,"a",19),m(37,"Omnis Studio"),f()()()()()()()(),d(38,"footer",20)(39,"div",16)(40,"div",5)(41,"div",6)(42,"p",21),m(43,"Copyright \xA9 2025 "),d(44,"a",22),m(45,"Prolog.Red"),f(),b(46,"img",23),d(47,"span",24),m(48,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var Jy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-sopres"]],standalone:!0,features:[oe,re],decls:49,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Sopres"),f()(),d(13,"div")(14,"p"),m(15," A consumer-oriented marketing data specialist. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Sopres"),f(),m(20," from 1999 to 2000. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Rental Mailing List"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," software designed with IT and business collaboration in mind. The software's capability to handle various kinds of queries according to the business requirements. Helps minimize human error and offers a secure way for all users to access and utilize data. Help identify and fill gaps in missing information, and decrease redundancy. Easy-to-use and intuitive interface so that even your non-technical staff can use it. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Visual Basic"),f(),d(36,"a",19),m(37,"Mainframe"),f()()()()()()()(),d(38,"footer",20)(39,"div",21)(40,"div",5)(41,"div",6)(42,"p",22),m(43,"Copyright \xA9 2025 "),d(44,"a",23),m(45,"Prolog.Red"),f(),b(46,"img",24),d(47,"span",25),m(48,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var Xy=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-tplan"]],standalone:!0,features:[oe,re],decls:49,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-autocad-api",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"TPlan"),f()(),d(13,"div")(14,"p"),m(15," Continued the development of the test management tool, for testing of the dematerialisation of share certificates project. The solution was ensuring that programs of critical importance to the UK and Global economy were developed, tested and launched successfully. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"TPlan"),f(),m(20," from 1999 to 2000. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Geographic Information System (GIS)"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," Windows application used to establish routes for placement of optic fibers in the ground. The software integrate Autocad maps (dwg) for mapping. Modulation and structuration of spatial data. Complete toolbox (plot, lines, curves, shapes, adding annotations, etc\u2026). "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Visual Basic"),f(),d(36,"a",19),m(37,"Autocad API"),f()()()()()()()(),d(38,"footer",20)(39,"div",21)(40,"div",5)(41,"div",6)(42,"p",22),m(43,"Copyright \xA9 2025 "),d(44,"a",23),m(45,"Prolog.Red"),f(),b(46,"img",24),d(47,"span",25),m(48,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var e1=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-transnubel"]],standalone:!0,features:[oe,re],decls:83,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button"],["data-open","modal-rfid-scanner",1,"button","hollow-button","tiny-button"],["data-open","modal-on-premise",1,"button","hollow-button","tiny-button"],["data-open","modal-csharp",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Transnubel"),f()(),d(13,"div")(14,"p"),m(15," Highly integrated solutions provider for the nuclear sector. They coordinate all the activities in Belgium and abroad from the headquarters in the Belgian town of Dessel. "),f(),d(16,"div",11)(17,"strong"),m(18,"Transnubel"),f(),m(19," (now known as Equans) is linked to the "),d(20,"strong"),m(21,"ENGIE group"),f(),m(22," made up of 71 companies. "),d(23,"button",12)(24,"span",13),Ve(),d(25,"svg",14),b(26,"path",15),f()()()(),Be(),d(27,"p")(28,"strong"),m(29,"Platon"),f(),d(30,"span",16),m(31,"WEB\xB7APP"),f(),m(32," Shuttle Transport Booking application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),f(),d(33,"p")(34,"strong"),m(35,"Transportboek"),f(),d(36,"span",16),m(37,"WEB\xB7APP"),f(),m(38," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),f(),d(39,"p")(40,"strong"),m(41,"Paris"),f(),d(42,"span",16),m(43,"WEB\xB7APP"),f(),m(44," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),f(),d(45,"p")(46,"strong"),m(47,"Gaffe"),f(),d(48,"span",16),m(49,"WEB\xB7APP"),f(),m(50," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),f(),d(51,"p")(52,"strong"),m(53,"Launcher"),f(),d(54,"span",16),m(55,"WEB\xB7APP"),f(),m(56," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),f()(),b(57,"hr"),d(58,"footer")(59,"div",17)(60,"a",18),m(61,".Net Framework"),f(),d(62,"a",19),m(63,"Sql Server"),f(),d(64,"a",20),m(65,"Digipass"),f(),d(66,"a",21),m(67,"RFID Scanner"),f(),d(68,"a",22),m(69,"On premise"),f(),d(70,"a",23),m(71,"C#"),f()()()()()()()(),d(72,"footer",24)(73,"div",25)(74,"div",5)(75,"div",6)(76,"p",26),m(77,"Copyright \xA9 2025 "),d(78,"a",27),m(79,"Prolog.Red"),f(),b(80,"img",28),d(81,"span",29),m(82,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var t1=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-schenk"]],standalone:!0,features:[oe,re],decls:51,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Schenk"),f()(),d(13,"div")(14,"p"),m(15," Wine merchant on a European scale. After more than a century, the Schenk group is present in Switzerland, France, Italy, Spain, Germany, Benelux and Great Britain. The group's steady expansion is combined with a policy of major investments in vineyards as well as in recent equipment and techniques for wine cellars and bottling lines. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Schenk"),f(),m(20," from 1996 to 1997. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p")(26,"strong"),m(27,"Stock Management System"),f(),d(28,"span",16),m(29,"WIN\xB7APP"),f(),m(30," with statistics and reports. Complete stock control over multiple warehouses and locations. Overview of stock data, minimal quantities and expiring items. Useful insights into profit, sales and stock supply. Simplify and speed up the process from quote to delivery and final invoice. "),f()(),b(31,"hr"),d(32,"footer")(33,"div",17)(34,"a",18),m(35,"Visual Basic"),f(),d(36,"a",19),m(37,"Access\xAE Database"),f(),d(38,"a",20),m(39,"Crystal Reports"),f()()()()()()()(),d(40,"footer",21)(41,"div",22)(42,"div",5)(43,"div",6)(44,"p",23),m(45,"Copyright \xA9 2025 "),d(46,"a",24),m(47,"Prolog.Red"),f(),b(48,"img",25),d(49,"span",26),m(50,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var n1=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-coca-cola"]],standalone:!0,features:[oe,re],decls:47,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"text-center"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Coca-Cola"),f()(),d(13,"div")(14,"p"),m(15," American multinational beverage corporation incorporated under Delaware\u2019s General Corporation Law and headquartered in Atlanta, Georgia. The Coca-Cola Company has interests in the manufacturing, retailing, and marketing of nonalcoholic beverage concentrates and syrups. The company produces Coca-Cola, invented in 1886 by pharmacist John Stith Pemberton. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Coca-Cola"),f(),m(20," from 1998 to 1999. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p"),m(26," Y2K millennium bug \u25CF Transition to the Euro \u25CF Excel Macros migration to interrogate a server mainframe-based \u25CF SQL queries dynamically generated. "),f()(),b(27,"hr"),d(28,"footer")(29,"div",16)(30,"a",17),m(31,"Excel\xAE VBA"),f(),d(32,"a",18),m(33,"Mainframe"),f(),d(34,"a",19),m(35,"Visual Basic"),f()()()()()()()(),d(36,"footer",20)(37,"div",21)(38,"div",5)(39,"div",6)(40,"p",22),m(41,"Copyright \xA9 2025 "),d(42,"a",23),m(43,"Prolog.Red"),f(),b(44,"img",24),d(45,"span",25),m(46,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var i1=class n extends ue{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-kjs"]],standalone:!0,features:[oe,re],decls:47,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"info","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"text-center"],["data-open","modal-outlook-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-outlook-form",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],[1,"date"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),f()(),d(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),f(),d(10,"header")(11,"h1",10),m(12,"Kraft Jacobs Suchard"),f()(),d(13,"div")(14,"p"),m(15," Now belongs to group Kraft Foods which is an American food manufacturing. "),f(),d(16,"div",11),m(17," I worked for "),d(18,"strong"),m(19,"Kraft Jacobs Suchard"),f(),m(20," from 1998 to 1999. "),d(21,"button",12)(22,"span",13),Ve(),d(23,"svg",14),b(24,"path",15),f()()()(),Be(),d(25,"p"),m(26," European Survey on sales performance. Electronic forms dispatched via Outlook in order to collect information. Serves as an indicator of the country\u2019s statistical performance. "),f()(),b(27,"hr"),d(28,"footer")(29,"div",16)(30,"a",17),m(31,"Outlook\xAE VBA"),f(),d(32,"a",18),m(33,"Outlook\xAE Form"),f()()()()()()()(),d(34,"footer",19)(35,"div",20)(36,"div",5)(37,"div",6)(38,"p",21),m(39,"Copyright \xA9 "),b(40,"span",22),m(41,"2025 "),d(42,"a",23),m(43,"Prolog.Red"),f(),b(44,"img",24),d(45,"span",25),m(46,"All Rights Reserved"),f()()()()()())},encapsulation:2})};var jn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function lB(){let[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+jn[n>>0&255]+jn[n>>8&255]+jn[n>>16&255]+jn[n>>24&255]+jn[e>>0&255]+jn[e>>8&255]+jn[e>>16&255]+jn[e>>24&255]+jn[t>>0&255]+jn[t>>8&255]+jn[t>>16&255]+jn[t>>24&255]+jn[i>>0&255]+jn[i>>8&255]+jn[i>>16&255]+jn[i>>24&255]}function dne(n,e){}var sx="Lock from Angular integration (@ckeditor/ckeditor5-angular)",cB=(()=>{class n{elementRef;editor;config={};data="";tagName="div";watchdog;editorWatchdogConfig;disableTwoWayDataBinding=!1;set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}ready=new yt;change=new yt;blur=new yt;focus=new yt;error=new yt;get editorInstance(){let t=this.editorWatchdog;return this.watchdog&&(t=this.watchdog._watchdogs.get(this.id)),t?t.editor:null}editorWatchdog;initiallyDisabled=!1;ngZone;cvaOnChange;cvaOnTouched;editorElement;isEditorSettingData=!1;id=lB();getId(){return this.id}constructor(t,i){this.ngZone=i,this.elementRef=t,this.checkVersion()}checkVersion(){let{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');let[i]=t.split(".").map(Number);i>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}ngOnChanges(t){Object.prototype.hasOwnProperty.call(t,"data")&&t.data&&!t.data.isFirstChange()&&this.writeValue(t.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return S(this,null,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(t){t===null&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(t),this.isEditorSettingData=!1):(this.data=t,this.ready.pipe(rr()).subscribe(i=>{i.data.set(this.data)}))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance&&(t?this.editorInstance.enableReadOnlyMode(sx):this.editorInstance.disableReadOnlyMode(sx)),this.initiallyDisabled=t}attachToWatchdog(){let t=(a,l)=>this.ngZone.runOutsideAngular(()=>S(this,null,function*(){this.elementRef.nativeElement.appendChild(a);let c=yield this.editor.create(a,l);return this.initiallyDisabled&&c.enableReadOnlyMode(sx),this.ngZone.run(()=>{this.ready.emit(c)}),this.setUpEditorEvents(c),c})),i=a=>S(this,null,function*(){yield a.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),r=a=>{hne(this.error)&&this.ngZone.run(()=>this.error.emit(a))},o=document.createElement(this.tagName),s=this.getConfig();if(this.editorElement=o,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:i,sourceElementOrData:o,config:s}).catch(a=>{r(a)}),this.watchdog.on("itemError",(a,{itemId:l})=>{l===this.id&&r()});else{let a=new this.editor.EditorWatchdog(this.editor,this.editorWatchdogConfig);a.setCreator(t),a.setDestructor(i),a.on("error",r),this.editorWatchdog=a,this.ngZone.runOutsideAngular(()=>{a.create(o,s).catch(l=>{r(l)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");let t=v({},this.config),i=this.config.initialData||this.data;return i&&(t.initialData=i),t}setUpEditorEvents(t){let i=t.model.document,r=t.editing.view.document;i.on("change:data",o=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){let s=t.data.get();this.cvaOnChange(s)}this.change.emit({event:o,editor:t})}})}),r.on("focus",o=>{this.ngZone.run(()=>{this.focus.emit({event:o,editor:t})})}),r.on("blur",o=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:o,editor:t})})})}static \u0275fac=function(i){return new(i||n)(Ne(Si),Ne(st))};static \u0275cmp=ee({type:n,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[ac([{provide:Rd,useExisting:rs(()=>n),multi:!0}]),fa],decls:1,vars:0,template:function(i,r){i&1&&Hn(0,dne,0,0,"ng-template")},encapsulation:2})}return n})();function hne(n){return n.observed||n.observers.length>0}var uB=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=yi({type:n});static \u0275inj=vi({imports:[yn,Ht]})}return n})();var Vh=class n{alertRequest=new $l;alertRequest$=this.alertRequest.asObservable();constructor(){}showAlert(e){this.alertRequest.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})};var pne=typeof global=="object"&&global&&global.Object===Object&&global,r1=pne;var gne=typeof self=="object"&&self&&self.Object===Object&&self,bne=r1||gne||Function("return this")(),jt=bne;var wne=jt.Symbol,si=wne;var dB=Object.prototype,vne=dB.hasOwnProperty,yne=dB.toString,_g=si?si.toStringTag:void 0;function _ne(n){var e=vne.call(n,_g),t=n[_g];try{n[_g]=void 0;var i=!0}catch{}var r=yne.call(n);return i&&(e?n[_g]=t:delete n[_g]),r}var hB=_ne;var Cne=Object.prototype,Ene=Cne.toString;function Sne(n){return Ene.call(n)}var fB=Sne;var Tne="[object Null]",kne="[object Undefined]",mB=si?si.toStringTag:void 0;function Ane(n){return n==null?n===void 0?kne:Tne:mB&&mB in Object(n)?hB(n):fB(n)}var ai=Ane;function Ine(n){return n!=null&&typeof n=="object"}var Ft=Ine;var xne="[object Symbol]";function Pne(n){return typeof n=="symbol"||Ft(n)&&ai(n)==xne}var il=Pne;function Rne(n,e){for(var t=-1,i=n==null?0:n.length,r=Array(i);++t<i;)r[t]=e(n[t],t,n);return r}var o1=Rne;var Dne=Array.isArray,Ct=Dne;var Mne=1/0,pB=si?si.prototype:void 0,gB=pB?pB.toString:void 0;function bB(n){if(typeof n=="string")return n;if(Ct(n))return o1(n,bB)+"";if(il(n))return gB?gB.call(n):"";var e=n+"";return e=="0"&&1/n==-Mne?"-0":e}var wB=bB;var One=/\s/;function Nne(n){for(var e=n.length;e--&&One.test(n.charAt(e)););return e}var vB=Nne;var Lne=/^\s+/;function Fne(n){return n&&n.slice(0,vB(n)+1).replace(Lne,"")}var yB=Fne;function Vne(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var ke=Vne;var _B=NaN,Bne=/^[-+]0x[0-9a-f]+$/i,Une=/^0b[01]+$/i,Hne=/^0o[0-7]+$/i,zne=parseInt;function jne(n){if(typeof n=="number")return n;if(il(n))return _B;if(ke(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=ke(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=yB(n);var t=Une.test(n);return t||Hne.test(n)?zne(n.slice(2),t?2:8):Bne.test(n)?_B:+n}var ax=jne;function $ne(n){return n}var qi=$ne;var Wne="[object AsyncFunction]",qne="[object Function]",Gne="[object GeneratorFunction]",Kne="[object Proxy]";function Yne(n){if(!ke(n))return!1;var e=ai(n);return e==qne||e==Gne||e==Wne||e==Kne}var Gi=Yne;var Qne=jt["__core-js_shared__"],s1=Qne;var CB=function(){var n=/[^.]+$/.exec(s1&&s1.keys&&s1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Zne(n){return!!CB&&CB in n}var EB=Zne;var Jne=Function.prototype,Xne=Jne.toString;function eie(n){if(n!=null){try{return Xne.call(n)}catch{}try{return n+""}catch{}}return""}var Fs=eie;var tie=/[\\^$.*+?()[\]{}|]/g,nie=/^\[object .+?Constructor\]$/,iie=Function.prototype,rie=Object.prototype,oie=iie.toString,sie=rie.hasOwnProperty,aie=RegExp("^"+oie.call(sie).replace(tie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lie(n){if(!ke(n)||EB(n))return!1;var e=Gi(n)?aie:nie;return e.test(Fs(n))}var SB=lie;function cie(n,e){return n?.[e]}var TB=cie;function uie(n,e){var t=TB(n,e);return SB(t)?t:void 0}var Pi=uie;var die=Pi(jt,"WeakMap"),a1=die;var kB=Object.create,hie=function(){function n(){}return function(e){if(!ke(e))return{};if(kB)return kB(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),AB=hie;function fie(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var IB=fie;function mie(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var l1=mie;var pie=800,gie=16,bie=Date.now;function wie(n){var e=0,t=0;return function(){var i=bie(),r=gie-(i-t);if(t=i,r>0){if(++e>=pie)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var xB=wie;function vie(n){return function(){return n}}var PB=vie;var yie=function(){try{var n=Pi(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Bh=yie;var _ie=Bh?function(n,e){return Bh(n,"toString",{configurable:!0,enumerable:!1,value:PB(e),writable:!0})}:qi,RB=_ie;var Cie=xB(RB),DB=Cie;function Eie(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var MB=Eie;var Sie=9007199254740991,Tie=/^(?:0|[1-9]\d*)$/;function kie(n,e){var t=typeof n;return e=e??Sie,!!e&&(t=="number"||t!="symbol"&&Tie.test(n))&&n>-1&&n%1==0&&n<e}var rl=kie;function Aie(n,e,t){e=="__proto__"&&Bh?Bh(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var ol=Aie;function Iie(n,e){return n===e||n!==n&&e!==e}var Do=Iie;var xie=Object.prototype,Pie=xie.hasOwnProperty;function Rie(n,e,t){var i=n[e];(!(Pie.call(n,e)&&Do(i,t))||t===void 0&&!(e in n))&&ol(n,e,t)}var Uh=Rie;function Die(n,e,t,i){var r=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),r?ol(t,a,l):Uh(t,a,l)}return t}var pr=Die;var OB=Math.max;function Mie(n,e,t){return e=OB(e===void 0?n.length-1:e,0),function(){for(var i=arguments,r=-1,o=OB(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=t(s),IB(n,this,a)}}var NB=Mie;function Oie(n,e){return DB(NB(n,e,qi),n+"")}var LB=Oie;var Nie=9007199254740991;function Lie(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Nie}var Hh=Lie;function Fie(n){return n!=null&&Hh(n.length)&&!Gi(n)}var gr=Fie;function Vie(n,e,t){if(!ke(t))return!1;var i=typeof e;return(i=="number"?gr(t)&&rl(e,t.length):i=="string"&&e in t)?Do(t[e],n):!1}var FB=Vie;function Bie(n){return LB(function(e,t){var i=-1,r=t.length,o=r>1?t[r-1]:void 0,s=r>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(r--,o):void 0,s&&FB(t[0],t[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=t[i];a&&n(e,a,i,o)}return e})}var zh=Bie;var Uie=Object.prototype;function Hie(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Uie;return n===t}var jh=Hie;function zie(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var VB=zie;var jie="[object Arguments]";function $ie(n){return Ft(n)&&ai(n)==jie}var lx=$ie;var BB=Object.prototype,Wie=BB.hasOwnProperty,qie=BB.propertyIsEnumerable,Gie=lx(function(){return arguments}())?lx:function(n){return Ft(n)&&Wie.call(n,"callee")&&!qie.call(n,"callee")},ou=Gie;function Kie(){return!1}var UB=Kie;var jB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,HB=jB&&typeof module=="object"&&module&&!module.nodeType&&module,Yie=HB&&HB.exports===jB,zB=Yie?jt.Buffer:void 0,Qie=zB?zB.isBuffer:void 0,Zie=Qie||UB,Vs=Zie;var Jie="[object Arguments]",Xie="[object Array]",ere="[object Boolean]",tre="[object Date]",nre="[object Error]",ire="[object Function]",rre="[object Map]",ore="[object Number]",sre="[object Object]",are="[object RegExp]",lre="[object Set]",cre="[object String]",ure="[object WeakMap]",dre="[object ArrayBuffer]",hre="[object DataView]",fre="[object Float32Array]",mre="[object Float64Array]",pre="[object Int8Array]",gre="[object Int16Array]",bre="[object Int32Array]",wre="[object Uint8Array]",vre="[object Uint8ClampedArray]",yre="[object Uint16Array]",_re="[object Uint32Array]",It={};It[fre]=It[mre]=It[pre]=It[gre]=It[bre]=It[wre]=It[vre]=It[yre]=It[_re]=!0;It[Jie]=It[Xie]=It[dre]=It[ere]=It[hre]=It[tre]=It[nre]=It[ire]=It[rre]=It[ore]=It[sre]=It[are]=It[lre]=It[cre]=It[ure]=!1;function Cre(n){return Ft(n)&&Hh(n.length)&&!!It[ai(n)]}var $B=Cre;function Ere(n){return function(e){return n(e)}}var $h=Ere;var WB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Cg=WB&&typeof module=="object"&&module&&!module.nodeType&&module,Sre=Cg&&Cg.exports===WB,cx=Sre&&r1.process,Tre=function(){try{var n=Cg&&Cg.require&&Cg.require("util").types;return n||cx&&cx.binding&&cx.binding("util")}catch{}}(),Bs=Tre;var qB=Bs&&Bs.isTypedArray,kre=qB?$h(qB):$B,Wh=kre;var Are=Object.prototype,Ire=Are.hasOwnProperty;function xre(n,e){var t=Ct(n),i=!t&&ou(n),r=!t&&!i&&Vs(n),o=!t&&!i&&!r&&Wh(n),s=t||i||r||o,a=s?VB(n.length,String):[],l=a.length;for(var c in n)(e||Ire.call(n,c))&&!(s&&(c=="length"||r&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||rl(c,l)))&&a.push(c);return a}var c1=xre;function Pre(n,e){return function(t){return n(e(t))}}var u1=Pre;var Rre=u1(Object.keys,Object),GB=Rre;var Dre=Object.prototype,Mre=Dre.hasOwnProperty;function Ore(n){if(!jh(n))return GB(n);var e=[];for(var t in Object(n))Mre.call(n,t)&&t!="constructor"&&e.push(t);return e}var KB=Ore;function Nre(n){return gr(n)?c1(n):KB(n)}var Mo=Nre;function Lre(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var YB=Lre;var Fre=Object.prototype,Vre=Fre.hasOwnProperty;function Bre(n){if(!ke(n))return YB(n);var e=jh(n),t=[];for(var i in n)i=="constructor"&&(e||!Vre.call(n,i))||t.push(i);return t}var QB=Bre;function Ure(n){return gr(n)?c1(n,!0):QB(n)}var br=Ure;var Hre=zh(function(n,e){pr(e,br(e),n)}),qh=Hre;var zre=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,jre=/^\w*$/;function $re(n,e){if(Ct(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||il(n)?!0:jre.test(n)||!zre.test(n)||e!=null&&n in Object(e)}var Gh=$re;var Wre=Pi(Object,"create"),Us=Wre;function qre(){this.__data__=Us?Us(null):{},this.size=0}var ZB=qre;function Gre(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var JB=Gre;var Kre="__lodash_hash_undefined__",Yre=Object.prototype,Qre=Yre.hasOwnProperty;function Zre(n){var e=this.__data__;if(Us){var t=e[n];return t===Kre?void 0:t}return Qre.call(e,n)?e[n]:void 0}var XB=Zre;var Jre=Object.prototype,Xre=Jre.hasOwnProperty;function eoe(n){var e=this.__data__;return Us?e[n]!==void 0:Xre.call(e,n)}var e6=eoe;var toe="__lodash_hash_undefined__";function noe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Us&&e===void 0?toe:e,this}var t6=noe;function Kh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Kh.prototype.clear=ZB;Kh.prototype.delete=JB;Kh.prototype.get=XB;Kh.prototype.has=e6;Kh.prototype.set=t6;var ux=Kh;function ioe(){this.__data__=[],this.size=0}var n6=ioe;function roe(n,e){for(var t=n.length;t--;)if(Do(n[t][0],e))return t;return-1}var sl=roe;var ooe=Array.prototype,soe=ooe.splice;function aoe(n){var e=this.__data__,t=sl(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():soe.call(e,t,1),--this.size,!0}var i6=aoe;function loe(n){var e=this.__data__,t=sl(e,n);return t<0?void 0:e[t][1]}var r6=loe;function coe(n){return sl(this.__data__,n)>-1}var o6=coe;function uoe(n,e){var t=this.__data__,i=sl(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var s6=uoe;function Yh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Yh.prototype.clear=n6;Yh.prototype.delete=i6;Yh.prototype.get=r6;Yh.prototype.has=o6;Yh.prototype.set=s6;var al=Yh;var doe=Pi(jt,"Map"),ll=doe;function hoe(){this.size=0,this.__data__={hash:new ux,map:new(ll||al),string:new ux}}var a6=hoe;function foe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var l6=foe;function moe(n,e){var t=n.__data__;return l6(e)?t[typeof e=="string"?"string":"hash"]:t.map}var cl=moe;function poe(n){var e=cl(this,n).delete(n);return this.size-=e?1:0,e}var c6=poe;function goe(n){return cl(this,n).get(n)}var u6=goe;function boe(n){return cl(this,n).has(n)}var d6=boe;function woe(n,e){var t=cl(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var h6=woe;function Qh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Qh.prototype.clear=a6;Qh.prototype.delete=c6;Qh.prototype.get=u6;Qh.prototype.has=d6;Qh.prototype.set=h6;var su=Qh;var voe="Expected a function";function dx(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(voe);var t=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=t.cache;if(o.has(r))return o.get(r);var s=n.apply(this,i);return t.cache=o.set(r,s)||o,s};return t.cache=new(dx.Cache||su),t}dx.Cache=su;var f6=dx;var yoe=500;function _oe(n){var e=f6(n,function(i){return t.size===yoe&&t.clear(),i}),t=e.cache;return e}var m6=_oe;var Coe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eoe=/\\(\\)?/g,Soe=m6(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Coe,function(t,i,r,o){e.push(r?o.replace(Eoe,"$1"):i||t)}),e}),p6=Soe;function Toe(n){return n==null?"":wB(n)}var ul=Toe;function koe(n,e){return Ct(n)?n:Gh(n,e)?[n]:p6(ul(n))}var dl=koe;var Aoe=1/0;function Ioe(n){if(typeof n=="string"||il(n))return n;var e=n+"";return e=="0"&&1/n==-Aoe?"-0":e}var wr=Ioe;function xoe(n,e){e=dl(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[wr(e[t++])];return t&&t==i?n:void 0}var Zh=xoe;function Poe(n,e,t){var i=n==null?void 0:Zh(n,e);return i===void 0?t:i}var hl=Poe;function Roe(n,e){for(var t=-1,i=e.length,r=n.length;++t<i;)n[r+t]=e[t];return n}var d1=Roe;var Doe=u1(Object.getPrototypeOf,Object),Jh=Doe;var Moe="[object Object]",Ooe=Function.prototype,Noe=Object.prototype,g6=Ooe.toString,Loe=Noe.hasOwnProperty,Foe=g6.call(Object);function Voe(n){if(!Ft(n)||ai(n)!=Moe)return!1;var e=Jh(n);if(e===null)return!0;var t=Loe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&g6.call(t)==Foe}var Kt=Voe;function Boe(n,e,t){var i=-1,r=n.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(r);++i<r;)o[i]=n[i+e];return o}var h1=Boe;function Uoe(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:h1(n,e,t)}var b6=Uoe;var Hoe="\\ud800-\\udfff",zoe="\\u0300-\\u036f",joe="\\ufe20-\\ufe2f",$oe="\\u20d0-\\u20ff",Woe=zoe+joe+$oe,qoe="\\ufe0e\\ufe0f",Goe="\\u200d",Koe=RegExp("["+Goe+Hoe+Woe+qoe+"]");function Yoe(n){return Koe.test(n)}var f1=Yoe;function Qoe(n){return n.split("")}var w6=Qoe;var v6="\\ud800-\\udfff",Zoe="\\u0300-\\u036f",Joe="\\ufe20-\\ufe2f",Xoe="\\u20d0-\\u20ff",ese=Zoe+Joe+Xoe,tse="\\ufe0e\\ufe0f",nse="["+v6+"]",hx="["+ese+"]",fx="\\ud83c[\\udffb-\\udfff]",ise="(?:"+hx+"|"+fx+")",y6="[^"+v6+"]",_6="(?:\\ud83c[\\udde6-\\uddff]){2}",C6="[\\ud800-\\udbff][\\udc00-\\udfff]",rse="\\u200d",E6=ise+"?",S6="["+tse+"]?",ose="(?:"+rse+"(?:"+[y6,_6,C6].join("|")+")"+S6+E6+")*",sse=S6+E6+ose,ase="(?:"+[y6+hx+"?",hx,_6,C6,nse].join("|")+")",lse=RegExp(fx+"(?="+fx+")|"+ase+sse,"g");function cse(n){return n.match(lse)||[]}var T6=cse;function use(n){return f1(n)?T6(n):w6(n)}var k6=use;function dse(n){return function(e){e=ul(e);var t=f1(e)?k6(e):void 0,i=t?t[0]:e.charAt(0),r=t?b6(t,1).join(""):e.slice(1);return i[n]()+r}}var A6=dse;var hse=A6("toUpperCase"),Eg=hse;function fse(n,e,t,i){var r=-1,o=n==null?0:n.length;for(i&&o&&(t=n[++r]);++r<o;)t=e(t,n[r],r,n);return t}var I6=fse;function mse(n){return function(e){return n?.[e]}}var x6=mse;var pse={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},gse=x6(pse),P6=gse;var bse=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wse="\\u0300-\\u036f",vse="\\ufe20-\\ufe2f",yse="\\u20d0-\\u20ff",_se=wse+vse+yse,Cse="["+_se+"]",Ese=RegExp(Cse,"g");function Sse(n){return n=ul(n),n&&n.replace(bse,P6).replace(Ese,"")}var R6=Sse;var Tse=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function kse(n){return n.match(Tse)||[]}var D6=kse;var Ase=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Ise(n){return Ase.test(n)}var M6=Ise;var V6="\\ud800-\\udfff",xse="\\u0300-\\u036f",Pse="\\ufe20-\\ufe2f",Rse="\\u20d0-\\u20ff",Dse=xse+Pse+Rse,B6="\\u2700-\\u27bf",U6="a-z\\xdf-\\xf6\\xf8-\\xff",Mse="\\xac\\xb1\\xd7\\xf7",Ose="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nse="\\u2000-\\u206f",Lse=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",H6="A-Z\\xc0-\\xd6\\xd8-\\xde",Fse="\\ufe0e\\ufe0f",z6=Mse+Ose+Nse+Lse,j6="['\u2019]",O6="["+z6+"]",Vse="["+Dse+"]",$6="\\d+",Bse="["+B6+"]",W6="["+U6+"]",q6="[^"+V6+z6+$6+B6+U6+H6+"]",Use="\\ud83c[\\udffb-\\udfff]",Hse="(?:"+Vse+"|"+Use+")",zse="[^"+V6+"]",G6="(?:\\ud83c[\\udde6-\\uddff]){2}",K6="[\\ud800-\\udbff][\\udc00-\\udfff]",Xh="["+H6+"]",jse="\\u200d",N6="(?:"+W6+"|"+q6+")",$se="(?:"+Xh+"|"+q6+")",L6="(?:"+j6+"(?:d|ll|m|re|s|t|ve))?",F6="(?:"+j6+"(?:D|LL|M|RE|S|T|VE))?",Y6=Hse+"?",Q6="["+Fse+"]?",Wse="(?:"+jse+"(?:"+[zse,G6,K6].join("|")+")"+Q6+Y6+")*",qse="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gse="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kse=Q6+Y6+Wse,Yse="(?:"+[Bse,G6,K6].join("|")+")"+Kse,Qse=RegExp([Xh+"?"+W6+"+"+L6+"(?="+[O6,Xh,"$"].join("|")+")",$se+"+"+F6+"(?="+[O6,Xh+N6,"$"].join("|")+")",Xh+"?"+N6+"+"+L6,Xh+"+"+F6,Gse,qse,$6,Yse].join("|"),"g");function Zse(n){return n.match(Qse)||[]}var Z6=Zse;function Jse(n,e,t){return n=ul(n),e=t?void 0:e,e===void 0?M6(n)?Z6(n):D6(n):n.match(e)||[]}var J6=Jse;var Xse="['\u2019]",eae=RegExp(Xse,"g");function tae(n){return function(e){return I6(J6(R6(e).replace(eae,"")),n,"")}}var X6=tae;function nae(){this.__data__=new al,this.size=0}var e7=nae;function iae(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var t7=iae;function rae(n){return this.__data__.get(n)}var n7=rae;function oae(n){return this.__data__.has(n)}var i7=oae;var sae=200;function aae(n,e){var t=this.__data__;if(t instanceof al){var i=t.__data__;if(!ll||i.length<sae-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new su(i)}return t.set(n,e),this.size=t.size,this}var r7=aae;function ef(n){var e=this.__data__=new al(n);this.size=e.size}ef.prototype.clear=e7;ef.prototype.delete=t7;ef.prototype.get=n7;ef.prototype.has=i7;ef.prototype.set=r7;var Oo=ef;function lae(n,e){return n&&pr(e,Mo(e),n)}var o7=lae;function cae(n,e){return n&&pr(e,br(e),n)}var s7=cae;var u7=typeof exports=="object"&&exports&&!exports.nodeType&&exports,a7=u7&&typeof module=="object"&&module&&!module.nodeType&&module,uae=a7&&a7.exports===u7,l7=uae?jt.Buffer:void 0,c7=l7?l7.allocUnsafe:void 0;function dae(n,e){if(e)return n.slice();var t=n.length,i=c7?c7(t):new n.constructor(t);return n.copy(i),i}var m1=dae;function hae(n,e){for(var t=-1,i=n==null?0:n.length,r=0,o=[];++t<i;){var s=n[t];e(s,t,n)&&(o[r++]=s)}return o}var d7=hae;function fae(){return[]}var p1=fae;var mae=Object.prototype,pae=mae.propertyIsEnumerable,h7=Object.getOwnPropertySymbols,gae=h7?function(n){return n==null?[]:(n=Object(n),d7(h7(n),function(e){return pae.call(n,e)}))}:p1,tf=gae;function bae(n,e){return pr(n,tf(n),e)}var f7=bae;var wae=Object.getOwnPropertySymbols,vae=wae?function(n){for(var e=[];n;)d1(e,tf(n)),n=Jh(n);return e}:p1,g1=vae;function yae(n,e){return pr(n,g1(n),e)}var m7=yae;function _ae(n,e,t){var i=e(n);return Ct(n)?i:d1(i,t(n))}var b1=_ae;function Cae(n){return b1(n,Mo,tf)}var Sg=Cae;function Eae(n){return b1(n,br,g1)}var p7=Eae;var Sae=Pi(jt,"DataView"),w1=Sae;var Tae=Pi(jt,"Promise"),v1=Tae;var kae=Pi(jt,"Set"),y1=kae;var g7="[object Map]",Aae="[object Object]",b7="[object Promise]",w7="[object Set]",v7="[object WeakMap]",y7="[object DataView]",Iae=Fs(w1),xae=Fs(ll),Pae=Fs(v1),Rae=Fs(y1),Dae=Fs(a1),au=ai;(w1&&au(new w1(new ArrayBuffer(1)))!=y7||ll&&au(new ll)!=g7||v1&&au(v1.resolve())!=b7||y1&&au(new y1)!=w7||a1&&au(new a1)!=v7)&&(au=function(n){var e=ai(n),t=e==Aae?n.constructor:void 0,i=t?Fs(t):"";if(i)switch(i){case Iae:return y7;case xae:return g7;case Pae:return b7;case Rae:return w7;case Dae:return v7}return e});var Hs=au;var Mae=Object.prototype,Oae=Mae.hasOwnProperty;function Nae(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&Oae.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var _7=Nae;var Lae=jt.Uint8Array,nf=Lae;function Fae(n){var e=new n.constructor(n.byteLength);return new nf(e).set(new nf(n)),e}var rf=Fae;function Vae(n,e){var t=e?rf(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var C7=Vae;var Bae=/\w*$/;function Uae(n){var e=new n.constructor(n.source,Bae.exec(n));return e.lastIndex=n.lastIndex,e}var E7=Uae;var S7=si?si.prototype:void 0,T7=S7?S7.valueOf:void 0;function Hae(n){return T7?Object(T7.call(n)):{}}var k7=Hae;function zae(n,e){var t=e?rf(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var _1=zae;var jae="[object Boolean]",$ae="[object Date]",Wae="[object Map]",qae="[object Number]",Gae="[object RegExp]",Kae="[object Set]",Yae="[object String]",Qae="[object Symbol]",Zae="[object ArrayBuffer]",Jae="[object DataView]",Xae="[object Float32Array]",ele="[object Float64Array]",tle="[object Int8Array]",nle="[object Int16Array]",ile="[object Int32Array]",rle="[object Uint8Array]",ole="[object Uint8ClampedArray]",sle="[object Uint16Array]",ale="[object Uint32Array]";function lle(n,e,t){var i=n.constructor;switch(e){case Zae:return rf(n);case jae:case $ae:return new i(+n);case Jae:return C7(n,t);case Xae:case ele:case tle:case nle:case ile:case rle:case ole:case sle:case ale:return _1(n,t);case Wae:return new i;case qae:case Yae:return new i(n);case Gae:return E7(n);case Kae:return new i;case Qae:return k7(n)}}var A7=lle;function cle(n){return typeof n.constructor=="function"&&!jh(n)?AB(Jh(n)):{}}var C1=cle;var ule="[object Map]";function dle(n){return Ft(n)&&Hs(n)==ule}var I7=dle;var x7=Bs&&Bs.isMap,hle=x7?$h(x7):I7,P7=hle;var fle="[object Set]";function mle(n){return Ft(n)&&Hs(n)==fle}var R7=mle;var D7=Bs&&Bs.isSet,ple=D7?$h(D7):R7,M7=ple;var gle=1,ble=2,wle=4,O7="[object Arguments]",vle="[object Array]",yle="[object Boolean]",_le="[object Date]",Cle="[object Error]",N7="[object Function]",Ele="[object GeneratorFunction]",Sle="[object Map]",Tle="[object Number]",L7="[object Object]",kle="[object RegExp]",Ale="[object Set]",Ile="[object String]",xle="[object Symbol]",Ple="[object WeakMap]",Rle="[object ArrayBuffer]",Dle="[object DataView]",Mle="[object Float32Array]",Ole="[object Float64Array]",Nle="[object Int8Array]",Lle="[object Int16Array]",Fle="[object Int32Array]",Vle="[object Uint8Array]",Ble="[object Uint8ClampedArray]",Ule="[object Uint16Array]",Hle="[object Uint32Array]",Et={};Et[O7]=Et[vle]=Et[Rle]=Et[Dle]=Et[yle]=Et[_le]=Et[Mle]=Et[Ole]=Et[Nle]=Et[Lle]=Et[Fle]=Et[Sle]=Et[Tle]=Et[L7]=Et[kle]=Et[Ale]=Et[Ile]=Et[xle]=Et[Vle]=Et[Ble]=Et[Ule]=Et[Hle]=!0;Et[Cle]=Et[N7]=Et[Ple]=!1;function E1(n,e,t,i,r,o){var s,a=e&gle,l=e&ble,c=e&wle;if(t&&(s=r?t(n,i,r,o):t(n)),s!==void 0)return s;if(!ke(n))return n;var u=Ct(n);if(u){if(s=_7(n),!a)return l1(n,s)}else{var h=Hs(n),p=h==N7||h==Ele;if(Vs(n))return m1(n,a);if(h==L7||h==O7||p&&!r){if(s=l||p?{}:C1(n),!a)return l?m7(n,s7(s,n)):f7(n,o7(s,n))}else{if(!Et[h])return r?n:{};s=A7(n,h,a)}}o||(o=new Oo);var g=o.get(n);if(g)return g;o.set(n,s),M7(n)?n.forEach(function(E){s.add(E1(E,e,t,E,n,o))}):P7(n)&&n.forEach(function(E,T){s.set(T,E1(E,e,t,T,n,o))});var w=c?l?p7:Sg:l?br:Mo,y=u?void 0:w(n);return MB(y||n,function(E,T){y&&(T=E,E=n[T]),Uh(s,T,E1(E,e,t,T,n,o))}),s}var of=E1;var zle=4;function jle(n){return of(n,zle)}var S1=jle;var $le=1,Wle=4;function qle(n){return of(n,$le|Wle)}var $n=qle;var Gle=1,Kle=4;function Yle(n,e){return e=typeof e=="function"?e:void 0,of(n,Gle|Kle,e)}var lu=Yle;var Qle="__lodash_hash_undefined__";function Zle(n){return this.__data__.set(n,Qle),this}var F7=Zle;function Jle(n){return this.__data__.has(n)}var V7=Jle;function T1(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new su;++e<t;)this.add(n[e])}T1.prototype.add=T1.prototype.push=F7;T1.prototype.has=V7;var B7=T1;function Xle(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}var U7=Xle;function ece(n,e){return n.has(e)}var H7=ece;var tce=1,nce=2;function ice(n,e,t,i,r,o){var s=t&tce,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(n),u=o.get(e);if(c&&u)return c==e&&u==n;var h=-1,p=!0,g=t&nce?new B7:void 0;for(o.set(n,e),o.set(e,n);++h<a;){var w=n[h],y=e[h];if(i)var E=s?i(y,w,h,e,n,o):i(w,y,h,n,e,o);if(E!==void 0){if(E)continue;p=!1;break}if(g){if(!U7(e,function(T,x){if(!H7(g,x)&&(w===T||r(w,T,t,i,o)))return g.push(x)})){p=!1;break}}else if(!(w===y||r(w,y,t,i,o))){p=!1;break}}return o.delete(n),o.delete(e),p}var k1=ice;function rce(n){var e=-1,t=Array(n.size);return n.forEach(function(i,r){t[++e]=[r,i]}),t}var z7=rce;function oce(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var j7=oce;var sce=1,ace=2,lce="[object Boolean]",cce="[object Date]",uce="[object Error]",dce="[object Map]",hce="[object Number]",fce="[object RegExp]",mce="[object Set]",pce="[object String]",gce="[object Symbol]",bce="[object ArrayBuffer]",wce="[object DataView]",$7=si?si.prototype:void 0,mx=$7?$7.valueOf:void 0;function vce(n,e,t,i,r,o,s){switch(t){case wce:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case bce:return!(n.byteLength!=e.byteLength||!o(new nf(n),new nf(e)));case lce:case cce:case hce:return Do(+n,+e);case uce:return n.name==e.name&&n.message==e.message;case fce:case pce:return n==e+"";case dce:var a=z7;case mce:var l=i&sce;if(a||(a=j7),n.size!=e.size&&!l)return!1;var c=s.get(n);if(c)return c==e;i|=ace,s.set(n,e);var u=k1(a(n),a(e),i,r,o,s);return s.delete(n),u;case gce:if(mx)return mx.call(n)==mx.call(e)}return!1}var W7=vce;var yce=1,_ce=Object.prototype,Cce=_ce.hasOwnProperty;function Ece(n,e,t,i,r,o){var s=t&yce,a=Sg(n),l=a.length,c=Sg(e),u=c.length;if(l!=u&&!s)return!1;for(var h=l;h--;){var p=a[h];if(!(s?p in e:Cce.call(e,p)))return!1}var g=o.get(n),w=o.get(e);if(g&&w)return g==e&&w==n;var y=!0;o.set(n,e),o.set(e,n);for(var E=s;++h<l;){p=a[h];var T=n[p],x=e[p];if(i)var V=s?i(x,T,p,e,n,o):i(T,x,p,n,e,o);if(!(V===void 0?T===x||r(T,x,t,i,o):V)){y=!1;break}E||(E=p=="constructor")}if(y&&!E){var Q=n.constructor,he=e.constructor;Q!=he&&"constructor"in n&&"constructor"in e&&!(typeof Q=="function"&&Q instanceof Q&&typeof he=="function"&&he instanceof he)&&(y=!1)}return o.delete(n),o.delete(e),y}var q7=Ece;var Sce=1,G7="[object Arguments]",K7="[object Array]",A1="[object Object]",Tce=Object.prototype,Y7=Tce.hasOwnProperty;function kce(n,e,t,i,r,o){var s=Ct(n),a=Ct(e),l=s?K7:Hs(n),c=a?K7:Hs(e);l=l==G7?A1:l,c=c==G7?A1:c;var u=l==A1,h=c==A1,p=l==c;if(p&&Vs(n)){if(!Vs(e))return!1;s=!0,u=!1}if(p&&!u)return o||(o=new Oo),s||Wh(n)?k1(n,e,t,i,r,o):W7(n,e,l,t,i,r,o);if(!(t&Sce)){var g=u&&Y7.call(n,"__wrapped__"),w=h&&Y7.call(e,"__wrapped__");if(g||w){var y=g?n.value():n,E=w?e.value():e;return o||(o=new Oo),r(y,E,t,i,o)}}return p?(o||(o=new Oo),q7(n,e,t,i,r,o)):!1}var Q7=kce;function Z7(n,e,t,i,r){return n===e?!0:n==null||e==null||!Ft(n)&&!Ft(e)?n!==n&&e!==e:Q7(n,e,t,i,Z7,r)}var fl=Z7;var Ace=1,Ice=2;function xce(n,e,t,i){var r=t.length,o=r,s=!i;if(n==null)return!o;for(n=Object(n);r--;){var a=t[r];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++r<o;){a=t[r];var l=a[0],c=n[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in n))return!1}else{var h=new Oo;if(i)var p=i(c,u,l,n,e,h);if(!(p===void 0?fl(u,c,Ace|Ice,i,h):p))return!1}}return!0}var J7=xce;function Pce(n){return n===n&&!ke(n)}var I1=Pce;function Rce(n){for(var e=Mo(n),t=e.length;t--;){var i=e[t],r=n[i];e[t]=[i,r,I1(r)]}return e}var X7=Rce;function Dce(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var x1=Dce;function Mce(n){var e=X7(n);return e.length==1&&e[0][2]?x1(e[0][0],e[0][1]):function(t){return t===n||J7(t,n,e)}}var e8=Mce;function Oce(n,e){return n!=null&&e in Object(n)}var t8=Oce;function Nce(n,e,t){e=dl(e,n);for(var i=-1,r=e.length,o=!1;++i<r;){var s=wr(e[i]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++i!=r?o:(r=n==null?0:n.length,!!r&&Hh(r)&&rl(s,r)&&(Ct(n)||ou(n)))}var n8=Nce;function Lce(n,e){return n!=null&&n8(n,e,t8)}var i8=Lce;var Fce=1,Vce=2;function Bce(n,e){return Gh(n)&&I1(e)?x1(wr(n),e):function(t){var i=hl(t,n);return i===void 0&&i===e?i8(t,n):fl(e,i,Fce|Vce)}}var r8=Bce;function Uce(n){return function(e){return e?.[n]}}var o8=Uce;function Hce(n){return function(e){return Zh(e,n)}}var s8=Hce;function zce(n){return Gh(n)?o8(wr(n)):s8(n)}var a8=zce;function jce(n){return typeof n=="function"?n:n==null?qi:typeof n=="object"?Ct(n)?r8(n[0],n[1]):e8(n):a8(n)}var P1=jce;function $ce(n){return function(e,t,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[n?a:++r];if(t(o[l],l,o)===!1)break}return e}}var l8=$ce;var Wce=l8(),R1=Wce;function qce(n,e){return n&&R1(n,e,Mo)}var D1=qce;function Gce(n,e){return function(t,i){if(t==null)return t;if(!gr(t))return n(t,i);for(var r=t.length,o=e?r:-1,s=Object(t);(e?o--:++o<r)&&i(s[o],o,s)!==!1;);return t}}var c8=Gce;var Kce=c8(D1),u8=Kce;var Yce=function(){return jt.Date.now()},M1=Yce;var Qce="Expected a function",Zce=Math.max,Jce=Math.min;function Xce(n,e,t){var i,r,o,s,a,l,c=0,u=!1,h=!1,p=!0;if(typeof n!="function")throw new TypeError(Qce);e=ax(e)||0,ke(t)&&(u=!!t.leading,h="maxWait"in t,o=h?Zce(ax(t.maxWait)||0,e):o,p="trailing"in t?!!t.trailing:p);function g(N){var $=i,H=r;return i=r=void 0,c=N,s=n.apply(H,$),s}function w(N){return c=N,a=setTimeout(T,e),u?g(N):s}function y(N){var $=N-l,H=N-c,qe=e-$;return h?Jce(qe,o-H):qe}function E(N){var $=N-l,H=N-c;return l===void 0||$>=e||$<0||h&&H>=o}function T(){var N=M1();if(E(N))return x(N);a=setTimeout(T,y(N))}function x(N){return a=void 0,p&&i?g(N):(i=r=void 0,s)}function V(){a!==void 0&&clearTimeout(a),c=0,i=l=r=a=void 0}function Q(){return a===void 0?s:x(M1())}function he(){var N=M1(),$=E(N);if(i=arguments,r=this,l=N,$){if(a===void 0)return w(l);if(h)return clearTimeout(a),a=setTimeout(T,e),g(l)}return a===void 0&&(a=setTimeout(T,e)),s}return he.cancel=V,he.flush=Q,he}var vr=Xce;function eue(n,e,t){(t!==void 0&&!Do(n[e],t)||t===void 0&&!(e in n))&&ol(n,e,t)}var Tg=eue;function tue(n){return Ft(n)&&gr(n)}var d8=tue;function nue(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var kg=nue;function iue(n){return pr(n,br(n))}var h8=iue;function rue(n,e,t,i,r,o,s){var a=kg(n,t),l=kg(e,t),c=s.get(l);if(c){Tg(n,t,c);return}var u=o?o(a,l,t+"",n,e,s):void 0,h=u===void 0;if(h){var p=Ct(l),g=!p&&Vs(l),w=!p&&!g&&Wh(l);u=l,p||g||w?Ct(a)?u=a:d8(a)?u=l1(a):g?(h=!1,u=m1(l,!0)):w?(h=!1,u=_1(l,!0)):u=[]:Kt(l)||ou(l)?(u=a,ou(a)?u=h8(a):(!ke(a)||Gi(a))&&(u=C1(l))):h=!1}h&&(s.set(l,u),r(u,l,i,o,s),s.delete(l)),Tg(n,t,u)}var f8=rue;function m8(n,e,t,i,r){n!==e&&R1(e,function(o,s){if(r||(r=new Oo),ke(o))f8(n,e,s,t,m8,i,r);else{var a=i?i(kg(n,s),o,s+"",n,e,r):void 0;a===void 0&&(a=o),Tg(n,s,a)}},br)}var O1=m8;var oue=zh(function(n,e,t,i){O1(n,e,t,i)}),px=oue;function sue(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var p8=sue;function aue(n,e){var t=-1,i=gr(n)?Array(n.length):[];return u8(n,function(r,o,s){i[++t]=e(r,o,s)}),i}var g8=aue;function lue(n,e){var t=Ct(n)?o1:g8;return t(n,P1(e,3))}var gx=lue;var cue="[object String]";function uue(n){return typeof n=="string"||!Ct(n)&&Ft(n)&&ai(n)==cue}var N1=uue;function due(n,e){return e.length<2?n:Zh(n,h1(e,0,-1))}var b8=due;function hue(n){return Ft(n)&&n.nodeType===1&&!Kt(n)}var Ki=hue;function fue(n,e){return fl(n,e)}var cu=fue;function mue(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?fl(n,e,void 0,t):!!i}var bx=mue;function pue(n,e){var t={};return e=P1(e,3),D1(n,function(i,r,o){ol(t,r,e(i,r,o))}),t}var wx=pue;var gue=zh(function(n,e,t){O1(n,e,t)}),sf=gue;function bue(n,e){return e=dl(e,n),n=b8(n,e),n==null||delete n[wr(p8(e))]}var w8=bue;function wue(n,e,t,i){if(!ke(n))return n;e=dl(e,n);for(var r=-1,o=e.length,s=o-1,a=n;a!=null&&++r<o;){var l=wr(e[r]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(r!=s){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=ke(u)?u:rl(e[r+1])?[]:{})}Uh(a,l,c),a=a[l]}return n}var v8=wue;function vue(n,e,t){return n==null?n:v8(n,e,t)}var vx=vue;var yue=X6(function(n,e,t){return n+(t?" ":"")+Eg(e)}),yx=yue;var _ue="Expected a function";function Cue(n,e,t){var i=!0,r=!0;if(typeof n!="function")throw new TypeError(_ue);return ke(t)&&(i="leading"in t?!!t.leading:i,r="trailing"in t?!!t.trailing:r),vr(n,e,{leading:i,maxWait:e,trailing:r})}var No=Cue;function Eue(n,e){return n==null?!0:w8(n,e)}var _x=Eue;var Tx;try{Tx={window,document}}catch{Tx={window:{},document:{}}}var j=Tx;function Sue(){try{return navigator.userAgent.toLowerCase()}catch{return""}}var uu=Sue(),se={isMac:L8(uu),isWindows:Tue(uu),isGecko:kue(uu),isSafari:Aue(uu),isiOS:Iue(uu),isAndroid:xue(uu),isBlink:Pue(uu),get isMediaForcedColors(){return Due()},get isMotionReduced(){return Mue()},features:{isRegExpUnicodePropertySupported:Rue()}};function L8(n){return n.indexOf("macintosh")>-1}function Tue(n){return n.indexOf("windows")>-1}function kue(n){return!!n.match(/gecko\/\d+/)}function Aue(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function Iue(n){return!!n.match(/iphone|ipad/i)||L8(n)&&navigator.maxTouchPoints>0}function xue(n){return n.indexOf("android")>-1}function Pue(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function Rue(){let n=!1;try{n="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function Due(){return j.window.matchMedia?j.window.matchMedia("(forced-colors: active)").matches:!1}function Mue(){return j.window.matchMedia?j.window.matchMedia("(prefers-reduced-motion)").matches:!1}function Rx(n,e,t,i){t=t||function(l,c){return l===c};let r=Array.isArray(n)?n:Array.prototype.slice.call(n),o=Array.isArray(e)?e:Array.prototype.slice.call(e),s=Oue(r,o,t);return i?Lue(s,o.length):Nue(o,s)}function Oue(n,e,t){let i=y8(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};let r=_8(n,i),o=_8(e,i),s=y8(r,o,t),a=n.length-s,l=e.length-s;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function y8(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function _8(n,e){return n.slice(e).reverse()}function Nue(n,e){let t=[],{firstIndex:i,lastIndexOld:r,lastIndexNew:o}=e;return o-i>0&&t.push({index:i,type:"insert",values:n.slice(i,o)}),r-i>0&&t.push({index:i+(o-i),type:"delete",howMany:r-i}),t}function Lue(n,e){let{firstIndex:t,lastIndexOld:i,lastIndexNew:r}=n;if(t===-1)return Array(e).fill("equal");let o=[];return t>0&&(o=o.concat(Array(t).fill("equal"))),r-t>0&&(o=o.concat(Array(r-t).fill("insert"))),i-t>0&&(o=o.concat(Array(i-t).fill("delete"))),r<e&&(o=o.concat(Array(e-r).fill("equal"))),o}function cf(n,e,t){t=t||function(y,E){return y===E};let i=n.length,r=e.length;if(i>200||r>200||i+r>300)return cf.fastDiff(n,e,t,!0);let o,s;if(r<i){let y=n;n=e,e=y,o="delete",s="insert"}else o="insert",s="delete";let a=n.length,l=e.length,c=l-a,u={},h={};function p(y){let E=(h[y-1]!==void 0?h[y-1]:-1)+1,T=h[y+1]!==void 0?h[y+1]:-1,x=E>T?-1:1;u[y+x]&&(u[y]=u[y+x].slice(0)),u[y]||(u[y]=[]),u[y].push(E>T?o:s);let V=Math.max(E,T),Q=V-y;for(;Q<a&&V<l&&t(n[Q],e[V]);)Q++,V++,u[y].push("equal");return V}let g=0,w;do{for(w=-g;w<c;w++)h[w]=p(w);for(w=c+g;w>c;w--)h[w]=p(w);h[c]=p(c),g++}while(h[c]!==l);return u[c].slice(1)}cf.fastDiff=Rx;function C8(){return function n(){n.called=!0}}var Ri=class{source;name;path;stop;off;return;constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=C8(),this.off=C8()}};var Wn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function Xt(){let[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+Wn[n>>0&255]+Wn[n>>8&255]+Wn[n>>16&255]+Wn[n>>24&255]+Wn[e>>0&255]+Wn[e>>8&255]+Wn[e>>16&255]+Wn[e>>24&255]+Wn[t>>0&255]+Wn[t>>8&255]+Wn[t>>16&255]+Wn[t>>24&255]+Wn[i>>0&255]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255]}var Rn={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function Dx(n,e){let t=Rn.get(e.priority);for(let i=0;i<n.length;i++)if(Rn.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}var Fue="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html",C=class n extends Error{context;data;constructor(e,t,i){super(Vue(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;let i=new n(e.message,t);throw i.stack=e.stack,i}};function ge(n,e){console.warn(...Bue(n,e))}function F8(n){return`
Read more: ${Fue}#error-${n}`}function Vue(n,e){let t=new WeakSet,r=e?` ${JSON.stringify(e,(s,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",o=F8(n);return n+r+o}function Bue(n,e){let t=F8(n);return e?[n,e,t]:[n,t]}var Uue="43.3.1",Hue=new Date(2024,10,6);if(globalThis.CKEDITOR_VERSION)throw new C("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Uue;var af=Symbol("listeningTo"),kx=Symbol("emitterId"),zs=Symbol("delegations"),V8=nt(Object);function nt(n){if(!n)return V8;class e extends n{on(i,r,o){this.listenTo(this,i,r,o)}once(i,r,o){let s=!1,a=(l,...c)=>{s||(s=!0,l.off(),r.call(this,l,...c))};this.listenTo(this,i,a,o)}off(i,r){this.stopListening(this,i,r)}listenTo(i,r,o,s={}){let a,l;this[af]||(this[af]={});let c=this[af];Cx(i)||B8(i);let u=Cx(i);(a=c[u])||(a=c[u]={emitter:i,callbacks:{}}),(l=a.callbacks[r])||(l=a.callbacks[r]=[]),l.push(o),Wue(this,i,r,o,s)}stopListening(i,r,o){let s=this[af],a=i&&Cx(i),l=s&&a?s[a]:void 0,c=l&&r?l.callbacks[r]:void 0;if(!(!s||i&&!l||r&&!c))if(o)Ex(this,i,r,o),c.indexOf(o)!==-1&&(c.length===1?delete l.callbacks[r]:Ex(this,i,r,o));else if(c){for(;o=c.pop();)Ex(this,i,r,o);delete l.callbacks[r]}else if(l){for(r in l.callbacks)this.stopListening(i,r);delete s[a]}else{for(a in s)this.stopListening(s[a].emitter);delete this[af]}}fire(i,...r){try{let o=i instanceof Ri?i:new Ri(this,i),s=o.name,a=H8(this,s);if(o.path.push(this),a){let c=[o,...r];a=Array.from(a);for(let u=0;u<a.length&&(a[u].callback.apply(this,c),o.off.called&&(delete o.off.called,this._removeEventListener(s,a[u].callback)),!o.stop.called);u++);}let l=this[zs];if(l){let c=l.get(s),u=l.get("*");c&&E8(c,o,r),u&&E8(u,o,r)}return o.return}catch(o){C.rethrowUnexpectedError(o,this)}}delegate(...i){return{to:(r,o)=>{this[zs]||(this[zs]=new Map),i.forEach(s=>{let a=this[zs].get(s);a?a.set(r,o):this[zs].set(s,new Map([[r,o]]))})}}}stopDelegating(i,r){if(this[zs])if(!i)this[zs].clear();else if(!r)this[zs].delete(i);else{let o=this[zs].get(i);o&&o.delete(r)}}_addEventListener(i,r,o){$ue(this,i);let s=Ax(this,i),a=Rn.get(o.priority),l={callback:r,priority:a};for(let c of s)Dx(c,l)}_removeEventListener(i,r){let o=Ax(this,i);for(let s of o)for(let a=0;a<s.length;a++)s[a].callback==r&&(s.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{nt[n]=V8.prototype[n]});function zue(n,e){let t=n[af];return t&&t[e]?t[e].emitter:null}function B8(n,e){n[kx]||(n[kx]=e||Xt())}function Cx(n){return n[kx]}function U8(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function jue(){return{callbacks:[],childEvents:[]}}function $ue(n,e){let t=U8(n);if(t[e])return;let i=e,r=null,o=[];for(;i!==""&&!t[i];)t[i]=jue(),o.push(t[i]),r&&t[i].childEvents.push(r),r=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(let s of o)s.callbacks=t[i].callbacks.slice();t[i].childEvents.push(r)}}function Ax(n,e){let t=U8(n)[e];if(!t)return[];let i=[t.callbacks];for(let r=0;r<t.childEvents.length;r++){let o=Ax(n,t.childEvents[r]);i=i.concat(o)}return i}function H8(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?H8(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function E8(n,e,t){for(let[i,r]of n){r?typeof r=="function"&&(r=r(e.name)):r=e.name;let o=new Ri(e.source,r);o.path=[...e.path],i.fire(o,...t)}}function Wue(n,e,t,i,r){e._addEventListener?e._addEventListener(t,i,r):n._addEventListener.call(e,t,i,r)}function Ex(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}var Ag=Symbol("observableProperties"),xg=Symbol("boundObservables"),Ig=Symbol("boundProperties"),du=Symbol("decoratedMethods"),S8=Symbol("decoratedOriginal"),z8=$e(nt());function $e(n){if(!n)return z8;class e extends n{set(i,r){if(ke(i)){Object.keys(i).forEach(s=>{this.set(s,i[s])},this);return}Sx(this);let o=this[Ag];if(i in this&&!o.has(i))throw new C("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return o.get(i)},set(s){let a=o.get(i),l=this.fire(`set:${i}`,i,s,a);l===void 0&&(l=s),(a!==l||!o.has(i))&&(o.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=r}bind(...i){if(!i.length||!T8(i))throw new C("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new C("observable-bind-duplicate-properties",this);Sx(this);let r=this[Ig];i.forEach(s=>{if(r.has(s))throw new C("observable-bind-rebind",this)});let o=new Map;return i.forEach(s=>{let a={property:s,to:[]};r.set(s,a),o.set(s,a)}),{to:que,toMany:Gue,_observable:this,_bindProperties:i,_to:[],_bindings:o}}unbind(...i){if(!this[Ag])return;let r=this[Ig],o=this[xg];if(i.length){if(!T8(i))throw new C("observable-unbind-wrong-properties",this);i.forEach(s=>{let a=r.get(s);a&&(a.to.forEach(([l,c])=>{let u=o.get(l),h=u[c];h.delete(a),h.size||delete u[c],Object.keys(u).length||(o.delete(l),this.stopListening(l,"change"))}),r.delete(s))})}else o.forEach((s,a)=>{this.stopListening(a,"change")}),o.clear(),r.clear()}decorate(i){Sx(this);let r=this[i];if(!r)throw new C("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(o,s)=>{o.return=r.apply(this,s)}),this[i]=function(...o){return this.fire(i,o)},this[i][S8]=r,this[du]||(this[du]=[]),this[du].push(i)}stopListening(i,r,o){if(!i&&this[du]){for(let s of this[du])this[s]=this[s][S8];delete this[du]}super.stopListening(i,r,o)}[Ag];[du];[Ig];[xg]}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{$e[n]=z8.prototype[n]});function Sx(n){n[Ag]||(Object.defineProperty(n,Ag,{value:new Map}),Object.defineProperty(n,xg,{value:new Map}),Object.defineProperty(n,Ig,{value:new Map}))}function que(...n){let e=Yue(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new C("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new C("observable-bind-to-extra-callback",this);e.to.forEach(r=>{if(r.properties.length&&r.properties.length!==i)throw new C("observable-bind-to-properties-length",this);r.properties.length||(r.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),Jue(this._observable,this._to),Zue(this),this._bindProperties.forEach(r=>{j8(this._observable,r)})}function Gue(n,e,t){if(this._bindings.size>1)throw new C("observable-bind-to-many-not-one-binding",this);this.to(...Kue(n,e),t)}function Kue(n,e){let t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function T8(n){return n.every(e=>typeof e=="string")}function Yue(...n){if(!n.length)throw new C("observable-bind-to-parse-error",null);let e={to:[]},t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new C("observable-bind-to-parse-error",null)}),e}function Que(n,e,t,i){let r=n[xg],o=r.get(t),s=o||{};s[i]||(s[i]=new Set),s[i].add(e),o||r.set(t,s)}function Zue(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(r=>{e=r.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([r.observable,e]),Que(n._observable,t,r.observable,e)})})}function j8(n,e){let i=n[Ig].get(e),r;i.callback?r=i.callback.apply(n,i.to.map(o=>o[0][o[1]])):(r=i.to[0],r=r[0][r[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=r:n.set(e,r)}function Jue(n,e){e.forEach(t=>{let i=n[xg],r;i.get(t.observable)||n.listenTo(t.observable,"change",(o,s)=>{r=i.get(t.observable)[s],r&&r.forEach(a=>{j8(n,a.property)})})})}var lf=class{_replacedElements;constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}};function Rg(n){let e=0;for(let t of n)e++;return e}function _n(n,e){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}function li(n){return!!(n&&n[Symbol.iterator])}function Mt(n,e,t={},i=[]){let r=t&&t.xmlns,o=r?n.createElementNS(r,e):n.createElement(e);for(let s in t)o.setAttribute(s,t[s]);(N1(i)||!li(i))&&(i=[i]);for(let s of i)N1(s)&&(s=n.createTextNode(s)),o.appendChild(s);return o}var Pg=class{_config;constructor(e,t){this._config=Object.create(null),t&&this.define(k8(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(let e of Object.keys(this._config))yield e}_setToTarget(e,t,i,r=!1){if(Kt(t)){this._setObjectToTarget(e,t,r);return}let o=t.split(".");t=o.pop();for(let s of o)Kt(e[s])||(e[s]=Object.create(null)),e=e[s];if(Kt(i)){Kt(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,i,r);return}r&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){let i=t.split(".");t=i.pop();for(let r of i){if(!Kt(e[r])){e=null;break}e=e[r]}return e?k8(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(r=>{this._setToTarget(e,r,t[r],i)})}};function k8(n){return lu(n,Xue)}function Xue(n){return Ki(n)||typeof n=="function"?n:void 0}function Lo(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}function F1(n){let e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}var $8=en(nt());function en(n){if(!n)return $8;class e extends n{listenTo(i,r,o,s={}){if(Lo(i)||F1(i)){let a={capture:!!s.useCapture,passive:!!s.usePassive},l=this._getProxyEmitter(i,a)||new Ix(i,a);this.listenTo(l,r,o,s)}else super.listenTo(i,r,o,s)}stopListening(i,r,o){if(Lo(i)||F1(i)){let s=this._getAllProxyEmitters(i);for(let a of s)this.stopListening(a,r,o)}else super.stopListening(i,r,o)}_getProxyEmitter(i,r){return zue(this,W8(i,r))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(r=>this._getProxyEmitter(i,r)).filter(r=>!!r)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{en[n]=$8.prototype[n]});var Ix=class extends nt(){_domNode;_options;constructor(e,t){super(),B8(this,W8(e,t)),this._domNode=e,this._options=t}_domListeners;attach(e){if(this._domListeners&&this._domListeners[e])return;let t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),nt().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){nt().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){let t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}};function ede(n){return n["data-ck-expando"]||(n["data-ck-expando"]=Xt())}function W8(n,e){let t=ede(n);for(let i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}function Mx(n){let e=[],t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function uf(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}function Ox(n){let e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function U1(n){if(!n.target)return null;let e=n.target.ownerDocument,t=n.clientX,i=n.clientY,r=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?r=e.caretRangeFromPoint(t,i):n.rangeParent&&(r=e.createRange(),r.setStart(n.rangeParent,n.rangeOffset),r.collapse(!0)),r}function xt(n){return Object.prototype.toString.call(n)=="[object Text]"}function Dg(n){return Object.prototype.toString.apply(n)=="[object Range]"}function q8(n){return!n||!n.parentNode||n.offsetParent===j.document.body?null:n.offsetParent}var G8=["top","right","bottom","left","width","height"],pe=class n{top;right;bottom;left;width;height;_source;constructor(e){let t=Dg(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),xx(e)||t)if(t){let i=n.getDomRangeRects(e);L1(this,n.getBoundingRect(i))}else L1(this,e.getBoundingClientRect());else if(F1(e)){let{innerWidth:i,innerHeight:r}=e;L1(this,{top:0,right:i,bottom:r,left:0,width:i,height:r})}else L1(this,e)}clone(){return new n(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){let t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{let i=new n(t);return i._source=this._source,i}}getIntersectionArea(e){let t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){let e=this._source,t=this.clone();if(A8(e))return t;let i=e,r=e.parentNode||e.commonAncestorContainer,o;for(;r&&!A8(r);){let s=tde(r)==="visible";i instanceof HTMLElement&&I8(i)==="absolute"&&(o=i);let a=I8(r);if(s||o&&(a==="relative"&&s||a!=="relative")){i=r,r=r.parentNode;continue}let l=new n(r),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=r,r=r.parentNode}return t}isEqual(e){for(let t of G8)if(this[t]!==e[t])return!1;return!0}contains(e){let t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){let{scrollX:e,scrollY:t}=j.window,i=this.clone().moveBy(e,t);if(xx(i._source)){let r=q8(i._source);r&&nde(i,r)}return i}excludeScrollbarsAndBorders(){let e=this._source,t,i,r;if(F1(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,r=e.getComputedStyle(e.document.documentElement).direction;else{let o=Ox(e);t=e.offsetWidth-e.clientWidth-o.left-o.right,i=e.offsetHeight-e.clientHeight-o.top-o.bottom,r=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,r==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){let t=[],i=Array.from(e.getClientRects());if(i.length)for(let r of i)t.push(new n(r));else{let r=e.startContainer;xt(r)&&(r=r.parentNode);let o=new n(r.getBoundingClientRect());o.right=o.left,o.width=0,t.push(o)}return t}static getBoundingRect(e){let t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0},i=0;for(let r of e)i++,t.left=Math.min(t.left,r.left),t.top=Math.min(t.top,r.top),t.right=Math.max(t.right,r.right),t.bottom=Math.max(t.bottom,r.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new n(t))}};function L1(n,e){for(let t of G8)n[t]=e[t]}function A8(n){return xx(n)?n===n.ownerDocument.body:!1}function xx(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function I8(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function tde(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function nde(n,e){let t=new pe(e),i=Ox(e),r=0,o=0;r-=t.left,o-=t.top,r+=e.scrollLeft,o+=e.scrollTop,r-=i.left,o-=i.top,n.moveBy(r,o)}var df=(()=>{class n{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(t,i){n._observerInstance||n._createObserver(),this._element=t,this._callback=i,n._addElementCallback(t,i),n._observerInstance.observe(t)}get element(){return this._element}destroy(){n._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,i){n._elementCallbacks||(n._elementCallbacks=new Map);let r=n._elementCallbacks.get(t);r||(r=new Set,n._elementCallbacks.set(t,r)),r.add(i)}static _deleteElementCallback(t,i){let r=n._getElementCallbacks(t);r&&(r.delete(i),r.size||(n._elementCallbacks.delete(t),n._observerInstance.unobserve(t))),n._elementCallbacks&&!n._elementCallbacks.size&&(n._observerInstance=null,n._elementCallbacks=null)}static _getElementCallbacks(t){return n._elementCallbacks?n._elementCallbacks.get(t):null}static _createObserver(){n._observerInstance=new j.window.ResizeObserver(t=>{for(let i of t){let r=n._getElementCallbacks(i.target);if(r)for(let o of r)o(i)}})}}return n})();function H1(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function $s(n){return e=>e+n}function hf(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function Nx(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}function ff(n){return n&&n.nodeType===Node.COMMENT_NODE}function z1(n){try{j.document.createAttribute(n)}catch{return!1}return!0}function Kr(n){return n?xt(n)?Kr(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function j1({element:n,target:e,positions:t,limiter:i,fitInViewport:r,viewportOffsetConfig:o}){Gi(e)&&(e=e()),Gi(i)&&(i=i());let s=q8(n),a=ide(o),l=new pe(n),c=x8(e,a),u;if(!c||!a.getIntersection(c))return null;let h={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(!i&&!r)u=new V1(t[0],h);else{if(i){let p=x8(i,a);p&&(h.limiterRect=p)}u=rde(t,h)}return u}function x8(n,e){let t=new pe(n).getVisible();return t?t.getIntersection(e):null}function ide(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);let e=new pe(j.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function rde(n,e){let{elementRect:t}=e,i=t.getArea(),r=n.map(a=>new V1(a,e)).filter(a=>!!a.name),o=0,s=null;for(let a of r){let{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;let u=c**2+l**2;u>o&&(o=u,s=a)}return s}var V1=class{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(e,t){let i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;let{left:r,top:o,name:s,config:a}=i;this.name=s,this.config=a,this._positioningFunctionCoordinates={left:r,top:o},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){let e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}};function Lx(n){let e=n.parentNode;e&&e.removeChild(n)}function Fx({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:r}){let o=Vx(n),s=o,a=null;for(e=ade(e);s;){let l;s==o?l=P8(n):l=P8(a),sde({parent:l,getRect:()=>R8(n,s),alignToTop:i,ancestorOffset:t,forceScroll:r});let c=R8(n,s);if(ode({window:s,rect:c,viewportOffset:e,alignToTop:i,forceScroll:r}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}function ode({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:r}){let o=e.clone().moveBy(0,r.bottom),s=e.clone().moveBy(0,-r.top),a=new pe(n).excludeScrollbarsAndBorders(),l=[s,o],c=t&&i,u=l.every(y=>a.contains(y)),{scrollX:h,scrollY:p}=n,g=h,w=p;c?p-=a.top-e.top+r.top:u||(Y8(s,a)?p-=a.top-e.top+r.top:K8(o,a)&&(t?p+=e.top-a.top-r.top:p+=e.bottom-a.bottom+r.bottom)),u||(Q8(e,a)?h-=a.left-e.left+r.left:Z8(e,a)&&(h+=e.right-a.right+r.right)),(h!=g||p!==w)&&n.scrollTo(h,p)}function sde({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:r=0,limiterElement:o}){let s=Vx(n),a=t&&i,l,c,u,h=o||s.document.body;for(;n!=h;)c=e(),l=new pe(n).excludeScrollbarsAndBorders(),u=l.contains(c),a?n.scrollTop-=l.top-c.top+r:u||(Y8(c,l)?n.scrollTop-=l.top-c.top+r:K8(c,l)&&(t?n.scrollTop+=c.top-l.top-r:n.scrollTop+=c.bottom-l.bottom+r)),u||(Q8(c,l)?n.scrollLeft-=l.left-c.left+r:Z8(c,l)&&(n.scrollLeft+=c.right-l.right+r)),n=n.parentNode}function K8(n,e){return n.bottom>e.bottom}function Y8(n,e){return n.top<e.top}function Q8(n,e){return n.left<e.left}function Z8(n,e){return n.right>e.right}function Vx(n){return Dg(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function P8(n){if(Dg(n)){let e=n.commonAncestorContainer;return xt(e)&&(e=e.parentNode),e}else return n.parentNode}function R8(n,e){let t=Vx(n),i=new pe(n);if(t===e)return i;{let r=t;for(;r!=e;){let o=r.frameElement,s=new pe(o).excludeScrollbarsAndBorders();i.moveBy(s.left,s.top),r=r.parent}}return i}function ade(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}var lde={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},cde={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},D8={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},Te=hde(),ude=Object.fromEntries(Object.entries(Te).map(([n,e])=>{let t;return e in D8?t=D8[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function js(n){let e;if(typeof n=="string"){if(e=Te[n.toLowerCase()],!e)throw new C("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?Te.alt:0)+(n.ctrlKey?Te.ctrl:0)+(n.shiftKey?Te.shift:0)+(n.metaKey?Te.cmd:0);return e}function Mg(n){return typeof n=="string"&&(n=fde(n)),n.map(e=>typeof e=="string"?dde(e):e).reduce((e,t)=>t+e,0)}function Og(n){let e=Mg(n);return Object.entries(se.isMac||se.isiOS?lde:cde).reduce((r,[o,s])=>(e&Te[o]&&(e&=~Te[o],r+=s),r),"")+(e?ude[e]:"")}function J8(n){return n==Te.arrowright||n==Te.arrowleft||n==Te.arrowup||n==Te.arrowdown}function Ng(n,e){let t=e==="ltr";switch(n){case Te.arrowleft:return t?"left":"right";case Te.arrowright:return t?"right":"left";case Te.arrowup:return"up";case Te.arrowdown:return"down"}}function dde(n){if(n.endsWith("!"))return js(n.slice(0,-1));let e=js(n);return(se.isMac||se.isiOS)&&e==Te.ctrl?Te.cmd:e}function X8(n,e){let t=Ng(n,e);return t==="down"||t==="right"}function hde(){let n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){let t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function fde(n){return n.split("+").map(e=>e.trim())}var mde=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function Px(n){return mde.includes(n)?"rtl":"ltr"}function He(n){return Array.isArray(n)?n:[n]}j.window.CKEDITOR_TRANSLATIONS||(j.window.CKEDITOR_TRANSLATIONS={});function pde(n,e,t=1,i){if(typeof t!="number")throw new C("translation-service-quantity-not-a-number",null,{quantity:t});let r=i||j.window.CKEDITOR_TRANSLATIONS,o=wde(r);o===1&&(n=Object.keys(r)[0]);let s=e.id||e.string;if(o===0||!bde(n,s,r))return t!==1?e.plural:e.string;let a=r[n].dictionary,l=r[n].getPluralForm||(h=>h===1?0:1),c=a[s];if(typeof c=="string")return c;let u=Number(l(t));return c[u]}function gde(n){return Array.isArray(n)?n.reduce((e,t)=>sf(e,t)):n}function bde(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function wde(n){return Object.keys(n).length}var B1=class{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=Px(this.uiLanguage),this.contentLanguageDirection=Px(this.contentLanguage),this.translations=gde(i),this.t=(r,o)=>this._t(r,o)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=He(t),typeof e=="string"&&(e={string:e});let r=!!e.plural?t[0]:1,o=pde(this.uiLanguage,e,r,this.translations);return vde(o,t)}};function vde(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}var ut=class extends nt(){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(e={},t={}){super();let i=li(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(let r of e)this._items.push(r),this._itemMap.set(this._getItemIdBeforeAdding(r),r)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new C("collection-add-item-invalid-index",this);let i=0;for(let r of e){let o=this._getItemIdBeforeAdding(r),s=t+i;this._items.splice(s,0,r),this._itemMap.set(o,r),this.fire("add",r,s),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new C("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{let t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){let[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);let e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new C("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){let t=this._bindToCollection,i=(r,o,s)=>{let a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(o);if(a&&l)this._bindToExternalToInternalMap.set(o,l),this._bindToInternalToExternalMap.set(l,o);else{let c=e(o);if(!c){this._skippedIndexesFromExternal.push(s);return}let u=s;for(let h of this._skippedIndexesFromExternal)s>h&&u--;for(let h of t._skippedIndexesFromExternal)u>=h&&u++;this._bindToExternalToInternalMap.set(o,c),this._bindToInternalToExternalMap.set(c,o),this.add(c,u);for(let h=0;h<t._skippedIndexesFromExternal.length;h++)u<=t._skippedIndexesFromExternal[h]&&t._skippedIndexesFromExternal[h]++}};for(let r of t)i(null,r,t.getIndex(r));this.listenTo(t,"add",i),this.listenTo(t,"remove",(r,o,s)=>{let a=this._bindToExternalToInternalMap.get(o);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(s<c&&l.push(c-1),s>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){let t=this._idProperty,i;if(t in e){if(i=e[t],typeof i!="string")throw new C("collection-add-invalid-id",this);if(this.get(i))throw new C("collection-add-item-already-exists",this)}else e[t]=i=Xt();return i}_remove(e){let t,i,r,o=!1,s=this._idProperty;if(typeof e=="string"?(i=e,r=this._itemMap.get(i),o=!r,r&&(t=this._items.indexOf(r))):typeof e=="number"?(t=e,r=this._items[t],o=!r,r&&(i=r[s])):(r=e,i=r[s],t=this._items.indexOf(r),o=t==-1||!this._itemMap.get(i)),o)throw new C("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);let a=this._bindToInternalToExternalMap.get(r);return this._bindToInternalToExternalMap.delete(r),this._bindToExternalToInternalMap.delete(a),this.fire("remove",r,t),[r,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};function it(n){let e=n.next();return e.done?null:e.value}var mt=class extends en($e()){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(O8(e))this._addElement(e);else if(M8(e))this._addView(e);else{if(!e.element)throw new C("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){O8(e)?this._removeElement(e):M8(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new C("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{let t=this.externalViews.find(i=>yde(e,i));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}};function M8(n){return"focusTracker"in n&&n.focusTracker instanceof mt}function O8(n){return Ki(n)}function yde(n,e){return N8(n,e)?!0:!!e.focusTracker.externalViews.find(t=>N8(n,t))}function N8(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}var St=class{_listener;constructor(){this._listener=new(en())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+js(i),i)})}set(e,t,i={}){let r=Mg(e),o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+r,(s,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),s.stop()}),s.return=!0)},{priority:o})}press(e){return!!this._listener.fire("_keydown:"+js(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}};function _de(n){let e=new Map;for(let t in n)e.set(t,n[t]);return e}function Di(n){return li(n)?new Map(n):_de(n)}var Cde=1e4;function Bx(n,e,t,i){if(Math.max(e.length,n.length)>Cde)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{let r=Array.from(n);return r.splice(t,i,...e),r}}function mf(n,e){let t;function i(...r){i.cancel(),t=setTimeout(()=>n(...r),e)}return i.cancel=()=>{clearTimeout(t)},i}function e9(n){function e(h){return h.length>=40&&h.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}let i=t.split("-"),r=i[0],o=i[1];if(!o)return e(n);try{atob(o)}catch{try{if(atob(r),!atob(r).length)return e(n)}catch{return e(n)}}if(r.length<40||r.length>255)return"INVALID";let s="";try{atob(r),s=atob(o)}catch{return"INVALID"}if(s.length!==8)return"INVALID";let a=Number(s.substring(0,4)),l=Number(s.substring(4,6))-1,c=Number(s.substring(6,8)),u=new Date(a,l,c);return u<Hue||isNaN(Number(u))?"INVALID":"VALID"}function Ede(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function Sde(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function Tde(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function Lg(n,e){return Sde(n.charAt(e-1))&&Tde(n.charAt(e))}function Fg(n,e){return Ede(n.charAt(e))}var kde=Ade();function $1(n,e){let t=String(n).matchAll(kde);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function Ade(){let n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(r=>r.source).join("|")+")",i=`${e}|${t}(?:\u200D${t})*`;return new RegExp(i,"ug")}var Y1=new WeakMap,t9=!1;function zo({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:r=!1}){let o=n.document;Y1.has(o)||(Y1.set(o,new Map),o.registerPostFixer(a=>Ux(o,a)),o.on("change:isComposing",()=>{n.change(a=>Ux(o,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{s(c)}),e.placeholder?s(e.placeholder):t&&s(t),t&&xde();function s(a){Y1.get(o).set(e,{text:a,isDirectHost:i,keepOnFocus:r,hostElement:i?e:null}),n.change(l=>Ux(o,l))}}function z9(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function j9(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function $9(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(s=>!s.is("uiElement")))return!1;let i=n.document,o=i.selection.anchor;return i.isComposing&&o&&o.parent===n?!1:e||!i.isFocused?!0:!!o&&o.parent!==n}function Ux(n,e){let t=Y1.get(n),i=[],r=!1;for(let[o,s]of t)s.isDirectHost&&(i.push(o),n9(e,o,s)&&(r=!0));for(let[o,s]of t){if(s.isDirectHost)continue;let a=Ide(o);a&&(i.includes(a)||(s.hostElement=a,n9(e,o,s)&&(r=!0)))}return r}function n9(n,e,t){let{text:i,isDirectHost:r,hostElement:o}=t,s=!1;return o.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,o),s=!0),(r||e.childCount==1)&&$9(o,t.keepOnFocus)?z9(n,o)&&(s=!0):j9(n,o)&&(s=!0),s}function Ide(n){if(n.childCount){let e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function xde(){t9||ge("enableplaceholder-deprecated-text-option"),t9=!0}var Cu=class{is(){throw new Error("is() method is abstract")}},Eu=class extends nt(Cu){document;parent;constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new C("view-node-not-found-in-parent",this);return e}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),r=e.getAncestors(t),o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),r=_n(t,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){let e=S1(this);return delete e.parent,e}};Eu.prototype.is=function(n){return n==="node"||n==="view:node"};var Pt=class Kx extends Eu{_textData;constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof Kx?this===e||this.data===e.data:!1}_clone(){return new Kx(this.document,this.data)}};Pt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};var Vo=class extends Cu{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new C("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new C("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){let t=[],i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};Vo.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};var Mi=class{_patterns=[];constructor(...e){this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(let t of e)for(let i of this._patterns){let r=i9(t,i);if(r)return{element:t,pattern:i,match:r}}return null}matchAll(...e){let t=[];for(let i of e)for(let r of this._patterns){let o=i9(i,r);o&&t.push({element:i,pattern:r,match:o})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;let e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}};function i9(n,e){if(typeof e=="function")return e(n);let t={};return e.name&&(t.name=Pde(e.name,n.name),!t.name)||e.attributes&&(t.attributes=Ode(e.attributes,n),!t.attributes)||e.classes&&(t.classes=Nde(e.classes,n),!t.classes)||e.styles&&(t.styles=Lde(e.styles,n),!t.styles)?null:t}function Pde(n,e){return n instanceof RegExp?!!e.match(n):n===e}function xP(n,e,t){let i=Rde(n),r=Array.from(e),o=[];if(i.forEach(([s,a])=>{r.forEach(l=>{Dde(s,l)&&Mde(a,l,t)&&o.push(l)})}),!(!i.length||o.length<i.length))return o}function Rde(n){return Array.isArray(n)?n.map(e=>Kt(e)?((e.key===void 0||e.value===void 0)&&ge("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Kt(n)?Object.entries(n):[[n,!0]]}function Dde(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function Mde(n,e,t){if(n===!0)return!0;let i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function Ode(n,e){let t=new Set(e.getAttributeKeys());return Kt(n)?(n.style!==void 0&&ge("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&ge("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),xP(n,t,i=>e.getAttribute(i))}function Nde(n,e){return xP(n,e.getClassNames(),()=>{})}function Lde(n,e){return xP(n,e.getStyleNames(!0),t=>e.getStyle(t))}var gu=class{_styles;_styleProcessor;constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();let t=Fde(e);for(let[i,r]of t)this._styleProcessor.toNormalizedForm(i,r,this._styles)}has(e){if(this.isEmpty)return!1;let i=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);return Array.isArray(i)}set(e,t){if(ke(e))for(let[i,r]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,r,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){let t=Yx(e);_x(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!ke(this._styles[e]))return this._styles[e];let i=this._styleProcessor.getReducedForm(e,this._styles).find(([r])=>r===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){let e=[],t=Object.keys(this._styles);for(let i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){let t=e.split(".");if(!(t.length>1))return;let r=t.splice(0,t.length-1).join("."),o=hl(this._styles,r);if(!o)return;!Object.keys(o).length&&this.remove(r)}},_f=class{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(ke(t)){Hx(i,Yx(e),t);return}if(this._normalizers.has(e)){let r=this._normalizers.get(e),{path:o,value:s}=r(t);Hx(i,o,s)}else Hx(i,e,t)}getNormalized(e,t){if(!e)return sf({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){let i=this._extractors.get(e);if(typeof i=="string")return hl(t,i);let r=i(e,t);if(r)return r}return hl(t,Yx(e))}getReducedForm(e,t){let i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){let t=new Set;for(let i of this._consumables.keys()){let r=this.getNormalized(i,e);r&&(typeof r!="object"||Object.keys(r).length)&&t.add(i)}for(let i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(let i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}};function Fde(n){let e=null,t=0,i=0,r=null,o=new Map;if(n==="")return o;n.charAt(n.length-1)!=";"&&(n=n+";");for(let s=0;s<n.length;s++){let a=n.charAt(s);if(e===null)switch(a){case":":r||(r=n.substr(t,s-t),i=s+1);break;case'"':case"'":e=a;break;case";":{let l=n.substr(i,s-i);r&&o.set(r.trim(),l.trim()),r=null,t=s+1;break}}else a===e&&(e=null)}return o}function Yx(n){return n.replace("-",".")}function Hx(n,e,t){let i=t;ke(t)&&(i=sf({},hl(n,e),t)),vx(n,e,i)}var yr=class W9 extends Eu{name;_unsafeAttributesToRender=[];_attrs;_children;_classes;_styles;_customProperties=new Map;constructor(e,t,i,r){if(super(e),this.name=t,this._attrs=Vde(i),this._children=[],r&&this._insertChild(0,r),this._classes=new Set,this._attrs.has("class")){let o=this._attrs.get("class");r9(this._classes,o),this._attrs.delete("class")}this._styles=new gu(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*ot(this._attrs.keys())}*getAttributes(){yield*ot(this._attrs.entries()),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){let t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof W9))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(let[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(let t of this._classes)if(!e._classes.has(t))return!1;for(let t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(let t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(let t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){let t=new Mi(...e),i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*ot(this._customProperties.entries())}getIdentity(){let e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(r=>`${r[0]}="${r[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){let t=[];if(e)for(let r of this.getChildren())t.push(r._clone(e));let i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0,r=Bde(this.document,t);for(let o of r)o.parent!==null&&o._remove(),o.parent=this,o.document=this.document,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){let i=String(t);this._fireChange("attributes",this),e=="class"?r9(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(let t of He(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(let t of He(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(let t of He(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};yr.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Vde(n){let e=Di(n);for(let[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function r9(n,e){let t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function Bde(n,e){return typeof e=="string"?[new Pt(n,e)]:(li(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Pt(n,t):t instanceof Vo?new Pt(n,t.data):t))}var Gs=class extends yr{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=q9}};Gs.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function q9(){let n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(let t of n)if(!t.is("uiElement"))return null;return this.childCount}var Cf=class extends $e(Gs){constructor(e,t,i,r){super(e,t,i,r),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",o=>o&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}};Cf.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};var o9=Symbol("rootName"),Wg=class extends Cf{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(o9)}set rootName(e){this._setCustomProperty(o9,e)}set _name(e){this.name=e}};Wg.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};var fu=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new C("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new C("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=z._createAt(e.startPosition):this._position=z._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r;if(i instanceof Pt){if(e.isAtEnd)return this._position=z._createAfter(i),this._next();r=i.data[e.offset]}else r=i.getChild(e.offset);if(r instanceof yr){if(!this.shallow)e=new z(r,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",r,t,e,1)}if(r instanceof Pt){if(this.singleCharacters)return e=new z(r,0),this._position=e,this._next();let o=r.data.length,s;return r==this._boundaryEndParent?(o=this.boundaries.end.offset,s=new Vo(r,0,o),e=z._createAfter(s)):(s=new Vo(r,0,r.data.length),e.offset++),this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof r=="string"){let o;this.singleCharacters?o=1:o=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;let s=new Vo(i,e.offset,o);return e.offset+=o,this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=z._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r;if(i instanceof Pt){if(e.isAtStart)return this._position=z._createBefore(i),this._previous();r=i.data[e.offset-1]}else r=i.getChild(e.offset-1);if(r instanceof yr)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",r,t,e,1)):(e=new z(r,r.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",r,t,e));if(r instanceof Pt){if(this.singleCharacters)return e=new z(r,r.data.length),this._position=e,this._previous();let o=r.data.length,s;if(r==this._boundaryStartParent){let a=this.boundaries.start.offset;s=new Vo(r,a,r.data.length-a),o=s.data.length,e=z._createBefore(s)}else s=new Vo(r,0,r.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",s,t,e,o)}if(typeof r=="string"){let o;if(this.singleCharacters)o=1;else{let a=i===this._boundaryStartParent?this.boundaries.start.offset:0;o=e.offset-a}e.offset-=o;let s=new Vo(i,e.offset,o);return this._position=e,this._formatReturnValue("text",s,t,e,o)}return e=z._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,r,o){return t instanceof Vo&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(r=z._createAfter(t.textNode),this._position=r):i=z._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(r=z._createBefore(t.textNode),this._position=r):i=z._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:r,length:o}}}},z=class Ws extends Cu{parent;offset;constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){let e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof Cf);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){let t=Ws._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new fu(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";let t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);let r=_n(t,i);switch(r){case"prefix":return"before";case"extension":return"after";default:return t[r]<i[r]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new fu(e)}clone(){return new Ws(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Ws)return new this(e.parent,e.offset);{let i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new C("view-createpositionat-offset-required",i)}return new Ws(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Ws(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new C("view-position-after-root",e,{root:e});return new Ws(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Ws(e.textNode,e.offsetInText);if(!e.parent)throw new C("view-position-before-root",e,{root:e});return new Ws(e.parent,e.index)}};z.prototype.is=function(n){return n==="position"||n==="view:position"};var xe=class ml extends Cu{start;end;constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*ot(new fu({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(W1,{direction:"backward"}),t=this.end.getLastMatchingPosition(W1);return e.parent.is("$text")&&e.isAtStart&&(e=z._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=z._createAfter(t.parent)),new ml(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(W1);if(e.isAfter(this.end)||e.isEqual(this.end))return new ml(e,e);let t=this.end.getLastMatchingPosition(W1,{direction:"backward"}),i=e.nodeAfter,r=t.nodeBefore;return i&&i.is("$text")&&(e=new z(i,0)),r&&r.is("$text")&&(t=new z(r,r.data.length)),new ml(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&r}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new ml(this.start,e.start)),this.containsPosition(e.end)&&t.push(new ml(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new ml(t,i)}return null}getWalker(e={}){return e.boundaries=this,new fu(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new ml(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new fu(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new fu(e);yield t.position;for(let i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,r){return new this(new z(e,t),new z(i,r))}static _createFromPositionAndShift(e,t){let i=e,r=e.getShiftedBy(t);return t>0?new this(i,r):new this(r,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){let t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(z._createBefore(e),t)}};xe.prototype.is=function(n){return n==="range"||n==="view:range"};function W1(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}var qs=class G9 extends nt(Cu){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(let e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let r of e._ranges)if(t.isEqual(r)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;let t=Rg(this.getRanges()),i=Rg(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let r of this.getRanges()){r=r.getTrimmed();let o=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),r.start.isEqual(s.start)&&r.end.isEqual(s.end)){o=!0;break}if(!o)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(r);else if(t instanceof G9||t instanceof ib)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof xe)this._setRanges([t],r&&r.backward),this._setFakeOptions(r);else if(t instanceof z)this._setRanges([new xe(t)]),this._setFakeOptions(r);else if(t instanceof Eu){let o=!!r&&!!r.backward,s;if(i===void 0)throw new C("view-selection-setto-required-second-parameter",this);i=="in"?s=xe._createIn(t):i=="on"?s=xe._createOn(t):s=new xe(z._createAt(t,i)),this._setRanges([s],o),this._setFakeOptions(r)}else if(li(t))this._setRanges(t,r&&r.backward),this._setFakeOptions(r);else throw new C("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new C("view-selection-setfocus-no-ranges",this);let i=z._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let r=this.anchor;this._ranges.pop(),i.compareWith(r)=="before"?this._addRange(new xe(i,r),!0):this._addRange(new xe(r,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(let i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof xe))throw new C("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(let t of this._ranges)if(e.isIntersecting(t))throw new C("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new xe(e.start,e.end))}};qs.prototype.is=function(n){return n==="selection"||n==="view:selection"};var ib=class extends nt(Cu){_selection;constructor(...e){super(),this._selection=new qs,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*ot(this._selection.getRanges())}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};ib.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};var Bo=class extends Ri{startRange;_eventPhase;_currentTarget;constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}},zx=Symbol("bubbling contexts");function Qx(n){class e extends n{fire(i,...r){try{let o=i instanceof Ri?i:new Ri(this,i),s=jx(this);if(!s.size)return;if(Vg(o,"capturing",this),pf(s,"$capture",o,...r))return o.return;let a=o.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!K9(s,l):!1,u=l||Ude(a);if(Vg(o,"atTarget",u),!c){if(pf(s,"$text",o,...r))return o.return;Vg(o,"bubbling",u)}for(;u;){if(u.is("rootElement")){if(pf(s,"$root",o,...r))return o.return}else if(u.is("element")&&pf(s,u.name,o,...r))return o.return;if(pf(s,u,o,...r))return o.return;u=u.parent,Vg(o,"bubbling",u)}return Vg(o,"bubbling",this),pf(s,"$document",o,...r),o.return}catch(o){C.rethrowUnexpectedError(o,this)}}_addEventListener(i,r,o){let s=He(o.context||"$document"),a=jx(this);for(let l of s){let c=a.get(l);c||(c=new(nt()),a.set(l,c)),this.listenTo(c,i,r,o)}}_removeEventListener(i,r){let o=jx(this);for(let s of o.values())this.stopListening(s,i,r)}}return e}{let n=Qx(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{Qx[e]=n.prototype[e]})}function Vg(n,e,t){n instanceof Bo&&(n._eventPhase=e,n._currentTarget=t)}function pf(n,e,t,...i){let r=typeof e=="string"?n.get(e):K9(n,e);return r?(r.fire(t,...i),t.stop.called):!1}function K9(n,e){for(let[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function jx(n){return n[zx]||(n[zx]=new Map),n[zx]}function Ude(n){if(!n)return null;let e=n.start.parent,t=n.end.parent,i=e.getPath(),r=t.getPath();return i.length>r.length?e:t}var o_=class extends Qx($e()){selection;roots;stylesProcessor;_postFixers=new Set;constructor(e){super(),this.selection=new ib,this.roots=new ut({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(t=i(e),t)break;while(t)}},s9=10,mu=(()=>{class n extends yr{static DEFAULT_PRIORITY=s9;_priority=s9;_id=null;_clonesGroup=null;constructor(t,i,r,o){super(t,i,r,o),this.getFillerOffset=Hde}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new C("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){let i=super._clone(t);return i._priority=this._priority,i._id=this._id,i}}return n})();mu.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Hde(){if($x(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if($x(n)>1)return null;n=n.parent}return!n||$x(n)>1?null:this.childCount}function $x(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}var Ef=class extends yr{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=zde}_insertChild(e,t){if(t&&(t instanceof Eu||Array.from(t).length>0))throw new C("view-emptyelement-cannot-add",[this,t]);return 0}};Ef.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function zde(){return null}var bu=class extends yr{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=$de}_insertChild(e,t){if(t&&(t instanceof Eu||Array.from(t).length>0))throw new C("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){let t=e.createElement(this.name);for(let i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}};bu.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function jde(n){n.document.on("arrowKey",(e,t)=>Wde(e,t,n.domConverter),{priority:"low"})}function $de(){return null}function Wde(n,e,t){if(e.keyCode==Te.arrowright){let i=e.domTarget.ownerDocument.defaultView.getSelection(),r=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(r||e.shiftKey){let o=i.focusNode,s=i.focusOffset,a=t.domPositionToView(o,s);if(a===null)return;let l=!1,c=a.getLastMatchingPosition(u=>(u.item.is("uiElement")&&(l=!0),!!(u.item.is("uiElement")||u.item.is("attributeElement"))));if(l){let u=t.viewPositionToDom(c);r?i.collapse(u.parent,u.offset):i.extend(u.parent,u.offset)}}}}var Sf=class extends yr{constructor(e,t,i,r){super(e,t,i,r),this.getFillerOffset=qde}_insertChild(e,t){if(t&&(t instanceof Eu||Array.from(t).length>0))throw new C("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}};Sf.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function qde(){return null}var bl=class extends nt(Cu){document;_children=[];_customProperties=new Map;constructor(e,t){super(),this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*ot(this._customProperties.entries())}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0,r=Gde(this.document,t);for(let o of r)o.parent!==null&&o._remove(),o.parent=this,this._children.splice(e,0,o),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};bl.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function Gde(n,e){return typeof e=="string"?[new Pt(n,e)]:(li(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new Pt(n,t):t instanceof Vo?new Pt(n,t.data):t))}var qg=class{document;_cloneGroups=new Map;_slotFactory=null;constructor(e){this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new bl(this.document,e)}createText(e){return new Pt(this.document,e)}createAttributeElement(e,t,i={}){let r=new mu(this.document,e,t);return typeof i.priority=="number"&&(r._priority=i.priority),i.id&&(r._id=i.id),i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createContainerElement(e,t,i={},r={}){let o=null;Kt(i)?r=i:o=i;let s=new Gs(this.document,e,t,o);return r.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),s}createEditableElement(e,t,i={}){let r=new Cf(this.document,e,t);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createEmptyElement(e,t,i={}){let r=new Ef(this.document,e,t);return i.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),r}createUIElement(e,t,i){let r=new bu(this.document,e,t);return i&&(r.render=i),r}createRawElement(e,t,i,r={}){let o=new Sf(this.document,e,t);return i&&(o.render=i),r.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...r.renderUnsafeAttributes),o}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Kt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof z?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){let t=e.parent;if(!t.is("containerElement"))throw new C("view-writer-break-non-container-element",this.document);if(!t.parent)throw new C("view-writer-break-root",this.document);if(e.isAtStart)return z._createBefore(t);if(!e.isAtEnd){let i=t._clone(!1);this.insert(z._createAfter(t),i);let r=new xe(e,z._createAt(t,"end")),o=new z(i,0);this.move(r,o)}return z._createAfter(t)}mergeAttributes(e){let t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){let s=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new z(s,a))}let r=i.getChild(t-1),o=i.getChild(t);if(!r||!o)return e;if(r.is("$text")&&o.is("$text"))return l9(r,o);if(r.is("attributeElement")&&o.is("attributeElement")&&r.isSimilar(o)){let s=r.childCount;return r._appendChild(o.getChildren()),o._remove(),this._removeFromClonedElementsGroup(o),this.mergeAttributes(new z(r,s))}return e}mergeContainers(e){let t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new C("view-writer-merge-containers-invalid-position",this.document);let r=t.getChild(t.childCount-1),o=r instanceof Pt?z._createAt(r,"end"):z._createAt(t,"end");return this.move(xe._createIn(i),z._createAt(t,"end")),this.remove(xe._createOn(i)),o}insert(e,t){t=li(t)?[...t]:[t],Y9(t,this.document);let i=t.reduce((s,a)=>{let l=s[s.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?s.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),s},[]),r=null,o=e;for(let{nodes:s,breakAttributes:a}of i){let l=this._insertNodes(o,s,a);r||(r=l.start),o=l.end}return r?new xe(r,o):new xe(e)}remove(e){let t=e instanceof xe?e:xe._createOn(e);if(Bg(t,this.document),t.isCollapsed)return new bl(this.document);let{start:i,end:r}=this._breakAttributesRange(t,!0),o=i.parent,s=r.offset-i.offset,a=o._removeChildren(i.offset,s);for(let c of a)this._removeFromClonedElementsGroup(c);let l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new bl(this.document,a)}clear(e,t){Bg(e,this.document);let i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(let r of i){let o=r.item,s;if(o.is("element")&&t.isSimilar(o))s=xe._createOn(o);else if(!r.nextPosition.isAfter(e.start)&&o.is("$textProxy")){let a=o.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(s=xe._createIn(a))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);let r=t.parent,o=r.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=r.childCount-o}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof mu))throw new C("view-writer-wrap-invalid-attribute",this.document);if(Bg(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!Kde(i.parent)&&(i=i.getLastMatchingPosition(o=>o.item.is("uiElement"))),i=this._wrapPosition(i,t);let r=this.document.selection;return r.isCollapsed&&r.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new xe(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof mu))throw new C("view-writer-unwrap-invalid-attribute",this.document);if(Bg(e,this.document),e.isCollapsed)return e;let{start:i,end:r}=this._breakAttributesRange(e,!0),o=i.parent,s=this._unwrapChildren(o,i.offset,r.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;let l=this.mergeAttributes(s.end);return new xe(a,l)}rename(e,t){let i=new Gs(this.document,e,t.getAttributes());return this.insert(z._createAfter(t),i),this.move(xe._createIn(t),z._createAt(i,0)),this.remove(xe._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new xe(e,t)}createRangeOn(e){return xe._createOn(e)}createRangeIn(e){return xe._createIn(e)}createSelection(...e){return new qs(...e)}createSlot(e="children"){if(!this._slotFactory)throw new C("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let r;if(i?r=Zx(e):r=e.parent.is("$text")?e.parent.parent:e.parent,!r)throw new C("view-writer-invalid-position-container",this.document);let o;i?o=this._breakAttributes(e,!0):o=e.parent.is("$text")?Wx(e):e;let s=r._insertChild(o.offset,t);for(let u of t)this._addToClonedElementsGroup(u);let a=o.getShiftedBy(s),l=this.mergeAttributes(o);l.isEqual(o)||a.offset--;let c=this.mergeAttributes(a);return new xe(l,c)}_wrapChildren(e,t,i,r){let o=t,s=[];for(;o<i;){let l=e.getChild(o),c=l.is("$text"),u=l.is("attributeElement");if(u&&this._wrapAttributeElement(r,l))s.push(new z(e,o));else if(c||!u||Yde(r,l)){let h=r._clone();l._remove(),h._appendChild(l),e._insertChild(o,h),this._addToClonedElementsGroup(h),s.push(new z(e,o))}else this._wrapChildren(l,0,l.childCount,r);o++}let a=0;for(let l of s){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return xe._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,r){let o=t,s=[];for(;o<i;){let l=e.getChild(o);if(!l.is("attributeElement")){o++;continue}if(l.isSimilar(r)){let c=l.getChildren(),u=l.childCount;l._remove(),e._insertChild(o,c),this._removeFromClonedElementsGroup(l),s.push(new z(e,o),new z(e,o+u)),o+=u,i+=u-1;continue}if(this._unwrapAttributeElement(r,l)){s.push(new z(e,o),new z(e,o+1)),o++;continue}this._unwrapChildren(l,0,l.childCount,r),o++}let a=0;for(let l of s){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return xe._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){let{start:i,end:r}=this._breakAttributesRange(e,!0),o=i.parent,s=this._wrapChildren(o,i.offset,r.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;let l=this.mergeAttributes(s.end);return new xe(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return a9(e.clone());e.parent.is("$text")&&(e=Wx(e));let i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);let r=new xe(e,e.getShiftedBy(1));this.wrap(r,t);let o=new z(i.parent,i.index);i._remove();let s=o.nodeBefore,a=o.nodeAfter;return s instanceof Pt&&a instanceof Pt?l9(s,a):a9(o)}_wrapAttributeElement(e,t){if(!c9(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(let i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(let i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(let i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!c9(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(let i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){let i=e.start,r=e.end;if(Bg(e,this.document),e.isCollapsed){let l=this._breakAttributes(e.start,t);return new xe(l,l)}let o=this._breakAttributes(r,t),s=o.parent.childCount,a=this._breakAttributes(i,t);return o.offset+=o.parent.childCount-s,new xe(a,o)}_breakAttributes(e,t=!1){let i=e.offset,r=e.parent;if(e.parent.is("emptyElement"))throw new C("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new C("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new C("view-writer-cannot-break-raw-element",this.document);if(!t&&r.is("$text")&&Jx(r.parent)||Jx(r))return e.clone();if(r.is("$text"))return this._breakAttributes(Wx(e),t);let o=r.childCount;if(i==o){let s=new z(r.parent,r.index+1);return this._breakAttributes(s,t)}else if(i===0){let s=new z(r.parent,r.index);return this._breakAttributes(s,t)}else{let s=r.index+1,a=r._clone();r.parent._insertChild(s,a),this._addToClonedElementsGroup(a);let l=r.childCount-i,c=r._removeChildren(i,l);a._appendChild(c);let u=new z(r.parent,s);return this._breakAttributes(u,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(let r of e.getChildren())this._addToClonedElementsGroup(r);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(let r of e.getChildren())this._removeFromClonedElementsGroup(r);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i&&i.delete(e)}};function Kde(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function Zx(n){let e=n.parent;for(;!Jx(e);){if(!e)return;e=e.parent}return e}function Yde(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function a9(n){let e=n.nodeBefore;if(e&&e.is("$text"))return new z(e,e.data.length);let t=n.nodeAfter;return t&&t.is("$text")?new z(t,0):n}function Wx(n){if(n.offset==n.parent.data.length)return new z(n.parent.parent,n.parent.index+1);if(n.offset===0)return new z(n.parent.parent,n.parent.index);let e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new Pt(n.root.document,e)),new z(n.parent.parent,n.parent.index+1)}function l9(n,e){let t=n.data.length;return n._data+=e.data,e._remove(),new z(n,t)}var Qde=[Pt,mu,Gs,Ef,Sf,bu];function Y9(n,e){for(let t of n){if(!Qde.some(i=>t instanceof i))throw new C("view-writer-insert-invalid-node-type",e);t.is("$text")||Y9(t.getChildren(),e)}}function Jx(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Bg(n,e){let t=Zx(n.start),i=Zx(n.end);if(!t||!i||t!==i)throw new C("view-writer-invalid-range-container",e)}function c9(n,e){return n.id===null&&e.id===null}var Q9=n=>n.createTextNode("\xA0"),Z9=n=>{let e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},J9=n=>{let e=n.createElement("br");return e.dataset.ckeFiller="true",e},Qr=7,Gg="\u2060".repeat(Qr);function Yi(n){return typeof n=="string"?n.substr(0,Qr)===Gg:xt(n)&&n.data.substr(0,Qr)===Gg}function bf(n){return n.data.length==Qr&&Yi(n)}function u9(n){let e=typeof n=="string"?n:n.data;return Yi(n)?e.slice(Qr):e}function Zde(n){n.document.on("arrowKey",Jde,{priority:"low"})}function Jde(n,e){if(e.keyCode==Te.arrowleft){let t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){let i=t.getRangeAt(0).startContainer,r=t.getRangeAt(0).startOffset;Yi(i)&&r<=Qr&&t.collapse(i,0)}}}var Q1=class extends $e(){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(e,t){super(),this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),se.isBlink&&!se.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new C("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!se.isAndroid)return;let e=null,t=se.isBlink&&!se.isAndroid?!this.isSelecting:!0;for(let i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=z._createBefore(e.parent)));for(let i of this.markedAttributes)this._updateAttrs(i);for(let i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(let i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){let i=this.domConverter.viewPositionToDom(e),r=i.parent.ownerDocument;Yi(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=d9(r,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){let t=this.domConverter.mapViewToDom(e);if(!t)return;let i=Array.from(t.childNodes),r=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),o=this._diffNodeLists(i,r),s=this._findUpdateActions(o,i,r,ehe);if(s.indexOf("update")!==-1){let a={equal:0,insert:0,delete:0};for(let l of s)if(l==="update"){let c=a.equal+a.insert,u=a.equal+a.delete,h=e.getChild(c);h&&!h.is("uiElement")&&!h.is("rawElement")&&this._updateElementMappings(h,i[u]),Lx(r[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){let e=this.selection.getFirstPosition();return e.parent.is("$text")?z._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&xt(t.parent)&&Yi(t.parent))}_removeInlineFiller(){let e=this._inlineFiller;if(!Yi(e))throw new C("view-renderer-filler-was-lost",this);bf(e)?e.remove():e.data=e.data.substr(Qr),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!Xde(t))return!1;let r=e.nodeBefore,o=e.nodeAfter;return!(r instanceof Pt||o instanceof Pt||i===t.getFillerOffset()&&(!r||!r.is("element","br"))||se.isAndroid&&(r||o))}_updateText(e,t){let i=this.domConverter.findCorrespondingDomText(e),o=this.domConverter.viewToDom(e).data,s=t.inlineFillerPosition;s&&s.parent==e.parent&&s.offset==e.index&&(o=Gg+o),this._updateTextNode(i,o)}_updateAttrs(e){let t=this.domConverter.mapViewToDom(e);if(t){for(let i of t.attributes){let r=i.name;e.hasAttribute(r)||this.domConverter.removeDomElementAttribute(t,r)}for(let i of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,i,e.getAttribute(i),e)}}_updateChildren(e,t){let i=this.domConverter.mapViewToDom(e);if(!i)return;if(se.isAndroid){let h=null;for(let p of Array.from(i.childNodes)){if(h&&xt(h)&&xt(p)){i.normalize();break}h=p}}let r=t.inlineFillerPosition,o=i.childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));r&&r.parent===e&&d9(i.ownerDocument,s,r.offset);let a=this._diffNodeLists(o,s),l=this._findUpdateActions(a,o,s,the),c=0,u=new Set;for(let h of l)h==="delete"?(u.add(o[c]),Lx(o[c])):(h==="equal"||h==="update")&&c++;c=0;for(let h of l)h==="insert"?(Nx(i,c,s[c]),c++):h==="update"?(this._updateTextNode(o[c],s[c].data),c++):h==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(s[c])),c++);for(let h of u)h.parentNode||this.domConverter.unbindDomElement(h)}_diffNodeLists(e,t){return e=rhe(e,this._fakeSelectionContainer),cf(e,t,nhe.bind(null,this.domConverter))}_findUpdateActions(e,t,i,r){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let o=[],s=[],a=[],l={equal:0,insert:0,delete:0};for(let c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?s.push(t[l.equal+l.delete]):(o=o.concat(cf(s,a,r).map(u=>u==="equal"?"update":u)),o.push("equal"),s=[],a=[]),l[c]++;return o.concat(cf(s,a,r).map(c=>c==="equal"?"update":c))}_updateTextNode(e,t){let i=e.data;i!=t&&(se.isAndroid&&this.isComposing&&i.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){let i=Rx(e.data,t);for(let r of i)r.type==="insert"?e.insertData(r.index,r.values.join("")):e.deleteData(r.index,r.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(let t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(se.isBlink&&!se.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}let e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&se.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){let t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=ohe(t));let i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xA0";let r=t.getSelection(),o=t.createRange();r.removeAllRanges(),o.selectNodeContents(i),r.addRange(o)}_updateDomSelection(e){let t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;let i=this.domConverter.viewPositionToDom(this.selection.anchor),r=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,r.parent,r.offset),se.isGecko&&ihe(r,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;let t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){let t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(let e of this.domDocuments){let t=e.getSelection();if(t.rangeCount){let i=e.activeElement,r=this.domConverter.mapDomToView(i);i&&r&&t.removeAllRanges()}}}_removeFakeSelection(){let e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){let e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function Xde(n){if(n.getAttribute("contenteditable")=="false")return!1;let e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function d9(n,e,t){let i=e instanceof Array?e:e.childNodes,r=i[t];if(xt(r))return r.data=Gg+r.data,r;{let o=n.createTextNode(Gg);return Array.isArray(e)?i.splice(t,0,o):Nx(e,t,o),o}}function ehe(n,e){return Lo(n)&&Lo(e)&&!xt(n)&&!xt(e)&&!ff(n)&&!ff(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function the(n,e){return Lo(n)&&Lo(e)&&xt(n)&&xt(e)}function nhe(n,e,t){return e===t?!0:xt(e)&&xt(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function ihe(n,e){let t=n.parent,i=n.offset;if(xt(t)&&bf(t)&&(i=hf(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;let r=t.childNodes[i];r&&r.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function rhe(n,e){let t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function ohe(n){let e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}var she=J9(j.document),ahe=Q9(j.document),lhe=Z9(j.document),q1="data-ck-unsafe-attribute-",h9="data-ck-unsafe-element",wu=class{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new Mi;_inlineObjectElementMatcher=new Mi;_elementsWithTemporaryCustomProperties=new Set;constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?j.document:j.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new qs(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){let t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(let i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}let i=new DOMParser().parseFromString(t,"text/html"),r=i.createDocumentFragment(),o=i.body.childNodes;for(;o.length>0;)r.appendChild(o[0]);let s=i.createTreeWalker(r,NodeFilter.SHOW_ELEMENT),a=[],l;for(;l=s.nextNode();)a.push(l);for(let c of a){for(let h of c.getAttributeNames())this.setDomElementAttribute(c,h,c.getAttribute(h));let u=c.tagName.toLowerCase();this._shouldRenameElement(u)&&(m9(u),c.replaceWith(this._createReplacementDomElement(u,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(r)}viewToDom(e,t={}){if(e.is("$text")){let i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{let i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let r;if(i.is("documentFragment"))r=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(r,i);else{if(i.is("uiElement"))return i.name==="$comment"?r=this._domDocument.createComment(i.getCustomProperty("$rawContent")):r=i.render(this._domDocument,this),t.bind&&this.bindElements(r,i),r;this._shouldRenameElement(i.name)?(m9(i.name),r=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?r=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):r=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(r,this),t.bind&&this.bindElements(r,i);for(let o of i.getAttributeKeys())this.setDomElementAttribute(r,o,i.getAttribute(o),i)}if(t.withChildren!==!1)for(let o of this.viewChildrenToDom(i,t))r instanceof HTMLTemplateElement?r.content.appendChild(o):r.appendChild(o);return r}}setDomElementAttribute(e,t,i,r){let o=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||r&&r.shouldRenderUnsafeAttribute(t);if(o||ge("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!z1(t)){ge("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!o?e.removeAttribute(t):e.hasAttribute(q1+t)&&o&&e.removeAttribute(q1+t),e.setAttribute(o?t:q1+t,i)}removeDomElementAttribute(e,t){t!=h9&&(e.removeAttribute(t),e.removeAttribute(q1+t))}*viewChildrenToDom(e,t={}){let i=e.getFillerOffset&&e.getFillerOffset(),r=0;for(let o of e.getChildren()){i===r&&(yield this._getBlockFiller());let s=o.is("element")&&!!o.getCustomProperty("dataPipeline:transparentRendering")&&!it(o.getAttributes());if(s&&this.renderingMode=="data")if(o.is("rawElement")){let a=this._domDocument.createElement(o.name);o.render(a,this),yield*ot([...a.childNodes])}else yield*ot(this.viewChildrenToDom(o,t));else s&&ge("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:o}),yield this.viewToDom(o,t);r++}i===r&&(yield this._getBlockFiller())}viewRangeToDom(e){let t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),r=this._domDocument.createRange();return r.setStart(t.parent,t.offset),r.setEnd(i.parent,i.offset),r}viewPositionToDom(e){let t=e.parent;if(t.is("$text")){let i=this.findCorrespondingDomText(t);if(!i)return null;let r=e.offset;return Yi(i)&&(r+=Qr),{parent:i,offset:r}}else{let i,r,o;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;o=i.childNodes[0]}else{let a=e.nodeBefore;if(r=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!r)return null;i=r.parentNode,o=r.nextSibling}if(xt(o)&&Yi(o))return{parent:o,offset:Qr};let s=r?hf(r)+1:0;return{parent:i,offset:s}}}domToView(e,t={}){let i=[],r=this._domToView(e,t,i),o=r.next().value;return!o||(r.next(),this._processDomInlineNodes(null,i,t),o.is("$text")&&o.data.length==0)?null:o}*domChildrenToView(e,t={},i=[]){let r=[];e instanceof HTMLTemplateElement?r=[...e.content.childNodes]:r=[...e.childNodes];for(let o=0;o<r.length;o++){let s=r[o],a=this._domToView(s,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),yield l,a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(dhe(e))return new qs([]);if(e.rangeCount===1){let r=e.getRangeAt(0).startContainer;xt(r)&&(r=r.parentNode);let o=this.fakeSelectionToView(r);if(o)return o}let t=this.isDomSelectionBackward(e),i=[];for(let r=0;r<e.rangeCount;r++){let o=e.getRangeAt(r),s=this.domRangeToView(o);s&&i.push(s)}return new qs(i,{backward:t})}domRangeToView(e){let t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new xe(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,hf(e));let i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return z._createBefore(i);if(xt(e)){if(bf(e))return this.domPositionToView(e.parentNode,hf(e));let r=this.findCorrespondingViewText(e),o=t;return r?(Yi(e)&&(o-=Qr,o=o<0?0:o),new z(r,o)):null}else{if(t===0){let r=this.mapDomToView(e);if(r)return new z(r,0)}else{let r=e.childNodes[t-1];if(xt(r)&&bf(r)||r&&this.isBlockFiller(r))return this.domPositionToView(r.parentNode,hf(r));let o=xt(r)?this.findCorrespondingViewText(r):this.mapDomToView(r);if(o&&o.parent)return new z(o.parent,o.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(bf(e))return null;let t=this.getHostViewElement(e);if(t)return t;let i=e.previousSibling;if(i){if(!this.isElement(i))return null;let r=this.mapDomToView(i);if(r){let o=r.nextSibling;return o instanceof Pt?o:null}}else{let r=this.mapDomToView(e.parentNode);if(r){let o=r.getChild(0);return o instanceof Pt?o:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){let t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){let t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){let{scrollX:i,scrollY:r}=j.window,o=[];f9(t,s=>{let{scrollLeft:a,scrollTop:l}=s;o.push([a,l])}),t.focus(),f9(t,s=>{let[a,l]=o.shift();s.scrollLeft=a,s.scrollTop=l}),j.window.scrollTo(i,r)}}_clearDomSelection(){let e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;let t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(she):e.tagName==="BR"&&X9(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(lhe)||uhe(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;let t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}let i=t.collapsed;return t.detach(),i}getHostViewElement(e){let t=Mx(e);for(t.pop();t.length;){let i=t.pop(),r=this._domToViewMapping.get(i);if(r&&(r.is("uiElement")||r.is("rawElement")))return r}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(let e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return Q9(this._domDocument);case"markedNbsp":return Z9(this._domDocument);case"br":return J9(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(xt(e)&&Yi(e)&&t<Qr||this.isElement(e)&&Yi(e.childNodes[t]))return!1;let i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;let r=this.getHostViewElement(e);if(r)return r;if(ff(e)&&t.skipComments)return null;if(xt(e)){if(bf(e))return null;{let o=e.data;if(o==="")return null;let s=new Pt(this.document,o);return i.push(s),s}}else{let o=this.mapDomToView(e);if(o)return this._isInlineObjectElement(o)&&i.push(o),o;if(this.isDocumentFragment(e))o=new bl(this.document),t.bind&&this.bindDocumentFragments(e,o);else{o=this._createViewElement(e,t),t.bind&&this.bindElements(e,o);let a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)o._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(o,t))return o._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(o)||i.push(o),o;if(ff(e))return o._setCustomProperty("$rawContent",e.data),o}yield o;let s=[];if(t.withChildren!==!1)for(let a of this.domChildrenToView(e,t,s))o._appendChild(a);if(this._isInlineObjectElement(o))i.push(o),this._processDomInlineNodes(null,s,t);else for(let a of s)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let r=!1;for(let o=0;o<t.length;o++){let s=t[o];if(!s.is("$text")){r=!1;continue}let a,l=!1;if(this._isPreFormatted(s))a=u9(s.data);else{a=s.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));let c=o>0?t[o-1]:null,u=o+1<t.length?t[o+1]:null,h=!c||c.is("element")&&c.name=="br"||r,p=u?!1:!Yi(s.data);i.withChildren!==!1&&(h&&(a=a.replace(/^ /,"")),p&&(a=a.replace(/ $/,""))),a=u9(a),a=a.replace(/ \u00A0/g,"  ");let g=u&&u.is("element")&&u.name!="br",w=u&&u.is("$text")&&u.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!u||g||w)&&(a=a.replace(/\u00A0$/," ")),(h||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&s.parent?(s._remove(),t.splice(o,1),o--):(s._data=a,r=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){let i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){let i=this._getTouchingInlineViewNode(e,!0),r=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||r)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;let t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(che(e,this.preElements))return!0;for(let t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){let i=new fu({startPosition:t?z._createAfter(e):z._createBefore(e),direction:t?"forward":"backward"});for(let{item:r}of i){if(r.is("$textProxy"))return r;if(r.is("element")&&r.getCustomProperty("dataPipeline:transparentRendering"))continue;if(r.is("element","br"))return null;if(this._isInlineObjectElement(r))return r;if(r.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(ff(e))return new bu(this.document,"$comment");let i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new yr(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){let t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){let i=this._domDocument.createElement("span");if(i.setAttribute(h9,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(let r of t.getAttributeNames())i.setAttribute(r,t.getAttribute(r))}return i}};function che(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function f9(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function uhe(n,e){return n.isEqualNode(ahe)&&X9(n,e)&&n.parentNode.childNodes.length===1}function X9(n,e){let t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function m9(n){n==="script"&&ge("domconverter-unsafe-script-element-detected"),n==="style"&&ge("domconverter-unsafe-style-element-detected")}function dhe(n){if(!se.isGecko||!n.rangeCount)return!1;let e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}var qn=class extends en(){view;document;_isEnabled=!1;constructor(e){super(),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}},Uo=class{view;document;domEvent;domTarget;constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,qh(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}},_r=class extends qn{useCapture=!1;usePassive=!1;observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(r,o)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(o.target)&&this.onDomEvent(o)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Uo(this.view,t,i))}},Xx=class extends _r{domEventType=["keydown","keyup"];onDomEvent(e){let t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return js(this)}};this.fire(e.type,e,t)}},eP=class extends qn{_fireSelectionChangeDoneDebounced;constructor(e){super(e),this._fireSelectionChangeDoneDebounced=vr(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){let e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){let t=this.document.selection,i=new qs(t.getRanges(),{backward:t.isBackward,fake:!1});(e==Te.arrowleft||e==Te.arrowup)&&i.setTo(i.getFirstPosition()),(e==Te.arrowright||e==Te.arrowdown)&&i.setTo(i.getLastPosition());let r={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}},Z1=class extends qn{domConverter;_config;_domElements;_mutationObserver;constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(let t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(let e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;let t=this.domConverter,i=new Set,r=new Set;for(let s of e){let a=t.mapDomToView(s.target);a&&(a.is("uiElement")||a.is("rawElement")||s.type==="childList"&&!this._isBogusBrMutation(s)&&r.add(a))}for(let s of e){let a=t.mapDomToView(s.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&s.type==="characterData"){let l=t.findCorrespondingViewText(s.target);l&&!r.has(l.parent)?i.add(l):!l&&Yi(s.target)&&r.add(t.mapDomToView(s.target.parentNode))}}let o=[];for(let s of i)o.push({type:"text",node:s});for(let s of r){let a=t.mapViewToDom(s),l=Array.from(s.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));bx(l,c,hhe)||o.push({type:"children",node:s})}o.length&&this.document.fire("mutations",{mutations:o})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function hhe(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}var vu=class extends _r{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(e){super(e),this.useCapture=!0;let t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(i,r)=>this._handleBlur(r)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){let t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}},tP=class extends qn{mutationObserver;focusObserver;selection;domConverter;_documents;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter;constructor(e){super(e),this.mutationObserver=e.getObserver(Z1),this.focusObserver=e.getObserver(vu),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=vr(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=vr(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){let t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},r=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",r,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",r,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",r,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!se.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;let t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();let i=this.domConverter.domSelectionToView(t);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(i))this.view.forceRender();else{let r={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",r),this._fireSelectionChangeDoneDebounced(r)}}}_clearInfiniteLoop(){this._loopbackCounter=0}},nP=class extends _r{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(e){super(e);let t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}};var Kg=class{_files;_native;constructor(e,t={}){this._files=t.cacheFiles?p9(e):null,this._native=e}get files(){return this._files||(this._files=p9(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function p9(n){let e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}var iP=class extends _r{domEventType="beforeinput";onDomEvent(e){let t=e.getTargetRanges(),i=this.view,r=i.document,o=null,s=null,a=[];if(e.dataTransfer&&(o=new Kg(e.dataTransfer)),e.data!==null?s=e.data:o&&(s=o.getData("text/plain")),r.selection.isFake)a=Array.from(r.selection.getRanges());else if(t.length)a=t.map(l=>{let c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),u=i.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return i.createRange(c,u);if(u)return i.createRange(u)}).filter(l=>!!l);else if(se.isAndroid){let l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(se.isAndroid&&e.inputType=="insertCompositionText"&&s&&s.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&s&&s.includes(`
`)){let l=s.split(/\n{1,2}/g),c=a;for(let u=0;u<l.length;u++){let h=l[u];h!=""&&(this.fire(e.type,e,{data:h,dataTransfer:o,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[r.selection.getFirstRange()]),u+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[r.selection.getFirstRange()])}return}this.fire(e.type,e,{data:s,dataTransfer:o,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}},rP=class extends qn{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&J8(i.keyCode)){let r=new Bo(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(r,i),r.stop.called&&t.stop()}})}observe(){}stopObserving(){}},oP=class extends qn{constructor(e){super(e);let t=this.document;t.on("keydown",(i,r)=>{if(!this.isEnabled||r.keyCode!=Te.tab||r.ctrlKey)return;let o=new Bo(t,"tab",t.selection.getFirstRange());t.fire(o,r),o.stop.called&&i.stop()})}observe(){}stopObserving(){}},Tf=class extends $e(){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(e){super(),this.document=new o_(e),this.domConverter=new wu(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new Q1(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new qg(this.document),this.addObserver(Z1),this.addObserver(vu),this.addObserver(tP),this.addObserver(Xx),this.addObserver(eP),this.addObserver(nP),this.addObserver(rP),this.addObserver(iP),this.addObserver(oP),Zde(this),jde(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),se.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:i})=>{i.forEach(r=>this._renderer.markToSync(r.type,r.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){let i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();let r={};for(let{name:s,value:a}of Array.from(e.attributes))r[s]=a,s==="class"?this._writer.addClass(a.split(" "),i):i.hasAttribute(s)||this._writer.setAttribute(s,a,i);this._initialDomRootAttributes.set(e,r);let o=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};o(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(s,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(s,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(s,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(o)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(let s of this._observers.values())s.observe(e,t)}detachDomRoot(e){let t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:r})=>t.removeAttribute(r));let i=this._initialDomRootAttributes.get(t);for(let r in i)t.setAttribute(r,i[r]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(let r of this._observers.values())r.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(let[i,r]of this.domRoots)t.observe(r,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(let e of this._observers.values())e.disable()}enableObservers(){for(let e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:r=20}={}){let o=this.document.selection.getFirstRange();if(!o)return;let s=$n({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:r});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});let a={target:this.domConverter.viewRangeToDom(o),viewportOffset:i,ancestorOffset:r,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,s),Fx(a)}focus(){if(!this.document.isFocused){let e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new C("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;let t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){C.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(vu).flush(),this.change(()=>{})}destroy(){for(let e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new xe(e,t)}createRangeOn(e){return xe._createOn(e)}createRangeIn(e){return xe._createIn(e)}createSelection(...e){return new qs(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};var Ho=class{is(){throw new Error("is() method is abstract")}},Su=class extends Ho{parent=null;_attrs;_index=null;_startOffset=null;constructor(e){super(),this._attrs=Di(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),r=e.getAncestors(t),o=0;for(;i[o]==r[o]&&i[o];)o++;return o===0?null:i[o-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),r=_n(t,i);switch(r){case"prefix":return!0;case"extension":return!1;default:return t[r]<i[r]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){let e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=Di(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};Su.prototype.is=function(n){return n==="node"||n==="model:node"};var pu=class{_nodes=[];_offsetToNode=[];constructor(e){e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;let t=this._nodes[e];if(!t)throw new C("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;let t=this._offsetToNode[e];if(!t)throw new C("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){for(let s of t)if(!(s instanceof Su))throw new C("model-nodelist-insertnodes-not-node",this);let i=Array.from(t),r=fhe(i),o=this.indexToOffset(e);this._nodes=Bx(this._nodes,i,e,0),this._offsetToNode=Bx(this._offsetToNode,r,o,0);for(let s=e;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=o,o+=this._nodes[s].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e),r=this._nodes.splice(e,t),o=r[r.length-1],s=o.startOffset+o.offsetSize-i;this._offsetToNode.splice(i,s);for(let a of r)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return r}toJSON(){return this._nodes.map(e=>e.toJSON())}};function fhe(n){let e=[];for(let t of n){let i=e.length;e.length+=t.offsetSize,e.fill(t,i)}return e}var wt=class n extends Su{_data;constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){let e=super.toJSON();return e.data=this.data,e}_clone(){return new n(this.data,this.getAttributes())}static fromJSON(e){return new n(e.data,e.attributes)}};wt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};var Qi=class extends Ho{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new C("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new C("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){let e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}};Qi.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};var dt=class n extends Su{name;_children=new pu;constructor(e,t,i){super(t),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(let i of e)t=t.getChildAtOffset(i);return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){let e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(let t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){let t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new n(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=mhe(t);for(let r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let r of i)r.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(let i of e.children)i.name?t.push(n.fromJSON(i)):t.push(wt.fromJSON(i))}return new n(e.name,e.attributes,t)}};dt.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function mhe(n){return typeof n=="string"?[new wt(n)]:(li(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new wt(e):e instanceof Qi?new wt(e.data,e.getAttributes()):e))}var Zi=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new C("model-tree-walker-no-start-position",null);let t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new C("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=O._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,r,o;do r=this.position,o=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=r,this._visitedParent=o)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let r=jg(t,i),o=r||eU(t,i,r);if(o instanceof dt){if(!this.shallow)t.path.push(0),this._visitedParent=o;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,hu("elementStart",o,e,t,1)}if(o instanceof wt){let s;if(this.singleCharacters)s=1;else{let c=o.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),s=c-t.offset}let a=t.offset-o.startOffset,l=new Qi(o,a,s);return t.offset+=s,this._position=t,hu("text",l,e,t,s)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():hu("elementEnd",i,e,t)}_previous(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let r=t.parent,o=jg(t,r),s=o||tU(t,r,o);if(s instanceof dt)return t.offset--,this.shallow?(this._position=t,hu("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this._position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():hu("elementEnd",s,e,t));if(s instanceof wt){let a;if(this.singleCharacters)a=1;else{let u=s.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>u&&(u=this.boundaries.start.offset),a=t.offset-u}let l=t.offset-s.startOffset,c=new Qi(s,l-a,a);return t.offset-=a,this._position=t,hu("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,hu("elementStart",i,e,t,1)}};function hu(n,e,t,i,r){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:r}}}var O=class n extends Ho{root;path;stickiness;constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new C("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new C("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new C("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new C("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return jg(this,this.parent)}get nodeAfter(){let e=this.parent;return eU(this,e,jg(this,e))}get nodeBefore(){let e=this.parent;return tU(this,e,jg(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";let t=_n(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new Zi(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){let e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){let t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];let t=_n(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),r=0;for(;t[r]==i[r]&&t[r];)r++;return r===0?null:t[r-1]}getShiftedBy(e){let t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;let t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){let r=this.path[i]-e.path[i];if(r<-1||r>1)return!1;if(r===1)return g9(e,this,i);if(r===-1)return g9(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?sP(this.path,t):sP(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;let t=this.getParentPath(),i=e.getParentPath();return _n(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=n._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){let t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){let t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this),r;return i?(r=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(r=r._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?r=n._createAt(e.deletionPosition):r=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),r}_getTransformedByDeletion(e,t){let i=n._createAt(this);if(this.root!=e.root)return i;if(_n(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(_n(e.getParentPath(),this.getParentPath())=="prefix"){let r=e.path.length-1;if(e.offset<=this.path[r]){if(e.offset+t>this.path[r])return null;i.path[r]-=t}}return i}_getTransformedByInsertion(e,t){let i=n._createAt(this);if(this.root!=e.root)return i;if(_n(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(_n(e.getParentPath(),this.getParentPath())=="prefix"){let r=e.path.length-1;e.offset<=this.path[r]&&(i.path[r]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return n._createAt(this);let r=this._getTransformedByDeletion(e,i);return r===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):r._getTransformedByInsertion(t,i)}_getCombined(e,t){let i=e.path.length-1,r=n._createAt(t);return r.stickiness=this.stickiness,r.offset=r.offset+this.path[i]-e.offset,r.path=[...r.path,...this.path.slice(i+1)],r}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof n)return new n(e.root,e.path,e.stickiness);{let r=e;if(t=="end")t=r.maxOffset;else{if(t=="before")return this._createBefore(r,i);if(t=="after")return this._createAfter(r,i);if(t!==0&&!t)throw new C("model-createpositionat-offset-required",[this,e])}if(!r.is("element")&&!r.is("documentFragment"))throw new C("model-position-parent-incorrect",[this,e]);let o=r.getPath();return o.push(t),new this(r.root,o,i)}}static _createAfter(e,t){if(!e.parent)throw new C("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new C("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){let i=new n(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new C("model-position-fromjson-no-root",t,{rootName:e.root});return new n(t.getRoot(e.root),e.path,e.stickiness)}};O.prototype.is=function(n){return n==="position"||n==="model:position"};function jg(n,e){let t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function eU(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function tU(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function g9(n,e,t){return!(t+1===n.path.length||!sP(e.path,t+1)||!phe(n,t+1))}function sP(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function phe(n,e){let t=n.parent,i=n.path.length-1,r=0;for(;i>=e;){if(n.path[i]+r!==t.maxOffset)return!1;r=1,i--,t=t.parent}return!0}var I=class n extends Ho{start;end;constructor(e,t){super(),this.start=O._createAt(e),this.end=t?O._createAt(t):O._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*ot(new Zi({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){let e=this.start.getParentPath(),t=this.end.getParentPath();return _n(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),r=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&r}containsItem(e){let t=O._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new n(this.start,e.start)),this.containsPosition(e.end)&&t.push(new n(e.end,this.end))):t.push(new n(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new n(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let r=this.start,o=this.end;return e.start.isBefore(r)&&(r=e.start),e.end.isAfter(o)&&(o=e.end),new n(r,o)}getMinimalFlatRanges(){let e=[],t=this.start.getCommonPath(this.end).length,i=O._createAt(this.start),r=i.parent;for(;i.path.length>t+1;){let o=r.maxOffset-i.offset;o!==0&&e.push(new n(i,i.getShiftedBy(o))),i.path=i.path.slice(0,-1),i.offset++,r=r.parent}for(;i.path.length<=this.end.path.length;){let o=this.end.path[i.path.length-1],s=o-i.offset;s!==0&&e.push(new n(i,i.getShiftedBy(s))),i.offset=o,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Zi(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new Zi(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new Zi(e);yield t.position;for(let i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new n(this.start,this.end)]}getTransformedByOperations(e){let t=[new n(this.start,this.end)];for(let i of e)for(let r=0;r<t.length;r++){let o=t[r].getTransformedByOperation(i);t.splice(r,1,...o),r+=o.length-1}for(let i=0;i<t.length;i++){let r=t[i];for(let o=i+1;o<t.length;o++){let s=t[o];(r.containsRange(s)||s.containsRange(r)||r.isEqual(s))&&t.splice(o,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){let i=e.sourcePosition,r=e.howMany,o=e.targetPosition;return this._getTransformedByMove(i,o,r,t)}_getTransformedBySplitOperation(e){let t=this.start._getTransformedBySplitOperation(e),i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new n(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new n(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=O._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new n(t,i)):new n(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new n(this.start,e),new n(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{let r=new n(this.start,this.end);return r.start=r.start._getTransformedByInsertion(e,t),r.end=r.end._getTransformedByInsertion(e,t),[r]}}_getTransformedByMove(e,t,i,r=!1){if(this.isCollapsed){let h=this.start._getTransformedByMove(e,t,i);return[new n(h)]}let o=n._createFromPositionAndShift(e,i),s=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!r&&(o.containsPosition(this.start)||o.containsPosition(this.end))){let h=this.start._getTransformedByMove(e,t,i),p=this.end._getTransformedByMove(e,t,i);return[new n(h,p)]}let a,l=this.getDifference(o),c=null,u=this.getIntersection(o);if(l.length==1?c=new n(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new n(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(s,i,u!==null||r):a=[],u){let h=new n(u.start._getCombined(o.start,s),u.end._getCombined(o.start,s));a.length==2?a.splice(1,0,h):a.push(h)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),r=this.end._getTransformedByDeletion(e,t);return i==null&&r==null?null:(i==null&&(i=e),r==null&&(r=e),new n(i,r))}static _createFromPositionAndShift(e,t){let i=e,r=e.getShiftedBy(t);return t>0?new this(i,r):new this(r,i)}static _createIn(e){return new this(O._createAt(e,0),O._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(O._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new C("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();let t=e[0];e.sort((o,s)=>o.start.isAfter(s.start)?1:-1);let i=e.indexOf(t),r=new this(t.start,t.end);for(let o=i-1;o>=0&&e[o].end.isEqual(r.start);o--)r.start=O._createAt(e[o].start);for(let o=i+1;o<e.length&&e[o].start.isEqual(r.end);o++)r.end=O._createAt(e[o].end);return r}static fromJSON(e,t){return new this(O.fromJSON(e.start,t),O.fromJSON(e.end,t))}};I.prototype.is=function(n){return n==="range"||n==="model:range"};var kf=class extends nt(){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;constructor(){super(),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;let i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new C("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;let i=this.findMappedViewAncestor(t.viewPosition),r=this._viewToModelMapping.get(i),o=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=O._createAt(r,o)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){let i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(let r of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(r);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){let t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){let i=this._markerNameToElements.get(t)||new Set;i.add(e);let r=this._elementToMarkerNames.get(e)||new Set;r.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,r)}unbindElementFromMarkerName(e,t){let i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));let r=this._elementToMarkerNames.get(e);r&&(r.delete(t),r.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){let e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(let[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new I(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new xe(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){let t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){let i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){let t=this._markerNameToElements.get(e);if(!t)return null;let i=new Set;for(let r of t)if(r.is("attributeElement"))for(let o of r.getElementsWithSameId())i.add(o);else i.add(r);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){let o=this._toModelOffset(e.parent,e.index,i),s=this._toModelOffset(e,t,e);return o+s}if(e.is("$text"))return t;let r=0;for(let o=0;o<t;o++)r+=this.getModelLength(e.getChild(o));return r}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(let i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,r=0,o=0,s=0;if(e.is("$text"))return new z(e,t);for(;o<t;)i=e.getChild(s),r=this.getModelLength(i),o+=r,s++;return o==t?this._moveViewPositionToTextNode(new z(e,s)):this.findPositionIn(i,t-(o-r))}_moveViewPositionToTextNode(e){let t=e.nodeBefore,i=e.nodeAfter;return t instanceof Pt?new z(t,t.data.length):i instanceof Pt?new z(i,0):e}},aP=class{_consumable=new Map;_textProxyRegistry=new Map;add(e,t){t=G1(t),e instanceof Qi&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=G1(t),e instanceof Qi&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=G1(t),e instanceof Qi&&(e=this._getSymbolForTextProxy(e));let i=this._consumable.get(e);if(i===void 0)return null;let r=i.get(t);return r===void 0?null:r}revert(e,t){t=G1(t),e instanceof Qi&&(e=this._getSymbolForTextProxy(e));let i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){let t=[];for(let[i,r]of this._consumable)for(let[o,s]of r){let a=o.split(":")[0];s&&e==a&&t.push({event:o,item:i.name||i.description})}if(t.length)throw new C("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null,i=this._textProxyRegistry.get(e.startOffset);if(i){let r=i.get(e.endOffset);r&&(t=r.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){let t=e.startOffset,i=e.endOffset,r=e.parent,o=Symbol("$textProxy:"+e.data),s,a;return s=this._textProxyRegistry.get(t),s||(s=new Map,this._textProxyRegistry.set(t,s)),a=s.get(i),a||(a=new Map,s.set(i,a)),a.set(r,o),o}};function G1(n){let e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}var Yg=class extends nt(){_conversionApi;_firedEventsMap;constructor(e){super(),this._conversionApi=v({dispatcher:this},e),this._firedEventsMap=new WeakMap}convertChanges(e,t,i){let r=this._createConversionApi(i,e.getRefreshedItems());for(let s of e.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,r);let o=this._reduceChanges(e.getChanges());for(let s of o)s.type==="insert"?this._convertInsert(I._createFromPositionAndShift(s.position,s.length),r):s.type==="reinsert"?this._convertReinsert(I._createFromPositionAndShift(s.position,s.length),r):s.type==="remove"?this._convertRemove(s.position,s.length,s.name,r):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,r);r.mapper.flushDeferredBindings();for(let s of r.mapper.flushUnboundMarkerNames()){let a=t.get(s).getRange();this._convertMarkerRemove(s,a,r),this._convertMarkerAdd(s,a,r)}for(let s of e.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,r);r.consumable.verifyAllConsumed("insert")}convert(e,t,i,r={}){let o=this._createConversionApi(i,void 0,r);this._convertInsert(e,o);for(let[s,a]of t)this._convertMarkerAdd(s,a,o);o.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){let r=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},r);let o=e.getFirstPosition().root;if(!r.mapper.toViewElement(o))return;let s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(r.consumable,e,s),this.fire("selection",{selection:e},r),!!e.isCollapsed){for(let a of s)if(r.consumable.test(e,"addMarker:"+a.name)){let l=a.getRange();if(!ghe(e.getFirstPosition(),a,r.mapper))continue;let c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,r)}for(let a of e.getAttributeKeys())if(r.consumable.test(e,"attribute:"+a)){let l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,r)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(let r of Array.from(e.getWalker({shallow:!0})).map(b9))this._testAndFire("insert",r,t)}_convertRemove(e,t,i,r){this.fire(`remove:${i}`,{position:e,length:t},r)}_convertAttribute(e,t,i,r,o){this._addConsumablesForRange(o.consumable,e,`attribute:${t}`);for(let s of e){let a={item:s.item,range:I._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:i,attributeNewValue:r};this._testAndFire(`attribute:${t}`,a,o)}}_convertReinsert(e,t){let i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(let r of i.map(b9))this._testAndFire("insert",P(v({},r),{reconversion:!0}),t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;let r=`addMarker:${e}`;if(i.consumable.add(t,r),this.fire(r,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,r)){this._addConsumablesForRange(i.consumable,t,r);for(let o of t.getItems()){if(!i.consumable.test(o,r))continue;let s={item:o,range:I._createOn(o),markerName:e,markerRange:t};this.fire(r,s,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){let t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(let i of t){let r=i.item;if(e.test(r,"insert")===null){e.add(r,"insert");for(let o of r.getAttributeKeys())e.add(r,"attribute:"+o)}}return e}_addConsumablesForRange(e,t,i){for(let r of t.getItems())e.add(r,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(let r of i)e.add(t,"addMarker:"+r.name);for(let r of t.getAttributeKeys())e.add(t,"attribute:"+r);return e}_testAndFire(e,t,i){let r=bhe(e,t),o=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(i),a=s.get(o);if(!a)s.set(o,new Set([r]));else if(!a.has(r))a.add(r);else return;this.fire(r,t,i)}_testAndFireAddAttributes(e,t){let i={item:e,range:I._createOn(e)};for(let r of i.item.getAttributeKeys())i.attributeKey=r,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(r),this._testAndFire(`attribute:${r}`,i,t)}_createConversionApi(e,t=new Set,i={}){let r=P(v({},this._conversionApi),{consumable:new aP,writer:e,options:i,convertItem:o=>this._convertInsert(I._createOn(o),r),convertChildren:o=>this._convertInsert(I._createIn(o),r,{doNotAddConsumables:!0}),convertAttributes:o=>this._testAndFireAddAttributes(o,r),canReuseView:o=>!t.has(r.mapper.toModelElement(o))});return this._firedEventsMap.set(r,new Map),r}};function ghe(n,e,t){let i=e.getRange(),r=Array.from(n.getAncestors());return r.shift(),r.reverse(),!r.some(s=>{if(i.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function bhe(n,e){let t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function b9(n){let e=n.item,t=I._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}var Cn=class n extends nt(Ho){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...e){super(),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let r of e._ranges)if(t.isEqual(r)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(let e of this._ranges)yield new I(e.start,e.end)}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new I(e.start,e.end):null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new I(e.start,e.end):null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,r]=e;if(typeof i=="object"&&(r=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof n)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof I)this._setRanges([t],!!r&&!!r.backward);else if(t instanceof O)this._setRanges([new I(t)]);else if(t instanceof Su){let o=!!r&&!!r.backward,s;if(i=="in")s=I._createIn(t);else if(i=="on")s=I._createOn(t);else if(i!==void 0)s=new I(O._createAt(t,i));else throw new C("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([s],o)}else if(li(t))this._setRanges(t,r&&!!r.backward);else throw new C("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){let i=Array.from(e),r=i.some(o=>{if(!(o instanceof I))throw new C("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(s=>!s.isEqual(o))});i.length===this._ranges.length&&!r||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new C("model-selection-setfocus-no-ranges",[this,e]);let i=O._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let r=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(r)=="before"?(this._pushRange(new I(i,r)),this._lastRangeBackward=!0):(this._pushRange(new I(r,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){let e=new WeakSet;for(let t of this.getRanges()){let i=w9(t.start,e);vhe(i,t)&&(yield i);for(let o of t.getWalker()){let s=o.item;o.type=="elementEnd"&&whe(s,e,t)&&(yield s)}let r=w9(t.end,e);yhe(r,t)&&(yield r)}}containsEntireContent(e=this.anchor.root){let t=O._createAt(e,0),i=O._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new I(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new C("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(let t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}};Cn.prototype.is=function(n){return n==="selection"||n==="model:selection"};function nU(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function whe(n,e,t){return nU(n,e)&&PP(n,t)}function w9(n,e){let i=n.parent.root.document.model.schema,r=n.parent.getAncestors({parentFirst:!0,includeSelf:!0}),o=!1,s=r.find(a=>o?!1:(o=i.isLimit(a),!o&&nU(a,e)));return r.forEach(a=>e.add(a)),s}function PP(n,e){let t=_he(n);return t?!e.containsRange(I._createOn(t),!0):!0}function vhe(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(O._createAt(n,n.maxOffset))?!1:PP(n,e):!1}function yhe(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(O._createAt(n,0))?!1:PP(n,e):!1}function _he(n){let e=n.root.document.model.schema,t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}var En=class n extends nt(I){constructor(e,t){super(e,t),Che.call(this)}detach(){this.stopListening()}toRange(){return new I(this.start,this.end)}static fromRange(e){return new n(e.start,e.end)}};En.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function Che(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{let t=e[0];t.isDocumentOperation&&Ehe.call(this,t)},{priority:"low"})}function Ehe(n){let e=this.getTransformedByOperation(n),t=I._createFromRanges(e),i=!t.isEqual(this),r=She(this,n),o=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?o=n.sourcePosition:o=n.deletionPosition);let s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:o})}else r&&this.fire("change:content",this.toRange(),{deletionPosition:o})}function She(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}var Qg="selection:",ci=class extends nt(Ho){_selection;constructor(e){super(),this._selection=new lP(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Qg+e}static _isStoreAttributeKey(e){return e.startsWith(Qg)}};ci.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};var lP=class extends Cn{markers=new ut({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(e){super(),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{let r=i[0];!r.isDocumentOperation||r.type=="marker"||r.type=="rename"||r.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,r,o)=>{this._updateMarker(i,o)}),this.listenTo(this._document,"change",(t,i)=>{The(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*ot(super.getRanges()):yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){let i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){let t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){let e=Xt();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new C("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){let t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(let t of e)if(!this._document._validateSelectionRange(t))throw new C("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;let t=En.fromRange(e);return t.on("change:range",(i,r,o)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=o.deletionPosition;let s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;let e=[],t=!1;for(let r of this._model.markers){let o=r.name.split(":",1)[0];if(!this._observedMarkers.has(o))continue;let s=r.getRange();for(let a of this.getRanges())s.containsRange(a,!a.isCollapsed)&&e.push(r)}let i=Array.from(this.markers);for(let r of e)this.markers.has(r)||(this.markers.add(r),t=!0);for(let r of Array.from(this.markers))e.includes(r)||(this.markers.remove(r),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){let i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let r=!1,o=Array.from(this.markers),s=this.markers.has(e);if(!t)s&&(this.markers.remove(e),r=!0);else{let a=!1;for(let l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!s?(this.markers.add(e),r=!0):!a&&s&&(this.markers.remove(e),r=!0)}r&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}_updateAttributes(e){let t=Di(this._getSurroundingAttributes()),i=Di(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(let[o,s]of this._attributePriority)s=="low"&&(this._attrs.delete(o),this._attributePriority.delete(o));this._setAttributesTo(t);let r=[];for(let[o,s]of this.getAttributes())(!i.has(o)||i.get(o)!==s)&&r.push(o);for(let[o]of i)this.hasAttribute(o)||r.push(o);r.length>0&&this.fire("change:attribute",{attributeKeys:r,directChange:!1})}_setAttribute(e,t,i=!0){let r=i?"normal":"low";return r=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,r),!0)}_removeAttribute(e,t=!0){let i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){let t=new Set;for(let[i,r]of this.getAttributes())e.get(i)!==r&&this._removeAttribute(i,!1);for(let[i,r]of e)this._setAttribute(i,r,!1)&&t.add(i);return t}*getStoredAttributes(){let e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(let t of e.getAttributeKeys())t.startsWith(Qg)&&(yield[t.substr(Qg.length),e.getAttribute(t)])}_getSurroundingAttributes(){let e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){let r=e.textNode?e.textNode:e.nodeBefore,o=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=Ug(r,t)),i||(i=Ug(o,t)),!this.isGravityOverridden&&!i){let s=r;for(;s&&!i;)s=s.previousSibling,i=Ug(s,t)}if(!i){let s=o;for(;s&&!i;)s=s.nextSibling,i=Ug(s,t)}i||(i=this.getStoredAttributes())}else{let r=this.getFirstRange();for(let o of r){if(o.item.is("element")&&t.isObject(o.item)){i=Ug(o.item,t);break}if(o.type=="text"){i=o.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){let t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}};function Ug(n,e){if(!n)return null;if(n instanceof Qi||n instanceof wt)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];let t=[];for(let[i,r]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,r]);return t}function The(n,e){let t=n.document.differ;for(let i of t.getChanges()){if(i.type!="insert")continue;let r=i.position.parent;i.length===r.maxOffset&&n.enqueueChange(e,s=>{let a=Array.from(r.getAttributeKeys()).filter(l=>l.startsWith(Qg));for(let l of a)s.removeAttribute(l,r)})}}var J1=class{_dispatchers;constructor(e){this._dispatchers=e}add(e){for(let t of this._dispatchers)e(t);return this}},cP=class extends J1{elementToElement(e){return this.add(Vhe(e))}elementToStructure(e){return this.add(Bhe(e))}attributeToElement(e){return this.add(Uhe(e))}attributeToAttribute(e){return this.add(Hhe(e))}markerToElement(e){return this.add(zhe(e))}markerToHighlight(e){return this.add($he(e))}markerToData(e){return this.add(jhe(e))}};function RP(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;let i=t.writer,r=t.mapper.toViewPosition(e.range.start),o=i.createText(e.item.data);i.insert(r,o)}}function DP(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function khe(){return(n,e,t)=>{let i=t.mapper.toViewPosition(e.position),r=e.position.getShiftedBy(e.length),o=t.mapper.toViewPosition(r,{isPhantom:!0}),s=t.writer.createRange(i,o),a=t.writer.remove(s.getTrimmed());for(let l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function iU(n,e){let t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function rU(){return(n,e,t)=>{let i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;let r=[];for(let o of i.getRanges())r.push(t.mapper.toViewRange(o));t.writer.setSelection(r,{backward:i.isBackward})}}function oU(){return(n,e,t)=>{let i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;let r=t.writer,o=i.getFirstPosition(),s=t.mapper.toViewPosition(o),a=r.breakAttributes(s);r.setSelection(a)}}function Ahe(){return(n,e,t)=>{let i=t.writer,r=i.document.selection;for(let o of r.getRanges())o.isCollapsed&&o.end.parent.isAttached()&&t.writer.mergeAttributes(o.start);i.setSelection(null)}}function sU(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let r=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!r&&!o)return;i.consumable.consume(t.item,e.name);let s=i.writer,a=s.document.selection;if(t.item instanceof Cn||t.item instanceof ci)s.wrap(a.getFirstRange(),o);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&r&&(l=s.unwrap(l,r)),t.attributeNewValue!==null&&o&&s.wrap(l,o)}}}function aU(n,e=Zhe){return(t,i,r)=>{if(!e(i.item,r.consumable,{preflight:!0}))return;let o=n(i.item,r,i);if(!o)return;e(i.item,r.consumable);let s=r.mapper.toViewPosition(i.range.start);r.mapper.bindElements(i.item,o),r.writer.insert(s,o),r.convertAttributes(i.item),fU(o,i.item.getChildren(),r,{reconversion:i.reconversion})}}function Ihe(n,e){return(t,i,r)=>{if(!e(i.item,r.consumable,{preflight:!0}))return;let o=new Map;r.writer._registerSlotFactory(Ghe(i.item,o,r));let s=n(i.item,r,i);if(r.writer._clearSlotFactory(),!s)return;Khe(i.item,o,r),e(i.item,r.consumable);let a=r.mapper.toViewPosition(i.range.start);r.mapper.bindElements(i.item,s),r.writer.insert(a,s),r.convertAttributes(i.item),Yhe(s,o,r,{reconversion:i.reconversion})}}function lU(n){return(e,t,i)=>{t.isOpening=!0;let r=n(t,i);t.isOpening=!1;let o=n(t,i);if(!r||!o)return;let s=t.markerRange;if(s.isCollapsed&&!i.consumable.consume(s,e.name))return;for(let c of s)if(!i.consumable.consume(c.item,e.name))return;let a=i.mapper,l=i.writer;l.insert(a.toViewPosition(s.start),r),i.mapper.bindElementToMarker(r,t.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),o),i.mapper.bindElementToMarker(o,t.markerName)),e.stop()}}function xhe(){return(n,e,t)=>{let i=t.mapper.markerNameToElements(e.markerName);if(i){for(let r of i)t.mapper.unbindElementFromMarkerName(r,e.markerName),t.writer.clear(t.writer.createRangeOn(r),r);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function Phe(n){return(e,t,i)=>{let r=n(t.markerName,i);if(!r)return;let o=t.markerRange;i.consumable.consume(o,e.name)&&(v9(o,!1,i,t,r),v9(o,!0,i,t,r),e.stop())}}function v9(n,e,t,i,r){let o=e?n.start:n.end,s=o.nodeAfter&&o.nodeAfter.is("element")?o.nodeAfter:null,a=o.nodeBefore&&o.nodeBefore.is("element")?o.nodeBefore:null;if(s||a){let c,u;e&&s||!e&&!a?(c=s,u=!0):(c=a,u=!1);let h=t.mapper.toViewElement(c);if(h){Rhe(h,e,u,t,i,r);return}}let l=t.mapper.toViewPosition(o);Dhe(l,e,t,i,r)}function Rhe(n,e,t,i,r,o){let s=`data-${o.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(s)?n.getAttribute(s).split(","):[];a.unshift(o.name),i.writer.setAttribute(s,a.join(","),n),i.mapper.bindElementToMarker(n,r.markerName)}function Dhe(n,e,t,i,r){let o=`${r.group}-${e?"start":"end"}`,s=r.name?{name:r.name}:null,a=t.writer.createUIElement(o,s);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function Mhe(n){return(e,t,i)=>{let r=n(t.markerName,i);if(!r)return;let o=i.mapper.markerNameToElements(t.markerName);if(!o)return;for(let a of o)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(s(`data-${r.group}-start-before`,a),s(`data-${r.group}-start-after`,a),s(`data-${r.group}-end-before`,a),s(`data-${r.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function s(a,l){if(l.hasAttribute(a)){let c=new Set(l.getAttribute(a).split(","));c.delete(r.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function Ohe(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let r=n(t.attributeOldValue,i,t),o=n(t.attributeNewValue,i,t);if(!r&&!o)return;i.consumable.consume(t.item,e.name);let s=i.mapper.toViewElement(t.item),a=i.writer;if(!s)throw new C("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&r)if(r.key=="class"){let l=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(let c of l)a.removeClass(c,s)}else if(r.key=="style")if(typeof r.value=="string"){let l=new gu(a.document.stylesProcessor);l.setTo(r.value);for(let[c]of l.getStylesEntries())a.removeStyle(c,s)}else{let l=Object.keys(r.value);for(let c of l)a.removeStyle(c,s)}else a.removeAttribute(r.key,s);if(t.attributeNewValue!==null&&o)if(o.key=="class"){let l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(let c of l)a.addClass(c,s)}else if(o.key=="style")if(typeof o.value=="string"){let l=new gu(a.document.stylesProcessor);l.setTo(o.value);for(let[c,u]of l.getStylesEntries())a.setStyle(c,u,s)}else{let l=Object.keys(o.value);for(let c of l)a.setStyle(c,o.value[c],s)}else a.setAttribute(o.key,o.value,s)}}function Nhe(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof Cn||t.item instanceof ci)&&!t.item.is("$textProxy"))return;let r=MP(n,t,i);if(!r||!i.consumable.consume(t.item,e.name))return;let o=i.writer,s=iU(o,r),a=o.document.selection;if(t.item instanceof Cn||t.item instanceof ci)o.wrap(a.getFirstRange(),s);else{let l=i.mapper.toViewRange(t.range),c=o.wrap(l,s);for(let u of c.getItems())if(u.is("attributeElement")&&u.isSimilar(s)){i.mapper.bindElementToMarker(u,t.markerName);break}}}}function Lhe(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof dt))return;let r=MP(n,t,i);if(!r||!i.consumable.test(t.item,e.name))return;let o=i.mapper.toViewElement(t.item);if(o&&o.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(let a of I._createIn(t.item))i.consumable.consume(a.item,e.name);o.getCustomProperty("addHighlight")(o,r,i.writer),i.mapper.bindElementToMarker(o,t.markerName)}}}function Fhe(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;let r=MP(n,t,i);if(!r)return;let o=iU(i.writer,r),s=i.mapper.markerNameToElements(t.markerName);if(s){for(let a of s)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),o):a.getCustomProperty("removeHighlight")(a,r.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function Vhe(n){let e=cU(n.model),t=Zg(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,aU(t,hU(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",dU(e),{priority:"low"})}}function Bhe(n){let e=cU(n.model),t=Zg(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new C("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,Ihe(t,hU(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",dU(e),{priority:"low"})}}function Uhe(n){n=$n(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let r of e.values)n.view[r]=Zg(n.view[r],"attribute");else n.view=Zg(n.view,"attribute");let i=uU(n);return r=>{r.on(t,sU(i),{priority:n.converterPriority||"normal"})}}function Hhe(n){n=$n(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let r of e.values)n.view[r]=y9(n.view[r]);else n.view=y9(n.view);let i=uU(n);return r=>{r.on(t,Ohe(i),{priority:n.converterPriority||"normal"})}}function zhe(n){let e=Zg(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,lU(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,xhe(),{priority:n.converterPriority||"normal"})}}function jhe(n){n=$n(n);let e=n.model,t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,Phe(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,Mhe(t),{priority:n.converterPriority||"normal"})}}function $he(n){return e=>{e.on(`addMarker:${n.model}`,Nhe(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,Lhe(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,Fhe(n.view),{priority:n.converterPriority||"normal"})}}function cU(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?He(n.attributes):[],children:!!n.children}}function Zg(n,e){return typeof n=="function"?n:(t,i)=>Whe(n,i,e)}function Whe(n,e,t){typeof n=="string"&&(n={name:n});let i,r=e.writer,o=Object.assign({},n.attributes);if(t=="container")i=r.createContainerElement(n.name,o);else if(t=="attribute"){let s={priority:n.priority||mu.DEFAULT_PRIORITY};i=r.createAttributeElement(n.name,o,s)}else i=r.createUIElement(n.name,o);if(n.styles){let s=Object.keys(n.styles);for(let a of s)r.setStyle(a,n.styles[a],i)}if(n.classes){let s=n.classes;if(typeof s=="string")r.addClass(s,i);else for(let a of s)r.addClass(a,i)}return i}function uU(n){return n.model.values?(e,t,i)=>{let r=n.view[e];return r?r(e,t,i):null}:n.view}function y9(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function MP(n,e,t){let i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function qhe(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{if(n.children)return!0}return!1}}function dU(n){let e=qhe(n);return(t,i)=>{let r=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(let o of i.changes){let s=o.type=="attribute"?o.range.start.nodeAfter:o.position.parent;if(!s||!e(s,o)){r.push(o);continue}if(!i.reconvertedElements.has(s)){i.reconvertedElements.add(s);let a=O._createBefore(s),l=r.length;for(let c=r.length-1;c>=0;c--){let u=r[c],p=(u.type=="attribute"?u.range.start:u.position).compareWith(a);if(p=="before"||u.type=="remove"&&p=="same")break;l=c}r.splice(l,0,{type:"remove",name:s.name,position:a,length:1},{type:"reinsert",name:s.name,position:a,length:1})}}i.changes=r}}function hU(n){return(e,t,i={})=>{let r=["insert"];for(let o of n.attributes)e.hasAttribute(o)&&r.push(`attribute:${o}`);return r.every(o=>t.test(e,o))?(i.preflight||r.forEach(o=>t.consume(e,o)),!0):!1}}function Ghe(n,e,t){return(i,r)=>{let o=i.createContainerElement("$slot"),s=null;if(r==="children")s=Array.from(n.getChildren());else if(typeof r=="function")s=Array.from(n.getChildren()).filter(a=>r(a));else throw new C("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:r});return e.set(o,s),o}}function Khe(n,e,t){let i=Array.from(e.values()).flat(),r=new Set(i);if(r.size!=i.length)throw new C("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(r.size!=n.childCount)throw new C("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function Yhe(n,e,t,i){t.mapper.on("modelToViewPosition",s,{priority:"highest"});let r=null,o=null;for([r,o]of e)fU(n,o,t,i),t.writer.move(t.writer.createRangeIn(r),t.writer.createPositionBefore(r)),t.writer.remove(r);t.mapper.off("modelToViewPosition",s);function s(a,l){let c=l.modelPosition.nodeAfter,u=o.indexOf(c);u<0||(l.viewPosition=l.mapper.findPositionIn(r,u))}}function fU(n,e,t,i){for(let r of e)Qhe(n.root,r,t,i)||t.convertItem(r)}function Qhe(n,e,t,i){let{writer:r,mapper:o}=t;if(!i.reconversion)return!1;let s=o.toViewElement(e);return!s||s.root==n||!t.canReuseView(s)?!1:(r.move(r.createRangeOn(s),o.toViewPosition(O._createBefore(e))),!0)}function Zhe(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function mU(n){let{schema:e,document:t}=n.model;for(let i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function pU(n,e,t){let i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function gU(n,e){let t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}var uP=class extends J1{elementToElement(e){return this.add(bU(e))}elementToAttribute(e){return this.add(efe(e))}attributeToAttribute(e){return this.add(tfe(e))}elementToMarker(e){return this.add(nfe(e))}dataToMarker(e){return this.add(ife(e))}};function _9(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){let{modelRange:i,modelCursor:r}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=r}}}function Jhe(){return(n,e,{schema:t,consumable:i,writer:r})=>{let o=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(o,"$text")){if(!pU(o,"$text",t)||e.viewItem.data.trim().length==0)return;o=gU(o,r)}i.consume(e.viewItem);let s=r.createText(e.viewItem.data);r.insert(s,o),e.modelRange=r.createRange(o,o.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function Xhe(n,e){return(t,i)=>{let r=i.newSelection,o=[];for(let a of r.getRanges())o.push(e.toModelRange(a));let s=n.createSelection(o,{backward:r.isBackward});s.isEqual(n.document.selection)||n.change(a=>{a.setSelection(s)})}}function bU(n){n=$n(n);let e=dP(n),t=OP(n.view),i=t?`element:${t}`:"element";return r=>{r.on(i,e,{priority:n.converterPriority||"normal"})}}function efe(n){n=$n(n),wU(n);let e=vU(n,!1),t=OP(n.view),i=t?`element:${t}`:"element";return r=>{r.on(i,e,{priority:n.converterPriority||"low"})}}function tfe(n){n=$n(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=sfe(n)),wU(n,e);let t=vU(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function nfe(n){let e=cfe(n.model);return bU(P(v({},n),{model:e}))}function ife(n){n=$n(n),n.model||(n.model=r=>r?n.view+":"+r:n.view);let e={view:n.view,model:n.model},t=dP(C9(e,"start")),i=dP(C9(e,"end"));return r=>{r.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),r.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});let o=Rn.low,s=Rn.highest,a=Rn.get(n.converterPriority)/s;r.on("element",rfe(e),{priority:o+a})}}function rfe(n){return(e,t,i)=>{let r=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:r+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:r+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:r+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:r+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:r+"-end-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:r+"-start-after"})&&o(t.modelRange.end,t.viewItem.getAttribute(r+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:r+"-end-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:r+"-start-before"})&&o(t.modelRange.start,t.viewItem.getAttribute(r+"-start-before").split(","));function o(s,a){for(let l of a){let c=n.model(l,i),u=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(u,s),t.modelCursor.isEqual(s)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(s,1),t.modelRange=t.modelRange._getTransformedByInsertion(s,1)[0]}}}}function OP(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function dP(n){let e=new Mi(n.view);return(t,i,r)=>{let o=e.match(i.viewItem);if(!o)return;let s=o.match;if(s.name=!0,!r.consumable.test(i.viewItem,s))return;let a=ofe(n.model,i.viewItem,r);a&&r.safeInsert(a,i.modelCursor)&&(r.consumable.consume(i.viewItem,s),r.convertChildren(i.viewItem,a),r.updateConversionResult(a,i))}}function ofe(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function sfe(n){typeof n.view=="string"&&(n.view={key:n.view});let e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value,i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function wU(n,e=null){let t=e===null?!0:o=>o.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,r=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:r}}function vU(n,e){let t=new Mi(n.view);return(i,r,o)=>{if(!r.modelRange&&e)return;let s=t.match(r.viewItem);if(!s||(afe(n.view,r.viewItem)?s.match.name=!0:delete s.match.name,!o.consumable.test(r.viewItem,s.match)))return;let a=n.model.key,l=typeof n.model.value=="function"?n.model.value(r.viewItem,o):n.model.value;if(l===null)return;r.modelRange||Object.assign(r,o.convertChildren(r.viewItem,r.modelCursor)),lfe(r.modelRange,{key:a,value:l},e,o)&&(o.consumable.test(r.viewItem,{name:!0})&&(s.match.name=!0),o.consumable.consume(r.viewItem,s.match))}}function afe(n,e){let t=typeof n=="function"?n(e):n;return typeof t=="object"&&!OP(t)?!1:!t.classes&&!t.attributes&&!t.styles}function lfe(n,e,t,i){let r=!1;for(let o of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(o,e.key)&&(r=!0,!o.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,o));return r}function cfe(n){return(e,t)=>{let i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function C9(n,e){let t=(i,r)=>{let o=i.getAttribute("name"),s=n.model(o,r);return r.writer.createElement("$marker",{"data-name":s})};return{view:`${n.view}-${e}`,model:t}}function ufe(n){n.document.registerPostFixer(e=>dfe(e,n))}function dfe(n,e){let t=e.document.selection,i=e.schema,r=[],o=!1;for(let s of t.getRanges()){let a=yU(s,i);a&&!a.isEqual(s)?(r.push(a),o=!0):r.push(s)}return o&&n.setSelection(pfe(r),{backward:t.isBackward}),!1}function yU(n,e){return n.isCollapsed?hfe(n,e):ffe(n,e)}function hfe(n,e){let t=n.start,i=e.getNearestSelectionRange(t);if(!i){let o=t.getAncestors().reverse().find(s=>e.isObject(s));return o?I._createOn(o):null}if(!i.isCollapsed)return i;let r=i.start;return t.isEqual(r)?null:new I(r)}function ffe(n,e){let{start:t,end:i}=n,r=e.checkChild(t,"$text"),o=e.checkChild(i,"$text"),s=e.getLimitElement(t),a=e.getLimitElement(i);if(s===a){if(r&&o)return null;if(mfe(t,i,e)){let h=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),g=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),w=h?h.start:t,y=g?g.end:i;return new I(w,y)}}let l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){let u=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,h=l&&(!u||!S9(t.nodeAfter,e)),p=c&&(!u||!S9(i.nodeBefore,e)),g=t,w=i;return h&&(g=O._createBefore(E9(s,e))),p&&(w=O._createAfter(E9(a,e))),new I(g,w)}return null}function E9(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function mfe(n,e,t){let i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),r=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||r}function pfe(n){let e=[...n],t=new Set,i=1;for(;i<e.length;){let o=e[i],s=e.slice(0,i);for(let[a,l]of s.entries())if(!t.has(a)){if(o.isEqual(l))t.add(a);else if(o.isIntersecting(l)){t.add(a),t.add(i);let c=o.getJoined(l);e.push(c)}}i++}return e.filter((o,s)=>!t.has(s))}function S9(n,e){return n&&e.isSelectable(n)}var X1=class extends $e(){model;view;mapper;downcastDispatcher;constructor(e,t){super(),this.model=e,this.view=new Tf(t),this.mapper=new kf,this.downcastDispatcher=new Yg({mapper:this.mapper,schema:e.schema});let i=this.model.document,r=i.selection,o=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(s=>{this.downcastDispatcher.convertChanges(i.differ,o,s),this.downcastDispatcher.convertSelection(r,o,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",Xhe(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",gfe(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",RP(),{priority:"lowest"}),this.downcastDispatcher.on("insert",DP(),{priority:"lowest"}),this.downcastDispatcher.on("remove",khe(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",Ahe()),this.downcastDispatcher.on("selection",rU(),{priority:"low"}),this.downcastDispatcher.on("selection",oU(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(s=>{if(s.rootName=="$graveyard")return null;let a=new Wg(this.view.document,s.name);return a.rootName=s.rootName,this.mapper.bindElements(s,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){let t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new C("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}};function gfe(n,e,t){return(i,r)=>{if(!(t.document.isComposing&&!se.isAndroid))for(let o=0;o<r.targetRanges.length;o++){let s=r.targetRanges[o],a=n.toModelRange(s),l=yU(a,e);!l||l.isEqual(a)||(r.targetRanges[o]=n.toViewRange(l))}}}var hP=class n{_consumables=new Map;add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new fP(e),this._consumables.set(e,i)),i.add(t)}test(e,t){let i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){let i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){let t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(let s of i)s=="style"||s=="class"||t.attributes.push(s);let r=e.getClassNames();for(let s of r)t.classes.push(s);let o=e.getStyleNames();for(let s of o)t.styles.push(s);return t}static createFrom(e,t){if(t||(t=new n),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,n.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(let i of e.getChildren())t=n.createFrom(i,t);return t}},K1=["attributes","classes","styles"],fP=class{element;_canConsumeName;_consumables;constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(let t of K1)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(let t of K1)if(t in e){let i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(let t of K1)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(let t of K1)t in e&&this._revert(t,e[t])}_add(e,t){let i=He(t),r=this._consumables[e];for(let o of i){if(e==="attributes"&&(o==="class"||o==="style"))throw new C("viewconsumable-invalid-attribute",this);if(r.set(o,!0),e==="styles")for(let s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!0)}}_test(e,t){let i=He(t),r=this._consumables[e];for(let o of i)if(e==="attributes"&&(o==="class"||o==="style")){let s=o=="class"?"classes":"styles",a=this._test(s,[...this._consumables[s].keys()]);if(a!==!0)return a}else{let s=r.get(o);if(s===void 0)return null;if(!s)return!1}return!0}_consume(e,t){let i=He(t),r=this._consumables[e];for(let o of i)if(e==="attributes"&&(o==="class"||o==="style")){let s=o=="class"?"classes":"styles";this._consume(s,[...this._consumables[s].keys()])}else if(r.set(o,!1),e=="styles")for(let s of this.element.document.stylesProcessor.getRelatedStyles(o))r.set(s,!1)}_revert(e,t){let i=He(t),r=this._consumables[e];for(let o of i)if(e==="attributes"&&(o==="class"||o==="style")){let s=o=="class"?"classes":"styles";this._revert(s,[...this._consumables[s].keys()])}else r.get(o)===!1&&r.set(o,!0)}},mP=class extends $e(){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new vf(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new vf(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new C("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new C("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){let t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){let t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){let t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){let t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){let t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){let t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){let i=this.getDefinition(e.last);if(!i)return!1;let r=this._evaluateAttributeChecks(e,t);return r!==void 0?r:i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof O){let i=e.nodeBefore,r=e.nodeAfter;if(!(i instanceof dt))throw new C("schema-check-merge-no-element-before",this);if(!(r instanceof dt))throw new C("schema-check-merge-no-element-after",this);return this.checkMerge(i,r)}if(this.isLimit(e)||this.isLimit(t))return!1;for(let i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e,t){let i=t!==void 0?t:this._genericCheckSymbol,r=this._customChildChecks.get(i)||[];r.push(e),this._customChildChecks.set(i,r)}addAttributeCheck(e,t){let i=t!==void 0?t:this._genericCheckSymbol,r=this._customAttributeChecks.get(i)||[];r.push(e),this._customAttributeChecks.set(i,r)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof O?t=e.parent:t=(e instanceof I?[e]:Array.from(e.getRanges())).reduce((r,o)=>{let s=o.getCommonAncestor();return r?r.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){let r=[...e.getFirstPosition().getAncestors(),new wt("",e.getAttributes())];return this.checkAttribute(r,t)}else{let i=e.getRanges();for(let r of i)for(let o of r)if(this.checkAttribute(o.item,t))return!0}return!1}*getValidRanges(e,t){e=Dfe(e);for(let i of e)yield*ot(this._getValidRangesForRange(i,t))}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new I(e);let i,r,o=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;(t=="both"||t=="backward")&&(i=new Zi({boundaries:I._createIn(o),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(r=new Zi({boundaries:I._createIn(o),startPosition:e}));for(let s of Rfe(i,r)){let a=s.walker==i?"elementEnd":"elementStart",l=s.value;if(l.type==a&&this.isObject(l.item))return I._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new I(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){let r=i.model;for(let[o,s]of Object.entries(t))r.schema.checkAttribute(e,o)&&i.setAttribute(o,s,e)}removeDisallowedAttributes(e,t){for(let i of e)if(i.is("$text"))T9(this,i,t);else{let o=I._createIn(i).getPositions();for(let s of o){let a=s.nodeBefore||s.parent;T9(this,a,t)}}}getAttributesWithProperty(e,t,i){let r={};for(let[o,s]of e.getAttributes()){let a=this.getAttributeProperties(o);a[t]!==void 0&&(i===void 0||i===a[t])&&(r[o]=s)}return r}createContext(e){return new vf(e)}_clearCache(){this._compiledDefinitions=null}_compile(){let e={},t=this._sourceDefinitions,i=Object.keys(t);for(let o of i)e[o]=bfe(t[o],o);let r=Object.values(e);for(let o of r)wfe(e,o),vfe(e,o),yfe(e,o),_fe(e,o);for(let o of r)Cfe(e,o);for(let o of r)Efe(e,o);for(let o of r)Sfe(e,o);for(let o of r)kfe(e,o);for(let o of r)Afe(e,o);this._compiledDefinitions=Tfe(e)}_checkContextMatch(e,t){let i=e.last,r=this._evaluateChildChecks(e,t);if(r=r!==void 0?r:t.allowIn.includes(i.name),!r)return!1;let o=this.getDefinition(i),s=e.trimLast();return o?s.length==0?!0:this._checkContextMatch(s,o):!1}_evaluateChildChecks(e,t){let i=this._customChildChecks.get(this._genericCheckSymbol)||[],r=this._customChildChecks.get(t.name)||[];for(let o of[...i,...r]){let s=o(e,t);if(s!==void 0)return s}}_evaluateAttributeChecks(e,t){let i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],r=this._customAttributeChecks.get(t)||[];for(let o of[...i,...r]){let s=o(e,t);if(s!==void 0)return s}}*_getValidRangesForRange(e,t){let i=e.start,r=e.start;for(let o of e.getItems({shallow:!0}))o.is("element")&&(yield*ot(this._getValidRangesForRange(I._createIn(o),t))),this.checkAttribute(o,t)||(i.isEqual(r)||(yield new I(i,r)),i=O._createAfter(o)),r=O._createAfter(o);i.isEqual(r)||(yield new I(i,r))}findOptimalInsertionRange(e,t){let i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new I(O._createAt(i,t)):I._createOn(i);let r=it(e.getSelectedBlocks());if(!r)return new I(e.focus);if(r.isEmpty)return new I(O._createAt(r,0));let o=O._createAfter(r);return e.focus.isTouching(o)?new I(o):new I(O._createBefore(r))}},vf=class n{_items;constructor(e){if(e instanceof n)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(Pfe)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){let t=new n([e]);return t._items=[...this._items,...t._items],t}trimLast(){let e=new n([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*ot(this._items.map(e=>e.name))}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}};function bfe(n,e){let t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return Ife(n,t),Fo(n,t,"allowIn"),Fo(n,t,"allowChildren"),Fo(n,t,"disallowIn"),Fo(n,t,"disallowChildren"),Fo(n,t,"allowContentOf"),Fo(n,t,"allowWhere"),Fo(n,t,"allowAttributes"),Fo(n,t,"disallowAttributes"),Fo(n,t,"allowAttributesOf"),Fo(n,t,"inheritTypesFrom"),xfe(n,t),t}function wfe(n,e){for(let t of e.allowIn){let i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function vfe(n,e){for(let t of e.allowChildren){let i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function yfe(n,e){for(let t of e.disallowIn){let i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function _fe(n,e){for(let t of e.disallowChildren){let i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function Cfe(n,e){for(let t of e.disallowChildren)e.allowChildren.delete(t);for(let t of e.disallowIn)e.allowIn.delete(t);for(let t of e.disallowAttributes)e.allowAttributes.delete(t)}function Efe(n,e){for(let t of e.allowContentOf){let i=n[t];i&&(i.disallowChildren.forEach(r=>{e.allowChildren.has(r)||(e.disallowChildren.add(r),n[r].disallowIn.add(e.name))}),i.allowChildren.forEach(r=>{e.disallowChildren.has(r)||(e.allowChildren.add(r),n[r].allowIn.add(e.name))}))}}function Sfe(n,e){for(let t of e.allowWhere){let i=n[t];i&&(i.disallowIn.forEach(r=>{e.allowIn.has(r)||(e.disallowIn.add(r),n[r].disallowChildren.add(e.name))}),i.allowIn.forEach(r=>{e.disallowIn.has(r)||(e.allowIn.add(r),n[r].allowChildren.add(e.name))}))}}function Tfe(n){let e={};for(let t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function kfe(n,e){for(let t of e.allowAttributesOf){let i=n[t];if(!i)return;i.allowAttributes.forEach(r=>{e.disallowAttributes.has(r)||e.allowAttributes.add(r)})}}function Afe(n,e){for(let t of e.inheritTypesFrom){let i=n[t];if(i){let r=Object.keys(i).filter(o=>o.startsWith("is"));for(let o of r)o in e||(e[o]=i[o])}}}function Ife(n,e){for(let t of n){let i=Object.keys(t).filter(r=>r.startsWith("is"));for(let r of i)e[r]=!!t[r]}}function Fo(n,e,t){for(let i of n){let r=i[t];typeof r=="string"&&(r=[r]),Array.isArray(r)&&r.forEach(o=>e[t].add(o))}}function xfe(n,e){for(let t of n){let i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function Pfe(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*ot(n.getAttributeKeys())},getAttribute(e){return n.getAttribute(e)}}}function*Rfe(n,e){let t=!1;for(;!t;){if(t=!0,n){let i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){let i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*Dfe(n){for(let e of n)yield*ot(e.getMinimalFlatRanges())}function T9(n,e,t){for(let i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}var e_=class extends nt(){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(e){super(),this.conversionApi=P(v({},e),{consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)})}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=Ofe(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=hP.createFrom(e),this.conversionApi.store={};let{modelRange:r}=this._convertItem(e,this._modelCursor),o=t.createDocumentFragment();if(r){this._removeEmptyElements();for(let s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,o);o.markers=Mfe(o,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}_convertItem(e,t){let i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof I))throw new C("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:O._createAt(t,0),r=new I(i);for(let o of Array.from(e.getChildren())){let s=this._convertItem(o,i);s.modelRange instanceof I&&(r.end=s.modelRange.end,i=s.modelCursor)}return{modelRange:r,modelCursor:i}}_safeInsert(e,t){let i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){let i=this._getSplitParts(e),r=this.conversionApi.writer;t.modelRange||(t.modelRange=r.createRange(r.createPositionBefore(e),r.createPositionAfter(i[i.length-1])));let o=this._cursorParents.get(e);o?t.modelCursor=r.createPositionAt(o,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){let{schema:i,writer:r}=this.conversionApi,o=i.findAllowedParent(t,e);if(o){if(o===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(o)&&(o=null)}if(!o)return pU(t,e,i)?{position:gU(t,r)}:null;let s=this.conversionApi.writer.split(t,o),a=[];for(let c of s.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{let u=a.pop(),h=c.item;this._registerSplitPair(u,h)}let l=s.range.end.parent;return this._cursorParents.set(e,l),{position:s.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);let i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(let t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}};function Mfe(n,e){let t=new Set,i=new Map,r=I._createIn(n).getItems();for(let o of r)o.is("element","$marker")&&t.add(o);for(let o of t){let s=o.getAttribute("data-name"),a=e.createPositionBefore(o);i.has(s)?i.get(s).end=a.clone():i.set(s,new I(a.clone())),e.remove(o)}return i}function Ofe(n,e){let t;for(let i of new vf(n)){let r={};for(let s of i.getAttributeKeys())r[s]=i.getAttribute(s);let o=e.createElement(i.name,r);t&&e.insert(o,t),t=O._createAt(o,0)}return t}var t_=class{getHtml(e){let i=j.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}},Jg=class{domParser;domConverter;htmlWriter;skipComments=!0;constructor(e){this.domParser=new DOMParser,this.domConverter=new wu(e,{renderingMode:"data"}),this.htmlWriter=new t_}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);let t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),r=t.body.childNodes;for(;r.length>0;)i.appendChild(r[0]);return i}},n_=class extends nt(){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(e,t){super(),this.model=e,this.mapper=new kf,this.downcastDispatcher=new Yg({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",RP(),{priority:"lowest"}),this.downcastDispatcher.on("insert",DP(),{priority:"lowest"}),this.upcastDispatcher=new e_({schema:e.schema}),this.viewDocument=new o_(t),this.stylesProcessor=t,this.htmlProcessor=new Jg(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new qg(this.viewDocument),this.upcastDispatcher.on("text",Jhe(),{priority:"lowest"}),this.upcastDispatcher.on("element",_9(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",_9(),{priority:"lowest"}),$e().prototype.decorate.call(this,"init"),$e().prototype.decorate.call(this,"set"),$e().prototype.decorate.call(this,"get"),$e().prototype.decorate.call(this,"toView"),$e().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},mU)},{priority:"lowest"})}get(e={}){let{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new C("datacontroller-get-non-existent-root",this);let r=this.model.document.getRoot(t);return r.isAttached()||ge("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(r,{ignoreWhitespaces:!0})?"":this.stringify(r,e)}stringify(e,t={}){let i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){let i=this.viewDocument,r=this._viewWriter;this.mapper.clearBindings();let o=I._createIn(e),s=new bl(i);this.mapper.bindElements(e,s);let a=e.is("documentFragment")?e.markers:Nfe(e);return this.downcastDispatcher.convert(o,a,r,t),s}init(e){if(this.model.document.version)throw new C("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new C("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(let r of Object.keys(t)){let o=this.model.document.getRoot(r);i.insert(this.parse(t[r],o),o,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new C("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},r=>{r.setSelection(null),r.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(let o of Object.keys(i)){let s=this.model.document.getRoot(o);r.remove(r.createRangeIn(s)),r.insert(this.parse(i[o],s),s,0)}})}parse(e,t="$root"){let i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(let t of e)if(!this.model.document.getRoot(t))return!1;return!0}};function Nfe(n){let e=[],t=n.root.document;if(!t)return new Map;let i=I._createIn(n);for(let r of t.model.markers){let o=r.getRange(),s=o.isCollapsed,a=o.start.isEqual(i.start)||o.end.isEqual(i.end);if(s&&a)e.push([r.name,o]);else{let l=i.getIntersection(o);l&&e.push([r.name,l])}}return e.sort(([r,o],[s,a])=>{if(o.end.compareWith(a.start)!=="after")return 1;if(o.start.compareWith(a.end)!=="before")return-1;switch(o.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return s.localeCompare(r)}}}),new Map(e)}var i_=class{_helpers=new Map;_downcast;_upcast;constructor(e,t){this._downcast=He(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=He(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){let i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new C("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new C("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(let{model:t,view:i}of qx(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(let{model:t,view:i}of qx(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(let{model:t,view:i}of qx(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new C("conversion-group-exists",this);let r=i?new cP(t):new uP(t);this._helpers.set(e,r)}};function*qx(n){if(n.model.values)for(let e of n.model.values){let t={key:n.model.key,value:e},i=n.view[e],r=n.upcastAlso?n.upcastAlso[e]:void 0;yield*ot(k9(t,i,r))}else yield*ot(k9(n.model,n.view,n.upcastAlso))}function*k9(n,e,t){if(yield{model:n,view:e},t)for(let i of He(t))yield{model:n,view:i}}var pP=class{namespaces;domParser;domConverter;htmlWriter;skipComments=!0;constructor(e,t={}){this.namespaces=t.namespaces||[],this.domParser=new DOMParser,this.domConverter=new wu(e,{renderingMode:"data"}),this.htmlWriter=new t_}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{keepOriginalCase:!0,skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e=`<xml ${this.namespaces.map(a=>`xmlns:${a}="nsp"`).join(" ")}>${e}</xml>`;let i=this.domParser.parseFromString(e,"text/xml"),r=i.querySelector("parsererror");if(r)throw new Error("Parse error - "+r.textContent);let o=i.createDocumentFragment(),s=i.documentElement.childNodes;for(;s.length>0;)o.appendChild(s[0]);return o}};var ui=class{baseVersion;isDocumentOperation;batch;constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){let e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}};function NP(n,e){let t=CU(e),i=t.reduce((s,a)=>s+a.offsetSize,0),r=n.parent;tb(n);let o=n.index;return r._insertChild(o,t),eb(r,o+t.length),eb(r,o),new I(n,n.getShiftedBy(i))}function _U(n){if(!n.isFlat)throw new C("operation-utils-remove-range-not-flat",this);let e=n.start.parent;tb(n.start),tb(n.end);let t=e._removeChildren(n.start.index,n.end.index-n.start.index);return eb(e,n.start.index),t}function Xg(n,e){if(!n.isFlat)throw new C("operation-utils-move-range-not-flat",this);let t=_U(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),NP(e,t)}function Lfe(n,e,t){tb(n.start),tb(n.end);for(let i of n.getItems({shallow:!0})){let r=i.is("$textProxy")?i.textNode:i;t!==null?r._setAttribute(e,t):r._removeAttribute(e),eb(r.parent,r.index)}eb(n.end.parent,n.end.index)}function CU(n){let e=[];function t(i){if(typeof i=="string")e.push(new wt(i));else if(i instanceof Qi)e.push(new wt(i.data,i.getAttributes()));else if(i instanceof Su)e.push(i);else if(li(i))for(let r of i)t(r)}t(n);for(let i=1;i<e.length;i++){let r=e[i],o=e[i-1];r instanceof wt&&o instanceof wt&&EU(r,o)&&(e.splice(i-1,2,new wt(o.data+r.data,o.getAttributes())),i--)}return e}function eb(n,e){let t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&EU(t,i)){let r=new wt(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,r)}}function tb(n){let e=n.textNode,t=n.parent;if(e){let i=n.offset-e.startOffset,r=e.index;t._removeChildren(r,1);let o=new wt(e.data.substr(0,i),e.getAttributes()),s=new wt(e.data.substr(i),e.getAttributes());t._insertChild(r,[o,s])}}function EU(n,e){let t=n.getAttributes(),i=e.getAttributes();for(let r of t){if(r[1]!==e.getAttribute(r[0]))return!1;i.next()}return i.next().done}var rt=class n extends ui{sourcePosition;howMany;targetPosition;constructor(e,t,i,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[I._createFromPositionAndShift(this.sourcePosition,this.howMany),I._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new n(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){let e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new n(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,r=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new C("move-operation-nodes-do-not-exist",this);if(e===t&&i<r&&r<i+this.howMany)throw new C("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&_n(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){let o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=i&&this.targetPosition.path[o]<i+this.howMany)throw new C("move-operation-node-into-itself",this)}}_execute(){Xg(I._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){let i=O.fromJSON(e.sourcePosition,t),r=O.fromJSON(e.targetPosition,t);return new this(i,e.howMany,r,e.baseVersion)}},Dn=class n extends ui{position;nodes;shouldReceiveAttributes;constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new pu(CU(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){let e=new pu([...this.nodes].map(i=>i._clone(!0))),t=new n(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){let e=this.position.root.document.graveyard,t=new O(e,[0]);return new rt(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){let e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new C("insert-operation-position-invalid",this)}_execute(){let e=this.nodes;this.nodes=new pu([...e].map(t=>t._clone(!0))),NP(this.position,e)}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){let i=[];for(let o of e.nodes)o.name?i.push(dt.fromJSON(o)):i.push(wt.fromJSON(o));let r=new n(O.fromJSON(e.position,t),i,e.baseVersion);return r.shouldReceiveAttributes=e.shouldReceiveAttributes,r}},pt=class n extends ui{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(e,t,i,r,o){super(o),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=r?r.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){let e=this.insertionPosition.path.slice();return e.push(0),new O(this.insertionPosition.root,e)}get movedRange(){let e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new I(this.splitPosition,e)}get affectedSelectable(){let e=[I._createFromPositionAndShift(this.splitPosition,0),I._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(I._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new n(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.splitPosition.root.document.graveyard,t=new O(e,[0]);return new $t(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){let e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new C("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new C("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new C("split-operation-graveyard-position-invalid",this)}else throw new C("split-operation-split-in-root",this)}_execute(){let e=this.splitPosition.parent;if(this.graveyardPosition)Xg(I._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{let i=e._clone();NP(this.insertionPosition,i)}let t=new I(O._createAt(e,this.splitPosition.offset),O._createAt(e,e.maxOffset));Xg(t,this.moveTargetPosition)}toJSON(){let e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){let t=e.path.slice(0,-1);return t[t.length-1]++,new O(e.root,t,"toPrevious")}static fromJSON(e,t){let i=O.fromJSON(e.splitPosition,t),r=O.fromJSON(e.insertionPosition,t),o=e.graveyardPosition?O.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,r,o,e.baseVersion)}},$t=class n extends ui{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(e,t,i,r,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=r.clone()}get type(){return"merge"}get deletionPosition(){return new O(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){let e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new I(this.sourcePosition,e)}get affectedSelectable(){let e=this.sourcePosition.parent;return[I._createOn(e),I._createFromPositionAndShift(this.targetPosition,0),I._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new n(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new O(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new pt(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new C("merge-operation-how-many-invalid",this)}else throw new C("merge-operation-target-position-invalid",this);else throw new C("merge-operation-source-position-invalid",this)}_execute(){let e=this.sourcePosition.parent,t=I._createIn(e);Xg(t,this.targetPosition),Xg(I._createOn(e),this.graveyardPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){let i=O.fromJSON(e.sourcePosition,t),r=O.fromJSON(e.targetPosition,t),o=O.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,r,o,e.baseVersion)}},Ji=class n extends ui{name;oldRange;newRange;affectsData;_markers;constructor(e,t,i,r,o,s){super(s),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=o,this._markers=r}get type(){return"marker"}get affectedSelectable(){let e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new n(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new n(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){let e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new n(e.name,e.oldRange?I.fromJSON(e.oldRange,t):null,e.newRange?I.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}},mn=class n extends ui{range;key;oldValue;newValue;constructor(e,t,i,r,o){super(o),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new n(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new n(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){let e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new C("attribute-operation-range-not-flat",this);for(let e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!cu(e.getAttribute(this.key),this.oldValue))throw new C("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new C("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){cu(this.oldValue,this.newValue)||Lfe(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new n(I.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}},tn=class n extends ui{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new n(this.baseVersion)}getReversed(){return new n(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}},Cr=class n extends ui{position;oldName;newName;constructor(e,t,i,r){super(r),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new n(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new n(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){let e=this.position.nodeAfter;if(e instanceof dt){if(e.name!==this.oldName)throw new C("rename-operation-wrong-name",this)}else throw new C("rename-operation-wrong-position",this)}_execute(){let e=this.position.nodeAfter;e.name=this.newName}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new n(O.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}},yu=class n extends ui{root;key;oldValue;newValue;constructor(e,t,i,r,o){super(o),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=r===void 0?null:r}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new n(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new n(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new C("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new C("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new C("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){let e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new C("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new n(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}},wl=class n extends ui{rootName;elementName;isAdd;_document;constructor(e,t,i,r,o){if(super(o),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=r,!this._document.getRoot(this.rootName)){let s=this._document.createRoot(this.elementName,this.rootName);s._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new n(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new n(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){let e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new n(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}},Er={};Er[mn.className]=mn;Er[Dn.className]=Dn;Er[Ji.className]=Ji;Er[rt.className]=rt;Er[tn.className]=tn;Er[ui.className]=ui;Er[Cr.className]=Cr;Er[yu.className]=yu;Er[wl.className]=wl;Er[pt.className]=pt;Er[$t.className]=$t;var gP=class{static fromJSON(e,t){return Er[e.__className].fromJSON(e,t)}},bP=new Map;function Xe(n,e,t){let i=bP.get(n);i||(i=new Map,bP.set(n,i)),i.set(e,t)}function Ffe(n,e){let t=bP.get(n);return t&&t.has(e)?t.get(e):Vfe}function Vfe(n){return[n]}function A9(n,e,t={}){let i=Ffe(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(r){throw r}}function SU(n,e,t){n=n.slice(),e=e.slice();let i=new wP(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);let r=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:r};let o=new WeakMap;for(let l of n)o.set(l,0);let s={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length},a=0;for(;a<n.length;){let l=n[a],c=o.get(l);if(c==e.length){a++;continue}let u=e[c],h=A9(l,u,i.getContext(l,u,!0)),p=A9(u,l,i.getContext(u,l,!1));i.updateRelation(l,u),i.setOriginalOperations(h,l),i.setOriginalOperations(p,u);for(let g of h)o.set(g,c+p.length);n.splice(a,1,...h),e.splice(c,1,...p)}if(P9(n),P9(e),t.padWithNoOps){let l=n.length-s.originalOperationsACount,c=e.length-s.originalOperationsBCount;x9(n,c-l),x9(e,l-c)}return I9(n,s.nextBaseVersionB),I9(e,s.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:r}}var wP=class{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){let i=t?this.originalOperations.get(t):null;for(let r of e)this.originalOperations.set(r,i||r)}updateRelation(e,t){if(e instanceof rt)t instanceof $t?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof rt&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof pt){if(t instanceof $t)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof rt)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{let i=I._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){let r=i.end.offset-e.splitPosition.offset,o=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:r,offset:o})}}}else if(e instanceof $t)t instanceof $t?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof pt?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof rt&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ji){let i=e.newRange;if(!i)return;if(t instanceof $t){let r=i.start.isEqual(t.targetPosition),o=i.start.isEqual(t.deletionPosition),s=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(r||o||s||a)&&this._setRelation(e,t,{wasInLeftElement:r,wasStartBeforeMergedElement:o,wasEndBeforeMergedElement:s,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){let t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){let i=this.originalOperations.get(t),r=this._history.getUndoneOperation(i);if(!r)return null;let o=this.originalOperations.get(e),s=this._relations.get(o);return s&&s.get(r)||null}_setRelation(e,t,i){let r=this.originalOperations.get(e),o=this.originalOperations.get(t),s=this._relations.get(r);s||(s=new Map,this._relations.set(r,s)),s.set(o,i)}};function I9(n,e){for(let t of n)t.baseVersion=e++}function x9(n,e){for(let t=0;t<e;t++)n.push(new tn(0))}function P9(n){let e=new Map;for(let t=0;t<n.length;t++){let i=n[t];i instanceof Ji&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(let{op:t,ranges:i}of e.values())i.length?t.newRange=I._createFromRanges(i):t.newRange=null}Xe(mn,mn,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){let i=n.range.getDifference(e.range).map(o=>new mn(o,n.key,n.oldValue,n.newValue,0)),r=n.range.getIntersection(e.range);return r&&t.aIsStrong&&i.push(new mn(r,e.key,e.newValue,n.newValue,0)),i.length==0?[new tn(0)]:i}else return[n]});Xe(mn,Dn,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){let i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(r=>new mn(r,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){let r=TU(e,n.key,n.oldValue);r&&i.unshift(r)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function TU(n,e,t){let r=n.nodes.getNode(0).getAttribute(e);if(r==t)return null;let o=new I(n.position,n.position.getShiftedBy(n.howMany));return new mn(o,e,r,t,0)}Xe(mn,$t,(n,e)=>{let t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(I._createFromPositionAndShift(e.graveyardPosition,1));let i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(r=>new mn(r,n.key,n.oldValue,n.newValue,n.baseVersion))});Xe(mn,rt,(n,e)=>Bfe(n.range,e).map(i=>new mn(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function Bfe(n,e){let t=I._createFromPositionAndShift(e.sourcePosition,e.howMany),i=null,r=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(r=n.getDifference(t),i=n.getIntersection(t)):r=[n];let o=[];for(let s of r){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);let a=e.getMovedRangeStart(),l=s.start.hasSameParentAs(a),c=s._getTransformedByInsertion(a,e.howMany,l);o.push(...c)}return i&&o.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),o}Xe(mn,pt,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){let t=n.clone();return t.range=new I(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});Xe(Dn,mn,(n,e)=>{let t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){let i=TU(n,e.key,e.newValue);i&&t.push(i)}return t});Xe(Dn,Dn,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));Xe(Dn,rt,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Xe(Dn,pt,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));Xe(Dn,$t,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));Xe(Ji,Dn,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));Xe(Ji,Ji,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new tn(0)];return[n]});Xe(Ji,$t,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));Xe(Ji,rt,(n,e)=>{let t=[n];if(n.oldRange&&(n.oldRange=I._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){let i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let r=1;r<i.length;r++){let o=n.clone();o.oldRange=null,o.newRange=i[r],o.baseVersion=-1,t.push(o)}}return t});Xe(Ji,pt,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){let i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=O._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=O._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=O._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=O._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});Xe($t,Dn,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));Xe($t,$t,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){let i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new O(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new tn(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){let i=n.targetPosition.root.rootName=="$graveyard",r=e.targetPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&t.aIsStrong){let l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new rt(l,n.howMany,c,0)]}else return[new tn(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Xe($t,rt,(n,e,t)=>{let i=I._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new tn(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});Xe($t,pt,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});Xe(rt,Dn,(n,e)=>{let i=I._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});Xe(rt,rt,(n,e,t)=>{let i=I._createFromPositionAndShift(n.sourcePosition,n.howMany),r=I._createFromPositionAndShift(e.sourcePosition,e.howMany),o=t.aIsStrong,s=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?s=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(s=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&s?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),R9(n,e)&&R9(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(r,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wf([i],a);if(r.containsPosition(n.targetPosition)&&r.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),wf([i],a);let u=_n(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(u=="prefix"||u=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wf([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?o=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(o=!1);let h=[],p=i.getDifference(r);for(let w of p){w.start=w.start._getTransformedByDeletion(e.sourcePosition,e.howMany),w.end=w.end._getTransformedByDeletion(e.sourcePosition,e.howMany);let y=_n(w.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",E=w._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,y);h.push(...E)}let g=i.getIntersection(r);return g!==null&&o&&(g.start=g.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),g.end=g.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),h.length===0?h.push(g):h.length==1?r.start.isBefore(i.start)||r.start.isEqual(i.start)?h.unshift(g):h.push(g):h.splice(1,0,g)),h.length===0?[new tn(n.baseVersion)]:wf(h,a)});Xe(rt,pt,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));let r=I._createFromPositionAndShift(n.sourcePosition,n.howMany);if(r.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(r.start.hasSameParentAs(e.splitPosition)&&r.containsPosition(e.splitPosition)){let a=new I(e.splitPosition,r.end);a=a._getTransformedBySplitOperation(e);let l=[new I(r.start,e.splitPosition),a];return wf(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);let s=[r._getTransformedBySplitOperation(e)];if(e.graveyardPosition){let a=r.start.isEqual(e.graveyardPosition)||r.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&s.push(I._createFromPositionAndShift(e.insertionPosition,1))}return wf(s,i)});Xe(rt,$t,(n,e,t)=>{let i=I._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){let s=[],a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(s.push(new rt(n.sourcePosition,n.howMany-1,c,0)),a=a._getTransformedByMove(n.sourcePosition,c,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1));let u=e.deletionPosition._getCombined(n.sourcePosition,c),h=new rt(a,1,u,0),p=h.getMovedRangeStart().path.slice();p.push(0);let g=new O(h.targetPosition.root,p);l=l._getTransformedByMove(a,u,1);let w=new rt(l,e.howMany,g,0);return s.push(h),s.push(w),s}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new tn(0)]}let o=I._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=o.start,n.howMany=o.end.offset-o.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});Xe(Cr,Dn,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));Xe(Cr,$t,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));Xe(Cr,rt,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Xe(Cr,Cr,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new tn(0)];return[n]});Xe(Cr,pt,(n,e)=>{let t=n.position.path,i=e.splitPosition.getParentPath();if(_n(t,i)=="same"&&!e.graveyardPosition){let r=new Cr(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,r]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});Xe(yu,yu,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new tn(0)];n.oldValue=e.newValue}return[n]});Xe(wl,wl,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new tn(0)]:[n]);Xe(pt,Dn,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));Xe(pt,$t,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){let i=e.graveyardPosition.path.slice();i.push(0);let r=new O(e.graveyardPosition.root,i),o=pt.getInsertionPosition(new O(e.graveyardPosition.root,i)),s=new pt(r,0,o,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=pt.getInsertionPosition(n.splitPosition),n.graveyardPosition=s.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[s,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=pt.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Xe(pt,rt,(n,e,t)=>{let i=I._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){let o=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&o){let s=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);let c=new O(a.root,l);return[new rt(s,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}let r=n.splitPosition.isEqual(e.targetPosition);if(r&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=pt.getInsertionPosition(n.splitPosition),[n];if(r&&t.abRelation&&t.abRelation.howMany){let{howMany:o,offset:s}=t.abRelation;return n.howMany+=o,n.splitPosition=n.splitPosition.getShiftedBy(s),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){let o=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=o,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=pt.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=pt.getInsertionPosition(n.splitPosition),[n]});Xe(pt,pt,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new tn(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new tn(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){let i=n.splitPosition.root.rootName=="$graveyard",r=e.splitPosition.root.rootName=="$graveyard";if(r&&!i||!(i&&!r)&&t.aIsStrong){let l=[];return e.howMany&&l.push(new rt(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new rt(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new tn(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){let i=e.insertionPosition.path.slice();i.push(0);let r=new O(e.insertionPosition.root,i),o=new rt(n.insertionPosition,1,r,0);return[n,o]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=pt.getInsertionPosition(n.splitPosition),[n]});function R9(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function wf(n,e){let t=[];for(let i=0;i<n.length;i++){let r=n[i],o=new rt(r.start,r.end.offset-r.start.offset,e,0);t.push(o);for(let s=i+1;s<n.length;s++)n[s]=n[s]._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)[0];e=e._getTransformedByMove(o.sourcePosition,o.targetPosition,o.howMany)}return t}var Yt=class extends nt(O){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new C("model-liveposition-root-not-rootelement",e);Ufe.call(this)}detach(){this.stopListening()}toPosition(){return new O(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}};Yt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function Ufe(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{let t=e[0];t.isDocumentOperation&&Hfe.call(this,t)},{priority:"low"})}function Hfe(n){let e=this.getTransformedByOperation(n);if(!this.isEqual(e)){let t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}var pl=class{operations;isUndoable;isLocal;isUndo;isTyping;constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},ge("batch-constructor-deprecated-string-type"));let{isUndoable:t=!0,isLocal:i=!0,isUndo:r=!1,isTyping:o=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=r,this.isTyping=o}get type(){return ge("batch-type-deprecated"),"default"}get baseVersion(){for(let e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}},vP=class n{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(e){this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){let t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(let i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;let i=this._isInInsertedElement(t.sourcePosition.parent),r=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),r||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);let o=I._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let s of o.getItems({shallow:!0}))this._setElementState(s,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);let i=I._createFromPositionAndShift(t.position,1);for(let r of this._markerCollection.getMarkersIntersectingRange(i)){let o=r.getData();this.bufferMarkerChange(r.name,o,o)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{let i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);let r=I._createFromPositionAndShift(t.splitPosition,t.howMany);for(let o of r.getItems({shallow:!0}))this._setElementState(o,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{let i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);let r=t.graveyardPosition.parent;this._markInsert(r,t.graveyardPosition.offset,1),this._setElementState(i,"move");let o=t.targetPosition.parent;if(!this._isInInsertedElement(o)){this._markInsert(o,t.targetPosition.offset,i.maxOffset);let s=I._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let a of s.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{let i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;let i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let r=this._changedMarkers.get(e);r?r.newMarkerData=i:(r={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,r)),r.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){let e=[];for(let[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){let e=[];for(let[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(let{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){let i=e.range&&!t.range,r=!e.range&&t.range,o=e.range&&t.range&&!e.range.isEqual(t.range);if(i||r||o)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(let i of this._changesInElement.keys()){let r=this._changesInElement.get(i).sort((u,h)=>u.offset===h.offset?u.type!=h.type?u.type=="remove"?-1:1:0:u.offset<h.offset?-1:1),o=this._elementChildrenSnapshots.get(i),s=M9(i.getChildren()),a=zfe(o.length,r),l=0,c=0;for(let u of a)if(u==="i"){let h=this._getDiffActionForNode(s[l].node,"insert"),p=this._elementsSnapshots.get(s[l].node),g=this._getInsertDiff(i,l,h,s[l],p);t.push(g),l++}else if(u==="r"){let h=this._getDiffActionForNode(o[c].node,"remove"),p=this._getRemoveDiff(i,l,h,o[c]);t.push(p),c++}else if(u==="a"){let h=o[c].attributes,p=s[l].attributes,g;if(s[l].name=="$text")g=new I(O._createAt(i,l),O._createAt(i,l+1));else{let y=i.offsetToIndex(l);g=new I(O._createAt(i,l),O._createAt(i.getChild(y),0))}let w=this._getAttributesDiff(g,h,p);t.push(...w),l++,c++}else l++,c++}t.sort((i,r)=>i.position.root!=r.position.root?i.position.root.rootName<r.position.root.rootName?-1:1:i.position.isEqual(r.position)?i.changeCount-r.changeCount:i.position.isBefore(r.position)?-1:1);for(let i=1,r=0;i<t.length;i++){let o=t[r],s=t[i],a=o.type=="remove"&&s.type=="remove"&&o.name=="$text"&&s.name=="$text"&&o.position.isEqual(s.position),l=o.type=="insert"&&s.type=="insert"&&o.name=="$text"&&s.name=="$text"&&o.position.parent==s.position.parent&&o.position.offset+o.length==s.position.offset,c=o.type=="attribute"&&s.type=="attribute"&&o.position.parent==s.position.parent&&o.range.isFlat&&s.range.isFlat&&o.position.offset+o.length==s.position.offset&&o.attributeKey==s.attributeKey&&o.attributeOldValue==s.attributeOldValue&&o.attributeNewValue==s.attributeNewValue;a||l||c?(o.length++,c&&(o.range.end=o.range.end.getShiftedBy(1)),t[i]=null):r=i}t=t.filter(i=>i);for(let i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(jfe),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{let t=v({},e);return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");let t=I._createOn(e);for(let i of this._markerCollection.getMarkersIntersectingRange(t)){let r=i.getData();this.bufferMarkerChange(i.name,r,r)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(let t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(let t of this._markerCollection)if(t.getRange().root==e){let i=t.getData();this.bufferMarkerChange(t.name,P(v({},i),{range:null}),i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}let i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,r){let o=this._changedRoots.get(e)||{name:e},s=o.attributes||{};if(s[t]){let a=s[t];r===a.oldValue?delete s[t]:a.newValue=r}else s[t]={oldValue:i,newValue:r};Object.entries(s).length===0?(delete o.attributes,o.state===void 0&&this._changedRoots.delete(e)):(o.attributes=s,this._changedRoots.set(e,o))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let r={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,r)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let r={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,r),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);let i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let r=0;r<i.length;r++)i[r].howMany<1&&(i.splice(r,1),r--)}_setElementState(e,t){if(!e.is("element"))return;let i=n._statesPriority.indexOf(this._elementState.get(e));n._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;let i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;let t=M9(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(let i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(let i of t){let r=e.offset+e.howMany,o=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<o&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<o){let s=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:r,howMany:s-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(r<=i.offset)i.offset-=e.howMany;else if(r<=o)if(e.offset<i.offset){let s=r-i.offset;i.offset=e.offset,i.howMany-=s,e.nodesToHandle-=s}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<o){let s=o-e.offset;i.howMany-=s,e.nodesToHandle-=s}}if(i.type=="remove"&&(r<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(r<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){let s=r-i.offset;i.offset=e.offset,i.howMany-=s}else if(e.offset<o)if(r<=o){let s=i.howMany;i.howMany=e.offset-i.offset;let a=s-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=o-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&r>i.offset){if(r>o){let s={type:"attribute",offset:o,howMany:r-o,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<o&&(r>o?(e.nodesToHandle=r-o,e.offset=o):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&r>i.offset){let s={type:"attribute",offset:i.offset,howMany:r-i.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&r<=o?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&r>=o&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,r,o){let s={type:"insert",position:O._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&o&&(s.before={name:o.name,attributes:new Map(o.attributes)}),s}_getRemoveDiff(e,t,i,r){return{type:"remove",action:i,position:O._createAt(e,t),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){let r=[];i=new Map(i);for(let[o,s]of t){let a=i.has(o)?i.get(o):null;a!==s&&r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:s,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(o)}for(let[o,s]of i)r.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:o,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return r}_isInInsertedElement(e){let t=e.parent;if(!t)return!1;let i=this._changesInElement.get(t),r=e.startOffset;if(i){for(let o of i)if(o.type=="insert"&&r>=o.offset&&r<o.offset+o.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){let r=new I(O._createAt(e,t),O._createAt(e,t+i));for(let o of r.getItems({shallow:!0}))o.is("element")&&(this._changesInElement.delete(o),this._removeAllNestedChanges(o,0,o.maxOffset))}};function D9(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function M9(n){let e=[];for(let t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(D9(t));else e.push(D9(t));return e}function zfe(n,e){let t=[],i=0,r=0;for(let o of e){if(o.offset>i){for(let s=0;s<o.offset-i;s++)t.push("e");r+=o.offset-i}if(o.type=="insert"){for(let s=0;s<o.howMany;s++)t.push("i");i=o.offset+o.howMany}else if(o.type=="remove"){for(let s=0;s<o.howMany;s++)t.push("r");i=o.offset,r+=o.howMany}else{if(o.howMany>1500)for(let s=0;s<o.howMany;s++)t.push("a");else t.push(..."a".repeat(o.howMany).split(""));i=o.offset+o.howMany,r+=o.howMany}}if(r<n)for(let o=0;o<n-r-i;o++)t.push("e");return t}function jfe(n){let e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}var yP=class{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new C("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];let i=this._operations[0];e===void 0&&(e=i.baseVersion);let r=t-1;for(let[a,l]of this._gaps)e>a&&e<l&&(e=l),r>a&&r<l&&(r=a-1);if(r<i.baseVersion||e>this.lastOperation.baseVersion)return[];let o=this._baseVersionToOperationIndex.get(e);o===void 0&&(o=0);let s=this._baseVersionToOperationIndex.get(r);return s===void 0&&(s=this._operations.length-1),this._operations.slice(o,s+1)}getOperation(e){let t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}},_u=class extends dt{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}};_u.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};var O9="$graveyard",_P=class extends nt(){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(e){super(),this.model=e,this.history=new yP,this.selection=new ci(this),this.roots=new ut({idProperty:"rootName"}),this.differ=new vP(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",O9),this.listenTo(e,"applyOperation",(t,i)=>{let r=i[0];r.isDocumentOperation&&this.differ.bufferOperation(r)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{let r=i[0];r.isDocumentOperation&&this.history.addOperation(r)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,r,o,s)=>{let a=P(v({},i.getData()),{range:o});this.differ.bufferMarkerChange(i.name,s,a),r===null&&i.on("change",(l,c)=>{let u=i.getData();this.differ.bufferMarkerChange(i.name,P(v({},u),{range:c}),u)})}),this.registerPostFixer(t=>{let i=!1;for(let r of this.roots)!r.isAttached()&&!r.isEmpty&&(t.remove(t.createRangeIn(r)),i=!0);for(let r of this.model.markers)r.getRange().root.isAttached()||(t.removeMarker(r),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(O9)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new C("model-document-createroot-name-exists",this,{name:t});let i=new _u(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){let e=S1(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){let e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){let e=this._getDefaultRoot(),t=this.model,i=t.schema,r=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(r)||t.createRange(r)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&N9(e.start)&&N9(e.end)}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}};function N9(n){let e=n.textNode;if(e){let t=e.data,i=n.offset-e.startOffset;return!Lg(t,i)&&!Fg(t,i)}return!0}var CP=class extends nt(){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(e){let t=e instanceof gl?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,r=!1){let o=e instanceof gl?e.name:e;if(o.includes(","))throw new C("markercollection-incorrect-marker-name",this);let s=this._markers.get(o);if(s){let c=s.getData(),u=s.getRange(),h=!1;return u.isEqual(t)||(s._attachLiveRange(En.fromRange(t)),h=!0),i!=s.managedUsingOperations&&(s._managedUsingOperations=i,h=!0),typeof r=="boolean"&&r!=s.affectsData&&(s._affectsData=r,h=!0),h&&this.fire(`update:${o}`,s,u,t,c),s}let a=En.fromRange(t),l=new gl(o,a,i,r);return this._markers.set(o,l),this.fire(`update:${o}`,l,null,t,P(v({},l.getData()),{range:null})),l}_remove(e){let t=e instanceof gl?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){let t=e instanceof gl?e.name:e,i=this._markers.get(t);if(!i)throw new C("markercollection-refresh-marker-not-exists",this);let r=i.getRange();this.fire(`update:${t}`,i,r,r,i.getData())}*getMarkersAtPosition(e){for(let t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(let t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(let e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(let t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}},gl=class extends nt(Ho){name;_managedUsingOperations;_affectsData;_liveRange;constructor(e,t,i,r){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=r}get managedUsingOperations(){if(!this._liveRange)throw new C("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new C("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new C("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new C("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new C("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}};gl.prototype.is=function(n){return n==="marker"||n==="model:marker"};var EP=class extends ui{sourcePosition;howMany;constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new C("detach-operation-on-document-node",this)}_execute(){_U(I._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}},Yr=class n extends Ho{markers=new Map;_children=new pu;constructor(e){super(),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(let i of e)t=t.getChildAtOffset(i);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){let e=[];for(let t of this._children)e.push(t.toJSON());return e}static fromJSON(e){let t=[];for(let i of e)i.name?t.push(dt.fromJSON(i)):t.push(wt.fromJSON(i));return new n(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=$fe(t);for(let r of i)r.parent!==null&&r._remove(),r.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let r of i)r.parent=null;return i}};Yr.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function $fe(n){return typeof n=="string"?[new wt(n)]:(li(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new wt(e):e instanceof Qi?new wt(e.data,e.getAttributes()):e))}var SP=class{model;batch;constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new wt(e,t)}createElement(e,t){return new dt(e,t)}createDocumentFragment(){return new Yr}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof wt&&e.data=="")return;let r=O._createAt(t,i);if(e.parent)if(V9(e.root,r.root)){this.move(I._createOn(e),r);return}else{if(e.root.document)throw new C("model-writer-insert-forbidden-move",this);this.remove(e)}let o=r.root.document?r.root.document.version:null,s=new Dn(r,e,o);if(e instanceof wt&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof Yr)for(let[a,l]of e.markers){let c=O._createAt(l.root,0),h={range:new I(l.start._getCombined(c,r),l.end._getCombined(c,r)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,h):this.addMarker(a,h)}}insertText(e,t,i,r){t instanceof Yr||t instanceof dt||t instanceof O?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,r)}insertElement(e,t,i,r){t instanceof Yr||t instanceof dt||t instanceof O?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,r)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Yr||t instanceof dt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Yr||t instanceof dt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof I){let r=i.getMinimalFlatRanges();for(let o of r)L9(this,e,t,o)}else F9(this,e,t,i)}setAttributes(e,t){for(let[i,r]of Di(e))this.setAttribute(i,r,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof I){let i=t.getMinimalFlatRanges();for(let r of i)L9(this,e,null,r)}else F9(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();let t=i=>{for(let r of i.getAttributeKeys())this.removeAttribute(r,i)};if(!(e instanceof I))t(e);else for(let i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof I))throw new C("writer-move-invalid-range",this);if(!e.isFlat)throw new C("writer-move-range-not-flat",this);let r=O._createAt(t,i);if(r.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!V9(e.root,r.root))throw new C("writer-move-different-document",this);let o=e.root.document?e.root.document.version:null,s=new rt(e.start,e.end.offset-e.start.offset,r,o);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();let i=(e instanceof I?e:I._createOn(e)).getMinimalFlatRanges().reverse();for(let r of i)this._addOperationForAffectedMarkers("move",r),Wfe(r.start,r.end.offset-r.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();let t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof dt))throw new C("writer-merge-no-element-before",this);if(!(i instanceof dt))throw new C("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){let t=e.nodeBefore,i=e.nodeAfter;this.move(I._createIn(i),O._createAt(t,"end")),this.remove(i)}_merge(e){let t=O._createAt(e.nodeBefore,"end"),i=O._createAt(e.nodeAfter,0),r=e.root.document.graveyard,o=new O(r,[0]),s=e.root.document.version,a=new $t(i,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof dt))throw new C("writer-rename-not-element-instance",this);let i=e.root.document?e.root.document.version:null,r=new Cr(O._createBefore(e),e.name,t,i);this.batch.addOperation(r),this.model.applyOperation(r)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new C("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new C("writer-split-invalid-limit-element",this);let r,o;do{let s=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=pt.getInsertionPosition(e),c=new pt(e,a,l,null,s);this.batch.addOperation(c),this.model.applyOperation(c),!r&&!o&&(r=i,o=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new I(O._createAt(r,"end"),O._createAt(o,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new C("writer-wrap-range-not-flat",this);let i=t instanceof dt?t:new dt(t);if(i.childCount>0)throw new C("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new C("writer-wrap-element-attached",this);this.insert(i,e.start);let r=new I(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(r,O._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new C("writer-unwrap-element-no-parent",this);this.move(I._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new C("writer-addmarker-no-usingoperation",this);let i=t.usingOperation,r=t.range,o=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new C("writer-addmarker-marker-exists",this);if(!r)throw new C("writer-addmarker-no-range",this);return i?(Hg(this,e,null,r,o),this.model.markers.get(e)):this.model.markers._set(e,r,i,o)}updateMarker(e,t){this._assertWriterUsedCorrectly();let i=typeof e=="string"?e:e.name,r=this.model.markers.get(i);if(!r)throw new C("writer-updatemarker-marker-not-exists",this);if(!t){ge("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(r);return}let o=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",a=s?t.affectsData:r.affectsData;if(!o&&!t.range&&!s)throw new C("writer-updatemarker-wrong-options",this);let l=r.getRange(),c=t.range?t.range:l;if(o&&t.usingOperation!==r.managedUsingOperations){t.usingOperation?Hg(this,i,null,c,a):(Hg(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}r.managedUsingOperations?Hg(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new C("writer-removemarker-no-marker",this);let i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}let r=i.getRange();Hg(this,t,r,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();let i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new C("writer-addroot-root-exists",this);let r=this.model.document,o=new wl(e,t,!0,r,r.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new C("writer-detachroot-no-root",this);for(let o of this.model.markers)o.getRange().root===t&&this.removeMarker(o);for(let o of t.getAttributeKeys())this.removeAttribute(o,t);this.remove(this.createRangeIn(t));let i=this.model.document,r=new wl(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(r),this.model.applyOperation(r)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(let[i,r]of Di(e))this._setSelectionAttribute(i,r)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(let t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){let i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){let r=ci._getStoreAttributeKey(e);this.setAttribute(r,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){let t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){let i=ci._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new C("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(let i of this.model.markers){if(!i.managedUsingOperations)continue;let r=i.getRange(),o=!1;if(e==="move"){let s=t;o=s.containsPosition(r.start)||s.start.isEqual(r.start)||s.containsPosition(r.end)||s.end.isEqual(r.end)}else{let s=t,a=s.nodeBefore,l=s.nodeAfter,c=r.start.parent==a&&r.start.isAtEnd,u=r.end.parent==l&&r.end.offset==0,h=r.end.nodeAfter==l,p=r.start.nodeAfter==l;o=c||u||h||p}o&&this.updateMarker(i.name,{range:r})}}};function L9(n,e,t,i){let r=n.model,o=r.document,s=i.start,a,l,c;for(let h of i.getWalker({shallow:!0}))c=h.item.getAttribute(e),a&&l!=c&&(l!=t&&u(),s=a),a=h.nextPosition,l=c;a instanceof O&&a!=s&&l!=t&&u();function u(){let h=new I(s,a),p=h.root.document?o.version:null,g=new mn(h,e,l,t,p);n.batch.addOperation(g),r.applyOperation(g)}}function F9(n,e,t,i){let r=n.model,o=r.document,s=i.getAttribute(e),a,l;if(s!=t){if(i.root===i){let u=i.document?o.version:null;l=new yu(i,e,s,t,u)}else{a=new I(O._createBefore(i),n.createPositionAfter(i));let u=a.root.document?o.version:null;l=new mn(a,e,s,t,u)}n.batch.addOperation(l),r.applyOperation(l)}}function Hg(n,e,t,i,r){let o=n.model,s=o.document,a=new Ji(e,t,i,o.markers,!!r,s.version);n.batch.addOperation(a),o.applyOperation(a)}function Wfe(n,e,t,i){let r;if(n.root.document){let o=i.document,s=new O(o.graveyard,[0]);r=new rt(n,e,s,o.version)}else r=new EP(n,e);t.addOperation(r),i.applyOperation(r)}function V9(n,e){return n===e||n instanceof _u&&e instanceof _u}function qfe(n,e,t={}){if(e.isCollapsed)return;let i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;let r=n.schema;n.change(o=>{if(!t.doNotResetEntireContent&&tme(r,e)){eme(o,e);return}let s={};if(!t.doNotAutoparagraph){let c=e.getSelectedElement();c&&Object.assign(s,r.getAttributesWithProperty(c,"copyOnReplace",!0))}let[a,l]=Gfe(i);a.isTouching(l)||o.remove(o.createRange(a,l)),t.leaveUnmerged||(Yfe(o,a,l),r.removeDisallowedAttributes(a.parent.getChildren(),o)),xU(o,e,a),!t.doNotAutoparagraph&&Jfe(r,a)&&IU(o,a,e,s),a.detach(),l.detach()})}function Gfe(n){let e=n.root.document.model,t=n.start,i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){let r=Kfe(i);if(r&&i.isTouching(e.createPositionAt(r,0))){let o=e.createSelection(n);e.modifySelection(o,{direction:"backward"});let s=o.getLastPosition(),a=e.createRange(s,i);e.hasContent(a,{ignoreMarkers:!0})||(i=s)}}return[Yt.fromPosition(t,"toPrevious"),Yt.fromPosition(i,"toNext")]}function Kfe(n){let e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(let r of i){if(t.isLimit(r))return null;if(t.isBlock(r))return r}}function Yfe(n,e,t){let i=n.model;if(!LP(n.model.schema,e,t))return;let[r,o]=Zfe(e,t);!r||!o||(!i.hasContent(r,{ignoreMarkers:!0})&&i.hasContent(o,{ignoreMarkers:!0})?AU(n,e,t,r.parent):kU(n,e,t,r.parent))}function kU(n,e,t,i){let r=e.parent,o=t.parent;if(!(r==i||o==i)){for(e=n.createPositionAfter(r),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(o,e),n.merge(e);t.parent.isEmpty;){let s=t.parent;t=n.createPositionBefore(s),n.remove(s)}LP(n.model.schema,e,t)&&kU(n,e,t,i)}}function AU(n,e,t,i){let r=e.parent,o=t.parent;if(!(r==i||o==i)){for(e=n.createPositionAfter(r),t=n.createPositionBefore(o),t.isEqual(e)||n.insert(r,t);e.parent.isEmpty;){let s=e.parent;e=n.createPositionBefore(s),n.remove(s)}t=n.createPositionBefore(o),Qfe(n,t),LP(n.model.schema,e,t)&&AU(n,e,t,i)}}function Qfe(n,e){let t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function LP(n,e,t){let i=e.parent,r=t.parent;return i==r||n.isLimit(i)||n.isLimit(r)?!1:Xfe(e,t,n)}function Zfe(n,e){let t=n.getAncestors(),i=e.getAncestors(),r=0;for(;t[r]&&t[r]==i[r];)r++;return[t[r],i[r]]}function Jfe(n,e){let t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function Xfe(n,e,t){let i=new I(n,e);for(let r of i.getWalker())if(t.isLimit(r.item))return!1;return!0}function IU(n,e,t,i={}){let r=n.createElement("paragraph");n.model.schema.setAllowedAttributes(r,i,n),n.insert(r,e),xU(n,t,n.createPositionAt(r,0))}function eme(n,e){let t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),IU(n,n.createPositionAt(t,0),e)}function tme(n,e){let t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;let i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function xU(n,e,t){e instanceof ci?n.setSelection(t):e.setTo(t)}function nme(n,e){return n.change(t=>{let i=t.createDocumentFragment(),r=e.getFirstRange();if(!r||r.isCollapsed)return i;let o=r.start.root,s=r.start.getCommonPath(r.end),a=o.getNodeByPath(s),l;r.start.parent==r.end.parent?l=r:l=t.createRange(t.createPositionAt(a,r.start.path[s.length]),t.createPositionAt(a,r.end.path[s.length]+1));let c=l.end.offset-l.start.offset;for(let u of l.getItems({shallow:!0}))u.is("$textProxy")?t.appendText(u.data,u.getAttributes(),i):t.append(t.cloneElement(u,!0),i);if(l!=r){let u=r._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],h=t.createRange(t.createPositionAt(i,0),u.start),p=t.createRange(u.end,t.createPositionAt(i,"end"));B9(p,t),B9(h,t)}return i})}function B9(n,e){let t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let r=i;for(;r.parent&&r.isEmpty;){let o=e.createRangeOn(r);r=r.parent,e.remove(o)}})}function ime(n,e,t){return n.change(i=>{let r=t||n.document.selection;r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});let o=new TP(n,i,r.anchor),s=[],a;if(e.is("documentFragment")){if(e.markers.size){let u=[];for(let[h,p]of e.markers){let{start:g,end:w}=p,y=g.isEqual(w);u.push({position:g,name:h,isCollapsed:y},{position:w,name:h,isCollapsed:y})}u.sort(({position:h},{position:p})=>h.isBefore(p)?1:-1);for(let{position:h,name:p,isCollapsed:g}of u){let w=null,y=null,E=h.parent===e&&h.isAtStart,T=h.parent===e&&h.isAtEnd;!E&&!T?(w=i.createElement("$marker"),i.insert(w,h)):g&&(y=E?"start":"end"),s.push({name:p,element:w,collapsed:y})}}a=e.getChildren()}else a=[e];o.handleNodes(a);let l=o.getSelectionRange();if(e.is("documentFragment")&&s.length){let u=l?En.fromRange(l):null,h={};for(let p=s.length-1;p>=0;p--){let{name:g,element:w,collapsed:y}=s[p],E=!h[g];if(E&&(h[g]=[]),w){let T=i.createPositionAt(w,"before");h[g].push(T),i.remove(w)}else{let T=o.getAffectedRange();if(!T){y&&h[g].push(o.position);continue}y?h[g].push(T[y]):h[g].push(E?T.start:T.end)}}for(let[p,[g,w]]of Object.entries(h))g&&w&&g.root===w.root&&g.root.document&&!i.model.markers.has(p)&&i.addMarker(p,{usingOperation:!0,affectsData:!0,range:new I(g,w)});u&&(l=u.toRange(),u.detach())}l&&(r instanceof ci?i.setSelection(l):r.setTo(l));let c=o.getAffectedRange()||n.createRange(r.anchor);return o.destroy(),c})}var TP=class{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(let t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){let t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new C("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?I._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new I(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;let e=Yt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new C("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Yt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Yt.fromPosition(e,"toNext"))}_mergeOnLeft(){let e=this._firstNode;if(!(e instanceof dt)||!this._canMergeLeft(e))return;let t=Yt._createBefore(e);t.stickiness="toNext";let i=Yt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Yt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Yt._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){let e=this._lastNode;if(!(e instanceof dt)||!this._canMergeRight(e))return;let t=Yt._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new C("insertcontent-invalid-insertion-position",this);this.position=O._createAt(t.nodeBefore,"end");let i=Yt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Yt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Yt._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){let t=e.previousSibling;return t instanceof dt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){let t=e.nextSibling;return t instanceof dt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();let e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){let t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){let i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{let i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}};function rme(n,e,t,i={}){if(!n.schema.isObject(e))throw new C("insertobject-element-not-an-object",n,{object:e});let r=t||n.document.selection,o=r;i.findOptimalPosition&&n.schema.isBlock(e)&&(o=n.createSelection(n.schema.findOptimalInsertionRange(r,i.findOptimalPosition)));let s=it(r.getSelectedBlocks()),a={};return s&&Object.assign(a,n.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),n.change(l=>{o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let c=e,u=o.anchor.parent;!n.schema.checkChild(u,e)&&n.schema.checkChild(u,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);let h=n.insertContent(c,o);return h.isCollapsed||i.setSelection&&ome(l,e,i.setSelection,a),h})}function ome(n,e,t,i){let r=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new C("insertobject-invalid-place-parameter-value",r);let o=e.nextSibling;if(r.schema.isInline(e)){n.setSelection(e,"after");return}!(o&&r.schema.checkChild(o,"$text"))&&r.schema.checkChild(e.parent,"paragraph")&&(o=n.createElement("paragraph"),r.schema.setAllowedAttributes(o,i,n),r.insertContent(o,n.createPositionAfter(e))),o&&n.setSelection(o,0)}var sme=' ,.?!:;"-()';function ame(n,e,t={}){let i=n.schema,r=t.direction!="backward",o=t.unit?t.unit:"character",s=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Zi({boundaries:dme(a,r),singleCharacters:!0,direction:r?"forward":"backward"}),c={walker:l,schema:i,isForward:r,unit:o,treatEmojiAsSingleUnit:s},u;for(;u=l.next();){if(u.done)return;let h=lme(c,u.value);if(h){e instanceof ci?n.change(p=>{p.setSelectionFocus(h)}):e.setFocus(h);return}}}function lme(n,e){let{isForward:t,walker:i,unit:r,schema:o,treatEmojiAsSingleUnit:s}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?ume(i,t):cme(i,r,s);if(a==(t?"elementStart":"elementEnd")){if(o.isSelectable(l))return O._createAt(l,t?"after":"before");if(o.checkChild(c,"$text"))return c}else{if(o.isLimit(l)){i.skip(()=>!0);return}if(o.checkChild(c,"$text"))return c}}function cme(n,e,t){let i=n.position.textNode;if(i){let r=i.data,o=n.position.offset-i.startOffset;for(;Lg(r,o)||e=="character"&&Fg(r,o)||t&&$1(r,o);)n.next(),o=n.position.offset-i.startOffset}return n.position}function ume(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){let i=n.position.offset-t.startOffset;if(fme(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(hme(t.data,i,e))break;n.next()}}return n.position}function dme(n,e){let t=n.root,i=O._createAt(t,e?"end":0);return e?new I(n,i):new I(i,n)}function hme(n,e,t){let i=e+(t?0:-1);return sme.includes(n.charAt(i))}function fme(n,e,t){return e===(t?n.offsetSize:0)}var vl=class extends $e(){markers;document;schema;_pendingChanges;_currentWriter;constructor(){super(),this.markers=new CP,this.document=new _P(this),this.schema=new mP,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),ufe(this),this.document.registerPostFixer(mU),this.on("insertContent",(e,[t,i])=>{e.return=ime(this,t,i)}),this.on("insertObject",(e,[t,i,r])=>{e.return=rme(this,t,i,r)}),this.on("canEditAt",e=>{let t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new pl,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){C.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new pl):e instanceof pl||(e=new pl(e)):e=new pl,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){C.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...r){let o=Gx(t,i);return this.fire("insertContent",[e,o,i,...r])}insertObject(e,t,i,r,...o){let s=Gx(t,i);return this.fire("insertObject",[e,s,r,r,...o])}deleteContent(e,t){qfe(this,e,t)}modifySelection(e,t){ame(this,e,t)}getSelectedContent(e){return nme(this,e)}hasContent(e,t={}){let i=e instanceof I?e:I._createIn(e);if(i.isCollapsed)return!1;let{ignoreWhitespaces:r=!1,ignoreMarkers:o=!1}=t;if(!o){for(let s of this.markers.getMarkersIntersectingRange(i))if(s.affectsData)return!0}for(let s of i.getItems())if(this.schema.isContent(s))if(s.is("$textProxy"))if(r){if(s.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){let t=Gx(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new O(e,t,i)}createPositionAt(e,t){return O._createAt(e,t)}createPositionAfter(e){return O._createAfter(e)}createPositionBefore(e){return O._createBefore(e)}createRange(e,t){return new I(e,t)}createRangeIn(e){return I._createIn(e)}createRangeOn(e){return I._createOn(e)}createSelection(...e){return new Cn(...e)}createBatch(e){return new pl(e)}createOperationFromJSON(e){return gP.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){let e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){let t=this._pendingChanges[0].batch;this._currentWriter=new SP(this,t);let i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function Gx(n,e){if(n)return n instanceof Cn||n instanceof ci?n:n instanceof Su?e||e===0?new Cn(n,e):n.is("rootElement")?new Cn(n,"in"):new Cn(n,"on"):new Cn(n)}var r_=class extends _r{domEventType="click";onDomEvent(e){this.fire(e.type,e)}},Ks=class extends _r{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(e){this.fire(e.type,e)}},Zr=class{document;constructor(e){this.document=e}createDocumentFragment(e){return new bl(this.document,e)}createElement(e,t,i){return new yr(this.document,e,t,i)}createText(e){return new Pt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){let t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){let i=e.parent;if(i){let r=i.getChildIndex(e);return this.removeChildren(r,1,i),this.insertChild(r,t,i),!0}return!1}unwrapElement(e){let t=e.parent;if(t){let i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){let i=new yr(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Kt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return z._createAt(e,t)}createPositionAfter(e){return z._createAfter(e)}createPositionBefore(e){return z._createBefore(e)}createRange(e,t){return new xe(e,t)}createRangeOn(e){return xe._createOn(e)}createRangeIn(e){return xe._createIn(e)}createSelection(...e){return new qs(...e)}};var mme=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi;function pme(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};let e=vme(n),t=e[0],i=e[2]||t,r=e[1]||t,o=e[3]||r;return{top:t,bottom:i,right:r,left:o}}function gme(n){return e=>{let{top:t,right:i,bottom:r,left:o}=e,s=[];return[t,i,o,r].every(a=>!!a)?s.push([n,bme(e)]):(t&&s.push([n+"-top",t]),i&&s.push([n+"-right",i]),r&&s.push([n+"-bottom",r]),o&&s.push([n+"-left",o])),s}}function bme({top:n,right:e,bottom:t,left:i}){let r=[];return i!==e?r.push(n,e,t,i):t!==n?r.push(n,e,t):e!==n?r.push(n,e):r.push(n),r.join(" ")}function wme(n){return e=>({path:n,value:pme(e)})}function vme(n){let e=n.trim().slice(0,1500).matchAll(mme);return Array.from(e).map(t=>t[0])}function PU(n){n.setNormalizer("margin",wme("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",gme("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}var yf="[",$g="]",gf="{",zg="}",nb={container:Gs,attribute:mu,empty:Ef,ui:bu,raw:Sf},yme={setContentOf:(n,e)=>{n.innerHTML=e}};function kP(n,e={}){if(!(n instanceof Tf))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let t=n.document,i=!!e.withoutSelection,r=e.rootName||"main",o=t.getRoot(r),s={showType:e.showType,showPriority:e.showPriority,renderUIElements:e.renderUIElements,renderRawElements:e.renderRawElements,ignoreRoot:!0,domConverter:e.domConverter};return i?kP._stringify(o,null,s):kP._stringify(o,t.selection,s)}kP._stringify=DU;function RU(n,e,t={}){if(!(n instanceof Tf))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let i=n.document,r=t.rootName||"main",o=i.getRoot(r);n.change(s=>{let a=RU._parse(e,{rootElement:o});a.view&&a.selection&&s.setSelection(a.selection)})}RU._parse=MU;function DU(n,e=null,t={}){let i;return e instanceof z||e instanceof xe?i=new ib(e):i=e,new IP(n,i,t).stringify()}function MU(n,e={}){let t=new o_(new _f);e.order=e.order||[];let i=new AP({sameSelectionCharacters:e.sameSelectionCharacters}),r=new pP(t,{namespaces:Object.keys(nb)});e.inlineObjectElements&&r.domConverter.inlineObjectElements.push(...e.inlineObjectElements);let o=r.toView(n);if(o=OU(o),e.rootElement){let a=e.rootElement,l=o._removeChildren(0,o.childCount);a._removeChildren(0,a.childCount),a._appendChild(l),o=a}let s=i.parse(o,e.order);if(o.is("documentFragment")&&o.childCount===1&&(o=o.getChild(0)),s.length){let a=new ib(s,{backward:!!e.lastRangeBackward});return{view:o,selection:a}}return o.parent&&o._remove(),o}var AP=class{sameSelectionCharacters;_positions;constructor(e){this.sameSelectionCharacters=!!e.sameSelectionCharacters}parse(e,t){this._positions=[],this._getPositions(e);let i=this._createRanges();if(t.length){if(t.length!=i.length)throw new Error(`Parse error - there are ${i.length} ranges found, but ranges order array contains ${t.length} elements.`);i=this._sortRanges(i,t)}return i}_getPositions(e){if(e.is("documentFragment")||e.is("element")){let t=[...e.getChildren()];for(let i of t)this._getPositions(i)}if(e.is("$text")){let t=new RegExp(`[${gf}${zg}\\${$g}\\${yf}]`,"g"),i=e.data,r,o=0,s=[];for(;r=t.exec(i);){let c=r.index,u=r[0];s.push({bracket:u,textOffset:c-o}),o++}i=i.replace(t,""),e._data=i;let a=e.index,l=e.parent;i||e._remove();for(let c of s)if(i)if(this.sameSelectionCharacters||!this.sameSelectionCharacters&&(c.bracket==gf||c.bracket==zg))this._positions.push({bracket:c.bracket,position:new z(e,c.textOffset)});else{if(!this.sameSelectionCharacters&&c.textOffset!==0&&c.textOffset!==i.length)throw new Error(`Parse error - range delimiter '${c.bracket}' is placed inside text node.`);let u=c.textOffset===0?a:a+1;this._positions.push({bracket:c.bracket,position:new z(l,u)})}else{if(!this.sameSelectionCharacters&&c.bracket==gf||c.bracket==zg)throw new Error(`Parse error - text range delimiter '${c.bracket}' is placed inside empty text node. `);this._positions.push({bracket:c.bracket,position:new z(l,a)})}}}_sortRanges(e,t){let i=[],r=0;for(let o of t){if(e[o-1]===void 0)throw new Error("Parse error - provided ranges order is invalid.");i[o-1]=e[r],r++}return i}_createRanges(){let e=[],t=null;for(let i of this._positions){if(!t&&(i.bracket==$g||i.bracket==zg))throw new Error(`Parse error - end of range was found '${i.bracket}' but range was not started before.`);if(t&&(i.bracket==yf||i.bracket==gf))throw new Error(`Parse error - start of range was found '${i.bracket}' but one range is already started.`);i.bracket==yf||i.bracket==gf?t=new xe(i.position,i.position):(t.end=i.position,e.push(t),t=null)}if(t!==null)throw new Error("Parse error - range was started but no end delimiter was found.");return e}},IP=class{root;selection;ranges;showType;showPriority;showAttributeElementId;ignoreRoot;sameSelectionCharacters;renderUIElements;renderRawElements;domConverter;constructor(e,t,i){this.root=e,this.selection=t,this.ranges=[],t&&(this.ranges=[...t.getRanges()]),this.showType=!!i.showType,this.showPriority=!!i.showPriority,this.showAttributeElementId=!!i.showAttributeElementId,this.ignoreRoot=!!i.ignoreRoot,this.sameSelectionCharacters=!!i.sameSelectionCharacters,this.renderUIElements=!!i.renderUIElements,this.renderRawElements=!!i.renderRawElements,this.domConverter=i.domConverter||yme}stringify(){let e="";return this._walkView(this.root,t=>{e+=t}),e}_walkView(e,t){let i=this.ignoreRoot&&this.root===e;if(e.is("element")||e.is("documentFragment")){if(e.is("element")&&!i&&t(this._stringifyElementOpen(e)),this.renderUIElements&&e.is("uiElement"))t(e.render(document,this.domConverter).innerHTML);else if(this.renderRawElements&&e.is("rawElement")){let r=document.createElement("div");e.render(r,this.domConverter),t(r.innerHTML)}else{let r=0;t(this._stringifyElementRanges(e,r));for(let o of e.getChildren())this._walkView(o,t),r++,t(this._stringifyElementRanges(e,r))}e.is("element")&&!i&&t(this._stringifyElementClose(e))}e.is("$text")&&t(this._stringifyTextRanges(e))}_stringifyElementRanges(e,t){let i="",r="",o="";for(let s of this.ranges)s.start.parent==e&&s.start.offset===t&&(s.isCollapsed?o+=yf+$g:i+=yf),s.end.parent===e&&s.end.offset===t&&!s.isCollapsed&&(r+=$g);return r+o+i}_stringifyTextRanges(e){let t=e.data.length,i=e.data.split(""),r,o;this.sameSelectionCharacters?(r=yf,o=$g):(r=gf,o=zg),i[t]="";let s=i.map(a=>({letter:a,start:"",end:"",collapsed:""}));for(let a of this.ranges){let l=a.start,c=a.end;l.parent==e&&l.offset>=0&&l.offset<=t&&(a.isCollapsed?s[c.offset].collapsed+=r+o:s[l.offset].start+=r),c.parent==e&&c.offset>=0&&c.offset<=t&&!a.isCollapsed&&(s[c.offset].end+=o)}return s.map(a=>a.end+a.collapsed+a.start+a.letter).join("")}_stringifyElementOpen(e){let t=this._stringifyElementPriority(e),i=this._stringifyElementId(e),o=[this._stringifyElementType(e),e.name].filter(l=>l!=="").join(":"),s=this._stringifyElementAttributes(e);return`<${[o,t,i,s].filter(l=>l!=="").join(" ")}>`}_stringifyElementClose(e){return`</${[this._stringifyElementType(e),e.name].filter(r=>r!=="").join(":")}>`}_stringifyElementType(e){if(this.showType){for(let t in nb)if(e instanceof nb[t])return t}return""}_stringifyElementPriority(e){return this.showPriority&&e.is("attributeElement")?`view-priority="${e.priority}"`:""}_stringifyElementId(e){return this.showAttributeElementId&&e.is("attributeElement")&&e.id?`view-id="${e.id}"`:""}_stringifyElementAttributes(e){let t=[],i=[...e.getAttributeKeys()].sort();for(let r of i){let o;r==="class"?o=[...e.getClassNames()].sort().join(" "):r==="style"?o=[...e.getStyleNames()].sort().map(s=>`${s}:${e.getStyle(s).replace(/"/g,"&quot;")}`).join(";"):o=e.getAttribute(r),t.push(`${r}="${o}"`)}return t.join(" ")}};function OU(n){if(n.is("element")||n.is("documentFragment")){let e=n.is("documentFragment")?new bl(n.document):_me(n.document,n);for(let t of[...n.getChildren()]){if(e.is("emptyElement"))throw new Error("Parse error - cannot parse inside EmptyElement.");if(e.is("uiElement"))throw new Error("Parse error - cannot parse inside UIElement.");if(e.is("rawElement"))throw new Error("Parse error - cannot parse inside RawElement.");e._appendChild(OU(t))}return e}return n}function _me(n,e){let t=Cme(e),i=nb[t.type],r=i?new i(n,t.name):new yr(n,t.name);r.is("attributeElement")&&(t.priority!==null&&(r._priority=t.priority),t.id!==null&&(r._id=t.id));for(let o of e.getAttributeKeys())r._setAttribute(o,e.getAttribute(o));return r}function Cme(n){let e=n.name.split(":"),t=Sme(n.getAttribute("view-priority")),i=n.hasAttribute("view-id")?n.getAttribute("view-id"):null;if(n._removeAttribute("view-priority"),n._removeAttribute("view-id"),e.length==1)return{name:e[0],type:t!==null?"attribute":null,priority:t,id:i};let r=Eme(e[0]);if(r)return{name:e[1],type:r,priority:t,id:i};throw new Error(`Parse error - cannot parse element's name: ${n.name}.`)}function Eme(n){return n in nb?n:null}function Sme(n){let e=parseInt(n,10);return isNaN(e)?null:e}function NU(n,e={}){if(!(n instanceof vl))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let t=e.rootName||"main",i=n.document.getRoot(t);return NU._stringify(i,e.withoutSelection?null:n.document.selection,e.convertMarkers?n.markers:null)}NU._stringify=Tme;function LU(n,e,t={}){if(!(n instanceof vl))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let i,r=null,o=n.document.getRoot(t.rootName||"main"),s=LU._parse(e,n.schema,{lastRangeBackward:t.lastRangeBackward,selectionAttributes:t.selectionAttributes,context:[o.name],inlineObjectElements:t.inlineObjectElements});"model"in s?(i=s.model,r=s.selection):i=s,t.batchType!==void 0?n.enqueueChange(t.batchType,a):n.change(a);function a(l){if(l.remove(l.createRangeIn(o)),l.insert(i,o),l.setSelection(null),l.removeSelectionAttribute(n.document.selection.getAttributeKeys()),r){let c=[];for(let u of r.getRanges()){let h=new O(o,u.start.path),p=new O(o,u.end.path);c.push(new I(h,p))}l.setSelection(c,{backward:r.isBackward}),t.selectionAttributes&&l.setSelectionAttribute(r.getAttributes())}}}LU._parse=kme;function Tme(n,e=null,t=null){let i=new vl,r=new kf,o=null,s;if(n instanceof _u||n instanceof Yr)s=i.createRangeIn(n);else if(n.parent)s=new I(i.createPositionBefore(n),i.createPositionAfter(n));else{let y=new Yr(n);s=i.createRangeIn(y)}e instanceof Cn||e instanceof ci?o=e:e instanceof I?o=new Cn(e):e instanceof O&&(o=new Cn(e));let a=new _f,l=new Tf(a),c=l.document,u=new Wg(c,"div");u.rootName="main",c.roots.add(u);let h=new Yg({mapper:r,schema:i.schema});r.bindElements(n.root,u),h.on("insert:$text",RP()),h.on("insert",DP(),{priority:"lowest"}),h.on("attribute",(y,E,T)=>{(E.item instanceof Cn||E.item instanceof ci||E.item.is("$textProxy"))&&sU((V,{writer:Q})=>Q.createAttributeElement("model-text-with-attributes",{[E.attributeKey]:H9(V)}))(y,E,T)}),h.on("insert",aU(y=>{let E=FP(y.getAttributes(),H9);return new Gs(c,y.name,E)})),h.on("selection",rU()),h.on("selection",oU()),h.on("addMarker",lU((y,{writer:E})=>{let T=y.markerName+":"+(y.isOpening?"start":"end");return E.createUIElement(T)}));let p=new Map;if(t)for(let y of Array.from(t).sort((E,T)=>E.name<T.name?1:-1))p.set(y.name,y.getRange());let g=l._writer;h.convert(s,p,g),o&&h.convertSelection(o,t||i.markers,g);let w=DU(u,c.selection,{sameSelectionCharacters:!0});return w=w.substr(5,w.length-11),l.destroy(),w.replace(new RegExp("model-text-with-attributes","g"),"$text")}function kme(n,e,t={}){let i=new kf;n=n.replace(new RegExp("\\$text","g"),"model-text-with-attributes");let r=MU(n,{sameSelectionCharacters:!0,lastRangeBackward:!!t.lastRangeBackward,inlineObjectElements:t.inlineObjectElements}),o,s=null,a=null;"view"in r&&"selection"in r?(o=r.view,s=r.selection):o=r;let l=new vl,c=new e_({schema:e});c.on("documentFragment",Ame(i)),c.on("element:model-text-with-attributes",U9()),c.on("element",Ime(i)),c.on("text",U9());let u=l.change(h=>c.convert(o.root,h,t.context||"$root"));if(i.bindElements(u,o.root),u.childCount==1&&(u=u.getChild(0)),s){let h=[];for(let p of s.getRanges())h.push(i.toModelRange(p));a=new Cn(h,{backward:s.isBackward});for(let[p,g]of Di(t.selectionAttributes||[]))a.setAttribute(p,g)}return a?{model:u,selection:a}:u}function Ame(n){return(e,t,i)=>{let r=i.convertChildren(t.viewItem,t.modelCursor);n.bindElements(t.modelCursor.parent,t.viewItem),t=Object.assign(t,r),e.stop()}}function Ime(n){return(e,t,i)=>{let r=t.viewItem.name;if(!i.schema.checkChild(t.modelCursor,r))throw new Error(`Element '${r}' was not allowed in given position.`);let o=FP(t.viewItem.getAttributes(),FU),s=i.writer.createElement(t.viewItem.name,o);i.writer.insert(s,t.modelCursor),n.bindElements(s,t.viewItem),i.convertChildren(t.viewItem,s),t.modelRange=I._createOn(s),t.modelCursor=t.modelRange.end,e.stop()}}function U9(){return(n,e,t)=>{if(!t.schema.checkChild(e.modelCursor,"$text"))throw new Error("Text was not allowed in given position.");let i;if(e.viewItem.is("element")){let r=FP(e.viewItem.getAttributes(),FU),o=e.viewItem.getChild(0);i=t.writer.createText(o.data,r)}else i=t.writer.createText(e.viewItem.data);t.writer.insert(i,e.modelCursor),e.modelRange=I._createFromPositionAndShift(e.modelCursor,i.offsetSize),e.modelCursor=e.modelRange.end,n.stop()}}function FU(n){try{return JSON.parse(n)}catch{return n}}function H9(n){return Kt(n)?JSON.stringify(n):n}function*FP(n,e){for(let[t,i]of n)yield[t,e(i)]}var s_=class{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(e){if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){let i=this._listeners[e]||[];for(let r of i)r.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});let i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;let e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}};function VP(n,e=new Set){let t=[n],i=new Set,r=0;for(;t.length>r;){let o=t[r++];if(!(i.has(o)||!xme(o)||e.has(o)))if(i.add(o),Symbol.iterator in o)try{for(let s of o)t.push(s)}catch{}else for(let s in o)s!=="defaultValue"&&t.push(o[s])}return i}function xme(n){let e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function BU(n,e,t=new Set){if(n===e&&Pme(n))return!0;let i=VP(n,t),r=VP(e,t);for(let o of i)if(r.has(o))return!0;return!1}function Pme(n){return typeof n=="object"&&n!==null}var ob=class extends s_{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(e,t={}){super(t),this._throttledSave=No(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,r)=>e.create(i,r)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{let e={},t=[],i=this._config.rootsAttributes||{},r={};for(let[s,a]of Object.entries(this._data.roots))a.isLoaded?(e[s]="",r[s]=i[s]||{}):t.push(s);let o=P(v({},this._config),{extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:r,_watchdogInitialData:this._data});return delete o.initialData,o.extraPlugins.push(BP),this._initUsingData?this.create(e,o,o.context):Ki(this._elementOrData)?this.create(this._elementOrData,o,o.context):this.create(this._editables,o,o.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(r=>{this._editor=r,r.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=r.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){let e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){let e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,r=i.has("CommentsRepository")&&i.get("CommentsRepository"),o=i.has("TrackChanges")&&i.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{s.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(let a of e.model.markers)a._affectsData&&(s.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return r&&(s.commentThreads=JSON.stringify(r.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(s.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){let e={};for(let t of this.editor.model.document.getRootNames()){let i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return BU(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return lu(e,(t,i)=>{if(Ki(t)||i==="context")return t})}},BP=class{editor;_data;constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){let i=e.createElement(t.name,t.attributes);if(t.children)for(let r of t.children)i._appendChild(this._createNode(e,r));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){let t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:r,attributes:o}])=>{let s=JSON.parse(r),a=JSON.parse(o),l=t.model.document.getRoot(i);for(let[c,u]of a)e.setAttribute(c,u,l);for(let c of s){let u=this._createNode(e,c);e.insert(u,l,"end")}}),Object.entries(this._data.markers).forEach(([i,r])=>{let{document:o}=t.model,g=r,{rangeJSON:{start:s,end:a}}=g,l=Bt(g,["rangeJSON"]),c=o.getRoot(s.root),u=e.createPositionFromPath(c,s.path,s.stickiness),h=e.createPositionFromPath(c,a.path,a.stickiness),p=e.createRange(u,h);e.addMarker(i,v({range:p},l))})}_restoreCollaborationData(){let e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{let r=this.editor.config.get("collaboration.channelId"),o=this.editor.plugins.get("CommentsRepository");o.hasCommentThread(i.threadId)&&o.getCommentThread(i.threadId).remove(),o.addCommentThread(v({channelId:r},i))}),t.forEach(i=>{let r=this.editor.plugins.get("TrackChangesEditing");if(r.hasSuggestion(i.id)){let o=r.getSuggestion(i.id);o.attributes=i.attributes}else r.addSuggestionData(i)})}};var rb=Symbol("MainQueueId"),a_=class extends s_{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new UP;_contextConfig;_item;constructor(e,t={}){super(t),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue(rb,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){let t=VU(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let r;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return r=new ob(null,this._watchdogConfig),r.setCreator(i.creator),r._setExcludedProperties(this._contextProps),i.destructor&&r.setDestructor(i.destructor),this._watchdogs.set(i.id,r),r.on("error",(o,{error:s,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:s}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{let c=()=>{r.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};r.on("restart",c)}))}),r.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){let t=VU(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{let r=this._getWatchdog(i);return this._watchdogs.delete(i),r.destroy()})))}destroy(){return this._actionQueues.enqueue(rb,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue(rb,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=VP(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){let t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(let t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return BU(this._context,e.context)}},UP=class{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){let i=e===rb;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());let o=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get(rb),this._queues.get(e)])).then(t),s=o.catch(()=>{});return this._queues.set(e,s),o.finally(()=>{this._activeActions--,this._queues.get(e)===s&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}};function VU(n){return Array.isArray(n)?n:[n]}var k=class extends $e(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",UU,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",UU),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}};function UU(n){n.return=!1,n.stop()}var J=class extends $e(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;let i=e.model.document.selection,o=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!o)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",HU,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",HU),this.refresh())}execute(...e){}destroy(){this.stopListening()}};function HU(n){n.return=!1,n.stop()}var sb=class extends J{_childCommandsDefinitions=[];refresh(){}execute(...e){let t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){Dx(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){let e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}},l_=class extends nt(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(let r of t)r.pluginName&&this._availablePlugins.set(r.pluginName,r);this._contextPlugins=new Map;for(let[r,o]of i)this._contextPlugins.set(r,o),this._contextPlugins.set(o,r),r.pluginName&&this._availablePlugins.set(r.pluginName,r)}*[Symbol.iterator](){for(let e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){let t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new C("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){let r=this,o=this._context;g(e),y(e);let s=e.filter(N=>!h(N,t)),a=[...w(s)];he(a,i);let l=V(a);return Q(l,"init").then(()=>Q(l,"afterInit")).then(()=>l);function c(N){return typeof N=="function"}function u(N){return c(N)&&!!N.isContextPlugin}function h(N,$){return $.some(H=>H===N||p(N)===H||p(H)===N)}function p(N){return c(N)?N.pluginName||N.name:N}function g(N,$=new Set){N.forEach(H=>{c(H)&&($.has(H)||($.add(H),H.pluginName&&!r._availablePlugins.has(H.pluginName)&&r._availablePlugins.set(H.pluginName,H),H.requires&&g(H.requires,$)))})}function w(N,$=new Set){return N.map(H=>c(H)?H:r._availablePlugins.get(H)).reduce((H,qe)=>$.has(qe)?H:($.add(qe),qe.requires&&(y(qe.requires,qe),w(qe.requires,$).forEach(di=>H.add(di))),H.add(qe)),new Set)}function y(N,$=null){N.map(H=>c(H)?H:r._availablePlugins.get(H)||H).forEach(H=>{E(H,$),T(H,$),x(H,$)})}function E(N,$){if(!c(N))throw $?new C("plugincollection-soft-required",o,{missingPlugin:N,requiredBy:p($)}):new C("plugincollection-plugin-not-found",o,{plugin:N})}function T(N,$){if(u($)&&!u(N))throw new C("plugincollection-context-required",o,{plugin:p(N),requiredBy:p($)})}function x(N,$){if($&&h(N,t))throw new C("plugincollection-required",o,{plugin:p(N),requiredBy:p($)})}function V(N){return N.map($=>{let H=r._contextPlugins.get($);return H=H||new $(o),r._add($,H),H})}function Q(N,$){return N.reduce((H,qe)=>!qe[$]||r._contextPlugins.has(qe)?H:H.then(qe[$].bind(qe)),Promise.resolve())}function he(N,$){for(let H of $){if(typeof H!="function")throw new C("plugincollection-replace-plugin-invalid-type",null,{pluginItem:H});let qe=H.pluginName;if(!qe)throw new C("plugincollection-replace-plugin-missing-name",null,{pluginItem:H});if(H.requires&&H.requires.length)throw new C("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:qe});let di=r._availablePlugins.get(qe);if(!di)throw new C("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:qe});let im=N.indexOf(di);if(im===-1){if(r._contextPlugins.has(di))return;throw new C("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:qe})}if(di.requires&&di.requires.length)throw new C("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:qe});N.splice(im,1,H),r._availablePlugins.set(qe,H)}}}destroy(){let e=[];for(let[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);let i=e.pluginName;if(i){if(this._plugins.has(i))throw new C("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}},zU=(()=>{class n{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(t){let a=t||{},{translations:i}=a,r=Bt(a,["translations"]);this.config=new Pg(r,this.constructor.defaultConfig);let o=this.constructor.builtinPlugins;this.config.define("plugins",o),this.plugins=new l_(this,o);let s=this.config.get("language")||{};this.locale=new B1({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:i}),this.t=this.locale.t,this.editors=new ut}initPlugins(){let t=this.config.get("plugins")||[],i=this.config.get("substitutePlugins")||[];for(let r of t.concat(i)){if(typeof r!="function")throw new C("context-initplugins-constructor-only",null,{Plugin:r});if(r.isContextPlugin!==!0)throw new C("context-initplugins-invalid-plugin",null,{Plugin:r})}return this.plugins.init(t,[],i)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,i){if(this._contextOwner)throw new C("context-addeditor-private-context");this.editors.add(t),i&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){let t={};for(let i of this.config.names())["plugins","removePlugins","extraPlugins"].includes(i)||(t[i]=this.config.get(i));return t}static create(t){return new Promise(i=>{let r=new this(t);i(r.initPlugins().then(()=>r))})}}return n})(),Af=class extends $e(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}},zP=class{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){let i=this.get(e);if(!i)throw new C("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*ot(this._commands.keys())}*commands(){yield*ot(this._commands.values())}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(let e of this.commands())e.destroy()}},jP=class extends St{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){let r=t;t=(o,s)=>{this.editor.execute(r),s()}}super.set(e,t,i)}},HP="contentEditing",jU="common",$P=class{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;let t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:HP,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});let r=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&r.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:r}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:r}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:jU}),r&&r.forEach(o=>{this.addKeystrokeInfoGroup(v({categoryId:e},o))})}addKeystrokeInfoGroup({categoryId:e=HP,id:t,label:i,keystrokes:r}){let o=this.keystrokeInfos.get(e);if(!o)throw new C("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});o.groups.set(t,{id:t,label:i,keystrokes:r||[]})}addKeystrokeInfos({categoryId:e=HP,groupId:t=jU,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new C("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});let r=this.keystrokeInfos.get(e);if(!r.groups.has(t))throw new C("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});r.groups.get(t).keystrokes.push(...i)}},If=(()=>{class n extends $e(){accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(t={}){if(super(),"sanitizeHtml"in t)throw new C("editor-config-sanitizehtml-not-supported");let i=this.constructor,h=i.defaultConfig||{},{translations:r}=h,o=Bt(h,["translations"]),p=t,{translations:s=r}=p,a=Bt(p,["translations"]),l=t.language||o.language;this._context=t.context||new zU({language:l,translations:s}),this._context._addEditor(this,!t.context);let c=Array.from(i.builtinPlugins||[]);this.config=new Pg(a,o),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new l_(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new zP,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new vl,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});let u=new _f;this.data=new n_(this.model,u),this.editing=new X1(this.model,u),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new i_([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new jP(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new $P(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new C("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new C("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new C("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){let t=this.config,i=t.get("plugins"),r=t.get("removePlugins")||[],o=t.get("extraPlugins")||[],s=t.get("substitutePlugins")||[];return this.plugins.init(i.concat(o),r,s)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(i=>this.once("ready",i))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...i){try{return this.commands.execute(t,...i)}catch(r){C.rethrowUnexpectedError(r,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}static Context=zU;static EditorWatchdog=ob;static ContextWatchdog=a_}return n})();function c_(n){if(!Gi(n.updateSourceElement))throw new C("attachtoform-missing-elementapi-interface",n);let e=n.sourceElement;if(Rme(e)&&e.form){let t,i=e.form,r=()=>n.updateSourceElement();Gi(i.submit)&&(t=i.submit,i.submit=()=>{r(),t.apply(i)}),i.addEventListener("submit",r),n.on("destroy",()=>{i.removeEventListener("submit",r),t&&(i.submit=t)})}}function Rme(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function Tu(n){class e extends n{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new C("editor-missing-sourceelement",this);let r=this.config.get("updateSourceElementOnDestroy"),o=this.sourceElement instanceof HTMLTextAreaElement;if(!r&&!o){H1(this.sourceElement,"");return}let s=typeof i=="string"?i:this.data.get();H1(this.sourceElement,s)}}return e}Tu.updateSourceElement=Tu(Object).prototype.updateSourceElement;var jo=class extends Af{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new ut({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new C("pendingactions-add-invalid-message",this);let t=new($e());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}},Dme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Mme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',Ome='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',Nme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',Lme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',Fme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',Vme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',Bme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',Ume='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',Hme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',zme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',jme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',$me='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',Wme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',qme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',Gme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Kme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Yme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Qme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Zme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Jme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',Xme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',epe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',tpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',npe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',ipe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',rpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',ope='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',spe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',ape='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',lpe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',cpe='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',upe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',dpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',hpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',fpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',mpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',ppe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',gpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',bpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',wpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',vpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',ype='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',_pe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',Cpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',Epe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Spe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',Tpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',kpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ape='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',Ipe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',xpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',Ppe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',Rpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',Dpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',Mpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',Ope='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',Npe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',Lpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',Fpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',Vpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',Bpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Upe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',U={bold:wpe,cancel:Dme,caption:Mme,check:Ome,cog:Nme,colorPalette:Lme,eraser:Fme,history:Vme,image:$me,imageUpload:Wme,imageAssetManager:qme,imageUrl:Gme,lowVision:Bme,textAlternative:Ume,loupe:Hme,previousArrow:zme,nextArrow:jme,importExport:Cpe,paragraph:vpe,plus:ype,text:_pe,alignBottom:Kme,alignMiddle:Yme,alignTop:Qme,alignLeft:Zme,alignCenter:Jme,alignRight:Xme,alignJustify:epe,objectLeft:spe,objectCenter:npe,objectRight:ape,objectFullWidth:rpe,objectInline:ope,objectBlockLeft:tpe,objectBlockRight:ipe,objectSizeCustom:cpe,objectSizeFull:lpe,objectSizeLarge:upe,objectSizeSmall:dpe,objectSizeMedium:hpe,pencil:fpe,pilcrow:mpe,quote:ppe,threeVerticalDots:gpe,dragIndicator:bpe,redo:Epe,undo:Spe,bulletedList:Tpe,numberedList:kpe,todoList:Ape,codeBlock:Ipe,browseFiles:xpe,heading1:Ppe,heading2:Rpe,heading3:Dpe,heading4:Mpe,heading5:Ope,heading6:Npe,horizontalLine:Lpe,html:Fpe,indent:Vpe,outdent:Bpe,table:Upe};var WP=class extends $e(){total;_reader;_data;constructor(){super();let e=new window.FileReader;this._reader=e,this._data=void 0,this.set("loaded",0),e.onprogress=t=>{this.loaded=t.loaded}}get error(){return this._reader.error}get data(){return this._data}read(e){let t=this._reader;return this.total=e.size,new Promise((i,r)=>{t.onload=()=>{let o=t.result;this._data=o,i(o)},t.onerror=()=>{r("error")},t.onabort=()=>{r("aborted")},this._reader.readAsDataURL(e)})}abort(){this._reader.abort()}},Jr=class extends k{loaders=new ut;_loadersMap=new Map;_pendingAction=null;static get pluginName(){return"FileRepository"}static get isOfficialPlugin(){return!0}static get requires(){return[jo]}init(){this.loaders.on("change",()=>this._updatePendingAction()),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(e,t)=>t?e/t*100:0)}getLoader(e){return this._loadersMap.get(e)||null}createLoader(e){if(!this.createUploadAdapter)return ge("filerepository-no-upload-adapter"),null;let t=new u_(Promise.resolve(e),this.createUploadAdapter);return this.loaders.add(t),this._loadersMap.set(e,t),e instanceof Promise&&t.file.then(i=>{this._loadersMap.set(i,t)}).catch(()=>{}),t.on("change:uploaded",()=>{let i=0;for(let r of this.loaders)i+=r.uploaded;this.uploaded=i}),t.on("change:uploadTotal",()=>{let i=0;for(let r of this.loaders)r.uploadTotal&&(i+=r.uploadTotal);this.uploadTotal=i}),t}destroyLoader(e){let t=e instanceof u_?e:this.getLoader(e);t._destroy(),this.loaders.remove(t),this._loadersMap.forEach((i,r)=>{i===t&&this._loadersMap.delete(r)})}_updatePendingAction(){let e=this.editor.plugins.get(jo);if(this.loaders.length){if(!this._pendingAction){let t=this.editor.t,i=r=>`${t("Upload in progress")} ${parseInt(r)}%.`;this._pendingAction=e.add(i(this.uploadedPercent)),this._pendingAction.bind("message").to(this,"uploadedPercent",i)}}else e.remove(this._pendingAction),this._pendingAction=null}},u_=class extends $e(){id;_filePromiseWrapper;_adapter;_reader;constructor(e,t){super(),this.id=Xt(),this._filePromiseWrapper=this._createFilePromiseWrapper(e),this._adapter=t(this),this._reader=new WP,this.set("status","idle"),this.set("uploaded",0),this.set("uploadTotal",null),this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",(i,r)=>r?i/r*100:0),this.set("uploadResponse",null)}get file(){return this._filePromiseWrapper?this._filePromiseWrapper.promise.then(e=>this._filePromiseWrapper?e:null):Promise.resolve(null)}get data(){return this._reader.data}read(){if(this.status!="idle")throw new C("filerepository-read-wrong-status",this);return this.status="reading",this.file.then(e=>this._reader.read(e)).then(e=>{if(this.status!=="reading")throw this.status;return this.status="idle",e}).catch(e=>{throw e==="aborted"?(this.status="aborted","aborted"):(this.status="error",this._reader.error?this._reader.error:e)})}upload(){if(this.status!="idle")throw new C("filerepository-upload-wrong-status",this);return this.status="uploading",this.file.then(()=>this._adapter.upload()).then(e=>(this.uploadResponse=e,this.status="idle",e)).catch(e=>{throw this.status==="aborted"?"aborted":(this.status="error",e)})}abort(){let e=this.status;this.status="aborted",this._filePromiseWrapper.isFulfilled?e=="reading"?this._reader.abort():e=="uploading"&&this._adapter.abort&&this._adapter.abort():(this._filePromiseWrapper.promise.catch(()=>{}),this._filePromiseWrapper.rejecter("aborted")),this._destroy()}_destroy(){this._filePromiseWrapper=void 0,this._reader=void 0,this._adapter=void 0,this.uploadResponse=void 0}_createFilePromiseWrapper(e){let t={};return t.promise=new Promise((i,r)=>{t.rejecter=r,t.isFulfilled=!1,e.then(o=>{t.isFulfilled=!0,i(o)}).catch(o=>{t.isFulfilled=!0,r(o)})}),t}};var Hpe=gE(qP(),1);var yZe=gE(QU(),1);var nn=class extends ut{_parentElement;constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,r)=>{this._renderViewIntoCollectionParent(i,r)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(let t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!Jpe(e))throw new C("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(let i of this)for(let r of e)i.delegate(r).to(t);this.on("add",(i,r)=>{for(let o of e)r.delegate(o).to(t)}),this.on("remove",(i,r)=>{for(let o of e)r.stopDelegating(o,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}};function Jpe(n){return n.every(e=>typeof e=="string")}var Xpe="http://www.w3.org/1999/xhtml",Mn=class extends nt(){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(e){super(),Object.assign(this,JU(ZU(e))),this._isRendered=!1,this._revertData=null}render(){let e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=tH(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new C("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(let i of t.children)b_(i)?yield i:AR(i)&&(yield*ot(e(i)))}yield*ot(e(this))}static bind(e,t){return{to(i,r){return new eR({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:r})},if(i,r,o){return new g_({observable:e,emitter:t,attribute:i,valueIfTrue:r,callback:o})}}}static extend(e,t){if(e._isRendered)throw new C("template-extend-render",[this,e]);vH(e,JU(ZU(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new C("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Xpe,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),m_(this.text)?this._bindToObservable({schema:this.text,updater:tge(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;let t=e.node,i=e.revertData;for(let r in this.attributes){let o=t.getAttribute(r),s=this.attributes[r];i&&(i.attributes[r]=o);let a=eH(s)?s[0].ns:null;if(m_(s)){let l=eH(s)?s[0].value:s;i&&nH(r)&&l.unshift(o),this._bindToObservable({schema:l,updater:nge(t,r,a),data:e})}else if(r=="style"&&typeof s[0]!="string")this._renderStyleAttribute(s[0],e);else{i&&o&&nH(r)&&s.unshift(o);let l=s.map(c=>c&&(c.value||c)).reduce((c,u)=>c.concat(u),[]).reduce(wH,"");Mf(l)||t.setAttributeNS(a,r,l)}}}_renderStyleAttribute(e,t){let i=t.node;for(let r in e){let o=e[r];m_(o)?this._bindToObservable({schema:[o],updater:ige(i,r),data:t}):i.style[r]=o}}_renderElementChildren(e){let t=e.node,i=e.intoFragment?document.createDocumentFragment():t,r=e.isApplying,o=0;for(let s of this.children)if(IR(s)){if(!r){s.setParent(t);for(let a of s)i.appendChild(a.element)}}else if(b_(s))r||(s.isRendered||s.render(),i.appendChild(s.element));else if(Lo(s))i.appendChild(s);else if(r){let a=e.revertData,l=tH();a.children.push(l),s._renderNode({intoFragment:!1,node:i.childNodes[o++],isApplying:!0,revertData:l})}else i.appendChild(s.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(let t in this.eventListeners){let i=this.eventListeners[t].map(r=>{let[o,s]=t.split("@");return r.activateDomEventListener(o,s,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){let r=i.revertData;gH(e,t,i);let o=e.filter(s=>!Mf(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,i));r&&r.bindings.push(o)}_revertTemplateFromNode(e,t){for(let r of t.bindings)for(let o of r)o();if(t.text){e.textContent=t.text;return}let i=e;for(let r in t.attributes){let o=t.attributes[r];o===null?i.removeAttribute(r):i.setAttribute(r,o)}for(let r=0;r<t.children.length;++r)this._revertTemplateFromNode(i.childNodes[r],t.children[r])}},ku=class{attribute;observable;emitter;callback;constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){let t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){let r=()=>gH(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,r),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,r)}}},eR=class extends ku{eventNameOrFunction;constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){let r=(o,s)=>{(!t||s.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(i.node,e,r),()=>{this.emitter.stopListening(i.node,e,r)}}},g_=class extends ku{valueIfTrue;constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){let t=super.getValue(e);return Mf(t)?!1:this.valueIfTrue||!0}};function m_(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(m_):n instanceof ku):!1}function ege(n,e){return n.map(t=>t instanceof ku?t.getValue(e):t)}function gH(n,e,{node:t}){let i=ege(n,t),r;n.length==1&&n[0]instanceof g_?r=i[0]:r=i.reduce(wH,""),Mf(r)?e.remove():e.set(r)}function tge(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function nge(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function ige(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function ZU(n){return lu(n,t=>{if(t&&(t instanceof ku||AR(t)||b_(t)||IR(t)))return t})}function JU(n){if(typeof n=="string"?n=sge(n):n.text&&age(n),n.on&&(n.eventListeners=oge(n.on),delete n.on),!n.text){n.attributes&&rge(n.attributes);let e=[];if(n.children)if(IR(n.children))e.push(n.children);else for(let t of n.children)AR(t)||b_(t)||Lo(t)?e.push(t):e.push(new Mn(t));n.children=e}return n}function rge(n){for(let e in n)n[e].value&&(n[e].value=He(n[e].value)),bH(n,e)}function oge(n){for(let e in n)bH(n,e);return n}function sge(n){return{text:[n]}}function age(n){n.text=He(n.text)}function bH(n,e){n[e]=He(n[e])}function wH(n,e){return Mf(e)?n:Mf(n)?e:`${n} ${e}`}function XU(n,e){for(let t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function vH(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),XU(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),XU(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new C("ui-template-extend-children-mismatch",n);let t=0;for(let i of e.children)vH(n.children[t++],i)}}function Mf(n){return!n&&n!==0}function b_(n){return n instanceof Y}function AR(n){return n instanceof Mn}function IR(n){return n instanceof nn}function eH(n){return ke(n[0])&&n[0].ns}function tH(){return{children:[],bindings:[],attributes:{}}}function nH(n){return n=="class"||n=="style"}var Y=class extends en($e()){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new ut,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Mn.bind(this,this)}createCollection(e){let t=new nn(e);return this._viewCollections.add(t),t}registerChild(e){li(e)||(e=[e]);for(let t of e)this._unboundChildren.add(t)}deregisterChild(e){li(e)||(e=[e]);for(let t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Mn(e)}extendTemplate(e){Mn.extend(this.template,e)}render(){if(this.isRendered)throw new C("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};function Qs({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:r}){n.listenTo(document,"mousedown",(o,s)=>{if(!e())return;let a=typeof s.composedPath=="function"?s.composedPath():[],l=typeof i=="function"?i():i;for(let c of l)if(c.contains(s.target)||a.includes(c))return;t()},r)}function Al(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function Wo({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}var qo=(()=>{class n extends Y{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();let t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",i=>!i),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){let i=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=i.getAttribute("viewBox");r&&(this.viewBox=r);for(let{name:o,value:s}of Array.from(i.attributes))n.presentationalAttributeNames.includes(o)&&this.element.setAttribute(o,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;i.childNodes.length>0;)this.element.appendChild(i.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}return n})(),w_=class extends Y{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});let e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}},te=class extends Y{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(e,t=new w_){super(e);let i=this.bindTemplate,r=Xt();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${r}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new qo,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));let o={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s),i.if("isVisible","ck-hidden",s=>!s),i.to("isOn",s=>s?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",s=>s||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,s=>!s),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(s=>{this.isEnabled?this.fire("execute"):s.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!a||iH(l)?!1:String(!!s)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!a||!iH(l)?!1:String(!!s)),se.isSafari&&(this._focusDelayed||(this._focusDelayed=mf(()=>this.focus(),0)),o.on.mousedown=i.to(()=>{this._focusDelayed()}),o.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(o)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){let e=new Y;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>Og(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=Og(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}};function iH(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}var lb=class extends Y{children;iconView;constructor(e,t={}){super(e);let i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new qo,this.iconView.content=t.icon,this.children.add(this.iconView));let r=new Y(e);r.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(r)}},pn=class extends nt(){focusables;focusTracker;keystrokeHandler;actions;constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(let t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(let r of i)e.keystrokeHandler.set(r,(o,s)=>{this[t](),s()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(YP)||null}get last(){return this.focusables.filter(YP).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{let r=t.element===this.focusTracker.focusedElement;return r&&(e=i),r}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){let e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){let e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){let t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",i=>{let r=t();this.focusNext(),r!==t()&&i.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",i=>{let r=t();this.focusPrevious(),r!==t()&&i.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){let t=this.focusables.length;if(!t)return null;let i=this.current;if(i===null)return this[e===1?"first":"last"];let r=this.focusables.get(i),o=(i+t+e)%t;do{let s=this.focusables.get(o);if(YP(s)){r=s;break}o=(o+t+e)%t}while(o!==i);return r}};function YP(n){return hb(n)&&Kr(n.element)}function hb(n){return"focus"in n&&typeof n.focus=="function"}function lge(n){return hb(n)&&"focusCycler"in n&&n.focusCycler instanceof pn}function cge(n){class e extends n{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...i){super(...i),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(j.document,"mouseup",this._onDragEndBound),this.listenTo(j.document,"touchend",this._onDragEndBound),this.listenTo(j.document,"mousemove",this._onDragBound),this.listenTo(j.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(j.document,"mouseup",this._onDragEndBound),this.stopListening(j.document,"touchend",this._onDragEndBound),this.stopListening(j.document,"mousemove",this._onDragBound),this.stopListening(j.document,"touchmove",this._onDragBound)}_onDragStart(i,r){if(!this._isHandleElementPressed(r))return;this._attachDragListeners();let o=0,s=0;r instanceof MouseEvent?(o=r.clientX,s=r.clientY):(o=r.touches[0].clientX,s=r.touches[0].clientY),this._lastDraggingCoordinates={x:o,y:s},this.isDragging=!0}_onDrag(i,r){if(!this.isDragging){this._detachDragListeners();return}let o=0,s=0;r instanceof MouseEvent?(o=r.clientX,s=r.clientY):(o=r.touches[0].clientX,s=r.touches[0].clientY),r.preventDefault(),this.fire("drag",{deltaX:Math.round(o-this._lastDraggingCoordinates.x),deltaY:Math.round(s-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:o,y:s}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}var tR=class extends Y{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new St,this._focusTracker=new mt,this._focusables=new nn,this.focusCycler=new pn({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(let t of e){let i=new te(this.locale),r;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(r in t)r!="onExecute"&&r!="onCreate"&&i.set(r,t[r]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}},nR=class extends Y{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}},Xi={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},rH=$s("px"),S_=(()=>{class n extends cge(Y){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(t,{getCurrentDomRoot:i,getViewportOffset:r}){super(t);let o=this.bindTemplate,s=t.t;this.set("className",""),this.set("ariaLabel",s("Editor dialog")),this.set("isModal",!1),this.set("position",Xi.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=r,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new St,this.focusTracker=new mt,this._focusables=new nn,this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",o.if("isModal","ck-dialog-overlay__transparent",a=>!a),o.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",o.if("isModal","ck-dialog_modal"),o.to("className")],role:"dialog","aria-label":o.to("ariaLabel"),style:{top:o.to("_top",a=>rH(a)),left:o.to("_left",a=>rH(a)),visibility:o.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,i)=>{this.fire("close",{source:"escKeyPress"}),i()}),this.on("drag",(t,{deltaX:i,deltaY:r})=>{this.wasMoved=!0,this.moveBy(i,r)}),this.listenTo(j.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(j.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,i,r)=>{r&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:i,hasCloseButton:r=!0,content:o,actionButtons:s}){i&&(this.headerView=new lb(this.locale,{icon:t}),r&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),o&&(o instanceof Y&&(o=[o]),this.contentView=new nR(this.locale),this.contentView.children.addMany(o),this.parts.add(this.contentView)),s&&(this.actionsView=new tR(this.locale),this.actionsView.setButtons(s),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,i){let r=this._getViewportRect(),o=this._getDialogRect();t+o.width>r.right&&(t=r.right-o.width),t<r.left&&(t=r.left),i<r.top&&(i=r.top),this._moveTo(t,i)}_moveTo(t,i){this._left=t,this._top=i}moveBy(t,i){this.moveTo(this._left+t,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;let t=this._getViewportRect(),i=this.position,r;this._getCurrentDomRoot()?r=this._getVisibleDomRootRect(t):i=Xi.SCREEN_CENTER;let o=n.defaultOffset,s=this._getDialogRect();switch(i){case Xi.EDITOR_TOP_SIDE:{if(r){let a=this.locale.contentLanguageDirection==="ltr"?r.right-s.width-o:r.left+o;this.moveTo(a,r.top+o)}else this._moveOffScreen();break}case Xi.EDITOR_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),Math.round(r.top+r.height/2-s.height/2)):this._moveOffScreen();break}case Xi.SCREEN_CENTER:{this.moveTo(Math.round((t.width-s.width)/2),Math.round((t.height-s.height)/2));break}case Xi.EDITOR_TOP_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.top+o):this._moveOffScreen();break}case Xi.EDITOR_BOTTOM_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.bottom-s.height-o):this._moveOffScreen();break}case Xi.EDITOR_ABOVE_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.top-s.height-o):this._moveOffScreen();break}case Xi.EDITOR_BELOW_CENTER:{r?this.moveTo(Math.round(r.left+r.width/2-s.width/2),r.bottom+o):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let i=new pe(this._getCurrentDomRoot()).getVisible();if(i){if(i=t.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new pe(this.element.firstElementChild)}_getViewportRect(){let t=new pe(j.window);if(this.isModal)return t;let i=v({top:0,bottom:0,left:0,right:0},this._getViewportOffset());return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t.left+=i.left,t.right-=i.right,t.width-=i.left+i.right,t}_updateFocusCyclableItems(){let t=[];if(this.contentView)for(let i of this.contentView.children)hb(i)&&t.push(i);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),lge(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){let t=new te(this.locale),i=this.locale.t;return t.set({label:i("Close"),tooltip:!0,icon:U.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}return n})(),Ff=(()=>{class n extends k{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(t){super(t);let i=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,i)=>{this._show(i)}),this.on("show",(t,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{n._visibleDialogPlugin&&n._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){let t=this.editor;t.keystrokes.set("Ctrl+F6",(i,r)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),r())})}_initMultiRootIntegration(){let t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;let i=t.document.differ.getChangedRoots();for(let r of i)r.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:i,title:r,hasCloseButton:o=!0,content:s,actionButtons:a,className:l,isModal:c,position:u,onHide:h}){let p=this.editor;this.view=new S_(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset});let g=this.view;g.on("close",()=>{this.hide()}),p.ui.view.body.add(g),p.keystrokes.listenTo(g.element),u||(u=c?Xi.SCREEN_CENTER:Xi.EDITOR_CENTER),c&&this._lockBodyScroll(),g.set({position:u,_isVisible:!0,className:l,isModal:c}),g.setupParts({icon:i,title:r,hasCloseButton:o,content:s,actionButtons:a}),this.id=t,h&&(this._onHide=h),this.isOpen=!0,n._visibleDialogPlugin=this}hide(){n._visibleDialogPlugin&&n._visibleDialogPlugin.fire(`hide:${n._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;let t=this.editor,i=this.view;i.isModal&&this._unlockBodyScroll(),i.contentView&&i.contentView.reset(),t.ui.view.body.remove(i),t.ui.focusTracker.remove(i.element),t.keystrokes.stopListening(i.element),i.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,n._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}return n})(),_l=class extends te{_checkIconHolderView=new iR;constructor(e,t=new w_){super(e,t),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});let i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(r,o)=>r||o)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,i)=>{let{children:r,_checkIconHolderView:o}=this;i?r.add(o,0):r.remove(o)})}},iR=class extends Y{children;_checkIconView=this._createCheckIconView();constructor(){super();let e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,i)=>{let{children:r,_checkIconView:o}=this;i&&!r.has(o)?r.add(o):!i&&r.has(o)&&r.remove(o)})}_createCheckIconView(){let e=new qo;return e.content=U.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}},ye=class extends _l{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},Cl=class extends Y{id;constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${Xt()}`;let t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}},rR=class extends Y{constructor(e,t){super(e);let i=e.t,r=new Cl;r.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":r.id,role:"document",tabindex:-1},children:[Mt(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),r]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{let i=[Mt(document,"h3",{},t.label),...Array.from(t.groups.values()).map(r=>this._createGroup(r)).flat()];return t.description&&i.splice(1,0,Mt(document,"p",{},t.description)),Mt(document,"section",{},i)})}_createGroup(e){let t=e.keystrokes.sort((r,o)=>r.label.localeCompare(o.label)).map(r=>this._createGroupRow(r)).flat(),i=[Mt(document,"dl",{},t)];return e.label&&i.unshift(Mt(document,"h4",{},e.label)),i}_createGroupRow(e){let t=this.locale.t,i=Mt(document,"dt"),r=Mt(document,"dd"),o=dge(e.keystroke),s=[];for(let a of o)s.push(a.map(uge).join(""));return i.innerHTML=e.label,r.innerHTML=s.join(", ")+(e.mayRequireFn&&se.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,r]}};function uge(n){return Og(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function dge(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}var oH='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',v_=class extends k{contentView=null;static get requires(){return[Ff]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{let i=this._createButton(te);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{let i=this._createButton(ye);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,r)=>{this._toggleDialog(),r()}),this._setupRootLabels()}_createButton(e){let t=this.editor,i=t.plugins.get("Dialog"),r=t.locale,o=new e(r);return o.set({keystroke:"Alt+0",icon:oH,isToggleable:!0}),o.on("execute",()=>this._toggleDialog()),o.bind("isOn").to(i,"id",s=>s==="accessibilityHelp"),o}_setupRootLabels(){let e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(o=>{for(let s of t.document.roots)r(o,s)}),e.on("addRoot",(o,s)=>{let a=e.editing.view.document.getRoot(s.rootName);t.change(l=>r(l,a))},{priority:"low"})});function r(o,s){let l=[s.getAttribute("aria-label"),i("Press %0 for help.",[Og("Alt+0")])].filter(c=>c).join(". ");o.setAttribute("aria-label",l,s)}}_toggleDialog(){let e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new rR(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:oH,hasCloseButton:!0,content:this.contentView})}},oR=class extends nn{locale;_bodyCollectionContainer;constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Mn({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Mt(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();let e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}},Ys=class extends te{toggleSwitchView;constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){let e=new Y;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}},cb=class extends yH(te){},sR=class extends yH(_l){};function yH(n){class e extends n{buttonView;_fileInputView;constructor(...i){super(...i),this.buttonView=this,this._fileInputView=new aR(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}var aR=class extends Y{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}},T_='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>',Of=class extends Y{buttonView;children;constructor(e,t){super(e);let i=this.bindTemplate;this.set("isCollapsed",!1),this.set("label",""),this.buttonView=this._createButtonView(),this.children=this.createCollection(),this.set("_collapsibleAriaLabelUid",void 0),t&&this.children.addMany(t),this.setTemplate({tag:"div",attributes:{class:["ck","ck-collapsible",i.if("isCollapsed","ck-collapsible_collapsed")]},children:[this.buttonView,{tag:"div",attributes:{class:["ck","ck-collapsible__children"],role:"region",hidden:i.if("isCollapsed","hidden"),"aria-labelledby":i.to("_collapsibleAriaLabelUid")},children:this.children}]})}render(){super.render(),this._collapsibleAriaLabelUid=this.buttonView.labelView.element.id}focus(){this.buttonView.focus()}_createButtonView(){let e=new te(this.locale),t=e.bindTemplate;return e.set({withText:!0,icon:T_}),e.extendTemplate({attributes:{"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("label").to(this),e.bind("isOn").to(this,"isCollapsed",i=>!i),e.on("execute",()=>{this.isCollapsed=!this.isCollapsed}),e}};var er=class extends Y{fieldView;labelView;statusView;fieldWrapperChildren;constructor(e,t){super(e);let i=`ck-labeled-field-view-${Xt()}`,r=`ck-labeled-field-view-status-${Xt()}`;this.fieldView=t(this,i,r),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(r),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,a)=>s||a);let o=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s),o.if("isEmpty","ck-labeled-field-view_empty"),o.if("isFocused","ck-labeled-field-view_focused"),o.if("placeholder","ck-labeled-field-view_placeholder"),o.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){let t=new Cl(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){let t=new Y(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",r=>!r)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}},lR=class extends Y{focusTracker;constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new mt,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=hge(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}};function hge(n){return!n.value}var y_=class extends lR{constructor(e){super(e),this.set("inputMode","text");let t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}},__=class extends y_{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}},cR=class extends y_{constructor(e,{min:t,max:i,step:r}={}){super(e);let o=this.bindTemplate;this.set("min",t),this.set("max",i),this.set("step",r),this.extendTemplate({attributes:{type:"number",class:["ck-input-number"],min:o.to("min"),max:o.to("max"),step:o.to("step")}})}};var uR=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){let e=this.children.first;typeof e.focus=="function"?e.focus():ge("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){let e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}},_H=(()=>{class n extends Y{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(t,i,r){super(t);let o=this.bindTemplate;this.buttonView=i,this.panelView=r,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new St,this.focusTracker=new mt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",o.to("class"),o.if("isEnabled","ck-disabled",s=>!s)],id:o.to("id"),"aria-describedby":o.to("ariaDescribedById")},children:[i,r]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":o.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,r,o)=>{if(o)if(this.panelPosition==="auto"){let s=n._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);let t=(i,r)=>{this.isOpen&&(this.isOpen=!1,r())};this.keystrokes.set("arrowdown",(i,r)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,r())}),this.keystrokes.set("arrowright",(i,r)=>{this.isOpen&&r()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){let{south:t,north:i,southEast:r,southWest:o,northEast:s,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:u,northMiddleWest:h}=n.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[r,o,l,c,t,s,a,u,h,i]:[o,r,c,l,t,a,s,h,u,i]}static defaultPanelPositions={south:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,i)=>({top:t.bottom,left:t.left-i.width+t.width,name:"sw"}),southMiddleEast:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/4,name:"sme"}),southMiddleWest:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)*3/4,name:"smw"}),north:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/2,name:"n"}),northEast:(t,i)=>({top:t.top-i.height,left:t.left,name:"ne"}),northWest:(t,i)=>({top:t.top-i.height,left:t.left-i.width+t.width,name:"nw"}),northMiddleEast:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/4,name:"nme"}),northMiddleWest:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)*3/4,name:"nmw"})};static _getOptimalPosition=j1}return n})(),ub=class extends te{arrowView;constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new qo;return e.content=T_,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}};var Xr=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}},El=class extends Y{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}},Df=class extends Y{labelView;items;children;constructor(e,t=new Cl){super(e);let i=this.bindTemplate,r=new Nf(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,r]),r.set({role:"group",ariaLabelledBy:t.id}),r.focusTracker.destroy(),r.keystrokes.destroy(),this.items=r.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",o=>!o)]},children:this.children})}focus(){if(this.items){let e=this.items.find(t=>!(t instanceof El));e&&e.focus()}}},Nf=class extends Y{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(e){super(e);let t=this.bindTemplate;this.focusables=new nn,this.items=this.createCollection(),this.focusTracker=new mt,this.keystrokes=new St,this._focusCycler=new pn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(let e of this.items)e instanceof Df?this._registerFocusableItemsGroup(e):e instanceof Xr&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(let i of t.removed)i instanceof Df?this._deregisterFocusableItemsGroup(i):i instanceof Xr&&this._deregisterFocusableListItem(i);for(let i of Array.from(t.added).reverse())i instanceof Df?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(let r of i.removed)this._deregisterFocusableListItem(r);for(let r of Array.from(i.added).reverse())this._registerFocusableListItem(r,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((r,o)=>{let s=typeof t<"u"?t+o:void 0;this._registerFocusableListItem(r,s)});let i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(let t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}};var sH=$s("px"),fge={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},$o=(()=>{class n extends Y{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(t){super(t);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",r=>`ck-balloon-panel_${r}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",sH),left:i.to("left",sH)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){let i=p_(t.target);if(i&&!Kr(i))return!1;this.show();let r=n.defaultPositions,o=Object.assign({},{element:this.element,positions:[r.southArrowNorth,r.southArrowNorthMiddleWest,r.southArrowNorthMiddleEast,r.southArrowNorthWest,r.southArrowNorthEast,r.northArrowSouth,r.northArrowSouthMiddleWest,r.northArrowSouthMiddleEast,r.northArrowSouthWest,r.northArrowSouthEast,r.viewportStickyNorth],limiter:j.document.body,fitInViewport:!0},t),s=n._getOptimalPosition(o)||fge,a=parseInt(s.left),l=parseInt(s.top),c=s.name,u=s.config||{},{withArrow:h=!0}=u;return this.top=l,this.left=a,this.position=c,this.withArrow=h,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let i=p_(t.target),r=t.limiter?p_(t.limiter):j.document.body;if(this.listenTo(j.document,"scroll",(o,s)=>{let a=s.target,l=i&&a.contains(i),c=r&&a.contains(r);(l||c||!i||!r)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(j.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(i&&xt(i)&&(i=i.parentElement),i)){let o=()=>{Kr(i)||this.unpin()};this._resizeObserver=new df(i,o)}return!0}_stopPinning(){this.stopListening(j.document,"scroll"),this.stopListening(j.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){let{sideOffset:i=n.arrowSideOffset,heightOffset:r=n.arrowHeightOffset,stickyVerticalOffset:o=n.stickyVerticalOffset,config:s}=t;return{northWestArrowSouthWest:(c,u)=>v({top:a(c,u),left:c.left-i,name:"arrow_sw"},s&&{config:s}),northWestArrowSouthMiddleWest:(c,u)=>v({top:a(c,u),left:c.left-u.width*.25-i,name:"arrow_smw"},s&&{config:s}),northWestArrowSouth:(c,u)=>v({top:a(c,u),left:c.left-u.width/2,name:"arrow_s"},s&&{config:s}),northWestArrowSouthMiddleEast:(c,u)=>v({top:a(c,u),left:c.left-u.width*.75+i,name:"arrow_sme"},s&&{config:s}),northWestArrowSouthEast:(c,u)=>v({top:a(c,u),left:c.left-u.width+i,name:"arrow_se"},s&&{config:s}),northArrowSouthWest:(c,u)=>v({top:a(c,u),left:c.left+c.width/2-i,name:"arrow_sw"},s&&{config:s}),northArrowSouthMiddleWest:(c,u)=>v({top:a(c,u),left:c.left+c.width/2-u.width*.25-i,name:"arrow_smw"},s&&{config:s}),northArrowSouth:(c,u)=>v({top:a(c,u),left:c.left+c.width/2-u.width/2,name:"arrow_s"},s&&{config:s}),northArrowSouthMiddleEast:(c,u)=>v({top:a(c,u),left:c.left+c.width/2-u.width*.75+i,name:"arrow_sme"},s&&{config:s}),northArrowSouthEast:(c,u)=>v({top:a(c,u),left:c.left+c.width/2-u.width+i,name:"arrow_se"},s&&{config:s}),northEastArrowSouthWest:(c,u)=>v({top:a(c,u),left:c.right-i,name:"arrow_sw"},s&&{config:s}),northEastArrowSouthMiddleWest:(c,u)=>v({top:a(c,u),left:c.right-u.width*.25-i,name:"arrow_smw"},s&&{config:s}),northEastArrowSouth:(c,u)=>v({top:a(c,u),left:c.right-u.width/2,name:"arrow_s"},s&&{config:s}),northEastArrowSouthMiddleEast:(c,u)=>v({top:a(c,u),left:c.right-u.width*.75+i,name:"arrow_sme"},s&&{config:s}),northEastArrowSouthEast:(c,u)=>v({top:a(c,u),left:c.right-u.width+i,name:"arrow_se"},s&&{config:s}),southWestArrowNorthWest:c=>v({top:l(c),left:c.left-i,name:"arrow_nw"},s&&{config:s}),southWestArrowNorthMiddleWest:(c,u)=>v({top:l(c),left:c.left-u.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southWestArrowNorth:(c,u)=>v({top:l(c),left:c.left-u.width/2,name:"arrow_n"},s&&{config:s}),southWestArrowNorthMiddleEast:(c,u)=>v({top:l(c),left:c.left-u.width*.75+i,name:"arrow_nme"},s&&{config:s}),southWestArrowNorthEast:(c,u)=>v({top:l(c),left:c.left-u.width+i,name:"arrow_ne"},s&&{config:s}),southArrowNorthWest:c=>v({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw"},s&&{config:s}),southArrowNorthMiddleWest:(c,u)=>v({top:l(c),left:c.left+c.width/2-u.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southArrowNorth:(c,u)=>v({top:l(c),left:c.left+c.width/2-u.width/2,name:"arrow_n"},s&&{config:s}),southArrowNorthMiddleEast:(c,u)=>v({top:l(c),left:c.left+c.width/2-u.width*.75+i,name:"arrow_nme"},s&&{config:s}),southArrowNorthEast:(c,u)=>v({top:l(c),left:c.left+c.width/2-u.width+i,name:"arrow_ne"},s&&{config:s}),southEastArrowNorthWest:c=>v({top:l(c),left:c.right-i,name:"arrow_nw"},s&&{config:s}),southEastArrowNorthMiddleWest:(c,u)=>v({top:l(c),left:c.right-u.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southEastArrowNorth:(c,u)=>v({top:l(c),left:c.right-u.width/2,name:"arrow_n"},s&&{config:s}),southEastArrowNorthMiddleEast:(c,u)=>v({top:l(c),left:c.right-u.width*.75+i,name:"arrow_nme"},s&&{config:s}),southEastArrowNorthEast:(c,u)=>v({top:l(c),left:c.right-u.width+i,name:"arrow_ne"},s&&{config:s}),westArrowEast:(c,u)=>v({top:c.top+c.height/2-u.height/2,left:c.left-u.width-r,name:"arrow_e"},s&&{config:s}),eastArrowWest:(c,u)=>v({top:c.top+c.height/2-u.height/2,left:c.right+r,name:"arrow_w"},s&&{config:s}),viewportStickyNorth:(c,u,h,p)=>{let g=p||h;return!c.getIntersection(g)||g.height-c.height>o?null:{top:g.top+o,left:c.left+c.width/2-u.width/2,name:"arrowless",config:v({withArrow:!1},s)}}};function a(c,u){return c.top-u.height-r}function l(c){return c.bottom+r}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=j1;static defaultPositions=n.generatePositions()}return n})();function p_(n){return Ki(n)?n:Dg(n)?n.commonAncestorContainer:typeof n=="function"?p_(n()):null}var Lf=class extends Y{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}},dR=class extends Y{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}};function mge(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}function k_(n){if(Array.isArray(n))return{items:n,removeItems:[]};let e={items:[],removeItems:[]};return n?v(v({},e),n):e}var pge={alignLeft:U.alignLeft,bold:U.bold,importExport:U.importExport,paragraph:U.paragraph,plus:U.plus,text:U.text,threeVerticalDots:U.threeVerticalDots,pilcrow:U.pilcrow,dragIndicator:U.dragIndicator},eo=class extends Y{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(e,t){super(e);let i=this.bindTemplate,r=this.t;this.options=t||{},this.set("ariaLabel",r("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new mt,this.keystrokes=new St,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new hR(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();let o=e.uiLanguageDirection==="rtl";this._focusCycler=new pn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[o?"arrowright":"arrowleft","arrowup"],focusNext:[o?"arrowleft":"arrowright","arrowdown"]}});let s=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:mge(this)}}),this._behavior=this.options.shouldGroupWhenFull?new mR(this):new fR(this)}render(){super.render(),this.focusTracker.add(this.element);for(let e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){let r=k_(e),o=i||r.removeItems;return this._cleanItemsConfiguration(r.items,t,o).map(a=>ke(a)?this._createNestedToolbarDropdown(a,t,o):a==="|"?new Lf:a==="-"?new dR:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){let r=e.filter((o,s,a)=>o==="|"?!0:i.indexOf(o)!==-1?!1:o==="-"?this.options.shouldGroupWhenFull?(ge("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!ke(o)&&!t.has(o)?(ge("toolbarview-item-unavailable",{item:o}),!1):!0);return this._cleanSeparatorsAndLineBreaks(r)}_cleanSeparatorsAndLineBreaks(e){let t=s=>s!=="-"&&s!=="|",i=e.length,r=e.findIndex(t);if(r===-1)return[];let o=i-e.slice().reverse().findIndex(t);return e.slice(r,o).filter((s,a,l)=>t(s)?!0:!(a>0&&l[a-1]===s))}_createNestedToolbarDropdown(e,t,i){let{label:r,icon:o,items:s,tooltip:a=!0,withText:l=!1}=e;if(s=this._cleanItemsConfiguration(s,t,i),!s.length)return null;let c=this.locale,u=rn(c);return r||ge("toolbarview-nested-toolbar-dropdown-missing-label",e),u.class="ck-toolbar__nested-toolbar-dropdown",u.buttonView.set({label:r,tooltip:a,withText:!!l}),o!==!1?u.buttonView.icon=pge[o]||o||U.threeVerticalDots:u.buttonView.withText=!0,xu(u,()=>u.toolbarView._buildItemsFromConfig(s,t,i)),u}},hR=class extends Y{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}},fR=class{constructor(e){let t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>hb(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}},mR=class{view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{let r=i.index,o=Array.from(i.added);for(let s of i.removed)r>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=r;s<r+o.length;s++){let a=o[s-r];s>this.ungroupedItems.length?this.groupedItems.add(a,s-this.ungroupedItems.length):this.ungroupedItems.add(a,s)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Kr(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}let e=this.groupedItems.length,t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;let e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new pe(e.lastChild),r=new pe(e);if(!this.cachedPadding){let o=j.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[s])}return t==="ltr"?i.right>r.right-this.cachedPadding:i.left<r.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new df(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new Lf),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){let e=this.viewLocale,t=e.t,i=rn(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",xu(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:U.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{hb(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}},Sr=class extends Y{children;actionView;arrowView;keystrokes;focusTracker;constructor(e,t){super(e);let i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new St,this.focusTracker=new mt,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",r=>!r),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){let t=e||new te;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){let e=new te,t=e.bindTemplate;return e.icon=T_,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}};function rn(n,e=ub){let t=typeof e=="function"?new e(n):e,i=new uR(n),r=new _H(n,t,i);return t.bind("isEnabled").to(r),t instanceof Sr?t.arrowView.bind("isOn").to(r,"isOpen"):t.bind("isOn").to(r,"isOpen"),gge(r),r}function xu(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?aH(n,e,t):n.once("change:isOpen",()=>aH(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&A_(n,()=>n.toolbarView.items.find(i=>i.isOn))}function aH(n,e,t){let i=n.locale,r=i.t,o=n.toolbarView=new eo(i),s=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel||r("Dropdown toolbar"),t.maxWidth&&(o.maxWidth=t.maxWidth),t.class&&(o.class=t.class),t.isCompact&&(o.isCompact=t.isCompact),t.isVertical&&(o.isVertical=!0),s instanceof nn?o.items.bindTo(s).using(a=>a):o.items.addMany(s),n.panelView.children.add(o),n.focusTracker.add(o),o.items.delegate("execute").to(n)}function to(n,e,t={}){n.isOpen?lH(n,e,t):n.once("change:isOpen",()=>lH(n,e,t),{priority:"highest"}),A_(n,()=>n.listView.items.find(i=>i instanceof Xr?i.children.first.isOn:!1))}function lH(n,e,t){let i=n.locale,r=n.listView=new Nf(i),o=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel,r.role=t.role,EH(n,r.items,o,i),n.panelView.children.add(r),r.items.delegate("execute").to(n)}function A_(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;let t=e();t&&(typeof t.focus=="function"?t.focus():ge("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:Rn.low-10})}function gge(n){bge(n),wge(n),vge(n),yge(n),_ge(n),Cge(n)}function bge(n){Qs({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...CH(n.focusTracker).filter(e=>!n.element.contains(e))]})}function CH(n){return[...n.elements,...n.externalViews.flatMap(e=>CH(e.focusTracker))]}function wge(n){n.on("execute",e=>{e.source instanceof Ys||(n.isOpen=!1)})}function vge(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function yge(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function _ge(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;n.focusTracker.elements.some(o=>o.contains(j.document.activeElement))&&n.buttonView.focus()})}function Cge(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function EH(n,e,t,i){e.on("change",()=>{let r=[...e].reduce((s,a)=>(a instanceof Xr&&a.children.first instanceof _l&&s.push(a.children.first),s),[]),o=r.some(s=>s.isToggleable);r.forEach(s=>{s.hasCheckSpace=o})}),e.bindTo(t).using(r=>{if(r.type==="separator")return new El(i);if(r.type==="group"){let o=new Df(i);return o.set({label:r.label}),EH(n,o.items,r.items,i),o.items.delegate("execute").to(n),o}else if(r.type==="button"||r.type==="switchbutton"){let o=r.model.role==="menuitemcheckbox"||r.model.role==="menuitemradio",s=new Xr(i),a;return r.type==="button"?(a=new _l(i),a.set({isToggleable:o})):a=new Ys(i),a.bind(...Object.keys(r.model)).to(r.model),a.delegate("execute").to(s),s.children.add(a),s}return null})}var Il=(n,e,t)=>{let i=new __(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i},xR=(n,e,t)=>{let i=new cR(n.locale);return i.set({id:e,ariaDescribedById:t,inputMode:"numeric"}),i.bind("isReadOnly").to(n,"isEnabled",r=>!r),i.bind("hasError").to(n,"errorText",r=>!!r),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i};var pR=class{editor;_components=new Map;constructor(e){this.editor=e}*names(){for(let e of this._components.values())yield e.originalName}add(e,t){this._components.set(QP(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new C("componentfactory-item-missing",this,{name:e});return this._components.get(QP(e)).callback(this.editor.locale)}has(e){return this._components.has(QP(e))}};function QP(n){return String(n).toLowerCase()}var cH="ck-tooltip",gR=class n extends en(){tooltipTextView;balloonPanelView;static defaultBalloonPositions=$o.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(e){if(super(),n._editors.add(e),n._instance)return n._instance;n._instance=this,this.tooltipTextView=new Y(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new $o(e.locale),this.balloonPanelView.class=cH,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=Ege(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=vr(this._pinTooltip,600),this._unpinTooltipDebounced=vr(this._unpinTooltip,400),this.listenTo(j.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(j.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(j.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(j.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(j.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(j.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){let t=e.ui.view&&e.ui.view.body;n._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),n._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),n._instance=null)}static getPositioningFunctions(e){let t=n.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){let i=ZP(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}i!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")?this._pinTooltip(i,JP(i)):this._pinTooltipDebounced(i,JP(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!Ki(t))return;let r=this.balloonPanelView.element,o=r&&(r===i||r.contains(i)),s=!o&&t===r;if(o){this._unpinTooltipDebounced.cancel();return}if(!s&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;let a=ZP(t),l=ZP(i);(s||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:r}){this._unpinTooltip();let o=it(n._editors.values()).ui.view.body;o.has(this.balloonPanelView)||o.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[cH,r].filter(s=>s).join(" "),this.balloonPanelView.pin({target:e,positions:n.getPositioningFunctions(i)}),this._mutationObserver.attach(e);for(let s of n._editors)this.listenTo(s.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(let e of n._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;let e=JP(this._currentElementWithTooltip);if(!Kr(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:n.getPositioningFunctions(e.position)})}};function ZP(n){return Ki(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function JP(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function Ege(n){let e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var Sge=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,Tge=53,kge=10,Age=50,Ige=350,xge="Powered by",bR=class extends en(){editor;_balloonView;_showBalloonThrottled;_lastFocusedEditableElement;constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=No(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){let e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){let e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");!t&&e9(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,r,o)=>{this._updateLastFocusedEditableElement(),o?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,r,o)=>{this._updateLastFocusedEditableElement(),o&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){let e=this.editor,t=this._balloonView=new $o,i=TH(e),r=new wR(e.locale,i.label);t.content.add(r),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;let e=Pge(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){let e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}let r=Array.from(e.ui.getEditableElementsNames()).map(o=>e.ui.getEditableElement(o));r.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=r[0]}},wR=class extends Y{constructor(e,t){super(e);let i=new qo,r=this.bindTemplate;i.set({content:Sge,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:Tge+"px",height:kge+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:r.to(o=>o.preventDefault())}}]})}};function Pge(n,e){let t=TH(n),i=t.side==="right"?Rge(e,t):Dge(e,t);return{target:e,positions:[i]}}function Rge(n,e){return SH(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function Dge(n,e){return SH(n,e,t=>t.left+e.horizontalOffset)}function SH(n,e,t){return(i,r)=>{let o=new pe(n);if(o.width<Ige||o.height<Age)return null;let s;e.position==="inside"?s=o.bottom-r.height:s=o.bottom-r.height/2,s-=e.verticalOffset;let a=t(o,r),c=i.clone().moveTo(a,s).getIntersection(r.clone().moveTo(a,s)).getVisible();return!c||c.getArea()<r.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function TH(n){let e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return v({position:t,label:xge,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left"},e)}var uH={POLITE:"polite",ASSERTIVE:"assertive"},vR=class{editor;view;constructor(e){this.editor=e,e.once("ready",()=>{for(let t of Object.values(uH))this.announce("",t)})}announce(e,t=uH.POLITE){let i=this.editor;if(!i.ui.view)return;this.view||(this.view=new yR(i.locale),i.ui.view.body.add(this.view));let{politeness:r,isUnsafeHTML:o}=typeof t=="string"?{politeness:t}:t,s=this.view.regionViews.find(a=>a.politeness===r);s||(s=new _R(i,r),this.view.regionViews.add(s)),s.announce({announcement:e,isUnsafeHTML:o})}},yR=class extends Y{regionViews;constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}},_R=class extends Y{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;let i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}},Nn=class extends Xr{constructor(e,t){super(e);let i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}},h_=5,Pf={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(let t of n.menus){let i=e.path[0],r=i instanceof Nn&&i.children.first===t;t.isOpen=(e.path.includes(t)||r)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){let e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,r){let o=n.children.getIndex(i),s=i.isOpen,a=n.children.length,l=n.children.get((o+a+r)%a);i.isOpen=!1,s&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(r=>e.source.parentMenuView===r.parentMenuView&&e.source!==r&&r.isOpen).forEach(r=>{r.isOpen=!1})})},closeOnClickOutside(n){Qs({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,r)=>{r||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},yl={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){let e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){let e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},Mge={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-h_,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-h_,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+h_,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+h_,name:"wn"})},Oge=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function Nge(n){let e;return!("items"in n)||!n.items?e=v({items:$n(Oge),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0},n):e=v({items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1},n),e}function Lge({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){let r=$n(n);return dH(n,r,i),Fge(n,r),dH(n,r,r.addItems),Vge(n,r,t),kH(n,r),Bge(r,e),r}function Fge(n,e){let t=e.removeItems,i=[];e.items=e.items.filter(({menuId:r})=>t.includes(r)?(i.push(r),!1):!0),Vf(e.items,r=>{r.groups=r.groups.filter(({groupId:o})=>t.includes(o)?(i.push(o),!1):!0);for(let o of r.groups)o.items=o.items.filter(s=>{let a=AH(s);return t.includes(a)?(i.push(a),!1):!0})});for(let r of t)i.includes(r)||ge("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:r})}function dH(n,e,t){let i=[];if(t.length!=0){for(let r of t){let o=zge(r.position),s=jge(r.position);if(Uge(r))if(!s)o==="start"?(e.items.unshift(r.menu),i.push(r)):o==="end"&&(e.items.push(r.menu),i.push(r));else{let a=e.items.findIndex(l=>l.menuId===s);a!=-1?o==="before"?(e.items.splice(a,0,r.menu),i.push(r)):o==="after"&&(e.items.splice(a+1,0,r.menu),i.push(r)):hH(e,r.menu,s,o)&&i.push(r)}else Hge(r)?Vf(e.items,a=>{if(a.menuId===s)o==="start"?(a.groups.unshift(r.group),i.push(r)):o==="end"&&(a.groups.push(r.group),i.push(r));else{let l=a.groups.findIndex(c=>c.groupId===s);l!==-1&&(o==="before"?(a.groups.splice(l,0,r.group),i.push(r)):o==="after"&&(a.groups.splice(l+1,0,r.group),i.push(r)))}}):hH(e,r.item,s,o)&&i.push(r)}for(let r of t)i.includes(r)||ge("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:r})}}function hH(n,e,t,i){let r=!1;return Vf(n.items,o=>{for(let{groupId:s,items:a}of o.groups){if(r)return;if(s===t)i==="start"?(a.unshift(e),r=!0):i==="end"&&(a.push(e),r=!0);else{let l=a.findIndex(c=>AH(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),r=!0):i==="after"&&(a.splice(l+1,0,e),r=!0))}}}),r}function Vge(n,e,t){Vf(e.items,i=>{for(let r of i.groups)r.items=r.items.filter(o=>{let s=typeof o=="string"&&!t.has(o);return s&&!e.isUsingDefaultConfig&&ge("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:$n(i),componentName:o}),!s})})}function kH(n,e){let t=e.isUsingDefaultConfig,i=!1;if(e.items=e.items.filter(r=>r.groups.length?!0:(XP(n,r,t),!1)),!e.items.length){XP(n,n,t);return}Vf(e.items,r=>{r.groups=r.groups.filter(o=>o.items.length?!0:(i=!0,!1));for(let o of r.groups)o.items=o.items.filter(s=>IH(s)&&!s.groups.length?(XP(n,s,t),i=!0,!1):!0)}),i&&kH(n,e)}function XP(n,e,t){t||ge("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function Bge(n,e){let t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};Vf(n.items,r=>{r.label in i&&(r.label=i[r.label])})}function Vf(n,e){if(Array.isArray(n))for(let i of n)t(i);function t(i){e(i);for(let r of i.groups)for(let o of r.items)IH(o)&&t(o)}}function Uge(n){return typeof n=="object"&&"menu"in n}function Hge(n){return typeof n=="object"&&"group"in n}function zge(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function jge(n){let e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function AH(n){return typeof n=="string"?n:n.menuId}function IH(n){return typeof n=="object"&&"menuId"in n}var Sl=class extends $e(){editor;componentFactory;focusTracker;tooltipManager;poweredBy;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;constructor(e){super();let t=e.editing.view;this.editor=e,this.componentFactory=new pR(e),this.focusTracker=new mt,this.tooltipManager=new gR(e),this.poweredBy=new bR(e),this.ariaLiveAnnouncer=new vR(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(let e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);let i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){let t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){let t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);let i=Nge(this.editor.config.get("menuBar")||{});e.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),o())}),this.editor.keystrokes.set("Alt+F9",(r,o)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),o())})}_readViewportOffsetFromConfig(){let e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;let i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){let e=this.editor,t;e.keystrokes.set("Alt+F10",(i,r)=>{this._saveLastFocusedForeignElement();let o=this._getCurrentFocusedToolbarDefinition();(!o||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let s=0;s<t.length;s++){let a=t.shift();if(t.push(a),a!==o&&this._focusFocusableCandidateToolbar(a)){o&&o.options.afterBlur&&o.options.afterBlur();break}}r()}),e.keystrokes.set("Esc",(i,r)=>{let o=this._getCurrentFocusedToolbarDefinition();o&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),o.options.afterBlur&&o.options.afterBlur(),r())})}_saveLastFocusedForeignElement(){let e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){let e=[];for(let t of this._focusableToolbarDefinitions){let{toolbarView:i,options:r}=t;(Kr(i.element)||r.beforeFocus)&&e.push(t)}return e.sort((t,i)=>fH(t)-fH(i)),e}_getCurrentFocusedToolbarDefinition(){for(let e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){let{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),Kr(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){let i=v({top:0,bottom:0,left:0,right:0},this.viewportOffset);t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){let e=this.view.body;for(let t of e)this.focusTracker.add(t.element);e.on("add",(t,i)=>{this.focusTracker.add(i.element)}),e.on("remove",(t,i)=>{this.focusTracker.remove(i.element)})}};function fH(n){let{toolbarView:e,options:t}=n,i=10;return Kr(e.element)&&i--,t.isContextual&&i--,i}var Au=class extends Y{body;menuBarView;constructor(e){super(e),this.body=new oR(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}},C_=class extends Au{top;main;_voiceLabelView;constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){let e=this.t,t=new Cl;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}},CR=class extends Y{name=null;_editingView;_editableElement;_hasExternalElement;constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){let e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(r){e.change(o=>{let s=e.document.getRoot(r.name);o.addClass(r.isFocused?"ck-focused":"ck-blurred",s),o.removeClass(r.isFocused?"ck-blurred":"ck-focused",s)})}function i(r){e.once("change:isRenderingInProgress",(o,s,a)=>{a?i(r):t(r)})}}},Tl=class extends CR{_options;constructor(e,t,i,r={}){super(e,t,i),this._options=r,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();let e=this._editingView;e.change(t=>{let i=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){let e=this.locale.t,t=this._options.label,i=this._editableElement,r=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[r];if(typeof t=="function")return t(this);if(i){let o=i.getAttribute("aria-label");if(o)return o}return e("Rich Text Editor. Editing area: %0",r)}};var Iu=class extends Af{static get pluginName(){return"Notification"}static get isOfficialPlugin(){return!0}init(){this.on("show:warning",(e,t)=>{window.alert(t.message)},{priority:"lowest"})}showSuccess(e,t={}){this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title})}showInfo(e,t={}){this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title})}showWarning(e,t={}){this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title})}_showNotification(e){let t=e.namespace?`show:${e.type}:${e.namespace}`:`show:${e.type}`;this.fire(t,{message:e.message,type:e.type,title:e.title||""})}},Oi=class extends $e(){constructor(e,t){super(),t&&qh(this,t),e&&this.set(e)}},f_=$s("px"),Tr=class extends k{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.positionLimiter=()=>{let t=this.editor.editing.view,r=t.document.selection.editableElement;return r?t.domConverter.mapViewToDom(r.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new C("contextualballoon-add-view-exist",[this,e]);let t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}let i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new C("contextualballoon-remove-view-not-exist",[this,e]);let t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;let t=this._idToStack.get(e);if(!t)throw new C("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new $o(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){let e=new ER(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,r)=>!r&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,r)=>{if(r<2)return"";let o=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[o,r])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){let e=new SR(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:r=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),r&&(this._singleViewMode=!0)}},ER=class extends Y{focusTracker;buttonPrevView;buttonNextView;content;constructor(e){super(e);let t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new mt,this.buttonPrevView=this._createButtonView(t("Previous"),U.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),U.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",r=>r?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){let i=new te(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}},SR=class extends Y{content;_balloonPanelView;constructor(e,t){super(e);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",r=>r?"":"ck-hidden")],style:{top:i.to("top",f_),left:i.to("left",f_),width:i.to("width",f_),height:i.to("height",f_)}},children:this.content}),this.on("change:numberOfPanels",(r,o,s,a)=>{s>a?this._addPanels(s-a):this._removePanels(a-s),this.updatePosition()})}_addPanels(e){for(;e--;){let t=new Y;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){let t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){let{top:e,left:t}=this._balloonPanelView,{width:i,height:r}=new pe(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:r})}}},Rf=$s("px"),E_=class extends Y{content;contentPanelElement;_contentPanelPlaceholder;constructor(e){super(e);let t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Mn({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?Rf(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Mn({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?Rf(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&Rf(i)),bottom:t.to("_stickyBottomOffset",i=>i&&Rf(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(j.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}let e=new pe(this.limiterElement),t=e.getVisible();if(t){let i=new pe(j.window);i.top+=this.viewportTopOffset,i.height-=this.viewportTopOffset,t=t.getIntersection(i)}if(t&&e.top<t.top){let i=t.top;if(i+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){let r=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-r>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(r):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=Rf(-j.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=Rf(-j.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new pe(this.contentPanelElement)}};var TR=class extends _l{arrowView;constructor(e){super(e);let t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new qo;return e.content=T_,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}},kR=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}},On=(()=>{class n extends Y{buttonView;panelView;focusTracker;keystrokes;constructor(t){super(t);let i=this.bindTemplate;this.buttonView=new TR(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new kR(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new St,this.focusTracker=new mt,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",r=>!r),i.if("parentMenuView","ck-menu-bar__menu_top-level",r=>!r)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),yl.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(yl.openOnButtonClick(this),yl.openOnArrowRightKey(this),yl.closeOnArrowLeftKey(this),yl.openAndFocusOnEnterKeyPress(this),yl.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),yl.openAndFocusPanelOnArrowDownKey(this),yl.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(t,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,i,r)=>{if(!r)return;let o=n._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=o?o.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){let{southEast:t,southWest:i,northEast:r,northWest:o,westSouth:s,eastSouth:a,westNorth:l,eastNorth:c}=Mge;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,s,l]:[t,i,r,o]:this.parentMenuView?[s,l,a,c]:[i,t,o,r]}static _getOptimalPosition=j1}return n})(),Gn=class extends Nf{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){let e=Array.from(this.items).some(t=>{let i=mH(t);return i&&i.isToggleable});this.items.forEach(t=>{let i=mH(t);i&&(i.hasCheckSpace=e)})}};function mH(n){return n instanceof Xr?n.children.map(e=>$ge(e)?e.buttonView:e).find(e=>e instanceof _l):null}function $ge(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof te}var db=class extends sR{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},pH=["mouseenter","arrowleft","arrowright","change:isOpen"],kl=class extends Y{children;menus=[];constructor(e){super(e);let t=e.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,i=[]){let r=this.locale,s=Lge({normalizedConfig:e,locale:r,componentFactory:t,extraItems:i}).items.map(a=>this._createMenu({componentFactory:t,menuDefinition:a}));this.children.addMany(s)}render(){super.render(),Pf.toggleMenusAndFocusItemsOnHover(this),Pf.closeMenusWhenTheBarCloses(this),Pf.closeMenuWhenAnotherOnTheSameLevelOpens(this),Pf.focusCycleMenusOnArrows(this),Pf.closeOnClickOutside(this),Pf.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(let e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...pH).to(t),e.parentMenuView=t):e.delegate(...pH).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){let r=this.locale,o=new On(r);return this.registerMenu(o,i),o.buttonView.set({label:t.label}),o.once("change:isOpen",()=>{let s=new Gn(r);s.ariaLabel=t.label,o.panelView.children.add(s),s.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:o,componentFactory:e}))}),o}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){let r=this.locale,o=[];for(let s of e.groups){for(let a of s.items){let l=new Nn(r,t);if(ke(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{let c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}o.push(l)}s!==e.groups[e.groups.length-1]&&o.push(new El(r))}return o}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){let r=i.create(e);return r instanceof On||r instanceof ye||r instanceof db?(this._registerMenuTree(r,t),r.on("execute",()=>{this.close()}),r):(ge("menu-bar-component-unsupported",{componentName:e,componentView:r}),null)}_registerMenuTree(e,t){if(!(e instanceof On)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);let i=e.panelView.children.filter(o=>o instanceof Gn)[0];if(!i){e.delegate("mouseenter").to(t);return}let r=i.items.filter(o=>o instanceof Xr);for(let o of r)this._registerMenuTree(o.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,r)=>{clearTimeout(e),r?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(o=>o.isOpen)},0)})}};var x_=class{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(e,t=20){this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,r)=>{r.isLocal&&r.isUndoable&&r!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}},PR=class extends J{_buffer;constructor(e,t){super(e),this._buffer=new x_(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){let t=this.editor.model,i=t.document,r=e.text||"",o=r.length,s=i.selection;if(e.selection?s=e.selection:e.range&&(s=t.createSelection(e.range)),!t.canEditAt(s))return;let a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();let c=Array.from(i.selection.getAttributes());t.deleteContent(s),r&&t.insertContent(l.createText(r,c),s),a?l.setSelection(a):s.is("documentSelection")||l.setSelection(s),this._buffer.unlock(),this._buffer.input(o)})}},DH=["insertText","insertReplacementText"],Wge=[...DH,"insertCompositionText"],RR=class extends qn{focusObserver;constructor(e){super(e),this.focusObserver=e.getObserver(vu);let t=se.isAndroid?Wge:DH,i=e.document;i.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;let{data:s,targetRanges:a,inputType:l,domEvent:c}=o;if(!t.includes(l))return;this.focusObserver.flush();let u=new Ri(i,"insertText");i.fire(u,new Uo(e,c,{text:s,selection:e.createSelection(a)})),u.stop.called&&r.stop()}),se.isAndroid||i.on("compositionend",(r,{data:o,domEvent:s})=>{this.isEnabled&&o&&i.fire("insertText",new Uo(e,s,{text:o}))},{priority:"lowest"})}observe(){}stopObserving(){}},gb=class extends k{_compositionQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model,i=e.editing.view,r=e.editing.mapper,o=t.document.selection;this._compositionQueue=new DR(e),i.addObserver(RR);let s=new PR(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",s),e.commands.add("input",s),this.listenTo(i.document,"insertText",(a,l)=>{i.document.isComposing||l.preventDefault(),se.isAndroid&&i.document.isComposing&&this._compositionQueue.flush("next beforeinput");let{text:c,selection:u}=l,h;u?h=Array.from(u.getRanges()).map(w=>r.toModelRange(w)):h=Array.from(o.getRanges());let p=c;if(se.isAndroid){let w=Array.from(h[0].getItems()).reduce((y,E)=>y+(E.is("$textProxy")?E.data:""),"");if(w&&(w.length<=p.length?p.startsWith(w)&&(p=p.substring(w.length),h[0].start=h[0].start.getShiftedBy(w.length)):w.startsWith(p)&&(h[0].start=h[0].start.getShiftedBy(p.length),p="")),p.length==0&&h[0].isCollapsed)return}let g={text:p,selection:t.createSelection(h)};se.isAndroid&&i.document.isComposing?this._compositionQueue.push(g):(e.execute("insertText",g),i.scrollToTheSelection())}),se.isAndroid?this.listenTo(i.document,"keydown",(a,l)=>{o.isCollapsed||l.keyCode!=229||!i.document.isComposing||xH(t,s)}):this.listenTo(i.document,"compositionstart",()=>{o.isCollapsed||xH(t,s)}),se.isAndroid?(this.listenTo(i.document,"mutations",(a,{mutations:l})=>{if(i.document.isComposing)for(let{node:c}of l){let u=Gge(c,r),h=r.toModelElement(u);if(this._compositionQueue.isComposedElement(h)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(i.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(i.document,"compositionend",()=>{let a=[];for(let l of this._compositionQueue.flushComposedElements()){let c=r.toViewElement(l);c&&a.push({type:"children",node:c})}a.length&&i.document.fire("mutations",{mutations:a})},{priority:"lowest"})):this.listenTo(i.document,"compositionend",()=>{i.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}},DR=class{editor;flushDebounced=vr(()=>this.flush("timeout"),50);_queue=[];_compositionElements=new Set;constructor(e){this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){let t={text:e.text};if(e.selection){t.selectionRanges=[];for(let i of e.selection.getRanges())t.selectionRanges.push(En.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){let e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){let i=e.selectionRanges.map(r=>qge(r)).filter(r=>!!r);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){let t=this.editor,i=t.model,r=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;let s=t.commands.get("insertText").buffer;i.enqueueChange(s.batch,()=>{for(s.lock();this._queue.length;){let a=this.shift();t.execute("insertText",a)}s.unlock()}),r.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){let e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}};function xH(n,e){if(!e.isEnabled)return;let t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function qge(n){let e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function Gge(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}var P_=class extends J{direction;_buffer;constructor(e,t){super(e),this.direction=t,this._buffer=new x_(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){let t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,r=>{this._buffer.lock();let o=r.createSelection(e.selection||i.selection);if(!t.canEditAt(o))return;let s=e.sequence||1,a=o.isCollapsed;if(o.isCollapsed&&t.modifySelection(o,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(s)){this._replaceEntireContentWithParagraph(r);return}if(this._shouldReplaceFirstBlockWithParagraph(o,s)){this.editor.execute("paragraph",{selection:o});return}if(o.isCollapsed)return;let l=0;o.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=Rg(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(o,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),r.setSelection(o),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;let t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r);if(!(r.isCollapsed&&r.containsEntireContent(o))||!t.schema.checkChild(o,"paragraph"))return!1;let a=o.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){let t=this.editor.model,r=t.document.selection,o=t.schema.getLimitElement(r),s=e.createElement("paragraph");e.remove(e.createRangeIn(o)),e.insert(s,o),e.setSelection(s,0)}_shouldReplaceFirstBlockWithParagraph(e,t){let i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;let r=e.getFirstPosition(),o=i.schema.getLimitElement(r),s=o.getChild(0);return!(r.parent!=s||!e.containsEntireContent(s)||!i.schema.checkChild(o,"paragraph")||s.name=="paragraph")}},Kge="character",PH="word",Yge="codePoint",xl="selection",Uf="backward",pb="forward",MH={deleteContent:{unit:xl,direction:Uf},deleteContentBackward:{unit:Yge,direction:Uf},deleteWordBackward:{unit:PH,direction:Uf},deleteHardLineBackward:{unit:xl,direction:Uf},deleteSoftLineBackward:{unit:xl,direction:Uf},deleteContentForward:{unit:Kge,direction:pb},deleteWordForward:{unit:PH,direction:pb},deleteHardLineForward:{unit:xl,direction:pb},deleteSoftLineForward:{unit:xl,direction:pb}},MR=class extends qn{constructor(e){super(e);let t=e.document,i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;let{targetRanges:s,domEvent:a,inputType:l}=o,c=MH[l];if(!c)return;let u={direction:c.direction,unit:c.unit,sequence:i};u.unit==xl&&(u.selectionToRemove=e.createSelection(s[0])),l==="deleteContentBackward"&&(se.isAndroid&&(u.sequence=1),Zge(s)&&(u.unit=xl,u.selectionToRemove=e.createSelection(s)));let h=new Bo(t,"delete",s[0]);t.fire(h,new Uo(e,a,u)),h.stop.called&&r.stop()}),se.isBlink&&Qge(this)}observe(){}stopObserving(){}};function Qge(n){let e=n.view,t=e.document,i=null,r=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,r=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{let u=t.selection,h=n.isEnabled&&l==i&&o(l)&&!u.isCollapsed&&!r;if(i=null,h){let p=u.getFirstRange(),g=new Bo(t,"delete",p),w={unit:xl,direction:s(l),selectionToRemove:u};t.fire(g,new Uo(e,c,w))}}),t.on("beforeinput",(a,{inputType:l})=>{let c=MH[l];o(i)&&c&&c.direction==s(i)&&(r=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==Te.delete&&l=="insertText"&&c=="\x7F"&&a.stop()},{priority:"high"});function o(a){return a==Te.backspace||a==Te.delete}function s(a){return a==Te.backspace?Uf:pb}}function Zge(n){if(n.length!=1||n[0].isCollapsed)return!1;let e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0}),t=0;for(let{nextPosition:i,item:r}of e){if(i.parent.is("$text")){let o=i.parent.data,s=i.offset;if(Lg(o,s)||Fg(o,s)||$1(o,s))continue;t++}else(r.is("containerElement")||r.is("emptyElement"))&&t++;if(t>1)return!0}return!1}var Kn=class extends k{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,i=t.document,r=e.model.document;t.addObserver(MR),this._undoOnBackspace=!1;let o=new P_(e,"forward");e.commands.add("deleteForward",o),e.commands.add("forwardDelete",o),e.commands.add("delete",new P_(e,"backward")),this.listenTo(i,"delete",(s,a)=>{i.isComposing||a.preventDefault();let{direction:l,sequence:c,selectionToRemove:u,unit:h}=a,p=l==="forward"?"deleteForward":"delete",g={sequence:c};if(h=="selection"){let w=Array.from(u.getRanges()).map(y=>e.editing.mapper.toModelRange(y));g.selection=e.model.createSelection(w)}else g.unit=h;e.execute(p,g),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(s,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(r,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}},bb=class extends k{static get requires(){return[gb,Kn]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}};function NR(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((r,{item:o})=>o.is("$text")||o.is("$textProxy")?r+o.data:(t=e.createPositionAfter(o),""),""),range:e.createRange(t,n.end)}}var wb=class extends $e(){model;testCallback;_hasMatch;constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){let t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:r})=>{if(r){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,r)=>{r.isUndo||!r.isLocal||this._evaluateTextBeforeSelection("data",{batch:r})})}_evaluateTextBeforeSelection(e,t={}){let i=this.model,o=i.document.selection,s=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus),{text:a,range:l}=NR(s,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){let u=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(u,c),this.fire(`matched:${e}`,u)}}},Hf=class extends k{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){let e=this.editor,t=e.model,i=e.editing.view,r=e.locale,o=t.document.selection;this.listenTo(i.document,"arrowKey",(s,a)=>{if(!o.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;let l=a.keyCode==Te.arrowright,c=a.keyCode==Te.arrowleft;if(!l&&!c)return;let u=r.contentLanguageDirection,h=!1;u==="ltr"&&l||u==="rtl"&&c?h=this._handleForwardMovement(a):h=this._handleBackwardMovement(a),h===!0&&s.stop()},{context:"$text",priority:"highest"}),this.listenTo(o,"change:range",(s,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&kr(o.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){let t=this.attributes,i=this.editor.model,r=i.document.selection,o=r.getFirstPosition();return this._isGravityOverridden||o.isAtStart&&Zs(r,t)?!1:kr(o,t)?(mb(e),Zs(r,t)&&kr(o,t,!0)?fb(i,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){let t=this.attributes,i=this.editor.model,r=i.document.selection,o=r.getFirstPosition();return this._isGravityOverridden?(mb(e),this._restoreGravity(),kr(o,t,!0)?fb(i,t):I_(i,t,o),!0):o.isAtStart?Zs(r,t)?(mb(e),I_(i,t,o),!0):!1:!Zs(r,t)&&kr(o,t,!0)?(mb(e),I_(i,t,o),!0):RH(o,t)?o.isAtEnd&&!Zs(r,t)&&kr(o,t)?(mb(e),I_(i,t,o),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){let e=this.editor,t=e.model,i=t.document.selection,r=e.editing.view.document;e.editing.view.addObserver(Ks);let o=!1;this.listenTo(r,"mousedown",()=>{o=!0}),this.listenTo(r,"selectionChange",()=>{let s=this.attributes;if(!o||(o=!1,!i.isCollapsed)||!Zs(i,s))return;let a=i.getFirstPosition();kr(a,s)&&(a.isAtStart||kr(a,s,!0)?fb(t,s):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){let t=this.editor.model,i=t.document.selection,r=this.attributes;this.listenTo(t,"insertContent",()=>{let o=i.getFirstPosition();Zs(i,r)&&kr(o,r)&&fb(t,r)},{priority:"low"})}_handleDeleteContentAfterNode(){let e=this.editor,t=e.model,i=t.document.selection,r=e.editing.view,o=!1,s=!1;this.listenTo(r.document,"delete",(a,l)=>{o=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!o)return;let a=i.getFirstPosition();s=Zs(i,this.attributes)&&!RH(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{o&&(o=!1,!s&&e.model.enqueueChange(()=>{let a=i.getFirstPosition();Zs(i,this.attributes)&&kr(a,this.attributes)&&(a.isAtStart||kr(a,this.attributes,!0)?fb(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}};function Zs(n,e){for(let t of e)if(n.hasAttribute(t))return!0;return!1}function I_(n,e,t){let i=t.nodeBefore;n.change(r=>{if(i){let o=[],s=n.schema.isObject(i)&&n.schema.isInline(i);for(let[a,l]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!s||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&o.push([a,l]);r.setSelectionAttribute(o)}else r.removeSelectionAttribute(e)})}function fb(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function mb(n){n.preventDefault()}function RH(n,e){let t=n.getShiftedBy(-1);return kr(t,e)}function kr(n,e,t=!1){let{nodeBefore:i,nodeAfter:r}=n;for(let o of e){let s=i?i.getAttribute(o):void 0,a=r?r.getAttribute(o):void 0;if(!(t&&(s===void 0||a===void 0))&&a!==s)return!0}return!1}var MZe={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:Bf('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:Bf("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:Bf("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:Bf('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:Bf('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:Bf("'"),to:[null,"\u201A",null,"\u2019"]}};function Bf(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function zf(n,e,t,i){return i.createRange(OR(n,e,t,!0,i),OR(n,e,t,!1,i))}function OR(n,e,t,i,r){let o=n.textNode||(i?n.nodeBefore:n.nodeAfter),s=null;for(;o&&o.getAttribute(e)==t;)s=o,o=i?o.previousSibling:o.nextSibling;return s?r.createPositionAt(s,i?"before":"after"):n}function LR(n,e,t,i){let r=n.editing.view,o=new Set;r.document.registerPostFixer(s=>{let a=n.model.document.selection,l=!1;if(a.hasAttribute(e)){let c=zf(a.getFirstPosition(),e,a.getAttribute(e),n.model),u=n.editing.mapper.toViewRange(c);for(let h of u.getItems())h.is("element",t)&&!h.hasClass(i)&&(s.addClass(i,h),o.add(h),l=!0)}return l}),n.conversion.for("editingDowncast").add(s=>{s.on("insert",a,{priority:"highest"}),s.on("remove",a,{priority:"highest"}),s.on("attribute",a,{priority:"highest"}),s.on("selection",a,{priority:"highest"});function a(){r.change(l=>{for(let c of o.values())l.removeClass(i,c),o.delete(c)})}})}var yb=class extends J{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){let e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){let t=this.editor.model,r=t.document.selection,o=e.forceValue===void 0?!this.value:e.forceValue;t.change(s=>{if(r.isCollapsed)o?s.setSelectionAttribute(this.attributeKey,!0):s.removeSelectionAttribute(this.attributeKey);else{let a=t.schema.getValidRanges(r.getRanges(),this.attributeKey);for(let l of a)o?s.setAttribute(this.attributeKey,o,l):s.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){let e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(let r of i.getRanges())for(let o of r.getItems())if(t.checkAttribute(o,this.attributeKey))return o.hasAttribute(this.attributeKey);return!1}},jf="bold",UR=class extends k{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:jf}),e.model.schema.setAttributeProperties(jf,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:jf,view:"strong",upcastAlso:["b",i=>{let r=i.getStyle("font-weight");return r&&(r=="bold"||Number(r)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(jf,new yb(e,jf)),e.keystrokes.set("CTRL+B",jf),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}};function qR({editor:n,commandName:e,plugin:t,icon:i,label:r,keystroke:o}){return s=>{let a=n.commands.get(e),l=new s(n.locale);return l.set({label:r,icon:i,keystroke:o,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof ye?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}var FR="bold",HR=class extends k{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=qR({editor:e,commandName:FR,plugin:this,icon:U.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(FR,()=>i(te)),e.ui.componentFactory.add("menuBar:"+FR,()=>i(ye))}},R_=class extends k{static get requires(){return[UR,HR]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}};var $f="italic",zR=class extends k{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:$f}),e.model.schema.setAttributeProperties($f,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:$f,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add($f,new yb(e,$f)),e.keystrokes.set("CTRL+I",$f),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}},Jge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',VR="italic",jR=class extends k{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=qR({editor:e,commandName:VR,plugin:this,icon:Jge,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(VR,()=>i(te)),e.ui.componentFactory.add("menuBar:"+VR,()=>i(ye))}},D_=class extends k{static get requires(){return[zR,jR]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}};var vb="underline",$R=class extends k{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:vb}),e.model.schema.setAttributeProperties(vb,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:vb,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(vb,new yb(e,vb)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}},Xge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',BR="underline",WR=class extends k{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=qR({editor:e,commandName:BR,plugin:this,icon:Xge,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add(BR,()=>i(te)),e.ui.componentFactory.add("menuBar:"+BR,()=>i(ye))}},M_=class extends k{static get requires(){return[$R,WR]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}};function*LH(n,e){for(let t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}var GR=class extends J{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){let t=this.editor.model,i=t.document.selection,r=t.schema,o=i.isCollapsed,s=i.getFirstRange(),a=s.start.parent,l=s.end.parent;if(r.isLimit(a)||r.isLimit(l))return!o&&a==l&&t.deleteContent(i),!1;if(o){let c=LH(e.model.schema,i.getAttributes());return OH(e,s.start),e.setSelectionAttribute(c),!0}else{let c=!(s.start.isAtStart&&s.end.isAtEnd),u=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(u)return OH(e,i.focus),!0;e.setSelection(l,0)}}return!1}};function OH(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}var ebe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}},O_=class extends qn{constructor(e){super(e);let t=this.document,i=!1;t.on("keydown",(r,o)=>{i=o.shiftKey}),t.on("beforeinput",(r,o)=>{if(!this.isEnabled)return;let s=o.inputType;se.isSafari&&i&&s=="insertParagraph"&&(s="insertLineBreak");let a=o.domEvent,l=ebe[s];if(!l)return;let c=new Bo(t,"enter",o.targetRanges[0]);t.fire(c,new Uo(e,a,{isSoft:l.isSoft})),c.stop.called&&r.stop()})}observe(){}stopObserving(){}},no=class extends k{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,i=t.document,r=this.editor.t;t.addObserver(O_),e.commands.add("enter",new GR(e)),this.listenTo(i,"enter",(o,s)=>{i.isComposing||s.preventDefault(),!s.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}},KR=class extends J{execute(){let e=this.editor.model,t=e.document;e.change(i=>{nbe(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){let e=this.editor.model,t=e.document;this.isEnabled=tbe(e.schema,t.selection)}};function tbe(n,e){if(e.rangeCount>1)return!1;let t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;let i=e.getFirstRange(),r=i.start.parent,o=i.end.parent;return!((YR(r,n)||YR(o,n))&&r!==o)}function nbe(n,e,t){let i=t.isCollapsed,r=t.getFirstRange(),o=r.start.parent,s=r.end.parent,a=o==s;if(i){let l=LH(n.schema,t.getAttributes());NH(n,e,r.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{let l=!(r.start.isAtStart&&r.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?NH(n,e,t.focus):l&&e.setSelection(s,0)}}function NH(n,e,t){let i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function YR(n,e){return n.is("rootElement")?!1:e.isLimit(n)||YR(n.parent,e)}var Wf=class extends k{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model.schema,i=e.conversion,r=e.editing.view,o=r.document,s=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),r.addObserver(O_),e.commands.add("shiftEnter",new KR(e)),this.listenTo(o,"enter",(a,l)=>{o.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),r.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}};var ZR=class extends nt(){_stack=[];add(e,t){let i=this._stack,r=i[0];this._insertDescriptor(e);let o=i[0];r!==o&&!QR(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}remove(e,t){let i=this._stack,r=i[0];this._removeDescriptor(e);let o=i[0];r!==o&&!QR(r,o)&&this.fire("change:top",{oldDescriptor:r,newDescriptor:o,writer:t})}_insertDescriptor(e){let t=this._stack,i=t.findIndex(o=>o.id===e.id);if(QR(e,t[i]))return;i>-1&&t.splice(i,1);let r=0;for(;t[r]&&ibe(t[r],e);)r++;t.splice(r,0,e)}_removeDescriptor(e){let t=this._stack,i=t.findIndex(r=>r.id===e);i>-1&&t.splice(i,1)}};function QR(n,e){return n&&e&&n.priority==e.priority&&N_(n.classes)==N_(e.classes)}function ibe(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:N_(n.classes)>N_(e.classes)}function N_(n){return Array.isArray(n)?n.sort().join(","):n}var rbe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',obe="ck-widget",FH="ck-widget_selected";function Tt(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function Ar(n,e,t={}){if(!n.is("containerElement"))throw new C("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(obe,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=ube,e.setCustomProperty("widgetLabel",[],n),t.label&&lbe(n,t.label),t.hasSelectionHandle&&dbe(n,e),zH(n,e),n}function sbe(n,e,t){if(e.classes&&t.addClass(He(e.classes),n),e.attributes)for(let i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function abe(n,e,t){if(e.classes&&t.removeClass(He(e.classes),n),e.attributes)for(let i in e.attributes)t.removeAttribute(i,n)}function zH(n,e,t=sbe,i=abe){let r=new ZR;r.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});let o=(a,l,c)=>r.add(l,c),s=(a,l,c)=>r.remove(l,c);e.setCustomProperty("addHighlight",o,n),e.setCustomProperty("removeHighlight",s,n)}function lbe(n,e){n.getCustomProperty("widgetLabel").push(e)}function cbe(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function t2(n,e,t={}){return e.addClass(["ck-editor__editable","ck-editor__nested-editable"],n),e.setAttribute("role","textbox",n),e.setAttribute("tabindex","-1",n),t.label&&e.setAttribute("aria-label",t.label,n),e.setAttribute("contenteditable",n.isReadOnly?"false":"true",n),n.on("change:isReadOnly",(i,r,o)=>{e.setAttribute("contenteditable",o?"false":"true",n)}),n.on("change:isFocused",(i,r,o)=>{o?e.addClass("ck-editor__nested-editable_focused",n):e.removeClass("ck-editor__nested-editable_focused",n)}),zH(n,e),n}function Rl(n,e){let t=n.getSelectedElement();if(t){let i=Pl(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function ube(){return null}function dbe(n,e){let t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){let r=this.toDomElement(i),o=new qo;return o.set("content",rbe),o.render(),r.appendChild(o.element),r});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}function F_(n){let e=a=>{let{width:l,paddingLeft:c,paddingRight:u}=a.ownerDocument.defaultView.getComputedStyle(a);return parseFloat(l)-(parseFloat(c)||0)-(parseFloat(u)||0)},t=n.parentElement;if(!t)return 0;let i=e(t),r=5,o=0,s=t;for(;isNaN(i);){if(s=s.parentElement,++o>r)return 0;i=e(s)}return i}function hbe(n,e=new pe(n)){let t=F_(n);return t?e.width/t*100:0}var Js="widget-type-around";function Pu(n,e,t){return!!n&&Tt(n)&&!t.isInline(e)}function fbe(n){return n.closest(".ck-widget__type-around__button")}function mbe(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function pbe(n,e){let t=n.closest(".ck-widget");return e.mapDomToView(t)}function Pl(n){return n.getAttribute(Js)}var gbe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',jH=["before","after"],bbe=new DOMParser().parseFromString(gbe,"image/svg+xml").firstChild,VH="ck-widget__type-around_disabled",JR=class extends k{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[no,Kn]}init(){let e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,r,o)=>{t.change(s=>{for(let a of t.document.roots)o?s.removeClass(VH,a):s.addClass(VH,a)}),o||e.model.change(s=>{s.removeSelectionAttribute(Js)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){let i=this.editor,r=i.editing.view,o=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:o}),r.focus(),r.scrollToTheSelection()}_listenToIfEnabled(e,t,i,r){this.listenTo(e,t,(...o)=>{this.isEnabled&&i(...o)},r)}_insertParagraphAccordingToFakeCaretPosition(){let i=this.editor.model.document.selection,r=Pl(i);if(!r)return!1;let o=i.getSelectedElement();return this._insertParagraph(o,r),!0}_enableTypeAroundUIInjection(){let e=this.editor,t=e.model.schema,i=e.locale.t,r={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(o,s,a)=>{let l=a.mapper.toViewElement(s.item);l&&Pu(l,s.item,t)&&(wbe(a.writer,r,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){let e=this.editor,t=e.model,i=t.document.selection,r=t.schema,o=e.editing.view;this._listenToIfEnabled(o.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Tt,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Js)})}),this._listenToIfEnabled(t.document,"change:data",()=>{let a=i.getSelectedElement();if(a){let l=e.editing.mapper.toViewElement(a);if(Pu(l,a,r))return}e.model.change(l=>{l.removeSelectionAttribute(Js)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{let u=c.writer;if(this._currentFakeCaretModelElement){let w=c.mapper.toViewElement(this._currentFakeCaretModelElement);w&&(u.removeClass(jH.map(s),w),this._currentFakeCaretModelElement=null)}let h=l.selection.getSelectedElement();if(!h)return;let p=c.mapper.toViewElement(h);if(!Pu(p,h,r))return;let g=Pl(l.selection);g&&(u.addClass(s(g),p),this._currentFakeCaretModelElement=h)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(u=>{u.removeSelectionAttribute(Js)})});function s(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){let i=this.editor,r=i.model,o=r.document.selection,s=r.schema,a=i.editing.view,l=t.keyCode,c=X8(l,i.locale.contentLanguageDirection),u=a.document.selection.getSelectedElement(),h=i.editing.mapper.toModelElement(u),p;Pu(u,h,s)?p=this._handleArrowKeyPressOnSelectedWidget(c):o.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),p&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){let i=this.editor.model,r=i.document.selection,o=Pl(r);return i.change(s=>{if(o){if(!(o===(e?"after":"before")))return s.removeSelectionAttribute(Js),!0}else return s.setSelectionAttribute(Js,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){let t=this.editor,i=t.model,r=i.schema,o=t.plugins.get("Widget"),s=o._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(s);return Pu(a,s,r)?(i.change(l=>{o._setSelectionOverElement(s),l.setSelectionAttribute(Js,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){let t=this.editor,i=t.model,r=i.schema,o=t.editing.mapper,s=i.document.selection,a=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter,l=o.toViewElement(a);return Pu(l,a,r)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Js,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){let e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,r)=>{let o=fbe(r.domTarget);if(!o)return;let s=mbe(o),a=pbe(o,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,s),r.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){let e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(r,o)=>{if(r.eventPhase!="atTarget")return;let s=t.getSelectedElement(),a=e.editing.mapper.toViewElement(s),l=e.model.schema,c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:Pu(a,s,l)&&(this._insertParagraph(s,o.isSoft?"before":"after"),c=!0),c&&(o.preventDefault(),r.stop())},{context:Tt})}_enableInsertingParagraphsOnTypingKeystroke(){let t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,r)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(r.selection=t.selection)},{priority:"high"}),se.isAndroid?this._listenToIfEnabled(t,"keydown",(i,r)=>{r.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){let e=this.editor,t=e.editing.view,i=e.model,r=i.schema;this._listenToIfEnabled(t.document,"delete",(o,s)=>{if(o.eventPhase!="atTarget")return;let a=Pl(i.document.selection);if(!a)return;let l=s.direction,c=i.document.selection.getSelectedElement(),u=a==="before",h=l=="forward";if(u===h)e.execute("delete",{selection:i.createSelection(c,"on")});else{let g=r.getNearestSelectionRange(i.createPositionAt(c,a),l);if(g)if(!g.isCollapsed)i.change(w=>{w.setSelection(g),e.execute(h?"deleteForward":"delete")});else{let w=i.createSelection(g.start);if(i.modifySelection(w,{direction:l}),!w.focus.isEqual(g.start))i.change(y=>{y.setSelection(g),e.execute(h?"deleteForward":"delete")});else{let y=_be(r,g.start.parent);i.deleteContent(i.createSelection(y,"on"),{doNotAutoparagraph:!0})}}}s.preventDefault(),o.stop()},{context:Tt})}_enableInsertContentIntegration(){let e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(r,[o,s])=>{if(s&&!s.is("documentSelection"))return;let a=Pl(i);if(a)return r.stop(),t.change(l=>{let c=i.getSelectedElement(),u=t.createPositionAt(c,a),h=l.createSelection(u),p=t.insertContent(o,h);return l.setSelection(h),p})},{priority:"high"})}_enableInsertObjectIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(r,o)=>{let[,s,a={}]=o;if(s&&!s.is("documentSelection"))return;let l=Pl(i);l&&(a.findOptimalPosition=l,o[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(r,[o])=>{if(o&&!o.is("documentSelection"))return;Pl(i)&&r.stop()},{priority:"high"})}};function wbe(n,e,t){let i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(r){let o=this.toDomElement(r);return vbe(o,e),ybe(o),o});n.insert(n.createPositionAt(t,"end"),i)}function vbe(n,e){for(let t of jH){let i=new Mn({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(bbe,!0)]});n.appendChild(i.render())}}function ybe(n){let e=new Mn({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function _be(n,e){let t=e;for(let i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}function Cbe(n){let e=n.model;return(t,i)=>{let r=i.keyCode==Te.arrowup,o=i.keyCode==Te.arrowdown,s=i.shiftKey,a=e.document.selection;if(!r&&!o)return;let l=o;if(s&&Tbe(a,l))return;let c=Ebe(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(s)return}(c.isCollapsed||Sbe(n,c,l))&&(e.change(u=>{let h=l?c.end:c.start;if(s){let p=e.createSelection(a.anchor);p.setFocus(h),u.setSelection(p)}else u.setSelection(h)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function Ebe(n,e,t){let i=n.model;if(t){let r=e.isCollapsed?e.focus:e.getLastPosition(),o=BH(i,r,"forward");if(!o)return null;let s=i.createRange(r,o),a=UH(i.schema,s,"backward");return a?i.createRange(r,a):null}else{let r=e.isCollapsed?e.focus:e.getFirstPosition(),o=BH(i,r,"backward");if(!o)return null;let s=i.createRange(o,r),a=UH(i.schema,s,"forward");return a?i.createRange(a,r):null}}function BH(n,e,t){let i=n.schema,r=n.createRangeIn(e.root),o=t=="forward"?"elementStart":"elementEnd";for(let{previousPosition:s,item:a,type:l}of r.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return s;if(l==o&&i.isBlock(a))return null}return null}function UH(n,e,t){let i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(let{nextPosition:r}of e.getWalker({direction:t}))if(n.checkChild(r,"$text"))return r;return null}function Sbe(n,e,t){let i=n.model,r=n.view.domConverter;if(t){let c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}let o=n.mapper.toViewRange(e),s=r.viewRangeToDom(o),a=pe.getDomRangeRects(s),l;for(let c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function Tbe(n,e){return!n.isCollapsed&&n.isBackward==e}var Yn=class extends k{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[JR,Kn]}init(){let e=this.editor,t=e.editing.view,i=t.document,r=e.t;this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{let l=a.writer,c=s.selection;if(c.isCollapsed)return;let u=c.getSelectedElement();if(!u)return;let h=e.editing.mapper.toViewElement(u);Tt(h)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(h),{fake:!0,label:cbe(h)})}),this.editor.editing.downcastDispatcher.on("selection",(o,s,a)=>{this._clearPreviouslySelectedWidgets(a.writer);let l=a.writer,c=l.document.selection,u=null;for(let h of c.getRanges())for(let p of h){let g=p.item;Tt(g)&&!Ibe(g,u)&&(l.addClass(FH,g),this._previouslySelected.add(g),u=g)}},{priority:"low"}),t.addObserver(Ks),this.listenTo(i,"mousedown",(...o)=>this._onMousedown(...o)),this.listenTo(i,"arrowKey",(...o)=>{this._handleSelectionChangeOnArrowKeyPress(...o)},{context:[Tt,"$text"]}),this.listenTo(i,"arrowKey",(...o)=>{this._preventDefaultOnArrowKeyPress(...o)},{context:"$root"}),this.listenTo(i,"arrowKey",Cbe(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(o,s)=>{this._handleDelete(s.direction=="forward")&&(s.preventDefault(),o.stop())},{context:"$root"}),this.listenTo(i,"tab",(o,s)=>{o.eventPhase=="atTarget"&&(s.shiftKey||this._selectFirstNestedEditable()&&(s.preventDefault(),o.stop()))},{context:Tt,priority:"low"}),this.listenTo(i,"tab",(o,s)=>{s.shiftKey&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),this.listenTo(i,"keydown",(o,s)=>{s.keystroke==Te.esc&&this._selectAncestorWidget()&&(s.preventDefault(),o.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:r("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:r("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:r("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:r("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:r("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:r("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){let i=this.editor,r=i.editing.view,o=r.document,s=t.target;if(!s)return;if(t.domEvent.detail>=3){this._selectBlockContent(s)&&t.preventDefault();return}if(!Tt(s)){let l=kbe(s);if(!l)return;if(Tt(l))s=l;else{let c=Abe(r,t);if(c&&Tt(c))s=c;else return}}se.isAndroid&&t.preventDefault(),o.isFocused||r.focus();let a=i.editing.mapper.toModelElement(s);this._setSelectionOverElement(a)}_selectBlockContent(e){let t=this.editor,i=t.model,r=t.editing.mapper,o=i.schema,s=r.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=xbe(r.toModelElement(s),i.schema);return a?(i.change(l=>{let c=o.isLimit(a)?null:Pbe(l.createPositionAfter(a),o),u=l.createPositionAt(a,0),h=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(u,h))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){let i=t.keyCode,r=this.editor.model,o=r.schema,s=r.document.selection,a=s.getSelectedElement(),l=Ng(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",u=l=="up"||l=="down";if(a&&o.isObject(a)){let p=c?s.getLastPosition():s.getFirstPosition(),g=o.getNearestSelectionRange(p,c?"forward":"backward");g&&(r.change(w=>{w.setSelection(g)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed&&!t.shiftKey){let p=s.getFirstPosition(),g=s.getLastPosition(),w=p.nodeAfter,y=g.nodeBefore;(w&&o.isObject(w)||y&&o.isObject(y))&&(r.change(E=>{E.setSelection(c?g:p)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed)return;let h=this._getObjectElementNextToSelection(c);if(h&&o.isObject(h)){if(o.isInline(h)&&u)return;this._setSelectionOverElement(h),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){let i=this.editor.model,r=i.schema,o=i.document.selection.getSelectedElement();o&&r.isObject(o)&&(t.preventDefault(),e.stop())}_handleDelete(e){let i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;let r=this._getObjectElementNextToSelection(e);if(r)return this.editor.model.change(o=>{let s=i.anchor.parent;for(;s.isEmpty;){let a=s;s=a.parent,o.remove(a)}this._setSelectionOverElement(r)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){let t=this.editor.model,i=t.schema,r=t.document.selection,o=t.createSelection(r);if(t.modifySelection(o,{direction:e?"forward":"backward"}),o.isEqual(r))return null;let s=e?o.focus.nodeBefore:o.focus.nodeAfter;return s&&i.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(let t of this._previouslySelected)e.removeClass(FH,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){let e=this.editor,i=this.editor.editing.view.document;for(let r of i.selection.getFirstRange().getItems())if(r.is("editableElement")){let o=e.editing.mapper.toModelElement(r);if(!o)continue;let s=e.model.createPositionAt(o,0),a=e.model.schema.getNearestSelectionRange(s,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){let e=this.editor,t=e.editing.mapper,r=e.editing.view.document.selection.getFirstPosition().parent,s=(r.is("$text")?r.parent:r).findAncestor(Tt);if(!s)return!1;let a=t.toModelElement(s);return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}};function kbe(n){let e=n;for(;e;){if(e.is("editableElement")||Tt(e))return e;e=e.parent}return null}function Abe(n,e){let t=U1(e.domEvent),i=null;if(t?i=n.domConverter.domRangeToView(t):i=n.createRange(n.createPositionAt(e.target,0)),!i)return null;let r=i.start;if(!r.parent)return null;let o=r.parent;return r.parent.is("editableElement")&&(r.isAtEnd&&r.nodeBefore?o=r.nodeBefore:r.isAtStart&&r.nodeAfter&&(o=r.nodeAfter)),o.is("$text")?o.parent:o}function Ibe(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function xbe(n,e){for(let t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function Pbe(n,e){let t=new Zi({startPosition:n});for(let{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}var Ru=class extends k{_toolbarDefinitions=new Map;_balloon;static get requires(){return[Tr]}static get pluginName(){return"WidgetToolbarRepository"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(e.plugins.has("BalloonToolbar")){let t=e.plugins.get("BalloonToolbar");this.listenTo(t,"show",i=>{Rbe(e.editing.view.document.selection)&&i.stop()},{priority:"high"})}this._balloon=this.editor.plugins.get("ContextualBalloon"),this.on("change:isEnabled",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui,"update",()=>{this._updateToolbarsVisibility()}),this.listenTo(e.ui.focusTracker,"change:isFocused",()=>{this._updateToolbarsVisibility()},{priority:"low"})}destroy(){super.destroy();for(let e of this._toolbarDefinitions.values())e.view.destroy()}register(e,{ariaLabel:t,items:i,getRelatedElement:r,balloonClassName:o="ck-toolbar-container"}){if(!i.length){ge("widget-toolbar-no-items",{toolbarId:e});return}let s=this.editor,a=s.t,l=new eo(s.locale);if(l.ariaLabel=t||a("Widget toolbar"),this._toolbarDefinitions.has(e))throw new C("widget-toolbar-duplicated",this,{toolbarId:e});let c={view:l,getRelatedElement:r,balloonClassName:o,itemsConfig:i,initialized:!1};s.ui.addToolbar(l,{isContextual:!0,beforeFocus:()=>{let u=r(s.editing.view.document.selection);u&&this._showToolbar(c,u)},afterBlur:()=>{this._hideToolbar(c)}}),this._toolbarDefinitions.set(e,c)}_updateToolbarsVisibility(){let e=0,t=null,i=null;for(let r of this._toolbarDefinitions.values()){let o=r.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!o)this._isToolbarInBalloon(r)&&this._hideToolbar(r);else if(!this.editor.ui.focusTracker.isFocused)this._isToolbarVisible(r)&&this._hideToolbar(r);else{let s=o.getAncestors().length;s>e&&(e=s,t=o,i=r)}}i&&this._showToolbar(i,t)}_hideToolbar(e){this._balloon.remove(e.view),this.stopListening(this._balloon,"change:visibleView")}_showToolbar(e,t){this._isToolbarVisible(e)?HH(this.editor,t):this._isToolbarInBalloon(e)||(e.initialized||(e.initialized=!0,e.view.fillFromConfig(e.itemsConfig,this.editor.ui.componentFactory)),this._balloon.add({view:e.view,position:$H(this.editor,t),balloonClassName:e.balloonClassName}),this.listenTo(this._balloon,"change:visibleView",()=>{for(let i of this._toolbarDefinitions.values())if(this._isToolbarVisible(i)){let r=i.getRelatedElement(this.editor.editing.view.document.selection);HH(this.editor,r)}}))}_isToolbarVisible(e){return this._balloon.visibleView===e.view}_isToolbarInBalloon(e){return this._balloon.hasView(e.view)}};function HH(n,e){let t=n.plugins.get("ContextualBalloon"),i=$H(n,e);t.updatePosition(i)}function $H(n,e){let t=n.editing.view,i=$o.defaultPositions;return{target:t.domConverter.mapViewToDom(e),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast,i.viewportStickyNorth]}}function Rbe(n){let e=n.getSelectedElement();return!!(e&&Tt(e))}var XR=class extends $e(){_referenceCoordinates;_options;_originalWidth;_originalHeight;_originalWidthPercents;_aspectRatio;constructor(e){super(),this.set("activeHandlePosition",null),this.set("proposedWidthPercents",null),this.set("proposedWidth",null),this.set("proposedHeight",null),this.set("proposedHandleHostWidth",null),this.set("proposedHandleHostHeight",null),this._options=e,this._referenceCoordinates=null}get originalWidth(){return this._originalWidth}get originalHeight(){return this._originalHeight}get originalWidthPercents(){return this._originalWidthPercents}get aspectRatio(){return this._aspectRatio}begin(e,t,i){let r=new pe(t);this.activeHandlePosition=Obe(e),this._referenceCoordinates=Dbe(t,Nbe(this.activeHandlePosition)),this._originalWidth=r.width,this._originalHeight=r.height,this._aspectRatio=r.width/r.height;let o=i.style.width;o&&o.match(/^\d+(\.\d*)?%$/)?this._originalWidthPercents=parseFloat(o):this._originalWidthPercents=hbe(i,r)}update(e){this.proposedWidth=e.width,this.proposedHeight=e.height,this.proposedWidthPercents=e.widthPercents,this.proposedHandleHostWidth=e.handleHostWidth,this.proposedHandleHostHeight=e.handleHostHeight}};function Dbe(n,e){let t=new pe(n),i=e.split("-"),r={x:i[1]=="right"?t.right:t.left,y:i[0]=="bottom"?t.bottom:t.top};return r.x+=n.ownerDocument.defaultView.scrollX,r.y+=n.ownerDocument.defaultView.scrollY,r}function Mbe(n){return`ck-widget__resizer__handle-${n}`}function Obe(n){let e=["top-left","top-right","bottom-right","bottom-left"];for(let t of e)if(n.classList.contains(Mbe(t)))return t}function Nbe(n){let e=n.split("-"),t={top:"bottom",bottom:"top",left:"right",right:"left"};return`${t[e[0]]}-${t[e[1]]}`}var e2=class extends Y{constructor(){super();let e=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-size-view",e.to("_viewPosition",t=>t?`ck-orientation-${t}`:"")],style:{display:e.if("_isVisible","none",t=>!t)}},children:[{text:e.to("_label")}]})}_bindToState(e,t){this.bind("_isVisible").to(t,"proposedWidth",t,"proposedHeight",(i,r)=>i!==null&&r!==null),this.bind("_label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",(i,r,o)=>e.unit==="px"?`${i}\xD7${r}`:`${o}%`),this.bind("_viewPosition").to(t,"activeHandlePosition",t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",(i,r,o)=>r<50||o<50?"above-center":i)}_dismiss(){this.unbind(),this._isVisible=!1}},L_=class extends $e(){_state;_sizeView;_options;_viewResizerWrapper=null;_initialViewWidth;constructor(e){super(),this._options=e,this.set("isEnabled",!0),this.set("isSelected",!1),this.bind("isVisible").to(this,"isEnabled",this,"isSelected",(t,i)=>t&&i),this.decorate("begin"),this.decorate("cancel"),this.decorate("commit"),this.decorate("updateSize"),this.on("commit",t=>{!this.state.proposedWidth&&!this.state.proposedWidthPercents&&(this._cleanup(),t.stop())},{priority:"high"})}get state(){return this._state}show(){this._options.editor.editing.view.change(t=>{t.removeClass("ck-hidden",this._viewResizerWrapper)})}hide(){this._options.editor.editing.view.change(t=>{t.addClass("ck-hidden",this._viewResizerWrapper)})}attach(){let e=this,t=this._options.viewElement;this._options.editor.editing.view.change(r=>{let o=r.createUIElement("div",{class:"ck ck-reset_all ck-widget__resizer"},function(s){let a=this.toDomElement(s);return e._appendHandles(a),e._appendSizeUI(a),a});r.insert(r.createPositionAt(t,"end"),o),r.addClass("ck-widget_with-resizer",t),this._viewResizerWrapper=o,this.isVisible||this.hide()}),this.on("change:isVisible",()=>{this.isVisible?(this.show(),this.redraw()):this.hide()})}begin(e){this._state=new XR(this._options),this._sizeView._bindToState(this._options,this.state),this._initialViewWidth=this._options.viewElement.getStyle("width"),this.state.begin(e,this._getHandleHost(),this._getResizeHost())}updateSize(e){let t=this._proposeNewSize(e);this._options.editor.editing.view.change(c=>{let u=this._options.unit||"%",h=(u==="%"?t.widthPercents:t.width)+u;c.setStyle("width",h,this._options.viewElement)});let r=this._getHandleHost(),o=new pe(r),s=Math.round(o.width),a=Math.round(o.height),l=new pe(r);t.width=Math.round(l.width),t.height=Math.round(l.height),this.redraw(o),this.state.update(P(v({},t),{handleHostWidth:s,handleHostHeight:a}))}commit(){let e=this._options.unit||"%",t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.editor.editing.view.change(()=>{this._cleanup(),this._options.onCommit(t)})}cancel(){this._cleanup()}destroy(){this.cancel()}redraw(e){let t=this._domResizerWrapper;if(!Vbe(t))return;let i=t.parentElement,r=this._getHandleHost(),o=this._viewResizerWrapper,s=[o.getStyle("width"),o.getStyle("height"),o.getStyle("left"),o.getStyle("top")],a;if(i.isSameNode(r)){let l=e||new pe(r);a=[l.width+"px",l.height+"px",void 0,void 0]}else a=[r.offsetWidth+"px",r.offsetHeight+"px",r.offsetLeft+"px",r.offsetTop+"px"];_n(s,a)!=="same"&&this._options.editor.editing.view.change(l=>{l.setStyle({width:a[0],height:a[1],left:a[2],top:a[3]},o)})}containsHandle(e){return this._domResizerWrapper.contains(e)}static isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle")}_cleanup(){this._sizeView._dismiss(),this._options.editor.editing.view.change(t=>{t.setStyle("width",this._initialViewWidth,this._options.viewElement)})}_proposeNewSize(e){let t=this.state,i=Fbe(e),r=this._options.isCentered?this._options.isCentered(this):!0,o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};r&&t.activeHandlePosition.endsWith("-right")&&(o.x=i.x-(t._referenceCoordinates.x+t.originalWidth)),r&&(o.x*=2);let s=Math.abs(t.originalWidth+o.x),a=Math.abs(t.originalHeight+o.y);return(s/t.aspectRatio>a?"width":"height")=="width"?a=s/t.aspectRatio:s=a*t.aspectRatio,{width:Math.round(s),height:Math.round(a),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*s*100)/100,100)}}_getResizeHost(){let e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e)}_getHandleHost(){let e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e)}get _domResizerWrapper(){return this._options.editor.editing.view.domConverter.mapViewToDom(this._viewResizerWrapper)}_appendHandles(e){let t=["top-left","top-right","bottom-right","bottom-left"];for(let i of t)e.appendChild(new Mn({tag:"div",attributes:{class:`ck-widget__resizer__handle ${Lbe(i)}`}}).render())}_appendSizeUI(e){this._sizeView=new e2,this._sizeView.render(),e.appendChild(this._sizeView.element)}};function Lbe(n){return`ck-widget__resizer__handle-${n}`}function Fbe(n){return{x:n.pageX,y:n.pageY}}function Vbe(n){return n&&n.ownerDocument&&n.ownerDocument.contains(n)}var qf=class extends k{_resizers=new Map;_observer;_redrawSelectedResizerThrottled;static get pluginName(){return"WidgetResize"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.editing,t=j.window.document;this.set("selectedResizer",null),this.set("_activeResizer",null),e.view.addObserver(Ks),this._observer=new(en()),this.listenTo(e.view.document,"mousedown",this._mouseDownListener.bind(this),{priority:"high"}),this._observer.listenTo(t,"mousemove",this._mouseMoveListener.bind(this)),this._observer.listenTo(t,"mouseup",this._mouseUpListener.bind(this)),this._redrawSelectedResizerThrottled=No(()=>this.redrawSelectedResizer(),200),this.editor.ui.on("update",this._redrawSelectedResizerThrottled),this.editor.model.document.on("change",()=>{for(let[r,o]of this._resizers)r.isAttached()||(this._resizers.delete(r),o.destroy())},{priority:"lowest"}),this._observer.listenTo(j.window,"resize",this._redrawSelectedResizerThrottled);let i=this.editor.editing.view.document.selection;i.on("change",()=>{let r=i.getSelectedElement(),o=this.getResizerByViewElement(r)||null;o?this.select(o):this.deselect()})}redrawSelectedResizer(){this.selectedResizer&&this.selectedResizer.isVisible&&this.selectedResizer.redraw()}destroy(){super.destroy(),this._observer.stopListening();for(let e of this._resizers.values())e.destroy();this._redrawSelectedResizerThrottled.cancel()}select(e){this.deselect(),this.selectedResizer=e,this.selectedResizer.isSelected=!0}deselect(){this.selectedResizer&&(this.selectedResizer.isSelected=!1),this.selectedResizer=null}attachTo(e){let t=new L_(e),i=this.editor.plugins;if(t.attach(),i.has("WidgetToolbarRepository")){let s=i.get("WidgetToolbarRepository");t.on("begin",()=>{s.forceDisabled("resize")},{priority:"lowest"}),t.on("cancel",()=>{s.clearForceDisabled("resize")},{priority:"highest"}),t.on("commit",()=>{s.clearForceDisabled("resize")},{priority:"highest"})}this._resizers.set(e.viewElement,t);let o=this.editor.editing.view.document.selection.getSelectedElement();return this.getResizerByViewElement(o)==t&&this.select(t),t}getResizerByViewElement(e){return this._resizers.get(e)}_getResizerByHandle(e){for(let t of this._resizers.values())if(t.containsHandle(e))return t}_mouseDownListener(e,t){let i=t.domTarget;L_.isResizeHandle(i)&&(this._activeResizer=this._getResizerByHandle(i)||null,this._activeResizer&&(this._activeResizer.begin(i),e.stop(),t.preventDefault()))}_mouseMoveListener(e,t){this._activeResizer&&this._activeResizer.updateSize(t)}_mouseUpListener(){this._activeResizer&&(this._activeResizer.commit(),this._activeResizer=null)}};var Du=class extends _r{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(e){super(e);let t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(r){return(o,s)=>{s.preventDefault();let a=s.dropRange?[s.dropRange]:null,l=new Ri(t,r);t.fire(l,{dataTransfer:s.dataTransfer,method:o.name,targetRanges:a,target:s.target,domEvent:s.domEvent}),l.stop.called&&s.stopPropagation()}}}onDomEvent(e){let t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",r={dataTransfer:new Kg(t,{cacheFiles:i})};if(e.type=="drop"||e.type=="dragover"){let o=U1(e);r.dropRange=o&&this.view.domConverter.domRangeToView(o)}this.fire(e.type,e,r)}};function Bbe(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}function Ube(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}var WH=["figcaption","li"],qH=["ol","ul"];function ZH(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return`
`;let e="",t=null;for(let i of n.getChildren())e+=Hbe(i,t)+ZH(i),t=i;return e}function Hbe(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||qH.includes(n.name)&&qH.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":WH.includes(n.name)||WH.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}var _b=class extends k{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=r=>r.model.getSelectedContent(r.model.document.selection)){return this.editor.model.change(r=>{let o=r.model.document.selection;r.setSelection(t);let s=this._insertFakeMarkersIntoSelection(r,r.model.document.selection,e),a=i(r),l=this._removeFakeMarkersInsideElement(r,a);for(let[c,u]of Object.entries(s)){l[c]||=r.createRangeIn(a);for(let h of u)r.remove(h)}a.markers.clear();for(let[c,u]of Object.entries(l))a.markers.set(c,u);return r.setSelection(o),a})}_pasteMarkersIntoTransformedElement(e,t){let i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(r=>{let o=this._insertFakeMarkersElements(r,i),s=t(r),a=this._removeFakeMarkersInsideElement(r,s);for(let l of Object.values(o).flat())r.remove(l);for(let[l,c]of Object.entries(a))r.model.markers.has(l)||r.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return s})}_pasteFragmentWithMarkers(e){let t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(let i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){let r=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),r?this._markersToCopy.set(e,r):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){let i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;let{allowedActions:r}=i;return r==="all"||r.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){let[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){let r=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,r)}_getCopyableMarkersFromSelection(e,t,i){let r=Array.from(t.getRanges()),o=new Set(r.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),s=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;let{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){let u=a.getRange();return r.some(h=>h.containsRange(u,!0))}return!0};return Array.from(o).filter(s).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){let{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([o,s])=>{if(!this._hasMarkerConfiguration(o))return[{name:o,range:s}];if(this._isMarkerCopyable(o,t)){let a=this._getMarkerClipboardConfig(o),l=i.markers.has(o)&&i.markers.get(o).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(o=this._getUniqueMarkerName(o)),[{name:o,range:s}]}return[]})}_insertFakeMarkersElements(e,t){let i={},r=t.flatMap(o=>{let{start:s,end:a}=o.range;return[{position:s,marker:o,type:"start"},{position:a,marker:o,type:"end"}]}).sort(({position:o},{position:s})=>o.isBefore(s)?1:-1);for(let{position:o,marker:s,type:a}of r){let l=e.createElement("$marker",{"data-name":s.name,"data-type":a});i[s.name]||(i[s.name]=[]),i[s.name].push(l),e.insert(l,o)}return i}_removeFakeMarkersInsideElement(e,t){let r=this._getAllFakeMarkersFromElement(e,t).reduce((o,s)=>{let a=s.markerElement&&e.createPositionBefore(s.markerElement),l=o[s.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(s.name).duplicateOnPaste?o[this._getUniqueMarkerName(s.name)]=o[s.name]:c=!0,l=null),c||(o[s.name]=P(v({},l),{[s.type]:a})),s.markerElement&&e.remove(s.markerElement),o},{});return wx(r,o=>new I(o.start||e.createPositionFromPath(t,[0]),o.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){let i=Array.from(e.createRangeIn(t)).flatMap(({item:s})=>{if(!s.is("element","$marker"))return[];let a=s.getAttribute("data-name"),l=s.getAttribute("data-type");return[{markerElement:s,name:a,type:l}]}),r=[],o=[];for(let s of i)s.type==="end"&&(i.some(l=>l.name===s.name&&l.type==="start")||r.push({markerElement:null,name:s.name,type:"start"})),s.type==="start"&&(i.some(l=>l.name===s.name&&l.type==="end")||o.unshift({markerElement:null,name:s.name,type:"end"}));return[...r,...i,...o]}_getUniqueMarkerName(e){let t=e.split(":"),i=Xt().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}},on=class extends k{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[_b]}init(){this.editor.editing.view.addObserver(Du),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){let r=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{let o=r._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:o,method:i})})}_setupPasteDrop(){let e=this.editor,t=e.model,i=e.editing.view,r=i.document,o=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(r,"clipboardInput",(s,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&s.stop()},{priority:"highest"}),this.listenTo(r,"clipboardInput",(s,a)=>{let l=a.dataTransfer,c;if(a.content)c=a.content;else{let h="";l.getData("text/html")?h=Ube(l.getData("text/html")):l.getData("text/plain")&&(h=Bbe(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(h)}let u=new Ri(this,"inputTransformation");this.fire(u,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),u.stop.called&&s.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(s,a)=>{if(a.content.isEmpty)return;let c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(s.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(s,a)=>{a.resultRange=o._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){let e=this.editor,t=e.model.document,r=e.editing.view.document,o=(s,a)=>{let l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,s.name)};this.listenTo(r,"copy",o,{priority:"low"}),this.listenTo(r,"cut",(s,a)=>{e.model.canEditAt(e.model.document.selection)?o(s,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(s,a)=>{let l=e.data.toView(a.content);r.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(r,"clipboardOutput",(s,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",ZH(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}},n2=$s("px"),i2=class extends Y{constructor(){super();let e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>n2(t)),top:e.to("top",t=>n2(t)),width:e.to("width",t=>n2(t))}}})}},Gf=class extends k{removeDropMarkerDelayed=mf(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=No(e=>this._updateDropMarker(e),40);_reconvertMarkerThrottled=No(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new i2;_domEmitter=new(en());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(let{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,r,o,s){this.removeDropMarkerDelayed.cancel();let a=GH(this.editor,e,t,i,r,o,s);if(a){if(s&&s.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,i,r,o,s){let a=GH(this.editor,e,t,i,r,o,s);return this.removeDropMarker(),a}removeDropMarker(){let e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){let e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){let t=this.editor,i=t.model.markers;t.model.change(r=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||r.updateMarker("drop-target",{range:e}):r.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){let i=this.toDomElement(t);return i.append("\u2060",t.createElement("span"),"\u2060"),i})}_updateDropTargetLine(e){let t=this.editor.editing,i=e.start.nodeBefore,r=e.start.nodeAfter,o=e.start.parent,s=i?t.mapper.toViewElement(i):null,a=s?t.view.domConverter.mapViewToDom(s):null,l=r?t.mapper.toViewElement(r):null,c=l?t.view.domConverter.mapViewToDom(l):null,u=t.mapper.toViewElement(o);if(!u)return;let h=t.view.domConverter.mapViewToDom(u),p=this._getScrollableRect(u),{scrollX:g,scrollY:w}=j.window,y=a?new pe(a):null,E=c?new pe(c):null,T=new pe(h).excludeScrollbarsAndBorders(),x=y?y.bottom:T.top,V=E?E.top:T.bottom,Q=j.window.getComputedStyle(h),he=x<=V?(x+V)/2:V;if(p.top<he&&he<p.bottom){let N=T.left+parseFloat(Q.paddingLeft),$=T.right-parseFloat(Q.paddingRight),H=Math.max(N+g,p.left),qe=Math.min($+g,p.right);this._dropTargetLineView.set({isVisible:!0,left:H,top:he+w,width:qe-H})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){let t=e.root.rootName,i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{let r=this.editor.editing.view.domConverter.mapViewToDom(e);i=jbe(r),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});let o=new df(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:o})}return new pe(i).excludeScrollbarsAndBorders()}};function GH(n,e,t,i,r,o,s){let a=n.model,l=n.editing.mapper,u=KH(n,e);for(;u;){if(!o){if(a.schema.checkChild(u,"$text")){if(t){let h=t[0].start,p=l.toModelPosition(h);if(!s||Array.from(s.getItems()).every(w=>a.schema.checkChild(p,w))){if(a.schema.checkChild(p,"$text"))return a.createRange(p);if(h)return V_(n,KH(n,h.parent),i,r)}}}else if(a.schema.isInline(u))return V_(n,u,i,r)}if(a.schema.isBlock(u))return V_(n,u,i,r);if(a.schema.checkChild(u,"$block")){let h=Array.from(u.getChildren()).filter(w=>w.is("element")&&!zbe(n,w)),p=0,g=h.length;if(g==0)return a.createRange(a.createPositionAt(u,"end"));for(;p<g-1;){let w=Math.floor((p+g)/2);JH(n,h[w],i,r)=="before"?g=w:p=w}return V_(n,h[p],i,r)}u=u.parent}return null}function zbe(n,e){let t=n.editing.mapper,i=n.editing.view.domConverter,r=t.toViewElement(e);if(!r)return!0;let o=i.mapViewToDom(r);return j.window.getComputedStyle(o).float!="none"}function V_(n,e,t,i){let r=n.model;return r.createRange(r.createPositionAt(e,JH(n,e,t,i)))}function JH(n,e,t,i){let r=n.editing.mapper,o=n.editing.view.domConverter,s=r.toViewElement(e),a=o.mapViewToDom(s),l=new pe(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function KH(n,e){let t=n.editing.mapper,i=n.editing.view,r=t.toModelElement(e);if(r)return r;let o=i.createPositionBefore(e),s=t.findMappedViewAncestor(o);return t.toModelElement(s)}function jbe(n){let e=n;do{e=e.parentElement;let t=j.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}var r2=class extends k{_isBlockDragging=!1;_domEmitter=new(en());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,r)=>{r?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),se.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){let i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(r,o)=>this._handleBlockDragStart(o)),this._domEmitter.listenTo(j.document,"dragover",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(j.document,"drop",(r,o)=>this._handleBlockDragging(o)),this._domEmitter.listenTo(j.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(r,o,s)=>{i.setAttribute("draggable",s?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;let t=this.editor.model,i=t.document.selection,r=this.editor.editing.view,o=Array.from(i.getSelectedBlocks()),s=t.createRange(t.createPositionBefore(o[0]),t.createPositionAfter(o[o.length-1]));t.change(a=>a.setSelection(s)),this._isBlockDragging=!0,r.focus(),r.getObserver(Du).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;let t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,r=document.elementFromPoint(t,i),o=this.editor.editing.view;!r||!r.closest(".ck-editor__editable")||o.getObserver(Du).onDomEvent(P(v({},e),{type:e.type,dataTransfer:e.dataTransfer,target:r,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()}))}_handleBlockDragEnd(){this._isBlockDragging=!1}},o2=class extends k{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=mf(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(en());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[on,Yn,Gf,r2]}init(){let e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(Du),t.addObserver(Ks),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,r,o)=>{o?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,r,o)=>{o||this._finalizeDragging(!1)}),se.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){let e=this.editor,t=e.model,i=e.editing.view,r=i.document,o=e.plugins.get(Gf);this.listenTo(r,"dragstart",(s,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=Xt(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);let l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");let{dataTransfer:u,domTarget:h,domEvent:p}=a,{clientX:g}=p;this._updatePreview({dataTransfer:u,domTarget:h,clientX:g}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(r,"dragend",(s,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(j.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(r,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(r,"dragleave",()=>{o.removeDropMarkerDelayed()}),this.listenTo(r,"dragging",(s,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}let{clientX:l,clientY:c}=a.domEvent;o.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),se.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),s.stop()},{priority:"low"})}_setupClipboardInputIntegration(){let e=this.editor,i=e.editing.view.document,r=e.plugins.get(Gf);this.listenTo(i,"clipboardInput",(o,s)=>{if(s.method!="drop")return;let{clientX:a,clientY:l}=s.domEvent,c=r.getFinalDropRange(s.target,s.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),o.stop();return}if(this._draggedRange&&this._draggingUid!=s.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),YH(s.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),o.stop();return}s.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){let e=this.editor.plugins.get(on);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let r=i.targetRanges.map(o=>this.editor.editing.mapper.toModelRange(o));this.editor.model.change(o=>o.setSelection(r))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let r=YH(i.dataTransfer)=="move",o=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(o&&r)},{priority:"lowest"})}_setupDraggableAttributeHandling(){let e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(r,o)=>{if(se.isAndroid||!o)return;this._clearDraggableAttributesDelayed.cancel();let s=QH(o.target);if(se.isBlink&&!e.isReadOnly&&!s&&!i.selection.isCollapsed){let a=i.selection.getSelectedElement();(!a||!Tt(a))&&(s=i.selection.editableElement)}s&&(t.change(a=>{a.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(i,"mouseup",()=>{se.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){let e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){let t=this.editor,i=t.model;t.plugins.get(Gf).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(o=>{let s=i.createSelection(this._draggedRange);i.deleteContent(s,{doNotAutoparagraph:!0});let a=s.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&o.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){let t=this.editor,i=t.model,r=i.document.selection,o=e?QH(e):null;if(o){let c=t.editing.mapper.toModelElement(o);this._draggedRange=En.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(r.isCollapsed&&!r.getFirstPosition().parent.isEmpty)return;let s=Array.from(r.getSelectedBlocks()),a=r.getFirstRange();if(s.length==0){this._draggedRange=En.fromRange(a);return}let l=XH(i,s);if(s.length>1)this._draggedRange=En.fromRange(l),this._blockMode=!0;else if(s.length==1){let c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=En.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){let r=this.editor.editing.view,o=r.document.selection.editableElement,s=r.domConverter.mapViewToDom(o),a=j.window.getComputedStyle(s);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Mt(j.document,"div",{style:"position: fixed; left: -999999px;"}),j.document.body.appendChild(this._previewContainer));let l=new pe(s);if(s.contains(t))return;let c=parseFloat(a.paddingLeft),u=Mt(j.document,"div");u.className="ck ck-content",u.style.width=a.width,u.style.paddingLeft=`${l.left-i+c}px`,se.isiOS&&(u.style.backgroundColor="white"),r.domConverter.setContentOf(u,e.getData("text/html")),e.setDragImage(u,0,0),this._previewContainer.appendChild(u)}};function YH(n){return se.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function QH(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Tt);if(Tt(n))return n;let e=n.findAncestor(t=>Tt(t)||t.is("editableElement"));return Tt(e)?e:null}function XH(n,e){let t=e[0],i=e[e.length-1],r=t.getCommonAncestor(i),o=n.createPositionBefore(t),s=n.createPositionAfter(i);if(r&&r.is("element")&&!n.schema.isLimit(r)){let a=n.createRangeOn(r),l=o.isTouching(a.start),c=s.isTouching(a.end);if(l&&c)return XH(n,[r])}return n.createRange(o,s)}var s2=class extends k{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[on]}init(){let e=this.editor,t=e.model,i=e.editing.view,r=t.document.selection;i.addObserver(Du),e.plugins.get(on).on("contentInsertion",(o,s)=>{$be(s.content,t)&&t.change(a=>{let l=Array.from(r.getAttributes()).filter(([u])=>t.schema.getAttributeProperties(u).isFormatting);r.isCollapsed||t.deleteContent(r,{doNotAutoparagraph:!0}),l.push(...r.getAttributes());let c=a.createRangeIn(s.content);for(let u of c.getItems())for(let h of l)t.schema.checkAttribute(u,h[0])&&a.setAttribute(h[0],h[1],u)})})}};function $be(n,e){let t=e.createRangeIn(n);if(n.childCount==1){let i=n.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(t=e.createRangeIn(i))}for(let i of t.getItems())if(!e.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(o=>e.schema.getAttributeProperties(o).isFormatting))return!1;return!0}var Mu=class extends k{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[_b,on,o2,s2]}init(){let e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}};function B_(n){let e=n.t,t=n.config.get("codeBlock.languages");for(let i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function U_(n,e,t){let i={};for(let r of n)if(e==="class"){let o=r[e].split(" ").shift();i[o]=r[t]}else i[r[e]]=r[t];return i}function m2(n){return n.data.match(/^(\s*)/)[0]}function Wbe(n,e){let t=n.createDocumentFragment(),i=e.split(`
`),r=i.reduce((o,s,a)=>(o.push(s),a<i.length-1&&o.push(n.createElement("br")),o),[]);return n.appendChild(r,t),t}function l2(n){let e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];let i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(let{item:r}of i){let o=r.is("$textProxy")?r.textNode:r,s=o.parent;if(!s.is("element","codeBlock")||o.is("element","softBreak"))continue;for(;o.previousSibling&&!o.previousSibling.is("element","softBreak");)o=o.previousSibling;let a=o.is("$text")?o.startOffset+m2(o).length:o.startOffset,l=n.createPositionAt(s,a);t.every(c=>!c.isEqual(l))&&t.push(l)}return t}function rz(n){let e=it(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function ez(n,e){return e.is("rootElement")||n.isLimit(e)?!1:n.checkChild(e.parent,"codeBlock")}function tz(n,e,t,i){let r=U_(e,"language","label"),o=t.getAttribute("language");if(o in r){let s=r[o];return n(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",s)}return n(i==="enter"?"Entering code snippet":"Leaving code snippet")}function oz(n,e){for(n.textNode&&(n=e.createPositionBefore(n.textNode));n.nodeBefore&&!n.nodeBefore.is("element","softBreak");)n=e.createPositionBefore(n.nodeBefore);let t=n.nodeAfter;return t&&t.is("$text")?t:null}var c2=class extends J{_lastLanguage;constructor(e){super(e),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){let t=this.editor,i=t.model,r=i.document.selection,s=B_(t)[0],a=Array.from(r.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,c=qbe(e,this._lastLanguage,s.language);i.change(u=>{l?this._applyCodeBlock(u,a,c):this._removeCodeBlock(u,a)})}_getValue(){let e=this.editor.model.document.selection,t=it(e.getSelectedBlocks());return!!(t&&t.is("element","codeBlock"))?t.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;let e=this.editor.model.document.selection,t=this.editor.model.schema,i=it(e.getSelectedBlocks());return i?ez(t,i):!1}_applyCodeBlock(e,t,i){this._lastLanguage=i;let r=this.editor.model.schema,o=t.filter(s=>ez(r,s));for(let s of o)e.rename(s,"codeBlock"),e.setAttribute("language",i,s),r.removeDisallowedAttributes([s],e),Array.from(s.getChildren()).filter(a=>!r.checkChild(s,a)).forEach(a=>e.remove(a));o.reverse().forEach((s,a)=>{let l=o[a+1];s.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(s)))})}_removeCodeBlock(e,t){let i=t.filter(r=>r.is("element","codeBlock"));for(let r of i){let o=e.createRangeOn(r);for(let s of Array.from(o.getItems()).reverse())if(s.is("element","softBreak")&&s.parent.is("element","codeBlock")){let{position:a}=e.split(e.createPositionBefore(s)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(s)}e.rename(r,"paragraph"),e.removeAttribute("language",r)}}};function qbe(n,e,t){return n.language?n.language:n.usePreviousLanguageChoice&&e?e:t}var u2=class extends J{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){let t=this.editor.model;t.change(i=>{let r=l2(t);for(let o of r){let s=i.createText(this._indentSequence);t.insertContent(s,o)}})}_checkEnabled(){return this._indentSequence?rz(this.editor.model.document.selection):!1}},d2=class extends J{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){let t=this.editor.model;t.change(()=>{let i=l2(t);for(let r of i){let o=nz(t,r,this._indentSequence);o&&t.deleteContent(t.createSelection(o))}})}_checkEnabled(){if(!this._indentSequence)return!1;let e=this.editor.model;return rz(e.document.selection)?l2(e).some(t=>nz(e,t,this._indentSequence)):!1}};function nz(n,e,t){let i=oz(e,n);if(!i)return null;let r=m2(i),o=r.lastIndexOf(t);if(o+t.length!==r.length||o===-1)return null;let{parent:s,startOffset:a}=i;return n.createRange(n.createPositionAt(s,a+o),n.createPositionAt(s,a+o+t.length))}function iz(n,e,t=!1){let i=U_(e,"language","class"),r=U_(e,"language","label");return(o,s,a)=>{let{writer:l,mapper:c,consumable:u}=a;if(!u.consume(s.item,"insert"))return;let h=s.item.getAttribute("language"),p=c.toViewPosition(n.createPositionBefore(s.item)),g={};t&&(g["data-language"]=r[h],g.spellcheck="false");let w=i[h]?{class:i[h]}:void 0,y=l.createContainerElement("code",w),E=l.createContainerElement("pre",g,y);l.insert(p,E),c.bindElements(s.item,y)}}function Gbe(n){return(e,t,i)=>{if(t.item.parent.name!=="codeBlock")return;let{writer:r,mapper:o,consumable:s}=i;if(!s.consume(t.item,"insert"))return;let a=o.toViewPosition(n.createPositionBefore(t.item));r.insert(a,r.createText(`
`))}}function Kbe(n,e){let t=U_(e,"class","language"),i=e[0].language;return(r,o,s)=>{let a=o.viewItem,l=a.parent;if(!l||!l.is("element","pre")||o.modelCursor.findAncestor("codeBlock"))return;let{consumable:c,writer:u}=s;if(!c.test(a,{name:!0}))return;let h=u.createElement("codeBlock"),p=[...a.getClassNames()];p.length||p.push("");for(let g of p){let w=t[g];if(w){u.setAttribute("language",w,h);break}}h.hasAttribute("language")||u.setAttribute("language",i,h),s.convertChildren(a,h),s.safeInsert(h,o.modelCursor)&&(c.consume(a,{name:!0}),s.updateConversionResult(h,o))}}function Ybe(){return(n,e,{consumable:t,writer:i})=>{let r=e.modelCursor;if(!t.test(e.viewItem)||!r.findAncestor("codeBlock"))return;t.consume(e.viewItem);let s=e.viewItem.data.split(`
`).map(l=>i.createText(l)),a=s[s.length-1];for(let l of s)if(i.insert(l,r),r=r.getShiftedBy(l.offsetSize),l!==a){let c=i.createElement("softBreak");i.insert(c,r),r=i.createPositionAfter(c)}e.modelRange=i.createRange(e.modelCursor,r),e.modelCursor=r}}function Qbe(){return(n,e,{consumable:t})=>{let i=e.viewItem;if(i.findAncestor("pre"))return;let r=Array.from(i.getChildren()),o=r.find(s=>s.is("element","code"));if(o)for(let s of r)s===o||!s.is("$text")||t.consume(s,{name:!0})}}var sz="paragraph",h2=class extends k{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Wf]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){let e=this.editor,t=e.model.schema,i=e.model,r=e.editing.view,o=B_(e);e.commands.add("codeBlock",new c2(e)),e.commands.add("indentCodeBlock",new u2(e)),e.commands.add("outdentCodeBlock",new d2(e)),this.listenTo(r.document,"tab",(s,a)=>{let l=a.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(l).isEnabled&&(e.execute(l),a.stopPropagation(),a.preventDefault(),s.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((s,a)=>{let l=s.getItem(s.length-2);if(t.getAttributeProperties(a).isFormatting&&l&&l.name=="codeBlock")return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",iz(i,o,!0)),e.data.downcastDispatcher.on("insert:codeBlock",iz(i,o)),e.data.downcastDispatcher.on("insert:softBreak",Gbe(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",Kbe(r,o)),e.data.upcastDispatcher.on("text",Ybe()),e.data.upcastDispatcher.on("element:pre",Qbe(),{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(s,a)=>{let l=i.createRange(i.document.selection.anchor);if(a.targetRanges&&(l=e.editing.mapper.toModelRange(a.targetRanges[0])),!l.start.parent.is("element","codeBlock"))return;let c=a.dataTransfer.getData("text/plain"),u=new Zr(e.editing.view.document);a.content=Wbe(u,c)}),e.plugins.has("ClipboardPipeline")&&e.plugins.get(on).on("contentInsertion",(s,a)=>{let l=e.model,c=l.document.selection;c.anchor.parent.is("element","codeBlock")&&l.change(u=>{let h=u.createRangeIn(a.content);for(let p of[...h.getItems()])p.is("node")&&!t.checkChild(c.anchor,p)&&u.remove(p)})}),this.listenTo(i,"getSelectedContent",(s,[a])=>{let l=a.anchor;a.isCollapsed||!l.parent.is("element","codeBlock")||!l.hasSameParentAs(a.focus)||i.change(c=>{let u=s.return;if(l.parent.is("element")&&(u.childCount>1||a.containsEntireContent(l.parent))){let p=c.createElement("codeBlock",l.parent.getAttributes());c.append(u,p);let g=c.createDocumentFragment();c.append(p,g),s.return=g;return}let h=u.getChild(0);t.checkAttribute(h,"code")&&c.setAttribute("code",!0,h)})})}afterInit(){let e=this.editor,t=e.commands,i=t.get("indent"),r=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),r&&r.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(o,s)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!Jbe(e,s.isSoft)&&!Xbe(e,s.isSoft)&&Zbe(e),s.preventDefault(),o.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){let{model:e,ui:t,t:i}=this.editor,r=B_(this.editor),o=null;e.document.selection.on("change:range",()=>{let s=e.document.selection.focus.parent;!t||o===s||!s.is("element")||(o&&o.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(tz(i,r,o,"leave")),s.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(tz(i,r,s,"enter")),o=s)})}};function Zbe(n){let e=n.model,t=e.document,i=t.selection.getLastPosition(),r,o=oz(i,e);o&&o.is("$text")&&(r=m2(o)),n.model.change(s=>{n.execute("shiftEnter"),r&&s.insertText(r,t.selection.anchor)})}function Jbe(n,e){let i=n.model.document,r=n.editing.view,o=i.selection.getLastPosition(),s=o.nodeAfter;return e||!i.selection.isCollapsed||!o.isAtStart||!Ou(s)?!1:(n.model.change(a=>{n.execute("enter");let l=i.selection.anchor.parent.previousSibling;a.rename(l,sz),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(s)}),r.scrollToTheSelection(),!0)}function Xbe(n,e){let t=n.model,i=t.document,r=n.editing.view,o=i.selection.getLastPosition(),s=o.nodeBefore,a;if(e||!i.selection.isCollapsed||!o.isAtEnd||!s||!s.previousSibling)return!1;if(Ou(s)&&Ou(s.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling),t.createPositionAfter(s));else if(a2(s)&&Ou(s.previousSibling)&&Ou(s.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling.previousSibling),t.createPositionAfter(s));else if(a2(s)&&Ou(s.previousSibling)&&a2(s.previousSibling.previousSibling)&&s.previousSibling.previousSibling&&Ou(s.previousSibling.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling.previousSibling.previousSibling),t.createPositionAfter(s));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");let c=i.selection.anchor.parent;l.rename(c,sz),n.model.schema.removeDisallowedAttributes([c],l)}),r.scrollToTheSelection(),!0}function a2(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function Ou(n){return n&&n.is("element","softBreak")}var f2=class extends k{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,i=e.ui.componentFactory,r=B_(e),o=this._getLanguageListItemDefinitions(r),s=e.commands.get("codeBlock");i.add("codeBlock",a=>{let l=rn(a,Sr),c=l.buttonView,u=t("Insert code block");return c.set({label:u,tooltip:!0,icon:U.codeBlock,isToggleable:!0}),c.bind("isOn").to(s,"value",h=>!!h),c.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),l.on("execute",h=>{e.execute("codeBlock",{language:h.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(s),to(l,o,{role:"menu",ariaLabel:u}),l}),i.add("menuBar:codeBlock",a=>{let l=new On(a);l.buttonView.set({role:"menuitem",label:t("Code block"),icon:U.codeBlock}),l.bind("isEnabled").to(s);let c=new Gn(a);c.set({ariaLabel:t("Insert code block")});for(let u of o){let h=new Nn(a,l),p=new ye(a);p.bind(...Object.keys(u.model)).to(u.model),p.set({isToggleable:!0,role:"menuitemcheckbox"}),p.delegate("execute").to(l),p.on("execute",()=>{e.execute("codeBlock",{language:u.model._codeBlockLanguage,forceValue:s.value!=u.model._codeBlockLanguage}),e.editing.view.focus()}),h.children.add(p),c.items.add(h)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(e){let i=this.editor.commands.get("codeBlock"),r=new ut;for(let o of e){let s={type:"button",model:new Oi({_codeBlockLanguage:o.language,label:o.label,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(i,"value",a=>a===s.model._codeBlockLanguage),r.add(s)}return r}},H_=class extends k{static get requires(){return[h2,f2]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}};var g2=class extends Sl{view;_toolbarConfig;_elementReplacer;constructor(e,t){super(e),this.view=t,this._toolbarConfig=k_(e.config.get("toolbar")),this._elementReplacer=new lf,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){let t=this.editor,i=this.view,r=t.editing.view,o=i.editable,s=r.document.getRoot();o.name=s.rootName,i.render();let a=o.element;this.setEditableElement(o.name,a),i.editable.bind("isFocused").to(this.focusTracker),r.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&this._initMenuBar(i.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();let e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){let e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){let e=this.editor,t=e.editing.view,i=t.document.getRoot(),r=e.sourceElement,o,s=e.config.get("placeholder");s&&(o=typeof s=="string"?s:s[this.view.editable.name]),!o&&r&&r.tagName.toLowerCase()==="textarea"&&(o=r.getAttribute("placeholder")),o&&(i.placeholder=o),zo({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;let{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",r=>{let o=r.return;if(!o||!e.isSticky||!e.element)return;let s=new pe(e.element).height,a=typeof o.target=="function"?o.target():o.target,l=typeof o.limiter=="function"?o.limiter():o.limiter;if(a&&l&&new pe(a).height>=new pe(l).height-s)return;let c=v({},o.viewportOffsetConfig),u=(c.top||0)+s;r.return=P(v({},o),{viewportOffsetConfig:P(v({},c),{top:u})})},{priority:"low"});let i=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",i),this.listenTo(this.editor.ui,"change:viewportOffset",i)}_handleScrollToTheSelectionWithStickyPanel(e,t,i){let r=this.view.stickyPanel;if(r.isSticky){let o=new pe(r.element).height;t.viewportOffset.top+=o}else{let o=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(r,"change:isSticky",o),setTimeout(()=>{this.stopListening(r,"change:isSticky",o)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;let e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{let i=t.view;i.on("moveTo",(r,o)=>{if(!e.isSticky||i.wasMoved)return;let s=new pe(e.contentPanelElement);o[1]<s.bottom+S_.defaultOffset&&(o[1]=s.bottom+S_.defaultOffset)},{priority:"high"})},{priority:"low"})}},b2=class extends C_{stickyPanel;toolbar;editable;constructor(e,t,i={}){super(e),this.stickyPanel=new E_(e),this.toolbar=new eo(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new kl(e)),this.editable=new Tl(e,t,void 0,{label:i.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}},j_=class extends Tu(If){ui;constructor(e,t={}){if(!z_(e)&&t.initialData!==void 0)throw new C("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",ewe(e)),z_(e)&&(this.sourceElement=e),this.model.document.createRoot();let i=!this.config.get("toolbar.shouldNotGroupWhenFull"),r=this.config.get("menuBar"),o=new b2(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:r.isVisible,label:this.config.get("label")});this.ui=new g2(this,o),c_(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{let r=new this(e,t);i(r.initPlugins().then(()=>r.ui.init(z_(e)?e:null)).then(()=>r.data.init(r.config.get("initialData"))).then(()=>r.fire("ready")).then(()=>r))})}};function ewe(n){return z_(n)?uf(n):n}function z_(n){return Ki(n)}var w2=class extends J{constructor(e){super(e),this.affectsData=!1}execute(){let e=this.editor.model,t=e.document.selection,i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!az(e.schema,i))do if(i=i.parent,!i)return;while(!az(e.schema,i));e.change(r=>{r.setSelection(i,"in")})}};function az(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}var twe=Mg("Ctrl+A"),v2=class extends k{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,r=e.editing.view.document;e.commands.add("selectAll",new w2(e)),this.listenTo(r,"keydown",(o,s)=>{js(s)===twe&&(e.execute("selectAll"),s.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}},nwe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',y2=class extends k{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.ui.componentFactory.add("selectAll",()=>{let t=this._createButton(te);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(ye))}_createButton(e){let t=this.editor,i=t.locale,r=t.commands.get("selectAll"),o=new e(t.locale),s=i.t;return o.set({label:s("Select all"),icon:nwe,keystroke:"Ctrl+A"}),o.bind("isEnabled").to(r,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),o}},$_=class extends k{static get requires(){return[v2,y2]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}};var W_=class extends J{_stack=[];_createdBatches=new WeakSet;constructor(e){super(e),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]=v({},i[1]);let r=i[1];r.batchType||(r.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){let t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){let r=this.editor.model,o=r.document,s=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(let c of a){let u=c.filter(h=>h.root!=o.graveyard).filter(h=>!rwe(h,l));u.length&&(iwe(u),s.push(u[0]))}s.length&&r.change(c=>{c.setSelection(s,{backward:t})})}_undo(e,t){let i=this.editor.model,r=i.document;this._createdBatches.add(t);let o=e.operations.slice().filter(s=>s.isDocumentOperation);o.reverse();for(let s of o){let a=s.baseVersion+1,l=Array.from(r.history.getOperations(a)),u=SU([s.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let h of u){let p=h.affectedSelectable;p&&!i.canEditAt(p)&&(h=new tn(h.baseVersion)),t.addOperation(h),i.applyOperation(h),r.history.setOperationAsUndone(s,h)}}}};function iwe(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){let i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function rwe(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}var _2=class extends W_{execute(e=null){let t=e?this._stack.findIndex(o=>o.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,()=>{this._undo(i.batch,r);let o=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,o)}),this.fire("revert",i.batch,r),this.refresh()}},C2=class extends W_{execute(){let e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{let r=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=this.editor.model.document.history.getOperations(r);this._restoreSelection(e.selection.ranges,e.selection.isBackward,o),this._undo(e.batch,t)}),this.refresh()}},E2=class extends k{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t;this._undoCommand=new _2(e),this._redoCommand=new C2(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,r)=>{let o=r[0];if(!o.isDocumentOperation)return;let s=o.batch,a=this._redoCommand.createdBatches.has(s),l=this._undoCommand.createdBatches.has(s);this._batchRegistry.has(s)||(this._batchRegistry.add(s),s.isUndoable&&(a?this._undoCommand.addBatch(s):l||(this._undoCommand.addBatch(s),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,r,o)=>{this._redoCommand.addBatch(o)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}},S2=class extends k{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale,i=e.t,r=t.uiLanguageDirection=="ltr"?U.undo:U.redo,o=t.uiLanguageDirection=="ltr"?U.redo:U.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",r),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",o)}_addButtonsToFactory(e,t,i,r){let o=this.editor;o.ui.componentFactory.add(e,()=>{let s=this._createButton(te,e,t,i,r);return s.set({tooltip:!0}),s}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(ye,e,t,i,r))}_createButton(e,t,i,r,o){let s=this.editor,a=s.locale,l=s.commands.get(t),c=new e(a);return c.set({label:i,icon:o,keystroke:r}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{s.execute(t),s.editing.view.focus()}),c}},Xs=class extends k{static get requires(){return[E2,S2]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}};var q_=class extends k{static get requires(){return[v_,Mu,no,$_,Wf,bb,Xs]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}};var T2=class extends J{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){let e=this.editor.model,t=e.document,i=it(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&lz(i,e.schema)}execute(e={}){let t=this.editor.model,i=t.document,r=e.selection||i.selection;t.canEditAt(r)&&t.change(o=>{let s=r.getSelectedBlocks();for(let a of s)!a.is("element","paragraph")&&lz(a,t.schema)&&o.rename(a,"paragraph")})}};function lz(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}var k2=class extends J{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){let t=this.editor.model,i=e.attributes,r=e.position;t.canEditAt(r)&&t.change(o=>{if(r=this._findPositionToInsertParagraph(r,o),!r)return;let s=o.createElement("paragraph");i&&t.schema.setAllowedAttributes(s,i,o),t.insertContent(s,r),o.setSelection(s,"in")})}_findPositionToInsertParagraph(e,t){let i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;let r=i.schema.findAllowedParent(e,"paragraph");if(!r)return null;let o=e.parent,s=i.schema.checkChild(o,"$text");return o.isEmpty||s&&e.isAtEnd?i.createPositionAfter(o):!o.isEmpty&&s&&e.isAtStart?i.createPositionBefore(o):t.split(e,r).position}},Kf=class n extends k{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model;e.commands.add("paragraph",new T2(e)),e.commands.add("insertParagraph",new k2(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:r})=>!n.paragraphLikeElements.has(i.name)||i.isEmpty?null:r.createElement("paragraph"),view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])};var A2=class extends J{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){let e=it(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>cz(e,t,this.editor.model.schema))}execute(e){let t=this.editor.model,i=t.document,r=e.value;t.change(o=>{let s=Array.from(i.selection.getSelectedBlocks()).filter(a=>cz(a,r,t.schema));for(let a of s)a.is("element",r)||o.rename(a,r)})}};function cz(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}var uz="paragraph",I2=class extends k{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Kf]}init(){let e=this.editor,t=e.config.get("heading.options"),i=[];for(let r of t)r.model!=="paragraph"&&(e.model.schema.register(r.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(r),i.push(r.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new A2(e,i))}afterInit(){let e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(r,o)=>{let s=e.model.document.selection.getFirstPosition().parent;i.some(l=>s.is("element",l.model))&&!s.is("element",uz)&&s.childCount===0&&o.writer.rename(s,uz)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:Rn.low+1})}};function dwe(n){let e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{let r=t[i.title];return r&&r!=i.title&&(i.title=r),i})}var x2=class extends k{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,i=dwe(e),r=t("Choose heading"),o=t("Heading");e.ui.componentFactory.add("heading",s=>{let a={},l=new ut,c=e.commands.get("heading"),u=e.commands.get("paragraph"),h=[c];for(let g of i){let w={type:"button",model:new Oi({label:g.title,class:g.class,role:"menuitemradio",withText:!0})};g.model==="paragraph"?(w.model.bind("isOn").to(u,"value"),w.model.set("commandName","paragraph"),h.push(u)):(w.model.bind("isOn").to(c,"value",y=>y===g.model),w.model.set({commandName:"heading",commandValue:g.model})),l.add(w),a[g.model]=g.title}let p=rn(s);return to(p,l,{ariaLabel:o,role:"menu"}),p.buttonView.set({ariaLabel:o,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:o}),p.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),p.bind("isEnabled").toMany(h,"isEnabled",(...g)=>g.some(w=>w)),p.buttonView.bind("label").to(c,"value",u,"value",(g,w)=>{let y=w?"paragraph":g;return typeof y=="boolean"||!a[y]?r:a[y]}),p.buttonView.bind("ariaLabel").to(c,"value",u,"value",(g,w)=>{let y=w?"paragraph":g;return typeof y=="boolean"||!a[y]?o:`${a[y]}, ${o}`}),this.listenTo(p,"execute",g=>{let{commandName:w,commandValue:y}=g.source;e.execute(w,y?{value:y}:void 0),e.editing.view.focus()}),p}),e.ui.componentFactory.add("menuBar:heading",s=>{let a=new On(s),l=e.commands.get("heading"),c=e.commands.get("paragraph"),u=[l],h=new Gn(s);a.set({class:"ck-heading-dropdown"}),h.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(h);for(let p of i){let g=new Nn(s,a),w=new ye(s);g.children.add(w),h.items.add(g),w.set({isToggleable:!0,label:p.title,role:"menuitemradio",class:p.class}),w.delegate("execute").to(a),w.on("execute",()=>{let y=p.model==="paragraph"?"paragraph":"heading";e.execute(y,{value:p.model}),e.editing.view.focus()}),p.model==="paragraph"?(w.bind("isOn").to(c,"value"),u.push(c)):w.bind("isOn").to(l,"value",y=>y===p.model)}return a.bind("isEnabled").toMany(u,"isEnabled",(...p)=>p.some(g=>g)),a})}},G_=class extends k{static get requires(){return[I2,x2]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}};var P2=class extends J{refresh(){let e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){let t=this.editor.model,r=t.document.selection,o=e.value;t.change(s=>{if(r.isCollapsed){let a=r.getFirstPosition();if(r.hasAttribute("highlight")){let l=p=>p.item.hasAttribute("highlight")&&p.item.getAttribute("highlight")===this.value,c=a.getLastMatchingPosition(l,{direction:"backward"}),u=a.getLastMatchingPosition(l),h=s.createRange(c,u);!o||this.value===o?(a.isEqual(u)||s.removeAttribute("highlight",h),s.removeSelectionAttribute("highlight")):(a.isEqual(u)||s.setAttribute("highlight",o,h),s.setSelectionAttribute("highlight",o))}else o&&s.setSelectionAttribute("highlight",o)}else{let a=t.schema.getValidRanges(r.getRanges(),"highlight");for(let l of a)o?s.setAttribute("highlight",o,l):s.removeAttribute("highlight",l)}})}},R2=class extends k{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){let e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});let t=e.config.get("highlight.options");e.conversion.attributeToElement(hwe(t)),e.commands.add("highlight",new P2(e))}};function hwe(n){let e={model:{key:"highlight",values:[]},view:{}};for(let t of n)e.model.values.push(t.model),e.view[t.model]={name:"mark",classes:t.class};return e}var fwe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',mwe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',D2=class extends k{get localizedOptionTitles(){let e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.config.get("highlight.options");for(let t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e),this._addMenuBarButton(e)}_addRemoveHighlightButton(){let e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),U.eraser,null,i=>{i.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(e){let t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,K_(e.type),e.model,i);function i(r){r.bind("isEnabled").to(t,"isEnabled"),r.bind("isOn").to(t,"value",o=>o===e.model),r.iconView.fillColor=e.color,r.isToggleable=!0}}_addButton(e,t,i,r,o){let s=this.editor;s.ui.componentFactory.add(e,a=>{let l=new te(a),c=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return l.set({label:c,icon:i,tooltip:!0}),l.on("execute",()=>{s.execute("highlight",{value:r}),s.editing.view.focus()}),o(l),l})}_addDropdown(e){let t=this.editor,i=t.t,r=t.ui.componentFactory,o=e[0],s=e.reduce((a,l)=>(a[l.model]=l,a),{});r.add("highlight",a=>{let l=t.commands.get("highlight"),c=rn(a,Sr),u=c.buttonView;u.set({label:i("Highlight"),tooltip:!0,lastExecuted:o.model,commandValue:o.model,isToggleable:!0}),u.bind("icon").to(l,"value",g=>K_(p(g,"type"))),u.bind("color").to(l,"value",g=>p(g,"color")),u.bind("commandValue").to(l,"value",g=>p(g,"model")),u.bind("isOn").to(l,"value",g=>!!g),u.delegate("execute").to(c);let h=()=>{let g=e.map(w=>{let y=r.create("highlight:"+w.model);return this.listenTo(y,"execute",()=>{c.buttonView.set({lastExecuted:w.model})}),y});return g.push(new Lf),g.push(r.create("removeHighlight")),g};c.bind("isEnabled").to(l,"isEnabled"),xu(c,h,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:i("Text highlight toolbar")}),pwe(c),u.on("execute",()=>{t.execute("highlight",{value:u.commandValue})}),this.listenTo(c,"execute",()=>{t.editing.view.focus()});function p(g,w){let y=!g||g===u.lastExecuted?u.lastExecuted:g;return s[y][w]}return c})}_addMenuBarButton(e){let t=this.editor,i=t.t,r=t.commands.get("highlight");t.ui.componentFactory.add("menuBar:highlight",o=>{let s=new On(o);s.buttonView.set({label:i("Highlight"),icon:K_("marker")}),s.bind("isEnabled").to(r),s.buttonView.iconView.fillColor="transparent";let a=new Gn(o);for(let u of e){let h=new Nn(o,s),p=new ye(o);p.set({label:u.title,icon:K_(u.type),role:"menuitemradio",isToggleable:!0}),p.iconView.fillColor=u.color,p.delegate("execute").to(s),p.bind("isOn").to(r,"value",g=>g===u.model),p.on("execute",()=>{t.execute("highlight",{value:u.model}),t.editing.view.focus()}),h.children.add(p),a.items.add(h)}a.items.add(new El(o));let l=new Nn(o,s),c=new ye(o);return c.set({label:i("Remove highlight"),icon:U.eraser}),c.delegate("execute").to(s),c.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),l.children.add(c),a.items.add(l),s.panelView.children.add(a),s})}};function pwe(n){n.buttonView.actionView.iconView.bind("fillColor").to(n.buttonView,"color")}function K_(n){return n==="marker"?fwe:mwe}var Y_=class extends k{static get requires(){return[R2,D2]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}};var O2=class extends J{refresh(){let e=this.editor.model,t=e.schema,i=e.document.selection,r=dz(i);this.isEnabled=gwe(i,t,e),this.value=r?r.getAttribute("value")||"":null}execute(e){let t=this.editor.model,i=t.document.selection;t.change(r=>{let o;this.value!==null?o=dz(i):(o=r.createElement("rawHtml"),t.insertObject(o,null,null,{setSelection:"on"})),r.setAttribute("value",e,o)})}};function gwe(n,e,t){let i=bwe(n,t);return e.checkChild(i,"rawHtml")}function bwe(n,e){let i=Rl(n,e).start.parent;return i.isEmpty&&!i.is("rootElement")?i.parent:i}function dz(n){let e=n.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}var N2=class extends k{_widgetButtonViewReferences=new Set;static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(ge("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){let e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new O2(e)),this._setupConversion()}_setupConversion(){let e=this.editor,t=e.t,i=e.editing.view,r=this._widgetButtonViewReferences,o=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(let u of r){if(u.element&&u.element.isConnected)return;u.destroy(),r.delete(u)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(u,{writer:h})=>h.createElement("rawHtml",{value:u.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(u,{writer:h})=>h.createRawElement("div",{class:"raw-html-embed"},function(p){p.innerHTML=u.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(u,{writer:h})=>{let p,g,w,y=h.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(x){p=x,s({editor:e,domElement:x,state:g,props:w}),p.addEventListener("mousedown",()=>{if(g.isEditable){let V=e.model;V.document.selection.getSelectedElement()!==u&&V.change(he=>he.setSelection(u,"on"))}},!0)}),E={makeEditable(){g=Object.assign({},g,{isEditable:!0}),s({domElement:p,editor:e,state:g,props:w}),i.change(x=>{x.setAttribute("data-cke-ignore-events","true",y)}),p.querySelector("textarea").focus()},save(x){x!==g.getRawHtmlValue()?(e.execute("htmlEmbed",x),e.editing.view.focus()):this.cancel()},cancel(){g=Object.assign({},g,{isEditable:!1}),s({domElement:p,editor:e,state:g,props:w}),e.editing.view.focus(),i.change(x=>{x.removeAttribute("data-cke-ignore-events",y)})}};g={showPreviews:o.showPreviews,isEditable:!1,getRawHtmlValue:()=>u.getAttribute("value")||""},w={sanitizeHtml:o.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){E.makeEditable()},onSaveClick(x){E.save(x)},onCancelClick(){E.cancel()}};let T=h.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},y);return h.setCustomProperty("rawHtmlApi",E,T),h.setCustomProperty("rawHtml",!0,T),Ar(T,h,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function s({editor:u,domElement:h,state:p,props:g}){h.textContent="";let w=h.ownerDocument,y;if(p.isEditable){let T={isDisabled:!1,placeholder:g.textareaPlaceholder};y=l({domDocument:w,state:p,props:T}),h.append(y)}else if(p.showPreviews){let T={sanitizeHtml:g.sanitizeHtml};h.append(c({domDocument:w,state:p,props:T,editor:u}))}else{let T={isDisabled:!0,placeholder:g.textareaPlaceholder};h.append(l({domDocument:w,state:p,props:T}))}let E={onEditClick:g.onEditClick,onSaveClick:()=>{g.onSaveClick(y.value)},onCancelClick:g.onCancelClick};h.prepend(a({editor:u,domDocument:w,state:p,props:E}))}function a({editor:u,domDocument:h,state:p,props:g}){let w=Mt(h,"div",{class:"raw-html-embed__buttons-wrapper"});if(p.isEditable){let y=M2(u,"save",g.onSaveClick),E=M2(u,"cancel",g.onCancelClick);w.append(y.element,E.element),r.add(y).add(E)}else{let y=M2(u,"edit",g.onEditClick);w.append(y.element),r.add(y)}return w}function l({domDocument:u,state:h,props:p}){let g=Mt(u,"textarea",{placeholder:p.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return g.disabled=p.isDisabled,g.value=h.getRawHtmlValue(),g}function c({editor:u,domDocument:h,state:p,props:g}){let w=g.sanitizeHtml(p.getRawHtmlValue()),y=p.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),E=Mt(h,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},y),T=Mt(h,"div",{class:"raw-html-embed__preview-content",dir:u.locale.contentLanguageDirection}),V=h.createRange().createContextualFragment(w.html);return T.appendChild(V),Mt(h,"div",{class:"raw-html-embed__preview"},[E,T])}}};function M2(n,e,t){let{t:i}=n.locale,r=new te(n.locale),o=n.commands.get("htmlEmbed");return r.set({class:`raw-html-embed__${e}-button`,icon:U.pencil,tooltip:!0,tooltipPosition:n.locale.uiLanguageDirection==="rtl"?"e":"w"}),r.render(),e==="edit"?(r.set({icon:U.pencil,label:i("Edit source")}),r.bind("isEnabled").to(o)):e==="save"?(r.set({icon:U.check,label:i("Save changes")}),r.bind("isEnabled").to(o)):r.set({icon:U.cancel,label:i("Cancel")}),r.on("execute",t),r}var L2=class extends k{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,i=e.locale.t;e.ui.componentFactory.add("htmlEmbed",()=>{let r=this._createButton(te);return r.set({tooltip:!0,label:i("Insert HTML")}),r}),e.ui.componentFactory.add("menuBar:htmlEmbed",()=>{let r=this._createButton(ye);return r.set({label:i("HTML snippet")}),r})}_createButton(e){let t=this.editor,i=t.commands.get("htmlEmbed"),r=new e(t.locale);return r.set({icon:U.html}),r.bind("isEnabled").to(i,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("htmlEmbed"),t.editing.view.focus(),t.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),r}},Q_=class extends k{static get requires(){return[N2,L2,Yn]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}};function Nu(n,e,t,i){e&&wwe(n,e,i),t&&Go(n,t,i)}function Go(n,e,t){if(e.attributes)for(let[i,r]of Object.entries(e.attributes))n.setAttribute(i,r,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function wwe(n,e,t){if(e.attributes)for(let[i]of Object.entries(e.attributes))n.removeAttribute(i,t);if(e.styles)for(let i of Object.keys(e.styles))n.removeStyle(i,t);e.classes&&n.removeClass(e.classes,t)}function vwe(n,e){let t=$n(n),i="attributes";for(i in e)i=="classes"?t[i]=Array.from(new Set([...n[i]||[],...e[i]])):t[i]=v(v({},n[i]),e[i]);return t}function Yf(n,e,t,i,r){let o=e.getAttribute(t),s={};for(let a of["attributes","styles","classes"]){if(a!=i){o&&o[a]&&(s[a]=o[a]);continue}if(i=="classes"){let c=new Set(o&&o.classes||[]);r(c),c.size&&(s[a]=Array.from(c));continue}let l=new Map(Object.entries(o&&o[a]||{}));r(l),l.size&&(s[a]=Object.fromEntries(l))}Object.keys(s).length?e.is("documentSelection")?n.setSelectionAttribute(t,s):n.setAttribute(t,s,e):o&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function ywe(n){return yx(n).replace(/ /g,"")}function Ir(n){return`html${ywe(n)}Attributes`}function Y2({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function _we(n,{view:e,isInline:t}){let i=n.t;return(r,{writer:o})=>{let s=i("HTML object"),a=X_(e,r,o),l=r.getAttribute(Ir(e));o.addClass("html-object-embed__content",a),l&&Go(o,l,a);let c=o.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":s},a);return Ar(c,o,{label:s})}}function X_(n,e,t){return t.createRawElement(n,null,(i,r)=>{r.setContentOf(i,e.getAttribute("htmlContent"))})}function Cwe({view:n,model:e,allowEmpty:t},i){return o=>{o.on(`element:${n}`,(s,a,l)=>{let c=i.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(c).length){let u=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(u,a.modelCursor))return;let h=l.getSplitParts(u);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(h[h.length-1])),l.updateConversionResult(u,a),r(u,c,l);return}for(let u of a.modelRange.getItems())r(u,c,l)}},{priority:"low"})};function r(o,s,a){if(a.schema.checkAttribute(o,e)){let l=o.getAttribute(e),c=vwe(s,l||{});a.writer.setAttribute(e,c,o)}}}function hz({model:n,view:e},t){return(i,{writer:r,consumable:o})=>{if(!i.hasAttribute(n))return null;let s=r.createContainerElement(e),a=i.getAttribute(n);return o.consume(i,`attribute:${n}`),Go(r,a,s),s.getFillerOffset=()=>null,t?Ar(s,r):s}}function Ewe({priority:n,view:e}){return(t,i)=>{if(!t)return;let{writer:r}=i,o=r.createAttributeElement(e,null,{priority:n});return Go(r,t,o),o}}function Cb({view:n},e){return t=>{t.on(`element:${n}`,(i,r,o)=>{if(!r.modelRange||r.modelRange.isCollapsed)return;let s=e.processViewAttributes(r.viewItem,o);s&&o.writer.setAttribute(Ir(r.viewItem.name),s,r.modelRange)},{priority:"low"})}}function Eb({view:n,model:e}){return t=>{t.on(`attribute:${Ir(n)}:${e}`,(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;let{attributeOldValue:s,attributeNewValue:a}=r,l=o.writer,c=o.mapper.toViewElement(r.item);Nu(l,s,a,c)})}}var fz={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]},Dl=class extends k{_definitions=[];static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(let e of fz.block)this.registerBlockElement(e);for(let e of fz.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push(P(v({},e),{isBlock:!0}))}registerInlineElement(e){this._definitions.push(P(v({},e),{isInline:!0}))}extendBlockElement(e){this._extendDefinition(P(v({},e),{isBlock:!0}))}extendInlineElement(e){this._extendDefinition(P(v({},e),{isInline:!0}))}getDefinitionsForView(e,t=!1){let i=new Set;for(let r of this._getMatchingViewDefinitions(e)){if(t)for(let o of this._getReferences(r.model))i.add(o);i.add(r)}return i}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&Swe(e,t.view))}*_getReferences(e){let t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],i=this._definitions.filter(r=>r.model==e);for(let{modelSchema:r}of i)if(r)for(let o of t)for(let s of He(r[o]||[])){let a=this._definitions.filter(l=>l.model==s);for(let l of a)s!==e&&(yield*ot(this._getReferences(l.model)),yield l)}}_extendDefinition(e){let t=Array.from(this._definitions.entries()).filter(([,i])=>i.model==e.model);if(t.length==0){this._definitions.push(e);return}for(let[i,r]of t)this._definitions[i]=px({},r,e,(o,s)=>Array.isArray(o)?o.concat(s):void 0)}};function Swe(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}var Vt=class extends k{_dataSchema;_allowedAttributes;_disallowedAttributes;_allowedElements;_disallowedElements;_dataInitialized;_coupledAttributes;constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Mi,this._disallowedAttributes=new Mi,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[Dl,Yn]}loadAllowedConfig(e){for(let t of e){let i=t.name||/[\s\S]+/,r=pz(t);this.allowElement(i),r.forEach(o=>this.allowAttributes(o))}}loadDisallowedConfig(e){for(let t of e){let i=t.name||/[\s\S]+/,r=pz(t);r.length==0?this.disallowElement(i):r.forEach(o=>this.disallowAttributes(o))}}loadAllowedEmptyElementsConfig(e){for(let t of e)this.allowEmptyElement(t)}allowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement(P(v({},t),{allowEmpty:!0}))}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){let{consumable:i}=t;return mz(e,this._disallowedAttributes,i),Twe(e,mz(e,this._allowedAttributes,i))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(let t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:Rn.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(let e of this._allowedElements)this._fireRegisterEvent(e)},{priority:Rn.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{let i=this.editor.model.schema;if(t.isObject&&!i.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new C("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){let e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(i=>{let r=e.document.differ.getChanges(),o=!1,s=this._getCoupledAttributesMap();for(let a of r){if(a.type!="attribute"||a.attributeNewValue!==null)continue;let l=s.get(a.attributeKey);if(l)for(let{item:c}of a.range.getWalker())for(let u of l)c.hasAttribute(u)&&(i.removeAttribute(u,c),o=!0)}return o}),this.listenTo(t,"change:attribute",(i,{attributeKeys:r})=>{let o=new Set,s=this._getCoupledAttributesMap();for(let a of r){if(t.hasAttribute(a))continue;let l=s.get(a);if(l)for(let c of l)t.hasAttribute(c)&&o.add(c)}o.size!=0&&e.change(a=>{for(let l of o)a.removeSelectionAttribute(l)})})}_registerAssociatedHtmlAttributesPostFixer(){let e=this.editor.model;e.document.registerPostFixer(t=>{let i=e.document.differ.getChanges(),r=!1;for(let o of i)if(!(o.type!=="insert"||o.name==="$text"))for(let s of o.attributes.keys())!s.startsWith("html")||!s.endsWith("Attributes")||e.schema.checkAttribute(o.name,s)||(t.removeAttribute(s,o.position.nodeAfter),r=!0);return r})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(let e of this._allowedElements)if(e.coupledAttribute&&e.model){let t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){let t=this.editor,i=t.model.schema,r=t.conversion,{view:o,model:s}=e;i.register(s,e.modelSchema);o&&(i.extend(e.model,{allowAttributes:[Ir(o),"htmlContent"]}),t.data.registerRawContentMatcher({name:o}),r.for("upcast").elementToElement({view:o,model:Y2(e),converterPriority:Rn.low+2}),r.for("upcast").add(Cb(e,this)),r.for("editingDowncast").elementToStructure({model:{name:s,attributes:[Ir(o)]},view:_we(t,e)}),r.for("dataDowncast").elementToElement({model:s,view:(a,{writer:l})=>X_(o,a,l)}),r.for("dataDowncast").add(Eb(e)))}_registerBlockElement(e){let t=this.editor,i=t.model.schema,r=t.conversion,{view:o,model:s}=e;if(!i.isRegistered(e.model)){if(i.register(e.model,e.modelSchema),!o)return;r.for("upcast").elementToElement({model:s,view:o,converterPriority:Rn.low+2}),r.for("downcast").elementToElement({model:s,view:o})}o&&(i.extend(e.model,{allowAttributes:Ir(o)}),r.for("upcast").add(Cb(e,this)),r.for("downcast").add(Eb(e)))}_registerInlineElement(e){let t=this.editor,i=t.model.schema,r=t.conversion,o=e.model;e.appliesToBlock||(i.extend("$text",{allowAttributes:o}),e.attributeProperties&&i.setAttributeProperties(o,e.attributeProperties),r.for("upcast").add(Cwe(e,this)),r.for("downcast").attributeToElement({model:o,view:Ewe(e)}),e.allowEmpty&&(i.setAttributeProperties(o,{copyFromObject:!1}),i.isRegistered("htmlEmptyElement")||i.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>s.name==e.view&&s.isEmpty&&Array.from(s.getAttributeKeys()).length?{name:!0}:null),r.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:hz(e,!0)}),r.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:hz(e)})))}};function mz(n,e,t){let i=e.matchAll(n)||[],r=n.document.stylesProcessor;return i.reduce((o,{match:s})=>{for(let a of s.styles||[]){let l=r.getRelatedStyles(a).filter(c=>c.split("-").length>a.split("-").length).sort((c,u)=>u.split("-").length-c.split("-").length);for(let c of l)t.consume(n,{styles:[c]})&&o.styles.push(c);t.consume(n,{styles:[a]})&&o.styles.push(a)}for(let a of s.classes||[])t.consume(n,{classes:[a]})&&o.classes.push(a);for(let a of s.attributes||[])t.consume(n,{attributes:[a]})&&o.attributes.push(a);return o},{attributes:[],classes:[],styles:[]})}function Twe(n,{attributes:e,classes:t,styles:i}){return!e.length&&!t.length&&!i.length?null:v(v(v({},e.length&&{attributes:kwe(n,e)}),i.length&&{styles:Awe(n,i)}),t.length&&{classes:t})}function kwe(n,e){let t={};for(let i of e){let r=n.getAttribute(i);r!==void 0&&z1(i)&&(t[i]=r)}return t}function Awe(n,e){let t=new gu(n.document.stylesProcessor);for(let i of e){let r=n.getStyle(i);r!==void 0&&t.set(i,r)}return Object.fromEntries(t.getStylesEntries())}function F2(n,e){let{name:t}=n,i=n[e];return Kt(i)?Object.entries(i).map(([r,o])=>({name:t,[e]:{[r]:o}})):Array.isArray(i)?i.map(r=>({name:t,[e]:[r]})):[n]}function pz(n){let{name:e,attributes:t,classes:i,styles:r}=n,o=[];return t&&o.push(...F2({name:e,attributes:t},"attributes")),i&&o.push(...F2({name:e,classes:i},"classes")),r&&o.push(...F2({name:e,styles:r},"styles")),o}var B2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;let e=this.editor.plugins.get(Vt);e.on("register:pre",(t,i)=>{if(i.model!=="codeBlock")return;let r=this.editor,o=r.model.schema,s=r.conversion;o.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),s.for("upcast").add(Iwe(e)),s.for("downcast").add(xwe()),t.stop()})}};function Iwe(n){return e=>{e.on("element:code",(t,i,r)=>{let o=i.viewItem,s=o.parent;if(!s||!s.is("element","pre"))return;a(s,"htmlPreAttributes"),a(o,"htmlContentAttributes");function a(l,c){let u=n.processViewAttributes(l,r);u&&r.writer.setAttribute(c,u,i.modelRange)}},{priority:"low"})}}function xwe(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;let{attributeOldValue:r,attributeNewValue:o}=t,a=i.mapper.toViewElement(t.item).parent;Nu(i.writer,r,o,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;let{attributeOldValue:r,attributeNewValue:o}=t,s=i.mapper.toViewElement(t.item);Nu(i.writer,r,o,s)})}}var U2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Vt).on("register",(t,i)=>{let r=i,o=this.editor,s=o.model.schema,a=o.conversion;if(!r.paragraphLikeModel||s.isRegistered(r.model)||s.isRegistered(r.paragraphLikeModel))return;let l={model:r.paragraphLikeModel,view:r.view};s.register(r.model,r.modelSchema),s.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:r.view,model:(c,{writer:u})=>this._hasBlockContent(c)?u.createElement(r.model):u.createElement(l.model),converterPriority:Rn.low+.5}),a.for("downcast").elementToElement({view:r.view,model:r.model}),this._addAttributeConversion(r),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),t.stop()})}_hasBlockContent(e){let t=this.editor.editing.view,i=t.domConverter.blockElements;for(let r of t.createRangeIn(e).getItems())if(r.is("element")&&i.includes(r.name))return!0;return!1}_addAttributeConversion(e){let t=this.editor,i=t.conversion,r=t.plugins.get(Vt);t.model.schema.extend(e.model,{allowAttributes:Ir(e.view)}),i.for("upcast").add(Cb(e,r)),i.for("downcast").add(Eb(e))}},H2=class extends k{static get requires(){return[Dl,no]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("HeadingEditing"))return;let t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){let i=e.plugins.get(Dl),r=[];for(let o of t)"model"in o&&"view"in o&&(i.registerBlockElement({view:o.view,model:o.model}),r.push(o.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:r}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:r}})}};function Z_(n,e,t){let i=n.createRangeOn(e);for(let{item:r}of i.getWalker())if(r.is("element",t))return r}var z2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;let t=e.model.schema,i=e.conversion,r=e.plugins.get(Vt);r.on("register:figure",()=>{i.for("upcast").add(Dwe(r))}),r.on("register:img",(o,s)=>{s.model!=="imageBlock"&&s.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(Pwe(r)),i.for("downcast").add(Mwe()),e.plugins.has("LinkImage")&&i.for("upcast").add(Rwe(r,e)),o.stop())})}};function Pwe(n){return e=>{e.on("element:img",(t,i,r)=>{if(!i.modelRange)return;let o=i.viewItem,s=n.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlImgAttributes",s,i.modelRange)},{priority:"low"})}}function Rwe(n,e){let t=e.plugins.get("ImageUtils");return i=>{i.on("element:a",(r,o,s)=>{let a=o.viewItem;if(!t.findViewImgElement(a))return;let c=o.modelCursor.parent;if(!c.is("element","imageBlock"))return;let u=n.processViewAttributes(a,s);u&&s.writer.setAttribute("htmlLinkAttributes",u,c)},{priority:"low"})}}function Dwe(n){return e=>{e.on("element:figure",(t,i,r)=>{let o=i.viewItem;if(!i.modelRange||!o.hasClass("image"))return;let s=n.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function Mwe(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(i){n.on(`attribute:${i}:imageInline`,(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;let{attributeOldValue:a,attributeNewValue:l}=o,c=s.mapper.toViewElement(o.item);Nu(s.writer,a,l,c)},{priority:"low"})}function t(i,r){n.on(`attribute:${r}:imageBlock`,(o,s,a)=>{if(!a.consumable.test(s.item,o.name))return;let{attributeOldValue:l,attributeNewValue:c}=s,u=a.mapper.toViewElement(s.item),h=Z_(a.writer,u,i);h&&(Nu(a.writer,l,c,h),a.consumable.consume(s.item,o.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(o,s,a)=>{if(!a.consumable.consume(s.item,"attribute:htmlLinkAttributes:imageBlock"))return;let l=a.mapper.toViewElement(s.item),c=Z_(a.writer,l,"a");Go(a.writer,s.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}var j2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;let t=e.model.schema,i=e.conversion,r=this.editor.plugins.get(Vt),o=this.editor.plugins.get(Dl),s=e.config.get("mediaEmbed.elementName");o.registerBlockElement({model:"media",view:s}),r.on("register:figure",()=>{i.for("upcast").add(Nwe(r))}),r.on(`register:${s}`,(a,l)=>{l.model==="media"&&(t.extend("media",{allowAttributes:[Ir(s),"htmlFigureAttributes"]}),i.for("upcast").add(Owe(r,s)),i.for("dataDowncast").add(Lwe(s)),a.stop())})}};function Owe(n,e){let t=(i,r,o)=>{let s=r.viewItem;a(s,Ir(e));function a(l,c){let u=n.processViewAttributes(l,o);u&&o.writer.setAttribute(c,u,r.modelRange)}};return i=>{i.on(`element:${e}`,t,{priority:"low"})}}function Nwe(n){return e=>{e.on("element:figure",(t,i,r)=>{let o=i.viewItem;if(!i.modelRange||!o.hasClass("media"))return;let s=n.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function Lwe(n){return e=>{t(n,Ir(n)),t("figure","htmlFigureAttributes");function t(i,r){e.on(`attribute:${r}:media`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;let{attributeOldValue:l,attributeNewValue:c}=s,u=a.mapper.toViewElement(s.item),h=Z_(a.writer,u,i);Nu(a.writer,l,c,h)})}}}var $2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt);e.on("register:script",(t,i)=>{let r=this.editor,o=r.model.schema,s=r.conversion;o.register("htmlScript",i.modelSchema),o.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:Y2(i)}),s.for("upcast").add(Cb(i,e)),s.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>X_("script",a,l)}),s.for("downcast").add(Eb(i)),t.stop()})}},W2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("TableEditing"))return;let t=e.model.schema,i=e.conversion,r=e.plugins.get(Vt),o=e.plugins.get("TableUtils");r.on("register:figure",()=>{i.for("upcast").add(Bwe(r))}),r.on("register:table",(s,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(Vwe(r)),i.for("downcast").add(Uwe()),e.model.document.registerPostFixer(Fwe(e.model,o)),s.stop())})}};function Fwe(n,e){return t=>{let i=n.document.differ.getChanges(),r=!1;for(let o of i){if(o.type!="attribute"||o.attributeKey!="headingRows")continue;let s=o.range.start.nodeAfter,a=s.getAttribute("htmlTheadAttributes"),l=s.getAttribute("htmlTbodyAttributes");a&&!o.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",s),r=!0):l&&o.attributeNewValue==e.getRows(s)&&(t.removeAttribute("htmlTbodyAttributes",s),r=!0)}return r}}function Vwe(n){return e=>{e.on("element:table",(t,i,r)=>{if(!i.modelRange)return;let o=i.viewItem;s(o,"htmlTableAttributes");for(let a of o.getChildren())a.is("element","thead")&&s(a,"htmlTheadAttributes"),a.is("element","tbody")&&s(a,"htmlTbodyAttributes");function s(a,l){let c=n.processViewAttributes(a,r);c&&r.writer.setAttribute(l,c,i.modelRange)}},{priority:"low"})}}function Bwe(n){return e=>{e.on("element:figure",(t,i,r)=>{let o=i.viewItem;if(!i.modelRange||!o.hasClass("table"))return;let s=n.processViewAttributes(o,r);s&&r.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function Uwe(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,i){n.on(`attribute:${i}:table`,(r,o,s)=>{if(!s.consumable.test(o.item,r.name))return;let a=s.mapper.toViewElement(o.item),l=Z_(s.writer,a,t);l&&(s.consumable.consume(o.item,r.name),Nu(s.writer,o.attributeOldValue,o.attributeNewValue,l))})}}}var q2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt);e.on("register:style",(t,i)=>{let r=this.editor,o=r.model.schema,s=r.conversion;o.register("htmlStyle",i.modelSchema),o.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),r.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:Y2(i)}),s.for("upcast").add(Cb(i,e)),s.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>X_("style",a,l)}),s.for("downcast").add(Eb(i)),t.stop()})}},G2=class extends k{static get requires(){return[Vt]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ListEditing"))return;let t=e.model.schema,i=e.conversion,r=e.plugins.get(Vt),o=e.plugins.get("ListEditing"),s=e.plugins.get("ListUtils"),a=["ul","ol","li"];o.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:Go}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:Go}),o.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:Go}),r.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;let u=a.map(h=>Ir(h));t.extend("$listItem",{allowAttributes:u}),i.for("upcast").add(h=>{h.on("element:ul",V2("htmlUlAttributes",r),{priority:"low"}),h.on("element:ol",V2("htmlOlAttributes",r),{priority:"low"}),h.on("element:li",V2("htmlLiAttributes",r),{priority:"low"})})}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(let{node:h,previousNodeInList:p}of c)if(p){if(p.getAttribute("listType")==h.getAttribute("listType")){let g=gz(p.getAttribute("listType")),w=p.getAttribute(g);!cu(h.getAttribute(g),w)&&u.model.schema.checkAttribute(h,g)&&(u.setAttribute(g,w,h),l.return=!0)}if(p.getAttribute("listItemId")==h.getAttribute("listItemId")){let g=p.getAttribute("htmlLiAttributes");!cu(h.getAttribute("htmlLiAttributes"),g)&&u.model.schema.checkAttribute(h,"htmlLiAttributes")&&(u.setAttribute("htmlLiAttributes",g,h),l.return=!0)}}}),o.on("postFixer",(l,{listNodes:c,writer:u})=>{for(let{node:h}of c){let p=h.getAttribute("listType");!s.isNumberedListType(p)&&h.getAttribute("htmlOlAttributes")&&(u.removeAttribute("htmlOlAttributes",h),l.return=!0),s.isNumberedListType(p)&&h.getAttribute("htmlUlAttributes")&&(u.removeAttribute("htmlUlAttributes",h),l.return=!0)}})}afterInit(){let e=this.editor;if(!e.commands.get("indentList"))return;let t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(i,r)=>{e.model.change(o=>{for(let s of r){let a=gz(s.getAttribute("listType"));e.model.schema.checkAttribute(s,a)&&o.setAttribute(a,{},s)}})})}};function V2(n,e){return(t,i,r)=>{let o=i.viewItem;i.modelRange||Object.assign(i,r.convertChildren(i.viewItem,i.modelCursor));let s=e.processViewAttributes(o,r);for(let a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||r.writer.model.schema.checkAttribute(a,n)&&r.writer.setAttribute(n,s||{},a))}}function gz(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}var K2=class extends k{static get requires(){return[Vt,Dl]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt),t=this.editor.plugins.get(Dl);e.on("register:$customElement",(i,r)=>{i.stop();let o=this.editor,s=o.model.schema,a=o.conversion,l=o.editing.view.domConverter.unsafeElements,c=o.data.htmlProcessor.domConverter.preElements;s.register(r.model,r.modelSchema),s.extend(r.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),o.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(u,h)=>{if(u.name=="$comment"||!Hwe(u.name)||t.getDefinitionsForView(u.name).size)return null;l.includes(u.name)||l.push(u.name),c.includes(u.name)||c.push(u.name);let p=h.writer.createElement(r.model,{htmlElementName:u.name}),g=e.processViewAttributes(u,h);g&&h.writer.setAttribute("htmlCustomElementAttributes",g,p);let w;if(u.is("element","template")&&u.getCustomProperty("$rawContent"))w=u.getCustomProperty("$rawContent");else{let E=new Zr(u.document).createDocumentFragment(u),T=o.data.htmlProcessor.domConverter.viewToDom(E),x=T.firstChild;for(;x.firstChild;)T.appendChild(x.firstChild);x.remove(),w=o.data.htmlProcessor.htmlWriter.getHtml(T)}h.writer.setAttribute("htmlContent",w,p);for(let{item:y}of o.editing.view.createRangeIn(u))h.consumable.consume(y,{name:!0});return p},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:h})=>{let p=u.getAttribute("htmlElementName"),g=h.createRawElement(p);return u.hasAttribute("htmlCustomElementAttributes")&&Go(h,u.getAttribute("htmlCustomElementAttributes"),g),g}}),a.for("dataDowncast").elementToElement({model:{name:r.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(u,{writer:h})=>{let p=u.getAttribute("htmlElementName"),g=u.getAttribute("htmlContent"),w=h.createRawElement(p,null,(y,E)=>{E.setContentOf(y,g)});return u.hasAttribute("htmlCustomElementAttributes")&&Go(h,u.getAttribute("htmlCustomElementAttributes"),w),w}})})}};function Hwe(n){try{document.createElement(n)}catch{return!1}return!0}var J_=class extends k{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt,B2,U2,H2,z2,j2,$2,W2,q2,G2,K2]}init(){let e=this.editor,t=e.plugins.get(Vt);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){let t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),r=i.find(o=>o.isInline&&!i[0].isObject);return r?r.model:Ir(e)}addModelHtmlClass(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"classes",l=>{for(let c of He(t))l.add(c)})})}removeModelHtmlClass(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"classes",l=>{for(let c of He(t))l.delete(c)})})}setModelHtmlAttributes(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"attributes",l=>{for(let[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlAttributes(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"attributes",l=>{for(let c of He(t))l.delete(c)})})}setModelHtmlStyles(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"styles",l=>{for(let[c,u]of Object.entries(t))l.set(c,u)})})}removeModelHtmlStyles(e,t,i){let r=this.editor.model,o=this.getGhsAttributeNameForElement(e);r.change(s=>{for(let a of Qf(r,i,o))Yf(s,a,o,"styles",l=>{for(let c of He(t))l.delete(c)})})}};function*Qf(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(let i of zwe(n,e,t))yield*ot(i.getItems({shallow:!0}))}function zwe(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}function jwe(n){return n.createContainerElement("span",{class:"image-inline"},n.createEmptyElement("img"))}function bz(n){return n.createContainerElement("figure",{class:"image"},[n.createEmptyElement("img"),n.createSlot("children")])}function Tz(n,e){let t=n.plugins.get("ImageUtils"),i=n.plugins.has("ImageInlineEditing")&&n.plugins.has("ImageBlockEditing");return o=>t.isInlineImageView(o)?i&&(o.getStyle("display")=="block"||o.findAncestor(t.isBlockImageView)?"imageBlock":"imageInline")!==e?null:r(o):null;function r(o){let s={name:!0};return o.hasAttribute("src")&&(s.attributes=["src"]),s}}function SD(n,e){let t=it(e.getSelectedBlocks());return!t||n.isObject(t)||t.isEmpty&&t.name!="listItem"?"imageBlock":"imageInline"}function tC(n){return n&&n.endsWith("px")?parseInt(n):null}function nC(n){let e=tC(n.getStyle("width")),t=tC(n.getStyle("height"));return!!(e&&t)}var $we=/^(image|image-inline)$/,Ln=class extends k{_domEmitter=new(en());static get pluginName(){return"ImageUtils"}static get isOfficialPlugin(){return!0}isImage(e){return this.isInlineImage(e)||this.isBlockImage(e)}isInlineImageView(e){return!!e&&e.is("element","img")}isBlockImageView(e){return!!e&&e.is("element","figure")&&e.hasClass("image")}insertImage(e={},t=null,i=null,r={}){let o=this.editor,s=o.model,a=s.document.selection,l=kz(o,t||a,i);e=v(v({},Object.fromEntries(a.getAttributes())),e);for(let c in e)s.schema.checkAttribute(l,c)||delete e[c];return s.change(c=>{let{setImageSizes:u=!0}=r,h=c.createElement(l,e);return s.insertObject(h,t,null,{setSelection:"on",findOptimalPosition:!t&&l!="imageInline"?"auto":void 0}),h.parent?(u&&this.setImageNaturalSizeAttributes(h),h):null})}setImageNaturalSizeAttributes(e){let t=e.getAttribute("src");t&&(e.getAttribute("width")||e.getAttribute("height")||this.editor.model.change(i=>{let r=new j.window.Image;this._domEmitter.listenTo(r,"load",()=>{!e.getAttribute("width")&&!e.getAttribute("height")&&this.editor.model.enqueueChange(i.batch,o=>{o.setAttribute("width",r.naturalWidth,e),o.setAttribute("height",r.naturalHeight,e)}),this._domEmitter.stopListening(r,"load")}),r.src=t}))}getClosestSelectedImageWidget(e){let t=e.getFirstPosition();if(!t)return null;let i=e.getSelectedElement();if(i&&this.isImageWidget(i))return i;let r=t.parent;for(;r;){if(r.is("element")&&this.isImageWidget(r))return r;r=r.parent}return null}getClosestSelectedImageElement(e){let t=e.getSelectedElement();return this.isImage(t)?t:e.getFirstPosition().findAncestor("imageBlock")}getImageWidgetFromImageView(e){return e.findAncestor({classes:$we})}isImageAllowed(){let t=this.editor.model.document.selection;return Wwe(this.editor,t)&&qwe(t)}toImageWidget(e,t,i){return t.setCustomProperty("image",!0,e),Ar(e,t,{label:()=>{let s=this.findViewImgElement(e).getAttribute("alt");return s?`${s} ${i}`:i}})}isImageWidget(e){return!!e.getCustomProperty("image")&&Tt(e)}isBlockImage(e){return!!e&&e.is("element","imageBlock")}isInlineImage(e){return!!e&&e.is("element","imageInline")}findViewImgElement(e){if(this.isInlineImageView(e))return e;let t=this.editor.editing.view;for(let{item:i}of t.createRangeIn(e))if(this.isInlineImageView(i))return i}destroy(){return this._domEmitter.stopListening(),super.destroy()}};function Wwe(n,e){if(kz(n,e,null)=="imageBlock"){let i=Gwe(e,n.model);if(n.model.schema.checkChild(i,"imageBlock"))return!0}else if(n.model.schema.checkChild(e.focus,"imageInline"))return!0;return!1}function qwe(n){return[...n.focus.getAncestors()].every(e=>!e.is("element","imageBlock"))}function Gwe(n,e){let i=Rl(n,e).start.parent;return i.isEmpty&&!i.is("element","$root")?i.parent:i}function kz(n,e,t){let i=n.model.schema,r=n.config.get("image.insert.type");return n.plugins.has("ImageBlockEditing")?n.plugins.has("ImageInlineEditing")?t||(r==="inline"?"imageInline":r!=="auto"?"imageBlock":e.is("selection")?SD(i,e):i.checkChild(e,"imageInline")?"imageInline":"imageBlock"):"imageBlock":"imageInline"}var Vet=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));var J2=class extends J{refresh(){let i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled&&i.hasAttribute("alt")?this.value=i.getAttribute("alt"):this.value=!1}execute(e){let t=this.editor,i=t.plugins.get("ImageUtils"),r=t.model,o=i.getClosestSelectedImageElement(r.document.selection);r.change(s=>{s.setAttribute("alt",e.newValue,o)})}},X2=class extends k{static get requires(){return[Ln]}static get pluginName(){return"ImageTextAlternativeEditing"}static get isOfficialPlugin(){return!0}init(){this.editor.commands.add("imageTextAlternative",new J2(this.editor))}},eD=class extends Y{focusTracker;keystrokes;labeledInput;saveButtonView;cancelButtonView;_focusables;_focusCycler;constructor(e){super(e);let t=this.locale.t;this.focusTracker=new mt,this.keystrokes=new St,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(t("Save"),U.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(t("Cancel"),U.cancel,"ck-button-cancel","cancel"),this._focusables=new nn,this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-text-alternative-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Wo({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,r){let o=new te(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){let e=this.locale.t,t=new er(this.locale,Il);return t.label=e("Text alternative"),t}};function Kwe(n){let e=n.plugins.get("ContextualBalloon");if(n.plugins.get("ImageUtils").getClosestSelectedImageWidget(n.editing.view.document.selection)){let i=TD(n);e.updatePosition(i)}}function TD(n){let e=n.editing.view,t=$o.defaultPositions,i=n.plugins.get("ImageUtils");return{target:e.domConverter.mapViewToDom(i.getClosestSelectedImageWidget(e.document.selection)),positions:[t.northArrowSouth,t.northArrowSouthWest,t.northArrowSouthEast,t.southArrowNorth,t.southArrowNorthWest,t.southArrowNorthEast,t.viewportStickyNorth]}}var tD=class extends k{_balloon;_form;static get requires(){return[Tr]}static get pluginName(){return"ImageTextAlternativeUI"}static get isOfficialPlugin(){return!0}init(){this._createButton()}destroy(){super.destroy(),this._form&&this._form.destroy()}_createButton(){let e=this.editor,t=e.t;e.ui.componentFactory.add("imageTextAlternative",i=>{let r=e.commands.get("imageTextAlternative"),o=new te(i);return o.set({label:t("Change image text alternative"),icon:U.textAlternative,tooltip:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>!!s),this.listenTo(o,"execute",()=>{this._showForm()}),o})}_createForm(){let e=this.editor,i=e.editing.view.document,r=e.plugins.get("ImageUtils");this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Al(eD))(e.locale),this._form.render(),this.listenTo(this._form,"submit",()=>{e.execute("imageTextAlternative",{newValue:this._form.labeledInput.fieldView.element.value}),this._hideForm(!0)}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(o,s)=>{this._hideForm(!0),s()}),this.listenTo(e.ui,"update",()=>{r.getClosestSelectedImageWidget(i.selection)?this._isVisible&&Kwe(e):this._hideForm(!0)}),Qs({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(){if(this._isVisible)return;this._form||this._createForm();let e=this.editor,t=e.commands.get("imageTextAlternative"),i=this._form.labeledInput;this._form.disableCssTransitions(),this._isInBalloon||this._balloon.add({view:this._form,position:TD(e)}),i.fieldView.value=i.fieldView.element.value=t.value||"",this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}},iC=class extends k{static get requires(){return[X2,tD]}static get pluginName(){return"ImageTextAlternative"}static get isOfficialPlugin(){return!0}};function Ywe(n){let e=(t,i,r)=>{if(!r.consumable.test(i.viewItem,{name:!0,classes:"image"}))return;let o=n.findViewImgElement(i.viewItem);if(!o||!r.consumable.test(o,{name:!0}))return;r.consumable.consume(i.viewItem,{name:!0,classes:"image"});let s=r.convertItem(o,i.modelCursor),a=it(s.modelRange.getItems());if(!a){r.consumable.revert(i.viewItem,{name:!0,classes:"image"});return}r.convertChildren(i.viewItem,a),r.updateConversionResult(a,i)};return t=>{t.on("element:figure",e)}}function Az(n,e){let t=(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;let s=o.writer,a=o.mapper.toViewElement(r.item),l=n.findViewImgElement(a);r.attributeNewValue===null?(s.removeAttribute("srcset",l),s.removeAttribute("sizes",l)):r.attributeNewValue&&(s.setAttribute("srcset",r.attributeNewValue,l),s.setAttribute("sizes","100vw",l))};return i=>{i.on(`attribute:srcset:${e}`,t)}}function rC(n,e,t){let i=(r,o,s)=>{if(!s.consumable.consume(o.item,r.name))return;let a=s.writer,l=s.mapper.toViewElement(o.item),c=n.findViewImgElement(l);a.setAttribute(o.attributeKey,o.attributeNewValue||"",c)};return r=>{r.on(`attribute:${t}:${e}`,i)}}var Tb=class extends qn{observe(e){this.listenTo(e,"load",(t,i)=>{let r=i.target;this.checkShouldIgnoreEventFromTarget(r)||r.tagName=="IMG"&&this._fireEvents(i)},{useCapture:!0})}stopObserving(e){this.stopListening(e)}_fireEvents(e){this.isEnabled&&(this.document.fire("layoutChanged"),this.document.fire("imageLoaded",e))}},nD=class extends J{constructor(e){super(e);let t=e.config.get("image.insert.type");e.plugins.has("ImageBlockEditing")||t==="block"&&ge("image-block-plugin-required"),e.plugins.has("ImageInlineEditing")||t==="inline"&&ge("image-inline-plugin-required")}refresh(){let e=this.editor.plugins.get("ImageUtils");this.isEnabled=e.isImageAllowed()}execute(e){let t=He(e.source),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((s,a)=>{let l=i.getSelectedElement();if(typeof s=="string"&&(s={src:s}),a&&l&&r.isImage(l)){let c=this.editor.model.createPositionAfter(l);r.insertImage(v(v({},s),o),c,e.imageType)}else r.insertImage(v(v({},s),o),null,e.imageType)})}},iD=class extends J{constructor(e){super(e),this.decorate("cleanupImage")}refresh(){let t=this.editor.plugins.get("ImageUtils"),i=this.editor.model.document.selection.getSelectedElement();this.isEnabled=t.isImage(i),this.value=this.isEnabled?i.getAttribute("src"):null}execute(e){let t=this.editor.model.document.selection.getSelectedElement(),i=this.editor.plugins.get("ImageUtils");this.editor.model.change(r=>{r.setAttribute("src",e.source,t),this.cleanupImage(r,t),i.setImageNaturalSizeAttributes(t)})}cleanupImage(e,t){e.removeAttribute("srcset",t),e.removeAttribute("sizes",t),e.removeAttribute("sources",t),e.removeAttribute("width",t),e.removeAttribute("height",t),e.removeAttribute("alt",t)}},oC=class extends k{static get requires(){return[Ln]}static get pluginName(){return"ImageEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.conversion;e.editing.view.addObserver(Tb),t.for("upcast").attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:"srcset"});let i=new nD(e),r=new iD(e);e.commands.add("insertImage",i),e.commands.add("replaceImageSource",r),e.commands.add("imageInsert",i)}},sC=class extends k{static get requires(){return[Ln]}static get pluginName(){return"ImageSizeAttributes"}static get isOfficialPlugin(){return!0}afterInit(){this._registerSchema(),this._registerConverters("imageBlock"),this._registerConverters("imageInline")}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["width","height"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["width","height"]})}_registerConverters(e){let t=this.editor,i=t.plugins.get("ImageUtils"),r=e==="imageBlock"?"figure":"img";t.conversion.for("upcast").attributeToAttribute({view:{name:r,styles:{width:/.+/}},model:{key:"width",value:s=>nC(s)?tC(s.getStyle("width")):null}}).attributeToAttribute({view:{name:r,key:"width"},model:"width"}).attributeToAttribute({view:{name:r,styles:{height:/.+/}},model:{key:"height",value:s=>nC(s)?tC(s.getStyle("height")):null}}).attributeToAttribute({view:{name:r,key:"height"},model:"height"}),t.conversion.for("editingDowncast").add(s=>{o(s,"width","width",!0),o(s,"height","height",!0)}),t.conversion.for("dataDowncast").add(s=>{o(s,"width","width",!1),o(s,"height","height",!1)});function o(s,a,l,c){s.on(`attribute:${a}:${e}`,(u,h,p)=>{if(!p.consumable.consume(h.item,u.name))return;let g=p.writer,w=p.mapper.toViewElement(h.item),y=i.findViewImgElement(w);if(h.attributeNewValue!==null?g.setAttribute(l,h.attributeNewValue,y):g.removeAttribute(l,y),h.item.hasAttribute("sources"))return;let E=h.item.hasAttribute("resizedWidth");if(e==="imageInline"&&!E&&!c)return;let T=h.item.getAttribute("width"),x=h.item.getAttribute("height");T&&x&&g.setStyle("aspect-ratio",`${T}/${x}`,y)})}}},aC=class extends J{_modelElementName;constructor(e,t){super(e),this._modelElementName=t}refresh(){let t=this.editor.plugins.get("ImageUtils"),i=t.getClosestSelectedImageElement(this.editor.model.document.selection);this._modelElementName==="imageBlock"?this.isEnabled=t.isInlineImage(i):this.isEnabled=t.isBlockImage(i)}execute(e={}){let t=this.editor,i=this.editor.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(i.document.selection),s=Object.fromEntries(o.getAttributes());return!s.src&&!s.uploadId?null:i.change(a=>{let{setImageSizes:l=!0}=e,c=Array.from(i.markers).filter(p=>p.getRange().containsItem(o)),u=r.insertImage(s,i.createSelection(o,"on"),this._modelElementName,{setImageSizes:l});if(!u)return null;let h=a.createRangeOn(u);for(let p of c){let g=p.getRange(),w=g.root.rootName!="$graveyard"?g.getJoined(h,!0):h;a.updateMarker(p,{range:w})}return{oldElement:o,newElement:u}})}},lC=class extends k{static get requires(){return[Ln]}static get pluginName(){return"ImagePlaceholder"}static get isOfficialPlugin(){return!0}afterInit(){this._setupSchema(),this._setupConversion(),this._setupLoadListener()}_setupSchema(){let e=this.editor.model.schema;e.isRegistered("imageBlock")&&e.extend("imageBlock",{allowAttributes:["placeholder"]}),e.isRegistered("imageInline")&&e.extend("imageInline",{allowAttributes:["placeholder"]})}_setupConversion(){let e=this.editor,t=e.conversion,i=e.plugins.get("ImageUtils");t.for("editingDowncast").add(r=>{r.on("attribute:placeholder",(o,s,a)=>{if(!a.consumable.test(s.item,o.name)||!s.item.is("element","imageBlock")&&!s.item.is("element","imageInline"))return;a.consumable.consume(s.item,o.name);let l=a.writer,c=a.mapper.toViewElement(s.item),u=i.findViewImgElement(c);s.attributeNewValue?(l.addClass("image_placeholder",u),l.setStyle("background-image",`url(${s.attributeNewValue})`,u),l.setCustomProperty("editingPipeline:doNotReuseOnce",!0,u)):(l.removeClass("image_placeholder",u),l.removeStyle("background-image",u))})})}_setupLoadListener(){let e=this.editor,t=e.model,i=e.editing,r=i.view,o=e.plugins.get("ImageUtils");r.addObserver(Tb),this.listenTo(r.document,"imageLoaded",(s,a)=>{let l=r.domConverter.mapDomToView(a.target);if(!l)return;let c=o.getImageWidgetFromImageView(l);if(!c)return;let u=i.mapper.toModelElement(c);!u||!u.hasAttribute("placeholder")||t.enqueueChange({isUndoable:!1},h=>{h.removeAttribute("placeholder",u)})})}},cC=class extends k{static get requires(){return[oC,sC,Ln,lC,on]}static get pluginName(){return"ImageBlockEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.model.schema.register("imageBlock",{inheritAllFrom:"$blockObject",allowAttributes:["alt","src","srcset"]}),this._setupConversion(),e.plugins.has("ImageInlineEditing")&&(e.commands.add("imageTypeBlock",new aC(this.editor,"imageBlock")),this._setupClipboardIntegration())}_setupConversion(){let e=this.editor,t=e.t,i=e.conversion,r=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>bz(s)}),i.for("editingDowncast").elementToStructure({model:"imageBlock",view:(o,{writer:s})=>r.toImageWidget(bz(s),s,t("image widget"))}),i.for("downcast").add(rC(r,"imageBlock","src")).add(rC(r,"imageBlock","alt")).add(Az(r,"imageBlock")),i.for("upcast").elementToElement({view:Tz(e,"imageBlock"),model:(o,{writer:s})=>s.createElement("imageBlock",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)}).add(Ywe(r))}_setupClipboardIntegration(){let e=this.editor,t=e.model,i=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{let l=Array.from(a.content.getChildren()),c;if(!l.every(r.isInlineImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();let u=t.createSelection(c);if(SD(t.schema,u)==="imageBlock"){let h=new Zr(i.document),p=l.map(g=>h.createElement("figure",{class:"image"},g));a.content=h.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{let c=l.createRangeIn(a.content);for(let u of c.getItems())u.is("element","imageBlock")&&r.setImageNaturalSizeAttributes(u)})})}},rD=class extends Y{focusTracker;keystrokes;_focusables;_focusCycler;children;constructor(e,t=[]){super(e),this.focusTracker=new mt,this.keystrokes=new St,this._focusables=new nn,this.children=this.createCollection(),this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});for(let i of t)this.children.add(i),this._focusables.add(i),i instanceof Of&&this._focusables.addMany(i.children);this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-insert-form"],tabindex:-1},children:this.children})}render(){super.render(),Wo({view:this});for(let t of this._focusables)this.focusTracker.add(t.element);this.keystrokes.listenTo(this.element);let e=t=>t.stopPropagation();this.keystrokes.set("arrowright",e),this.keystrokes.set("arrowleft",e),this.keystrokes.set("arrowup",e),this.keystrokes.set("arrowdown",e)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}},uC=class extends k{static get pluginName(){return"ImageInsertUI"}static get isOfficialPlugin(){return!0}static get requires(){return[Ln]}dropdownView;_integrations=new Map;constructor(e){super(e),e.config.define("image.insert.integrations",["upload","assetManager","url"])}init(){let e=this.editor,t=e.model.document.selection,i=e.plugins.get("ImageUtils");this.set("isImageSelected",!1),this.listenTo(e.model.document,"change",()=>{this.isImageSelected=i.isImage(t.getSelectedElement())});let r=s=>this._createToolbarComponent(s),o=s=>this._createMenuBarComponent(s);e.ui.componentFactory.add("insertImage",r),e.ui.componentFactory.add("imageInsert",r),e.ui.componentFactory.add("menuBar:insertImage",o)}registerIntegration({name:e,observable:t,buttonViewCreator:i,formViewCreator:r,menuBarButtonViewCreator:o,requiresForm:s=!1}){this._integrations.has(e)&&ge("image-insert-integration-exists",{name:e}),this._integrations.set(e,{observable:t,buttonViewCreator:i,menuBarButtonViewCreator:o,formViewCreator:r,requiresForm:s})}_createToolbarComponent(e){let t=this.editor,i=e.t,r=this._prepareIntegrations();if(!r.length)return null;let o,s=r[0];if(r.length==1){if(!s.requiresForm)return s.buttonViewCreator(!0);o=s.buttonViewCreator(!0)}else{let c=s.buttonViewCreator(!1);o=new Sr(e,c),o.tooltip=!0,o.bind("label").to(this,"isImageSelected",u=>i(u?"Replace image":"Insert image"))}let a=this.dropdownView=rn(e,o),l=r.map(({observable:c})=>typeof c=="function"?c():c);return a.bind("isEnabled").toMany(l,"isEnabled",(...c)=>c.some(u=>u)),a.once("change:isOpen",()=>{let c=r.map(({formViewCreator:h})=>h(r.length==1)),u=new rD(t.locale,c);a.panelView.children.add(u)}),a}_createMenuBarComponent(e){let t=e.t,i=this._prepareIntegrations();if(!i.length)return null;let r,o=i[0];if(i.length==1)r=o.menuBarButtonViewCreator(!0);else{r=new On(e);let s=new Gn(e);r.panelView.children.add(s),r.buttonView.set({icon:U.image,label:t("Image")});for(let a of i){let l=new Nn(e,r),c=a.menuBarButtonViewCreator(!1);l.children.add(c),s.items.add(l)}}return r}_prepareIntegrations(){let t=this.editor.config.get("image.insert.integrations"),i=[];if(!t.length)return ge("image-insert-integrations-not-specified"),i;for(let r of t){if(!this._integrations.has(r)){["upload","assetManager","url"].includes(r)||ge("image-insert-unknown-integration",{item:r});continue}i.push(this._integrations.get(r))}return i.length||ge("image-insert-integrations-not-registered"),i}},oD=class extends k{static get requires(){return[cC,Yn,iC,uC]}static get pluginName(){return"ImageBlock"}static get isOfficialPlugin(){return!0}},sD=class extends k{static get requires(){return[oC,sC,Ln,lC,on]}static get pluginName(){return"ImageInlineEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.model.schema.register("imageInline",{inheritAllFrom:"$inlineObject",allowAttributes:["alt","src","srcset"],disallowIn:["caption"]}),this._setupConversion(),e.plugins.has("ImageBlockEditing")&&(e.commands.add("imageTypeInline",new aC(this.editor,"imageInline")),this._setupClipboardIntegration())}_setupConversion(){let e=this.editor,t=e.t,i=e.conversion,r=e.plugins.get("ImageUtils");i.for("dataDowncast").elementToElement({model:"imageInline",view:(o,{writer:s})=>s.createEmptyElement("img")}),i.for("editingDowncast").elementToStructure({model:"imageInline",view:(o,{writer:s})=>r.toImageWidget(jwe(s),s,t("image widget"))}),i.for("downcast").add(rC(r,"imageInline","src")).add(rC(r,"imageInline","alt")).add(Az(r,"imageInline")),i.for("upcast").elementToElement({view:Tz(e,"imageInline"),model:(o,{writer:s})=>s.createElement("imageInline",o.hasAttribute("src")?{src:o.getAttribute("src")}:void 0)})}_setupClipboardIntegration(){let e=this.editor,t=e.model,i=e.editing.view,r=e.plugins.get("ImageUtils"),o=e.plugins.get("ClipboardPipeline");this.listenTo(o,"inputTransformation",(s,a)=>{let l=Array.from(a.content.getChildren()),c;if(!l.every(r.isBlockImageView))return;a.targetRanges?c=e.editing.mapper.toModelRange(a.targetRanges[0]):c=t.document.selection.getFirstRange();let u=t.createSelection(c);if(SD(t.schema,u)==="imageInline"){let h=new Zr(i.document),p=l.map(g=>g.childCount===1?(Array.from(g.getAttributes()).forEach(w=>h.setAttribute(...w,r.findViewImgElement(g))),g.getChild(0)):g);a.content=h.createDocumentFragment(p)}}),this.listenTo(o,"contentInsertion",(s,a)=>{a.method==="paste"&&t.change(l=>{let c=l.createRangeIn(a.content);for(let u of c.getItems())u.is("element","imageInline")&&r.setImageNaturalSizeAttributes(u)})})}},aD=class extends k{static get requires(){return[sD,Yn,iC,uC]}static get pluginName(){return"ImageInline"}static get isOfficialPlugin(){return!0}},dC=class extends k{static get requires(){return[oD,aD]}static get pluginName(){return"Image"}static get isOfficialPlugin(){return!0}},hC=class extends k{static get pluginName(){return"ImageCaptionUtils"}static get isOfficialPlugin(){return!0}static get requires(){return[Ln]}getCaptionFromImageModelElement(e){for(let t of e.getChildren())if(t&&t.is("element","caption"))return t;return null}getCaptionFromModelSelection(e){let t=this.editor.plugins.get("ImageUtils"),i=e.getFirstPosition().findAncestor("caption");return i&&t.isBlockImage(i.parent)?i:null}matchImageCaptionViewElement(e){let t=this.editor.plugins.get("ImageUtils");return e.name=="figcaption"&&t.isBlockImageView(e.parent)?{name:!0}:null}},lD=class extends J{refresh(){let e=this.editor,t=e.plugins.get("ImageCaptionUtils"),i=e.plugins.get("ImageUtils");if(!e.plugins.has(cC)){this.isEnabled=!1,this.value=!1;return}let r=e.model.document.selection,o=r.getSelectedElement();if(!o){let s=t.getCaptionFromModelSelection(r);this.isEnabled=!!s,this.value=!!s;return}this.isEnabled=i.isImage(o),this.isEnabled?this.value=!!t.getCaptionFromImageModelElement(o):this.value=!1}execute(e={}){let{focusCaptionOnShow:t}=e;this.editor.model.change(i=>{this.value?this._hideImageCaption(i):this._showImageCaption(i,t)})}_showImageCaption(e,t){let r=this.editor.model.document.selection,o=this.editor.plugins.get("ImageCaptionEditing"),s=this.editor.plugins.get("ImageUtils"),a=r.getSelectedElement(),l=o._getSavedCaption(a);s.isInlineImage(a)&&(this.editor.execute("imageTypeBlock"),a=r.getSelectedElement());let c=l||e.createElement("caption");e.append(c,a),t&&e.setSelection(c,"in")}_hideImageCaption(e){let t=this.editor,i=t.model.document.selection,r=t.plugins.get("ImageCaptionEditing"),o=t.plugins.get("ImageCaptionUtils"),s=i.getSelectedElement(),a;s?a=o.getCaptionFromImageModelElement(s):(a=o.getCaptionFromModelSelection(i),s=a.parent),r._saveCaption(s,a),e.setSelection(s,"on"),e.remove(a)}},cD=class extends k{static get requires(){return[Ln,hC]}static get pluginName(){return"ImageCaptionEditing"}static get isOfficialPlugin(){return!0}_savedCaptionsMap;constructor(e){super(e),this._savedCaptionsMap=new WeakMap}init(){let e=this.editor,t=e.model.schema;t.isRegistered("caption")?t.extend("caption",{allowIn:"imageBlock"}):t.register("caption",{allowIn:"imageBlock",allowContentOf:"$block",isLimit:!0}),e.commands.add("toggleImageCaption",new lD(this.editor)),this._setupConversion(),this._setupImageTypeCommandsIntegration(),this._registerCaptionReconversion()}_setupConversion(){let e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils"),o=e.t;e.conversion.for("upcast").elementToElement({view:s=>r.matchImageCaptionViewElement(s),model:"caption"}),e.conversion.for("dataDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>i.isBlockImage(s.parent)?a.createContainerElement("figcaption"):null}),e.conversion.for("editingDowncast").elementToElement({model:"caption",view:(s,{writer:a})=>{if(!i.isBlockImage(s.parent))return null;let l=a.createEditableElement("figcaption");a.setCustomProperty("imageCaption",!0,l),l.placeholder=o("Enter image caption"),zo({view:t,element:l,keepOnFocus:!0});let c=s.parent.getAttribute("alt"),u=c?o("Caption for image: %0",[c]):o("Caption for the image");return t2(l,a,{label:u})}})}_setupImageTypeCommandsIntegration(){let e=this.editor,t=e.plugins.get("ImageUtils"),i=e.plugins.get("ImageCaptionUtils"),r=e.commands.get("imageTypeInline"),o=e.commands.get("imageTypeBlock"),s=a=>{if(!a.return)return;let{oldElement:l,newElement:c}=a.return;if(!l)return;if(t.isBlockImage(l)){let h=i.getCaptionFromImageModelElement(l);if(h){this._saveCaption(c,h);return}}let u=this._getSavedCaption(l);u&&this._saveCaption(c,u)};r&&this.listenTo(r,"execute",s,{priority:"low"}),o&&this.listenTo(o,"execute",s,{priority:"low"})}_getSavedCaption(e){let t=this._savedCaptionsMap.get(e);return t?dt.fromJSON(t):null}_saveCaption(e,t){this._savedCaptionsMap.set(e,t.toJSON())}_registerCaptionReconversion(){let e=this.editor,t=e.model,i=e.plugins.get("ImageUtils"),r=e.plugins.get("ImageCaptionUtils");t.document.on("change:data",()=>{let o=t.document.differ.getChanges();for(let s of o){if(s.attributeKey!=="alt")continue;let a=s.range.start.nodeAfter;if(i.isBlockImage(a)){let l=r.getCaptionFromImageModelElement(a);if(!l)return;e.editing.reconvertItem(l)}}})}},uD=class extends k{static get requires(){return[hC]}static get pluginName(){return"ImageCaptionUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,i=e.plugins.get("ImageCaptionUtils"),r=e.t;e.ui.componentFactory.add("toggleImageCaption",o=>{let s=e.commands.get("toggleImageCaption"),a=new te(o);return a.set({icon:U.caption,tooltip:!0,isToggleable:!0}),a.bind("isOn","isEnabled").to(s,"value","isEnabled"),a.bind("label").to(s,"value",l=>r(l?"Toggle caption off":"Toggle caption on")),this.listenTo(a,"execute",()=>{e.execute("toggleImageCaption",{focusCaptionOnShow:!0});let l=i.getCaptionFromModelSelection(e.model.document.selection);if(l){let c=e.editing.mapper.toViewElement(l);t.scrollToTheSelection(),t.change(u=>{u.addClass("image__caption_highlighted",c)})}e.editing.view.focus()}),a})}},fC=class extends k{static get requires(){return[cD,uD]}static get pluginName(){return"ImageCaption"}static get isOfficialPlugin(){return!0}};function Iz(n){let e=n.map(t=>t.replace("+","\\+"));return new RegExp(`^image\\/(${e.join("|")})$`)}function Qwe(n){return new Promise((e,t)=>{let i=n.getAttribute("src");fetch(i).then(r=>r.blob()).then(r=>{let o=xz(r,i),a=`image.${o.replace("image/","")}`,l=new File([r],a,{type:o});e(l)}).catch(r=>r&&r.name==="TypeError"?Jwe(i).then(e).catch(t):t(r))})}function Zwe(n,e){return!n.isInlineImageView(e)||!e.getAttribute("src")?!1:!!e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||!!e.getAttribute("src").match(/^blob:/g)}function xz(n,e){return n.type?n.type:e.match(/data:(image\/\w+);base64/)?e.match(/data:(image\/\w+);base64/)[1].toLowerCase():"image/jpeg"}function Jwe(n){return Xwe(n).then(e=>{let t=xz(e,n),r=`image.${t.replace("image/","")}`;return new File([e],r,{type:t})})}function Xwe(n){return new Promise((e,t)=>{let i=j.document.createElement("img");i.addEventListener("load",()=>{let r=j.document.createElement("canvas");r.width=i.width,r.height=i.height,r.getContext("2d").drawImage(i,0,0),r.toBlob(s=>s?e(s):t())}),i.addEventListener("error",()=>t()),i.src=n})}var dD=class extends k{static get pluginName(){return"ImageUploadUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.ui.componentFactory.add("uploadImage",()=>this._createToolbarButton()),e.ui.componentFactory.add("imageUpload",()=>this._createToolbarButton()),e.ui.componentFactory.add("menuBar:uploadImage",()=>this._createMenuBarButton("standalone")),e.plugins.has("ImageInsertUI")&&e.plugins.get("ImageInsertUI").registerIntegration({name:"upload",observable:()=>e.commands.get("uploadImage"),buttonViewCreator:()=>this._createToolbarButton(),formViewCreator:()=>this._createDropdownButton(),menuBarButtonViewCreator:t=>this._createMenuBarButton(t?"insertOnly":"insertNested")})}_createButton(e){let t=this.editor,i=t.locale,r=t.commands.get("uploadImage"),o=t.config.get("image.upload.types"),s=Iz(o),a=new e(t.locale),l=i.t;return a.set({acceptedType:o.map(c=>`image/${c}`).join(","),allowMultipleFiles:!0,label:l("Upload from computer"),icon:U.imageUpload}),a.bind("isEnabled").to(r),a.on("done",(c,u)=>{let h=Array.from(u).filter(p=>s.test(p.type));h.length&&(t.execute("uploadImage",{file:h}),t.editing.view.focus())}),a}_createToolbarButton(){let e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this.editor.commands.get("uploadImage"),r=this._createButton(cb);return r.tooltip=!0,r.bind("label").to(t,"isImageSelected",i,"isAccessAllowed",(o,s)=>e(s?o?"Replace image from computer":"Upload image from computer":"You have no image upload permissions.")),r}_createDropdownButton(){let e=this.editor.locale.t,t=this.editor.plugins.get("ImageInsertUI"),i=this._createButton(cb);return i.withText=!0,i.bind("label").to(t,"isImageSelected",r=>e(r?"Replace from computer":"Upload from computer")),i.on("execute",()=>{t.dropdownView.isOpen=!1}),i}_createMenuBarButton(e){let t=this.editor.locale.t,i=this._createButton(db);switch(i.withText=!0,e){case"standalone":i.label=t("Image from computer");break;case"insertOnly":i.label=t("Image");break;case"insertNested":i.label=t("From computer");break}return i}},hD=class extends k{static get pluginName(){return"ImageUploadProgress"}static get isOfficialPlugin(){return!0}placeholder;constructor(e){super(e),this.placeholder="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}init(){let e=this.editor;e.plugins.has("ImageBlockEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageBlock",this.uploadStatusChange),e.plugins.has("ImageInlineEditing")&&e.editing.downcastDispatcher.on("attribute:uploadStatus:imageInline",this.uploadStatusChange)}uploadStatusChange=(e,t,i)=>{let r=this.editor,o=t.item,s=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name))return;let a=r.plugins.get("ImageUtils"),l=r.plugins.get(Jr),c=s?t.attributeNewValue:null,u=this.placeholder,h=r.editing.mapper.toViewElement(o),p=i.writer;if(c=="reading"){wz(h,p),vz(a,u,h,p);return}if(c=="uploading"){let g=l.loaders.get(s);wz(h,p),g?(yz(h,p),t0e(h,p,g,r.editing.view),s0e(a,h,p,g)):vz(a,u,h,p);return}c=="complete"&&l.loaders.get(s)&&i0e(h,p,r.editing.view),n0e(h,p),yz(h,p),e0e(h,p)}};function wz(n,e){n.hasClass("ck-appear")||e.addClass("ck-appear",n)}function e0e(n,e){e.removeClass("ck-appear",n)}function vz(n,e,t,i){t.hasClass("ck-image-upload-placeholder")||i.addClass("ck-image-upload-placeholder",t);let r=n.findViewImgElement(t);r.getAttribute("src")!==e&&i.setAttribute("src",e,r),Pz(t,"placeholder")||i.insert(i.createPositionAfter(r),o0e(i))}function yz(n,e){n.hasClass("ck-image-upload-placeholder")&&e.removeClass("ck-image-upload-placeholder",n),Rz(n,e,"placeholder")}function t0e(n,e,t,i){let r=r0e(e);e.insert(e.createPositionAt(n,"end"),r),t.on("change:uploadedPercent",(o,s,a)=>{i.change(l=>{l.setStyle("width",a+"%",r)})})}function n0e(n,e){Rz(n,e,"progressBar")}function i0e(n,e,t){let i=e.createUIElement("div",{class:"ck-image-upload-complete-icon"});e.insert(e.createPositionAt(n,"end"),i),setTimeout(()=>{t.change(r=>r.remove(r.createRangeOn(i)))},3e3)}function r0e(n){let e=n.createUIElement("div",{class:"ck-progress-bar"});return n.setCustomProperty("progressBar",!0,e),e}function o0e(n){let e=n.createUIElement("div",{class:"ck-upload-placeholder-loader"});return n.setCustomProperty("placeholder",!0,e),e}function Pz(n,e){for(let t of n.getChildren())if(t.getCustomProperty(e))return t}function Rz(n,e,t){let i=Pz(n,t);i&&e.remove(e.createRangeOn(i))}function s0e(n,e,t,i){if(i.data){let r=n.findViewImgElement(e);t.setAttribute("src",i.data,r)}}var fD=class extends J{constructor(e){super(e),this.set("isAccessAllowed",!0)}refresh(){let e=this.editor,t=e.plugins.get("ImageUtils"),i=e.model.document.selection.getSelectedElement();this.isEnabled=t.isImageAllowed()||t.isImage(i)}execute(e){let t=He(e.file),i=this.editor.model.document.selection,r=this.editor.plugins.get("ImageUtils"),o=Object.fromEntries(i.getAttributes());t.forEach((s,a)=>{let l=i.getSelectedElement();if(a&&l&&r.isImage(l)){let c=this.editor.model.createPositionAfter(l);this._uploadImage(s,o,c)}else this._uploadImage(s,o)})}_uploadImage(e,t,i){let r=this.editor,s=r.plugins.get(Jr).createLoader(e),a=r.plugins.get("ImageUtils");s&&a.insertImage(P(v({},t),{uploadId:s.id}),i)}},mD=class extends k{static get requires(){return[Jr,Iu,on,Ln]}static get pluginName(){return"ImageUploadEditing"}static get isOfficialPlugin(){return!0}_uploadImageElements;constructor(e){super(e),e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}}),this._uploadImageElements=new Map}init(){let e=this.editor,t=e.model.document,i=e.conversion,r=e.plugins.get(Jr),o=e.plugins.get("ImageUtils"),s=e.plugins.get("ClipboardPipeline"),a=Iz(e.config.get("image.upload.types")),l=new fD(e);e.commands.add("uploadImage",l),e.commands.add("imageUpload",l),i.for("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"}),this.listenTo(e.editing.view.document,"clipboardInput",(c,u)=>{if(a0e(u.dataTransfer))return;let h=Array.from(u.dataTransfer.files).filter(g=>g?a.test(g.type):!1);if(!h.length)return;if(c.stop(),e.model.change(g=>{u.targetRanges&&g.setSelection(u.targetRanges.map(w=>e.editing.mapper.toModelRange(w))),e.execute("uploadImage",{file:h})}),!e.commands.get("uploadImage").isAccessAllowed){let g=e.plugins.get("Notification"),w=e.locale.t;g.showWarning(w("You have no image upload permissions."),{namespace:"image"})}}),this.listenTo(s,"inputTransformation",(c,u)=>{let h=Array.from(e.editing.view.createRangeIn(u.content)).map(g=>g.item).filter(g=>Zwe(o,g)&&!g.getAttribute("uploadProcessed")).map(g=>({promise:Qwe(g),imageElement:g}));if(!h.length)return;let p=new Zr(e.editing.view.document);for(let g of h){p.setAttribute("uploadProcessed",!0,g.imageElement);let w=r.createLoader(g.promise);w&&(p.setAttribute("src","",g.imageElement),p.setAttribute("uploadId",w.id,g.imageElement))}}),e.editing.view.document.on("dragover",(c,u)=>{u.preventDefault()}),t.on("change",()=>{let c=t.differ.getChanges({includeChangesInGraveyard:!0}).reverse(),u=new Set;for(let h of c)if(h.type=="insert"&&h.name!="$text"){let p=h.position.nodeAfter,g=h.position.root.rootName=="$graveyard";for(let w of l0e(e,p)){let y=w.getAttribute("uploadId");if(!y)continue;let E=r.loaders.get(y);E&&(g?u.has(y)||E.abort():(u.add(y),this._uploadImageElements.set(y,w),E.status=="idle"&&this._readAndUpload(E)))}}}),this.on("uploadComplete",(c,{imageElement:u,data:h})=>{let p=h.urls?h.urls:h;this.editor.model.change(g=>{g.setAttribute("src",p.default,u),this._parseAndSetSrcsetAttributeOnImage(p,u,g),o.setImageNaturalSizeAttributes(u)})},{priority:"low"})}afterInit(){let e=this.editor.model.schema;this.editor.plugins.has("ImageBlockEditing")&&e.extend("imageBlock",{allowAttributes:["uploadId","uploadStatus"]}),this.editor.plugins.has("ImageInlineEditing")&&e.extend("imageInline",{allowAttributes:["uploadId","uploadStatus"]})}_readAndUpload(e){let t=this.editor,i=t.model,r=t.locale.t,o=t.plugins.get(Jr),s=t.plugins.get(Iu),a=t.plugins.get("ImageUtils"),l=this._uploadImageElements;return i.enqueueChange({isUndoable:!1},u=>{u.setAttribute("uploadStatus","reading",l.get(e.id))}),e.read().then(()=>{let u=e.upload(),h=l.get(e.id);if(se.isSafari){let p=t.editing.mapper.toViewElement(h),g=a.findViewImgElement(p);t.editing.view.once("render",()=>{if(!g.parent)return;let w=t.editing.view.domConverter.mapViewToDom(g.parent);if(!w)return;let y=w.style.display;w.style.display="none",w._ckHack=w.offsetHeight,w.style.display=y})}return t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Uploading image")),i.enqueueChange({isUndoable:!1},p=>{p.setAttribute("uploadStatus","uploading",h)}),u}).then(u=>{i.enqueueChange({isUndoable:!1},h=>{let p=l.get(e.id);h.setAttribute("uploadStatus","complete",p),t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Image upload complete")),this.fire("uploadComplete",{data:u,imageElement:p})}),c()}).catch(u=>{if(t.ui&&t.ui.ariaLiveAnnouncer.announce(r("Error during image upload")),e.status!=="error"&&e.status!=="aborted")throw u;e.status=="error"&&u&&s.showWarning(u,{title:r("Upload failed"),namespace:"upload"}),i.enqueueChange({isUndoable:!1},h=>{h.remove(l.get(e.id))}),c()});function c(){i.enqueueChange({isUndoable:!1},u=>{let h=l.get(e.id);u.removeAttribute("uploadId",h),u.removeAttribute("uploadStatus",h),l.delete(e.id)}),o.destroyLoader(e)}}_parseAndSetSrcsetAttributeOnImage(e,t,i){let r=0,o=Object.keys(e).filter(s=>{let a=parseInt(s,10);if(!isNaN(a))return r=Math.max(r,a),!0}).map(s=>`${e[s]} ${s}w`).join(", ");if(o!=""){let s={srcset:o};!t.hasAttribute("width")&&!t.hasAttribute("height")&&(s.width=r),i.setAttributes(s,t)}}};function a0e(n){return Array.from(n.types).includes("text/html")&&n.getData("text/html")!==""}function l0e(n,e){let t=n.plugins.get("ImageUtils");return Array.from(n.model.createRangeOn(e)).filter(i=>t.isImage(i.item)).map(i=>i.item)}var mC=class extends k{static get pluginName(){return"ImageUpload"}static get isOfficialPlugin(){return!0}static get requires(){return[mD,dD,hD]}};var pD=class extends J{refresh(){let e=this.editor,i=e.plugins.get("ImageUtils").getClosestSelectedImageElement(e.model.document.selection);this.isEnabled=!!i,!i||!i.hasAttribute("resizedWidth")?this.value=null:this.value={width:i.getAttribute("resizedWidth"),height:null}}execute(e){let t=this.editor,i=t.model,r=t.plugins.get("ImageUtils"),o=r.getClosestSelectedImageElement(i.document.selection);this.value={width:e.width,height:null},o&&i.change(s=>{s.setAttribute("resizedWidth",e.width,o),s.removeAttribute("resizedHeight",o),r.setImageNaturalSizeAttributes(o)})}},pC=class extends k{static get requires(){return[Ln]}static get pluginName(){return"ImageResizeEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("image",{resizeUnit:"%",resizeOptions:[{name:"resizeImage:original",value:null,icon:"original"},{name:"resizeImage:custom",value:"custom",icon:"custom"},{name:"resizeImage:25",value:"25",icon:"small"},{name:"resizeImage:50",value:"50",icon:"medium"},{name:"resizeImage:75",value:"75",icon:"large"}]})}init(){let e=this.editor,t=new pD(e);this._registerConverters("imageBlock"),this._registerConverters("imageInline"),e.commands.add("resizeImage",t),e.commands.add("imageResize",t)}afterInit(){this._registerSchema()}_registerSchema(){this.editor.plugins.has("ImageBlockEditing")&&this.editor.model.schema.extend("imageBlock",{allowAttributes:["resizedWidth","resizedHeight"]}),this.editor.plugins.has("ImageInlineEditing")&&this.editor.model.schema.extend("imageInline",{allowAttributes:["resizedWidth","resizedHeight"]})}_registerConverters(e){let t=this.editor,i=t.plugins.get("ImageUtils");t.conversion.for("downcast").add(r=>r.on(`attribute:resizedWidth:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;let l=a.writer,c=a.mapper.toViewElement(s.item);s.attributeNewValue!==null?(l.setStyle("width",s.attributeNewValue,c),l.addClass("image_resized",c)):(l.removeStyle("width",c),l.removeClass("image_resized",c))})),t.conversion.for("dataDowncast").attributeToAttribute({model:{name:e,key:"resizedHeight"},view:r=>({key:"style",value:{height:r}})}),t.conversion.for("editingDowncast").add(r=>r.on(`attribute:resizedHeight:${e}`,(o,s,a)=>{if(!a.consumable.consume(s.item,o.name))return;let l=a.writer,c=a.mapper.toViewElement(s.item),u=e==="imageInline"?i.findViewImgElement(c):c;s.attributeNewValue!==null?l.setStyle("height",s.attributeNewValue,u):l.removeStyle("height",u)})),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{width:/.+/}},model:{key:"resizedWidth",value:r=>nC(r)?null:r.getStyle("width")}}),t.conversion.for("upcast").attributeToAttribute({view:{name:e==="imageBlock"?"figure":"img",styles:{height:/.+/}},model:{key:"resizedHeight",value:r=>nC(r)?null:r.getStyle("height")}})}},Q2={small:U.objectSizeSmall,medium:U.objectSizeMedium,large:U.objectSizeLarge,custom:U.objectSizeCustom,original:U.objectSizeFull},gD=class extends k{static get requires(){return[pC]}static get pluginName(){return"ImageResizeButtons"}static get isOfficialPlugin(){return!0}_resizeUnit;constructor(e){super(e),this._resizeUnit=e.config.get("image.resizeUnit")}init(){let e=this.editor,t=e.config.get("image.resizeOptions"),i=e.commands.get("resizeImage");this.bind("isEnabled").to(i);for(let r of t)this._registerImageResizeButton(r);this._registerImageResizeDropdown(t)}_registerImageResizeButton(e){let t=this.editor,{name:i,value:r,icon:o}=e;t.ui.componentFactory.add(i,s=>{let a=new te(s),l=t.commands.get("resizeImage"),c=this._getOptionLabelValue(e,!0);if(!Q2[o])throw new C("imageresizebuttons-missing-icon",t,e);if(a.set({label:c,icon:Q2[o],tooltip:c,isToggleable:!0}),a.bind("isEnabled").to(this),t.plugins.has("ImageCustomResizeUI")&&Sb(e)){let u=t.plugins.get("ImageCustomResizeUI");this.listenTo(a,"execute",()=>{u._showForm(this._resizeUnit)})}else{let u=r?r+this._resizeUnit:null;a.bind("isOn").to(l,"value",bD(u)),this.listenTo(a,"execute",()=>{t.execute("resizeImage",{width:u})})}return a})}_registerImageResizeDropdown(e){let t=this.editor,i=t.t,r=e.find(s=>!s.value),o=s=>{let a=t.commands.get("resizeImage"),l=rn(s,ub),c=l.buttonView,u=i("Resize image");return c.set({tooltip:u,commandValue:r.value,icon:Q2.medium,isToggleable:!0,label:this._getOptionLabelValue(r),withText:!0,class:"ck-resize-image-button",ariaLabel:u,ariaLabelledBy:void 0}),c.bind("label").to(a,"value",h=>h&&h.width?h.width:this._getOptionLabelValue(r)),l.bind("isEnabled").to(this),to(l,()=>this._getResizeDropdownListItemDefinitions(e,a),{ariaLabel:i("Image resize list"),role:"menu"}),this.listenTo(l,"execute",h=>{"onClick"in h.source?h.source.onClick():(t.execute(h.source.commandName,{width:h.source.commandValue}),t.editing.view.focus())}),l};t.ui.componentFactory.add("resizeImage",o),t.ui.componentFactory.add("imageResize",o)}_getOptionLabelValue(e,t=!1){let i=this.editor.t;return e.label?e.label:t?Sb(e)?i("Custom image size"):e.value?i("Resize image to %0",e.value+this._resizeUnit):i("Resize image to the original size"):Sb(e)?i("Custom"):e.value?e.value+this._resizeUnit:i("Original")}_getResizeDropdownListItemDefinitions(e,t){let{editor:i}=this,r=new ut,o=e.map(s=>Sb(s)?P(v({},s),{valueWithUnits:"custom"}):s.value?P(v({},s),{valueWithUnits:`${s.value}${this._resizeUnit}`}):P(v({},s),{valueWithUnits:null}));for(let s of o){let a=null;if(i.plugins.has("ImageCustomResizeUI")&&Sb(s)){let l=i.plugins.get("ImageCustomResizeUI");a={type:"button",model:new Oi({label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null,onClick:()=>{l._showForm(this._resizeUnit)}})};let c=gx(o,"valueWithUnits");a.model.bind("isOn").to(t,"value",c0e(c))}else a={type:"button",model:new Oi({commandName:"resizeImage",commandValue:s.valueWithUnits,label:this._getOptionLabelValue(s),role:"menuitemradio",withText:!0,icon:null})},a.model.bind("isOn").to(t,"value",bD(s.valueWithUnits));a.model.bind("isEnabled").to(t,"isEnabled"),r.add(a)}return r}};function Sb(n){return n.value==="custom"}function bD(n){return e=>{let t=e;return n===null&&t===n?!0:t!==null&&t.width===n}}function c0e(n){return e=>!n.some(t=>bD(t)(e))}var u0e="figure.image.ck-widget > img,figure.image.ck-widget > picture > img,figure.image.ck-widget > a > img,figure.image.ck-widget > a > picture > img,span.image-inline.ck-widget > img,span.image-inline.ck-widget > picture > img",Z2="image_resized",wD=class extends k{static get requires(){return[qf,Ln]}static get pluginName(){return"ImageResizeHandles"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.commands.get("resizeImage");this.bind("isEnabled").to(e),this._setupResizerCreator()}_setupResizerCreator(){let e=this.editor,t=e.editing.view,i=e.plugins.get("ImageUtils");t.addObserver(Tb),this.listenTo(t.document,"imageLoaded",(r,o)=>{if(!o.target.matches(u0e))return;let s=e.editing.view.domConverter,a=s.domToView(o.target),l=i.getImageWidgetFromImageView(a),c=this.editor.plugins.get(qf).getResizerByViewElement(l);if(c){c.redraw();return}let u=e.editing.mapper,h=u.toModelElement(l);c=e.plugins.get(qf).attachTo({unit:e.config.get("image.resizeUnit"),modelElement:h,viewElement:l,editor:e,getHandleHost(p){return p.querySelector("img")},getResizeHost(){return s.mapViewToDom(u.toViewElement(h))},isCentered(){return h.getAttribute("imageStyle")=="alignCenter"},onCommit(p){t.change(g=>{g.removeClass(Z2,l)}),e.execute("resizeImage",{width:p})}}),c.on("updateSize",()=>{l.hasClass(Z2)||t.change(g=>{g.addClass(Z2,l)});let p=h.name==="imageInline"?a:l;p.getStyle("height")&&t.change(g=>{g.removeStyle("height",p)})}),c.bind("isEnabled").to(this)})}};function Dz(n){if(!n)return null;let[,e,t]=n.trim().match(/([.,\d]+)(%|px)$/)||[],i=Number.parseFloat(e);return Number.isNaN(i)?null:{value:i,unit:t}}function Mz(n,e,t){return t==="px"?{value:e.value,unit:"px"}:{value:e.value/n*100,unit:"%"}}function Oz(n){let{editing:e}=n,i=n.plugins.get("ImageUtils").getClosestSelectedImageElement(n.model.document.selection);if(!i)return null;let r=e.mapper.toViewElement(i),o=e.view.domConverter.mapViewToDom(r);return{model:i,view:r,dom:o}}function d0e(n,e){let t=Oz(n);if(!t)return null;let i=Dz(t.model.getAttribute("resizedWidth")||null);if(!i)return null;if(i.unit===e)return i;let r=F_(t.dom),o={unit:"px",value:new pe(t.dom).width};return Mz(r,o,e)}var vD=class extends Y{focusTracker;keystrokes;unit;labeledInput;saveButtonView;cancelButtonView;_focusables;_focusCycler;_validators;constructor(e,t,i){super(e);let r=this.locale.t;this.focusTracker=new mt,this.keystrokes=new St,this.unit=t,this.labeledInput=this._createLabeledInputView(),this.saveButtonView=this._createButton(r("Save"),U.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),U.cancel,"ck-button-cancel","cancel"),this._focusables=new nn,this._validators=i,this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"form",attributes:{class:["ck","ck-image-custom-resize-form","ck-responsive-form"],tabindex:"-1"},children:[this.labeledInput,this.saveButtonView,this.cancelButtonView]})}render(){super.render(),this.keystrokes.listenTo(this.element),Wo({view:this}),[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(e=>{this._focusables.add(e),this.focusTracker.add(e.element)})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}_createButton(e,t,i,r){let o=new te(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),r&&o.delegate("execute").to(this,r),o}_createLabeledInputView(){let e=this.locale.t,t=new er(this.locale,xR);return t.label=e("Resize image (in %0)",this.unit),t.fieldView.set({step:.1}),t}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.labeledInput.errorText=t,!1}return!0}resetFormStatus(){this.labeledInput.errorText=null}get rawSize(){let{element:e}=this.labeledInput.fieldView;return e?e.value:null}get parsedSize(){let{rawSize:e}=this;if(e===null)return null;let t=Number.parseFloat(e);return Number.isNaN(t)?null:t}get sizeWithUnits(){let{parsedSize:e,unit:t}=this;return e===null?null:`${e}${t}`}};function h0e(n,e){let t=Oz(n);if(!t)return null;let i=F_(t.dom),r=Dz(window.getComputedStyle(t.dom).minWidth)||{value:1,unit:"px"},o=Math.max(.1,Mz(i,r,e).value);return{unit:e,lower:o,upper:e==="px"?i:100}}var yD=class extends k{_balloon;_form;static get requires(){return[Tr]}static get pluginName(){return"ImageCustomResizeUI"}static get isOfficialPlugin(){return!0}destroy(){super.destroy(),this._form&&this._form.destroy()}_createForm(e){let t=this.editor;this._balloon=this.editor.plugins.get("ContextualBalloon"),this._form=new(Al(vD))(t.locale,e,f0e(t)),this._form.render(),this.listenTo(this._form,"submit",()=>{this._form.isValid()&&(t.execute("resizeImage",{width:this._form.sizeWithUnits}),this._hideForm(!0))}),this.listenTo(this._form.labeledInput,"change:errorText",()=>{t.ui.update()}),this.listenTo(this._form,"cancel",()=>{this._hideForm(!0)}),this._form.keystrokes.set("Esc",(i,r)=>{this._hideForm(!0),r()}),Qs({emitter:this._form,activator:()=>this._isVisible,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideForm()})}_showForm(e){if(this._isVisible)return;this._form||this._createForm(e);let t=this.editor,i=this._form.labeledInput;this._form.disableCssTransitions(),this._form.resetFormStatus(),this._isInBalloon||this._balloon.add({view:this._form,position:TD(t)});let r=d0e(t,e),o=r?r.value.toFixed(1):"",s=h0e(t,e);i.fieldView.value=i.fieldView.element.value=o,s&&Object.assign(i.fieldView,{min:s.lower.toFixed(1),max:Math.ceil(s.upper).toFixed(1)}),this._form.labeledInput.fieldView.select(),this._form.enableCssTransitions()}_hideForm(e=!1){this._isInBalloon&&(this._form.focusTracker.isFocused&&this._form.saveButtonView.focus(),this._balloon.remove(this._form),e&&this.editor.editing.view.focus())}get _isVisible(){return!!this._balloon&&this._balloon.visibleView===this._form}get _isInBalloon(){return!!this._balloon&&this._balloon.hasView(this._form)}};function f0e(n){let e=n.t;return[t=>{if(t.rawSize.trim()==="")return e("The value must not be empty.");if(t.parsedSize===null)return e("The value should be a plain number.")}]}var gC=class extends k{static get requires(){return[pC,wD,yD,gD]}static get pluginName(){return"ImageResize"}static get isOfficialPlugin(){return!0}},_D=class extends J{_defaultStyles;_styles;constructor(e,t){super(e),this._defaultStyles={imageBlock:!1,imageInline:!1},this._styles=new Map(t.map(i=>{if(i.isDefault)for(let r of i.modelElements)this._defaultStyles[r]=i.name;return[i.name,i]}))}refresh(){let i=this.editor.plugins.get("ImageUtils").getClosestSelectedImageElement(this.editor.model.document.selection);this.isEnabled=!!i,this.isEnabled?i.hasAttribute("imageStyle")?this.value=i.getAttribute("imageStyle"):this.value=this._defaultStyles[i.name]:this.value=!1}execute(e={}){let t=this.editor,i=t.model,r=t.plugins.get("ImageUtils");i.change(o=>{let s=e.value,{setImageSizes:a=!0}=e,l=r.getClosestSelectedImageElement(i.document.selection);s&&this.shouldConvertImageType(s,l)&&(this.editor.execute(r.isBlockImage(l)?"imageTypeInline":"imageTypeBlock",{setImageSizes:a}),l=r.getClosestSelectedImageElement(i.document.selection)),!s||this._styles.get(s).isDefault?o.removeAttribute("imageStyle",l):o.setAttribute("imageStyle",s,l),a&&r.setImageNaturalSizeAttributes(l)})}shouldConvertImageType(e,t){return!this._styles.get(e).modelElements.includes(t.name)}},eC={get inline(){return{name:"inline",title:"In line",icon:U.objectInline,modelElements:["imageInline"],isDefault:!0}},get alignLeft(){return{name:"alignLeft",title:"Left aligned image",icon:U.objectLeft,modelElements:["imageBlock","imageInline"],className:"image-style-align-left"}},get alignBlockLeft(){return{name:"alignBlockLeft",title:"Left aligned image",icon:U.objectBlockLeft,modelElements:["imageBlock"],className:"image-style-block-align-left"}},get alignCenter(){return{name:"alignCenter",title:"Centered image",icon:U.objectCenter,modelElements:["imageBlock"],className:"image-style-align-center"}},get alignRight(){return{name:"alignRight",title:"Right aligned image",icon:U.objectRight,modelElements:["imageBlock","imageInline"],className:"image-style-align-right"}},get alignBlockRight(){return{name:"alignBlockRight",title:"Right aligned image",icon:U.objectBlockRight,modelElements:["imageBlock"],className:"image-style-block-align-right"}},get block(){return{name:"block",title:"Centered image",icon:U.objectCenter,modelElements:["imageBlock"],isDefault:!0}},get side(){return{name:"side",title:"Side image",icon:U.objectRight,modelElements:["imageBlock"],className:"image-style-side"}}},Nz={full:U.objectFullWidth,left:U.objectBlockLeft,right:U.objectBlockRight,center:U.objectCenter,inlineLeft:U.objectLeft,inlineRight:U.objectRight,inline:U.objectInline},Lz=[{name:"imageStyle:wrapText",title:"Wrap text",defaultItem:"imageStyle:alignLeft",items:["imageStyle:alignLeft","imageStyle:alignRight"]},{name:"imageStyle:breakText",title:"Break text",defaultItem:"imageStyle:block",items:["imageStyle:alignBlockLeft","imageStyle:block","imageStyle:alignBlockRight"]}];function m0e(n){return(n.configuredStyles.options||[]).map(i=>b0e(i)).filter(i=>w0e(i,n))}function p0e(n,e){return n&&e?{options:["inline","alignLeft","alignRight","alignCenter","alignBlockLeft","alignBlockRight","block","side"]}:n?{options:["block","side"]}:e?{options:["inline","alignLeft","alignRight"]}:{}}function g0e(n){return n.has("ImageBlockEditing")&&n.has("ImageInlineEditing")?[...Lz]:[]}function b0e(n){return typeof n=="string"?eC[n]?n=v({},eC[n]):n={name:n}:n=v0e(eC[n.name],n),typeof n.icon=="string"&&(n.icon=Nz[n.icon]||n.icon),n}function w0e(n,{isBlockPluginLoaded:e,isInlinePluginLoaded:t}){let{modelElements:i,name:r}=n;if(!i||!i.length||!r)return Fz({style:n}),!1;{let o=[e?"imageBlock":null,t?"imageInline":null];if(!i.some(s=>o.includes(s)))return ge("image-style-missing-dependency",{style:n,missingPlugins:i.map(s=>s==="imageBlock"?"ImageBlockEditing":"ImageInlineEditing")}),!1}return!0}function v0e(n,e){let t=v({},e);for(let i in n)Object.prototype.hasOwnProperty.call(e,i)||(t[i]=n[i]);return t}function Fz(n){ge("image-style-configuration-definition-invalid",n)}var CD={normalizeStyles:m0e,getDefaultStylesConfiguration:p0e,getDefaultDropdownDefinitions:g0e,warnInvalidStyle:Fz,DEFAULT_OPTIONS:eC,DEFAULT_ICONS:Nz,DEFAULT_DROPDOWN_DEFINITIONS:Lz};function y0e(n){return(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;let r=_z(t.attributeNewValue,n),o=_z(t.attributeOldValue,n),s=i.mapper.toViewElement(t.item),a=i.writer;o&&a.removeClass(o.className,s),r&&a.addClass(r.className,s)}}function _0e(n){let e={imageInline:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageInline")),imageBlock:n.filter(t=>!t.isDefault&&t.modelElements.includes("imageBlock"))};return(t,i,r)=>{if(!i.modelRange)return;let o=i.viewItem,s=it(i.modelRange.getItems());if(s&&r.schema.checkAttribute(s,"imageStyle"))for(let a of e[s.name])r.consumable.consume(o,{classes:a.className})&&r.writer.setAttribute("imageStyle",a.name,s)}}function _z(n,e){for(let t of e)if(t.name===n)return t}var bC=class extends k{static get pluginName(){return"ImageStyleEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Ln]}normalizedStyles;init(){let{normalizeStyles:e,getDefaultStylesConfiguration:t}=CD,i=this.editor,r=i.plugins.has("ImageBlockEditing"),o=i.plugins.has("ImageInlineEditing");i.config.define("image.styles",t(r,o)),this.normalizedStyles=e({configuredStyles:i.config.get("image.styles"),isBlockPluginLoaded:r,isInlinePluginLoaded:o}),this._setupConversion(r,o),this._setupPostFixer(),i.commands.add("imageStyle",new _D(i,this.normalizedStyles))}_setupConversion(e,t){let i=this.editor,r=i.model.schema,o=y0e(this.normalizedStyles),s=_0e(this.normalizedStyles);i.editing.downcastDispatcher.on("attribute:imageStyle",o),i.data.downcastDispatcher.on("attribute:imageStyle",o),e&&(r.extend("imageBlock",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:figure",s,{priority:"low"})),t&&(r.extend("imageInline",{allowAttributes:"imageStyle"}),i.data.upcastDispatcher.on("element:img",s,{priority:"low"}))}_setupPostFixer(){let e=this.editor,t=e.model.document,i=e.plugins.get(Ln),r=new Map(this.normalizedStyles.map(o=>[o.name,o]));t.registerPostFixer(o=>{let s=!1;for(let a of t.differ.getChanges())if(a.type=="insert"||a.type=="attribute"&&a.attributeKey=="imageStyle"){let l=a.type=="insert"?a.position.nodeAfter:a.range.start.nodeAfter;if(l&&l.is("element","paragraph")&&l.childCount>0&&(l=l.getChild(0)),!i.isImage(l))continue;let c=l.getAttribute("imageStyle");if(!c)continue;let u=r.get(c);(!u||!u.modelElements.includes(l.name))&&(o.removeAttribute("imageStyle",l),s=!0)}return s})}},ED=class extends k{static get requires(){return[bC]}static get pluginName(){return"ImageStyleUI"}static get isOfficialPlugin(){return!0}get localizedDefaultStylesTitles(){let e=this.editor.t;return{"Wrap text":e("Wrap text"),"Break text":e("Break text"),"In line":e("In line"),"Full size image":e("Full size image"),"Side image":e("Side image"),"Left aligned image":e("Left aligned image"),"Centered image":e("Centered image"),"Right aligned image":e("Right aligned image")}}init(){let e=this.editor.plugins,t=this.editor.config.get("image.toolbar")||[],i=e.get("ImageStyleEditing"),r=Cz(i.normalizedStyles,this.localizedDefaultStylesTitles);for(let s of r)this._createButton(s);let o=Cz([...t.filter(ke),...CD.getDefaultDropdownDefinitions(e)],this.localizedDefaultStylesTitles);for(let s of o)this._createDropdown(s,r)}_createDropdown(e,t){let i=this.editor.ui.componentFactory;i.add(e.name,r=>{let o,{defaultItem:s,items:a,title:l}=e,c=a.filter(g=>t.find(({name:w})=>Ez(w)===g)).map(g=>{let w=i.create(g);return g===s&&(o=w),w});a.length!==c.length&&CD.warnInvalidStyle({dropdown:e});let u=rn(r,Sr),h=u.buttonView,p=h.arrowView;return xu(u,c,{enableActiveItemFocusOnDropdownOpen:!0}),h.set({label:Sz(l,o.label),class:null,tooltip:!0}),p.unbind("label"),p.set({label:l}),h.bind("icon").toMany(c,"isOn",(...g)=>{let w=g.findIndex(qi);return w<0?o.icon:c[w].icon}),h.bind("label").toMany(c,"isOn",(...g)=>{let w=g.findIndex(qi);return Sz(l,w<0?o.label:c[w].label)}),h.bind("isOn").toMany(c,"isOn",(...g)=>g.some(qi)),h.bind("class").toMany(c,"isOn",(...g)=>g.some(qi)?"ck-splitbutton_flatten":void 0),h.on("execute",()=>{c.some(({isOn:g})=>g)?u.isOpen=!u.isOpen:o.fire("execute")}),u.bind("isEnabled").toMany(c,"isEnabled",(...g)=>g.some(qi)),this.listenTo(u,"execute",()=>{this.editor.editing.view.focus()}),u})}_createButton(e){let t=e.name;this.editor.ui.componentFactory.add(Ez(t),i=>{let r=this.editor.commands.get("imageStyle"),o=new te(i);return o.set({label:e.title,icon:e.icon,tooltip:!0,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",s=>s===t),o.on("execute",this._executeCommand.bind(this,t)),o})}_executeCommand(e){this.editor.execute("imageStyle",{value:e}),this.editor.editing.view.focus()}};function Cz(n,e){for(let t of n)e[t.title]&&(t.title=e[t.title]);return n}function Ez(n){return`imageStyle:${n}`}function Sz(n,e){return(n?n+": ":"")+e}var wC=class extends k{static get requires(){return[bC,ED]}static get pluginName(){return"ImageStyle"}static get isOfficialPlugin(){return!0}},vC=class extends k{static get requires(){return[Ru,Ln]}static get pluginName(){return"ImageToolbar"}static get isOfficialPlugin(){return!0}afterInit(){let e=this.editor,t=e.t,i=e.plugins.get(Ru),r=e.plugins.get("ImageUtils");i.register("image",{ariaLabel:t("Image toolbar"),items:C0e(e.config.get("image.toolbar")||[]),getRelatedElement:o=>r.getClosestSelectedImageWidget(o)})}};function C0e(n){return n.map(e=>ke(e)?e.name:e)}var kD=class extends k{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.commands.add("indent",new sb(e)),e.commands.add("outdent",new sb(e))}},AD=class extends k{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale,i=e.t,r=t.uiLanguageDirection=="ltr"?U.indent:U.outdent,o=t.uiLanguageDirection=="ltr"?U.outdent:U.indent;this._defineButton("indent",i("Increase indent"),r),this._defineButton("outdent",i("Decrease indent"),o)}_defineButton(e,t,i){let r=this.editor;r.ui.componentFactory.add(e,()=>{let o=this._createButton(te,e,t,i);return o.set({tooltip:!0}),o}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(ye,e,t,i))}_createButton(e,t,i,r){let o=this.editor,s=o.commands.get(t),a=new e(o.locale);return a.set({label:i,icon:r}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>{o.execute(t),o.editing.view.focus()}),a}},yC=class extends k{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[kD,AD]}},Zf=class extends J{_indentBehavior;constructor(e,t){super(e),this._indentBehavior=t}refresh(){let t=this.editor.model,i=it(t.document.selection.getSelectedBlocks());if(!i||!this._isIndentationChangeAllowed(i)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"))}execute(){let e=this.editor.model,t=this._getBlocksToChange();e.change(i=>{for(let r of t){let o=r.getAttribute("blockIndent"),s=this._indentBehavior.getNextIndent(o);s?i.setAttribute("blockIndent",s,r):i.removeAttribute("blockIndent",r)}})}_getBlocksToChange(){let t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(r=>this._isIndentationChangeAllowed(r))}_isIndentationChangeAllowed(e){let t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("ListUtils").isListItemBlock(e):!1}};var _C=class{isForward;offset;unit;constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){let t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){let t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;let r=this.isForward?this.offset:-this.offset,o=t+r;return o>0?o+this.unit:void 0}};var CC=class{isForward;classes;constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){let t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){let t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i]}},E0e=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"],EC=class extends k{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Zf(e,new CC({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new Zf(e,new CC({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(PU),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new Zf(e,new _C({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new Zf(e,new _C({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){let e=this.editor,t=e.model.schema,i=e.commands.get("indent"),r=e.commands.get("outdent"),o=e.config.get("heading.options");(o&&o.map(l=>l.model)||E0e).forEach(l=>{t.isRegistered(l)&&t.extend(l,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),r.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){let e=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:r=>{if(!r.is("element","li"))return r.getStyle(i)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:r=>({key:"style",value:{[i]:r}})})}_setupConversionUsingClasses(e){let t={model:{key:"blockIndent",values:[]},view:{}};for(let i of e)t.model.values.push(i),t.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(t)}};var xD=class{_definitions=new Set;get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,r)=>{if(!r.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||r.schema.isInline(i.item)))return;let o=r.writer,s=o.document.selection;for(let a of this._definitions){let l=o.createAttributeElement("a",a.attributes,{priority:5});a.classes&&o.addClass(a.classes,l);for(let c in a.styles)o.setStyle(c,a.styles[c],l);o.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?o.wrap(s.getFirstRange(),l):o.wrap(r.mapper.toViewRange(i.range),l):o.unwrap(r.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:r,mapper:o})=>{let s=o.toViewElement(i.item),a=Array.from(s.getChildren()).find(l=>l.is("element","a"));if(a)for(let l of this._definitions){let c=Di(l.attributes);if(l.callback(i.attributeNewValue)){for(let[u,h]of c)u==="class"?r.addClass(h,a):r.setAttribute(u,h,a);l.classes&&r.addClass(l.classes,a);for(let u in l.styles)r.setStyle(u,l.styles[u],a)}else{for(let[u,h]of c)u==="class"?r.removeClass(h,a):r.removeAttribute(u,a);l.classes&&r.removeClass(l.classes,a);for(let u in l.styles)r.removeStyle(u,a)}}})}}},S0e=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,T0e="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",k0e=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,A0e=/^((\w+:(\/{2,})?)|(\W))/i,I0e=["https?","ftps?","mailto"],SC="Ctrl+K";function x0e(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function Vz(n,{writer:e}){let t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function jz(n,e=I0e){let t=String(n),i=e.join("|"),r=new RegExp(`${T0e.replace("<protocols>",i)}`,"i");return P0e(t,r)?t:"#"}function P0e(n,e){return!!n.replace(S0e,"").match(e)}function R0e(n,e){let t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>("label"in i&&t[i.label]&&(i.label=t[i.label]),i)),e}function D0e(n){let e=[];if(n)for(let[t,i]of Object.entries(n)){let r=Object.assign({},i,{id:`link${Eg(t)}`});e.push(r)}return e}function PD(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function M0e(n){return k0e.test(n)}function VD(n,e){let t=M0e(n)?"mailto:":e,i=!!t&&!$z(n);return n&&i?t+n:n}function $z(n){return A0e.test(n)}function Bz(n){window.open(n,"_blank","noopener")}var RD=class extends J{manualDecorators=new ut;automaticDecorators=new xD;restoreManualDecoratorStates(){for(let e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){let e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||it(t.getSelectedBlocks());PD(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(let r of this.manualDecorators)r.value=this._getDecoratorStateFromModel(r.id)}execute(e,t={}){let i=this.editor.model,r=i.document.selection,o=[],s=[];for(let a in t)t[a]?o.push(a):s.push(a);i.change(a=>{if(r.isCollapsed){let l=r.getFirstPosition();if(r.hasAttribute("linkHref")){let c=Uz(r),u=zf(l,"linkHref",r.getAttribute("linkHref"),i);r.getAttribute("linkHref")===c&&(u=this._updateLinkContent(i,a,u,e)),a.setAttribute("linkHref",e,u),o.forEach(h=>{a.setAttribute(h,!0,u)}),s.forEach(h=>{a.removeAttribute(h,u)}),a.setSelection(a.createPositionAfter(u.end.nodeBefore))}else if(e!==""){let c=Di(r.getAttributes());c.set("linkHref",e),o.forEach(h=>{c.set(h,!0)});let{end:u}=i.insertContent(a.createText(e,c),l);a.setSelection(u)}["linkHref",...o,...s].forEach(c=>{a.removeSelectionAttribute(c)})}else{let l=i.schema.getValidRanges(r.getRanges(),"linkHref"),c=[];for(let h of r.getSelectedBlocks())i.schema.checkAttribute(h,"linkHref")&&c.push(a.createRangeOn(h));let u=c.slice();for(let h of l)this._isRangeToUpdate(h,c)&&u.push(h);for(let h of u){let p=h;if(u.length===1){let g=Uz(r);r.getAttribute("linkHref")===g&&(p=this._updateLinkContent(i,a,h,e),a.setSelection(a.createSelection(p)))}a.setAttribute("linkHref",e,p),o.forEach(g=>{a.setAttribute(g,!0,p)}),s.forEach(g=>{a.removeAttribute(g,p)})}}})}_getDecoratorStateFromModel(e){let t=this.editor.model,i=t.document.selection,r=i.getSelectedElement();return PD(r,t.schema)?r.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(let i of t)if(i.containsRange(e))return!1;return!0}_updateLinkContent(e,t,i,r){let o=t.createText(r,{linkHref:r});return e.insertContent(o,i)}};function Uz(n){if(n.isCollapsed){let e=n.getFirstPosition();return e.textNode&&e.textNode.data}else{let e=Array.from(n.getFirstRange().getItems());if(e.length>1)return null;let t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}var DD=class extends J{refresh(){let e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();PD(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){let e=this.editor,t=this.editor.model,i=t.document.selection,r=e.commands.get("link");t.change(o=>{let s=i.isCollapsed?[zf(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(let a of s)if(o.removeAttribute("linkHref",a),r)for(let l of r.manualDecorators)o.removeAttribute(l.id,a)})}},MD=class extends $e(){id;defaultValue;label;attributes;classes;styles;constructor({id:e,label:t,attributes:i,classes:r,styles:o,defaultValue:s}){super(),this.id=e,this.set("value",void 0),this.defaultValue=s,this.label=t,this.attributes=i,this.classes=r,this.styles=o}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}},O0e="ck-link_selected",Hz="automatic",N0e="manual",L0e=/^(https?:)?\/\//,TC=class extends k{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Hf,gb,on]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){let e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:Vz}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(o,s)=>Vz(jz(o,t),s)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:o=>o.getAttribute("href")}}),e.commands.add("link",new RD(e)),e.commands.add("unlink",new DD(e));let i=R0e(e.t,D0e(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(o=>o.mode===Hz)),this._enableManualDecorators(i.filter(o=>o.mode===N0e)),e.plugins.get(Hf).registerAttribute("linkHref"),LR(e,"linkHref","a",O0e),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){let t=this.editor,r=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&r.add({id:"linkIsExternal",mode:Hz,callback:o=>!!o&&L0e.test(o),attributes:{target:"_blank",rel:"noopener noreferrer"}}),r.add(e),r.length&&t.conversion.for("downcast").add(r.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;let t=this.editor,r=t.commands.get("link").manualDecorators;e.forEach(o=>{t.model.schema.extend("$text",{allowAttributes:o.id});let s=new MD(o);r.add(s),t.conversion.for("downcast").attributeToElement({model:s.id,view:(a,{writer:l,schema:c},{item:u})=>{if((u.is("selection")||c.isInline(u))&&a){let h=l.createAttributeElement("a",s.attributes,{priority:5});s.classes&&l.addClass(s.classes,h);for(let p in s.styles)l.setStyle(p,s.styles[p],h);return l.setCustomProperty("link",!0,h),h}}}),t.conversion.for("upcast").elementToAttribute({view:v({name:"a"},s._createPattern()),model:{key:s.id}})})}_enableLinkOpen(){let e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",(r,o)=>{if(!(se.isMac?o.domEvent.metaKey:o.domEvent.ctrlKey))return;let a=o.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;let l=a.getAttribute("href");l&&(r.stop(),o.preventDefault(),Bz(l))},{context:"$capture"}),this.listenTo(i,"keydown",(r,o)=>{let a=e.commands.get("link").value;a&&o.keyCode===Te.enter&&o.altKey&&(r.stop(),Bz(a))})}_enableSelectionAttributesFixer(){let t=this.editor.model,i=t.document.selection;this.listenTo(i,"change:attribute",(r,{attributeKeys:o})=>{!o.includes("linkHref")||i.hasAttribute("linkHref")||t.change(s=>{F0e(s,V0e(t.schema))})})}_enableClipboardIntegration(){let e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(r,o)=>{t.change(s=>{let a=s.createRangeIn(o.content);for(let l of a.getItems())if(l.hasAttribute("linkHref")){let c=VD(l.getAttribute("linkHref"),i);s.setAttribute("linkHref",c,l)}})})}};function F0e(n,e){n.removeSelectionAttribute("linkHref");for(let t of e)n.removeSelectionAttribute(t)}function V0e(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}var OD=class extends Y{focusTracker=new mt;keystrokes=new St;urlInputView;saveButtonView;cancelButtonView;_manualDecoratorSwitches;children;_validators;_focusables=new nn;_focusCycler;constructor(e,t,i){super(e);let r=e.t;this._validators=i,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(r("Save"),U.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(r("Cancel"),U.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});let o=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&o.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:o,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),Wo({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){let e=this.locale.t,t=new er(this.locale,Il);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,i,r){let o=new te(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.extendTemplate({attributes:{class:i}}),r&&o.delegate("execute").to(this,r),o}_createManualDecoratorSwitches(e){let t=this.createCollection();for(let i of e.manualDecorators){let r=new Ys(this.locale);r.set({name:i.id,label:i.label,withText:!0}),r.bind("isOn").toMany([i,e],"value",(o,s)=>s===void 0&&o===void 0?!!i.defaultValue:!!o),r.on("execute",()=>{i.set("value",!r.isOn)}),t.add(r)}return t}_createFormChildren(e){let t=this.createCollection();if(t.add(this.urlInputView),e.length){let i=new Y;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(r=>({tag:"li",children:[r],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){let{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}},B0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',ND=class extends Y{focusTracker=new mt;keystrokes=new St;previewButtonView;unlinkButtonView;editButtonView;_focusables=new nn;_focusCycler;_linkConfig;constructor(e,t={}){super(e);let i=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(i("Unlink"),B0e,"unlink"),this.editButtonView=this._createButton(i("Edit link"),U.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new pn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){let r=new te(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.delegate("execute").to(this,i),r}_createPreviewButton(){let e=new te(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",r=>r&&jz(r,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",r=>r||i("This link has no URL")),e.bind("isEnabled").to(this,"href",r=>!!r),e.template.tag="a",e.template.eventListeners={},e}},U0e='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',Ko="link-ui",LD=class extends k{actionsView=null;formView=null;_balloon;static get requires(){return[Tr]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.editing.view.addObserver(r_),this._balloon=e.plugins.get(Tr),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Ko,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Ko,view:(i,{writer:r})=>{if(!i.markerRange.isCollapsed)return null;let o=r.createUIElement("span");return r.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],o),o}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:SC},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){let e=this.editor,t=new ND(e.locale,e.config.get("link")),i=e.commands.get("link"),r=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(r),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(o,s)=>{this._hideUI(),s()}),t.keystrokes.set(SC,(o,s)=>{this._addFormView(),s()}),t}_createFormView(){let e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),r=new(Al(OD))(e.locale,t,H0e(e));return r.urlInputView.fieldView.bind("value").to(t,"value"),r.urlInputView.bind("isEnabled").to(t,"isEnabled"),r.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(r,"submit",()=>{if(r.isValid()){let{value:o}=r.urlInputView.fieldView.element,s=VD(o,i);e.execute("link",s,r.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(r.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(r,"cancel",()=>{this._closeFormView()}),r.keystrokes.set("Esc",(o,s)=>{this._closeFormView(),s()}),r}_createToolbarLinkButton(){let e=this.editor;e.ui.componentFactory.add("link",()=>{let t=this._createButton(te);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{let t=this._createButton(ye);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){let t=this.editor,i=t.locale,r=t.commands.get("link"),o=new e(t.locale),s=i.t;return o.set({label:s("Link"),icon:U0e,keystroke:SC,isToggleable:!0}),o.bind("isEnabled").to(r,"isEnabled"),o.bind("isOn").to(r,"value",a=>!!a),this.listenTo(o,"execute",()=>this._showUI(!0)),o}_enableBalloonActivators(){let e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(SC,(i,r)=>{r(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),Qs({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;let t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){let e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;let e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){let e=this.editor,t=e.editing.view.document,i=this._getSelectedLinkElement(),r=s(),o=()=>{let a=this._getSelectedLinkElement(),l=s();i&&!a||!i&&l!==r?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,r=l};function s(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",o),this.listenTo(this._balloon,"change:visibleView",o)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){let e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){let e=this.editor.editing.view,t=this.editor.model,i=e.document,r;if(t.markers.has(Ko)){let o=Array.from(this.editor.editing.mapper.markerNameToElements(Ko)),s=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));r=e.domConverter.viewRangeToDom(s)}else r=()=>{let o=this._getSelectedLinkElement();return o?e.domConverter.mapViewToDom(o):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:r}}_getSelectedLinkElement(){let e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Tt(i))return ID(t.getFirstPosition());{let r=t.getFirstRange().getTrimmed(),o=ID(r.start),s=ID(r.end);return!o||o!=s?null:e.createRangeIn(o).getTrimmed().isEqual(r)?o:null}}_showFakeVisualSelection(){let e=this.editor.model;e.change(t=>{let i=e.document.selection.getFirstRange();if(e.markers.has(Ko))t.updateMarker(Ko,{range:i});else if(i.start.isAtEnd){let r=i.start.getLastMatchingPosition(({item:o})=>!e.schema.isContent(o),{boundaries:i});t.addMarker(Ko,{usingOperation:!1,affectsData:!1,range:t.createRange(r,i.end)})}else t.addMarker(Ko,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){let e=this.editor.model;e.markers.has(Ko)&&e.change(t=>{t.removeMarker(Ko)})}};function ID(n){return n.getAncestors().find(e=>x0e(e))||null}function H0e(n){let e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!t&&!i.url.length)return e("Link URL must not be empty.")}]}var z0e=4,Wz=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),j0e=2,FD=class extends k{static get requires(){return[Kn,TC]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){let t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?zf(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){let r=this.editor.model,o=r.document.selection,s=o.getFirstPosition(),a=o.getLastPosition(),l=t.getJoined(this._expandLinkRange(r,s)||t);l&&(l=l.getJoined(this._expandLinkRange(r,a)||t)),l&&(l.start.isBefore(s)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){let e=this.editor,t=e.model,i=t.document.selection,r=e.plugins.get("ClipboardPipeline"),o=e.commands.get("link");r.on("inputTransformation",(s,a)=>{if(!this.isEnabled||!o.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;let l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;let u=c.match(Wz);u&&u[2]===c&&(t.change(h=>{this._selectEntireLinks(h,l),o.execute(c)}),s.stop())},{priority:"high"})}_enableTypingHandling(){let e=this.editor,t=new wb(e.model,i=>{if(!$0e(i))return;let r=zz(i.substr(0,i.length-1));if(r)return{url:r}});t.on("matched:data",(i,r)=>{let{batch:o,range:s,url:a}=r;if(!o.isTyping)return;let l=s.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),u=e.model.createRange(c,l);this._applyAutoLink(a,u)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){let e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{let r=t.document.selection.getFirstPosition();if(!r.parent.previousSibling)return;let o=t.createRangeIn(r.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(o)})}_enableShiftEnterHandling(){let e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{let r=t.document.selection.getFirstPosition(),o=t.createRange(t.createPositionAt(r.parent,0),r.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(o)})}_checkAndApplyAutoLinkOnRange(e){let t=this.editor.model,{text:i,range:r}=NR(e,t),o=zz(i);if(o){let s=t.createRange(r.end.getShiftedBy(-o.length),r.end);this._applyAutoLink(o,s)}}_applyAutoLink(e,t){let i=this.editor.model,r=this.editor.config.get("link.defaultProtocol"),o=VD(e,r);!this.isEnabled||!W0e(t,i)||!$z(o)||q0e(t)||this._persistAutoLink(o,t)}_persistAutoLink(e,t){let i=this.editor.model,r=this.editor.plugins.get("Delete");i.enqueueChange(o=>{o.setAttribute("linkHref",e,t),i.enqueueChange(()=>{r.requestUndoOnBackspace()})})}};function $0e(n){return n.length>z0e&&n[n.length-1]===" "&&n[n.length-2]!==" "}function zz(n){let e=Wz.exec(n);return e?e[j0e]:null}function W0e(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function q0e(n){let e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}var kC=class extends k{static get requires(){return[TC,LD,FD]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}};var Ni=class{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=He(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){let r=new this(e,t)[Symbol.iterator]();return it(r)}*[Symbol.iterator](){let e=[];for(let{node:t}of Ib(this._getStartNode(),this._isForward?"forward":"backward")){let i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*ot(e),e.length=0);break}continue}if(this._sameAttributes.some(r=>t.getAttribute(r)!==this._startElement.getAttribute(r)))break}e.length&&(yield*ot(e),e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}};function*Ib(n,e="forward"){let t=e=="forward",i=[],r=null;for(;gn(n);){let o=null;if(r){let s=n.getAttribute("listIndent"),a=r.getAttribute("listIndent");s>a?i[a]=r:s<a?(o=i[s],i.length=s):o=r}yield{node:n,previous:r,previousNodeInList:o},r=n,n=t?n.nextSibling:n.previousSibling}}var UD=class{_listHead;constructor(e){this._listHead=e}[Symbol.iterator](){return Ib(this._listHead,"forward")}},Ml=class{static next(){return Xt()}};function gn(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function KD(n,e={}){return[...Ol(n,P(v({},e),{direction:"backward"})),...Ol(n,P(v({},e),{direction:"forward"}))]}function Ol(n,e={}){let t=e.direction=="forward",i=Array.from(new Ni(n,P(v({},e),{includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"})));return t?i:i.reverse()}function G0e(n){return Array.from(new Ni(n,{direction:"forward",higherIndent:!0}))}function Xz(n,e){let t=new Ni(n,v({sameIndent:!0,sameAttributes:"listType"},e)),i=new Ni(n,v({sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward"},e));return[...Array.from(t).reverse(),...i]}function Lu(n){return!Ni.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function qz(n){return!Ni.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function xb(n,e={}){n=He(n);let t=e.withNested!==!1,i=new Set;for(let r of n)for(let o of KD(r,{higherIndent:t}))i.add(o);return Fu(i)}function K0e(n){n=He(n);let e=new Set;for(let t of n)for(let i of Xz(t))e.add(i);return Fu(e)}function YD(n,e){let t=Ol(n,{direction:"forward"}),i=Ml.next();for(let r of t)e.setAttribute("listItemId",i,r);return t}function HD(n,e,t){let i={};for(let[o,s]of e.getAttributes())o.startsWith("list")&&(i[o]=s);let r=Ol(n,{direction:"forward"});for(let o of r)t.setAttributes(i,o);return r}function zD(n,e,{expand:t,indentBy:i=1}={}){n=He(n);let r=t?xb(n):n;for(let o of r){let s=o.getAttribute("listIndent")+i;s<0?DC(o,e):e.setAttribute("listIndent",s,o)}return r}function Y0e(n,e){n=He(n);let t=xb(n),i=new Set,r=Math.min(...t.map(s=>s.getAttribute("listIndent"))),o=new Map;for(let s of t)o.set(s,Ni.first(s,{lowerIndent:!0}));for(let s of t){if(i.has(s))continue;i.add(s);let a=s.getAttribute("listIndent")-1;if(a<0){DC(s,e);continue}if(s.getAttribute("listIndent")==r){let l=J0e(s,o.get(s),e);for(let c of l)i.add(c);if(l.length)continue}e.setAttribute("listIndent",a,s)}return Fu(i)}function DC(n,e){n=He(n);for(let t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(let t of n)for(let i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function kb(n){if(!n.length)return!1;let e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function Q0e(n,e){let t=[],i=Number.POSITIVE_INFINITY;for(let{node:r}of Ib(n.nextSibling,"forward")){let o=r.getAttribute("listIndent");if(o==0)break;o<i&&(i=o);let s=o-i;e.setAttribute("listIndent",s,r),t.push(r)}return t}function Fu(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function Ab(n){let e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function BD(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function Z0e(n){return n=="numbered"||n=="customNumbered"}function J0e(n,e,t){return Ol(e,{direction:"forward"}).pop().index>n.index?HD(n,e,t):[]}var IC=class extends J{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){let e=this.editor.model,t=Gz(e.document.selection);e.change(i=>{let r=[];kb(t)&&!Lu(t[0])?(this._direction=="forward"&&r.push(...zD(t,i)),r.push(...YD(t[0],i))):this._direction=="forward"?r.push(...zD(t,i,{expand:!0})):r.push(...Y0e(t,i));for(let o of r){if(!o.hasAttribute("listType"))continue;let s=Ni.first(o,{sameIndent:!0});s&&i.setAttribute("listType",s.getAttribute("listType"),o)}this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Fu(new Set(e)))}_checkEnabled(){let e=Gz(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||kb(e)&&!Lu(e[0]))return!0;e=xb(e),t=e[0];let i=Ni.first(t,{sameIndent:!0});return i?i.getAttribute("listType")==t.getAttribute("listType"):!1}};function Gz(n){let e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!gn(i));return t!=-1&&(e.length=t),e}var Jf=class extends J{type;_listWalkerOptions;constructor(e,t,i={}){super(e),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){let t=this.editor.model,i=t.document,r=Ab(t),o=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||BD(a,t.schema)),s=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(s){let l=o[o.length-1],c=Ol(l,{direction:"forward"}),u=[];c.length>1&&u.push(...YD(c[1],a)),u.push(...DC(o,a)),u.push(...Q0e(l,a)),this._fireAfterExecute(u)}else if((r||i.selection.isCollapsed)&&gn(o[0])){let l=Xz(r||o[0],this._listWalkerOptions);for(let c of l)a.setAttributes(P(v({},e.additionalAttributes),{listType:this.type}),c);this._fireAfterExecute(l)}else{let l=[];for(let c of o)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&BD(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes(P(v({},e.additionalAttributes),{listIndent:0,listItemId:Ml.next(),listType:this.type}),c),l.push(c);else for(let u of xb(c,{withNested:!1}))u.getAttribute("listType")!=this.type&&(a.setAttributes(P(v({},e.additionalAttributes),{listType:this.type}),u),l.push(u));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",Fu(new Set(e)))}_getValue(){let e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(let i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){let e=this.editor.model,t=e.schema,i=e.document.selection,r=Array.from(i.getSelectedBlocks());if(!r.length)return!1;if(this.value)return!0;for(let o of r)if(t.checkAttribute(o,"listType")||BD(o,t))return!0;return!1}},xC=class extends J{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){let t=this.editor.model,i=t.document.selection,r=[];t.change(o=>{let{firstElement:s,lastElement:a}=this._getMergeSubjectElements(i,e),l=s.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),u=a.getAttribute("listItemId");if(l!=c){let h=G0e(a);r.push(...zD([a,...h],o,{indentBy:l-c,expand:l<c}))}if(e){let h=i;i.isCollapsed&&(h=o.createSelection(o.createRange(o.createPositionAt(s,"end"),o.createPositionAt(a,0)))),t.deleteContent(h,{doNotResetEntireContent:i.isCollapsed});let p=h.getLastPosition().parent,g=p.nextSibling;r.push(p),g&&g!==a&&g.getAttribute("listItemId")==u&&r.push(...HD(g,p,o))}else r.push(...HD(a,s,o));this._fireAfterExecute(r)})}_fireAfterExecute(e){this.fire("afterExecute",Fu(new Set(e)))}_checkEnabled(){let e=this.editor.model,t=e.document.selection,i=Ab(e);if(t.isCollapsed||i){let r=i||t.getFirstPosition().parent;if(!gn(r))return!1;let o=this._direction=="backward"?r.previousSibling:r.nextSibling;if(!o||kb([r,o]))return!1}else{let r=t.getLastPosition(),o=t.getFirstPosition();if(r.parent===o.parent||!gn(r.parent))return!1}return!0}_getMergeSubjectElements(e,t){let i=this.editor.model,r=Ab(i),o,s;if(e.isCollapsed||r){let a=r||e.getFirstPosition().parent,l=Lu(a);this._direction=="backward"?(s=a,l&&!t?o=Ni.first(a,{sameIndent:!0,lowerIndent:!0}):o=a.previousSibling):(o=a,s=a.nextSibling)}else o=e.getFirstPosition().parent,s=e.getLastPosition().parent;return{firstElement:o,lastElement:s}}},PC=class extends J{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{let i=YD(this._getStartBlock(),t);this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",Fu(new Set(e)))}_checkEnabled(){let e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&gn(t)&&!Lu(t)}_getStartBlock(){let t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}},jD=class extends k{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return K0e(e)}isFirstBlockOfListItem(e){return Lu(e)}isListItemBlock(e){return gn(e)}expandListBlocksToCompleteItems(e,t={}){return xb(e,t)}isNumberedListType(e){return Z0e(e)}};function X0e(n){return n.is("element","ol")||n.is("element","ul")}function $D(n){return n.is("element","li")}function eve(n){let e=0,t=n.parent;for(;t;){if($D(t))e++;else{let i=t.previousSibling;i&&$D(i)&&e++}t=t.parent}return e}function tve(n,e,t,i=tj(t,e)){return n.createAttributeElement(ej(t),null,{priority:2*e/100-100,id:i})}function nve(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function ej(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function tj(n,e){return`list-${n}-${e}`}function io(n,e){let t=n.nodeBefore;if(gn(t)){let i=t;for(let{node:r}of Ib(i,"backward"))if(i=r,e.has(i))return;e.set(t,i)}else{let i=n.nodeAfter;gn(i)&&e.set(i,i)}}function ive(n,e){let t=0,i=-1,r=null,o=!1;for(let{node:s}of n){let a=s.getAttribute("listIndent");if(a>t){let l;r===null?(r=a-t,l=t):(r>a&&(r=a),l=a-r),l>i+1&&(l=i+1),e.setAttribute("listIndent",l,s),o=!0,i=l}else r=null,t=a+1,i=a}return o}function rve(n,e,t){let i=new Set,r=!1;for(let{node:o}of n){if(i.has(o))continue;let s=o.getAttribute("listType"),a=o.getAttribute("listItemId");if(e.has(a)&&(a=Ml.next()),e.add(a),o.is("element","listItem")){o.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,o),r=!0);continue}for(let l of Ol(o,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=s&&(a=Ml.next(),s=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,l),r=!0)}return r}function ove(){return(n,e,t)=>{let{writer:i,schema:r}=t;if(!e.modelRange)return;let o=Array.from(e.modelRange.getItems({shallow:!0})).filter(h=>r.checkAttribute(h,"listItemId"));if(!o.length)return;let s=Ml.next(),a=eve(e.viewItem),l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted",c=o[0].getAttribute("listType");c&&(l=c);let u={listItemId:s,listIndent:a,listType:l};for(let h of o)h.hasAttribute("listItemId")||i.setAttributes(u,h);o.length>1&&o[1].getAttribute("listItemId")!=u.listItemId&&t.keepEmptyElement(o[0])}}function sve(n,e,t,i){return()=>{let a=n.document.differ.getChanges(),l=[],c=new Map,u=new Set;for(let h of a)if(h.type=="insert"&&h.name!="$text")io(h.position,c),h.attributes.has("listItemId")?u.add(h.position.nodeAfter):io(h.position.getShiftedBy(h.length),c);else if(h.type=="remove"&&h.attributes.has("listItemId"))io(h.position,c);else if(h.type=="attribute"){let p=h.range.start.nodeAfter;t.includes(h.attributeKey)?(io(h.range.start,c),h.attributeNewValue===null?(io(h.range.start.getShiftedBy(1),c),o(p)&&l.push(p)):u.add(p)):gn(p)&&o(p)&&l.push(p)}for(let h of c.values())l.push(...r(h,u));for(let h of new Set(l))e.reconvertItem(h)};function r(a,l){let c=[],u=new Set,h=[];for(let{node:p,previous:g}of Ib(a,"forward")){if(u.has(p))continue;let w=p.getAttribute("listIndent");g&&w<g.getAttribute("listIndent")&&(h.length=w+1),h[w]=Object.fromEntries(Array.from(p.getAttributes()).filter(([E])=>t.includes(E)));let y=Ol(p,{direction:"forward"});for(let E of y)u.add(E),(o(E,y)||s(E,h,l))&&c.push(E)}return c}function o(a,l){let c=e.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;let h=ij(a,t,l);return h&&c.is("element","p")?!0:!!(!h&&c.is("element","span"))}function s(a,l,c){if(c.has(a))return!1;let u=e.mapper.toViewElement(a),h=l.length-1;for(let p=u.parent;!p.is("editableElement");p=p.parent){let g=$D(p),w=X0e(p);if(!w&&!g)continue;let y=`checkAttributes:${g?"item":"list"}`;if(i.fire(y,{viewElement:p,modelAttributes:l[h]}))break;if(w&&(h--,h<0))return!1}return!0}}function Kz(n,e,t,{dataPipeline:i}={}){let r=fve(n);return(o,s,a)=>{let{writer:l,mapper:c,consumable:u}=a,h=s.item;if(!n.includes(s.attributeKey)||!r(h,u))return;let p=lve(h,c,t);nj(p,l,c),dve(p,l);let g=uve(h,p,e,l,{dataPipeline:i});hve(h,g,e,l)}}function ave(n){return(e,t,i)=>{let{writer:r,mapper:o}=i,s=e.name.split(":")[1];if(!n.checkAttribute(s,"listItemId"))return;let a=o.toViewPosition(t.position),l=t.position.getShiftedBy(t.length),c=o.toViewPosition(l,{isPhantom:!0}),h=r.createRange(a,c).getTrimmed().end.nodeBefore;h&&nj(h,r,o)}}function Yz(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!ij(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});let r=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,r),r}}function lve(n,e,t){let i=t.createRangeOn(n);return e.toViewRange(i).getTrimmed().end.nodeBefore}function cve(n,e){return(t,i)=>{if(i.modelPosition.offset>0)return;let r=i.modelPosition.parent;if(!gn(r)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(r)))return;let o=i.mapper.toViewElement(r),s=e.createRangeIn(o),a=s.getWalker(),l=s.start;for(let{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:u})=>!u.isEqual(l)))}i.viewPosition=l}}function nj(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);let i=[];r(e.createPositionBefore(n).getWalker({direction:"backward"})),r(e.createRangeIn(n).getWalker());for(let o of i)e.remove(o);function r(o){for(let{item:s}of o){if(s.is("element")&&t.toModelElement(s))break;s.is("element")&&s.getCustomProperty("listItemMarker")&&i.push(s)}}}function uve(n,e,t,i,{dataPipeline:r}){let o=i.createRangeOn(e);if(!Lu(n))return o;for(let s of t){if(s.scope!="itemMarker")continue;let a=s.createElement(i,n,{dataPipeline:r});if(!a||(i.setCustomProperty("listItemMarker",!0,a),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(e,0),a):(i.insert(o.start,a),o=i.createRange(i.createPositionBefore(a),i.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement))continue;let l=s.createWrapperElement(i,n,{dataPipeline:r});i.setCustomProperty("listItemWrapper",!0,l),s.canWrapElement(n)?o=i.wrap(o,l):(o=i.wrap(i.createRangeOn(a),l),o=i.createRange(o.start,i.createPositionAfter(e)))}return o}function dve(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){let i=t.parent;e.unwrap(e.createRangeOn(n),t),t=i}}function hve(n,e,t,i){if(!n.hasAttribute("listIndent"))return;let r=n.getAttribute("listIndent"),o=n;for(let s=r;s>=0;s--){let a=nve(i,s,o.getAttribute("listItemId")),l=tve(i,s,o.getAttribute("listType"));for(let c of t)(c.scope=="list"||c.scope=="item")&&o.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,o.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=i.wrap(e,a),e=i.wrap(e,l),s==0||(o=Ni.first(o,{lowerIndent:!0}),!o))break}}function fve(n){return(e,t)=>{let i=[];for(let r of n)e.hasAttribute(r)&&i.push(`attribute:${r}`);return i.every(r=>t.test(e,r)!==!1)?(i.forEach(r=>t.consume(e,r)),!0):!1}}function ij(n,e,t=KD(n)){if(!gn(n))return!1;for(let i of n.getAttributeKeys())if(!i.startsWith("selection:")&&!e.includes(i))return!1;return t.length<2}var AC=["listType","listIndent","listItemId"],WD=class extends k{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[no,Kn,jD,on]}constructor(e){super(e),e.config.define("list.multiBlock",!0)}init(){let e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new C("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:AC}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(let r of AC)t.schema.setAttributeProperties(r,{copyOnReplace:!0});e.commands.add("numberedList",new Jf(e,"numbered")),e.commands.add("bulletedList",new Jf(e,"bulleted")),e.commands.add("customNumberedList",new Jf(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Jf(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new IC(e,"forward")),e.commands.add("outdentList",new IC(e,"backward")),e.commands.add("splitListItemBefore",new PC(e,"before")),e.commands.add("splitListItemAfter",new PC(e,"after")),i&&(e.commands.add("mergeListItemBackward",new xC(e,"backward")),e.commands.add("mergeListItemForward",new xC(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){let t=this.editor.commands,i=t.get("indent"),r=t.get("outdent");i&&i.registerChildCommand(t.get("indentList"),{priority:"high"}),r&&r.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...AC,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){let e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(r,o)=>{let s=e.model.document.selection;Ab(e.model)||e.model.change(()=>{let a=s.getFirstPosition();if(s.isCollapsed&&o.direction=="backward"){if(!a.isAtStart)return;let l=a.parent;if(!gn(l))return;if(!Ni.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)qz(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:Qz(e.model,"backward")})}o.preventDefault(),r.stop()}else{if(s.isCollapsed&&!s.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:Qz(e.model,"forward")}),o.preventDefault(),r.stop()}})},{context:"li"})}_setupEnterIntegration(){let e=this.editor,t=e.model,i=e.commands,r=i.get("enter");this.listenTo(e.editing.view.document,"enter",(o,s)=>{let a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&gn(l)&&l.isEmpty&&!s.isSoft){let c=Lu(l),u=qz(l);c&&u?(e.execute("outdentList"),s.preventDefault(),o.stop()):c&&!u?(e.execute("splitListItemAfter"),s.preventDefault(),o.stop()):u&&(e.execute("splitListItemBefore"),s.preventDefault(),o.stop())}},{context:"li"}),this.listenTo(r,"afterExecute",()=>{let o=i.get("splitListItemBefore");if(o.refresh(),!o.isEnabled)return;let a=e.model.document.selection.getLastPosition().parent;KD(a).length===2&&o.execute()})}_setupTabIntegration(){let e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{let r=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(r).isEnabled&&(e.execute(r),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){let e=this.editor,t=e.model,i=this.getListAttributeNames(),r=e.config.get("list.multiBlock"),o=r?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(o,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(o,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",ove())}),r||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:o,view:Yz(i),converterPriority:"high"}).add(a=>{a.on("attribute",Kz(i,this._downcastStrategies,t)),a.on("remove",ave(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:o,view:Yz(i,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",Kz(i,this._downcastStrategies,t,{dataPipeline:!0}))});let s=cve(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",s),e.data.mapper.on("modelToViewPosition",s),this.listenTo(t.document,"change:data",sve(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=ej(c.listType)||l.id!=tj(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){let e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>mve(e,i,t,this)),this.on("postFixer",(i,{listNodes:r,writer:o})=>{i.return=ive(r,o)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:r,writer:o,seenIds:s})=>{i.return=rve(r,s,o)||i.return},{priority:"high"})}_setupClipboardIntegration(){let e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",pve(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,r)=>{e.change(o=>{let s=Array.from(r.content.getChildren()),a=s[s.length-1];if(s.length>1&&a.is("element")&&a.isEmpty&&s.slice(0,-1).every(gn)&&o.remove(a),r.method=="copy"||r.method=="cut"){let l=Array.from(r.content.getChildren());kb(l)&&DC(l,o)}})})}_setupAccessibilityIntegration(){let e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}};function mve(n,e,t,i){let r=n.document.differ.getChanges(),o=new Map,s=i.editor.config.get("list.multiBlock"),a=!1;for(let c of r){if(c.type=="insert"&&c.name!="$text"){let u=c.position.nodeAfter;if(!n.schema.checkAttribute(u,"listItemId"))for(let h of Array.from(u.getAttributeKeys()))t.includes(h)&&(e.removeAttribute(h,u),a=!0);io(c.position,o),c.attributes.has("listItemId")||io(c.position.getShiftedBy(c.length),o);for(let{item:h,previousPosition:p}of n.createRangeIn(u))gn(h)&&io(p,o)}else c.type=="remove"?io(c.position,o):c.type=="attribute"&&t.includes(c.attributeKey)&&(io(c.range.start,o),c.attributeNewValue===null&&io(c.range.start.getShiftedBy(1),o));if(!s&&c.type=="attribute"&&AC.includes(c.attributeKey)){let u=c.range.start.nodeAfter;c.attributeNewValue===null&&u&&u.is("element","listItem")?(e.rename(u,"paragraph"),a=!0):c.attributeOldValue===null&&u&&u.is("element")&&u.name!="listItem"&&(e.rename(u,"listItem"),a=!0)}}let l=new Set;for(let c of o.values())a=i.fire("postFixer",{listNodes:new UD(c),listHead:c,writer:e,seenIds:l})||a;return a}function pve(n){return(e,[t,i])=>{let r=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!r.length)return;let s=(i?n.createSelection(i):n.document.selection).getFirstPosition(),a;if(gn(s.parent))a=s.parent;else if(gn(s.nodeBefore))a=s.nodeBefore;else return;n.change(l=>{let c=a.getAttribute("listType"),u=a.getAttribute("listIndent"),h=r[0].getAttribute("listIndent")||0,p=Math.max(u-h,0);for(let g of r){let w=gn(g);a.is("element","listItem")&&g.is("element","paragraph")&&l.rename(g,"listItem"),l.setAttributes({listIndent:(w?g.getAttribute("listIndent"):0)+p,listItemId:w?g.getAttribute("listItemId"):Ml.next(),listType:c},g)}})}}function Qz(n,e){let t=n.document.selection;if(!t.isCollapsed)return!Ab(n);if(e==="forward")return!0;let r=t.getFirstPosition().parent,o=r.previousSibling;return n.schema.isObject(o)?!1:o.isEmpty?!0:kb([r,o])}function Zz(n,e,t,i){n.ui.componentFactory.add(e,()=>{let r=Jz(te,n,e,t,i);return r.set({tooltip:!0,isToggleable:!0}),r}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{let r=Jz(ye,n,e,t,i);return r.set({role:"menuitemcheckbox",isToggleable:!0}),r})}function Jz(n,e,t,i,r){let o=e.commands.get(t),s=new n(e.locale);return s.set({label:i,icon:r}),s.bind("isOn","isEnabled").to(o,"value","isEnabled"),s.on("execute",()=>{e.execute(t),e.editing.view.focus()}),s}var qD=class extends k{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||Zz(this.editor,"numberedList",e("Numbered List"),U.numberedList),this.editor.ui.componentFactory.has("bulletedList")||Zz(this.editor,"bulletedList",e("Bulleted List"),U.bulletedList)}},RC=class extends k{static get requires(){return[WD,qD]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}};var gve={},bve={},wve={},vve=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(let{listStyle:n,typeAttribute:e,listType:t}of vve)gve[n]=t,bve[n]=e,e&&(wve[e]=n);function uj(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Xf=uj();function yve(n){Xf=n}var _ve=/[&<>"']/,Cve=/[&<>"']/g,Eve=/[<>"']|&(?!#?\w+;)/,Sve=/[<>"']|&(?!#?\w+;)/g,Tve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rj=n=>Tve[n];function Sn(n,e){if(e){if(_ve.test(n))return n.replace(Cve,rj)}else if(Eve.test(n))return n.replace(Sve,rj);return n}var kve=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function dj(n){return n.replace(kve,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var Ave=/(^|[^\[])\^/g;function vt(n,e){n=n.source||n,e=e||"";let t={replace:(i,r)=>(r=r.source||r,r=r.replace(Ave,"$1"),n=n.replace(i,r),t),getRegex:()=>new RegExp(n,e)};return t}var Ive=/[^\w:]/g,xve=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function oj(n,e,t){if(n){let i;try{i=decodeURIComponent(dj(t)).replace(Ive,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!xve.test(t)&&(t=Mve(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var MC={},Pve=/^[^:]+:\/*[^/]*$/,Rve=/^([^:]+:)[\s\S]*$/,Dve=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Mve(n,e){MC[" "+n]||(Pve.test(n)?MC[" "+n]=n+"/":MC[" "+n]=OC(n,"/",!0)),n=MC[" "+n];let t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Rve,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Dve,"$1")+e:n+e}var NC={exec:function(){}};function ro(n){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function sj(n,e){let t=n.replace(/\|/g,(o,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/),r=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(/\\\|/g,"|");return i}function OC(n,e,t){let i=n.length;if(i===0)return"";let r=0;for(;r<i;){let o=n.charAt(i-r-1);if(o===e&&!t)r++;else if(o!==e&&t)r++;else break}return n.substr(0,i-r)}function Ove(n,e){if(n.indexOf(e[1])===-1)return-1;let t=n.length,i=0,r=0;for(;r<t;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])i++;else if(n[r]===e[1]&&(i--,i<0))return r;return-1}function hj(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function aj(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function lj(n,e,t,i){let r=e.href,o=e.title?Sn(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;let a={type:"link",raw:t,href:r,title:o,text:s,tokens:i.inlineTokens(s,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:r,title:o,text:Sn(s)}}function Nve(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let i=t[1];return e.split(`
`).map(r=>{let o=r.match(/^\s+/);if(o===null)return r;let[s]=o;return s.length>=i.length?r.slice(i.length):r}).join(`
`)}var Pb=class{constructor(e){this.options=e||Xf}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:OC(i,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let i=t[0],r=Nve(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){let o=OC(i,"#");(this.options.pedantic||!o||/ $/.test(o))&&(i=o.trim())}let r={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(r.text,r.tokens),r}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,r,o,s,a,l,c,u,h,p,g,w,y=t[1].trim(),E=y.length>1,T={type:"list",raw:"",ordered:E,start:E?+y.slice(0,-1):"",loose:!1,items:[]};y=E?`\\d{1,9}\\${y.slice(-1)}`:`\\${y}`,this.options.pedantic&&(y=E?y:"[*+-]");let x=new RegExp(`^( {0,3}${y})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(w=!1,!(!(t=x.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),u=t[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,g=u.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,g=u.slice(s),s+=t[1].length),l=!1,!u&&/^ *$/.test(h)&&(i+=h+`
`,e=e.substring(h.length+1),w=!0),!w){let Q=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(p=e.split(`
`,1)[0],u=p,this.options.pedantic&&(u=u.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Q.test(u));){if(u.search(/[^ ]/)>=s||!u.trim())g+=`
`+u.slice(s);else if(!l)g+=`
`+u;else break;!l&&!u.trim()&&(l=!0),i+=p+`
`,e=e.substring(p.length+1)}}T.loose||(c?T.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(r=/^\[[ xX]\] /.exec(g),r&&(o=r[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),T.items.push({type:"list_item",raw:i,task:!!r,checked:o,loose:!1,text:g}),T.raw+=i}T.items[T.items.length-1].raw=i.trimRight(),T.items[T.items.length-1].text=g.trimRight(),T.raw=T.raw.trimRight();let V=T.items.length;for(a=0;a<V;a++){this.lexer.state.top=!1,T.items[a].tokens=this.lexer.blockTokens(T.items[a].text,[]);let Q=T.items[a].tokens.filter(N=>N.type==="space"),he=Q.every(N=>{let $=N.raw.split(""),H=0;for(let qe of $)if(qe===`
`&&(H+=1),H>1)return!0;return!1});!T.loose&&Q.length&&he&&(T.loose=!0,T.items[a].loose=!0)}return T}}html(e){let t=this.rules.block.html.exec(e);if(t){let i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):Sn(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){let t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){let t=this.rules.block.table.exec(e);if(t){let i={type:"table",header:sj(t[1]).map(r=>({text:r})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let r=i.align.length,o,s,a,l;for(o=0;o<r;o++)/^ *-+: *$/.test(i.align[o])?i.align[o]="right":/^ *:-+: *$/.test(i.align[o])?i.align[o]="center":/^ *:-+ *$/.test(i.align[o])?i.align[o]="left":i.align[o]=null;for(r=i.rows.length,o=0;o<r;o++)i.rows[o]=sj(i.rows[o],i.header.length).map(c=>({text:c}));for(r=i.header.length,s=0;s<r;s++)i.header[s].tokens=[],this.lexer.inlineTokens(i.header[s].text,i.header[s].tokens);for(r=i.rows.length,s=0;s<r;s++)for(l=i.rows[s],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){let t=this.rules.block.text.exec(e);if(t){let i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Sn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):Sn(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;let s=OC(i.slice(0,-1),"\\");if((i.length-s.length)%2===0)return}else{let s=Ove(t[2],"()");if(s>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let r=t[2],o="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),lj(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let r=(i[2]||i[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r||!r.href){let o=i[0].charAt(0);return{type:"text",raw:o,text:o}}return lj(i,r,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;let o=r[1]||r[2]||"";if(!o||o&&(i===""||this.rules.inline.punctuation.exec(i))){let s=r[0].length-1,a,l,c=s,u=0,h=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(r=h.exec(t))!=null;){if(a=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!a)continue;if(l=a.length,r[3]||r[4]){c+=l;continue}else if((r[5]||r[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+u),Math.min(s,l)%2){let g=e.slice(1,s+r.index+l);return{type:"em",raw:e.slice(0,s+r.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}let p=e.slice(2,s+r.index+l-1);return{type:"strong",raw:e.slice(0,s+r.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," "),r=/[^ ]/.test(i),o=/^ /.test(i)&&/ $/.test(i);return r&&o&&(i=i.substring(1,i.length-1)),i=Sn(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let i=this.rules.inline.autolink.exec(e);if(i){let r,o;return i[2]==="@"?(r=Sn(this.options.mangle?t(i[1]):i[1]),o="mailto:"+r):(r=Sn(i[1]),o=r),{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let r,o;if(i[2]==="@")r=Sn(this.options.mangle?t(i[0]):i[0]),o="mailto:"+r;else{let s;do s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(s!==i[0]);r=Sn(i[0]),i[1]==="www."?o="http://"+r:o=r}return{type:"link",raw:i[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t){let i=this.rules.inline.text.exec(e);if(i){let r;return this.lexer.state.inRawBlock?r=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Sn(i[0]):i[0]:r=Sn(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:r}}}},de={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:NC,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};de._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;de._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;de.def=vt(de.def).replace("label",de._label).replace("title",de._title).getRegex();de.bullet=/(?:[*+-]|\d{1,9}[.)])/;de.listItemStart=vt(/^( *)(bull) */).replace("bull",de.bullet).getRegex();de.list=vt(de.list).replace(/bull/g,de.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+de.def.source+")").getRegex();de._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";de._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;de.html=vt(de.html,"i").replace("comment",de._comment).replace("tag",de._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();de.paragraph=vt(de._paragraph).replace("hr",de.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de._tag).getRegex();de.blockquote=vt(de.blockquote).replace("paragraph",de.paragraph).getRegex();de.normal=ro({},de);de.gfm=ro({},de.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});de.gfm.table=vt(de.gfm.table).replace("hr",de.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de._tag).getRegex();de.gfm.paragraph=vt(de._paragraph).replace("hr",de.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",de.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de._tag).getRegex();de.pedantic=ro({},de.normal,{html:vt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",de._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:NC,paragraph:vt(de.normal._paragraph).replace("hr",de.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",de.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Z={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:NC,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:NC,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Z._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Z.punctuation=vt(Z.punctuation).replace(/punctuation/g,Z._punctuation).getRegex();Z.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Z.escapedEmSt=/\\\*|\\_/g;Z._comment=vt(de._comment).replace("(?:-->|$)","-->").getRegex();Z.emStrong.lDelim=vt(Z.emStrong.lDelim).replace(/punct/g,Z._punctuation).getRegex();Z.emStrong.rDelimAst=vt(Z.emStrong.rDelimAst,"g").replace(/punct/g,Z._punctuation).getRegex();Z.emStrong.rDelimUnd=vt(Z.emStrong.rDelimUnd,"g").replace(/punct/g,Z._punctuation).getRegex();Z._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Z._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Z._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Z.autolink=vt(Z.autolink).replace("scheme",Z._scheme).replace("email",Z._email).getRegex();Z._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Z.tag=vt(Z.tag).replace("comment",Z._comment).replace("attribute",Z._attribute).getRegex();Z._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Z._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Z._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Z.link=vt(Z.link).replace("label",Z._label).replace("href",Z._href).replace("title",Z._title).getRegex();Z.reflink=vt(Z.reflink).replace("label",Z._label).replace("ref",de._label).getRegex();Z.nolink=vt(Z.nolink).replace("ref",de._label).getRegex();Z.reflinkSearch=vt(Z.reflinkSearch,"g").replace("reflink",Z.reflink).replace("nolink",Z.nolink).getRegex();Z.normal=ro({},Z);Z.pedantic=ro({},Z.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:vt(/^!?\[(label)\]\((.*?)\)/).replace("label",Z._label).getRegex(),reflink:vt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Z._label).getRegex()});Z.gfm=ro({},Z.normal,{escape:vt(Z.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Z.gfm.url=vt(Z.gfm.url,"i").replace("email",Z.gfm._extended_email).getRegex();Z.breaks=ro({},Z.gfm,{br:vt(Z.br).replace("{2,}","*").getRegex(),text:vt(Z.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Lve(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function cj(n){let e="",t,i,r=n.length;for(t=0;t<r;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var Nl=class n{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xf,this.options.tokenizer=this.options.tokenizer||new Pb,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:de.normal,inline:Z.normal};this.options.pedantic?(t.block=de.pedantic,t.inline=Z.pedantic):this.options.gfm&&(t.block=de.gfm,this.options.breaks?t.inline=Z.breaks:t.inline=Z.gfm),this.tokenizer.rules=t}static get rules(){return{block:de,inline:Z}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,r,o,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&(r.type==="paragraph"||r.type==="text")?(r.raw+=`
`+i.raw,r.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=r.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(o=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(o))){r=t[t.length-1],s&&r.type==="paragraph"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i),s=o.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&r.type==="text"?(r.raw+=`
`+i.raw,r.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=r.text):t.push(i);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,r,o,s=e,a,l,c;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+aj("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+aj("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),r=t[t.length-1],r&&i.type==="text"&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,cj)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,cj))){e=e.substring(i.raw.length),t.push(i);continue}if(o=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0,h=e.slice(1),p;this.options.extensions.startInline.forEach(function(g){p=g.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(o=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(o,Lve)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,r=t[t.length-1],r&&r.type==="text"?(r.raw+=i.raw,r.text+=i.text):t.push(i);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},Rb=class{constructor(e){this.options=e||Xf}code(e,t,i){let r=(t||"").match(/\S*/)[0];if(this.options.highlight){let o=this.options.highlight(e,r);o!=null&&o!==e&&(i=!0,e=o)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+Sn(r,!0)+'">'+(i?e:Sn(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:Sn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){let r=t?"ol":"ul",o=t&&i!==1?' start="'+i+'"':"";return"<"+r+o+`>
`+e+"</"+r+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=oj(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r='<a href="'+Sn(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+i+"</a>",r}image(e,t,i){if(e=oj(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let r='<img src="'+e+'" alt="'+i+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},LC=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},FC=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,r=0;if(this.seen.hasOwnProperty(i)){r=this.seen[e];do r++,i=e+"-"+r;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=r,this.seen[i]=0),i}slug(e,t={}){let i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}},Ll=class n{constructor(e){this.options=e||Xf,this.options.renderer=this.options.renderer||new Rb,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new LC,this.slugger=new FC}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let i="",r,o,s,a,l,c,u,h,p,g,w,y,E,T,x,V,Q,he,N,$=e.length;for(r=0;r<$;r++){if(g=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(N=this.options.extensions.renderers[g.type].call({parser:this},g),N!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){i+=N||"";continue}switch(g.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(g.tokens),g.depth,dj(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(g.text,g.lang,g.escaped);continue}case"table":{for(h="",u="",a=g.header.length,o=0;o<a;o++)u+=this.renderer.tablecell(this.parseInline(g.header[o].tokens),{header:!0,align:g.align[o]});for(h+=this.renderer.tablerow(u),p="",a=g.rows.length,o=0;o<a;o++){for(c=g.rows[o],u="",l=c.length,s=0;s<l;s++)u+=this.renderer.tablecell(this.parseInline(c[s].tokens),{header:!1,align:g.align[s]});p+=this.renderer.tablerow(u)}i+=this.renderer.table(h,p);continue}case"blockquote":{p=this.parse(g.tokens),i+=this.renderer.blockquote(p);continue}case"list":{for(w=g.ordered,y=g.start,E=g.loose,a=g.items.length,p="",o=0;o<a;o++)x=g.items[o],V=x.checked,Q=x.task,T="",x.task&&(he=this.renderer.checkbox(V),E?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=he+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=he+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:he}):T+=he),T+=this.parse(x.tokens,E),p+=this.renderer.listitem(T,Q,V);i+=this.renderer.list(p,w,y);continue}case"html":{i+=this.renderer.html(g.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(g.tokens));continue}case"text":{for(p=g.tokens?this.parseInline(g.tokens):g.text;r+1<$&&e[r+1].type==="text";)g=e[++r],p+=`
`+(g.tokens?this.parseInline(g.tokens):g.text);i+=t?this.renderer.paragraph(p):p;continue}default:{let H='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(H);return}else throw new Error(H)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",r,o,s,a=e.length;for(r=0;r<a;r++){if(o=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(s=this.options.extensions.renderers[o.type].call({parser:this},o),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){i+=s||"";continue}switch(o.type){case"escape":{i+=t.text(o.text);break}case"html":{i+=t.html(o.text);break}case"link":{i+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{i+=t.image(o.href,o.title,o.text);break}case"strong":{i+=t.strong(this.parseInline(o.tokens,t));break}case"em":{i+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{i+=t.codespan(o.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(o.tokens,t));break}case"text":{i+=t.text(o.text);break}default:{let l='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}};function we(n,e,t){if(typeof n>"u"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=ro({},we.defaults,e||{}),hj(e),t){let i=e.highlight,r;try{r=Nl.lex(n,e)}catch(a){return t(a)}let o=function(a){let l;if(!a)try{e.walkTokens&&we.walkTokens(r,e.walkTokens),l=Ll.parse(r,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!r.length))return o();let s=0;we.walkTokens(r,function(a){a.type==="code"&&(s++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return o(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),s--,s===0&&o()})},0))}),s===0&&o();return}try{let i=Nl.lex(n,e);return e.walkTokens&&we.walkTokens(i,e.walkTokens),Ll.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Sn(i.message+"",!0)+"</pre>";throw i}}we.options=we.setOptions=function(n){return ro(we.defaults,n),yve(we.defaults),we};we.getDefaults=uj;we.defaults=Xf;we.use=function(...n){let e=ro({},...n),t=we.defaults.extensions||{renderers:{},childTokens:{}},i;n.forEach(r=>{if(r.extensions&&(i=!0,r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){let s=t.renderers?t.renderers[o.name]:null;s?t.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:t.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)})),r.renderer){let o=we.defaults.renderer||new Rb;for(let s in r.renderer){let a=o[s];o[s]=(...l)=>{let c=r.renderer[s].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.renderer=o}if(r.tokenizer){let o=we.defaults.tokenizer||new Pb;for(let s in r.tokenizer){let a=o[s];o[s]=(...l)=>{let c=r.tokenizer[s].apply(o,l);return c===!1&&(c=a.apply(o,l)),c}}e.tokenizer=o}if(r.walkTokens){let o=we.defaults.walkTokens;e.walkTokens=function(s){r.walkTokens.call(this,s),o&&o.call(this,s)}}i&&(e.extensions=t),we.setOptions(e)})};we.walkTokens=function(n,e){for(let t of n)switch(e.call(we,t),t.type){case"table":{for(let i of t.header)we.walkTokens(i.tokens,e);for(let i of t.rows)for(let r of i)we.walkTokens(r.tokens,e);break}case"list":{we.walkTokens(t.items,e);break}default:we.defaults.extensions&&we.defaults.extensions.childTokens&&we.defaults.extensions.childTokens[t.type]?we.defaults.extensions.childTokens[t.type].forEach(function(i){we.walkTokens(t[i],e)}):t.tokens&&we.walkTokens(t.tokens,e)}};we.parseInline=function(n,e){if(typeof n>"u"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=ro({},we.defaults,e||{}),hj(e);try{let t=Nl.lexInline(n,e);return e.walkTokens&&we.walkTokens(t,e.walkTokens),Ll.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+Sn(t.message+"",!0)+"</pre>";throw t}};we.Parser=Ll;we.parser=Ll.parse;we.Renderer=Rb;we.TextRenderer=LC;we.Lexer=Nl;we.lexer=Nl.lex;we.Tokenizer=Pb;we.Slugger=FC;we.parse=we;var ptt=we.options,gtt=we.setOptions,btt=we.use,wtt=we.walkTokens,vtt=we.parseInline;var ytt=Ll.parse,_tt=Nl.lex;function Fve(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function XD(n,e){return Array(e+1).join(n)}function Vve(n){return n.replace(/^\n*/,"")}function Bve(n){for(var e=n.length;e>0&&n[e-1]===`
`;)e--;return n.substring(0,e)}var Uve=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function tM(n){return nM(n,Uve)}var pj=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function gj(n){return nM(n,pj)}function Hve(n){return wj(n,pj)}var bj=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function zve(n){return nM(n,bj)}function jve(n){return wj(n,bj)}function nM(n,e){return e.indexOf(n.nodeName)>=0}function wj(n,e){return n.getElementsByTagName&&e.some(function(t){return n.getElementsByTagName(t).length})}var Qn={};Qn.paragraph={filter:"p",replacement:function(n){return`

`+n+`

`}};Qn.lineBreak={filter:"br",replacement:function(n,e,t){return t.br+`
`}};Qn.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(n,e,t){var i=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&i<3){var r=XD(i===1?"=":"-",n.length);return`

`+n+`
`+r+`

`}else return`

`+XD("#",i)+" "+n+`

`}};Qn.blockquote={filter:"blockquote",replacement:function(n){return n=n.replace(/^\n+|\n+$/g,""),n=n.replace(/^/gm,"> "),`

`+n+`

`}};Qn.list={filter:["ul","ol"],replacement:function(n,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+n:`

`+n+`

`}};Qn.listItem={filter:"li",replacement:function(n,e,t){n=n.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var i=t.bulletListMarker+"   ",r=e.parentNode;if(r.nodeName==="OL"){var o=r.getAttribute("start"),s=Array.prototype.indexOf.call(r.children,e);i=(o?Number(o)+s:s+1)+".  "}return i+n+(e.nextSibling&&!/\n$/.test(n)?`
`:"")}};Qn.indentedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="indented"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Qn.fencedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="fenced"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){for(var i=e.firstChild.getAttribute("class")||"",r=(i.match(/language-(\S+)/)||[null,""])[1],o=e.firstChild.textContent,s=t.fence.charAt(0),a=3,l=new RegExp("^"+s+"{3,}","gm"),c;c=l.exec(o);)c[0].length>=a&&(a=c[0].length+1);var u=XD(s,a);return`

`+u+r+`
`+o.replace(/\n$/,"")+`
`+u+`

`}};Qn.horizontalRule={filter:"hr",replacement:function(n,e,t){return`

`+t.hr+`

`}};Qn.inlineLink={filter:function(n,e){return e.linkStyle==="inlined"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var i=VC(e.getAttribute("title"));return i&&(i=' "'+i.replace(/"/g,'\\"')+'"'),"["+n+"]("+t+i+")"}};Qn.referenceLink={filter:function(n,e){return e.linkStyle==="referenced"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e,t){var i=e.getAttribute("href"),r=VC(e.getAttribute("title"));r&&(r=' "'+r+'"');var o,s;switch(t.linkReferenceStyle){case"collapsed":o="["+n+"][]",s="["+n+"]: "+i+r;break;case"shortcut":o="["+n+"]",s="["+n+"]: "+i+r;break;default:var a=this.references.length+1;o="["+n+"]["+a+"]",s="["+a+"]: "+i+r}return this.references.push(s),o},references:[],append:function(n){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};Qn.emphasis={filter:["em","i"],replacement:function(n,e,t){return n.trim()?t.emDelimiter+n+t.emDelimiter:""}};Qn.strong={filter:["strong","b"],replacement:function(n,e,t){return n.trim()?t.strongDelimiter+n+t.strongDelimiter:""}};Qn.code={filter:function(n){var e=n.previousSibling||n.nextSibling,t=n.parentNode.nodeName==="PRE"&&!e;return n.nodeName==="CODE"&&!t},replacement:function(n){if(!n)return"";n=n.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(n)?" ":"",t="`",i=n.match(/`+/gm)||[];i.indexOf(t)!==-1;)t=t+"`";return t+e+n+e+t}};Qn.image={filter:"img",replacement:function(n,e){var t=VC(e.getAttribute("alt")),i=e.getAttribute("src")||"",r=VC(e.getAttribute("title")),o=r?' "'+r+'"':"";return i?"!["+t+"]("+i+o+")":""}};function VC(n){return n?n.replace(/(\n+\s*)+/g,`
`):""}function vj(n){this.options=n,this._keep=[],this._remove=[],this.blankRule={replacement:n.blankReplacement},this.keepReplacement=n.keepReplacement,this.defaultRule={replacement:n.defaultReplacement},this.array=[];for(var e in n.rules)this.array.push(n.rules[e])}vj.prototype={add:function(n,e){this.array.unshift(e)},keep:function(n){this._keep.unshift({filter:n,replacement:this.keepReplacement})},remove:function(n){this._remove.unshift({filter:n,replacement:function(){return""}})},forNode:function(n){if(n.isBlank)return this.blankRule;var e;return(e=QD(this.array,n,this.options))||(e=QD(this._keep,n,this.options))||(e=QD(this._remove,n,this.options))?e:this.defaultRule},forEach:function(n){for(var e=0;e<this.array.length;e++)n(this.array[e],e)}};function QD(n,e,t){for(var i=0;i<n.length;i++){var r=n[i];if($ve(r,e,t))return r}}function $ve(n,e,t){var i=n.filter;if(typeof i=="string"){if(i===e.nodeName.toLowerCase())return!0}else if(Array.isArray(i)){if(i.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof i=="function"){if(i.call(n,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function Wve(n){var e=n.element,t=n.isBlock,i=n.isVoid,r=n.isPre||function(h){return h.nodeName==="PRE"};if(!(!e.firstChild||r(e))){for(var o=null,s=!1,a=null,l=fj(a,e,r);l!==e;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!o||/ $/.test(o.data))&&!s&&c[0]===" "&&(c=c.substr(1)),!c){l=ZD(l);continue}l.data=c,o=l}else if(l.nodeType===1)t(l)||l.nodeName==="BR"?(o&&(o.data=o.data.replace(/ $/,"")),o=null,s=!1):i(l)||r(l)?(o=null,s=!0):o&&(s=!1);else{l=ZD(l);continue}var u=fj(a,l,r);a=l,l=u}o&&(o.data=o.data.replace(/ $/,""),o.data||ZD(o))}}function ZD(n){var e=n.nextSibling||n.parentNode;return n.parentNode.removeChild(n),e}function fj(n,e,t){return n&&n.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var iM=typeof window<"u"?window:{};function qve(){var n=iM.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}function Gve(){var n=function(){};return Kve()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function Kve(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch{iM.ActiveXObject&&(n=!0)}return n}var Yve=qve()?iM.DOMParser:Gve();function Qve(n,e){var t;if(typeof n=="string"){var i=Zve().parseFromString('<x-turndown id="turndown-root">'+n+"</x-turndown>","text/html");t=i.getElementById("turndown-root")}else t=n.cloneNode(!0);return Wve({element:t,isBlock:tM,isVoid:gj,isPre:e.preformattedCode?Jve:null}),t}var JD;function Zve(){return JD=JD||new Yve,JD}function Jve(n){return n.nodeName==="PRE"||n.nodeName==="CODE"}function Xve(n,e){return n.isBlock=tM(n),n.isCode=n.nodeName==="CODE"||n.parentNode.isCode,n.isBlank=eye(n),n.flankingWhitespace=tye(n,e),n}function eye(n){return!gj(n)&&!zve(n)&&/^\s*$/i.test(n.textContent)&&!Hve(n)&&!jve(n)}function tye(n,e){if(n.isBlock||e.preformattedCode&&n.isCode)return{leading:"",trailing:""};var t=nye(n.textContent);return t.leadingAscii&&mj("left",n,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&mj("right",n,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function nye(n){var e=n.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function mj(n,e,t){var i,r,o;return n==="left"?(i=e.previousSibling,r=/ $/):(i=e.nextSibling,r=/^ /),i&&(i.nodeType===3?o=r.test(i.nodeValue):t.preformattedCode&&i.nodeName==="CODE"?o=!1:i.nodeType===1&&!tM(i)&&(o=r.test(i.textContent))),o}var iye=Array.prototype.reduce,rye=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function eM(n){if(!(this instanceof eM))return new eM(n);var e={rules:Qn,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,i){return i.isBlock?`

`:""},keepReplacement:function(t,i){return i.isBlock?`

`+i.outerHTML+`

`:i.outerHTML},defaultReplacement:function(t,i){return i.isBlock?`

`+t+`

`:t}};this.options=Fve({},e,n),this.rules=new vj(this.options)}eM.prototype={turndown:function(n){if(!aye(n))throw new TypeError(n+" is not a string, or an element/document/fragment node.");if(n==="")return"";var e=yj.call(this,new Qve(n,this.options));return oye.call(this,e)},use:function(n){if(Array.isArray(n))for(var e=0;e<n.length;e++)this.use(n[e]);else if(typeof n=="function")n(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(n,e){return this.rules.add(n,e),this},keep:function(n){return this.rules.keep(n),this},remove:function(n){return this.rules.remove(n),this},escape:function(n){return rye.reduce(function(e,t){return e.replace(t[0],t[1])},n)}};function yj(n){var e=this;return iye.call(n.childNodes,function(t,i){i=new Xve(i,e.options);var r="";return i.nodeType===3?r=i.isCode?i.nodeValue:e.escape(i.nodeValue):i.nodeType===1&&(r=sye.call(e,i)),_j(t,r)},"")}function oye(n){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(n=_j(n,t.append(e.options)))}),n.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function sye(n){var e=this.rules.forNode(n),t=yj.call(this,n),i=n.flankingWhitespace;return(i.leading||i.trailing)&&(t=t.trim()),i.leading+e.replacement(t,n,this.options)+i.trailing}function _j(n,e){var t=Bve(n),i=Vve(e),r=Math.max(n.length-t.length,e.length-i.length),o=`

`.substring(0,r);return t+o+i}function aye(n){return n!=null&&(typeof n=="string"||n.nodeType&&(n.nodeType===1||n.nodeType===9||n.nodeType===11))}var lye=Array.prototype.indexOf,cye=Array.prototype.every,BC={};BC.tableCell={filter:["th","td"],replacement:function(n,e){return Ej(n,e)}};BC.tableRow={filter:"tr",replacement:function(n,e){var t="",i={left:":--",right:"--:",center:":-:"};if(Cj(e))for(var r=0;r<e.childNodes.length;r++){var o="---",s=(e.childNodes[r].getAttribute("align")||"").toLowerCase();s&&(o=i[s]||o),t+=Ej(o,e.childNodes[r])}return`
`+n+(t?`
`+t:"")}};BC.table={filter:function(n){return n.nodeName==="TABLE"&&Cj(n.rows[0])},replacement:function(n){return n=n.replace(`

`,`
`),`

`+n+`

`}};BC.tableSection={filter:["thead","tbody","tfoot"],replacement:function(n){return n}};function Cj(n){var e=n.parentNode;return e.nodeName==="THEAD"||e.firstChild===n&&(e.nodeName==="TABLE"||uye(e))&&cye.call(n.childNodes,function(t){return t.nodeName==="TH"})}function uye(n){var e=n.previousSibling;return n.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function Ej(n,e){var t=lye.call(e.parentNode.childNodes,e),i=" ";return t===0&&(i="| "),i+n+" |"}var Mtt=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");function Sj(n,e){let t=(i,r,o)=>{if(!o.consumable.consume(r.item,i.name))return;let s=r.attributeNewValue,a=o.writer,l=o.mapper.toViewElement(r.item),c=[...l.getChildren()].find(h=>h.getCustomProperty("media-content"));a.remove(c);let u=n.getMediaViewElement(a,s,e);a.insert(a.createPositionAt(l,0),u)};return i=>{i.on("attribute:url:media",t)}}function dye(n,e,t){return e.setCustomProperty("media",!0,n),Ar(n,e,{label:t})}function Tj(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function kj(n){let e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function Aj(n,e,t,i){n.change(r=>{let o=r.createElement("media",{url:e});n.insertObject(o,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}var rM=class extends J{refresh(){let e=this.editor.model,t=e.document.selection,i=kj(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=fye(t)||hye(t,e)}execute(e){let t=this.editor.model,i=t.document.selection,r=kj(i);r?t.change(o=>{o.setAttribute("url",e,r)}):Aj(t,e,i,!0)}};function hye(n,e){let i=Rl(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function fye(n){let e=n.getSelectedElement();return!!e&&e.name==="media"}var mye='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',pye="0 0 64 42",oM=class{locale;providerDefinitions;constructor(e,t){let i=t.providers,r=t.extraProviders||[],o=new Set(t.removeProviders),s=i.concat(r).filter(a=>{let l=a.name;return l?!o.has(l):(ge("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new UC(this.locale);e=e.trim();for(let t of this.providerDefinitions){let i=t.html,r=He(t.url);for(let o of r){let s=this._getUrlMatches(e,o);if(s)return new UC(this.locale,e,s,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let r=e.replace(/^https?:\/\//,"");return i=r.match(t),i||(r=r.replace(/^www\./,""),i=r.match(t),i)?i:null}},UC=class{url;_locale;_match;_previewRenderer;constructor(e,t,i,r){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=r}getViewElement(e,t){let i={},r;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");let o=this._getPreviewHtml(t);r=e.createRawElement("div",i,(s,a)=>{a.setContentOf(s,o)})}else this.url&&(i.url=this.url),r=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,r),r}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){let e=new qo,t=this._locale.t;return e.content=mye,e.viewBox=pye,new Mn({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}},em=class extends k{static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}registry;constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{let i=t[1],r=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${r?`?start=${r}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new oM(e.locale,e.config.get("mediaEmbed"))}init(){let e=this.editor,t=e.model.schema,i=e.t,r=e.conversion,o=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new rM(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),r.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{let u=l.getAttribute("url");return Tj(c,a,u,{elementName:s,renderMediaPreview:!!u&&o})}}),r.for("dataDowncast").add(Sj(a,{elementName:s,renderMediaPreview:o})),r.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{let u=l.getAttribute("url"),h=Tj(c,a,u,{elementName:s,renderForEditingView:!0});return dye(h,c,i("media widget"))}}),r.for("editingDowncast").add(Sj(a,{elementName:s,renderForEditingView:!0})),r.for("upcast").elementToElement({view:l=>["oembed",s].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{let u=l.getAttribute("url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{let u=l.getAttribute("data-oembed-url");return a.hasMedia(u)?c.createElement("media",{url:u}):null}}).add(l=>{let c=(u,h,p)=>{if(!p.consumable.consume(h.viewItem,{name:!0,classes:"media"}))return;let{modelRange:g,modelCursor:w}=p.convertChildren(h.viewItem,h.modelCursor);h.modelRange=g,h.modelCursor=w,it(g.getItems())||p.consumable.revert(h.viewItem,{name:!0,classes:"media"})};l.on("element:figure",c)})}},gye=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/,sM=class extends k{static get requires(){return[Mu,Kn,Xs]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){let e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{let o=t.selection.getFirstRange(),s=Yt.fromPosition(o.start);s.stickiness="toPrevious";let a=Yt.fromPosition(o.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(s,a),s.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(j.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){let i=this.editor,r=i.plugins.get(em).registry,o=new En(e,t),s=o.getWalker({ignoreElementEnd:!0}),a="";for(let c of s)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(gye)){o.detach();return}if(!r.hasMedia(a)){o.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){o.detach();return}this._positionToInsert=Yt.fromPosition(e),this._timeoutId=j.window.setTimeout(()=>{i.model.change(c=>{this._timeoutId=null,c.remove(o),o.detach();let u=null;this._positionToInsert.root.rootName!=="$graveyard"&&(u=this._positionToInsert),Aj(i.model,a,u,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(Kn).requestUndoOnBackspace()},100)}},aM=class extends Y{focusTracker;keystrokes;urlInputView;_validators;_urlInputViewInfoDefault;_urlInputViewInfoTip;constructor(e,t){super(t),this.focusTracker=new mt,this.keystrokes=new St,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),Wo({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){let e=this.locale.t,t=new er(this.locale,Il),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}},bye='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',lM=class extends k{static get requires(){return[em,Ff]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}_formView;init(){let e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{let t=this.editor.locale.t,i=this._createDialogButton(te);return i.tooltip=!0,i.label=t("Insert media"),i}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{let t=this.editor.locale.t,i=this._createDialogButton(ye);return i.label=t("Media"),i})}_createDialogButton(e){let t=this.editor,i=new e(t.locale),r=t.commands.get("mediaEmbed"),o=this.editor.plugins.get("Dialog");return i.icon=bye,i.bind("isEnabled").to(r,"isEnabled"),i.on("execute",()=>{o.id==="mediaEmbed"?o.hide():this._showDialog()}),i}_showDialog(){let e=this.editor,t=e.plugins.get("Dialog"),i=e.commands.get("mediaEmbed"),r=e.locale.t;if(!this._formView){let o=e.plugins.get(em).registry;this._formView=new(Al(aM))(wye(e.t,o),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:r("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:r("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:r("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){let e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}};function wye(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}var HC=class extends k{static get requires(){return[em,lM,sM,Yn]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}};var Ktt=[Te.arrowup,Te.arrowdown,Te.esc],Ytt=[Te.enter,Te.tab];function vye(n){let e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(s=>s.name).join("|"),i=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`),r=0,o=!1;return i.filter(s=>s.length).map(s=>(o=Cye(s,o),yye(s,e)?cM(s,r++):_ye(s,e)?cM(s,--r):o==="middle"||o==="last"?s:cM(s,r))).join(`
`)}function yye(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function _ye(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function cM(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}`}function Cye(n,e){return new RegExp("<pre( .*?)?>").test(n)?"first":new RegExp("</pre>").test(n)?"last":e==="first"||e==="middle"?"middle":!1}var Eye='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',zC="SourceEditingMode",jC=class extends k{static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[jo]}_elementReplacer;_replacedRoots;_dataFromRoots;constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new lf,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{let i=this._createButton(te);return i.set({label:t("Source"),icon:Eye,tooltip:!0,class:"ck-source-editing-button"}),i}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{let i=this._createButton(ye);return i.set({label:t("Show source"),role:"menuitemcheckbox"}),i}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,r,o)=>{o?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,r,o)=>this._handleReadOnlyMode(!o)),this.listenTo(e,"change:isReadOnly",(i,r,o)=>this._handleReadOnlyMode(o))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){let e=this.editor,t={};for(let[i,r]of this._replacedRoots){let o=this._dataFromRoots.get(i),s=r.dataset.value;o!==s&&(t[i]=s,this._dataFromRoots.set(i,s))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){let e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new C("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(r=>e.plugins.has(r))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){let e=this.editor,t=e.editing.view,i=e.model;i.change(r=>{r.setSelection(null),r.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(let[r,o]of t.domRoots){let s=Sye(e.data.get({rootName:r})),a=Mt(o.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),l=Mt(o.ownerDocument,"div",{class:"ck-source-editing-area","data-value":s},[a]);a.value=s,a.setSelectionRange(0,0),a.addEventListener("input",()=>{l.dataset.value=a.value,e.ui.update()}),t.change(c=>{let u=t.document.getRoot(r);c.addClass("ck-hidden",u)}),e.ui.setEditableElement("sourceEditing:"+r,a),this._replacedRoots.set(r,l),this._elementReplacer.replace(o,l),this._dataFromRoots.set(r,s)}this._focusSourceEditing()}_hideSourceEditing(){let t=this.editor.editing.view;this.updateEditorData(),t.change(i=>{for(let[r]of this._replacedRoots)i.removeClass("ck-hidden",t.document.getRoot(r))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_focusSourceEditing(){let e=this.editor,[t]=this._replacedRoots.values(),i=t.querySelector("textarea");e.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){let e=this.editor;for(let t of e.commands.commands())t.forceDisabled(zC);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(zC)}_enableCommands(){let e=this.editor;for(let t of e.commands.commands())t.clearForceDisabled(zC);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(zC)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(let[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){let t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){let e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){let t=this.editor,i=new e(t.locale);return i.set({withText:!0,isToggleable:!0}),i.bind("isOn").to(this,"isSourceEditingMode"),i.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(jo),"hasAny",(r,o,s)=>!(!r||o||s)),this.listenTo(i,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),i}};function Sye(n){return Tye(n)?vye(n):n}function Tye(n){return n.startsWith("<")}var $C=class{loader;xhr;constructor(e){this.loader=e}upload(){return console.log("Upload was at least hit. Therefore upload adapter works"),this.loader?.file.then(e=>new Promise((t,i)=>{this._initRequest(),this._initListeners(t,i,e),this._sendRequest(e)}))}abort(){this.xhr&&this.xhr.abort()}_initRequest(){let e=fr.apiUrl;console.log("Request was initiated");let t=this.xhr=new XMLHttpRequest;t.open("POST",`${e}posts/upload-image`,!0),t.responseType="json"}_initListeners(e,t,i){let r=this.xhr,o=this.loader,s=`Couldn't upload file: ${i.name}.`;r.addEventListener("error",()=>t(s)),r.addEventListener("abort",()=>t()),r.addEventListener("load",()=>{let a=r.response;if(console.log("response: "+JSON.stringify(a)),!a||a.error)return t(a&&a.error?a.error.message:s);e({default:a.url})}),r.upload&&(console.log("Progress event",r),r.upload.addEventListener("progress",a=>{a.lengthComputable&&(o.uploadTotal=a.total,o.uploaded=a.loaded)}))}_sendRequest(e){console.log("Send file request",e);let t=new FormData;t.append("upload",e),console.log(t),this.xhr.send(t)}};function Ij(n){n.plugins.get("FileRepository").createUploadAdapter=e=>new $C(e)}var Iye=["resumeEditor"];function xye(n,e){if(n&1){let t=hs();d(0,"a",38),M("click",function(){let r=_i(t).$implicit,o=cn(2);return Ci(o.removeTag(r))}),m(1),f()}if(n&2){let t=e.$implicit;Oe(),Br(t.trim())}}function Pye(n,e){if(n&1&&ya(0,xye,2,1,"a",37,va),n&2){let t=cn();_a(t.post.tags.split(";"))}}var WC=class n extends ue{resumeEditor;editor=j_;errorMessage="";deleteMessageEnabled=!1;operationText="Insert";postDataService=L(nl);alertService=L(Vh);menuItems=[{label:"Save",action:()=>this.submit()},{label:"View post",action:()=>this.viewPost()}];post={title:"...",content:"...",tags:"aaa; bbb; ccc",status:0,category:0};config={htmlSupport:{allow:[{name:/.*/,attributes:/.*/,classes:/.*/,styles:/.*/}],disallow:[]},toolbar:["undo","redo","|","heading","|","bold","italic","underline","|","link","mediaEmbed","uploadImage","codeBlock","highlight","htmlEmbed","sourceEditing","|","bulletedList","numberedList","indent","outdent"],plugins:[J_,R_,q_,G_,dC,fC,gC,wC,vC,mC,yC,EC,D_,M_,kC,RC,HC,Kf,Xs,H_,Y_,Q_,jC,Ij],codeBlock:{languages:[{language:"cs",label:"C#"},{language:"javascript",label:"JavaScript"},{language:"html",label:"HTML"},{language:"css",label:"CSS"},{language:"javascript",label:"JavaScript"},{language:"typescript",label:"TypeScript"}]}};ngOnInit(){super.ngOnInit();let e=this.route.snapshot.params["slug?"];e!==void 0&&(this.operationText="Update",this.getPost(e).subscribe(()=>{}))}submit(){this.post.id?(this.post.content=this.post.content.replace('<div class="close-button"></div>','<button class="close-button" aria-label="Dismiss alert" type="button" data-close=""><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 3.44 3.44"><path fill="#000" fill-rule="evenodd" d="M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z" clip-rule="evenodd"></path></svg></span></button>'),this.postDataService.updatePost(this.post).subscribe({next:e=>{e?(this.alertService.showAlert({title:"UPDATE",type:"success",message:"The post has been updated successfully"}),this.router.navigateByUrl("/list")):this.errorMessage="Unable to save customer"},error:e=>{console.log(e)},complete:()=>{}})):this.postDataService.insertPost(this.post).subscribe({next:e=>{e?(this.alertService.showAlert({title:"CREATE",type:"success",message:"The post has been added successfully"}),this.router.navigate(["/main"])):this.errorMessage="Unable to add customer"},error:e=>{console.log(e)},complete:()=>{}})}getPost(e){let t=this.postDataService.getPostBySlug(e);return t.subscribe({next:i=>{this.post=i},error:i=>{console.log(i)},complete:()=>{}}),t}viewPost(){let e=this.post.title.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/viewer",e])}addTag(e){if(e.trim()){let i=this.post.tags.split(";").map(r=>r.trim()).filter(r=>r.length>0);i.push(e.trim()),this.post.tags=i.join("; ")}}removeTag(e){let i=this.post.tags.split(";").map(r=>r.trim()).filter(r=>r!==e.trim());this.post.tags=i.join("; ")}cancel(e){e.preventDefault(),this.router.navigate(["/main"])}delete(e){e.preventDefault(),this.postDataService.deletePost(this.post.id).subscribe({next:t=>{t.status?(alert("The customer has been deleted successfully"),this.router.navigate(["/main"])):this.errorMessage="Unable to delete customer"},error:t=>{console.log(t)},complete:()=>{}})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vi(n)))(i||n)}})();static \u0275cmp=ee({type:n,selectors:[["app-editor"]],viewQuery:function(t,i){if(t&1&&$3(Iye,5),t&2){let r;JT(r=XT())&&(i.resumeEditor=r.first)}},standalone:!0,features:[oe,re],decls:54,vars:7,consts:[["tagInput",""],[3,"menuItems"],["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],["type","text","placeholder","my title...",1,"h2","title-editor","text-center",3,"ngModelChange","ngModel"],[3,"ngModelChange","editor","config","ngModel"],[1,"editor-input-container"],["id","category","title","Color",3,"ngModelChange","ngModel"],["value","0"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],[1,"tag-list-editor","text-center"],[1,"add-tag-editor"],["type","text","placeholder","Add new tag",3,"keydown.enter"],[1,"spacer"],[1,"profile-container"],["src","../../../assets/images/illustrations/picture-profile.jpg","alt","Profile Picture",1,"profile-picture"],[1,"profile-text"],[1,"title"],[1,"sub-title"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"],[1,"button","hollow-button","tiny-button"],[1,"button","hollow-button","tiny-button",3,"click"]],template:function(t,i){if(t&1){let r=hs();b(0,"app-menu",1),d(1,"div",2)(2,"div",3)(3,"div",4),b(4,"img",5),f()(),d(5,"div",6)(6,"div",7)(7,"div",8)(8,"article",9)(9,"a",10),M("click",function(){return _i(r),Ci(i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"blog"}}))}),b(10,"img",11),f(),d(11,"header")(12,"input",12),Ea("ngModelChange",function(s){return _i(r),sc(i.post.title,s)||(i.post.title=s),Ci(s)}),f()(),d(13,"div")(14,"ckeditor",13),Ea("ngModelChange",function(s){return _i(r),sc(i.post.content,s)||(i.post.content=s),Ci(s)}),f()(),d(15,"footer")(16,"div",14)(17,"select",15),Ea("ngModelChange",function(s){return _i(r),sc(i.post.category,s)||(i.post.category=s),Ci(s)}),d(18,"option",16),m(19,"Angular"),f(),d(20,"option",17),m(21,"TypeScript"),f(),d(22,"option",18),m(23,"JavaScript"),f(),d(24,"option",19),m(25,"CSharp"),f(),d(26,"option",20),m(27,".Net"),f(),d(28,"option",21),m(29,"Azure"),f()()(),d(30,"div",22),Hn(31,Pye,2,0),f(),d(32,"div",23)(33,"input",24,0),M("keydown.enter",function(){_i(r);let s=W3(34);return i.addTag(s.value),Ci(s.value="")}),f()(),b(35,"hr",25),d(36,"div",26),b(37,"img",27),d(38,"div",28)(39,"div",29),m(40,"Thierry Langie"),f(),d(41,"div",30),m(42,"Fullstack .Net Angular"),f()()()()()()()()(),d(43,"footer",31)(44,"div",32)(45,"div",7)(46,"div",8)(47,"p",33),m(48,"Copyright \xA9 2025 "),d(49,"a",34),m(50,"Prolog.Red"),f(),b(51,"img",35),d(52,"span",36),m(53," All Rights Reserved "),f()()()()()()}t&2&&(Ti("menuItems",i.menuItems),Oe(12),Ca("ngModel",i.post.title),Oe(2),Ti("editor",i.editor)("config",i.config),Ca("ngModel",i.post.content),Oe(3),Ca("ngModel",i.post.category),Oe(14),bo(i.post.tags.length>0?31:-1))},dependencies:[uB,cB,Ra,yn,ov,sv,Dd,Md,iv,cp,Ht]})};var qC=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-login-failed"]],standalone:!0,features:[re],decls:2,vars:0,template:function(t,i){t&1&&(d(0,"p"),m(1,"login-failed works!"),f())}})};var GC=class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(t){return new(t||n)(Ne(Ak,16))};static \u0275pipe=bT({name:"bypassHtmlSanitizer",type:n,pure:!0,standalone:!0})};function Rye(n,e){if(n&1&&(d(0,"a",12),m(1),f()),n&2){let t=e.$implicit;go("data-open","modal-"+t.trim().replaceAll(" ","-")),Oe(),Br(t.trim())}}function Dye(n,e){if(n&1&&ya(0,Rye,2,2,"a",12,va),n&2){let t=cn();_a(t.post.tags.split(";"))}}function Mye(n,e){if(n&1&&(d(0,"a",12),m(1),f()),n&2){let t=e.$implicit;go("data-open","modal-"+t.trim().replaceAll(" ","-")),Oe(),Br(t.trim())}}function Oye(n,e){if(n&1&&ya(0,Mye,2,2,"a",12,va),n&2){let t=cn();_a(t.post.tags.split(";"))}}var KC=class n extends ue{postDataService=L(nl);PostCategoryEnum=dg;menuItems=[{label:"Edit post",action:()=>this.edit()}];post={title:"",content:"",tags:"",status:0,category:0};ngOnInit(){super.ngOnInit();let e=this.route.snapshot.params.slug;e!==void 0&&this.getPost(e)}getPost(e){this.postDataService.getPostBySlug(e).subscribe({next:t=>{this.post=t},error:t=>{console.log(t)},complete:()=>{}})}edit(){let e=this.post.title.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/editor",e])}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Vi(n)))(i||n)}})();static \u0275cmp=ee({type:n,selectors:[["app-viewer"]],standalone:!0,features:[oe,re],decls:46,vars:11,consts:[[3,"menuItems"],["id","inner-page",1,"no-inner-page-bg-for-mobile"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns","no-padding-on-mobile"],[1,"card","no-margin-on-mobile"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center"],[1,"button","hollow-button","tiny-button"],[1,"spacer"],[3,"innerHTML"],[1,"profile-container"],["src","../../../assets/images/illustrations/picture-profile.jpg","alt","Profile Picture",1,"profile-picture"],[1,"profile-text"],[1,"title"],[1,"sub-title"],[1,"main-footer"],[1,"copyright"],[1,"small-16","columns"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(b(0,"app-menu",0),d(1,"div",1)(2,"div",2)(3,"div",3),b(4,"img",4),f()(),d(5,"div",5)(6,"div",6)(7,"div",7)(8,"article",8)(9,"a",9),M("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"blog"}})}),b(10,"img",10),f(),d(11,"header")(12,"h2",11),m(13),f(),d(14,"div",11)(15,"a",12),m(16),f(),Hn(17,Dye,2,0),f()(),b(18,"hr",13)(19,"div",14),G3(20,"bypassHtmlSanitizer"),b(21,"hr",13),d(22,"footer")(23,"div",11)(24,"a",12),m(25),f(),Hn(26,Oye,2,0),f(),b(27,"hr",13),d(28,"div",15),b(29,"img",16),d(30,"div",17)(31,"div",18),m(32,"Thierry Langie"),f(),d(33,"div",19),m(34,"Fullstack .Net Angular"),f()()()()()()()()(),d(35,"footer",20)(36,"div",21)(37,"div",6)(38,"div",22)(39,"p",23),m(40,"Copyright \xA9 2025 "),d(41,"a",24),m(42,"Prolog.Red"),f(),b(43,"img",25),d(44,"span",26),m(45," All Rights Reserved "),f()()()()()()),t&2&&(Ti("menuItems",i.menuItems),Oe(13),Br(i.post.title),Oe(2),go("data-open","modal-"+i.PostCategoryEnum[i.post.category].toLocaleLowerCase()),Oe(),Br(i.PostCategoryEnum[i.post.category].toLocaleLowerCase()),Oe(),bo(i.post.tags.length>0?17:-1),Oe(2),Ti("innerHTML",K3(20,9,i.post.content),G5),Oe(5),go("data-open","modal-"+i.PostCategoryEnum[i.post.category].toLocaleLowerCase()),Oe(),Br(i.PostCategoryEnum[i.post.category].toLocaleLowerCase()),Oe(),bo(i.post.tags.length>0?26:-1))},dependencies:[Ra,GC]})};var xj=[{path:"",redirectTo:"main",pathMatch:"full"},{path:"main",component:Uy},{path:"editor/:slug?",component:WC,canActivate:[by]},{path:"viewer/:slug",component:KC},{path:"login-failed",component:qC},{path:"clients/equans",component:Hy},{path:"clients/akzonobel",component:zy},{path:"clients/olympic",component:jy},{path:"clients/baxter",component:$y},{path:"clients/gsk",component:Wy},{path:"clients/labima",component:qy},{path:"clients/fib",component:Gy},{path:"clients/credit-general",component:Ky},{path:"clients/engie",component:Yy},{path:"clients/tott-systems",component:Qy},{path:"clients/jpass",component:Zy},{path:"clients/sopres",component:Jy},{path:"clients/tplan",component:Xy},{path:"clients/transnubel",component:e1},{path:"clients/schenk",component:t1},{path:"clients/coca-cola",component:n1},{path:"clients/kjs",component:i1}];function Nye(n,e){console.log(e)}function Pj(){return new ag({auth:{clientId:fr.msalConfig.auth.clientId,authority:fr.msalConfig.auth.authority,redirectUri:fr.msalConfig.auth.redirectUri,postLogoutRedirectUri:fr.msalConfig.auth.postLogoutRedirectUri},cache:{cacheLocation:ft.LocalStorage},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:Nye,logLevel:lt.Info,piiLoggingEnabled:!1}}})}function Rj(){let n=new Map;return n.set(fr.apiConfig.uri,fr.apiConfig.scopes),{interactionType:q.Redirect,protectedResourceMap:n}}function Dj(){return{interactionType:q.Redirect,authRequest:{scopes:[...fr.apiConfig.scopes]},loginFailedRoute:"/login-failed"}}var We=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(We||{}),Yo="*";function Mj(n,e=null){return{type:We.Sequence,steps:n,options:e}}function uM(n){return{type:We.Style,styles:n,offset:null}}var Fl=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Db=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==o&&this._onFinish()}),s.onDestroy(()=>{++i==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},YC="!";function Oj(n){return new F(3e3,!1)}function Lye(){return new F(3100,!1)}function Fye(){return new F(3101,!1)}function Vye(n){return new F(3001,!1)}function Bye(n){return new F(3003,!1)}function Uye(n){return new F(3004,!1)}function Hye(n,e){return new F(3005,!1)}function zye(){return new F(3006,!1)}function jye(){return new F(3007,!1)}function $ye(n,e){return new F(3008,!1)}function Wye(n){return new F(3002,!1)}function qye(n,e,t,i,r){return new F(3010,!1)}function Gye(){return new F(3011,!1)}function Kye(){return new F(3012,!1)}function Yye(){return new F(3200,!1)}function Qye(){return new F(3202,!1)}function Zye(){return new F(3013,!1)}function Jye(n){return new F(3014,!1)}function Xye(n){return new F(3015,!1)}function e1e(n){return new F(3016,!1)}function t1e(n,e){return new F(3404,!1)}function n1e(n){return new F(3502,!1)}function i1e(n){return new F(3503,!1)}function r1e(){return new F(3300,!1)}function o1e(n){return new F(3504,!1)}function s1e(n){return new F(3301,!1)}function a1e(n,e){return new F(3302,!1)}function l1e(n){return new F(3303,!1)}function c1e(n,e){return new F(3400,!1)}function u1e(n){return new F(3401,!1)}function d1e(n){return new F(3402,!1)}function h1e(n,e){return new F(3505,!1)}function Vl(n){switch(n.length){case 0:return new Fl;case 1:return n[0];default:return new Db(n)}}function Kj(n,e,t=new Map,i=new Map){let r=[],o=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==s,h=u&&a||new Map;l.forEach((p,g)=>{let w=g,y=p;if(g!=="offset")switch(w=n.normalizePropertyName(w,r),y){case YC:y=t.get(g);break;case Yo:y=i.get(g);break;default:y=n.normalizeStyleValue(g,w,y,r);break}h.set(w,y)}),u||o.push(h),a=h,s=c}),r.length)throw n1e(r);return o}function MM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&dM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&dM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&dM(t,"destroy",n)));break}}function dM(n,e,t){let i=t.totalTime,r=!!t.disabled,o=OM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),s=n._data;return s!=null&&(o._data=s),o}function OM(n,e,t,i,r="",o=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:o,disabled:!!s}}function nr(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function Nj(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var f1e=typeof document>"u"?null:document.documentElement;function NM(n){let e=n.parentNode||n.host||null;return e===f1e?null:e}function m1e(n){return n.substring(1,6)=="ebkit"}var Vu=null,Lj=!1;function p1e(n){Vu||(Vu=g1e()||{},Lj=Vu.style?"WebkitAppearance"in Vu.style:!1);let e=!0;return Vu.style&&!m1e(n)&&(e=n in Vu.style,!e&&Lj&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Vu.style)),e}function g1e(){return typeof document<"u"?document.body:null}function Yj(n,e){for(;e;){if(e===n)return!0;e=NM(e)}return!1}function Qj(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var LM=(()=>{class n{validateStyleProperty(t){return p1e(t)}containsElement(t,i){return Yj(t,i)}getParentElement(t){return NM(t)}query(t,i,r){return Qj(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,o,s,a=[],l){return new Fl(r,o)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})(),Hu=class{static{this.NOOP=new LM}},zu=class{};var b1e=1e3,Zj="{{",w1e="}}",Jj="ng-enter",bM="ng-leave",QC="ng-trigger",tE=".ng-trigger",Fj="ng-animating",wM=".ng-animating";function ea(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:vM(parseFloat(e[1]),e[2])}function vM(n,e){switch(e){case"s":return n*b1e;default:return n}}function nE(n,e,t){return n.hasOwnProperty("duration")?n:v1e(n,e,t)}function v1e(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,o=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(Oj(n)),{duration:0,delay:0,easing:""};r=vM(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(o=vM(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(Lye()),a=!0),o<0&&(e.push(Fye()),a=!0),a&&e.splice(l,0,Oj(n))}return{duration:r,delay:o,easing:s}}function y1e(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Qo(n,e,t){e.forEach((i,r)=>{let o=FM(r);t&&!t.has(r)&&t.set(r,n.style[o]),n.style[o]=i})}function Uu(n,e){e.forEach((t,i)=>{let r=FM(i);n.style[r]=""})}function Mb(n){return Array.isArray(n)?n.length==1?n[0]:Mj(n):n}function _1e(n,e,t){let i=e.params||{},r=Xj(n);r.length&&r.forEach(o=>{i.hasOwnProperty(o)||t.push(Vye(o))})}var yM=new RegExp(`${Zj}\\s*(.+?)\\s*${w1e}`,"g");function Xj(n){let e=[];if(typeof n=="string"){let t;for(;t=yM.exec(n);)e.push(t[1]);yM.lastIndex=0}return e}function Nb(n,e,t){let i=`${n}`,r=i.replace(yM,(o,s)=>{let a=e[s];return a==null&&(t.push(Bye(s)),a=""),a.toString()});return r==i?n:r}var C1e=/-+([a-z0-9])/g;function FM(n){return n.replace(C1e,(...e)=>e[1].toUpperCase())}function E1e(n,e){return n===0||e===0}function S1e(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((o,s)=>{i.has(s)||r.push(s),i.set(s,o)}),r.length)for(let o=1;o<e.length;o++){let s=e[o];r.forEach(a=>s.set(a,VM(n,a)))}}return e}function tr(n,e,t){switch(e.type){case We.Trigger:return n.visitTrigger(e,t);case We.State:return n.visitState(e,t);case We.Transition:return n.visitTransition(e,t);case We.Sequence:return n.visitSequence(e,t);case We.Group:return n.visitGroup(e,t);case We.Animate:return n.visitAnimate(e,t);case We.Keyframes:return n.visitKeyframes(e,t);case We.Style:return n.visitStyle(e,t);case We.Reference:return n.visitReference(e,t);case We.AnimateChild:return n.visitAnimateChild(e,t);case We.AnimateRef:return n.visitAnimateRef(e,t);case We.Query:return n.visitQuery(e,t);case We.Stagger:return n.visitStagger(e,t);default:throw Uye(e.type)}}function VM(n,e){return window.getComputedStyle(n)[e]}var T1e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),iE=class extends zu{normalizePropertyName(e,t){return FM(e)}normalizeStyleValue(e,t,i,r){let o="",s=i.toString().trim();if(T1e.has(t)&&i!==0&&i!=="0")if(typeof i=="number")o="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Hye(e,i))}return s+o}};var rE="*";function k1e(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>A1e(i,t,e)):t.push(n),t}function A1e(n,e,t){if(n[0]==":"){let l=I1e(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(Xye(n)),e;let r=i[1],o=i[2],s=i[3];e.push(Vj(r,s));let a=r==rE&&s==rE;o[0]=="<"&&!a&&e.push(Vj(s,r))}function I1e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(e1e(n)),"* => *"}}var ZC=new Set(["true","1"]),JC=new Set(["false","0"]);function Vj(n,e){let t=ZC.has(n)||JC.has(n),i=ZC.has(e)||JC.has(e);return(r,o)=>{let s=n==rE||n==r,a=e==rE||e==o;return!s&&t&&typeof r=="boolean"&&(s=r?ZC.has(n):JC.has(n)),!a&&i&&typeof o=="boolean"&&(a=o?ZC.has(e):JC.has(e)),s&&a}}var e$=":self",x1e=new RegExp(`s*${e$}s*,?`,"g");function t$(n,e,t,i){return new _M(n).build(e,t,i)}var Bj="",_M=class{constructor(e){this._driver=e}build(e,t,i){let r=new CM(t);return this._resetContextStyleTimingState(r),tr(this,Mb(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=Bj,e.collectedStyles=new Map,e.collectedStyles.set(Bj,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,o=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(zye()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==We.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,o.push(this.visitState(l,t))}),l.name=c}else if(a.type==We.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,s.push(l)}else t.errors.push(jye())}),{type:We.Trigger,name:e.name,states:o,transitions:s,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let o=new Set,s=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Xj(l).forEach(c=>{s.hasOwnProperty(c)||o.add(c)})})}),o.size&&t.errors.push($ye(e.name,[...o.values()]))}return{type:We.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=tr(this,Mb(e.animation),t),r=k1e(e.expr,t.errors);return{type:We.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Bu(e.options)}}visitSequence(e,t){return{type:We.Sequence,steps:e.steps.map(i=>tr(this,i,t)),options:Bu(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,o=e.steps.map(s=>{t.currentTime=i;let a=tr(this,s,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:We.Group,steps:o,options:Bu(e.options)}}visitAnimate(e,t){let i=M1e(e.timings,t.errors);t.currentAnimateTimings=i;let r,o=e.styles?e.styles:uM({});if(o.type==We.Keyframes)r=this.visitKeyframes(o,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=uM(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:We.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Yo?i.push(a):t.errors.push(Wye(a)):i.push(new Map(Object.entries(a)));let o=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!o)){for(let l of a.values())if(l.toString().indexOf(Zj)>=0){o=!0;break}}}),{type:We.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:o,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,o=t.currentTime;i&&o>0&&(o-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l),h=!0;u&&(o!=r&&o>=u.startTime&&r<=u.endTime&&(t.errors.push(qye(l,u.startTime,u.endTime,o,r)),h=!1),o=u.startTime),h&&c.set(l,{startTime:o,endTime:r}),t.options&&_1e(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:We.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Gye()),i;let r=1,o=0,s=[],a=!1,l=!1,c=0,u=e.steps.map(T=>{let x=this._makeStyleAst(T,t),V=x.offset!=null?x.offset:D1e(x.styles),Q=0;return V!=null&&(o++,Q=x.offset=V),l=l||Q<0||Q>1,a=a||Q<c,c=Q,s.push(Q),x});l&&t.errors.push(Kye()),a&&t.errors.push(Yye());let h=e.steps.length,p=0;o>0&&o<h?t.errors.push(Qye()):o==0&&(p=r/(h-1));let g=h-1,w=t.currentTime,y=t.currentAnimateTimings,E=y.duration;return u.forEach((T,x)=>{let V=p>0?x==g?1:p*x:s[x],Q=V*E;t.currentTime=w+y.delay+Q,y.duration=Q,this._validateStyleAst(T,t),T.offset=V,i.styles.push(T)}),i}visitReference(e,t){return{type:We.Reference,animation:tr(this,Mb(e.animation),t),options:Bu(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:We.AnimateChild,options:Bu(e.options)}}visitAnimateRef(e,t){return{type:We.AnimateRef,animation:this.visitReference(e.animation,t),options:Bu(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[o,s]=P1e(e.selector);t.currentQuerySelector=i.length?i+" "+o:o,nr(t.collectedStyles,t.currentQuerySelector,new Map);let a=tr(this,Mb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:We.Query,selector:o,limit:r.limit||0,optional:!!r.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:Bu(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Zye());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:nE(e.timings,t.errors,!0);return{type:We.Stagger,animation:tr(this,Mb(e.animation),t),timings:i,options:null}}};function P1e(n){let e=!!n.split(/\s*,\s*/).find(t=>t==e$);return e&&(n=n.replace(x1e,"")),n=n.replace(/@\*/g,tE).replace(/@\w+/g,t=>tE+"-"+t.slice(1)).replace(/:animating/g,wM),[n,e]}function R1e(n){return n?v({},n):null}var CM=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function D1e(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function M1e(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let o=nE(n,e).duration;return hM(o,0,"")}let t=n;if(t.split(/\s+/).some(o=>o.charAt(0)=="{"&&o.charAt(1)=="{")){let o=hM(0,0,"");return o.dynamic=!0,o.strValue=t,o}let r=nE(t,e);return hM(r.duration,r.delay,r.easing)}function Bu(n){return n?(n=v({},n),n.params&&(n.params=R1e(n.params))):n={},n}function hM(n,e,t){return{duration:n,delay:e,easing:t}}function BM(n,e,t,i,r,o,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:o,totalTime:r+o,easing:s,subTimeline:a}}var Lb=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},O1e=1,N1e=":enter",L1e=new RegExp(N1e,"g"),F1e=":leave",V1e=new RegExp(F1e,"g");function n$(n,e,t,i,r,o=new Map,s=new Map,a,l,c=[]){return new EM().buildKeyframes(n,e,t,i,r,o,s,a,l,c)}var EM=class{buildKeyframes(e,t,i,r,o,s,a,l,c,u=[]){c=c||new Lb;let h=new SM(e,t,c,r,o,u,[]);h.options=l;let p=l.delay?ea(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([s],null,h.errors,l),tr(this,i,h);let g=h.timelines.filter(w=>w.containsAnimation());if(g.length&&a.size){let w;for(let y=g.length-1;y>=0;y--){let E=g[y];if(E.element===t){w=E;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([a],null,h.errors,l)}return g.length?g.map(w=>w.buildKeyframes()):[BM(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),o=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,r,r.options);o!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let o=r?.delay;if(o){let s=typeof o=="number"?o:ea(Nb(o,r?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let o=t.currentTimeline.currentTime,s=i.duration!=null?ea(i.duration):null,a=i.delay!=null?ea(i.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);o=Math.max(o,c.duration+c.delay)}),o}visitReference(e,t){t.updateOptions(e.options,!0),tr(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,o=e.options;if(o&&(o.params||o.delay)&&(r=t.createSubContext(o),r.transformIntoNewTimeline(),o.delay!=null)){r.previousNode.type==We.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=oE);let s=ea(o.delay);r.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>tr(this,s,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,o=e.options&&e.options.delay?ea(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);o&&a.delayNextStep(o),tr(this,s,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?Nb(i,t.params,t.errors):i;return nE(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let o=e.style;o.type==We.Keyframes?this.visitKeyframes(o,t):(t.incrementTime(i.duration),this.visitStyle(o,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let o=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(o):i.setStyles(e.styles,o,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,o=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*o),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+o),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},o=r.delay?ea(r.delay):0;o&&(t.previousNode.type===We.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=oE);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;let h=t.createSubContext(e.options,c);o&&h.delayNextStep(o),c===t.element&&(l=h.currentTimeline),tr(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let p=h.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,o=e.timings,s=Math.abs(o.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(o.duration<0?"reverse":o.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let u=t.currentTimeline;l&&u.delayNextStep(l);let h=u.currentTime;tr(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},oE={},SM=class n{constructor(e,t,i,r,o,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=o,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=oE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new sE(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=ea(i.duration)),i.delay!=null&&(r.delay=ea(i.delay));let o=i.params;if(o){let s=r.params;s||(s=this.options.params={}),Object.keys(o).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=Nb(o[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,o=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return o.previousNode=this.previousNode,o.currentAnimateTimings=this.currentAnimateTimings,o.options=this._copyOptions(),o.updateOptions(e),o.currentQueryIndex=this.currentQueryIndex,o.currentQueryTotal=this.currentQueryTotal,o.parentContext=this,this.subContextCount++,o}transformIntoNewTimeline(e){return this.previousNode=oE,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},o=new TM(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(o),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,o,s){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(L1e,"."+this._enterClassName),e=e.replace(V1e,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!o&&a.length==0&&s.push(Jye(t)),a}},sE=class n{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=O1e,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Yo),this._currentKeyframe.set(t,Yo);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let o=r&&r.params||{},s=B1e(e,this._globalTimelineStyles);for(let[a,l]of s){let c=Nb(l,o,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Yo),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((u,h)=>{u===YC?e.add(h):u===Yo&&t.add(h)}),i||c.set("offset",l/this.duration),r.push(c)});let o=[...e.values()],s=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return BM(this.element,r,o,s,this.duration,this.startTime,this.easing,!1)}},TM=class extends sE{constructor(e,t,i,r,o,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=o,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let o=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),o.push(l);let c=new Map(e[0]);c.set("offset",Uj(a)),o.push(c);let u=e.length-1;for(let h=1;h<=u;h++){let p=new Map(e[h]),g=p.get("offset"),w=t+g*i;p.set("offset",Uj(w/s)),o.push(p)}i=s,t=0,r="",e=o}return BM(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function Uj(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function B1e(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let o of i)t.set(o,Yo)}else for(let[o,s]of r)t.set(o,s)}),t}function Hj(n,e,t,i,r,o,s,a,l,c,u,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:o,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:p}}var fM={},aE=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return U1e(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,o,s,a,l,c,u){let h=[],p=this.ast.options&&this.ast.options.params||fM,g=a&&a.params||fM,w=this.buildStyles(i,g,h),y=l&&l.params||fM,E=this.buildStyles(r,y,h),T=new Set,x=new Map,V=new Map,Q=r==="void",he={params:i$(y,p),delay:this.ast.options?.delay},N=u?[]:n$(e,t,this.ast.animation,o,s,w,E,he,c,h),$=0;return N.forEach(H=>{$=Math.max(H.duration+H.delay,$)}),h.length?Hj(t,this._triggerName,i,r,Q,w,E,[],[],x,V,$,h):(N.forEach(H=>{let qe=H.element,di=nr(x,qe,new Set);H.preStyleProps.forEach(Bl=>di.add(Bl));let im=nr(V,qe,new Set);H.postStyleProps.forEach(Bl=>im.add(Bl)),qe!==t&&T.add(qe)}),Hj(t,this._triggerName,i,r,Q,w,E,N,[...T.values()],x,V,$))}};function U1e(n,e,t,i,r){return n.some(o=>o(e,t,i,r))}function i$(n,e){let t=v({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var kM=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=i$(e,this.defaultParams);return this.styles.styles.forEach(o=>{typeof o!="string"&&o.forEach((s,a)=>{s&&(s=Nb(s,r,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function H1e(n,e,t){return new AM(n,e,t)}var AM=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{let o=r.options&&r.options.params||{};this.states.set(r.name,new kM(r.style,o,i))}),zj(this.states,"true","1"),zj(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new aE(e,r,this.states))}),this.fallbackTransition=z1e(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(s=>s.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function z1e(n,e,t){let i=[(s,a)=>!0],r={type:We.Sequence,steps:[],options:null},o={type:We.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new aE(n,o,e)}function zj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var j1e=new Lb,IM=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],r=[],o=t$(this._driver,t,i,r);if(i.length)throw i1e(i);r.length&&void 0,this._animations.set(e,o)}_buildPlayer(e,t,i){let r=e.element,o=Kj(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,o,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],o=this._animations.get(e),s,a=new Map;if(o?(s=n$(this._driver,t,o,Jj,bM,new Map,new Map,i,j1e,r),s.forEach(u=>{let h=nr(a,u.element,new Map);u.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(r1e()),s=[]),r.length)throw o1e(r);a.forEach((u,h)=>{u.forEach((p,g)=>{u.set(g,this._driver.computeStyle(h,g,Yo))})});let l=s.map(u=>{let h=a.get(u.element);return this._buildPlayer(u,new Map,h)}),c=Vl(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw s1e(e);return t}listen(e,t,i,r){let o=OM(t,"","","");return MM(this._getPlayer(e),i,o,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let s=r[0]||{};this.create(e,t,s);return}let o=this._getPlayer(e);switch(i){case"play":o.play();break;case"pause":o.pause();break;case"reset":o.reset();break;case"restart":o.restart();break;case"finish":o.finish();break;case"init":o.init();break;case"setPosition":o.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},jj="ng-animate-queued",$1e=".ng-animate-queued",mM="ng-animate-disabled",W1e=".ng-animate-disabled",q1e="ng-star-inserted",G1e=".ng-star-inserted",K1e=[],r$={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Y1e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},oo="__ng_removed",Fb=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Z1e(r),i){let o=e,{value:s}=o,a=Bt(o,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},Ob="void",pM=new Fb(Ob),xM=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,xr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw a1e(i,t);if(i==null||i.length==0)throw l1e(t);if(!J1e(i))throw c1e(i,t);let o=nr(this._elementListeners,e,[]),s={name:t,phase:i,callback:r};o.push(s);let a=nr(this._engine.statesByElement,e,new Map);return a.has(t)||(xr(e,QC),xr(e,QC+"-"+t),a.set(t,pM)),()=>{this._engine.afterFlush(()=>{let l=o.indexOf(s);l>=0&&o.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw u1e(e);return t}trigger(e,t,i,r=!0){let o=this._getTrigger(t),s=new Vb(this.id,t,e),a=this._engine.statesByElement.get(e);a||(xr(e,QC),xr(e,QC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new Fb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=pM),!(c.value===Ob)&&l.value===c.value){if(!t_e(l.params,c.params)){let y=[],E=o.matchStyles(l.value,l.params,y),T=o.matchStyles(c.value,c.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{Uu(e,E),Qo(e,T)})}return}let p=nr(this._engine.playersByElement,e,[]);p.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=o.matchTransition(l.value,c.value,e,c.params),w=!1;if(!g){if(!r)return;g=o.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:w}),w||(xr(e,jj),s.onStart(()=>{tm(e,jj)})),s.onDone(()=>{let y=this.players.indexOf(s);y>=0&&this.players.splice(y,1);let E=this._engine.playersByElement.get(e);if(E){let T=E.indexOf(s);T>=0&&E.splice(T,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,tE,!0);i.forEach(r=>{if(r[oo])return;let o=this._engine.fetchNamespacesByElement(r);o.size?o.forEach(s=>s.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let o=this._engine.statesByElement.get(e),s=new Map;if(o){let a=[];if(o.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,Ob,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&Vl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(o=>{let s=o.name;if(r.has(s))return;r.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||pM,u=new Fb(Ob),h=new Vb(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let o=i.players.length?i.playersByQueriedElement.get(e):[];if(o&&o.length)r=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let o=e[oo];(!o||o===r$)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){xr(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let o=i.element,s=this._elementListeners.get(o);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=OM(o,i.triggerName,i.fromState.value,i.toState.value);l._data=e,MM(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let o=i.transition.ast.depCount,s=r.transition.ast.depCount;return o==0||s==0?o-s:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},PM=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,o)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new xM(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let o=this._fetchNamespace(r.namespaceId);o&&t.add(o)}}return t}trigger(e,t,i,r){if(XC(t)){let o=this._fetchNamespace(e);if(o)return o.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!XC(t))return;let o=t[oo];if(o&&o.setForRemoval){o.setForRemoval=!1,o.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),xr(e,mM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),tm(e,mM))}removeNode(e,t,i){if(XC(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,o){this.collectedLeaveElements.push(t),t[oo]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:o}}listen(e,t,i,r,o){return XC(t)?this._fetchNamespace(e).listen(t,i,r,o):()=>{}}_buildInstruction(e,t,i,r,o){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,o)}destroyInnerAnimations(e){let t=this.driver.query(e,tE,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,wM,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[oo];if(t&&t.setForRemoval){if(e[oo]=r$,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(mM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,W1e,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];xr(r,q1e)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Vl(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw d1e(e)}_flushAnimations(e,t){let i=new Lb,r=[],o=new Map,s=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(ne=>{u.add(ne);let le=this.driver.query(ne,$1e,!0);for(let fe=0;fe<le.length;fe++)u.add(le[fe])});let h=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=qj(p,this.collectedEnterElements),w=new Map,y=0;g.forEach((ne,le)=>{let fe=Jj+y++;w.set(le,fe),ne.forEach(et=>xr(et,fe))});let E=[],T=new Set,x=new Set;for(let ne=0;ne<this.collectedLeaveElements.length;ne++){let le=this.collectedLeaveElements[ne],fe=le[oo];fe&&fe.setForRemoval&&(E.push(le),T.add(le),fe.hasAnimation?this.driver.query(le,G1e,!0).forEach(et=>T.add(et)):x.add(le))}let V=new Map,Q=qj(p,Array.from(T));Q.forEach((ne,le)=>{let fe=bM+y++;V.set(le,fe),ne.forEach(et=>xr(et,fe))}),e.push(()=>{g.forEach((ne,le)=>{let fe=w.get(le);ne.forEach(et=>tm(et,fe))}),Q.forEach((ne,le)=>{let fe=V.get(le);ne.forEach(et=>tm(et,fe))}),E.forEach(ne=>{this.processLeaveNode(ne)})});let he=[],N=[];for(let ne=this._namespaceList.length-1;ne>=0;ne--)this._namespaceList[ne].drainQueuedTransitions(t).forEach(fe=>{let et=fe.player,bn=fe.element;if(he.push(et),this.collectedEnterElements.length){let Fn=bn[oo];if(Fn&&Fn.setForMove){if(Fn.previousTriggersValues&&Fn.previousTriggersValues.has(fe.triggerName)){let Ul=Fn.previousTriggersValues.get(fe.triggerName),ir=this.statesByElement.get(fe.element);if(ir&&ir.has(fe.triggerName)){let Bb=ir.get(fe.triggerName);Bb.value=Ul,ir.set(fe.triggerName,Bb)}}et.destroy();return}}let so=!h||!this.driver.containsElement(h,bn),Li=V.get(bn),ta=w.get(bn),Ot=this._buildInstruction(fe,i,ta,Li,so);if(Ot.errors&&Ot.errors.length){N.push(Ot);return}if(so){et.onStart(()=>Uu(bn,Ot.fromStyles)),et.onDestroy(()=>Qo(bn,Ot.toStyles)),r.push(et);return}if(fe.isFallbackTransition){et.onStart(()=>Uu(bn,Ot.fromStyles)),et.onDestroy(()=>Qo(bn,Ot.toStyles)),r.push(et);return}let zM=[];Ot.timelines.forEach(Fn=>{Fn.stretchStartingKeyframe=!0,this.disabledNodes.has(Fn.element)||zM.push(Fn)}),Ot.timelines=zM,i.append(bn,Ot.timelines);let u$={instruction:Ot,player:et,element:bn};s.push(u$),Ot.queriedElements.forEach(Fn=>nr(a,Fn,[]).push(et)),Ot.preStyleProps.forEach((Fn,Ul)=>{if(Fn.size){let ir=l.get(Ul);ir||l.set(Ul,ir=new Set),Fn.forEach((Bb,pE)=>ir.add(pE))}}),Ot.postStyleProps.forEach((Fn,Ul)=>{let ir=c.get(Ul);ir||c.set(Ul,ir=new Set),Fn.forEach((Bb,pE)=>ir.add(pE))})});if(N.length){let ne=[];N.forEach(le=>{ne.push(h1e(le.triggerName,le.errors))}),he.forEach(le=>le.destroy()),this.reportError(ne)}let $=new Map,H=new Map;s.forEach(ne=>{let le=ne.element;i.has(le)&&(H.set(le,le),this._beforeAnimationBuild(ne.player.namespaceId,ne.instruction,$))}),r.forEach(ne=>{let le=ne.element;this._getPreviousPlayers(le,!1,ne.namespaceId,ne.triggerName,null).forEach(et=>{nr($,le,[]).push(et),et.destroy()})});let qe=E.filter(ne=>Gj(ne,l,c)),di=new Map;Wj(di,this.driver,x,c,Yo).forEach(ne=>{Gj(ne,l,c)&&qe.push(ne)});let Bl=new Map;g.forEach((ne,le)=>{Wj(Bl,this.driver,new Set(ne),l,YC)}),qe.forEach(ne=>{let le=di.get(ne),fe=Bl.get(ne);di.set(ne,new Map([...le?.entries()??[],...fe?.entries()??[]]))});let mE=[],UM=[],HM={};s.forEach(ne=>{let{element:le,player:fe,instruction:et}=ne;if(i.has(le)){if(u.has(le)){fe.onDestroy(()=>Qo(le,et.toStyles)),fe.disabled=!0,fe.overrideTotalTime(et.totalTime),r.push(fe);return}let bn=HM;if(H.size>1){let Li=le,ta=[];for(;Li=Li.parentNode;){let Ot=H.get(Li);if(Ot){bn=Ot;break}ta.push(Li)}ta.forEach(Ot=>H.set(Ot,bn))}let so=this._buildAnimation(fe.namespaceId,et,$,o,Bl,di);if(fe.setRealPlayer(so),bn===HM)mE.push(fe);else{let Li=this.playersByElement.get(bn);Li&&Li.length&&(fe.parentPlayer=Vl(Li)),r.push(fe)}}else Uu(le,et.fromStyles),fe.onDestroy(()=>Qo(le,et.toStyles)),UM.push(fe),u.has(le)&&r.push(fe)}),UM.forEach(ne=>{let le=o.get(ne.element);if(le&&le.length){let fe=Vl(le);ne.setRealPlayer(fe)}}),r.forEach(ne=>{ne.parentPlayer?ne.syncPlayerEvents(ne.parentPlayer):ne.destroy()});for(let ne=0;ne<E.length;ne++){let le=E[ne],fe=le[oo];if(tm(le,bM),fe&&fe.hasAnimation)continue;let et=[];if(a.size){let so=a.get(le);so&&so.length&&et.push(...so);let Li=this.driver.query(le,wM,!0);for(let ta=0;ta<Li.length;ta++){let Ot=a.get(Li[ta]);Ot&&Ot.length&&et.push(...Ot)}}let bn=et.filter(so=>!so.destroyed);bn.length?X1e(this,le,bn):this.processLeaveNode(le)}return E.length=0,mE.forEach(ne=>{this.players.push(ne),ne.onDone(()=>{ne.destroy();let le=this.players.indexOf(ne);this.players.splice(le,1)}),ne.play()}),mE}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,o){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!o||o==Ob;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||s.push(c)})}}return(i||r)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let r=t.triggerName,o=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let c=l.element,u=c!==o,h=nr(i,c,[]);this._getPreviousPlayers(c,u,s,a,t.toState).forEach(g=>{let w=g.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),g.destroy(),h.push(g)})}Uu(o,t.fromStyles)}_buildAnimation(e,t,i,r,o,s){let a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,p=t.timelines.map(w=>{let y=w.element;u.add(y);let E=y[oo];if(E&&E.removedBeforeQueried)return new Fl(w.duration,w.delay);let T=y!==l,x=e_e((i.get(y)||K1e).map($=>$.getRealPlayer())).filter($=>{let H=$;return H.element?H.element===y:!1}),V=o.get(y),Q=s.get(y),he=Kj(this._normalizer,w.keyframes,V,Q),N=this._buildPlayer(w,he,x);if(w.subTimeline&&r&&h.add(y),T){let $=new Vb(e,a,y);$.setRealPlayer(N),c.push($)}return N});c.forEach(w=>{nr(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>Q1e(this.playersByQueriedElement,w.element,w))}),u.forEach(w=>xr(w,Fj));let g=Vl(p);return g.onDestroy(()=>{u.forEach(w=>tm(w,Fj)),Qo(l,t.toStyles)}),h.forEach(w=>{nr(r,w,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Fl(e.duration,e.delay)}},Vb=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Fl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>MM(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){nr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Q1e(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Z1e(n){return n??null}function XC(n){return n&&n.nodeType===1}function J1e(n){return n=="start"||n=="done"}function $j(n,e){let t=n.style.display;return n.style.display=e??"none",t}function Wj(n,e,t,i,r){let o=[];t.forEach(l=>o.push($j(l)));let s=[];i.forEach((l,c)=>{let u=new Map;l.forEach(h=>{let p=e.computeStyle(c,h,r);u.set(h,p),(!p||p.length==0)&&(c[oo]=Y1e,s.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>$j(l,o[a++])),s}function qj(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),o=new Map;function s(a){if(!a)return i;let l=o.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:r.has(c)?l=i:l=s(c),o.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function xr(n,e){n.classList?.add(e)}function tm(n,e){n.classList?.remove(e)}function X1e(n,e,t){Vl(t).onDone(()=>n.processLeaveNode(e))}function e_e(n){let e=[];return o$(n,e),e}function o$(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof Db?o$(i.players,e):e.push(i)}}function t_e(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let o=t[r];if(!e.hasOwnProperty(o)||n[o]!==e[o])return!1}return!0}function Gj(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(o=>r.add(o)):e.set(n,i),t.delete(n),!0}var nm=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,o)=>{},this._transitionEngine=new PM(e.body,t,i),this._timelineEngine=new IM(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,o)=>this.onRemovalComplete(r,o)}registerTrigger(e,t,i,r,o){let s=e+"-"+r,a=this._triggerCache[s];if(!a){let l=[],c=[],u=t$(this._driver,o,l,c);if(l.length)throw t1e(r,l);c.length&&void 0,a=H1e(r,u,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[o,s]=Nj(i),a=r;this._timelineEngine.command(o,t,s,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,o){if(i.charAt(0)=="@"){let[s,a]=Nj(i);return this._timelineEngine.listen(s,t,a,o)}return this._transitionEngine.listen(e,t,i,r,o)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function n_e(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=gM(e[0]),e.length>1&&(i=gM(e[e.length-1]))):e instanceof Map&&(t=gM(e)),t||i?new RM(n,t,i):null}var RM=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let r=n.initialStylesByElement.get(e);r||n.initialStylesByElement.set(e,r=new Map),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Qo(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Qo(this._element,this._initialStyles),this._endStyles&&(Qo(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Uu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Uu(this._element,this._endStyles),this._endStyles=null),Qo(this._element,this._initialStyles),this._state=3)}};function gM(n){let e=null;return n.forEach((t,i)=>{i_e(i)&&(e=e||new Map,e.set(i,t))}),e}function i_e(n){return n==="display"||n==="position"}var lE=class{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:VM(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},cE=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Yj(e,t)}getParentElement(e){return NM(e)}query(e,t,i){return Qj(e,t,i)}computeStyle(e,t,i){return VM(e,t)}animate(e,t,i,r,o,s=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};o&&(l.easing=o);let c=new Map,u=s.filter(g=>g instanceof lE);E1e(i,r)&&u.forEach(g=>{g.currentSnapshot.forEach((w,y)=>c.set(y,w))});let h=y1e(t).map(g=>new Map(g));h=S1e(e,h,c);let p=n_e(e,h);return new lE(e,h,l,p)}};var eE="@",s$="@.disabled",uE=class{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==eE&&t==s$?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},DM=class extends uE{constructor(e,t,i,r,o){super(t,i,r,o),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==eE?t.charAt(1)=="."&&t==s$?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==eE){let r=r_e(e),o=t.slice(1),s="";return o.charAt(0)!=eE&&([o,s]=o_e(o)),this.engine.listen(this.namespaceId,r,o,s,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,i,a)})}return this.delegate.listen(e,t,i)}};function r_e(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function o_e(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var dE=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(r,o)=>{o?.removeChild(null,r)}}createRenderer(e,t){let i="",r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let h=()=>c.delete(r);u=new uE(i,r,this.engine,h),c.set(r,u)}return u}let o=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(o,s,e,c.name,c)};return t.data.animation.forEach(a),new DM(this,s,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(o=>{let[s,a]=o;s(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var a_e=(()=>{class n extends nm{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)(W(An),W(Hu),W(zu))}}static{this.\u0275prov=K({token:n,factory:n.\u0275fac})}}return n})();function l_e(){return new iE}function c_e(n,e,t){return new dE(n,e,t)}var a$=[{provide:zu,useFactory:l_e},{provide:nm,useClass:a_e},{provide:da,useFactory:c_e,deps:[N0,nm,st]}],Tot=[{provide:Hu,useFactory:()=>new cE},{provide:NT,useValue:"BrowserAnimations"},...a$],u_e=[{provide:Hu,useClass:LM},{provide:NT,useValue:"NoopAnimations"},...a$];function l$(){return[...u_e]}var c$={providers:[X3({eventCoalescing:!0}),CF(xj),wT(kk),l$(),IL(xL(),PL()),{provide:gy,useFactory:Pj},{provide:cg,useFactory:Dj},{provide:r4,useFactory:Rj},Ih,by,ug]};var hE=class n{constructor(e){this.alertService=e}showAlert=!1;incommingAlert={title:"",message:"",type:"danger"};ngOnInit(){this.alertService.alertRequest$.pipe(ct(e=>{this.incommingAlert=e,this.showAlert=!0}),LE(5e3),ct(()=>{this.showAlert=!1})).subscribe()}static \u0275fac=function(t){return new(t||n)(Ne(Vh))};static \u0275cmp=ee({type:n,selectors:[["app-alert"]],standalone:!0,features:[re],decls:5,vars:10,consts:[[1,"alert-container"],["role","alert"]],template:function(t,i){t&1&&(d(0,"div",0)(1,"div",1)(2,"div"),m(3),f(),m(4),f()()),t&2&&(xm("alert-visible",i.showAlert),Oe(),ZT("alert alert-bg-",i.incommingAlert.type,""),Oe(),ZT("alert-title-",i.incommingAlert.type,""),Oe(),Ur(" ",i.incommingAlert.title," "),Oe(),Ur(" ",i.incommingAlert.message," "))},styles:[".alert-container[_ngcontent-%COMP%]{z-index:99999;display:none;position:fixed;right:1rem;bottom:1rem;background-color:#fff;padding:10px;border-radius:8px}.alert-visible[_ngcontent-%COMP%]{display:block!important}.alert[_ngcontent-%COMP%]{margin:0}.alert-title[_ngcontent-%COMP%], .alert-title-danger[_ngcontent-%COMP%], .alert-title-warning[_ngcontent-%COMP%], .alert-title-success[_ngcontent-%COMP%]{display:inline-block;padding:1px 4px;border-radius:5px;font-weight:700;margin-right:5px;color:#fff}.alert-title-success[_ngcontent-%COMP%]{background-color:#269d42;border:1px solid #1b8534}.alert-title-warning[_ngcontent-%COMP%]{background-color:#8b6b08;border:1px solid #ffc107}.alert-title-danger[_ngcontent-%COMP%]{background-color:#dc351c;border:1px solid #c5321c}"]})};var fE=class n{constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ee({type:n,selectors:[["app-root"]],standalone:!0,features:[re],decls:1150,vars:0,consts:[["id","modal-csharp","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],[1,"spacer"],[1,"text-center","modal-title"],[1,"row"],[1,"small-16","medium-14","medium-centered","columns"],["data-close","","aria-label","Close modal","type","button",1,"close-button"],["src","assets/images/icons/icon-close.svg","alt","go back"],["id","modal-asp-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-web-api","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-razor","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-blazor","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net-core","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-sql-server","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-html","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-css","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-scss","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-javascript","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-typescript","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-jquery","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ajax","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-angular","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-visual-studio","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-entity-framework","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-digipass","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ubikey","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-message-queuing","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-progressive-web-apps","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-aurelia","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-architecture-design","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-okta","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-data-visualization","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-api-management","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-gulp","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dependency-injection","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-tfs","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-active-directory","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-agile","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-enterprise-resource-planning","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-event-driven","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-iis","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-continuous-deployment","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-linq","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-asynchronous","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-design-pattern","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-mvc","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microservices","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-containers","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-docker","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ci-cd-pipelines","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-performance-tuning","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-signalr","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-web-forms","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-powershell","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-caching","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-maui","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-kubernetes","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-visual-basic","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-on-premise","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-excel-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-word-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-database","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-reporting","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-outlook-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-outlook-form","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-mainframe","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net-framework","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-crystal-reports","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-e-banking","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-barcode-reader","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-vb-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-c-sharp-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-autocad-api","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-omnis-studio","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microsoft-graph","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-cognitive-services","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microsoft-authenticator","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-serverless","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-functions","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-sql-database","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-component","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-directive","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-in-process","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-out-of-process","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-isolated","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-module","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"]],template:function(t,i){t&1&&(b(0,"app-alert")(1,"router-outlet"),d(2,"div",0),b(3,"hr",1),d(4,"h2",2),m(5,"C#"),f(),d(6,"div",3)(7,"div",4),b(8,"hr",1),d(9,"p"),m(10,`C# (pronounced "C-sharp") is a modern, object-oriented programming language developed by Microsoft. It's designed for building a wide range of applications, from web and mobile apps to games and enterprise software. It's versatile, powerful, and integrates seamlessly with the .NET framework`),f(),b(11,"hr",1),d(12,"small"),m(13,"AI generated content"),f()()(),d(14,"button",5),b(15,"img",6),f()(),d(16,"div",7),b(17,"hr",1),d(18,"h2",2),m(19,"Asp.Net"),f(),d(20,"div",3)(21,"div",4),b(22,"hr",1),d(23,"p"),m(24,"ASP.NET is an open-source web framework developed by Microsoft for building modern web applications and services. It enables developers to create dynamic web pages, APIs, and real-time applications with the robust .NET platform."),f(),b(25,"hr",1),d(26,"small"),m(27,"AI generated content"),f()()(),d(28,"button",5),b(29,"img",6),f()(),d(30,"div",8),b(31,"hr",1),d(32,"h2",2),m(33,"Web API"),f(),d(34,"div",3)(35,"div",4),b(36,"hr",1),d(37,"p"),m(38,"A Web API (Application Programming Interface) is a tool that allows different software applications to communicate with each other over the web. It enables developers to create HTTP requests and receive responses, making it easier to integrate and exchange data between different systems. Web APIs are essential for building modern web applications, services, and connecting various devices and platforms. They're like the digital glue that holds everything together in the web ecosystem."),f(),b(39,"hr",1),d(40,"small"),m(41,"AI generated content"),f()()(),d(42,"button",5),b(43,"img",6),f()(),d(44,"div",9),b(45,"hr",1),d(46,"h2",2),m(47,"Razor"),f(),d(48,"div",3)(49,"div",4),b(50,"hr",1),d(51,"p"),m(52,"Razor is a syntax used in ASP.NET for embedding server-based code into web pages. It allows developers to create dynamic web content by mixing HTML with C# or VB.NET code seamlessly. Razor is known for its simplicity and ease of use, making it a popular choice for building interactive and data-driven web applications. Think of it as the glue that holds your web pages and server-side logic together, allowing for a smooth, dynamic user experience."),f(),b(53,"hr",1),d(54,"small"),m(55,"AI generated content"),f()()(),d(56,"button",5),b(57,"img",6),f()(),d(58,"div",10),b(59,"hr",1),d(60,"h2",2),m(61,"Blazor"),f(),d(62,"div",3)(63,"div",4),b(64,"hr",1),d(65,"p"),m(66,"Blazor is a web framework developed by Microsoft for building interactive web applications using C#. What makes Blazor stand out is that it allows you to use C# for both client-side and server-side code, rather than JavaScript, creating a more seamless and efficient development process. It leverages WebAssembly to run C# code directly in the browser, providing a highly responsive and dynamic user experience. Whether you're creating a single-page application (SPA) or more complex web apps, Blazor offers a versatile and powerful platform to build on."),f(),b(67,"hr",1),d(68,"small"),m(69,"AI generated content"),f()()(),d(70,"button",5),b(71,"img",6),f()(),d(72,"div",11),b(73,"hr",1),d(74,"h2",2),m(75,".Net Core"),f(),d(76,"div",3)(77,"div",4),b(78,"hr",1),d(79,"p"),m(80,".NET Core is an open-source, cross-platform framework developed by Microsoft for building modern applications. Unlike the traditional .NET Framework, which is limited to Windows, .NET Core can run on Windows, macOS, and Linux. It supports a variety of application types, including web, mobile, desktop, cloud, and IoT. .NET Core is known for its performance, flexibility, and ability to work seamlessly with microservices and containerization technologies like Docker. It's the go-to choice for developers looking to build high-performance, scalable, and cross-platform applications."),f(),b(81,"hr",1),d(82,"small"),m(83,"AI generated content"),f()()(),d(84,"button",5),b(85,"img",6),f()(),d(86,"div",12),b(87,"hr",1),d(88,"h2",2),m(89,"Sql Server"),f(),d(90,"div",3)(91,"div",4),b(92,"hr",1),d(93,"p"),m(94,"SQL Server is a relational database management system (RDBMS) developed by Microsoft. It's used to store and retrieve data as requested by other software applications, whether those applications run on the same computer or on another computer across a network. SQL Server is known for its high performance, scalability, and security features. It supports SQL (Structured Query Language), the standard language for managing and manipulating databases."),f(),b(95,"hr",1),d(96,"small"),m(97,"AI generated content"),f()()(),d(98,"button",5),b(99,"img",6),f()(),d(100,"div",13),b(101,"hr",1),d(102,"h2",2),m(103,"HTML"),f(),d(104,"div",3)(105,"div",4),b(106,"hr",1),d(107,"p"),m(108,"HTML (HyperText Markup Language) is the standard language used to create and structure web pages. It uses a series of elements or tags to define the different parts of a webpage, such as headings, paragraphs, links, images, and other types of content. HTML is the backbone of web development, providing the basic structure that is then enhanced by CSS and JavaScript. If the web were a house, HTML would be the framework holding it all together."),f(),b(109,"hr",1),d(110,"small"),m(111,"AI generated content"),f()()(),d(112,"button",5),b(113,"img",6),f()(),d(114,"div",14),b(115,"hr",1),d(116,"h2",2),m(117,"CSS"),f(),d(118,"div",3)(119,"div",4),b(120,"hr",1),d(121,"p"),m(122,"CSS (Cascading Style Sheets) is a language used for describing the presentation of a document written in HTML or XML. It controls the layout, colors, fonts, and overall visual aesthetics of web pages. CSS helps to make the web visually appealing and user-friendly by separating content from design."),f(),b(123,"hr",1),d(124,"small"),m(125,"AI generated content"),f()()(),d(126,"button",5),b(127,"img",6),f()(),d(128,"div",15),b(129,"hr",1),d(130,"h2",2),m(131,"SCSS"),f(),d(132,"div",3)(133,"div",4),b(134,"hr",1),d(135,"p"),m(136,"SCSS (Sassy CSS) is a syntax of SASS (Syntactically Awesome Style Sheets), which is an extension of CSS. It adds more powerful features like variables, nested rules, and mixins, making it easier to write and maintain large stylesheets. SCSS syntax is similar to CSS, so you can start using it without a steep learning curve, but it offers more flexibility and control over the styling process. It's like CSS on steroids, designed to make your life as a web developer much simpler and more efficient."),f(),b(137,"hr",1),d(138,"small"),m(139,"AI generated content"),f()()(),d(140,"button",5),b(141,"img",6),f()(),d(142,"div",16),b(143,"hr",1),d(144,"h2",2),m(145,"JavaScript"),f(),d(146,"div",3)(147,"div",4),b(148,"hr",1),d(149,"p"),m(150,"JavaScript is a versatile, high-level programming language primarily used to create interactive effects within web browsers. It's an essential part of web development, enabling dynamic content, such as interactive forms, animations, and real-time updates. JavaScript is key to modern web experiences, providing the ability to make web pages more engaging and functional. It\u2019s like the magic wand that brings web pages to life."),f(),b(151,"hr",1),d(152,"small"),m(153,"AI generated content"),f()()(),d(154,"button",5),b(155,"img",6),f()(),d(156,"div",17),b(157,"hr",1),d(158,"h2",2),m(159,"TypeScript"),f(),d(160,"div",3)(161,"div",4),b(162,"hr",1),d(163,"p"),m(164,"TypeScript is a superset of JavaScript developed by Microsoft. It adds static typing to the language, which helps developers catch errors early in the development process. TypeScript code is transpiled into plain JavaScript, ensuring compatibility with all existing JavaScript environments. This makes it a powerful tool for building large-scale applications, as it provides robust tooling for error checking, autocomplete, and other development enhancements. Essentially, it's JavaScript with superpowers."),f(),b(165,"hr",1),d(166,"small"),m(167,"AI generated content"),f()()(),d(168,"button",5),b(169,"img",6),f()(),d(170,"div",18),b(171,"hr",1),d(172,"h2",2),m(173,"jQuery"),f(),d(174,"div",3)(175,"div",4),b(176,"hr",1),d(177,"p"),m(178,"jQuery is a fast, small, and feature-rich JavaScript library designed to simplify HTML document traversal, event handling, animation, and Ajax interactions. With its easy-to-use API that works across a multitude of browsers, jQuery significantly reduces the complexity of JavaScript programming, making it easier to create dynamic web content. It\u2019s like the Swiss Army knife of JavaScript libraries, helping you do more with less code."),f(),b(179,"hr",1),d(180,"small"),m(181,"AI generated content"),f()()(),d(182,"button",5),b(183,"img",6),f()(),d(184,"div",19),b(185,"hr",1),d(186,"h2",2),m(187,"Ajax"),f(),d(188,"div",3)(189,"div",4),b(190,"hr",1),d(191,"p"),m(192,"AJAX (Asynchronous JavaScript and XML) is a technique used in web development to create asynchronous web applications. It allows web pages to be updated asynchronously by exchanging small amounts of data with the server behind the scenes. This means that parts of a web page can be updated without needing to reload the entire page, resulting in a more dynamic and faster user experience. It's like magic for creating seamless, interactive web applications."),f(),b(193,"hr",1),d(194,"small"),m(195,"AI generated content"),f()()(),d(196,"button",5),b(197,"img",6),f()(),d(198,"div",20),b(199,"hr",1),d(200,"h2",2),m(201,"Angular"),f(),d(202,"div",3)(203,"div",4),b(204,"hr",1),d(205,"p"),m(206,"Angular is a popular front-end framework for building dynamic web applications. Developed and maintained by Google, it allows developers to use HTML as their template language and extend HTML's syntax to express application components clearly. Angular is known for its robust performance and wide adoption in the development community, making it a go-to choice for scalable and maintainable web applications."),f(),b(207,"hr",1),d(208,"small"),m(209,"AI generated content"),f()()(),d(210,"button",5),b(211,"img",6),f()(),d(212,"div",21),b(213,"hr",1),d(214,"h2",2),m(215,"Visual Studio"),f(),d(216,"div",3)(217,"div",4),b(218,"hr",1),d(219,"p"),m(220,"Visual Studio is an integrated development environment (IDE) created by Microsoft. It's used for developing computer programs, websites, web apps, web services, and mobile apps. With features like intelligent code completion, debugging, and version control, Visual Studio supports various programming languages and is highly customizable. It's like the Swiss Army knife for developers, offering a comprehensive set of tools to streamline the development process from start to finish."),f(),b(221,"hr",1),d(222,"small"),m(223,"AI generated content"),f()()(),d(224,"button",5),b(225,"img",6),f()(),d(226,"div",22),b(227,"hr",1),d(228,"h2",2),m(229,".Net"),f(),d(230,"div",3)(231,"div",4),b(232,"hr",1),d(233,"p"),m(234,".NET is a free, open-source, cross-platform framework developed by Microsoft for building a wide range of applications. It supports multiple programming languages, including C#, F#, and Visual Basic, and allows developers to create web, mobile, desktop, cloud, and IoT applications. .NET is designed to provide a consistent programming model across various platforms and devices, making it a versatile and powerful choice for developers."),f(),b(235,"hr",1),d(236,"small"),m(237,"AI generated content"),f()()(),d(238,"button",5),b(239,"img",6),f()(),d(240,"div",23),b(241,"hr",1),d(242,"h2",2),m(243,"Entity Framework"),f(),d(244,"div",3)(245,"div",4),b(246,"hr",1),d(247,"p"),m(248,"Entity Framework (EF) is an object-relational mapping (ORM) framework for .NET applications. It allows developers to work with a database using .NET objects, eliminating the need for most of the data-access code. EF simplifies data manipulation by letting you query, insert, update, and delete data using standard .NET syntax. It's like having a translator between your application and your database, making data operations more intuitive and easier to manage. Whether you're working with a new database or an existing one, EF can streamline your data access process, saving you a ton of time and effort."),f(),b(249,"hr",1),d(250,"small"),m(251,"AI generated content"),f()()(),d(252,"button",5),b(253,"img",6),f()(),d(254,"div",24),b(255,"hr",1),d(256,"h2",2),m(257,"Digpass"),f(),d(258,"div",3)(259,"div",4),b(260,"hr",1),d(261,"p"),m(262,"Digipass is a brand of hardware security tokens and authentication products developed by OneSpan. These devices are used to provide strong authentication and secure electronic signatures for applications and transactions over the internet. Digipass products come in various form factors, including one-button tokens, e-signature devices, card readers, PKI tokens, and Bluetooth-enabled devices."),f(),b(263,"hr",1),d(264,"small"),m(265,"AI generated content"),f()()(),d(266,"button",5),b(267,"img",6),f()(),d(268,"div",25),b(269,"hr",1),d(270,"h2",2),m(271,"Ubikey"),f(),d(272,"div",3)(273,"div",4),b(274,"hr",1),d(275,"p"),m(276,"YubiKey is a hardware authentication device developed by Yubico. It's designed to provide strong two-factor (2FA) and multi-factor (MFA) authentication for various online services. YubiKey is like a digital key that provides an extra layer of security for your online accounts, making it much harder for unauthorized users to gain access."),f(),b(277,"hr",1),d(278,"small"),m(279,"AI generated content"),f()()(),d(280,"button",5),b(281,"img",6),f()(),d(282,"div",26),b(283,"hr",1),d(284,"h2",2),m(285,"Message Queuing"),f(),d(286,"div",3)(287,"div",4),b(288,"hr",1),d(289,"p"),m(290,"Message queuing is a method of communication between different parts of a system where messages are placed in a queue and processed asynchronously. This means that the sender and receiver do not need to interact with the message queue at the same time. Message queuing is commonly used in distributed systems, microservices architectures, and serverless computing to enhance communication and workflow management."),f(),b(291,"hr",1),d(292,"small"),m(293,"AI generated content"),f()()(),d(294,"button",5),b(295,"img",6),f()(),d(296,"div",27),b(297,"hr",1),d(298,"h2",2),m(299,"Azure"),f(),d(300,"div",3)(301,"div",4),b(302,"hr",1),d(303,"p"),m(304,"Azure is Microsoft's cloud computing platform, offering a wide range of services for building, deploying, and managing applications and services through Microsoft-managed data centers."),f(),b(305,"hr",1),d(306,"small"),m(307,"AI generated content"),f()()(),d(308,"button",5),b(309,"img",6),f()(),d(310,"div",28),b(311,"hr",1),d(312,"h2",2),m(313,"Progressive Web Apps"),f(),d(314,"div",3)(315,"div",4),b(316,"hr",1),d(317,"p"),m(318,"Progressive Web Apps (PWAs) are web applications that combine the best features of web and mobile apps. They aim to provide an app-like experience directly in a web browser. PWAs offer a seamless, reliable, and engaging experience, making them a popular choice for modern web development. It's like having the best of both web and mobile worlds in one package."),f(),b(319,"hr",1),d(320,"small"),m(321,"AI generated content"),f()()(),d(322,"button",5),b(323,"img",6),f()(),d(324,"div",29),b(325,"hr",1),d(326,"h2",2),m(327,"Aurelia"),f(),d(328,"div",3)(329,"div",4),b(330,"hr",1),d(331,"p"),m(332,"Aurelia is a modern front-end framework for building browser, mobile, and desktop applications. It's a collection of modular JavaScript components that can be used together to create powerful applications. Aurelia is designed to be simple, powerful, and unobtrusive, allowing developers to build components using vanilla JavaScript or TypeScript."),f(),b(333,"hr",1),d(334,"small"),m(335,"AI generated content"),f()()(),d(336,"button",5),b(337,"img",6),f()(),d(338,"div",30),b(339,"hr",1),d(340,"h2",2),m(341,"Architecture Design"),f(),d(342,"div",3)(343,"div",4),b(344,"hr",1),d(345,"p"),m(346,"When it comes to architecture design in web development, it's all about creating digital spaces that are both functional and aesthetically pleasing. Think of it as constructing a building online: you need a solid foundation (clean code), functional layouts (user interfaces), and an engaging facade (visual design)."),f(),b(347,"hr",1),d(348,"small"),m(349,"AI generated content"),f()()(),d(350,"button",5),b(351,"img",6),f()(),d(352,"div",31),b(353,"hr",1),d(354,"h2",2),m(355,"Okta"),f(),d(356,"div",3)(357,"div",4),b(358,"hr",1),d(359,"p"),m(360,"Okta is a cloud-based identity and access management service that helps organizations manage and secure user access to various applications and resources. It provides features like single sign-on (SSO), multi-factor authentication (MFA), and user lifecycle management, making it easier for users to securely access multiple applications with one set of credentials. Okta is designed to be flexible and integrates with a wide range of applications and services, ensuring secure and seamless access for employees, customers, and partners."),f(),b(361,"hr",1),d(362,"small"),m(363,"AI generated content"),f()()(),d(364,"button",5),b(365,"img",6),f()(),d(366,"div",32),b(367,"hr",1),d(368,"h2",2),m(369,"Data Visualization"),f(),d(370,"div",3)(371,"div",4),b(372,"hr",1),d(373,"p"),m(374,"Data visualization is like translating complex data into visual context, making it easier for people to understand patterns, trends, and insights. Think of it as the architecture of information."),f(),b(375,"hr",1),d(376,"small"),m(377,"AI generated content"),f()()(),d(378,"button",5),b(379,"img",6),f()(),d(380,"div",33),b(381,"hr",1),d(382,"h2",2),m(383,"API Management"),f(),d(384,"div",3)(385,"div",4),b(386,"hr",1),d(387,"p"),m(388,"API management is all about efficiently handling the lifecycle of APIs (Application Programming Interfaces). It involves creating, publishing, securing, and monitoring APIs to ensure they work seamlessly across different environments. Think of it as the traffic controller for data exchange between applications, making sure everything flows smoothly and securely."),f(),b(389,"hr",1),d(390,"small"),m(391,"AI generated content"),f()()(),d(392,"button",5),b(393,"img",6),f()(),d(394,"div",34),b(395,"hr",1),d(396,"h2",2),m(397,"Gulp"),f(),d(398,"div",3)(399,"div",4),b(400,"hr",1),d(401,"p"),m(402,"Gulp is a toolkit for automating tasks in your development workflow. Built on Node.js, it streamlines repetitive tasks like minifying files, compiling CSS from Sass, or running tests. By using Gulp, you can improve your productivity, making your development process faster and more efficient. It's like having a super-efficient assistant that takes care of all the mundane tasks for you."),f(),b(403,"hr",1),d(404,"small"),m(405,"AI generated content"),f()()(),d(406,"button",5),b(407,"img",6),f()(),d(408,"div",35),b(409,"hr",1),d(410,"h2",2),m(411,"Dependency Injection"),f(),d(412,"div",3)(413,"div",4),b(414,"hr",1),d(415,"p"),m(416,"Dependency injection is a technique in software design that makes a system more flexible and easier to maintain. Instead of having a class create its dependencies, they are provided from the outside. It\u2019s like having a builder on a construction site being handed the exact tools they need, right when they need them, rather than having to search for each one themselves. Keeps everything organized and efficient."),f(),b(417,"hr",1),d(418,"small"),m(419,"AI generated content"),f()()(),d(420,"button",5),b(421,"img",6),f()(),d(422,"div",36),b(423,"hr",1),d(424,"h2",2),m(425,"TFS"),f(),d(426,"div",3)(427,"div",4),b(428,"hr",1),d(429,"p"),m(430,"Team Foundation Server (TFS) is a powerful tool developed by Microsoft for managing software development projects. It provides version control, project management, continuous integration, and build automation capabilities. TFS helps teams collaborate more effectively by tracking work items, managing source code, and automating builds and releases. However, it's worth noting that TFS has been rebranded as Azure DevOps Server. This rebranding brings many of the features from the cloud-based Azure DevOps Services to the on-premises server product."),f(),b(431,"hr",1),d(432,"small"),m(433,"AI generated content"),f()()(),d(434,"button",5),b(435,"img",6),f()(),d(436,"div",37),b(437,"hr",1),d(438,"h2",2),m(439,"Azure Active Directory"),f(),d(440,"div",3)(441,"div",4),b(442,"hr",1),d(443,"p"),m(444,"Azure Active Directory (now known as Microsoft Entra ID) is a cloud-based identity and access management service by Microsoft. It helps organizations manage user identities and control access to resources, both within their own environments and across multiple cloud services. With features like secure adaptive access, seamless user experiences, and risk-based conditional access policies, it ensures that only authorized users can access the right resources at the right times."),f(),b(445,"hr",1),d(446,"small"),m(447,"AI generated content"),f()()(),d(448,"button",5),b(449,"img",6),f()(),d(450,"div",38),b(451,"hr",1),d(452,"h2",2),m(453,"Agile"),f(),d(454,"div",3)(455,"div",4),b(456,"hr",1),d(457,"p"),m(458,'Agile is a methodology that emphasizes flexibility, collaboration, and customer satisfaction. It breaks projects into small, manageable units called "sprints," allowing teams to adapt and respond to changing requirements quickly. Think of it like steering a ship where you can change direction smoothly instead of trying to turn a massive vessel all at once.'),f(),b(459,"hr",1),d(460,"small"),m(461,"AI generated content"),f()()(),d(462,"button",5),b(463,"img",6),f()(),d(464,"div",39),b(465,"hr",1),d(466,"h2",2),m(467,"Enterprise Resource Planning"),f(),d(468,"div",3)(469,"div",4),b(470,"hr",1),d(471,"p"),m(472,"Enterprise Resource Planning (ERP) is a powerful software platform that helps organizations manage and integrate various essential business processes. These processes can include finance, human resources, supply chain, manufacturing, services, procurement, and more. By consolidating these functions into a single system, ERPs streamline operations, improve efficiency, and provide real-time data insights."),f(),b(473,"hr",1),d(474,"small"),m(475,"AI generated content"),f()()(),d(476,"button",5),b(477,"img",6),f()(),d(478,"div",40),b(479,"hr",1),d(480,"h2",2),m(481,"Event Driven"),f(),d(482,"div",3)(483,"div",4),b(484,"hr",1),d(485,"p"),m(486,"Event-driven architecture revolves around using events to trigger and communicate between decoupled services. It's like a sophisticated relay race, where the baton (event) gets passed along to the next runner (service) when the time is right. Perfect for systems that need to react to changes swiftly, like real-time analytics or IoT applications."),f(),b(487,"hr",1),d(488,"small"),m(489,"AI generated content"),f()()(),d(490,"button",5),b(491,"img",6),f()(),d(492,"div",41),b(493,"hr",1),d(494,"h2",2),m(495,"IIS"),f(),d(496,"div",3)(497,"div",4),b(498,"hr",1),d(499,"p"),m(500,"IIS (Internet Information Services) is a flexible, secure, and manageable web server created by Microsoft. It's used to host websites, services, and applications on the web. IIS supports various protocols, including HTTP, HTTPS, FTP, FTPS, and SMTP, making it a versatile choice for handling web traffic. It integrates seamlessly with .NET, making it a powerful tool for deploying ASP.NET applications. It's also known for its scalability and robust features, allowing developers to manage and deploy their web applications efficiently."),f(),b(501,"hr",1),d(502,"small"),m(503,"AI generated content"),f()()(),d(504,"button",5),b(505,"img",6),f()(),d(506,"div",42),b(507,"hr",1),d(508,"h2",2),m(509,"Continuous Deployment"),f(),d(510,"div",3)(511,"div",4),b(512,"hr",1),d(513,"p"),m(514,"Continuous deployment is like the ultimate efficiency upgrade for your software development lifecycle. It automates the entire release process, ensuring that code changes are tested, validated, and automatically deployed to production without human intervention. This means faster updates, quicker fixes, and a more dynamic, responsive product. Ever tried to implement this in your workflow? I imagine it brings a certain thrill of agility and efficiency to the team."),f(),b(515,"hr",1),d(516,"small"),m(517,"AI generated content"),f()()(),d(518,"button",5),b(519,"img",6),f()(),d(520,"div",43),b(521,"hr",1),d(522,"h2",2),m(523,"Linq"),f(),d(524,"div",3)(525,"div",4),b(526,"hr",1),d(527,"p"),m(528,"Language Integrated Query (LINQ) is a powerful .NET component that simplifies querying data from different sources, like databases, collections, and XML files, using a consistent syntax. Think of it as having a universal translator for data queries\u2014regardless of where your data lives, LINQ can help you access and manipulate it smoothly. Have you experimented with LINQ in any of your projects? Its seamless integration with C# is pretty impressive."),f(),b(529,"hr",1),d(530,"small"),m(531,"AI generated content"),f()()(),d(532,"button",5),b(533,"img",6),f()(),d(534,"div",44),b(535,"hr",1),d(536,"h2",2),m(537,"Asynchonous"),f(),d(538,"div",3)(539,"div",4),b(540,"hr",1),d(541,"p"),m(542,"Asynchronous programming is all about executing tasks independently of the main program flow, allowing for more efficient use of resources and smoother performance. It's like having multiple chefs in a kitchen, each working on different dishes without having to wait for one another to finish. This way, you avoid bottlenecks and keep things running smoothly."),f(),b(543,"hr",1),d(544,"small"),m(545,"AI generated content"),f()()(),d(546,"button",5),b(547,"img",6),f()(),d(548,"div",45),b(549,"hr",1),d(550,"h2",2),m(551,"Design Pattern"),f(),d(552,"div",3)(553,"div",4),b(554,"hr",1),d(555,"p"),m(556,"A design pattern is a reusable solution to a common problem in software design. It's a template or guideline that can be applied to a wide range of scenarios to simplify complex problems and improve code efficiency, readability, and maintainability. Design patterns are like blueprints that help you build more robust and scalable software. They offer best practices and solutions that have been tested and proven over time."),f(),b(557,"hr",1),d(558,"small"),m(559,"AI generated content"),f()()(),d(560,"button",5),b(561,"img",6),f()(),d(562,"div",46),b(563,"hr",1),d(564,"h2",2),m(565,"MVC"),f(),d(566,"div",3)(567,"div",4),b(568,"hr",1),d(569,"p"),m(570,"MVC (Model-View-Controller) is a design pattern used in software development. It separates an application into three interconnected components. This separation helps in organizing code and making applications more scalable and maintainable."),f(),b(571,"hr",1),d(572,"small"),m(573,"AI generated content"),f()()(),d(574,"button",5),b(575,"img",6),f()(),d(576,"div",47),b(577,"hr",1),d(578,"h2",2),m(579,"Microservices"),f(),d(580,"div",3)(581,"div",4),b(582,"hr",1),d(583,"p"),m(584,"Microservices is an architectural style where an application is composed of small, independent services that communicate with each other over APIs. Each service is responsible for a specific business capability and can be developed, deployed, and scaled independently. Microservices are like a well-coordinated team where each member handles their own tasks efficiently, ensuring the entire operation runs smoothly. If you're building for the future, microservices provide the flexibility and scalability modern applications need."),f(),b(585,"hr",1),d(586,"small"),m(587,"AI generated content"),f()()(),d(588,"button",5),b(589,"img",6),f()(),d(590,"div",48),b(591,"hr",1),d(592,"h2",2),m(593,"Containers"),f(),d(594,"div",3)(595,"div",4),b(596,"hr",1),d(597,"p"),m(598,"Containers are lightweight, portable, and consistent computing environments that package up software and its dependencies so it can run reliably across different computing environments. They isolate applications from their surroundings, ensuring they run the same way regardless of where they\u2019re deployed. Think of containers as little self-sufficient pods that house your application, shielding it from the chaos of the outside world. Docker is the most popular containerization platform, providing tools to create, deploy, and manage containers."),f(),b(599,"hr",1),d(600,"small"),m(601,"AI generated content"),f()()(),d(602,"button",5),b(603,"img",6),f()(),d(604,"div",49),b(605,"hr",1),d(606,"h2",2),m(607,"Docker"),f(),d(608,"div",3)(609,"div",4),b(610,"hr",1),d(611,"p"),m(612,"Docker is an open-source platform that automates the deployment of applications inside lightweight, portable containers. Containers include everything needed to run the application, such as code, runtime, system tools, and libraries, ensuring consistency across different environments. Think of Docker as a handy tool that packages your app and all its dependencies into a neat little container, allowing it to run seamlessly on any machine."),f(),b(613,"hr",1),d(614,"small"),m(615,"AI generated content"),f()()(),d(616,"button",5),b(617,"img",6),f()(),d(618,"div",50),b(619,"hr",1),d(620,"h2",2),m(621,"CI/CD Pipelines"),f(),d(622,"div",3)(623,"div",4),b(624,"hr",1),d(625,"p"),m(626,"CI/CD pipelines (Continuous Integration / Continuous Deployment) are automated workflows that enable software developers to integrate, test, and deploy code changes more efficiently and frequently. These pipelines are crucial for modern DevOps practices. CI/CD pipelines are like a well-oiled assembly line for your software, ensuring everything runs smoothly from development to deployment. They make sure that new features, bug fixes, and updates are delivered quickly and reliably."),f(),b(627,"hr",1),d(628,"small"),m(629,"AI generated content"),f()()(),d(630,"button",5),b(631,"img",6),f()(),d(632,"div",51),b(633,"hr",1),d(634,"h2",2),m(635,"Performance Tuning"),f(),d(636,"div",3)(637,"div",4),b(638,"hr",1),d(639,"p"),m(640,"Performance tuning is the process of optimizing the performance of your application, database, or system to ensure it runs efficiently and effectively. It involves identifying bottlenecks and improving various aspects to enhance overall performance. Performance tuning is crucial for ensuring your application runs smoothly, scales effectively, and provides a positive user experience. It's like fine-tuning a musical instrument to ensure it plays beautifully."),f(),b(641,"hr",1),d(642,"small"),m(643,"AI generated content"),f()()(),d(644,"button",5),b(645,"img",6),f()(),d(646,"div",52),b(647,"hr",1),d(648,"h2",2),m(649,"SignalR"),f(),d(650,"div",3)(651,"div",4),b(652,"hr",1),d(653,"p"),m(654,"SignalR is an open-source library for ASP.NET developers that simplifies the process of adding real-time web functionality to applications. It enables server-side code to push content to connected clients instantly, without the need for the client to request it. This is particularly useful for applications that require high-frequency updates, such as chat apps, live dashboards, and collaborative tools. SignalR is like a bridge that keeps your server and clients in constant, seamless communication, making it perfect for interactive and dynamic applications."),f(),b(655,"hr",1),d(656,"small"),m(657,"AI generated content"),f()()(),d(658,"button",5),b(659,"img",6),f()(),d(660,"div",53),b(661,"hr",1),d(662,"h2",2),m(663,"Web Forms"),f(),d(664,"div",3)(665,"div",4),b(666,"hr",1),d(667,"p"),m(668,"Web Forms is a part of the ASP.NET framework for building dynamic web pages. It allows developers to create user-friendly, data-driven web applications using a drag-and-drop, event-driven model. Web Forms makes it easy to build complex forms and interfaces by combining server-side and client-side code seamlessly. While it's powerful, it's largely been superseded by more modern frameworks like ASP.NET MVC and ASP.NET Core, which offer better separation of concerns, improved testability, and more control over the HTML markup. If you\u2019re looking to build or maintain legacy applications, Web Forms might still be relevant. But for new projects, exploring newer frameworks might be beneficial."),f(),b(669,"hr",1),d(670,"small"),m(671,"AI generated content"),f()()(),d(672,"button",5),b(673,"img",6),f()(),d(674,"div",54),b(675,"hr",1),d(676,"h2",2),m(677,"PowerShell"),f(),d(678,"div",3)(679,"div",4),b(680,"hr",1),d(681,"p"),m(682,"PowerShell is a cross-platform task automation and configuration management framework, consisting of a command-line shell and an associated scripting language. Developed by Microsoft, it is designed for system administrators and power users to automate the administration of Windows, Linux, and macOS operating systems. PowerShell is like the Swiss Army knife for system administrators, offering a robust set of tools to manage and automate virtually every aspect of a computer system."),f(),b(683,"hr",1),d(684,"small"),m(685,"AI generated content"),f()()(),d(686,"button",5),b(687,"img",6),f()(),d(688,"div",55),b(689,"hr",1),d(690,"h2",2),m(691,"Caching"),f(),d(692,"div",3)(693,"div",4),b(694,"hr",1),d(695,"p"),m(696,"Caching is a technique used to store frequently accessed data in a temporary storage area, or cache, to improve performance and efficiency. By keeping this data close to where it's needed, caching reduces the time it takes to access it, minimizing latency and server load. Think of it as a quick-access drawer for your data, ensuring that the most commonly used items are always within easy reach."),f(),b(697,"hr",1),d(698,"small"),m(699,"AI generated content"),f()()(),d(700,"button",5),b(701,"img",6),f()(),d(702,"div",56),b(703,"hr",1),d(704,"h2",2),m(705,"MAUI"),f(),d(706,"div",3)(707,"div",4),b(708,"hr",1),d(709,"p"),m(710,".NET MAUI (Multi-platform App UI) is a cross-platform framework for building native mobile and desktop apps with C# and XAML. It allows developers to create applications that can run on Android, iOS, macOS, and Windows from a single shared codebase. It's like having a universal toolkit for app development, allowing you to reach a wider audience with less effort."),f(),b(711,"hr",1),d(712,"small"),m(713,"AI generated content"),f()()(),d(714,"button",5),b(715,"img",6),f()(),d(716,"div",57),b(717,"hr",1),d(718,"h2",2),m(719,"Kubernetes"),f(),d(720,"div",3)(721,"div",4),b(722,"hr",1),d(723,"p"),m(724,'Kubernetes, often referred to as "K8s," is an open-source platform designed to automate the deployment, scaling, and management of containerized applications. Originally developed by Google and now maintained by the Cloud Native Computing Foundation (CNCF), Kubernetes helps manage complex containerized applications across different environments. Kubernetes is like a conductor for your containerized applications, ensuring they perform harmoniously and efficiently.'),f(),b(725,"hr",1),d(726,"small"),m(727,"AI generated content"),f()()(),d(728,"button",5),b(729,"img",6),f()(),d(730,"div",58),b(731,"hr",1),d(732,"h2",2),m(733,"Visual Basic"),f(),d(734,"div",3)(735,"div",4),b(736,"hr",1),d(737,"p"),m(738,"Visual Basic (VB) is an event-driven programming language and integrated development environment (IDE) from Microsoft. It was designed to be easy to learn and use, providing a graphical user interface (GUI) for programming that allows programmers to create software applications with ease. VB simplifies programming with its use of objects, making it a popular choice for developing Windows-based applications. Think of it as a more visual and user-friendly way to code."),f(),b(739,"hr",1),d(740,"small"),m(741,"AI generated content"),f()()(),d(742,"button",5),b(743,"img",6),f()(),d(744,"div",59),b(745,"hr",1),d(746,"h2",2),m(747,"On premise"),f(),d(748,"div",3)(749,"div",4),b(750,"hr",1),d(751,"p"),m(752,`"On-premises" (often abbreviated as "on-prem") refers to software, services, or infrastructure that are installed and run on the premises of the organization using them, rather than being hosted remotely by a third-party provider. This means the organization is responsible for managing and maintaining all the hardware, software, and infrastructure required to run the service. On-premises solutions are often contrasted with cloud-based solutions, where services are hosted and managed by external providers. Each approach has its own advantages and trade-offs, depending on the organization's needs and resources.`),f(),b(753,"hr",1),d(754,"small"),m(755,"AI generated content"),f()()(),d(756,"button",5),b(757,"img",6),f()(),d(758,"div",60),b(759,"hr",1),d(760,"h2",2),m(761,"Excel\xAE VBA"),f(),d(762,"div",3)(763,"div",4),b(764,"hr",1),d(765,"p"),m(766,"Excel VBA (Visual Basic for Applications) is a programming language that allows you to automate tasks and extend the functionality of Excel. It provides tools to create macros, manipulate data, and build custom forms and controls within Excel workbooks. VBA is powerful for repetitive tasks, complex calculations, and integrating Excel with other applications."),f(),b(767,"hr",1),d(768,"small"),m(769,"AI generated content"),f()()(),d(770,"button",5),b(771,"img",6),f()(),d(772,"div",61),b(773,"hr",1),d(774,"h2",2),m(775,"Word\xAE VBA"),f(),d(776,"div",3)(777,"div",4),b(778,"hr",1),d(779,"p"),m(780,"Word VBA (Visual Basic for Applications) allows you to automate tasks and extend the functionality of Microsoft Word through macros and custom scripts. With Word VBA, you can manipulate document content, format text, interact with other Office applications, and much more."),f(),b(781,"hr",1),d(782,"small"),m(783,"AI generated content"),f()()(),d(784,"button",5),b(785,"img",6),f()(),d(786,"div",62),b(787,"hr",1),d(788,"h2",2),m(789,"Access\xAE VBA"),f(),d(790,"div",3)(791,"div",4),b(792,"hr",1),d(793,"p"),m(794,"Access VBA (Visual Basic for Applications) is a programming language used to automate tasks and extend the functionality of Microsoft Access. With Access VBA, you can create custom scripts and macros to handle repetitive tasks, manage data, and build interactive forms and reports"),f(),b(795,"hr",1),d(796,"small"),m(797,"AI generated content"),f()()(),d(798,"button",5),b(799,"img",6),f()(),d(800,"div",63),b(801,"hr",1),d(802,"h2",2),m(803,"Access\xAE Database"),f(),d(804,"div",3)(805,"div",4),b(806,"hr",1),d(807,"p"),m(808,"An Access database is a relational database management system (RDBMS) developed by Microsoft. It's designed to help users create, manage, and share databases without needing extensive programming knowledge. Access databases are commonly used for small to medium-sized business applications, personal projects, and as a front-end to more powerful database systems."),f(),b(809,"hr",1),d(810,"small"),m(811,"AI generated content"),f()()(),d(812,"button",5),b(813,"img",6),f()(),d(814,"div",64),b(815,"hr",1),d(816,"h2",2),m(817,"Access\xAE Reporting"),f(),d(818,"div",3)(819,"div",4),b(820,"hr",1),d(821,"p"),m(822,"An Access database is a relational database management system (RDBMS) developed by Microsoft. It's designed to help users create, manage, and share databases without needing extensive programming knowledge. Access databases are commonly used for small to medium-sized business applications, personal projects, and as a front-end to more powerful database systems. Access provides a user-friendly interface to design, format, and generate reports, making it a powerful tool for data analysis and presentation."),f(),b(823,"hr",1),d(824,"small"),m(825,"AI generated content"),f()()(),d(826,"button",5),b(827,"img",6),f()(),d(828,"div",65),b(829,"hr",1),d(830,"h2",2),m(831,"Outlook\xAE VBA"),f(),d(832,"div",3)(833,"div",4),b(834,"hr",1),d(835,"p"),m(836,"Outlook VBA (Visual Basic for Applications) is a programming language that enables you to automate tasks and extend the functionality of Microsoft Outlook. With Outlook VBA, you can create custom scripts and macros to handle repetitive tasks, manage emails, appointments, contacts, and more. Outlook VBA can streamline your email and calendar workflows, saving you time and effort."),f(),b(837,"hr",1),d(838,"small"),m(839,"AI generated content"),f()()(),d(840,"button",5),b(841,"img",6),f()(),d(842,"div",66),b(843,"hr",1),d(844,"h2",2),m(845,"Outlook\xAE Form"),f(),d(846,"div",3)(847,"div",4),b(848,"hr",1),d(849,"p"),m(850,"Outlook form is a customizable interface within Microsoft Outlook that you can design to collect and manage information more efficiently. These forms can be used to create structured emails, manage tasks, collect data, or automate workflows. Think of Outlook forms as a way to enhance the functionality of your emails, tasks, and calendar items, tailored exactly to your requirements. They're like personalized templates that streamline how you gather and manage information."),f(),b(851,"hr",1),d(852,"small"),m(853,"AI generated content"),f()()(),d(854,"button",5),b(855,"img",6),f()(),d(856,"div",67),b(857,"hr",1),d(858,"h2",2),m(859,"Mainframe"),f(),d(860,"div",3)(861,"div",4),b(862,"hr",1),d(863,"p"),m(864,"A mainframe is a powerful, high-performance computer used primarily by large organizations for critical applications like bulk data processing, transaction processing, and enterprise resource planning. Mainframes are known for their reliability, security, and ability to handle vast amounts of data and transactions efficiently. Mainframes are often used by banks, airlines, retailers, and government agencies for their critical operations. Despite the rise of cloud computing, mainframes continue to play a vital role in IT infrastructure due to their unmatched processing power and reliability."),f(),b(865,"hr",1),d(866,"small"),m(867,"AI generated content"),f()()(),d(868,"button",5),b(869,"img",6),f()(),d(870,"div",68),b(871,"hr",1),d(872,"h2",2),m(873,".Net Framework"),f(),d(874,"div",3)(875,"div",4),b(876,"hr",1),d(877,"p"),m(878,"The .NET Framework is a software development framework developed by Microsoft. It provides a comprehensive and consistent programming model for building applications with visually stunning user experiences and seamless communication. The .NET Framework is widely used for developing desktop applications on Windows, and it supports multiple programming languages, including C#, F#, and Visual Basic. It's known for its robustness, extensive library support, and strong community backing."),f(),b(879,"hr",1),d(880,"small"),m(881,"AI generated content"),f()()(),d(882,"button",5),b(883,"img",6),f()(),d(884,"div",69),b(885,"hr",1),d(886,"h2",2),m(887,"Crystal Reports"),f(),d(888,"div",3)(889,"div",4),b(890,"hr",1),d(891,"p"),m(892,"Crystal Reports is a business intelligence application used to create detailed, complex reports from a wide variety of data sources. It's marketed by SAP and is particularly popular among small- and medium-sized businesses. Crystal Reports is a powerful tool for analyzing data and presenting it in a visually appealing and easy-to-understand format."),f(),b(893,"hr",1),d(894,"small"),m(895,"AI generated content"),f()()(),d(896,"button",5),b(897,"img",6),f()(),d(898,"div",70),b(899,"hr",1),d(900,"h2",2),m(901,"e-Banking"),f(),d(902,"div",3)(903,"div",4),b(904,"hr",1),d(905,"p"),m(906,"E-banking, or electronic banking, refers to the use of digital technology to conduct banking transactions and services online. This can include activities like checking account balances, transferring money, paying bills, and applying for loans, all from the comfort of your home or on the go. E-banking has revolutionized the way we manage our finances, making banking more accessible and efficient."),f(),b(907,"hr",1),d(908,"small"),m(909,"AI generated content"),f()()(),d(910,"button",5),b(911,"img",6),f()(),d(912,"div",71),b(913,"hr",1),d(914,"h2",2),m(915,"Barcode Reader"),f(),d(916,"div",3)(917,"div",4),b(918,"hr",1),d(919,"p"),m(920,"A barcode reader is a device that scans and decodes barcodes, converting the barcode data into digital information that can be processed by a computer. Barcode readers are widely used in retail, logistics, healthcare, and other industries to streamline data entry and inventory management."),f(),b(921,"hr",1),d(922,"small"),m(923,"AI generated content"),f()()(),d(924,"button",5),b(925,"img",6),f()(),d(926,"div",72),b(927,"hr",1),d(928,"h2",2),m(929,"VB.Net"),f(),d(930,"div",3)(931,"div",4),b(932,"hr",1),d(933,"p"),m(934,"VB.NET (Visual Basic .NET) is an object-oriented programming language developed by Microsoft. It's an evolution of the classic Visual Basic language, built on the .NET framework. VB.NET is designed for creating Windows-based applications and can be used to develop desktop applications, web applications, and web services. VB.NET is widely used in enterprise environments for building robust and scalable applications."),f(),b(935,"hr",1),d(936,"small"),m(937,"AI generated content"),f()()(),d(938,"button",5),b(939,"img",6),f()(),d(940,"div",73),b(941,"hr",1),d(942,"h2",2),m(943,"C#.Net"),f(),d(944,"div",3)(945,"div",4),b(946,"hr",1),d(947,"p"),m(948,"C#.NET, often just called C#, is a modern, object-oriented programming language developed by Microsoft. It runs on the .NET framework and is used to build a wide range of applications, from web and mobile apps to games and enterprise software. C# is known for its versatility, power, and ease of use, making it a popular choice for developers."),f(),b(949,"hr",1),d(950,"small"),m(951,"AI generated content"),f()()(),d(952,"button",5),b(953,"img",6),f()(),d(954,"div",74),b(955,"hr",1),d(956,"h2",2),m(957,"Autocad API"),f(),d(958,"div",3)(959,"div",4),b(960,"hr",1),d(961,"p"),m(962,"The AutoCAD API allows developers to create custom applications and automate tasks within AutoCAD. It enable developers to extend AutoCAD's functionality, automate repetitive tasks, and create specialized design and drafting applications"),f(),b(963,"hr",1),d(964,"small"),m(965,"AI generated content"),f()()(),d(966,"button",5),b(967,"img",6),f()(),d(968,"div",75),b(969,"hr",1),d(970,"h2",2),m(971,"Omnis Studio"),f(),d(972,"div",3)(973,"div",4),b(974,"hr",1),d(975,"p"),m(976,"Omnis programming refers to using Omnis Studio, a development environment for building cross-platform, multi-developer applications. Omnis Studio supports a variety of programming tasks, including web, mobile, and desktop application development. Omnis programming is ideal for developers looking to create robust, scalable applications with a rich set of tools and functionalities."),f(),b(977,"hr",1),d(978,"small"),m(979,"AI generated content"),f()()(),d(980,"button",5),b(981,"img",6),f()(),d(982,"div",76),b(983,"hr",1),d(984,"h2",2),m(985,"Microsoft Graph"),f(),d(986,"div",3)(987,"div",4),b(988,"hr",1),d(989,"p"),m(990,"Microsoft Graph is a unified API and a gateway to data and intelligence in Microsoft 365. It allows developers to access and interact with data across Microsoft 365, Windows, and Enterprise Mobility + Security platforms. With Microsoft Graph, you can build apps that leverage the vast amount of data available in these services, enabling you to create powerful, people-centric applications."),f(),b(991,"hr",1),d(992,"small"),m(993,"AI generated content"),f()()(),d(994,"button",5),b(995,"img",6),f()(),d(996,"div",77),b(997,"hr",1),d(998,"h2",2),m(999,"Azure Cognitive Services"),f(),d(1e3,"div",3)(1001,"div",4),b(1002,"hr",1),d(1003,"p"),m(1004,"Azure Cognitive Services is a suite of cloud-based APIs and services offered by Microsoft that enable developers to build intelligent and interactive applications. These services leverage advanced machine learning models and artificial intelligence to provide capabilities. Azure Cognitive Services allows developers to integrate these AI capabilities into their applications without needing deep expertise in machine learning or AI. It's designed to be accessible and easy to use, making it possible to quickly add intelligent features to applications."),f(),b(1005,"hr",1),d(1006,"small"),m(1007,"AI generated content"),f()()(),d(1008,"button",5),b(1009,"img",6),f()(),d(1010,"div",78),b(1011,"hr",1),d(1012,"h2",2),m(1013,"Microsoft Authenticator"),f(),d(1014,"div",3)(1015,"div",4),b(1016,"hr",1),d(1017,"p"),m(1018,"Microsoft Authenticator is a mobile app designed to help you securely sign in to your accounts without using a password. It supports multifactor authentication, including biometric verification (like fingerprint or facial recognition) and one-time passcodes. The app is available for both Android and iOS devices."),f(),b(1019,"hr",1),d(1020,"small"),m(1021,"AI generated content"),f()()(),d(1022,"button",5),b(1023,"img",6),f()(),d(1024,"div",79),b(1025,"hr",1),d(1026,"h2",2),m(1027,"Serverless"),f(),d(1028,"div",3)(1029,"div",4),b(1030,"hr",1),d(1031,"p"),m(1032,"Serverless computing is a cloud computing execution model where the cloud provider manages the infrastructure. Developers can build and run applications without worrying about server management, scaling, or capacity planning. The cloud provider handles these tasks, allowing developers to focus solely on writing code."),f(),b(1033,"hr",1),d(1034,"small"),m(1035,"AI generated content"),f()()(),d(1036,"button",5),b(1037,"img",6),f()(),d(1038,"div",80),b(1039,"hr",1),d(1040,"h2",2),m(1041,"Azure Functions"),f(),d(1042,"div",3)(1043,"div",4),b(1044,"hr",1),d(1045,"p"),m(1046,"Azure Functions is a serverless solution provided by Microsoft that allows developers to run event-driven code without having to manage the underlying infrastructure. You can write code that responds to various triggers, such as HTTP requests, timers, or messages from a queue, and Azure Functions will handle the rest."),f(),b(1047,"hr",1),d(1048,"small"),m(1049,"AI generated content"),f()()(),d(1050,"button",5),b(1051,"img",6),f()(),d(1052,"div",81),b(1053,"hr",1),d(1054,"h2",2),m(1055,"Azure Sql Database"),f(),d(1056,"div",3)(1057,"div",4),b(1058,"hr",1),d(1059,"p"),m(1060,"Azure SQL Database is a fully managed platform as a service (PaaS) database engine provided by Microsoft. It handles most of the database management functions such as upgrading, patching, backups, and monitoring without user involvement. This allows developers to focus on building and optimizing their applications."),f(),b(1061,"hr",1),d(1062,"small"),m(1063,"AI generated content"),f()()(),d(1064,"button",5),b(1065,"img",6),f()(),d(1066,"div",82),b(1067,"hr",1),d(1068,"h2",2),m(1069,"Component (Angular)"),f(),d(1070,"div",3)(1071,"div",4),b(1072,"hr",1),d(1073,"p"),m(1074,"An Angular component is a building block of an Angular application, comprising a class, template, and metadata. The class contains logic and data, the template defines the HTML view, and the metadata configures the component's settings, such as its selector and style files. Components help create modular, reusable, and maintainable code structures in Angular applications."),f(),b(1075,"hr",1),d(1076,"small"),m(1077,"AI generated content"),f()()(),d(1078,"button",5),b(1079,"img",6),f()(),d(1080,"div",83),b(1081,"hr",1),d(1082,"h2",2),m(1083,"Directive (Angular)"),f(),d(1084,"div",3)(1085,"div",4),b(1086,"hr",1),d(1087,"p"),m(1088,"In Angular, a directive is a class that allows you to extend or manipulate the behavior of elements in the DOM. By using directives, you can create custom behavior or styling, change the structure of the DOM, and enhance the functionality of your application."),f(),b(1089,"hr",1),d(1090,"small"),m(1091,"AI generated content"),f()()(),d(1092,"button",5),b(1093,"img",6),f()(),d(1094,"div",84),b(1095,"hr",1),d(1096,"h2",2),m(1097,"In Process"),f(),d(1098,"div",3)(1099,"div",4),b(1100,"hr",1),d(1101,"p"),m(1102,"In-process hosting in .NET refers to running an application within the same process as the web server, such as IIS (Internet Information Services). This model improves performance because requests are handled directly within the same process, avoiding the overhead of inter-process communication."),f(),b(1103,"hr",1),d(1104,"small"),m(1105,"AI generated content"),f()()(),d(1106,"button",5),b(1107,"img",6),f()(),d(1108,"div",85),b(1109,"hr",1),d(1110,"h2",2),m(1111,"Out Of Process"),f(),d(1112,"div",3)(1113,"div",4),b(1114,"hr",1),d(1115,"p"),m(1116,"Out-of-process hosting in .NET refers to running an application in a separate process from the web server, such as IIS. This model involves communication between the web server and the application through inter-process communication (IPC), typically using HTTP or TCP. It provides greater isolation and stability, as issues in the application process do not directly impact the web server process."),f(),b(1117,"hr",1),d(1118,"small"),m(1119,"AI generated content"),f()()(),d(1120,"button",5),b(1121,"img",6),f()(),d(1122,"div",86),b(1123,"hr",1),d(1124,"h2",2),m(1125,"Isolated"),f(),d(1126,"div",3)(1127,"div",4),b(1128,"hr",1),d(1129,"p"),m(1130,"In .NET isolated hosting refers to running an application in a separate, sandboxed environment to ensure greater security and stability. This approach limits the application's access to system resources, minimizing the risk of interference or malicious activity. It is particularly useful in multi-tenant environments where applications must be securely separated from each other."),f(),b(1131,"hr",1),d(1132,"small"),m(1133,"AI generated content"),f()()(),d(1134,"button",5),b(1135,"img",6),f()(),d(1136,"div",87),b(1137,"hr",1),d(1138,"h2",2),m(1139,"Module (Angular)"),f(),d(1140,"div",3)(1141,"div",4),b(1142,"hr",1),d(1143,"p"),m(1144,"An Angular module is a way to group related parts of an application, like components, directives, pipes, and services, into a cohesive unit. It's defined using the @NgModule decorator and helps manage dependencies, organize code, and make the application more maintainable and scalable. It allows for features like lazy loading, which improves performance by loading parts of the app only when needed. Modules also facilitate the use of Angular's dependency injection system to manage service instances across the app."),f(),b(1145,"hr",1),d(1146,"small"),m(1147,"AI generated content"),f()()(),d(1148,"button",5),b(1149,"img",6),f()())},dependencies:[Ht,aA,yn,hE],styles:[".menu-button-container[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.menu-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff}.menu[_ngcontent-%COMP%]{position:absolute;width:max-content;top:40px;right:10px;background:#fff;border:1px solid #ccc;box-shadow:0 2px 10px #0000001a;z-index:1000}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]})};FL(fE,c$).catch(n=>console.error(n));
