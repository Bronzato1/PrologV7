import{a as v,b as I,c as Bt,d as Bm,e as wo,f as C1,g as zm,h as E,i as it}from"./chunk-JUI6DGJ4.js";var lL=Bm((Exe,Ex)=>{"use strict";var Me=String,aL=function(){return{isColorSupported:!1,reset:Me,bold:Me,dim:Me,italic:Me,underline:Me,inverse:Me,hidden:Me,strikethrough:Me,black:Me,red:Me,green:Me,yellow:Me,blue:Me,magenta:Me,cyan:Me,white:Me,gray:Me,bgBlack:Me,bgRed:Me,bgGreen:Me,bgYellow:Me,bgBlue:Me,bgMagenta:Me,bgCyan:Me,bgWhite:Me,blackBright:Me,redBright:Me,greenBright:Me,yellowBright:Me,blueBright:Me,magentaBright:Me,cyanBright:Me,whiteBright:Me,bgBlackBright:Me,bgRedBright:Me,bgGreenBright:Me,bgYellowBright:Me,bgBlueBright:Me,bgMagentaBright:Me,bgCyanBright:Me,bgWhiteBright:Me}};Ex.exports=aL();Ex.exports.createColors=aL});var Z2=Bm((tGe,hz)=>{"use strict";hz.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var J2=Bm((iGe,fz)=>{"use strict";var Kg=Z2(),mz={};for(let n of Object.keys(Kg))mz[Kg[n]]=n;var X={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};fz.exports=X;for(let n of Object.keys(X)){if(!("channels"in X[n]))throw new Error("missing channels property: "+n);if(!("labels"in X[n]))throw new Error("missing channel labels property: "+n);if(X[n].labels.length!==X[n].channels)throw new Error("channel and label counts mismatch: "+n);let{channels:e,labels:t}=X[n];delete X[n].channels,delete X[n].labels,Object.defineProperty(X[n],"channels",{value:e}),Object.defineProperty(X[n],"labels",{value:t})}X.rgb.hsl=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,o=Math.min(e,t,i),r=Math.max(e,t,i),s=r-o,a,l;r===o?a=0:e===r?a=(t-i)/s:t===r?a=2+(i-e)/s:i===r&&(a=4+(e-t)/s),a=Math.min(a*60,360),a<0&&(a+=360);let c=(o+r)/2;return r===o?l=0:c<=.5?l=s/(r+o):l=s/(2-r-o),[a,l*100,c*100]};X.rgb.hsv=function(n){let e,t,i,o,r,s=n[0]/255,a=n[1]/255,l=n[2]/255,c=Math.max(s,a,l),d=c-Math.min(s,a,l),f=function(p){return(c-p)/6/d+1/2};return d===0?(o=0,r=0):(r=d/c,e=f(s),t=f(a),i=f(l),s===c?o=i-t:a===c?o=1/3+e-i:l===c&&(o=2/3+t-e),o<0?o+=1:o>1&&(o-=1)),[o*360,r*100,c*100]};X.rgb.hwb=function(n){let e=n[0],t=n[1],i=n[2],o=X.rgb.hsl(n)[0],r=1/255*Math.min(e,Math.min(t,i));return i=1-1/255*Math.max(e,Math.max(t,i)),[o,r*100,i*100]};X.rgb.cmyk=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,o=Math.min(1-e,1-t,1-i),r=(1-e-o)/(1-o)||0,s=(1-t-o)/(1-o)||0,a=(1-i-o)/(1-o)||0;return[r*100,s*100,a*100,o*100]};function Sme(n,e){return(n[0]-e[0])**2+(n[1]-e[1])**2+(n[2]-e[2])**2}X.rgb.keyword=function(n){let e=mz[n];if(e)return e;let t=1/0,i;for(let o of Object.keys(Kg)){let r=Kg[o],s=Sme(n,r);s<t&&(t=s,i=o)}return i};X.keyword.rgb=function(n){return Kg[n]};X.rgb.xyz=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let o=e*.4124+t*.3576+i*.1805,r=e*.2126+t*.7152+i*.0722,s=e*.0193+t*.1192+i*.9505;return[o*100,r*100,s*100]};X.rgb.lab=function(n){let e=X.rgb.xyz(n),t=e[0],i=e[1],o=e[2];t/=95.047,i/=100,o/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,o=o>.008856?o**(1/3):7.787*o+16/116;let r=116*i-16,s=500*(t-i),a=200*(i-o);return[r,s,a]};X.hsl.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100,o,r,s;if(t===0)return s=i*255,[s,s,s];i<.5?o=i*(1+t):o=i+t-i*t;let a=2*i-o,l=[0,0,0];for(let c=0;c<3;c++)r=e+1/3*-(c-1),r<0&&r++,r>1&&r--,6*r<1?s=a+(o-a)*6*r:2*r<1?s=o:3*r<2?s=a+(o-a)*(2/3-r)*6:s=a,l[c]=s*255;return l};X.hsl.hsv=function(n){let e=n[0],t=n[1]/100,i=n[2]/100,o=t,r=Math.max(i,.01);i*=2,t*=i<=1?i:2-i,o*=r<=1?r:2-r;let s=(i+t)/2,a=i===0?2*o/(r+o):2*t/(i+t);return[e,a*100,s*100]};X.hsv.rgb=function(n){let e=n[0]/60,t=n[1]/100,i=n[2]/100,o=Math.floor(e)%6,r=e-Math.floor(e),s=255*i*(1-t),a=255*i*(1-t*r),l=255*i*(1-t*(1-r));switch(i*=255,o){case 0:return[i,l,s];case 1:return[a,i,s];case 2:return[s,i,l];case 3:return[s,a,i];case 4:return[l,s,i];case 5:return[i,s,a]}};X.hsv.hsl=function(n){let e=n[0],t=n[1]/100,i=n[2]/100,o=Math.max(i,.01),r,s;s=(2-t)*i;let a=(2-t)*o;return r=t*o,r/=a<=1?a:2-a,r=r||0,s/=2,[e,r*100,s*100]};X.hwb.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100,o=t+i,r;o>1&&(t/=o,i/=o);let s=Math.floor(6*e),a=1-i;r=6*e-s,s&1&&(r=1-r);let l=t+r*(a-t),c,d,f;switch(s){default:case 6:case 0:c=a,d=l,f=t;break;case 1:c=l,d=a,f=t;break;case 2:c=t,d=a,f=l;break;case 3:c=t,d=l,f=a;break;case 4:c=l,d=t,f=a;break;case 5:c=a,d=t,f=l;break}return[c*255,d*255,f*255]};X.cmyk.rgb=function(n){let e=n[0]/100,t=n[1]/100,i=n[2]/100,o=n[3]/100,r=1-Math.min(1,e*(1-o)+o),s=1-Math.min(1,t*(1-o)+o),a=1-Math.min(1,i*(1-o)+o);return[r*255,s*255,a*255]};X.xyz.rgb=function(n){let e=n[0]/100,t=n[1]/100,i=n[2]/100,o,r,s;return o=e*3.2406+t*-1.5372+i*-.4986,r=e*-.9689+t*1.8758+i*.0415,s=e*.0557+t*-.204+i*1.057,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,r=r>.0031308?1.055*r**(1/2.4)-.055:r*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,o=Math.min(Math.max(0,o),1),r=Math.min(Math.max(0,r),1),s=Math.min(Math.max(0,s),1),[o*255,r*255,s*255]};X.xyz.lab=function(n){let e=n[0],t=n[1],i=n[2];e/=95.047,t/=100,i/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let o=116*t-16,r=500*(e-t),s=200*(t-i);return[o,r,s]};X.lab.xyz=function(n){let e=n[0],t=n[1],i=n[2],o,r,s;r=(e+16)/116,o=t/500+r,s=r-i/200;let a=r**3,l=o**3,c=s**3;return r=a>.008856?a:(r-16/116)/7.787,o=l>.008856?l:(o-16/116)/7.787,s=c>.008856?c:(s-16/116)/7.787,o*=95.047,r*=100,s*=108.883,[o,r,s]};X.lab.lch=function(n){let e=n[0],t=n[1],i=n[2],o;o=Math.atan2(i,t)*360/2/Math.PI,o<0&&(o+=360);let s=Math.sqrt(t*t+i*i);return[e,s,o]};X.lch.lab=function(n){let e=n[0],t=n[1],o=n[2]/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o);return[e,r,s]};X.rgb.ansi16=function(n,e=null){let[t,i,o]=n,r=e===null?X.rgb.hsv(n)[2]:e;if(r=Math.round(r/50),r===0)return 30;let s=30+(Math.round(o/255)<<2|Math.round(i/255)<<1|Math.round(t/255));return r===2&&(s+=60),s};X.hsv.ansi16=function(n){return X.rgb.ansi16(X.hsv.rgb(n),n[2])};X.rgb.ansi256=function(n){let e=n[0],t=n[1],i=n[2];return e===t&&t===i?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(i/255*5)};X.ansi16.rgb=function(n){let e=n%10;if(e===0||e===7)return n>50&&(e+=3.5),e=e/10.5*255,[e,e,e];let t=(~~(n>50)+1)*.5,i=(e&1)*t*255,o=(e>>1&1)*t*255,r=(e>>2&1)*t*255;return[i,o,r]};X.ansi256.rgb=function(n){if(n>=232){let r=(n-232)*10+8;return[r,r,r]}n-=16;let e,t=Math.floor(n/36)/5*255,i=Math.floor((e=n%36)/6)/5*255,o=e%6/5*255;return[t,i,o]};X.rgb.hex=function(n){let t=(((Math.round(n[0])&255)<<16)+((Math.round(n[1])&255)<<8)+(Math.round(n[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};X.hex.rgb=function(n){let e=n.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(a=>a+a).join(""));let i=parseInt(t,16),o=i>>16&255,r=i>>8&255,s=i&255;return[o,r,s]};X.rgb.hcg=function(n){let e=n[0]/255,t=n[1]/255,i=n[2]/255,o=Math.max(Math.max(e,t),i),r=Math.min(Math.min(e,t),i),s=o-r,a,l;return s<1?a=r/(1-s):a=0,s<=0?l=0:o===e?l=(t-i)/s%6:o===t?l=2+(i-e)/s:l=4+(e-t)/s,l/=6,l%=1,[l*360,s*100,a*100]};X.hsl.hcg=function(n){let e=n[1]/100,t=n[2]/100,i=t<.5?2*e*t:2*e*(1-t),o=0;return i<1&&(o=(t-.5*i)/(1-i)),[n[0],i*100,o*100]};X.hsv.hcg=function(n){let e=n[1]/100,t=n[2]/100,i=e*t,o=0;return i<1&&(o=(t-i)/(1-i)),[n[0],i*100,o*100]};X.hcg.rgb=function(n){let e=n[0]/360,t=n[1]/100,i=n[2]/100;if(t===0)return[i*255,i*255,i*255];let o=[0,0,0],r=e%1*6,s=r%1,a=1-s,l=0;switch(Math.floor(r)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=a,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=a,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=a}return l=(1-t)*i,[(t*o[0]+l)*255,(t*o[1]+l)*255,(t*o[2]+l)*255]};X.hcg.hsv=function(n){let e=n[1]/100,t=n[2]/100,i=e+t*(1-e),o=0;return i>0&&(o=e/i),[n[0],o*100,i*100]};X.hcg.hsl=function(n){let e=n[1]/100,i=n[2]/100*(1-e)+.5*e,o=0;return i>0&&i<.5?o=e/(2*i):i>=.5&&i<1&&(o=e/(2*(1-i))),[n[0],o*100,i*100]};X.hcg.hwb=function(n){let e=n[1]/100,t=n[2]/100,i=e+t*(1-e);return[n[0],(i-e)*100,(1-i)*100]};X.hwb.hcg=function(n){let e=n[1]/100,i=1-n[2]/100,o=i-e,r=0;return o<1&&(r=(i-o)/(1-o)),[n[0],o*100,r*100]};X.apple.rgb=function(n){return[n[0]/65535*255,n[1]/65535*255,n[2]/65535*255]};X.rgb.apple=function(n){return[n[0]/255*65535,n[1]/255*65535,n[2]/255*65535]};X.gray.rgb=function(n){return[n[0]/100*255,n[0]/100*255,n[0]/100*255]};X.gray.hsl=function(n){return[0,0,n[0]]};X.gray.hsv=X.gray.hsl;X.gray.hwb=function(n){return[0,100,n[0]]};X.gray.cmyk=function(n){return[0,0,0,n[0]]};X.gray.lab=function(n){return[n[0],0,0]};X.gray.hex=function(n){let e=Math.round(n[0]/100*255)&255,i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i};X.rgb.gray=function(n){return[(n[0]+n[1]+n[2])/3/255*100]}});var gz=Bm((oGe,pz)=>{"use strict";var zy=J2();function xme(){let n={},e=Object.keys(zy);for(let t=e.length,i=0;i<t;i++)n[e[i]]={distance:-1,parent:null};return n}function Ame(n){let e=xme(),t=[n];for(e[n].distance=0;t.length;){let i=t.pop(),o=Object.keys(zy[i]);for(let r=o.length,s=0;s<r;s++){let a=o[s],l=e[a];l.distance===-1&&(l.distance=e[i].distance+1,l.parent=i,t.unshift(a))}}return e}function Tme(n,e){return function(t){return e(n(t))}}function Ime(n,e){let t=[e[n].parent,n],i=zy[e[n].parent][n],o=e[n].parent;for(;e[o].parent;)t.unshift(e[o].parent),i=Tme(zy[e[o].parent][o],i),o=e[o].parent;return i.conversion=t,i}pz.exports=function(n){let e=Ame(n),t={},i=Object.keys(e);for(let o=i.length,r=0;r<o;r++){let s=i[r];e[s].parent!==null&&(t[s]=Ime(s,e))}return t}});var wz=Bm((rGe,bz)=>{"use strict";var X2=J2(),Mme=gz(),dm={},Dme=Object.keys(X2);function Pme(n){let e=function(...t){let i=t[0];return i==null?i:(i.length>1&&(t=i),n(t))};return"conversion"in n&&(e.conversion=n.conversion),e}function Rme(n){let e=function(...t){let i=t[0];if(i==null)return i;i.length>1&&(t=i);let o=n(t);if(typeof o=="object")for(let r=o.length,s=0;s<r;s++)o[s]=Math.round(o[s]);return o};return"conversion"in n&&(e.conversion=n.conversion),e}Dme.forEach(n=>{dm[n]={},Object.defineProperty(dm[n],"channels",{value:X2[n].channels}),Object.defineProperty(dm[n],"labels",{value:X2[n].labels});let e=Mme(n);Object.keys(e).forEach(i=>{let o=e[i];dm[n][i]=Rme(o),dm[n][i].raw=Pme(o)})});bz.exports=dm});function pP(n,e){return Object.is(n,e)}var Xt=null,_b=!1,Cb=1,Or=Symbol("SIGNAL");function je(n){let e=Xt;return Xt=n,e}function gP(){return Xt}var Um={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function x1(n){if(_b)throw new Error("");if(Xt===null)return;Xt.consumerOnSignalRead(n);let e=Xt.nextProducerIndex++;if(Ab(Xt),e<Xt.producerNode.length&&Xt.producerNode[e]!==n&&Hm(Xt)){let t=Xt.producerNode[e];xb(t,Xt.producerIndexOfThis[e])}Xt.producerNode[e]!==n&&(Xt.producerNode[e]=n,Xt.producerIndexOfThis[e]=Hm(Xt)?vP(n,Xt,e):0),Xt.producerLastReadVersion[e]=n.version}function dU(){Cb++}function bP(n){if(!(Hm(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Cb)){if(!n.producerMustRecompute(n)&&!T1(n)){n.dirty=!1,n.lastCleanEpoch=Cb;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Cb}}function wP(n){if(n.liveConsumerNode===void 0)return;let e=_b;_b=!0;try{for(let t of n.liveConsumerNode)t.dirty||uU(t)}finally{_b=e}}function kP(){return Xt?.consumerAllowSignalWrites!==!1}function uU(n){n.dirty=!0,wP(n),n.consumerMarkedDirty?.(n)}function Sb(n){return n&&(n.nextProducerIndex=0),je(n)}function A1(n,e){if(je(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Hm(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)xb(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function T1(n){Ab(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],i=n.producerLastReadVersion[e];if(i!==t.version||(bP(t),i!==t.version))return!0}return!1}function I1(n){if(Ab(n),Hm(n))for(let e=0;e<n.producerNode.length;e++)xb(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function vP(n,e,t){if(yP(n),n.liveConsumerNode.length===0&&_P(n))for(let i=0;i<n.producerNode.length;i++)n.producerIndexOfThis[i]=vP(n.producerNode[i],n,i);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function xb(n,e){if(yP(n),n.liveConsumerNode.length===1&&_P(n))for(let i=0;i<n.producerNode.length;i++)xb(n.producerNode[i],n.producerIndexOfThis[i]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let i=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];Ab(o),o.producerIndexOfThis[i]=e}}function Hm(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ab(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function yP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function _P(n){return n.producerNode!==void 0}function CP(n){let e=Object.create(hU);e.computation=n;let t=()=>{if(bP(e),x1(e),e.value===Eb)throw e.error;return e.value};return t[Or]=e,t}var E1=Symbol("UNSET"),S1=Symbol("COMPUTING"),Eb=Symbol("ERRORED"),hU=I(v({},Um),{value:E1,dirty:!0,error:null,equal:pP,producerMustRecompute(n){return n.value===E1||n.value===S1},producerRecomputeValue(n){if(n.value===S1)throw new Error("Detected cycle in computations.");let e=n.value;n.value=S1;let t=Sb(n),i;try{i=n.computation()}catch(o){i=Eb,n.error=o}finally{A1(n,t)}if(e!==E1&&e!==Eb&&i!==Eb&&n.equal(e,i)){n.value=e;return}n.value=i,n.version++}});function mU(){throw new Error}var EP=mU;function SP(){EP()}function xP(n){EP=n}var fU=null;function AP(n){let e=Object.create(IP);e.value=n;let t=()=>(x1(e),e.value);return t[Or]=e,t}function M1(n,e){kP()||SP(),n.equal(n.value,e)||(n.value=e,pU(n))}function TP(n,e){kP()||SP(),M1(n,e(n.value))}var IP=I(v({},Um),{equal:pP,value:void 0});function pU(n){n.version++,dU(),wP(n),fU?.()}function Ee(n){return typeof n=="function"}function Sd(n){let t=n(i=>{Error.call(i),i.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Tb=Sd(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((i,o)=>`${o+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function _l(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var zt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let r of t)r.remove(this);else t.remove(this);let{initialTeardown:i}=this;if(Ee(i))try{i()}catch(r){e=r instanceof Tb?r.errors:[r]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let r of o)try{MP(r)}catch(s){e=e??[],s instanceof Tb?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Tb(e)}}add(e){var t;if(e&&e!==this)if(this.closed)MP(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&_l(t,e)}remove(e){let{_finalizers:t}=this;t&&_l(t,e),e instanceof n&&e._removeParent(this)}};zt.EMPTY=(()=>{let n=new zt;return n.closed=!0,n})();var D1=zt.EMPTY;function Ib(n){return n instanceof zt||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function MP(n){Ee(n)?n():n.unsubscribe()}var ko={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var xd={setTimeout(n,e,...t){let{delegate:i}=xd;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=xd;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Mb(n){xd.setTimeout(()=>{let{onUnhandledError:e}=ko;if(e)e(n);else throw n})}function jm(){}var DP=P1("C",void 0,void 0);function PP(n){return P1("E",void 0,n)}function RP(n){return P1("N",n,void 0)}function P1(n,e,t){return{kind:n,value:e,error:t}}var Cl=null;function Ad(n){if(ko.useDeprecatedSynchronousErrorHandling){let e=!Cl;if(e&&(Cl={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:i}=Cl;if(Cl=null,t)throw i}}else n()}function NP(n){ko.useDeprecatedSynchronousErrorHandling&&Cl&&(Cl.errorThrown=!0,Cl.error=n)}var El=class extends zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ib(e)&&e.add(this)):this.destination=wU}static create(e,t,i){return new Td(e,t,i)}next(e){this.isStopped?N1(RP(e),this):this._next(e)}error(e){this.isStopped?N1(PP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?N1(DP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gU=Function.prototype.bind;function R1(n,e){return gU.call(n,e)}var O1=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Db(i)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Db(i)}else Db(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Db(t)}}},Td=class extends El{constructor(e,t,i){super();let o;if(Ee(e)||!e)o={next:e??void 0,error:t??void 0,complete:i??void 0};else{let r;this&&ko.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&R1(e.next,r),error:e.error&&R1(e.error,r),complete:e.complete&&R1(e.complete,r)}):o=e}this.destination=new O1(o)}};function Db(n){ko.useDeprecatedSynchronousErrorHandling?NP(n):Mb(n)}function bU(n){throw n}function N1(n,e){let{onStoppedNotification:t}=ko;t&&xd.setTimeout(()=>t(n,e))}var wU={closed:!0,next:jm,error:bU,complete:jm};var Id=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Ai(n){return n}function L1(...n){return F1(n)}function F1(n){return n.length===0?Ai:n.length===1?n[0]:function(t){return n.reduce((i,o)=>o(i),t)}}var Qe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,o){let r=vU(t)?t:new Td(t,i,o);return Ad(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return i=OP(i),new i((o,r)=>{let s=new Td({next:a=>{try{t(a)}catch(l){r(l),s.unsubscribe()}},error:r,complete:o});this.subscribe(s)})}_subscribe(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)}[Id](){return this}pipe(...t){return F1(t)(this)}toPromise(t){return t=OP(t),new t((i,o)=>{let r;this.subscribe(s=>r=s,s=>o(s),()=>i(r))})}}return n.create=e=>new n(e),n})();function OP(n){var e;return(e=n??ko.Promise)!==null&&e!==void 0?e:Promise}function kU(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function vU(n){return n&&n instanceof El||kU(n)&&Ib(n)}function V1(n){return Ee(n?.lift)}function We(n){return e=>{if(V1(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Be(n,e,t,i,o){return new B1(n,e,t,i,o)}var B1=class extends El{constructor(e,t,i,o,r,s){super(e),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Md(){return We((n,e)=>{let t=null;n._refCount++;let i=Be(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,r=t;t=null,o&&(!r||o===r)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}var Dd=class extends Qe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,V1(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new zt;let t=this.getSubject();e.add(this.source.subscribe(Be(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=zt.EMPTY)}return e}refCount(){return Md()(this)}};var LP=Sd(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var At=(()=>{class n extends Qe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let i=new Pb(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new LP}next(t){Ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(t)}})}error(t){Ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){Ad(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:i,isStopped:o,observers:r}=this;return i||o?D1:(this.currentObservers=null,r.push(t),new zt(()=>{this.currentObservers=null,_l(r,t)}))}_checkFinalizedStatuses(t){let{hasError:i,thrownError:o,isStopped:r}=this;i?t.error(o):r&&t.complete()}asObservable(){let t=new Qe;return t.source=this,t}}return n.create=(e,t)=>new Pb(e,t),n})(),Pb=class extends At{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.next)===null||i===void 0||i.call(t,e)}error(e){var t,i;(i=(t=this.destination)===null||t===void 0?void 0:t.error)===null||i===void 0||i.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,i;return(i=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&i!==void 0?i:D1}};var en=class extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var $m={now(){return($m.delegate||Date).now()},delegate:void 0};var Sl=class extends At{constructor(e=1/0,t=1/0,i=$m){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:s}=this;t||(i.push(e),!o&&i.push(r.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:o}=this,r=o.slice();for(let s=0;s<r.length&&!e.closed;s+=i?1:2)e.next(r[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:o}=this,r=(o?1:2)*e;if(e<1/0&&r<i.length&&i.splice(0,i.length-r),!o){let s=t.now(),a=0;for(let l=1;l<i.length&&i[l]<=s;l+=2)a=l;a&&i.splice(0,a+1)}}};var Rb=class extends zt{constructor(e,t){super()}schedule(e,t=0){return this}};var Wm={setInterval(n,e,...t){let{delegate:i}=Wm;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Wm;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Nb=class extends Rb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;let o=this.id,r=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(r,o,t)),this.pending=!0,this.delay=t,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,i=0){return Wm.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return t;t!=null&&Wm.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,t);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i=!1,o;try{this.work(e)}catch(r){i=!0,o=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,_l(i,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Pd=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}};Pd.now=$m.now;var Ob=class extends Pd{constructor(e,t=Pd.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}};var FP=new Ob(Nb);var si=new Qe(n=>n.complete());function VP(n){return n&&Ee(n.schedule)}function BP(n){return n[n.length-1]}function Lb(n){return Ee(BP(n))?n.pop():void 0}function zs(n){return VP(BP(n))?n.pop():void 0}function HP(n,e,t,i){function o(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(d){try{c(i.next(d))}catch(f){s(f)}}function l(d){try{c(i.throw(d))}catch(f){s(f)}}function c(d){d.done?r(d.value):o(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}function zP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xl(n){return this instanceof xl?(this.v=n,this):new xl(n)}function UP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),o,r=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(w){return Promise.resolve(w).then(g,f)}}function a(g,w){i[g]&&(o[g]=function(k){return new Promise(function(C,S){r.push([g,k,C,S])>1||l(g,k)})},w&&(o[g]=w(o[g])))}function l(g,w){try{c(i[g](w))}catch(k){p(r[0][3],k)}}function c(g){g.value instanceof xl?Promise.resolve(g.value.v).then(d,f):p(r[0][2],g)}function d(g){l("next",g)}function f(g){l("throw",g)}function p(g,w){g(w),r.shift(),r.length&&l(r[0][0],r[0][1])}}function jP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof zP=="function"?zP(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(s){return new Promise(function(a,l){s=n[r](s),o(a,l,s.done,s.value)})}}function o(r,s,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},s)}}var Fb=n=>n&&typeof n.length=="number"&&typeof n!="function";function Vb(n){return Ee(n?.then)}function Bb(n){return Ee(n[Id])}function zb(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function Hb(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ub=yU();function jb(n){return Ee(n?.[Ub])}function $b(n){return UP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:i,done:o}=yield xl(t.read());if(o)return yield xl(void 0);yield yield xl(i)}}finally{t.releaseLock()}})}function Wb(n){return Ee(n?.getReader)}function Qt(n){if(n instanceof Qe)return n;if(n!=null){if(Bb(n))return _U(n);if(Fb(n))return CU(n);if(Vb(n))return EU(n);if(zb(n))return $P(n);if(jb(n))return SU(n);if(Wb(n))return xU(n)}throw Hb(n)}function _U(n){return new Qe(e=>{let t=n[Id]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function CU(n){return new Qe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function EU(n){return new Qe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Mb)})}function SU(n){return new Qe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function $P(n){return new Qe(e=>{AU(n,e).catch(t=>e.error(t))})}function xU(n){return $P($b(n))}function AU(n,e){var t,i,o,r;return HP(this,void 0,void 0,function*(){try{for(t=jP(n);i=yield t.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=t.return)&&(yield r.call(t))}finally{if(o)throw o.error}}e.complete()})}function ai(n,e,t,i=0,o=!1){let r=e.schedule(function(){t(),o?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(r),!o)return r}function qb(n,e=0){return We((t,i)=>{t.subscribe(Be(i,o=>ai(i,n,()=>i.next(o),e),()=>ai(i,n,()=>i.complete(),e),o=>ai(i,n,()=>i.error(o),e)))})}function Gb(n,e=0){return We((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function WP(n,e){return Qt(n).pipe(Gb(e),qb(e))}function qP(n,e){return Qt(n).pipe(Gb(e),qb(e))}function GP(n,e){return new Qe(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}function KP(n,e){return new Qe(t=>{let i;return ai(t,e,()=>{i=n[Ub](),ai(t,e,()=>{let o,r;try{({value:o,done:r}=i.next())}catch(s){t.error(s);return}r?t.complete():t.next(o)},0,!0)}),()=>Ee(i?.return)&&i.return()})}function Kb(n,e){if(!n)throw new Error("Iterable cannot be null");return new Qe(t=>{ai(t,e,()=>{let i=n[Symbol.asyncIterator]();ai(t,e,()=>{i.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function QP(n,e){return Kb($b(n),e)}function YP(n,e){if(n!=null){if(Bb(n))return WP(n,e);if(Fb(n))return GP(n,e);if(Vb(n))return qP(n,e);if(zb(n))return Kb(n,e);if(jb(n))return KP(n,e);if(Wb(n))return QP(n,e)}throw Hb(n)}function Ke(n,e){return e?YP(n,e):Qt(n)}function re(...n){let e=zs(n);return Ke(n,e)}function Lr(n,e){let t=Ee(n)?n:()=>n,i=o=>o.error(t());return new Qe(e?o=>e.schedule(i,0,o):i)}function z1(n){return!!n&&(n instanceof Qe||Ee(n.lift)&&Ee(n.subscribe))}var Fr=Sd(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function he(n,e){return We((t,i)=>{let o=0;t.subscribe(Be(i,r=>{i.next(n.call(e,r,o++))}))})}var{isArray:TU}=Array;function IU(n,e){return TU(e)?n(...e):n(e)}function Qb(n){return he(e=>IU(n,e))}var{isArray:MU}=Array,{getPrototypeOf:DU,prototype:PU,keys:RU}=Object;function Yb(n){if(n.length===1){let e=n[0];if(MU(e))return{args:e,keys:null};if(NU(e)){let t=RU(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}function NU(n){return n&&typeof n=="object"&&DU(n)===PU}function Zb(n,e){return n.reduce((t,i,o)=>(t[i]=e[o],t),{})}function Jb(...n){let e=zs(n),t=Lb(n),{args:i,keys:o}=Yb(n);if(i.length===0)return Ke([],e);let r=new Qe(OU(i,e,o?s=>Zb(o,s):Ai));return t?r.pipe(Qb(t)):r}function OU(n,e,t=Ai){return i=>{ZP(e,()=>{let{length:o}=n,r=new Array(o),s=o,a=o;for(let l=0;l<o;l++)ZP(e,()=>{let c=Ke(n[l],e),d=!1;c.subscribe(Be(i,f=>{r[l]=f,d||(d=!0,a--),a||i.next(t(r.slice()))},()=>{--s||i.complete()}))},i)},i)}}function ZP(n,e,t){n?ai(t,n,e):e()}function JP(n,e,t,i,o,r,s,a){let l=[],c=0,d=0,f=!1,p=()=>{f&&!l.length&&!c&&e.complete()},g=k=>c<i?w(k):l.push(k),w=k=>{r&&e.next(k),c++;let C=!1;Qt(t(k,d++)).subscribe(Be(e,S=>{o?.(S),r?g(S):e.next(S)},()=>{C=!0},void 0,()=>{if(C)try{for(c--;l.length&&c<i;){let S=l.shift();s?ai(e,s,()=>w(S)):w(S)}p()}catch(S){e.error(S)}}))};return n.subscribe(Be(e,g,()=>{f=!0,p()})),()=>{a?.()}}function tn(n,e,t=1/0){return Ee(e)?tn((i,o)=>he((r,s)=>e(i,r,o,s))(Qt(n(i,o))),t):(typeof e=="number"&&(t=e),We((i,o)=>JP(i,o,n,t)))}function H1(n=1/0){return tn(Ai,n)}function XP(){return H1(1)}function Rd(...n){return XP()(Ke(n,zs(n)))}function Xb(n){return new Qe(e=>{Qt(n()).subscribe(e)})}function U1(...n){let e=Lb(n),{args:t,keys:i}=Yb(n),o=new Qe(r=>{let{length:s}=t;if(!s){r.complete();return}let a=new Array(s),l=s,c=s;for(let d=0;d<s;d++){let f=!1;Qt(t[d]).subscribe(Be(r,p=>{f||(f=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||r.next(i?Zb(i,a):a),r.complete())}))}});return e?o.pipe(Qb(e)):o}function un(n,e){return We((t,i)=>{let o=0;t.subscribe(Be(i,r=>n.call(e,r,o++)&&i.next(r)))})}function bn(n){return We((e,t)=>{let i=null,o=!1,r;i=e.subscribe(Be(t,void 0,void 0,s=>{r=Qt(n(s,bn(n)(e))),i?(i.unsubscribe(),i=null,r.subscribe(t)):o=!0})),o&&(i.unsubscribe(),i=null,r.subscribe(t))})}function eR(n,e,t,i,o){return(r,s)=>{let a=t,l=e,c=0;r.subscribe(Be(s,d=>{let f=c++;l=a?n(l,d,f):(a=!0,d),i&&s.next(l)},o&&(()=>{a&&s.next(l),s.complete()})))}}function vo(n,e){return Ee(e)?tn(n,e,1):tn(n,1)}function j1(n,e=FP){return We((t,i)=>{let o=null,r=null,s=null,a=()=>{if(o){o.unsubscribe(),o=null;let c=r;r=null,i.next(c)}};function l(){let c=s+n,d=e.now();if(d<c){o=this.schedule(void 0,c-d),i.add(o);return}a()}t.subscribe(Be(i,c=>{r=c,s=e.now(),o||(o=e.schedule(l,n),i.add(o))},()=>{a(),i.complete()},void 0,()=>{r=o=null}))})}function Hs(n){return We((e,t)=>{let i=!1;e.subscribe(Be(t,o=>{i=!0,t.next(o)},()=>{i||t.next(n),t.complete()}))})}function Qo(n){return n<=0?()=>si:We((e,t)=>{let i=0;e.subscribe(Be(t,o=>{++i<=n&&(t.next(o),n<=i&&t.complete())}))})}function $1(n){return he(()=>n)}function ew(n=LU){return We((e,t)=>{let i=!1;e.subscribe(Be(t,o=>{i=!0,t.next(o)},()=>i?t.complete():t.error(n())))})}function LU(){return new Fr}function Us(n){return We((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Gi(n,e){let t=arguments.length>=2;return i=>i.pipe(n?un((o,r)=>n(o,r,i)):Ai,Qo(1),t?Hs(e):ew(()=>new Fr))}function Nd(n){return n<=0?()=>si:We((e,t)=>{let i=[];e.subscribe(Be(t,o=>{i.push(o),n<i.length&&i.shift()},()=>{for(let o of i)t.next(o);t.complete()},void 0,()=>{i=null}))})}function W1(n,e){let t=arguments.length>=2;return i=>i.pipe(n?un((o,r)=>n(o,r,i)):Ai,Nd(1),t?Hs(e):ew(()=>new Fr))}function q1(n,e){return We(eR(n,e,arguments.length>=2,!0))}function G1(...n){let e=zs(n);return We((t,i)=>{(e?Rd(n,t,e):Rd(n,t)).subscribe(i)})}function li(n,e){return We((t,i)=>{let o=null,r=0,s=!1,a=()=>s&&!o&&i.complete();t.subscribe(Be(i,l=>{o?.unsubscribe();let c=0,d=r++;Qt(n(l,d)).subscribe(o=Be(i,f=>i.next(e?e(l,f,d,c++):f),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Od(n){return We((e,t)=>{Qt(n).subscribe(Be(t,()=>t.complete(),jm)),!t.closed&&e.subscribe(t)})}function at(n,e,t){let i=Ee(n)||e||t?{next:n,error:e,complete:t}:n;return i?We((o,r)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;o.subscribe(Be(r,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),r.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),r.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),r.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Ai}var UR="https://g.co/ng/security#xss",F=class extends Error{constructor(e,t){super(Fw(e,t)),this.code=e}};function Fw(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function af(n){return{toString:n}.toString()}var tw="__parameters__";function FU(n){return function(...t){if(n){let i=n(...t);for(let o in i)this[o]=i[o]}}}function jR(n,e,t){return af(()=>{let i=FU(e);function o(...r){if(this instanceof o)return i.apply(this,r),this;let s=new o(...r);return a.annotation=s,a;function a(l,c,d){let f=l.hasOwnProperty(tw)?l[tw]:Object.defineProperty(l,tw,{value:[]})[tw];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),l}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var Qi=globalThis;function ht(n){for(let e in n)if(n[e]===ht)return e;throw Error("Could not find renamed property on target object.")}function VU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function jn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(jn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function lC(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var BU=ht({__forward_ref__:ht});function zl(n){return n.__forward_ref__=zl,n.toString=function(){return jn(this())},n}function Un(n){return $R(n)?n():n}function $R(n){return typeof n=="function"&&n.hasOwnProperty(BU)&&n.__forward_ref__===zl}function G(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mi(n){return{providers:n.providers||[],imports:n.imports||[]}}function Vw(n){return tR(n,qR)||tR(n,GR)}function WR(n){return Vw(n)!==null}function tR(n,e){return n.hasOwnProperty(e)?n[e]:null}function zU(n){let e=n&&(n[qR]||n[GR]);return e||null}function nR(n){return n&&(n.hasOwnProperty(iR)||n.hasOwnProperty(HU))?n[iR]:null}var qR=ht({\u0275prov:ht}),iR=ht({\u0275inj:ht}),GR=ht({ngInjectableDef:ht}),HU=ht({ngInjectorDef:ht}),Z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=G({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KR(n){return n&&!!n.\u0275providers}var UU=ht({\u0275cmp:ht}),jU=ht({\u0275dir:ht}),$U=ht({\u0275pipe:ht}),WU=ht({\u0275mod:ht}),fw=ht({\u0275fac:ht}),Km=ht({__NG_ELEMENT_ID__:ht}),oR=ht({__NG_ENV_ID__:ht});function Bw(n){return typeof n=="string"?n:n==null?"":String(n)}function qU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Bw(n)}function GU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new F(-200,n)}function kE(n,e){throw new F(-201,!1)}var Re=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Re||{}),cC;function QR(){return cC}function ci(n){let e=cC;return cC=n,e}function YR(n,e,t){let i=Vw(n);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(t&Re.Optional)return null;if(e!==void 0)return e;kE(n,"Injector")}var KU={},Qm=KU,dC="__NG_DI_FLAG__",pw="ngTempTokenPath",QU="ngTokenPath",YU=/\n/gm,ZU="\u0275",rR="__source",Bd;function JU(){return Bd}function js(n){let e=Bd;return Bd=n,e}function XU(n,e=Re.Default){if(Bd===void 0)throw new F(-203,!1);return Bd===null?YR(n,void 0,e):Bd.get(n,e&Re.Optional?null:void 0,e)}function $(n,e=Re.Default){return(QR()||XU)(Un(n),e)}function L(n,e=Re.Default){return $(n,zw(e))}function zw(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uC(n){let e=[];for(let t=0;t<n.length;t++){let i=Un(n[t]);if(Array.isArray(i)){if(i.length===0)throw new F(900,!1);let o,r=Re.Default;for(let s=0;s<i.length;s++){let a=i[s],l=ej(a);typeof l=="number"?l===-1?o=a.token:r|=l:o=a}e.push($(o,r))}else e.push($(i))}return e}function ZR(n,e){return n[dC]=e,n.prototype[dC]=e,n}function ej(n){return n[dC]}function tj(n,e,t,i){let o=n[pw];throw e[rR]&&o.unshift(e[rR]),n.message=nj(`
`+n.message,o,t,i),n[QU]=o,n[pw]=null,n}function nj(n,e,t,i=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==ZU?n.slice(2):n;let o=jn(e);if(Array.isArray(e))o=e.map(jn).join(" -> ");else if(typeof e=="object"){let r=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];r.push(s+":"+(typeof a=="string"?JSON.stringify(a):jn(a)))}o=`{${r.join(", ")}}`}return`${t}${i?"("+i+")":""}[${o}]: ${n.replace(YU,`
  `)}`}var vE=ZR(jR("Optional"),8);var JR=ZR(jR("SkipSelf"),4);function Tl(n,e){let t=n.hasOwnProperty(fw);return t?n[fw]:null}function ij(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let o=n[i],r=e[i];if(t&&(o=t(o),r=t(r)),r!==o)return!1}return!0}function oj(n){return n.flat(Number.POSITIVE_INFINITY)}function yE(n,e){n.forEach(t=>Array.isArray(t)?yE(t,e):e(t))}function XR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gw(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function rj(n,e,t,i){let o=n.length;if(o==e)n.push(t,i);else if(o===1)n.push(i,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let r=o-2;n[o]=n[r],o--}n[e]=t,n[e+1]=i}}function _E(n,e,t){let i=lf(n,e);return i>=0?n[i|1]=t:(i=~i,rj(n,i,e,t)),i}function K1(n,e){let t=lf(n,e);if(t>=0)return n[t|1]}function lf(n,e){return sj(n,e,1)}function sj(n,e,t){let i=0,o=n.length>>t;for(;o!==i;){let r=i+(o-i>>1),s=n[r<<t];if(e===s)return r<<t;s>e?o=r:i=r+1}return~(o<<t)}var Hd={},di=[],Ud=new Z(""),eN=new Z("",-1),tN=new Z(""),bw=class{get(e,t=Qm){if(t===Qm){let i=new Error(`NullInjectorError: No provider for ${jn(e)}!`);throw i.name="NullInjectorError",i}return t}},nN=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(nN||{}),Jo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Jo||{}),qs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(qs||{});function aj(n,e,t){let i=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let r=e.length;if(o+r===i||n.charCodeAt(o+r)<=32)return o}t=o+1}}function hC(n,e,t){let i=0;for(;i<t.length;){let o=t[i];if(typeof o=="number"){if(o!==0)break;i++;let r=t[i++],s=t[i++],a=t[i++];n.setAttribute(e,s,a,r)}else{let r=o,s=t[++i];cj(r)?n.setProperty(e,r,s):n.setAttribute(e,r,s),i++}}return i}function lj(n){return n===3||n===4||n===6}function cj(n){return n.charCodeAt(0)===64}function Ym(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){let o=e[i];typeof o=="number"?t=o:t===0||(t===-1||t===2?sR(n,t,o,null,e[++i]):sR(n,t,o,null,null))}}return n}function sR(n,e,t,i,o){let r=0,s=n.length;if(e===-1)s=-1;else for(;r<n.length;){let a=n[r++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=r-1;break}}}for(;r<n.length;){let a=n[r];if(typeof a=="number")break;if(a===t){if(i===null){o!==null&&(n[r+1]=o);return}else if(i===n[r+1]){n[r+2]=o;return}}r++,i!==null&&r++,o!==null&&r++}s!==-1&&(n.splice(s,0,e),r=s+1),n.splice(r++,0,t),i!==null&&n.splice(r++,0,i),o!==null&&n.splice(r++,0,o)}var iN="ng-template";function dj(n,e,t,i){let o=0;if(i){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&aj(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(CE(n))return!1;if(o=e.indexOf(1,o),o>-1){let r;for(;++o<e.length&&typeof(r=e[o])=="string";)if(r.toLowerCase()===t)return!0}return!1}function CE(n){return n.type===4&&n.value!==iN}function uj(n,e,t){let i=n.type===4&&!t?iN:n.value;return e===i}function hj(n,e,t){let i=4,o=n.attrs,r=o!==null?pj(o):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!yo(i)&&!yo(l))return!1;if(s&&yo(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!uj(n,l,t)||l===""&&e.length===1){if(yo(i))return!1;s=!0}}else if(i&8){if(o===null||!dj(n,o,l,t)){if(yo(i))return!1;s=!0}}else{let c=e[++a],d=mj(l,o,CE(n),t);if(d===-1){if(yo(i))return!1;s=!0;continue}if(c!==""){let f;if(d>r?f="":f=o[d+1].toLowerCase(),i&2&&c!==f){if(yo(i))return!1;s=!0}}}}return yo(i)||s}function yo(n){return(n&1)===0}function mj(n,e,t,i){if(e===null)return-1;let o=0;if(i||!t){let r=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=r?1:2}return-1}else return gj(e,n)}function fj(n,e,t=!1){for(let i=0;i<e.length;i++)if(hj(n,e[i],t))return!0;return!1}function pj(n){for(let e=0;e<n.length;e++){let t=n[e];if(lj(t))return e}return n.length}function gj(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let i=n[t];if(typeof i=="number")return-1;if(i===e)return t;t++}return-1}function aR(n,e){return n?":not("+e.trim()+")":e}function bj(n){let e=n[0],t=1,i=2,o="",r=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(i&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?o+="."+s:i&4&&(o+=" "+s);else o!==""&&!yo(s)&&(e+=aR(r,o),o=""),i=s,r=r||!yo(i);t++}return o!==""&&(e+=aR(r,o)),e}function wj(n){return n.map(bj).join(",")}function kj(n){let e=[],t=[],i=1,o=2;for(;i<n.length;){let r=n[i];if(typeof r=="string")o===2?r!==""&&e.push(r,n[++i]):o===8&&t.push(r);else{if(!yo(o))break;o=r}i++}return{attrs:e,classes:t}}function ne(n){return af(()=>{let e=lN(n),t=I(v({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===nN.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Jo.Emulated,styles:n.styles||di,_:null,schemas:n.schemas||null,tView:null,id:""});cN(t);let i=n.dependencies;return t.directiveDefs=cR(i,!1),t.pipeDefs=cR(i,!0),t.id=_j(t),t})}function vj(n){return Il(n)||oN(n)}function yj(n){return n!==null}function fi(n){return af(()=>({type:n.type,bootstrap:n.bootstrap||di,declarations:n.declarations||di,imports:n.imports||di,exports:n.exports||di,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lR(n,e){if(n==null)return Hd;let t={};for(let i in n)if(n.hasOwnProperty(i)){let o=n[i],r,s,a=qs.None;Array.isArray(o)?(a=o[0],r=o[1],s=o[2]??r):(r=o,s=o),e?(t[r]=a!==qs.None?[i,a]:i,e[r]=s):t[r]=i}return t}function Ti(n){return af(()=>{let e=lN(n);return cN(e),e})}function EE(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Il(n){return n[UU]||null}function oN(n){return n[jU]||null}function rN(n){return n[$U]||null}function sN(n){let e=Il(n)||oN(n)||rN(n);return e!==null?e.standalone:!1}function aN(n,e){let t=n[WU]||null;if(!t&&e===!0)throw new Error(`Type ${jn(n)} does not have '\u0275mod' property.`);return t}function lN(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Hd,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||di,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lR(n.inputs,e),outputs:lR(n.outputs),debugInfo:null}}function cN(n){n.features?.forEach(e=>e(n))}function cR(n,e){if(!n)return null;let t=e?rN:vj;return()=>(typeof n=="function"?n():n).map(i=>t(i)).filter(yj)}function _j(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Yd(n){return{\u0275providers:n}}function SE(...n){return{\u0275providers:dN(!0,n),\u0275fromNgModule:!0}}function dN(n,...e){let t=[],i=new Set,o,r=s=>{t.push(s)};return yE(e,s=>{let a=s;mC(a,r,[],i)&&(o||=[],o.push(a))}),o!==void 0&&uN(o,r),t}function uN(n,e){for(let t=0;t<n.length;t++){let{ngModule:i,providers:o}=n[t];xE(o,r=>{e(r,i)})}}function mC(n,e,t,i){if(n=Un(n),!n)return!1;let o=null,r=nR(n),s=!r&&Il(n);if(!r&&!s){let l=n.ngModule;if(r=nR(l),r)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=i.has(o);if(s){if(a)return!1;if(i.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)mC(c,e,t,i)}}else if(r){if(r.imports!=null&&!a){i.add(o);let c;try{yE(r.imports,d=>{mC(d,e,t,i)&&(c||=[],c.push(d))})}finally{}c!==void 0&&uN(c,e)}if(!a){let c=Tl(o)||(()=>new o);e({provide:o,useFactory:c,deps:di},o),e({provide:tN,useValue:o,multi:!0},o),e({provide:Ud,useValue:()=>$(o),multi:!0},o)}let l=r.providers;if(l!=null&&!a){let c=n;xE(l,d=>{e(d,c)})}}else return!1;return o!==n&&n.providers!==void 0}function xE(n,e){for(let t of n)KR(t)&&(t=t.\u0275providers),Array.isArray(t)?xE(t,e):e(t)}var Cj=ht({provide:String,useValue:ht});function hN(n){return n!==null&&typeof n=="object"&&Cj in n}function Ej(n){return!!(n&&n.useExisting)}function Sj(n){return!!(n&&n.useFactory)}function jd(n){return typeof n=="function"}function xj(n){return!!n.useClass}var Hw=new Z(""),lw={},Aj={},Q1;function AE(){return Q1===void 0&&(Q1=new bw),Q1}var ui=class{},Zm=class extends ui{get destroyed(){return this._destroyed}constructor(e,t,i,o){super(),this.parent=t,this.source=i,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,pC(e,s=>this.processProvider(s)),this.records.set(eN,Ld(void 0,this)),o.has("environment")&&this.records.set(ui,Ld(void 0,this));let r=this.records.get(Hw);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(tN,di,Re.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=je(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of t)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=js(this),i=ci(void 0),o;try{return e()}finally{js(t),ci(i)}}get(e,t=Qm,i=Re.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oR))return e[oR](this);i=zw(i);let o,r=js(this),s=ci(void 0);try{if(!(i&Re.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=Pj(e)&&Vw(e);c&&this.injectableDefInScope(c)?l=Ld(fC(e),lw):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&Re.Self?AE():this.parent;return t=i&Re.Optional&&t===Qm?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[pw]=a[pw]||[]).unshift(jn(e)),r)throw a;return tj(a,e,"R3InjectorError",this.source)}else throw a}finally{ci(s),js(r)}}resolveInjectorInitializers(){let e=je(null),t=js(this),i=ci(void 0),o;try{let r=this.get(Ud,di,Re.Self);for(let s of r)s()}finally{js(t),ci(i),je(e)}}toString(){let e=[],t=this.records;for(let i of t.keys())e.push(jn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new F(205,!1)}processProvider(e){e=Un(e);let t=jd(e)?e:Un(e&&e.provide),i=Ij(e);if(!jd(e)&&e.multi===!0){let o=this.records.get(t);o||(o=Ld(void 0,lw,!0),o.factory=()=>uC(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,i)}hydrate(e,t){let i=je(null);try{return t.value===lw&&(t.value=Aj,t.value=t.factory()),typeof t.value=="object"&&t.value&&Dj(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Un(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function fC(n){let e=Vw(n),t=e!==null?e.factory:Tl(n);if(t!==null)return t;if(n instanceof Z)throw new F(204,!1);if(n instanceof Function)return Tj(n);throw new F(204,!1)}function Tj(n){if(n.length>0)throw new F(204,!1);let t=zU(n);return t!==null?()=>t.factory(n):()=>new n}function Ij(n){if(hN(n))return Ld(void 0,n.useValue);{let e=mN(n);return Ld(e,lw)}}function mN(n,e,t){let i;if(jd(n)){let o=Un(n);return Tl(o)||fC(o)}else if(hN(n))i=()=>Un(n.useValue);else if(Sj(n))i=()=>n.useFactory(...uC(n.deps||[]));else if(Ej(n))i=()=>$(Un(n.useExisting));else{let o=Un(n&&(n.useClass||n.provide));if(Mj(n))i=()=>new o(...uC(n.deps));else return Tl(o)||fC(o)}return i}function Ld(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Mj(n){return!!n.deps}function Dj(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Pj(n){return typeof n=="function"||typeof n=="object"&&n instanceof Z}function pC(n,e){for(let t of n)Array.isArray(t)?pC(t,e):t&&KR(t)?pC(t.\u0275providers,e):e(t)}function So(n,e){n instanceof Zm&&n.assertNotDestroyed();let t,i=js(n),o=ci(void 0);try{return e()}finally{js(i),ci(o)}}function Rj(){return QR()!==void 0||JU()!=null}function Nj(n){return typeof n=="function"}var Ur=0,we=1,ge=2,Dn=3,Co=4,xo=5,Jm=6,ww=7,In=8,$d=9,Xo=10,Yt=11,Xm=12,dR=13,Zd=14,Eo=15,Ml=16,Fd=17,Vr=18,Uw=19,fN=20,$s=21,Y1=22,Ki=23,hi=25,pN=1;var Dl=7,kw=8,Wd=9,Mn=10,vw=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(vw||{});function Ws(n){return Array.isArray(n)&&typeof n[pN]=="object"}function jr(n){return Array.isArray(n)&&n[pN]===!0}function gN(n){return(n.flags&4)!==0}function jw(n){return n.componentOffset>-1}function TE(n){return(n.flags&1)===1}function Gs(n){return!!n.template}function gC(n){return(n[ge]&512)!==0}var bC=class{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}};function bN(n,e,t,i){e!==null?e.applyValueToInputSignal(e,i):n[t]=i}function Zs(){return wN}function wN(n){return n.type.prototype.ngOnChanges&&(n.setInput=Lj),Oj}Zs.ngInherit=!0;function Oj(){let n=vN(this),e=n?.current;if(e){let t=n.previous;if(t===Hd)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Lj(n,e,t,i,o){let r=this.declaredInputs[i],s=vN(n)||Fj(n,{previous:Hd,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[r];a[r]=new bC(c&&c.currentValue,t,l===Hd),bN(n,e,o,t)}var kN="__ngSimpleChanges__";function vN(n){return n[kN]||null}function Fj(n,e){return n[kN]=e}var uR=null;var Yo=function(n,e,t){uR?.(n,e,t)},yN="svg",Vj="math";function er(n){for(;Array.isArray(n);)n=n[Ur];return n}function _N(n,e){return er(e[n])}function Yi(n,e){return er(e[n.index])}function IE(n,e){return n.data[e]}function CN(n,e){return n[e]}function Js(n,e){let t=e[n];return Ws(t)?t:t[Ur]}function Bj(n){return(n[ge]&4)===4}function ME(n){return(n[ge]&128)===128}function zj(n){return jr(n[Dn])}function qd(n,e){return e==null?null:n[e]}function EN(n){n[Fd]=0}function SN(n){n[ge]&1024||(n[ge]|=1024,ME(n)&&Ww(n))}function Hj(n,e){for(;n>0;)e=e[Zd],n--;return e}function $w(n){return!!(n[ge]&9216||n[Ki]?.dirty)}function wC(n){n[Xo].changeDetectionScheduler?.notify(8),n[ge]&64&&(n[ge]|=1024),$w(n)&&Ww(n)}function Ww(n){n[Xo].changeDetectionScheduler?.notify(0);let e=Pl(n);for(;e!==null&&!(e[ge]&8192||(e[ge]|=8192,!ME(e)));)e=Pl(e)}function xN(n,e){if((n[ge]&256)===256)throw new F(911,!1);n[$s]===null&&(n[$s]=[]),n[$s].push(e)}function Uj(n,e){if(n[$s]===null)return;let t=n[$s].indexOf(e);t!==-1&&n[$s].splice(t,1)}function Pl(n){let e=n[Dn];return jr(e)?e[Dn]:e}var Te={lFrame:LN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var AN=!1;function jj(){return Te.lFrame.elementDepthCount}function $j(){Te.lFrame.elementDepthCount++}function Wj(){Te.lFrame.elementDepthCount--}function TN(){return Te.bindingsEnabled}function qj(){return Te.skipHydrationRootTNode!==null}function Gj(n){return Te.skipHydrationRootTNode===n}function Kj(){Te.skipHydrationRootTNode=null}function qe(){return Te.lFrame.lView}function hn(){return Te.lFrame.tView}function Ao(n){return Te.lFrame.contextLView=n,n[In]}function To(n){return Te.lFrame.contextLView=null,n}function pi(){let n=IN();for(;n!==null&&n.type===64;)n=n.parent;return n}function IN(){return Te.lFrame.currentTNode}function Qj(){let n=Te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function cf(n,e){let t=Te.lFrame;t.currentTNode=n,t.isParent=e}function MN(){return Te.lFrame.isParent}function Yj(){Te.lFrame.isParent=!1}function Zj(){return Te.lFrame.contextLView}function DN(){return AN}function hR(n){AN=n}function Jj(){let n=Te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Xj(n){return Te.lFrame.bindingIndex=n}function Jd(){return Te.lFrame.bindingIndex++}function PN(n){let e=Te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function e$(){return Te.lFrame.inI18n}function t$(n,e){let t=Te.lFrame;t.bindingIndex=t.bindingRootIndex=n,kC(e)}function n$(){return Te.lFrame.currentDirectiveIndex}function kC(n){Te.lFrame.currentDirectiveIndex=n}function i$(n){let e=Te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function RN(){return Te.lFrame.currentQueryIndex}function DE(n){Te.lFrame.currentQueryIndex=n}function o$(n){let e=n[we];return e.type===2?e.declTNode:e.type===1?n[xo]:null}function NN(n,e,t){if(t&Re.SkipSelf){let o=e,r=n;for(;o=o.parent,o===null&&!(t&Re.Host);)if(o=o$(r),o===null||(r=r[Zd],o.type&10))break;if(o===null)return!1;e=o,n=r}let i=Te.lFrame=ON();return i.currentTNode=e,i.lView=n,!0}function PE(n){let e=ON(),t=n[we];Te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ON(){let n=Te.lFrame,e=n===null?null:n.child;return e===null?LN(n):e}function LN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function FN(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var VN=FN;function RE(){let n=FN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function r$(n){return(Te.lFrame.contextLView=Hj(n,Te.lFrame.contextLView))[In]}function Xs(){return Te.lFrame.selectedIndex}function Rl(n){Te.lFrame.selectedIndex=n}function NE(){let n=Te.lFrame;return IE(n.tView,n.selectedIndex)}function Ne(){Te.lFrame.currentNamespace=yN}function Oe(){s$()}function s$(){Te.lFrame.currentNamespace=null}function a$(){return Te.lFrame.currentNamespace}var BN=!0;function OE(){return BN}function LE(n){BN=n}function l$(n,e,t){let{ngOnChanges:i,ngOnInit:o,ngDoCheck:r}=e.type.prototype;if(i){let s=wN(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),r&&((t.preOrderHooks??=[]).push(n,r),(t.preOrderCheckHooks??=[]).push(n,r))}function FE(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){let r=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=r;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function cw(n,e,t){zN(n,e,3,t)}function dw(n,e,t,i){(n[ge]&3)===t&&zN(n,e,t,i)}function Z1(n,e){let t=n[ge];(t&3)===e&&(t&=16383,t+=1,n[ge]=t)}function zN(n,e,t,i){let o=i!==void 0?n[Fd]&65535:0,r=i??-1,s=e.length-1,a=0;for(let l=o;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(n[Fd]+=65536),(a<r||r==-1)&&(c$(n,t,e,l),n[Fd]=(n[Fd]&4294901760)+l+2),l++}function mR(n,e){Yo(4,n,e);let t=je(null);try{e.call(n)}finally{je(t),Yo(5,n,e)}}function c$(n,e,t,i){let o=t[i]<0,r=t[i+1],s=o?-t[i]:t[i],a=n[s];o?n[ge]>>14<n[Fd]>>16&&(n[ge]&3)===e&&(n[ge]+=16384,mR(a,r)):mR(a,r)}var zd=-1,Nl=class{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}};function d$(n){return n instanceof Nl}function u$(n){return(n.flags&8)!==0}function h$(n){return(n.flags&16)!==0}var J1={},vC=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=zw(i);let o=this.injector.get(e,J1,i);return o!==J1||t===J1?o:this.parentInjector.get(e,t,i)}};function HN(n){return n!==zd}function yw(n){return n&32767}function m$(n){return n>>16}function _w(n,e){let t=m$(n),i=e;for(;t>0;)i=i[Zd],t--;return i}var yC=!0;function Cw(n){let e=yC;return yC=n,e}var f$=256,UN=f$-1,jN=5,p$=0,Zo={};function g$(n,e,t){let i;typeof t=="string"?i=t.charCodeAt(0)||0:t.hasOwnProperty(Km)&&(i=t[Km]),i==null&&(i=t[Km]=p$++);let o=i&UN,r=1<<o;e.data[n+(o>>jN)]|=r}function Ew(n,e){let t=$N(n,e);if(t!==-1)return t;let i=e[we];i.firstCreatePass&&(n.injectorIndex=e.length,X1(i.data,n),X1(e,null),X1(i.blueprint,null));let o=VE(n,e),r=n.injectorIndex;if(HN(o)){let s=yw(o),a=_w(o,e),l=a[we].data;for(let c=0;c<8;c++)e[r+c]=a[s+c]|l[s+c]}return e[r+8]=o,r}function X1(n,e){n.push(0,0,0,0,0,0,0,0,e)}function $N(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function VE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,i=null,o=e;for(;o!==null;){if(i=QN(o),i===null)return zd;if(t++,o=o[Zd],i.injectorIndex!==-1)return i.injectorIndex|t<<16}return zd}function _C(n,e,t){g$(n,e,t)}function WN(n,e,t){if(t&Re.Optional||n!==void 0)return n;kE(e,"NodeInjector")}function qN(n,e,t,i){if(t&Re.Optional&&i===void 0&&(i=null),!(t&(Re.Self|Re.Host))){let o=n[$d],r=ci(void 0);try{return o?o.get(e,i,t&Re.Optional):YR(e,i,t&Re.Optional)}finally{ci(r)}}return WN(i,e,t)}function GN(n,e,t,i=Re.Default,o){if(n!==null){if(e[ge]&2048&&!(i&Re.Self)){let s=v$(n,e,t,i,Zo);if(s!==Zo)return s}let r=KN(n,e,t,i,Zo);if(r!==Zo)return r}return qN(e,t,i,o)}function KN(n,e,t,i,o){let r=w$(t);if(typeof r=="function"){if(!NN(e,n,i))return i&Re.Host?WN(o,t,i):qN(e,t,i,o);try{let s;if(s=r(i),s==null&&!(i&Re.Optional))kE(t);else return s}finally{VN()}}else if(typeof r=="number"){let s=null,a=$N(n,e),l=zd,c=i&Re.Host?e[Eo][xo]:null;for((a===-1||i&Re.SkipSelf)&&(l=a===-1?VE(n,e):e[a+8],l===zd||!pR(i,!1)?a=-1:(s=e[we],a=yw(l),e=_w(l,e)));a!==-1;){let d=e[we];if(fR(r,a,d.data)){let f=b$(a,e,t,s,i,c);if(f!==Zo)return f}l=e[a+8],l!==zd&&pR(i,e[we].data[a+8]===c)&&fR(r,a,e)?(s=d,a=yw(l),e=_w(l,e)):a=-1}}return o}function b$(n,e,t,i,o,r){let s=e[we],a=s.data[n+8],l=i==null?jw(a)&&yC:i!=s&&(a.type&3)!==0,c=o&Re.Host&&r===a,d=uw(a,s,t,l,c);return d!==null?Ol(e,s,d,a):Zo}function uw(n,e,t,i,o){let r=n.providerIndexes,s=e.data,a=r&1048575,l=n.directiveStart,c=n.directiveEnd,d=r>>20,f=i?a:a+d,p=o?a+d:c;for(let g=f;g<p;g++){let w=s[g];if(g<l&&t===w||g>=l&&w.type===t)return g}if(o){let g=s[l];if(g&&Gs(g)&&g.type===t)return l}return null}function Ol(n,e,t,i){let o=n[t],r=e.data;if(d$(o)){let s=o;s.resolving&&GU(qU(r[t]));let a=Cw(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?ci(s.injectImpl):null,d=NN(n,i,Re.Default);try{o=n[t]=s.factory(void 0,r,n,i),e.firstCreatePass&&t>=i.directiveStart&&l$(t,r[t],e)}finally{c!==null&&ci(c),Cw(a),s.resolving=!1,VN()}}return o}function w$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Km)?n[Km]:void 0;return typeof e=="number"?e>=0?e&UN:k$:e}function fR(n,e,t){let i=1<<n;return!!(t[e+(n>>jN)]&i)}function pR(n,e){return!(n&Re.Self)&&!(n&Re.Host&&e)}var Al=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return GN(this._tNode,this._lView,e,zw(i),t)}};function k$(){return new Al(pi(),qe())}function Io(n){return af(()=>{let e=n.prototype.constructor,t=e[fw]||CC(e),i=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==i;){let r=o[fw]||CC(o);if(r&&r!==t)return r;o=Object.getPrototypeOf(o)}return r=>new r})}function CC(n){return $R(n)?()=>{let e=CC(Un(n));return e&&e()}:Tl(n)}function v$(n,e,t,i,o){let r=n,s=e;for(;r!==null&&s!==null&&s[ge]&2048&&!(s[ge]&512);){let a=KN(r,s,t,i|Re.Self,Zo);if(a!==Zo)return a;let l=r.parent;if(!l){let c=s[fN];if(c){let d=c.get(t,Zo,i);if(d!==Zo)return d}l=QN(s),s=s[Zd]}r=l}return o}function QN(n){let e=n[we],t=e.type;return t===2?e.declTNode:t===1?n[xo]:null}function gR(n,e=null,t=null,i){let o=YN(n,e,t,i);return o.resolveInjectorInitializers(),o}function YN(n,e=null,t=null,i,o=new Set){let r=[t||di,SE(n)];return i=i||(typeof n=="object"?void 0:jn(n)),new Zm(r,e||AE(),i||null,o)}var Ks=class n{static{this.THROW_IF_NOT_FOUND=Qm}static{this.NULL=new bw}static create(e,t){if(Array.isArray(e))return gR({name:""},t,e,"");{let i=e.name??"";return gR({name:i},e.parent,e.providers,i)}}static{this.\u0275prov=G({token:n,providedIn:"any",factory:()=>$(eN)})}static{this.__NG_ELEMENT_ID__=-1}};var y$=new Z("");y$.__NG_ELEMENT_ID__=n=>{let e=pi();if(e===null)throw new F(204,!1);if(e.type&2)return e.value;if(n&Re.Optional)return null;throw new F(204,!1)};var _$="ngOriginalError";function eC(n){return n[_$]}var ZN=!0,JN=(()=>{class n{static{this.__NG_ELEMENT_ID__=C$}static{this.__NG_ENV_ID__=t=>t}}return n})(),EC=class extends JN{constructor(e){super(),this._lView=e}onDestroy(e){return xN(this._lView,e),()=>Uj(this._lView,e)}};function C$(){return new EC(qe())}var $r=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new en(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})();var SC=class extends At{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Rj()&&(this.destroyRef=L(JN,{optional:!0})??void 0,this.pendingTasks=L($r,{optional:!0})??void 0)}emit(e){let t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,i){let o=e,r=t||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;o=l.next?.bind(l),r=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:r,complete:s});return e instanceof zt&&e.add(a),a}wrapInTimeout(e){return t=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(t),i!==void 0&&this.pendingTasks?.remove(i)})}}},bt=SC;function Sw(...n){}function XN(n){let e,t;function i(){n=Sw;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),i()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),i()})),()=>i()}function bR(n){return queueMicrotask(()=>n()),()=>{n=Sw}}var BE="isAngularZone",xw=BE+"_ID",E$=0,ot=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bt(!1),this.onMicrotaskEmpty=new bt(!1),this.onStable=new bt(!1),this.onError=new bt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:r=ZN}=e;if(typeof Zone>"u")throw new F(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&i,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=r,A$(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(BE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new F(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new F(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,o){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+o,e,S$,Sw,Sw);try{return r.runTask(s,t,i)}finally{r.cancelTask(s)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}},S$={};function zE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function x$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){XN(()=>{n.callbackScheduled=!1,xC(n),n.isCheckStableRunning=!0,zE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),xC(n)}function A$(n){let e=()=>{x$(n)},t=E$++;n._inner=n._inner.fork({name:"angular",properties:{[BE]:!0,[xw]:t,[xw+t]:!0},onInvokeTask:(i,o,r,s,a,l)=>{if(T$(l))return i.invokeTask(r,s,a,l);try{return wR(n),i.invokeTask(r,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),kR(n)}},onInvoke:(i,o,r,s,a,l,c)=>{try{return wR(n),i.invoke(r,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!I$(l)&&e(),kR(n)}},onHasTask:(i,o,r,s)=>{i.hasTask(r,s),o===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,xC(n),zE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,o,r,s)=>(i.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function xC(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wR(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kR(n){n._nesting--,zE(n)}var AC=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bt,this.onMicrotaskEmpty=new bt,this.onStable=new bt,this.onError=new bt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,o){return e.apply(t,i)}};function T$(n){return eO(n,"__ignore_ng_zone__")}function I$(n){return eO(n,"__scheduler_tick__")}function eO(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Br=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&eC(e);for(;t&&eC(t);)t=eC(t);return t||null}},M$=new Z("",{providedIn:"root",factory:()=>{let n=L(ot),e=L(Br);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function D$(){return Xd(pi(),qe())}function Xd(n,e){return new Zi(Yi(n,e))}var Zi=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=D$}}return n})();function P$(n){return n instanceof Zi?n.nativeElement:n}function R$(){return this._results[Symbol.iterator]()}var TC=class n{get changes(){return this._changes??=new bt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=R$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let i=oj(e);(this._changesDetected=!ij(this._results,i,t))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function tO(n){return(n.flags&128)===128}var nO=new Map,N$=0;function O$(){return N$++}function L$(n){nO.set(n[Uw],n)}function IC(n){nO.delete(n[Uw])}var vR="__ngContext__";function Ll(n,e){Ws(e)?(n[vR]=e[Uw],L$(e)):n[vR]=e}function iO(n){return rO(n[Xm])}function oO(n){return rO(n[Co])}function rO(n){for(;n!==null&&!jr(n);)n=n[Co];return n}var MC;function sO(n){MC=n}function aO(){if(MC!==void 0)return MC;if(typeof document<"u")return document;throw new F(210,!1)}var qw=new Z("",{providedIn:"root",factory:()=>F$}),F$="ng",HE=new Z(""),ea=new Z("",{providedIn:"platform",factory:()=>"unknown"});var UE=new Z(""),jE=new Z("",{providedIn:"root",factory:()=>aO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var V$="h",B$="b";var z$=()=>null;function $E(n,e,t=!1){return z$(n,e,t)}var lO=!1,H$=new Z("",{providedIn:"root",factory:()=>lO});var nw;function U$(){if(nw===void 0&&(nw=null,Qi.trustedTypes))try{nw=Qi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nw}function Gw(n){return U$()?.createHTML(n)||n}var iw;function j$(){if(iw===void 0&&(iw=null,Qi.trustedTypes))try{iw=Qi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return iw}function yR(n){return j$()?.createHTML(n)||n}var zr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${UR})`}},DC=class extends zr{getTypeName(){return"HTML"}},PC=class extends zr{getTypeName(){return"Style"}},RC=class extends zr{getTypeName(){return"Script"}},NC=class extends zr{getTypeName(){return"URL"}},OC=class extends zr{getTypeName(){return"ResourceURL"}};function tr(n){return n instanceof zr?n.changingThisBreaksApplicationSecurity:n}function Hl(n,e){let t=$$(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${UR})`)}return t===e}function $$(n){return n instanceof zr&&n.getTypeName()||null}function cO(n){return new DC(n)}function dO(n){return new PC(n)}function uO(n){return new RC(n)}function hO(n){return new NC(n)}function mO(n){return new OC(n)}function W$(n){let e=new FC(n);return q$()?new LC(e):e}var LC=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Gw(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},FC=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Gw(e),t}};function q$(){try{return!!new window.DOMParser().parseFromString(Gw(""),"text/html")}catch{return!1}}var G$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function WE(n){return n=String(n),n.match(G$)?n:"unsafe:"+n}function Wr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function df(...n){let e={};for(let t of n)for(let i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}var fO=Wr("area,br,col,hr,img,wbr"),pO=Wr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),gO=Wr("rp,rt"),K$=df(gO,pO),Q$=df(pO,Wr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Y$=df(gO,Wr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),_R=df(fO,Q$,Y$,K$),bO=Wr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Z$=Wr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),J$=Wr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),X$=df(bO,Z$,J$),eW=Wr("script,style,template"),VC=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0,o=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild){o.push(t),t=iW(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=nW(t);if(r){t=r;break}t=o.pop()}}return this.buf.join("")}startElement(e){let t=CR(e).toLowerCase();if(!_R.hasOwnProperty(t))return this.sanitizedSomething=!0,!eW.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let i=e.attributes;for(let o=0;o<i.length;o++){let r=i.item(o),s=r.name,a=s.toLowerCase();if(!X$.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=r.value;bO[a]&&(l=WE(l)),this.buf.push(" ",s,'="',ER(l),'"')}return this.buf.push(">"),!0}endElement(e){let t=CR(e).toLowerCase();_R.hasOwnProperty(t)&&!fO.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(ER(e))}};function tW(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function nW(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw wO(e);return e}function iW(n){let e=n.firstChild;if(e&&tW(n,e))throw wO(e);return e}function CR(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function wO(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var oW=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rW=/([^\#-~ |!])/g;function ER(n){return n.replace(/&/g,"&amp;").replace(oW,function(e){let t=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((t-55296)*1024+(i-56320)+65536)+";"}).replace(rW,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ow;function qE(n,e){let t=null;try{ow=ow||W$(n);let i=e?String(e):"";t=ow.getInertBodyElement(i);let o=5,r=i;do{if(o===0)throw new Error("Failed to sanitize html because the input is unstable");o--,i=r,r=t.innerHTML,t=ow.getInertBodyElement(i)}while(i!==r);let a=new VC().sanitizeChildren(SR(t)||t);return Gw(a)}finally{if(t){let i=SR(t)||t;for(;i.firstChild;)i.firstChild.remove()}}}function SR(n){return"content"in n&&sW(n)?n.content:null}function sW(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var qr=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(qr||{});function kO(n){let e=aW();return e?yR(e.sanitize(qr.HTML,n)||""):Hl(n,"HTML")?yR(tr(n)):qE(aO(),Bw(n))}function aW(){let n=qe();return n&&n[Xo].sanitizer}function vO(n){return n.ownerDocument}function yO(n){return n instanceof Function?n():n}var Hr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Hr||{}),lW;function GE(n,e){return lW(n,e)}function Vd(n,e,t,i,o){if(i!=null){let r,s=!1;jr(i)?r=i:Ws(i)&&(s=!0,i=i[Ur]);let a=er(i);n===0&&t!==null?o==null?SO(e,t,a):Aw(e,t,a,o||null,!0):n===1&&t!==null?Aw(e,t,a,o||null,!0):n===2?CW(e,a,s):n===3&&e.destroyNode(a),r!=null&&SW(e,n,r,t,o)}}function cW(n,e){return n.createText(e)}function dW(n,e,t){n.setValue(e,t)}function _O(n,e,t){return n.createElement(e,t)}function uW(n,e){CO(n,e),e[Ur]=null,e[xo]=null}function hW(n,e,t,i,o,r){i[Ur]=o,i[xo]=e,Qw(n,i,t,1,o,r)}function CO(n,e){e[Xo].changeDetectionScheduler?.notify(9),Qw(n,e,e[Yt],2,null,null)}function mW(n){let e=n[Xm];if(!e)return tC(n[we],n);for(;e;){let t=null;if(Ws(e))t=e[Xm];else{let i=e[Mn];i&&(t=i)}if(!t){for(;e&&!e[Co]&&e!==n;)Ws(e)&&tC(e[we],e),e=e[Dn];e===null&&(e=n),Ws(e)&&tC(e[we],e),t=e&&e[Co]}e=t}}function fW(n,e,t,i){let o=Mn+i,r=t.length;i>0&&(t[o-1][Co]=e),i<r-Mn?(e[Co]=t[o],XR(t,Mn+i,e)):(t.push(e),e[Co]=null),e[Dn]=t;let s=e[Ml];s!==null&&t!==s&&EO(s,e);let a=e[Vr];a!==null&&a.insertView(n),wC(e),e[ge]|=128}function EO(n,e){let t=n[Wd],i=e[Dn];if(Ws(i))n[ge]|=vw.HasTransplantedViews;else{let o=i[Dn][Eo];e[Eo]!==o&&(n[ge]|=vw.HasTransplantedViews)}t===null?n[Wd]=[e]:t.push(e)}function KE(n,e){let t=n[Wd],i=t.indexOf(e);t.splice(i,1)}function ef(n,e){if(n.length<=Mn)return;let t=Mn+e,i=n[t];if(i){let o=i[Ml];o!==null&&o!==n&&KE(o,i),e>0&&(n[t-1][Co]=i[Co]);let r=gw(n,Mn+e);uW(i[we],i);let s=r[Vr];s!==null&&s.detachView(r[we]),i[Dn]=null,i[Co]=null,i[ge]&=-129}return i}function Kw(n,e){if(!(e[ge]&256)){let t=e[Yt];t.destroyNode&&Qw(n,e,t,3,null,null),mW(e)}}function tC(n,e){if(e[ge]&256)return;let t=je(null);try{e[ge]&=-129,e[ge]|=256,e[Ki]&&I1(e[Ki]),gW(n,e),pW(n,e),e[we].type===1&&e[Yt].destroy();let i=e[Ml];if(i!==null&&jr(e[Dn])){i!==e[Dn]&&KE(i,e);let o=e[Vr];o!==null&&o.detachView(n)}IC(e)}finally{je(t)}}function pW(n,e){let t=n.cleanup,i=e[ww];if(t!==null)for(let r=0;r<t.length-1;r+=2)if(typeof t[r]=="string"){let s=t[r+3];s>=0?i[s]():i[-s].unsubscribe(),r+=2}else{let s=i[t[r+1]];t[r].call(s)}i!==null&&(e[ww]=null);let o=e[$s];if(o!==null){e[$s]=null;for(let r=0;r<o.length;r++){let s=o[r];s()}}}function gW(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let i=0;i<t.length;i+=2){let o=e[t[i]];if(!(o instanceof Nl)){let r=t[i+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=o[r[s]],l=r[s+1];Yo(4,a,l);try{l.call(a)}finally{Yo(5,a,l)}}else{Yo(4,o,r);try{r.call(o)}finally{Yo(5,o,r)}}}}}function bW(n,e,t){return wW(n,e.parent,t)}function wW(n,e,t){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return t[Ur];{let{componentOffset:o}=i;if(o>-1){let{encapsulation:r}=n.data[i.directiveStart+o];if(r===Jo.None||r===Jo.Emulated)return null}return Yi(i,t)}}function Aw(n,e,t,i,o){n.insertBefore(e,t,i,o)}function SO(n,e,t){n.appendChild(e,t)}function xR(n,e,t,i,o){i!==null?Aw(n,e,t,i,o):SO(n,e,t)}function xO(n,e){return n.parentNode(e)}function kW(n,e){return n.nextSibling(e)}function vW(n,e,t){return _W(n,e,t)}function yW(n,e,t){return n.type&40?Yi(n,t):null}var _W=yW,AR;function QE(n,e,t,i){let o=bW(n,i,e),r=e[Yt],s=i.parent||e[xo],a=vW(s,i,e);if(o!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)xR(r,o,t[l],a,!1);else xR(r,o,t,a,!1);AR!==void 0&&AR(r,i,e,t,o)}function qm(n,e){if(e!==null){let t=e.type;if(t&3)return Yi(e,n);if(t&4)return BC(-1,n[e.index]);if(t&8){let i=e.child;if(i!==null)return qm(n,i);{let o=n[e.index];return jr(o)?BC(-1,o):er(o)}}else{if(t&128)return qm(n,e.next);if(t&32)return GE(e,n)()||er(n[e.index]);{let i=AO(n,e);if(i!==null){if(Array.isArray(i))return i[0];let o=Pl(n[Eo]);return qm(o,i)}else return qm(n,e.next)}}}return null}function AO(n,e){if(e!==null){let i=n[Eo][xo],o=e.projection;return i.projection[o]}return null}function BC(n,e){let t=Mn+n+1;if(t<e.length){let i=e[t],o=i[we].firstChild;if(o!==null)return qm(i,o)}return e[Dl]}function CW(n,e,t){n.removeChild(null,e,t)}function YE(n,e,t,i,o,r,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=i[t.index],l=t.type;if(s&&e===0&&(a&&Ll(er(a),i),t.flags|=2),(t.flags&32)!==32)if(l&8)YE(n,e,t.child,i,o,r,!1),Vd(e,n,o,a,r);else if(l&32){let c=GE(t,i),d;for(;d=c();)Vd(e,n,o,d,r);Vd(e,n,o,a,r)}else l&16?EW(n,e,i,t,o,r):Vd(e,n,o,a,r);t=s?t.projectionNext:t.next}}function Qw(n,e,t,i,o,r){YE(t,i,n.firstChild,e,o,r,!1)}function EW(n,e,t,i,o,r){let s=t[Eo],l=s[xo].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let d=l[c];Vd(e,n,o,d,r)}else{let c=l,d=s[Dn];tO(i)&&(c.flags|=128),YE(n,e,c,d,o,r,!0)}}function SW(n,e,t,i,o){let r=t[Dl],s=er(t);r!==s&&Vd(e,n,i,r,o);for(let a=Mn;a<t.length;a++){let l=t[a];Qw(l[we],l,n,e,i,r)}}function xW(n,e,t,i,o){if(e)o?n.addClass(t,i):n.removeClass(t,i);else{let r=i.indexOf("-")===-1?void 0:Hr.DashCase;o==null?n.removeStyle(t,i,r):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),r|=Hr.Important),n.setStyle(t,i,o,r))}}function AW(n,e,t){n.setAttribute(e,"style",t)}function TO(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function IO(n,e,t){let{mergedAttrs:i,classes:o,styles:r}=t;i!==null&&hC(n,e,i),o!==null&&TO(n,e,o),r!==null&&AW(n,e,r)}var nr={};function wt(n=1){MO(hn(),qe(),Xs()+n,!1)}function MO(n,e,t,i){if(!i)if((e[ge]&3)===3){let r=n.preOrderCheckHooks;r!==null&&cw(e,r,t)}else{let r=n.preOrderHooks;r!==null&&dw(e,r,0,t)}Rl(t)}function Ge(n,e=Re.Default){let t=qe();if(t===null)return $(n,e);let i=pi();return GN(i,t,Un(n),e)}function DO(n,e,t,i,o,r){let s=je(null);try{let a=null;o&qs.SignalBased&&(a=e[i][Or]),a!==null&&a.transformFn!==void 0&&(r=a.transformFn(r)),o&qs.HasDecoratorInputTransform&&(r=n.inputTransforms[i].call(e,r)),n.setInput!==null?n.setInput(e,a,r,t,i):bN(e,a,i,r)}finally{je(s)}}function TW(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let i=0;i<t.length;i++){let o=t[i];if(o<0)Rl(~o);else{let r=o,s=t[++i],a=t[++i];t$(s,r);let l=e[r];a(2,l)}}}finally{Rl(-1)}}function Yw(n,e,t,i,o,r,s,a,l,c,d){let f=e.blueprint.slice();return f[Ur]=o,f[ge]=i|4|128|8|64,(c!==null||n&&n[ge]&2048)&&(f[ge]|=2048),EN(f),f[Dn]=f[Zd]=n,f[In]=t,f[Xo]=s||n&&n[Xo],f[Yt]=a||n&&n[Yt],f[$d]=l||n&&n[$d]||null,f[xo]=r,f[Uw]=O$(),f[Jm]=d,f[fN]=c,f[Eo]=e.type==2?n[Eo]:f,f}function Zw(n,e,t,i,o){let r=n.data[e];if(r===null)r=IW(n,e,t,i,o),e$()&&(r.flags|=32);else if(r.type&64){r.type=t,r.value=i,r.attrs=o;let s=Qj();r.injectorIndex=s===null?-1:s.injectorIndex}return cf(r,!0),r}function IW(n,e,t,i,o){let r=IN(),s=MN(),a=s?r:r&&r.parent,l=n.data[e]=OW(n,a,t,e,i,o);return n.firstChild===null&&(n.firstChild=l),r!==null&&(s?r.child==null&&l.parent!==null&&(r.child=l):r.next===null&&(r.next=l,l.prev=r)),l}function PO(n,e,t,i){if(t===0)return-1;let o=e.length;for(let r=0;r<t;r++)e.push(i),n.blueprint.push(i),n.data.push(null);return o}function RO(n,e,t,i,o){let r=Xs(),s=i&2;try{Rl(-1),s&&e.length>hi&&MO(n,e,hi,!1),Yo(s?2:0,o),t(i,o)}finally{Rl(r),Yo(s?3:1,o)}}function NO(n,e,t){if(gN(e)){let i=je(null);try{let o=e.directiveStart,r=e.directiveEnd;for(let s=o;s<r;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{je(i)}}}function OO(n,e,t){TN()&&(HW(n,e,t,Yi(t,e)),(t.flags&64)===64&&HO(n,e,t))}function LO(n,e,t=Yi){let i=e.localNames;if(i!==null){let o=e.index+1;for(let r=0;r<i.length;r+=2){let s=i[r+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function FO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ZE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ZE(n,e,t,i,o,r,s,a,l,c,d){let f=hi+i,p=f+o,g=MW(f,p),w=typeof c=="function"?c():c;return g[we]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:d}}function MW(n,e){let t=[];for(let i=0;i<e;i++)t.push(i<n?null:nr);return t}function DW(n,e,t,i){let r=i.get(H$,lO)||t===Jo.ShadowDom,s=n.selectRootElement(e,r);return PW(s),s}function PW(n){RW(n)}var RW=()=>null;function NW(n,e,t,i){let o=$O(e);o.push(t),n.firstCreatePass&&WO(n).push(i,o.length-1)}function OW(n,e,t,i,o,r){let s=e?e.injectorIndex:-1,a=0;return qj()&&(a|=128),{type:t,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:r,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TR(n,e,t,i,o){for(let r in e){if(!e.hasOwnProperty(r))continue;let s=e[r];if(s===void 0)continue;i??={};let a,l=qs.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=r;if(o!==null){if(!o.hasOwnProperty(r))continue;c=o[r]}n===0?IR(i,t,c,a,l):IR(i,t,c,a)}return i}function IR(n,e,t,i,o){let r;n.hasOwnProperty(t)?(r=n[t]).push(e,i):r=n[t]=[e,i],o!==void 0&&r.push(o)}function LW(n,e,t){let i=e.directiveStart,o=e.directiveEnd,r=n.data,s=e.attrs,a=[],l=null,c=null;for(let d=i;d<o;d++){let f=r[d],p=t?t.get(f):null,g=p?p.inputs:null,w=p?p.outputs:null;l=TR(0,f.inputs,d,l,g),c=TR(1,f.outputs,d,c,w);let k=l!==null&&s!==null&&!CE(e)?JW(l,d,s):null;a.push(k)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function FW(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function VO(n,e,t,i,o,r,s,a){let l=Yi(e,t),c=e.inputs,d;!a&&c!=null&&(d=c[i])?(JE(n,t,d,i,o),jw(e)&&VW(t,e.index)):e.type&3?(i=FW(i),o=s!=null?s(o,e.value||"",i):o,r.setProperty(l,i,o)):e.type&12}function VW(n,e){let t=Js(e,n);t[ge]&16||(t[ge]|=64)}function BO(n,e,t,i){if(TN()){let o=i===null?null:{"":-1},r=jW(n,t),s,a;r===null?s=a=null:[s,a]=r,s!==null&&zO(n,e,t,s,o,a),o&&$W(t,i,o)}t.mergedAttrs=Ym(t.mergedAttrs,t.attrs)}function zO(n,e,t,i,o,r){for(let c=0;c<i.length;c++)_C(Ew(t,e),n,i[c].type);qW(t,n.data.length,i.length);for(let c=0;c<i.length;c++){let d=i[c];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,l=PO(n,e,i.length,null);for(let c=0;c<i.length;c++){let d=i[c];t.mergedAttrs=Ym(t.mergedAttrs,d.hostAttrs),GW(n,t,e,l,d),WW(l,d,o),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}LW(n,t,r)}function BW(n,e,t,i,o){let r=o.hostBindings;if(r){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;zW(s)!=a&&s.push(a),s.push(t,i,r)}}function zW(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function HW(n,e,t,i){let o=t.directiveStart,r=t.directiveEnd;jw(t)&&KW(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Ew(t,e),Ll(i,e);let s=t.initialInputs;for(let a=o;a<r;a++){let l=n.data[a],c=Ol(e,n,a,t);if(Ll(c,e),s!==null&&ZW(e,a-o,c,l,t,s),Gs(l)){let d=Js(t.index,e);d[In]=Ol(e,n,a,t)}}}function HO(n,e,t){let i=t.directiveStart,o=t.directiveEnd,r=t.index,s=n$();try{Rl(r);for(let a=i;a<o;a++){let l=n.data[a],c=e[a];kC(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&UW(l,c)}}finally{Rl(-1),kC(s)}}function UW(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jW(n,e){let t=n.directiveRegistry,i=null,o=null;if(t)for(let r=0;r<t.length;r++){let s=t[r];if(fj(e,s.selectors,!1))if(i||(i=[]),Gs(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),i.unshift(...a,s);let l=a.length;zC(n,e,l)}else i.unshift(s),zC(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,i,o),i.push(s)}return i===null?null:[i,o]}function zC(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function $W(n,e,t){if(e){let i=n.localNames=[];for(let o=0;o<e.length;o+=2){let r=t[e[o+1]];if(r==null)throw new F(-301,!1);i.push(e[o],r)}}}function WW(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;Gs(e)&&(t[""]=n)}}function qW(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function GW(n,e,t,i,o){n.data[i]=o;let r=o.factory||(o.factory=Tl(o.type,!0)),s=new Nl(r,Gs(o),Ge);n.blueprint[i]=s,t[i]=s,BW(n,e,i,PO(n,t,o.hostVars,nr),o)}function KW(n,e,t){let i=Yi(e,n),o=FO(t),r=n[Xo].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Jw(n,Yw(n,o,null,s,i,e,null,r.createRenderer(i,t),null,null,null));n[e.index]=a}function QW(n,e,t,i,o,r){let s=Yi(n,e);YW(e[Yt],s,r,n.value,t,i,o)}function YW(n,e,t,i,o,r,s){if(r==null)n.removeAttribute(e,o,t);else{let a=s==null?Bw(r):s(r,i||"",o);n.setAttribute(e,o,a,t)}}function ZW(n,e,t,i,o,r){let s=r[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],d=s[a++],f=s[a++];DO(i,t,l,c,d,f)}}function JW(n,e,t){let i=null,o=0;for(;o<t.length;){let r=t[o];if(r===0){o+=4;continue}else if(r===5){o+=2;continue}if(typeof r=="number")break;if(n.hasOwnProperty(r)){i===null&&(i=[]);let s=n[r];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(r,s[a+1],s[a+2],t[o+1]);break}}o+=2}return i}function UO(n,e,t,i){return[n,!0,0,e,null,i,null,t,null,null]}function jO(n,e){let t=n.contentQueries;if(t!==null){let i=je(null);try{for(let o=0;o<t.length;o+=2){let r=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];DE(r),a.contentQueries(2,e[s],s)}}}finally{je(i)}}}function Jw(n,e){return n[Xm]?n[dR][Co]=e:n[Xm]=e,n[dR]=e,e}function HC(n,e,t){DE(0);let i=je(null);try{e(n,t)}finally{je(i)}}function $O(n){return n[ww]??=[]}function WO(n){return n.cleanup??=[]}function qO(n,e){let t=n[$d],i=t?t.get(Br,null):null;i&&i.handleError(e)}function JE(n,e,t,i,o){for(let r=0;r<t.length;){let s=t[r++],a=t[r++],l=t[r++],c=e[s],d=n.data[s];DO(d,c,i,a,l,o)}}function XW(n,e,t){let i=_N(e,n);dW(n[Yt],i,t)}function eq(n,e){let t=Js(e,n),i=t[we];tq(i,t);let o=t[Ur];o!==null&&t[Jm]===null&&(t[Jm]=$E(o,t[$d])),XE(i,t,t[In])}function tq(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function XE(n,e,t){PE(e);try{let i=n.viewQuery;i!==null&&HC(1,i,t);let o=n.template;o!==null&&RO(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Vr]?.finishViewCreation(n),n.staticContentQueries&&jO(n,e),n.staticViewQueries&&HC(2,n.viewQuery,t);let r=n.components;r!==null&&nq(e,r)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[ge]&=-5,RE()}}function nq(n,e){for(let t=0;t<e.length;t++)eq(n,e[t])}function Xw(n,e,t,i){let o=je(null);try{let r=e.tView,a=n[ge]&4096?4096:16,l=Yw(n,r,t,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=n[e.index];l[Ml]=c;let d=n[Vr];return d!==null&&(l[Vr]=d.createEmbeddedView(r)),XE(r,l,t),l}finally{je(o)}}function GO(n,e){let t=Mn+e;if(t<n.length)return n[t]}function tf(n,e){return!e||e.firstChild===null||tO(n)}function e0(n,e,t,i=!0){let o=e[we];if(fW(o,e,n,t),i){let s=BC(t,n),a=e[Yt],l=xO(a,n[Dl]);l!==null&&hW(o,n[xo],a,e,l,s)}let r=e[Jm];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function KO(n,e){let t=ef(n,e);return t!==void 0&&Kw(t[we],t),t}function Tw(n,e,t,i,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let r=e[t.index];r!==null&&i.push(er(r)),jr(r)&&iq(r,i);let s=t.type;if(s&8)Tw(n,e,t.child,i);else if(s&32){let a=GE(t,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=AO(e,t);if(Array.isArray(a))i.push(...a);else{let l=Pl(e[Eo]);Tw(l[we],l,a,i,!0)}}t=o?t.projectionNext:t.next}return i}function iq(n,e){for(let t=Mn;t<n.length;t++){let i=n[t],o=i[we].firstChild;o!==null&&Tw(i[we],i,o,e)}n[Dl]!==n[Ur]&&e.push(n[Dl])}var QO=[];function oq(n){return n[Ki]??rq(n)}function rq(n){let e=QO.pop()??Object.create(aq);return e.lView=n,e}function sq(n){n.lView[Ki]!==n&&(n.lView=null,QO.push(n))}var aq=I(v({},Um),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Ww(n.lView)},consumerOnSignalRead(){this.lView[Ki]=this}});function lq(n){let e=n[Ki]??Object.create(cq);return e.lView=n,e}var cq=I(v({},Um),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Pl(n.lView);for(;e&&!YO(e[we]);)e=Pl(e);e&&SN(e)},consumerOnSignalRead(){this.lView[Ki]=this}});function YO(n){return n.type!==2}var dq=100;function ZO(n,e=!0,t=0){let i=n[Xo],o=i.rendererFactory,r=!1;r||o.begin?.();try{uq(n,t)}catch(s){throw e&&qO(n,s),s}finally{r||(o.end?.(),i.inlineEffectRunner?.flush())}}function uq(n,e){let t=DN();try{hR(!0),UC(n,e);let i=0;for(;$w(n);){if(i===dq)throw new F(103,!1);i++,UC(n,1)}}finally{hR(t)}}function hq(n,e,t,i){let o=e[ge];if((o&256)===256)return;let r=!1,s=!1;!r&&e[Xo].inlineEffectRunner?.flush(),PE(e);let a=!0,l=null,c=null;r||(YO(n)?(c=oq(e),l=Sb(c)):gP()===null?(a=!1,c=lq(e),l=Sb(c)):e[Ki]&&(I1(e[Ki]),e[Ki]=null));try{EN(e),Xj(n.bindingStartIndex),t!==null&&RO(n,e,t,2,i);let d=(o&3)===3;if(!r)if(d){let g=n.preOrderCheckHooks;g!==null&&cw(e,g,null)}else{let g=n.preOrderHooks;g!==null&&dw(e,g,0,null),Z1(e,0)}if(s||mq(e),JO(e,0),n.contentQueries!==null&&jO(n,e),!r)if(d){let g=n.contentCheckHooks;g!==null&&cw(e,g)}else{let g=n.contentHooks;g!==null&&dw(e,g,1),Z1(e,1)}TW(n,e);let f=n.components;f!==null&&e5(e,f,0);let p=n.viewQuery;if(p!==null&&HC(2,p,i),!r)if(d){let g=n.viewCheckHooks;g!==null&&cw(e,g)}else{let g=n.viewHooks;g!==null&&dw(e,g,2),Z1(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Y1]){for(let g of e[Y1])g();e[Y1]=null}r||(e[ge]&=-73)}catch(d){throw r||Ww(e),d}finally{c!==null&&(A1(c,l),a&&sq(c)),RE()}}function JO(n,e){for(let t=iO(n);t!==null;t=oO(t))for(let i=Mn;i<t.length;i++){let o=t[i];XO(o,e)}}function mq(n){for(let e=iO(n);e!==null;e=oO(e)){if(!(e[ge]&vw.HasTransplantedViews))continue;let t=e[Wd];for(let i=0;i<t.length;i++){let o=t[i];SN(o)}}}function fq(n,e,t){let i=Js(e,n);XO(i,t)}function XO(n,e){ME(n)&&UC(n,e)}function UC(n,e){let i=n[we],o=n[ge],r=n[Ki],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(r?.dirty&&T1(r)),s||=!1,r&&(r.dirty=!1),n[ge]&=-9217,s)hq(i,n,i.template,n[In]);else if(o&8192){JO(n,1);let a=i.components;a!==null&&e5(n,a,1)}}function e5(n,e,t){for(let i=0;i<e.length;i++)fq(n,e[i],t)}function eS(n,e){let t=DN()?64:1088;for(n[Xo].changeDetectionScheduler?.notify(e);n;){n[ge]|=t;let i=Pl(n);if(gC(n)&&!i)return n;n=i}return null}var Fl=class{get rootNodes(){let e=this._lView,t=e[we];return Tw(t,e,t.firstChild,[])}constructor(e,t,i=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(e){this._lView[In]=e}get destroyed(){return(this._lView[ge]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Dn];if(jr(e)){let t=e[kw],i=t?t.indexOf(this):-1;i>-1&&(ef(e,i),gw(t,i))}this._attachedToViewContainer=!1}Kw(this._lView[we],this._lView)}onDestroy(e){xN(this._lView,e)}markForCheck(){eS(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ge]&=-129}reattach(){wC(this._lView),this._lView[ge]|=128}detectChanges(){this._lView[ge]|=1024,ZO(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new F(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gC(this._lView),t=this._lView[Ml];t!==null&&!e&&KE(t,this._lView),CO(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new F(902,!1);this._appRef=e;let t=gC(this._lView),i=this._lView[Ml];i!==null&&!t&&EO(i,this._lView),wC(this._lView)}},Vl=(()=>{class n{static{this.__NG_ELEMENT_ID__=bq}}return n})(),pq=Vl,gq=class extends pq{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,i){let o=Xw(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:i});return new Fl(o)}};function bq(){return tS(pi(),qe())}function tS(n,e){return n.type&4?new gq(e,n,Xd(n,e)):null}var SEe=new RegExp(`^(\\d+)*(${B$}|${V$})*(.*)`);var wq=()=>null;function nf(n,e){return wq(n,e)}var Gd=class{},t0=new Z("",{providedIn:"root",factory:()=>!1});var t5=new Z(""),n5=new Z(""),jC=class{},Iw=class{};function kq(n){let e=Error(`No component factory found for ${jn(n)}.`);return e[vq]=n,e}var vq="ngComponent";var $C=class{resolveComponentFactory(e){throw kq(e)}},Kd=class{static{this.NULL=new $C}},Qs=class{},eu=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>yq()}}return n})();function yq(){let n=qe(),e=pi(),t=Js(e.index,n);return(Ws(t)?t:n)[Yt]}var _q=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>null})}}return n})();function WC(n,e,t){let i=t?n.styles:null,o=t?n.classes:null,r=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")r=a;else if(r==1)o=lC(o,a);else if(r==2){let l=a,c=e[++s];i=lC(i,l+": "+c+";")}}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=o:n.classesWithoutHost=o}var Mw=class extends Kd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Il(e);return new of(t,this.ngModule)}};function MR(n,e){let t=[];for(let i in n){if(!n.hasOwnProperty(i))continue;let o=n[i];if(o===void 0)continue;let r=Array.isArray(o),s=r?o[0]:o,a=r?o[1]:qs.None;e?t.push({propName:s,templateName:i,isSignal:(a&qs.SignalBased)!==0}):t.push({propName:s,templateName:i})}return t}function Cq(n){let e=n.toLowerCase();return e==="svg"?yN:e==="math"?Vj:null}var of=class extends Iw{get inputs(){let e=this.componentDef,t=e.inputTransforms,i=MR(e.inputs,!0);if(t!==null)for(let o of i)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return i}get outputs(){return MR(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=wj(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,o){let r=je(null);try{o=o||this.ngModule;let s=o instanceof ui?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new vC(e,s):e,l=a.get(Qs,null);if(l===null)throw new F(407,!1);let c=a.get(_q,null),d=a.get(Gd,null),f={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,changeDetectionScheduler:d},p=l.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",w=i?DW(p,i,this.componentDef.encapsulation,a):_O(p,g,Cq(g)),k=512;this.componentDef.signals?k|=4096:this.componentDef.onPush||(k|=16);let C=null;w!==null&&(C=$E(w,a,!0));let S=ZE(0,null,null,1,0,null,null,null,null,null,null),T=Yw(null,S,null,k,null,null,f,p,a,null,C);PE(T);let V,K,de=null;try{let O=this.componentDef,j,z=null;O.findHostDirectiveDefs?(j=[],z=new Map,O.findHostDirectiveDefs(O,j,z),j.push(O)):j=[O];let Ue=Eq(T,w);de=Sq(Ue,w,O,j,T,f,p),K=IE(S,hi),w&&Tq(p,O,w,i),t!==void 0&&Iq(K,this.ngContentSelectors,t),V=Aq(de,O,j,z,T,[Mq]),XE(S,T,null)}catch(O){throw de!==null&&IC(de),IC(T),O}finally{RE()}return new qC(this.componentType,V,Xd(K,T),T,K)}finally{je(r)}}},qC=class extends jC{constructor(e,t,i,o,r){super(),this.location=i,this._rootLView=o,this._tNode=r,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Fl(o,void 0,!1),this.componentType=e}setInput(e,t){let i=this._tNode.inputs,o;if(i!==null&&(o=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let r=this._rootLView;JE(r[we],r,o,e,t),this.previousInputValues.set(e,t);let s=Js(this._tNode.index,r);eS(s,1)}}get injector(){return new Al(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Eq(n,e){let t=n[we],i=hi;return n[i]=e,Zw(t,i,2,"#host",null)}function Sq(n,e,t,i,o,r,s){let a=o[we];xq(i,n,e,s);let l=null;e!==null&&(l=$E(e,o[$d]));let c=r.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Yw(o,FO(t),null,d,o[n.index],n,r,c,null,null,l);return a.firstCreatePass&&zC(a,n,i.length-1),Jw(o,f),o[n.index]=f}function xq(n,e,t,i){for(let o of n)e.mergedAttrs=Ym(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(WC(e,e.mergedAttrs,!0),t!==null&&IO(i,t,e))}function Aq(n,e,t,i,o,r){let s=pi(),a=o[we],l=Yi(s,o);zO(a,o,s,t,null,i);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,p=Ol(o,a,f,s);Ll(p,o)}HO(a,o,s),l&&Ll(l,o);let c=Ol(o,a,s.directiveStart+s.componentOffset,s);if(n[In]=o[In]=c,r!==null)for(let d of r)d(c,e);return NO(a,s,o),c}function Tq(n,e,t,i){if(i)hC(n,t,["ng-version","18.2.11"]);else{let{attrs:o,classes:r}=kj(e.selectors[0]);o&&hC(n,t,o),r&&r.length>0&&TO(n,t,r.join(" "))}}function Iq(n,e,t){let i=n.projection=[];for(let o=0;o<e.length;o++){let r=t[o];i.push(r!=null?Array.from(r):null)}}function Mq(){let n=pi();FE(qe()[we],n)}var ta=(()=>{class n{static{this.__NG_ELEMENT_ID__=Dq}}return n})();function Dq(){let n=pi();return o5(n,qe())}var Pq=ta,i5=class extends Pq{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Xd(this._hostTNode,this._hostLView)}get injector(){return new Al(this._hostTNode,this._hostLView)}get parentInjector(){let e=VE(this._hostTNode,this._hostLView);if(HN(e)){let t=_w(e,this._hostLView),i=yw(e),o=t[we].data[i+8];return new Al(o,t)}else return new Al(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=DR(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(e,t,i){let o,r;typeof i=="number"?o=i:i!=null&&(o=i.index,r=i.injector);let s=nf(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},r,s);return this.insertImpl(a,o,tf(this._hostTNode,s)),a}createComponent(e,t,i,o,r){let s=e&&!Nj(e),a;if(s)a=t;else{let w=t||{};a=w.index,i=w.injector,o=w.projectableNodes,r=w.environmentInjector||w.ngModuleRef}let l=s?e:new of(Il(e)),c=i||this.parentInjector;if(!r&&l.ngModule==null){let k=(s?c:this.parentInjector).get(ui,null);k&&(r=k)}let d=Il(l.componentType??{}),f=nf(this._lContainer,d?.id??null),p=f?.firstChild??null,g=l.create(c,o,p,r);return this.insertImpl(g.hostView,a,tf(this._hostTNode,f)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,i){let o=e._lView;if(zj(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=o[Dn],c=new i5(l,l[xo],l[Dn]);c.detach(c.indexOf(e))}}let r=this._adjustIndex(t),s=this._lContainer;return e0(s,o,r,i),e.attachToViewContainerRef(),XR(nC(s),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=DR(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),i=ef(this._lContainer,t);i&&(gw(nC(this._lContainer),t),Kw(i[we],i))}detach(e){let t=this._adjustIndex(e,-1),i=ef(this._lContainer,t);return i&&gw(nC(this._lContainer),t)!=null?new Fl(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function DR(n){return n[kw]}function nC(n){return n[kw]||(n[kw]=[])}function o5(n,e){let t,i=e[n.index];return jr(i)?t=i:(t=UO(i,e,null,n),e[n.index]=t,Jw(e,t)),Nq(t,e,n,i),new i5(t,n,e)}function Rq(n,e){let t=n[Yt],i=t.createComment(""),o=Yi(e,n),r=xO(t,o);return Aw(t,r,i,kW(t,o),!1),i}var Nq=Fq,Oq=()=>!1;function Lq(n,e,t){return Oq(n,e,t)}function Fq(n,e,t,i){if(n[Dl])return;let o;t.type&8?o=er(i):o=Rq(e,t),n[Dl]=o}var GC=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},KC=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let i=e.contentQueries!==null?e.contentQueries[0]:t.length,o=[];for(let r=0;r<i;r++){let s=t.getByIndex(r),a=this.queries[s.indexInDeclarationView];o.push(a.clone())}return new n(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)nS(e,t).matches!==null&&this.queries[t].setDirty()}},QC=class{constructor(e,t,i=null){this.flags=t,this.read=i,typeof e=="string"?this.predicate=Wq(e):this.predicate=e}},YC=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){let o=t!==null?t.length:0,r=this.getByIndex(i).embeddedTView(e,o);r&&(r.indexInDeclarationView=i,t!==null?t.push(r):t=[r])}return t!==null?new n(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ZC=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==t;)i=i.parent;return t===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let i=this.metadata.predicate;if(Array.isArray(i))for(let o=0;o<i.length;o++){let r=i[o];this.matchTNodeWithReadOption(e,t,Vq(t,r)),this.matchTNodeWithReadOption(e,t,uw(t,e,r,!1,!1))}else i===Vl?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,uw(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(i!==null){let o=this.metadata.read;if(o!==null)if(o===Zi||o===ta||o===Vl&&t.type&4)this.addMatch(t.index,-2);else{let r=uw(t,e,o,!1,!1);r!==null&&this.addMatch(t.index,r)}else this.addMatch(t.index,i)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Vq(n,e){let t=n.localNames;if(t!==null){for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1]}return null}function Bq(n,e){return n.type&11?Xd(n,e):n.type&4?tS(n,e):null}function zq(n,e,t,i){return t===-1?Bq(e,n):t===-2?Hq(n,e,i):Ol(n,n[we],t,e)}function Hq(n,e,t){if(t===Zi)return Xd(e,n);if(t===Vl)return tS(e,n);if(t===ta)return o5(e,n)}function r5(n,e,t,i){let o=e[Vr].queries[i];if(o.matches===null){let r=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let d=r[c];a.push(zq(e,d,s[l+1],t.metadata.read))}}o.matches=a}return o.matches}function JC(n,e,t,i){let o=n.queries.getByIndex(t),r=o.matches;if(r!==null){let s=r5(n,e,o,t);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)i.push(s[a/2]);else{let c=r[a+1],d=e[-l];for(let f=Mn;f<d.length;f++){let p=d[f];p[Ml]===p[Dn]&&JC(p[we],p,c,i)}if(d[Wd]!==null){let f=d[Wd];for(let p=0;p<f.length;p++){let g=f[p];JC(g[we],g,c,i)}}}}}return i}function Uq(n,e){return n[Vr].queries[e].queryList}function jq(n,e,t){let i=new TC((t&4)===4);return NW(n,e,i,i.destroy),(e[Vr]??=new KC).queries.push(new GC(i))-1}function $q(n,e,t){let i=hn();return i.firstCreatePass&&(qq(i,new QC(n,e,t),-1),(e&2)===2&&(i.staticViewQueries=!0)),jq(i,qe(),e)}function Wq(n){return n.split(",").map(e=>e.trim())}function qq(n,e,t){n.queries===null&&(n.queries=new YC),n.queries.track(new ZC(e,t))}function nS(n,e){return n.queries.getByIndex(e)}function Gq(n,e){let t=n[we],i=nS(t,e);return i.crossesNgTemplate?JC(t,n,e,[]):r5(t,n,i,e)}var PR=new Set;function Gr(n){PR.has(n)||(PR.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Kq(n){return typeof n=="function"&&n[Or]!==void 0}function n0(n,e){Gr("NgSignals");let t=AP(n),i=t[Or];return e?.equal&&(i.equal=e.equal),t.set=o=>M1(i,o),t.update=o=>TP(i,o),t.asReadonly=Qq.bind(t),t}function Qq(){let n=this[Or];if(n.readonlyFn===void 0){let e=()=>this();e[Or]=n,n.readonlyFn=e}return n.readonlyFn}function s5(n){return Kq(n)&&typeof n.set=="function"}function Yq(n){return Object.getPrototypeOf(n.prototype).constructor}function me(n){let e=Yq(n.type),t=!0,i=[n];for(;e;){let o;if(Gs(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new F(903,!1);o=e.\u0275dir}if(o){if(t){i.push(o);let s=n;s.inputs=rw(n.inputs),s.inputTransforms=rw(n.inputTransforms),s.declaredInputs=rw(n.declaredInputs),s.outputs=rw(n.outputs);let a=o.hostBindings;a&&tG(n,a);let l=o.viewQuery,c=o.contentQueries;if(l&&Xq(n,l),c&&eG(n,c),Zq(n,o),VU(n.outputs,o.outputs),Gs(o)&&o.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(o.data.animation)}}let r=o.features;if(r)for(let s=0;s<r.length;s++){let a=r[s];a&&a.ngInherit&&a(n),a===me&&(t=!1)}}e=Object.getPrototypeOf(e)}Jq(i)}function Zq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let i=e.inputs[t];if(i!==void 0&&(n.inputs[t]=i,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function Jq(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){let o=n[i];o.hostVars=e+=o.hostVars,o.hostAttrs=Ym(o.hostAttrs,t=Ym(t,o.hostAttrs))}}function rw(n){return n===Hd?{}:n===di?[]:n}function Xq(n,e){let t=n.viewQuery;t?n.viewQuery=(i,o)=>{e(i,o),t(i,o)}:n.viewQuery=e}function eG(n,e){let t=n.contentQueries;t?n.contentQueries=(i,o,r)=>{e(i,o,r),t(i,o,r)}:n.contentQueries=e}function tG(n,e){let t=n.hostBindings;t?n.hostBindings=(i,o)=>{e(i,o),t(i,o)}:n.hostBindings=e}var Ys=class{},rf=class{};var XC=class extends Ys{constructor(e,t,i,o=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mw(this);let r=aN(e);this._bootstrapComponents=yO(r.bootstrap),this._r3Injector=YN(e,t,[{provide:Ys,useValue:this},{provide:Kd,useValue:this.componentFactoryResolver},...i],jn(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},eE=class extends rf{constructor(e){super(),this.moduleType=e}create(e){return new XC(this.moduleType,e,[])}};var Dw=class extends Ys{constructor(e){super(),this.componentFactoryResolver=new Mw(this),this.instance=null;let t=new Zm([...e.providers,{provide:Ys,useValue:this},{provide:Kd,useValue:this.componentFactoryResolver}],e.parent||AE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function iS(n,e,t=null){return new Dw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function a5(n){return iG(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),i;for(;!(i=t.next()).done;)e(i.value)}}function iG(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function oG(n,e,t){return n[e]=t}function Kr(n,e,t){let i=n[e];return Object.is(i,t)?!1:(n[e]=t,!0)}function rG(n){return(n.flags&32)===32}function sG(n,e,t,i,o,r,s,a,l){let c=e.consts,d=Zw(e,n,4,s||null,a||null);BO(e,t,d,qd(c,l)),FE(e,d);let f=d.tView=ZE(2,d,i,o,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function tE(n,e,t,i,o,r,s,a,l,c){let d=t+hi,f=e.firstCreatePass?sG(d,e,n,i,o,r,s,a,l):e.data[d];cf(f,!1);let p=aG(e,n,f,t);OE()&&QE(e,n,p,f),Ll(p,n);let g=UO(p,n,p,f);return n[d]=g,Jw(n,g),Lq(g,f,n),TE(f)&&OO(e,n,f),l!=null&&LO(n,f,c),f}function Ii(n,e,t,i,o,r,s,a){let l=qe(),c=hn(),d=qd(c.consts,r);return tE(l,c,n,e,t,i,o,d,s,a),Ii}var aG=lG;function lG(n,e,t,i){return LE(!0),e[Yt].createComment("")}var Gm=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Gm||{}),cG=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}}return n})(),RR=class n{constructor(){this.ngZone=L(ot),this.scheduler=L(Gd),this.errorHandler=L(Br,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Gm.EarlyRead,Gm.Write,Gm.MixedReadWrite,Gm.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(i){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=G({token:n,providedIn:"root",factory:()=>new n})}};function tu(n,e,t,i){let o=qe(),r=Jd();if(Kr(o,r,e)){let s=hn(),a=NE();QW(a,o,n,e,t,i)}return tu}function l5(n,e,t,i){return Kr(n,Jd(),t)?e+Bw(t)+i:nr}function sw(n,e){return n<<17|e<<2}function Bl(n){return n>>17&32767}function dG(n){return(n&2)==2}function uG(n,e){return n&131071|e<<17}function nE(n){return n|2}function Qd(n){return(n&131068)>>2}function iC(n,e){return n&-131069|e<<2}function hG(n){return(n&1)===1}function iE(n){return n|1}function mG(n,e,t,i,o,r){let s=r?e.classBindings:e.styleBindings,a=Bl(s),l=Qd(s);n[i]=t;let c=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||lf(f,d)>0)&&(c=!0)}else d=t;if(o)if(l!==0){let p=Bl(n[a+1]);n[i+1]=sw(p,a),p!==0&&(n[p+1]=iC(n[p+1],i)),n[a+1]=uG(n[a+1],i)}else n[i+1]=sw(a,0),a!==0&&(n[a+1]=iC(n[a+1],i)),a=i;else n[i+1]=sw(l,0),a===0?a=i:n[l+1]=iC(n[l+1],i),l=i;c&&(n[i+1]=nE(n[i+1])),NR(n,d,i,!0),NR(n,d,i,!1),fG(e,d,n,i,r),s=sw(a,l),r?e.classBindings=s:e.styleBindings=s}function fG(n,e,t,i,o){let r=o?n.residualClasses:n.residualStyles;r!=null&&typeof e=="string"&&lf(r,e)>=0&&(t[i+1]=iE(t[i+1]))}function NR(n,e,t,i){let o=n[t+1],r=e===null,s=i?Bl(o):Qd(o),a=!1;for(;s!==0&&(a===!1||r);){let l=n[s],c=n[s+1];pG(l,e)&&(a=!0,n[s+1]=i?iE(c):nE(c)),s=i?Bl(c):Qd(c)}a&&(n[t+1]=i?nE(o):iE(o))}function pG(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?lf(n,e)>=0:!1}var _o={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function gG(n){return n.substring(_o.key,_o.keyEnd)}function bG(n){return wG(n),c5(n,d5(n,0,_o.textEnd))}function c5(n,e){let t=_o.textEnd;return t===e?-1:(e=_o.keyEnd=kG(n,_o.key=e,t),d5(n,e,t))}function wG(n){_o.key=0,_o.keyEnd=0,_o.value=0,_o.valueEnd=0,_o.textEnd=n.length}function d5(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function kG(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function $n(n,e,t){let i=qe(),o=Jd();if(Kr(i,o,e)){let r=hn(),s=NE();VO(r,s,i,n,e,i[Yt],t,!1)}return $n}function oE(n,e,t,i,o){let r=e.inputs,s=o?"class":"style";JE(n,t,r[s],s,i)}function uf(n,e){return yG(n,e,null,!0),uf}function vG(n,e){for(let t=bG(e);t>=0;t=c5(e,t))_E(n,gG(e),!0)}function yG(n,e,t,i){let o=qe(),r=hn(),s=PN(2);if(r.firstUpdatePass&&h5(r,n,s,i),e!==nr&&Kr(o,s,e)){let a=r.data[Xs()];m5(r,a,o,o[Yt],n,o[s+1]=IG(e,t),i,s)}}function _G(n,e,t,i){let o=hn(),r=PN(2);o.firstUpdatePass&&h5(o,null,r,i);let s=qe();if(t!==nr&&Kr(s,r,t)){let a=o.data[Xs()];if(f5(a,i)&&!u5(o,r)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=lC(l,t||"")),oE(o,a,s,t,i)}else TG(o,a,s,s[Yt],s[r+1],s[r+1]=AG(n,e,t),i,r)}}function u5(n,e){return e>=n.expandoStartIndex}function h5(n,e,t,i){let o=n.data;if(o[t+1]===null){let r=o[Xs()],s=u5(n,t);f5(r,i)&&e===null&&!s&&(e=!1),e=CG(o,r,e,i),mG(o,r,e,t,s,i)}}function CG(n,e,t,i){let o=i$(n),r=i?e.residualClasses:e.residualStyles;if(o===null)(i?e.classBindings:e.styleBindings)===0&&(t=oC(null,n,e,t,i),t=sf(t,e.attrs,i),r=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=oC(o,n,e,t,i),r===null){let l=EG(n,e,i);l!==void 0&&Array.isArray(l)&&(l=oC(null,n,e,l[1],i),l=sf(l,e.attrs,i),SG(n,e,i,l))}else r=xG(n,e,i)}return r!==void 0&&(i?e.residualClasses=r:e.residualStyles=r),t}function EG(n,e,t){let i=t?e.classBindings:e.styleBindings;if(Qd(i)!==0)return n[Bl(i)]}function SG(n,e,t,i){let o=t?e.classBindings:e.styleBindings;n[Bl(o)]=i}function xG(n,e,t){let i,o=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<o;r++){let s=n[r].hostAttrs;i=sf(i,s,t)}return sf(i,e.attrs,t)}function oC(n,e,t,i,o){let r=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(r=e[a],i=sf(i,r.hostAttrs,o),r!==n);)a++;return n!==null&&(t.directiveStylingLast=a),i}function sf(n,e,t){let i=t?1:2,o=-1;if(e!==null)for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?o=s:o===i&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),_E(n,s,t?!0:e[++r]))}return n===void 0?null:n}function AG(n,e,t){if(t==null||t==="")return di;let i=[],o=tr(t);if(Array.isArray(o))for(let r=0;r<o.length;r++)n(i,o[r],!0);else if(typeof o=="object")for(let r in o)o.hasOwnProperty(r)&&n(i,r,o[r]);else typeof o=="string"&&e(i,o);return i}function TG(n,e,t,i,o,r,s,a){o===nr&&(o=di);let l=0,c=0,d=0<o.length?o[0]:null,f=0<r.length?r[0]:null;for(;d!==null||f!==null;){let p=l<o.length?o[l+1]:void 0,g=c<r.length?r[c+1]:void 0,w=null,k;d===f?(l+=2,c+=2,p!==g&&(w=f,k=g)):f===null||d!==null&&d<f?(l+=2,w=d):(c+=2,w=f,k=g),w!==null&&m5(n,e,t,i,w,k,s,a),d=l<o.length?o[l]:null,f=c<r.length?r[c]:null}}function m5(n,e,t,i,o,r,s,a){if(!(e.type&3))return;let l=n.data,c=l[a+1],d=hG(c)?OR(l,e,t,o,Qd(c),s):void 0;if(!Pw(d)){Pw(r)||dG(c)&&(r=OR(l,null,t,o,a,s));let f=_N(Xs(),t);xW(i,s,f,o,r)}}function OR(n,e,t,i,o,r){let s=e===null,a;for(;o>0;){let l=n[o],c=Array.isArray(l),d=c?l[1]:l,f=d===null,p=t[o+1];p===nr&&(p=f?di:void 0);let g=f?K1(p,i):d===i?p:void 0;if(c&&!Pw(g)&&(g=K1(l,i)),Pw(g)&&(a=g,s))return a;let w=n[o+1];o=s?Bl(w):Qd(w)}if(e!==null){let l=r?e.residualClasses:e.residualStyles;l!=null&&(a=K1(l,i))}return a}function Pw(n){return n!==void 0}function IG(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=jn(tr(n)))),n}function f5(n,e){return(n.flags&(e?8:16))!==0}function oS(n,e,t){let i=qe(),o=l5(i,n,e,t);_G(_E,vG,o,!0)}var rE=class{destroy(e){}updateValue(e,t){}swap(e,t){let i=Math.min(e,t),o=Math.max(e,t),r=this.detach(o);if(o-i>1){let s=this.detach(i);this.attach(i,r),this.attach(o,s)}else this.attach(i,r)}move(e,t){this.attach(t,this.detach(e))}};function rC(n,e,t,i,o){return n===t&&Object.is(e,i)?1:Object.is(o(n,e),o(t,i))?-1:0}function MG(n,e,t){let i,o,r=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;r<=s&&r<=l;){let c=n.at(r),d=e[r],f=rC(r,c,r,d,t);if(f!==0){f<0&&n.updateValue(r,d),r++;continue}let p=n.at(s),g=e[l],w=rC(s,p,l,g,t);if(w!==0){w<0&&n.updateValue(s,g),s--,l--;continue}let k=t(r,c),C=t(s,p),S=t(r,d);if(Object.is(S,C)){let T=t(l,g);Object.is(T,k)?(n.swap(r,s),n.updateValue(s,g),l--,s--):n.move(s,r),n.updateValue(r,d),r++;continue}if(i??=new Rw,o??=FR(n,r,s,t),sE(n,i,r,S))n.updateValue(r,d),r++,s++;else if(o.has(S))i.set(k,n.detach(r)),s--;else{let T=n.create(r,e[r]);n.attach(r,T),r++,s++}}for(;r<=l;)LR(n,i,t,r,e[r]),r++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&r<=s;){let d=n.at(r),f=c.value,p=rC(r,d,r,f,t);if(p!==0)p<0&&n.updateValue(r,f),r++,c=l.next();else{i??=new Rw,o??=FR(n,r,s,t);let g=t(r,f);if(sE(n,i,r,g))n.updateValue(r,f),r++,s++,c=l.next();else if(!o.has(g))n.attach(r,n.create(r,f)),r++,s++,c=l.next();else{let w=t(r,d);i.set(w,n.detach(r)),s--}}}for(;!c.done;)LR(n,i,t,n.length,c.value),c=l.next()}for(;r<=s;)n.destroy(n.detach(s--));i?.forEach(l=>{n.destroy(l)})}function sE(n,e,t,i){return e!==void 0&&e.has(i)?(n.attach(t,e.get(i)),e.delete(i),!0):!1}function LR(n,e,t,i,o){if(sE(n,e,i,t(i,o)))n.updateValue(i,o);else{let r=n.create(i,o);n.attach(i,r)}}function FR(n,e,t,i){let o=new Set;for(let r=e;r<=t;r++)o.add(i(r,n.at(r)));return o}var Rw=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(i);)i=o.get(i);o.set(i,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,i]of this.kvMap)if(e(i,t),this._vMap!==void 0){let o=this._vMap;for(;o.has(i);)i=o.get(i),e(i,t)}}};function hf(n,e){Gr("NgControlFlow");let t=qe(),i=Jd(),o=t[i]!==nr?t[i]:-1,r=o!==-1?Nw(t,hi+o):void 0,s=0;if(Kr(t,i,n)){let a=je(null);try{if(r!==void 0&&KO(r,s),n!==-1){let l=hi+n,c=Nw(t,l),d=dE(t[we],l),f=nf(c,d.tView.ssrId),p=Xw(t,d,e,{dehydratedView:f});e0(c,p,s,tf(d,f))}}finally{je(a)}}else if(r!==void 0){let a=GO(r,s);a!==void 0&&(a[In]=e)}}var aE=class{constructor(e,t,i){this.lContainer=e,this.$implicit=t,this.$index=i}get $count(){return this.lContainer.length-Mn}};function mf(n){return n}var lE=class{constructor(e,t,i){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=i}};function ff(n,e,t,i,o,r,s,a,l,c,d,f,p){Gr("NgControlFlow");let g=qe(),w=hn(),k=l!==void 0,C=qe(),S=a?s.bind(C[Eo][In]):s,T=new lE(k,S);C[hi+n]=T,tE(g,w,n+1,e,t,i,o,qd(w.consts,r)),k&&tE(g,w,n+2,l,c,d,f,qd(w.consts,p))}var cE=class extends rE{constructor(e,t,i){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Mn}at(e){return this.getLView(e)[In].$implicit}attach(e,t){let i=t[Jm];this.needsIndexUpdate||=e!==this.length,e0(this.lContainer,t,e,tf(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,DG(this.lContainer,e)}create(e,t){let i=nf(this.lContainer,this.templateTNode.tView.ssrId),o=Xw(this.hostLView,this.templateTNode,new aE(this.lContainer,t,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),o}destroy(e){Kw(e[we],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[In].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[In].$index=e}getLView(e){return PG(this.lContainer,e)}};function pf(n){let e=je(null),t=Xs();try{let i=qe(),o=i[we],r=i[t],s=t+1,a=Nw(i,s);if(r.liveCollection===void 0){let c=dE(o,s);r.liveCollection=new cE(a,i,c)}else r.liveCollection.reset();let l=r.liveCollection;if(MG(l,n,r.trackByFn),l.updateIndexes(),r.hasEmptyBlock){let c=Jd(),d=l.length===0;if(Kr(i,c,d)){let f=t+2,p=Nw(i,f);if(d){let g=dE(o,f),w=nf(p,g.tView.ssrId),k=Xw(i,g,void 0,{dehydratedView:w});e0(p,k,0,tf(g,w))}else KO(p,0)}}}finally{je(e)}}function Nw(n,e){return n[e]}function DG(n,e){return ef(n,e)}function PG(n,e){return GO(n,e)}function dE(n,e){return IE(n,e)}function RG(n,e,t,i,o,r){let s=e.consts,a=qd(s,o),l=Zw(e,n,2,i,a);return BO(e,t,l,qd(s,r)),l.attrs!==null&&WC(l,l.attrs,!1),l.mergedAttrs!==null&&WC(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function u(n,e,t,i){let o=qe(),r=hn(),s=hi+n,a=o[Yt],l=r.firstCreatePass?RG(s,r,o,e,t,i):r.data[s],c=NG(r,o,l,a,e,n);o[s]=c;let d=TE(l);return cf(l,!0),IO(a,c,l),!rG(l)&&OE()&&QE(r,o,c,l),jj()===0&&Ll(c,o),$j(),d&&(OO(r,o,l),NO(r,l,o)),i!==null&&LO(o,l),u}function h(){let n=pi();MN()?Yj():(n=n.parent,cf(n,!1));let e=n;Gj(e)&&Kj(),Wj();let t=hn();return t.firstCreatePass&&(FE(t,n),gN(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&u$(e)&&oE(t,e,qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&h$(e)&&oE(t,e,qe(),e.stylesWithoutHost,!1),h}function b(n,e,t,i){return u(n,e,t,i),h(),b}var NG=(n,e,t,i,o,r)=>(LE(!0),_O(i,o,a$()));function Ul(){return qe()}var Ow="en-US";var OG=Ow;function LG(n){typeof n=="string"&&(OG=n.toLowerCase().replace(/_/g,"-"))}var FG=(n,e,t)=>{};function R(n,e,t,i){let o=qe(),r=hn(),s=pi();return p5(r,o,o[Yt],s,n,e,i),R}function VG(n,e,t,i){let o=n.cleanup;if(o!=null)for(let r=0;r<o.length-1;r+=2){let s=o[r];if(s===t&&o[r+1]===i){let a=e[ww],l=o[r+2];return a.length>l?a[l]:null}typeof s=="string"&&(r+=2)}return null}function p5(n,e,t,i,o,r,s){let a=TE(i),c=n.firstCreatePass&&WO(n),d=e[In],f=$O(e),p=!0;if(i.type&3||s){let k=Yi(i,e),C=s?s(k):k,S=f.length,T=s?K=>s(er(K[i.index])):i.index,V=null;if(!s&&a&&(V=VG(n,e,o,i.index)),V!==null){let K=V.__ngLastListenerFn__||V;K.__ngNextListenerFn__=r,V.__ngLastListenerFn__=r,p=!1}else{r=BR(i,e,d,r),FG(k,o,r);let K=t.listen(C,o,r);f.push(r,K),c&&c.push(o,T,S,S+1)}}else r=BR(i,e,d,r);let g=i.outputs,w;if(p&&g!==null&&(w=g[o])){let k=w.length;if(k)for(let C=0;C<k;C+=2){let S=w[C],T=w[C+1],de=e[S][T].subscribe(r),O=f.length;f.push(r,de),c&&c.push(o,i.index,O,-(O+1))}}}function VR(n,e,t,i){let o=je(null);try{return Yo(6,e,t),t(i)!==!1}catch(r){return qO(n,r),!1}finally{Yo(7,e,t),je(o)}}function BR(n,e,t,i){return function o(r){if(r===Function)return i;let s=n.componentOffset>-1?Js(n.index,e):e;eS(s,5);let a=VR(e,t,i,r),l=o.__ngNextListenerFn__;for(;l;)a=VR(e,t,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Mo(n=1){return r$(n)}function g5(n,e,t){$q(n,e,t)}function rS(n){let e=qe(),t=hn(),i=RN();DE(i+1);let o=nS(t,i);if(n.dirty&&Bj(e)===((o.metadata.flags&2)===2)){if(o.matches===null)n.reset([]);else{let r=Gq(e,i);n.reset(r,P$),n.notifyOnChanges()}return!0}return!1}function sS(){return Uq(qe(),RN())}function BG(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}function b5(n){let e=Zj();return CN(e,hi+n)}function m(n,e=""){let t=qe(),i=hn(),o=n+hi,r=i.firstCreatePass?Zw(i,o,1,e,null):i.data[o],s=zG(i,t,r,e,n);t[o]=s,OE()&&QE(i,t,s,r),cf(r,!1)}var zG=(n,e,t,i,o)=>(LE(!0),cW(e[Yt],i));function Qr(n){return Yr("",n,""),Qr}function Yr(n,e,t){let i=qe(),o=l5(i,n,e,t);return o!==nr&&XW(i,Xs(),o),Yr}function i0(n,e,t){s5(e)&&(e=e());let i=qe(),o=Jd();if(Kr(i,o,e)){let r=hn(),s=NE();VO(r,s,i,n,e,i[Yt],t,!1)}return i0}function aS(n,e){let t=s5(n);return t&&n.set(e),t}function o0(n,e){let t=qe(),i=hn(),o=pi();return p5(i,t,t[Yt],o,n,e),o0}function HG(n,e,t){let i=hn();if(i.firstCreatePass){let o=Gs(n);uE(t,i.data,i.blueprint,o,!0),uE(e,i.data,i.blueprint,o,!1)}}function uE(n,e,t,i,o){if(n=Un(n),Array.isArray(n))for(let r=0;r<n.length;r++)uE(n[r],e,t,i,o);else{let r=hn(),s=qe(),a=pi(),l=jd(n)?n:Un(n.provide),c=mN(n),d=a.providerIndexes&1048575,f=a.directiveStart,p=a.providerIndexes>>20;if(jd(n)||!n.multi){let g=new Nl(c,o,Ge),w=aC(l,e,o?d:d+p,f);w===-1?(_C(Ew(a,s),r,l),sC(r,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[w]=g,s[w]=g)}else{let g=aC(l,e,d+p,f),w=aC(l,e,d,d+p),k=g>=0&&t[g],C=w>=0&&t[w];if(o&&!C||!o&&!k){_C(Ew(a,s),r,l);let S=$G(o?jG:UG,t.length,o,i,c);!o&&C&&(t[w].providerFactory=S),sC(r,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(S),s.push(S)}else{let S=w5(t[o?w:g],c,!o&&i);sC(r,n,g>-1?g:w,S)}!o&&i&&C&&t[w].componentProviders++}}}function sC(n,e,t,i){let o=jd(e),r=xj(e);if(o||r){let l=(r?Un(e.useClass):e).prototype.ngOnDestroy;if(l){let c=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let d=c.indexOf(t);d===-1?c.push(t,[i,l]):c[d+1].push(i,l)}else c.push(t,l)}}}function w5(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function aC(n,e,t,i){for(let o=t;o<i;o++)if(e[o]===n)return o;return-1}function UG(n,e,t,i){return hE(this.multi,[])}function jG(n,e,t,i){let o=this.multi,r;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ol(t,t[we],this.providerFactory.index,i);r=a.slice(0,s),hE(o,r);for(let l=s;l<a.length;l++)r.push(a[l])}else r=[],hE(o,r);return r}function hE(n,e){for(let t=0;t<n.length;t++){let i=n[t];e.push(i())}return e}function $G(n,e,t,i,o){let r=new Nl(n,t,Ge);return r.multi=[],r.index=e,r.componentProviders=0,w5(r,o,i&&!t),r}function gf(n,e=[]){return t=>{t.providersResolver=(i,o)=>HG(i,o?o(n):n,e)}}var WG=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let i=dN(!1,t.type),o=i.length>0?iS([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=G({token:n,providedIn:"environment",factory:()=>new n($(ui))})}}return n})();function le(n){Gr("NgStandalone"),n.getStandaloneInjector=e=>e.get(WG).getOrCreateStandaloneInjector(n)}function qG(n,e){let t=n[e];return t===nr?void 0:t}function GG(n,e,t,i,o,r){let s=e+t;return Kr(n,s,o)?oG(n,s+1,r?i.call(r,o):i(o)):qG(n,s+1)}function k5(n,e){let t=hn(),i,o=n+hi;t.firstCreatePass?(i=KG(e,t.pipeRegistry),t.data[o]=i,i.onDestroy&&(t.destroyHooks??=[]).push(o,i.onDestroy)):i=t.data[o];let r=i.factory||(i.factory=Tl(i.type,!0)),s,a=ci(Ge);try{let l=Cw(!1),c=r();return Cw(l),BG(t,qe(),o,c),c}finally{ci(a)}}function KG(n,e){if(e)for(let t=e.length-1;t>=0;t--){let i=e[t];if(n===i.name)return i}}function v5(n,e,t){let i=n+hi,o=qe(),r=CN(o,i);return QG(o,i)?GG(o,Jj(),e,r.transform,t,r):r.transform(t)}function QG(n,e){return n[we].data[e].pure}var r0=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var lS=new Z(""),bf=new Z(""),s0=(()=>{class n{constructor(t,i,o){this._ngZone=t,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,cS||(YG(o),o.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(t)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,o){let r=-1;i&&i>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==r),t()},i)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:o})}whenStable(t,i,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,o),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,o){return[]}static{this.\u0275fac=function(i){return new(i||n)($(ot),$(a0),$(bf))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),a0=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return cS?.findTestabilityInTree(this,t,i)??null}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function YG(n){cS=n}var cS;function jl(n){return!!n&&typeof n.then=="function"}function y5(n){return!!n&&typeof n.subscribe=="function"}var _5=new Z(""),C5=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,i)=>{this.resolve=t,this.reject=i}),this.appInits=L(_5,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let r=o();if(jl(r))t.push(r);else if(y5(r)){let s=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{i()}).catch(o=>{this.reject(o)}),t.length===0&&i(),this.initialized=!0}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),l0=new Z("");function ZG(){xP(()=>{throw new F(600,!1)})}function JG(n){return n.isBoundToModule}var XG=10;function eK(n,e,t){try{let i=t();return jl(i)?i.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}var Zr=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(M$),this.afterRenderManager=L(cG),this.zonelessEnabled=L(t0),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new At,this.afterTick=new At,this.componentTypes=[],this.components=[],this.isStable=L($r).hasPendingTasks.pipe(he(t=>!t)),this._injector=L(ui)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(i=>{t=this.isStable.subscribe({next:o=>{o&&i()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,i){let o=t instanceof Iw;if(!this._injector.get(C5).done){let p=!o&&sN(t),g=!1;throw new F(405,g)}let s;o?s=t:s=this._injector.get(Kd).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=JG(s)?void 0:this._injector.get(Ys),l=i||s.selector,c=s.create(Ks.NULL,[],l,a),d=c.location.nativeElement,f=c.injector.get(lS,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),hw(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new F(101,!1);let t=je(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,je(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Qs,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<XG;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:o,notifyErrorHandler:r}of this._views)tK(o,r,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>$w(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){let i=t;hw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let i=this._injector.get(l0,[]);[...this._bootstrapListeners,...i].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new F(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function hw(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function tK(n,e,t,i){if(!t&&!$w(n))return;ZO(n,e,t&&!i?0:1)}var mE=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},dS=(()=>{class n{compileModuleSync(t){return new eE(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let i=this.compileModuleSync(t),o=aN(t),r=yO(o.declarations).reduce((s,a)=>{let l=Il(a);return l&&s.push(new of(l)),s},[]);return new mE(i,r)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var nK=(()=>{class n{constructor(){this.zone=L(ot),this.changeDetectionScheduler=L(Gd),this.applicationRef=L(Zr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iK=new Z("",{factory:()=>!1});function E5({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ot(I(v({},x5()),{scheduleInRootZone:t})),[{provide:ot,useFactory:n},{provide:Ud,multi:!0,useFactory:()=>{let i=L(nK,{optional:!0});return()=>i.initialize()}},{provide:Ud,multi:!0,useFactory:()=>{let i=L(oK);return()=>{i.initialize()}}},e===!0?{provide:t5,useValue:!0}:[],{provide:n5,useValue:t??ZN}]}function S5(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,i=E5({ngZoneFactory:()=>{let o=x5(n);return o.scheduleInRootZone=t,o.shouldCoalesceEventChangeDetection&&Gr("NgZone_CoalesceEvent"),new ot(o)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Yd([{provide:iK,useValue:!0},{provide:t0,useValue:!1},i])}function x5(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var oK=(()=>{class n{constructor(){this.subscription=new zt,this.initialized=!1,this.zone=L(ot),this.pendingTasks=L($r)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ot.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ot.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var rK=(()=>{class n{constructor(){this.appRef=L(Zr),this.taskService=L($r),this.ngZone=L(ot),this.zonelessEnabled=L(t0),this.disableScheduling=L(t5,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new zt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(xw):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(n5,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof AC||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?bR:XN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(xw+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(t),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,bR(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function sK(){return typeof $localize<"u"&&$localize.locale||Ow}var uS=new Z("",{providedIn:"root",factory:()=>L(uS,Re.Optional|Re.SkipSelf)||sK()});var fE=new Z("");function aw(n){return!n.moduleRef}function aK(n){let e=aw(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ot);return t.run(()=>{aw(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let i=e.get(Br,null),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:r=>{i.handleError(r)}})}),aw(n)){let r=()=>e.destroy(),s=n.platformInjector.get(fE);s.add(r),e.onDestroy(()=>{o.unsubscribe(),s.delete(r)})}else{let r=()=>n.moduleRef.destroy(),s=n.platformInjector.get(fE);s.add(r),n.moduleRef.onDestroy(()=>{hw(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(r)})}return eK(i,t,()=>{let r=e.get(C5);return r.runInitializers(),r.donePromise.then(()=>{let s=e.get(uS,Ow);if(LG(s||Ow),aw(n)){let a=e.get(Zr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return lK(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function lK(n,e){let t=n.injector.get(Zr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>t.bootstrap(i));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new F(-403,!1);e.push(n)}var mw=null;function cK(n=[],e){return Ks.create({name:e,providers:[{provide:Hw,useValue:"platform"},{provide:fE,useValue:new Set([()=>mw=null])},...n]})}function dK(n=[]){if(mw)return mw;let e=cK(n);return mw=e,ZG(),uK(e),e}function uK(n){n.get(HE,null)?.forEach(t=>t())}var $l=(()=>{class n{static{this.__NG_ELEMENT_ID__=hK}}return n})();function hK(n){return mK(pi(),qe(),(n&16)===16)}function mK(n,e,t){if(jw(n)&&!t){let i=Js(n.index,e);return new Fl(i,i)}else if(n.type&175){let i=e[Eo];return new Fl(i,e)}return null}var pE=class{constructor(){}supports(e){return a5(e)}create(e){return new gE(e)}},fK=(n,e)=>e,gE=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||fK}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,o=0,r=null;for(;t||i;){let s=!i||t&&t.currentIndex<zR(i,o,r)?t:i,a=zR(s,o,r),l=s.currentIndex;if(s===i)o--,i=i._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{r||(r=[]);let c=a-o,d=l-o;if(c!=d){for(let p=0;p<c;p++){let g=p<r.length?r[p]:r[p]=0,w=g+p;d<=w&&w<c&&(r[p]=g+1)}let f=s.previousIndex;r[f]=d-c}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!a5(e))throw new F(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,i=!1,o,r,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)r=e[a],s=this._trackByFn(a,r),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,r,s,a),i=!0):(i&&(t=this._verifyReinsertion(t,r,s,a)),Object.is(t.item,r)||this._addIdentityChange(t,r)),t=t._next}else o=0,nG(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),i=!0):(i&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,o){let r;return e===null?r=this._itTail:(r=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,r,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,r,o)):e=this._addAfter(new bE(t,i),r,o)),e}_verifyReinsertion(e,t,i,o){let r=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return r!==null?e=this._reinsertAfter(r,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,r=e._nextRemoved;return o===null?this._removalsHead=r:o._nextRemoved=r,r===null?this._removalsTail=o:r._prevRemoved=o,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Lw),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,i=e._next;return t===null?this._itHead=i:t._next=i,i===null?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Lw),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bE=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},wE=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;i!==null;i=i._nextDup)if((t===null||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let t=e._prevDup,i=e._nextDup;return t===null?this._head=i:t._nextDup=i,i===null?this._tail=t:i._prevDup=t,this._head===null}},Lw=class{constructor(){this.map=new Map}put(e){let t=e.trackById,i=this.map.get(t);i||(i=new wE,this.map.set(t,i)),i.add(e)}get(e,t){let i=e,o=this.map.get(i);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function zR(n,e,t){let i=n.previousIndex;if(i===null)return i;let o=0;return t&&i<t.length&&(o=t[i]),i+e+o}function HR(){return new hS([new pE])}var hS=(()=>{class n{static{this.\u0275prov=G({token:n,providedIn:"root",factory:HR})}constructor(t){this.factories=t}static create(t,i){if(i!=null){let o=i.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||HR()),deps:[[n,new JR,new vE]]}}find(t){let i=this.factories.find(o=>o.supports(t));if(i!=null)return i;throw new F(901,!1)}}return n})();var A5=(()=>{class n{constructor(t){}static{this.\u0275fac=function(i){return new(i||n)($(Zr))}}static{this.\u0275mod=fi({type:n})}static{this.\u0275inj=mi({})}}return n})();function T5(n){try{let{rootComponent:e,appProviders:t,platformProviders:i}=n,o=dK(i),r=[E5({}),{provide:Gd,useExisting:rK},...t||[]],s=new Dw({providers:r,parent:o,debugName:"",runEnvironmentInitializers:!1});return aK({r3Injector:s.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}}function c0(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function d0(n,e){Gr("NgSignals");let t=CP(n);return e?.equal&&(t[Or].equal=e.equal),t}function na(n){let e=je(null);try{return n()}finally{je(e)}}var R5=null;function ir(){return R5}function N5(n){R5??=n}var u0=class{};var wn=new Z(""),O5=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(wK),providedIn:"platform"})}}return n})();var wK=(()=>{class n extends O5{constructor(){super(),this._doc=L(wn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ir().getBaseHref(this._doc)}onPopState(t){let i=ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){let i=ir().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,o){this._history.pushState(t,i,o)}replaceState(t,i,o){this._history.replaceState(t,i,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function L5(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function I5(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,i=t-(n[t-1]==="/"?1:0);return n.slice(0,i)+n.slice(t)}function Wl(n){return n&&n[0]!=="?"?"?"+n:n}var h0=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(F5),providedIn:"root"})}}return n})(),kK=new Z(""),F5=(()=>{class n extends h0{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(wn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return L5(this._baseHref,t)}path(t=!1){let i=this._platformLocation.pathname+Wl(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${i}${o}`:i}pushState(t,i,o,r){let s=this.prepareExternalUrl(o+Wl(r));this._platformLocation.pushState(t,i,s)}replaceState(t,i,o,r){let s=this.prepareExternalUrl(o+Wl(r));this._platformLocation.replaceState(t,i,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(i){return new(i||n)($(O5),$(kK,8))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var or=(()=>{class n{constructor(t){this._subject=new bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let i=this._locationStrategy.getBaseHref();this._basePath=_K(I5(M5(i))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Wl(i))}normalize(t){return n.stripTrailingSlash(yK(this._basePath,M5(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",o=null){this._locationStrategy.pushState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wl(i)),o)}replaceState(t,i="",o=null){this._locationStrategy.replaceState(o,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wl(i)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(o=>o(t,i))}subscribe(t,i,o){return this._subject.subscribe({next:t,error:i,complete:o})}static{this.normalizeQueryParams=Wl}static{this.joinWithSlash=L5}static{this.stripTrailingSlash=I5}static{this.\u0275fac=function(i){return new(i||n)($(h0))}}static{this.\u0275prov=G({token:n,factory:()=>vK(),providedIn:"root"})}}return n})();function vK(){return new or($(h0))}function yK(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function M5(n){return n.replace(/\/index.html$/,"")}function _K(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function m0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let i=t.indexOf("="),[o,r]=i==-1?[t,""]:[t.slice(0,i),t.slice(i+1)];if(o.trim()===e)return decodeURIComponent(r)}return null}var mS=class{constructor(e,t,i,o){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},f0=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,o){this._viewContainer=t,this._template=i,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let i=this._viewContainer;t.forEachOperation((o,r,s)=>{if(o.previousIndex==null)i.createEmbeddedView(this._template,new mS(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(r===null?void 0:r);else if(r!==null){let a=i.get(r);i.move(a,s),D5(a,o)}});for(let o=0,r=i.length;o<r;o++){let a=i.get(o).context;a.index=o,a.count=r,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let r=i.get(o.currentIndex);D5(r,o)})}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(Ge(ta),Ge(Vl),Ge(hS))}}static{this.\u0275dir=Ti({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function D5(n,e){n.context.$implicit=e.item}var V5=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new fS,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){P5("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){P5("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}static{this.\u0275fac=function(i){return new(i||n)(Ge(ta),Ge(Vl))}}static{this.\u0275dir=Ti({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),fS=class{constructor(){this.$implicit=null,this.ngIf=null}};function P5(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${jn(e)}'.`)}var Ji=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=fi({type:n})}static{this.\u0275inj=mi({})}}return n})(),B5="browser",CK="server";function p0(n){return n===CK}var nu=class{};var kf=class{},vf=class{},Jr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let o=t.slice(0,i),r=o.toLowerCase(),s=t.slice(i+1).trim();this.maybeSetNormalizedName(o,r),this.headers.has(r)?this.headers.get(r).push(s):this.headers.set(r,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let o=(e.op==="a"?this.headers.get(t):void 0)||[];o.push(...i),this.headers.set(t,o);break;case"d":let r=e.value;if(!r)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>r.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(r=>r.toString()),o=e.toLowerCase();this.headers.set(o,i),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var bS=class{encodeKey(e){return z5(e)}encodeValue(e){return z5(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function EK(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{let r=o.indexOf("="),[s,a]=r==-1?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,r)),e.decodeValue(o.slice(r+1))],l=t.get(s)||[];l.push(a),t.set(s,l)}),t}var SK=/%(\d[a-f0-9])/gi,xK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function z5(n){return encodeURIComponent(n).replace(SK,(e,t)=>xK[t]??e)}function b0(n){return`${n}`}var oa=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new bS,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=EK(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],o=Array.isArray(i)?i.map(b0):[b0(i)];this.map.set(t,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let o=e[i];Array.isArray(o)?o.forEach(r=>{t.push({param:i,value:r,op:"a"})}):t.push({param:i,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(b0(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],o=i.indexOf(b0(e.value));o!==-1&&i.splice(o,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var wS=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function AK(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function H5(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function U5(n){return typeof Blob<"u"&&n instanceof Blob}function j5(n){return typeof FormData<"u"&&n instanceof FormData}function TK(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var wf=class n{constructor(e,t,i,o){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let r;if(AK(this.method)||o?(this.body=i!==void 0?i:null,r=o):r=i,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params),this.transferCache=r.transferCache),this.headers??=new Jr,this.context??=new wS,!this.params)this.params=new oa,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),l=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||H5(this.body)||U5(this.body)||j5(this.body)||TK(this.body)?this.body:this.body instanceof oa?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||j5(this.body)?null:U5(this.body)?this.body.type||null:H5(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof oa?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,o=e.responseType||this.responseType,r=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),c)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),d)),new n(t,i,s,{params:d,headers:c,context:f,reportProgress:l,responseType:o,withCredentials:a,transferCache:r})}},ra=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ra||{}),yf=class{constructor(e,t=200,i="OK"){this.headers=e.headers||new Jr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},w0=class n extends yf{constructor(e={}){super(e),this.type=ra.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},_f=class n extends yf{constructor(e={}){super(e),this.type=ra.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ia=class extends yf{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},K5=200,IK=204;function gS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var _S=(()=>{class n{constructor(t){this.handler=t}request(t,i,o={}){let r;if(t instanceof wf)r=t;else{let l;o.headers instanceof Jr?l=o.headers:l=new Jr(o.headers);let c;o.params&&(o.params instanceof oa?c=o.params:c=new oa({fromObject:o.params})),r=new wf(t,i,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let s=re(r).pipe(vo(l=>this.handler.handle(l)));if(t instanceof wf||o.observe==="events")return s;let a=s.pipe(un(l=>l instanceof _f));switch(o.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return a.pipe(he(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(he(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(he(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(he(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:new oa().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,o={}){return this.request("PATCH",t,gS(o,i))}post(t,i,o={}){return this.request("POST",t,gS(o,i))}put(t,i,o={}){return this.request("PUT",t,gS(o,i))}static{this.\u0275fac=function(i){return new(i||n)($(kf))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),MK=/^\)\]\}',?\n/,DK="X-Request-URL";function $5(n){if(n.url)return n.url;let e=DK.toLocaleLowerCase();return n.headers.get(e)}var kS=(()=>{class n{constructor(){this.fetchImpl=L(vS,{optional:!0})?.fetch??((...t)=>globalThis.fetch(...t)),this.ngZone=L(ot)}handle(t){return new Qe(i=>{let o=new AbortController;return this.doRequest(t,o.signal,i).then(yS,r=>i.error(new ia({error:r}))),()=>o.abort()})}doRequest(t,i,o){return E(this,null,function*(){let r=this.createRequestInit(t),s;try{let g=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,v({signal:i},r)));PK(g),o.next({type:ra.Sent}),s=yield g}catch(g){o.error(new ia({error:g,status:g.status??0,statusText:g.statusText,url:t.urlWithParams,headers:g.headers}));return}let a=new Jr(s.headers),l=s.statusText,c=$5(s)??t.urlWithParams,d=s.status,f=null;if(t.reportProgress&&o.next(new w0({headers:a,status:d,statusText:l,url:c})),s.body){let g=s.headers.get("content-length"),w=[],k=s.body.getReader(),C=0,S,T,V=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>E(this,null,function*(){for(;;){let{done:de,value:O}=yield k.read();if(de)break;if(w.push(O),C+=O.length,t.reportProgress){T=t.responseType==="text"?(T??"")+(S??=new TextDecoder).decode(O,{stream:!0}):void 0;let j=()=>o.next({type:ra.DownloadProgress,total:g?+g:void 0,loaded:C,partialText:T});V?V.run(j):j()}}}));let K=this.concatChunks(w,C);try{let de=s.headers.get("Content-Type")??"";f=this.parseBody(t,K,de)}catch(de){o.error(new ia({error:de,headers:new Jr(s.headers),status:s.status,statusText:s.statusText,url:$5(s)??t.urlWithParams}));return}}d===0&&(d=f?K5:0),d>=200&&d<300?(o.next(new _f({body:f,headers:a,status:d,statusText:l,url:c})),o.complete()):o.error(new ia({error:f,headers:a,status:d,statusText:l,url:c}))})}parseBody(t,i,o){switch(t.responseType){case"json":let r=new TextDecoder().decode(i).replace(MK,"");return r===""?null:JSON.parse(r);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:o});case"arraybuffer":return i.buffer}}createRequestInit(t){let i={},o=t.withCredentials?"include":void 0;if(t.headers.forEach((r,s)=>i[r]=s.join(",")),t.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let r=t.detectContentTypeHeader();r!==null&&(i["Content-Type"]=r)}return{body:t.serializeBody(),method:t.method,headers:i,credentials:o}}concatChunks(t,i){let o=new Uint8Array(i),r=0;for(let s of t)o.set(s,r),r+=s.length;return o}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),vS=class{};function yS(){}function PK(n){n.then(yS,yS)}function Q5(n,e){return e(n)}function RK(n,e){return(t,i)=>e.intercept(t,{handle:o=>n(o,i)})}function NK(n,e,t){return(i,o)=>So(t,()=>e(i,r=>n(r,o)))}var OK=new Z(""),CS=new Z(""),LK=new Z(""),Y5=new Z("",{providedIn:"root",factory:()=>!0});function FK(){let n=null;return(e,t)=>{n===null&&(n=(L(OK,{optional:!0})??[]).reduceRight(RK,Q5));let i=L($r);if(L(Y5)){let r=i.add();return n(e,t).pipe(Us(()=>i.remove(r)))}else return n(e,t)}}var W5=(()=>{class n extends kf{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null,this.pendingTasks=L($r),this.contributeToStability=L(Y5)}handle(t){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(CS),...this.injector.get(LK,[])]));this.chain=i.reduceRight((o,r)=>NK(o,r,this.injector),Q5)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Us(()=>this.pendingTasks.remove(i)))}else return this.chain(t,i=>this.backend.handle(i))}static{this.\u0275fac=function(i){return new(i||n)($(vf),$(ui))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();var VK=/^\)\]\}',?\n/;function BK(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var q5=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new F(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Ke(i.\u0275loadImpl()):re(null)).pipe(li(()=>new Qe(r=>{let s=i.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((k,C)=>s.setRequestHeader(k,C.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let k=t.detectContentTypeHeader();k!==null&&s.setRequestHeader("Content-Type",k)}if(t.responseType){let k=t.responseType.toLowerCase();s.responseType=k!=="json"?k:"text"}let a=t.serializeBody(),l=null,c=()=>{if(l!==null)return l;let k=s.statusText||"OK",C=new Jr(s.getAllResponseHeaders()),S=BK(s)||t.url;return l=new w0({headers:C,status:s.status,statusText:k,url:S}),l},d=()=>{let{headers:k,status:C,statusText:S,url:T}=c(),V=null;C!==IK&&(V=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=V?K5:0);let K=C>=200&&C<300;if(t.responseType==="json"&&typeof V=="string"){let de=V;V=V.replace(VK,"");try{V=V!==""?JSON.parse(V):null}catch(O){V=de,K&&(K=!1,V={error:O,text:V})}}K?(r.next(new _f({body:V,headers:k,status:C,statusText:S,url:T||void 0})),r.complete()):r.error(new ia({error:V,headers:k,status:C,statusText:S,url:T||void 0}))},f=k=>{let{url:C}=c(),S=new ia({error:k,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});r.error(S)},p=!1,g=k=>{p||(r.next(c()),p=!0);let C={type:ra.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(C.total=k.total),t.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),r.next(C)},w=k=>{let C={type:ra.UploadProgress,loaded:k.loaded};k.lengthComputable&&(C.total=k.total),r.next(C)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",g),a!==null&&s.upload&&s.upload.addEventListener("progress",w)),s.send(a),r.next({type:ra.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",g),a!==null&&s.upload&&s.upload.removeEventListener("progress",w)),s.readyState!==s.DONE&&s.abort()}})))}static{this.\u0275fac=function(i){return new(i||n)($(nu))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Z5=new Z(""),zK="XSRF-TOKEN",HK=new Z("",{providedIn:"root",factory:()=>zK}),UK="X-XSRF-TOKEN",jK=new Z("",{providedIn:"root",factory:()=>UK}),k0=class{},$K=(()=>{class n{constructor(t,i,o){this.doc=t,this.platform=i,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=m0(t,this.cookieName),this.lastCookieString=t),this.lastToken}static{this.\u0275fac=function(i){return new(i||n)($(wn),$(ea),$(HK))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function WK(n,e){let t=n.url.toLowerCase();if(!L(Z5)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let i=L(k0).getToken(),o=L(jK);return i!=null&&!n.headers.has(o)&&(n=n.clone({headers:n.headers.set(o,i)})),e(n)}var ES=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(ES||{});function J5(n,e){return{\u0275kind:n,\u0275providers:e}}function X5(...n){let e=[_S,q5,W5,{provide:kf,useExisting:W5},{provide:vf,useFactory:()=>L(kS,{optional:!0})??L(q5)},{provide:CS,useValue:WK,multi:!0},{provide:Z5,useValue:!0},{provide:k0,useClass:$K}];for(let t of n)e.push(...t.\u0275providers);return Yd(e)}var G5=new Z("");function e3(){return J5(ES.LegacyInterceptors,[{provide:G5,useFactory:FK},{provide:CS,useExisting:G5,multi:!0}])}function t3(){return J5(ES.Fetch,[kS,{provide:vf,useExisting:kS}])}var AS=class extends u0{constructor(){super(...arguments),this.supportsDOMEvents=!0}},TS=class n extends AS{static makeCurrent(){N5(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=GK();return t==null?null:KK(t)}resetBaseElement(){Cf=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m0(document.cookie,e)}},Cf=null;function GK(){return Cf=Cf||document.querySelector("base"),Cf?Cf.getAttribute("href"):null}function KK(n){return new URL(n,document.baseURI).pathname}var IS=class{addToWindow(e){Qi.getAngularTestability=(i,o=!0)=>{let r=e.findTestabilityInTree(i,o);if(r==null)throw new F(5103,!1);return r},Qi.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qi.getAllAngularRootElements=()=>e.getAllRootElements();let t=i=>{let o=Qi.getAllAngularTestabilities(),r=o.length,s=function(){r--,r==0&&i()};o.forEach(a=>{a.whenStable(s)})};Qi.frameworkStabilizers||(Qi.frameworkStabilizers=[]),Qi.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,i){if(t==null)return null;let o=e.getTestability(t);return o??(i?ir().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},QK=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),MS=new Z(""),o3=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,o){return this._findPluginFor(i).addEventListener(t,i,o)}getZone(){return this._zone}_findPluginFor(t){let i=this._eventNameToPlugin.get(t);if(i)return i;if(i=this._plugins.find(r=>r.supports(t)),!i)throw new F(5101,!1);return this._eventNameToPlugin.set(t,i),i}static{this.\u0275fac=function(i){return new(i||n)($(MS),$(ot))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),v0=class{constructor(e){this._doc=e}},SS="ng-app-id",r3=(()=>{class n{constructor(t,i,o,r={}){this.doc=t,this.appId=i,this.nonce=o,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=p0(r),this.resetHostNodes()}addStyles(t){for(let i of t)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(t){for(let i of t)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(i=>i.remove()),t.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){let i=this.styleRef;i.get(t)?.elements?.forEach(o=>o.remove()),i.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${SS}="${this.appId}"]`);if(t?.length){let i=new Map;return t.forEach(o=>{o.textContent!=null&&i.set(o.textContent,o)}),i}return null}changeUsageCount(t,i){let o=this.styleRef;if(o.has(t)){let r=o.get(t);return r.usage+=i,r.usage}return o.set(t,{usage:i,elements:[]}),i}getStyleElement(t,i){let o=this.styleNodesInDOM,r=o?.get(i);if(r?.parentNode===t)return o.delete(i),r.removeAttribute(SS),r;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(SS,this.appId),t.appendChild(s),s}}addStyleToHost(t,i){let o=this.getStyleElement(t,i),r=this.styleRef,s=r.get(i)?.elements;s?s.push(o):r.set(i,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(i){return new(i||n)($(wn),$(qw),$(jE,8),$(ea))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),xS={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},PS=/%COMP%/g,s3="%COMP%",YK=`_nghost-${s3}`,ZK=`_ngcontent-${s3}`,JK=!0,XK=new Z("",{providedIn:"root",factory:()=>JK});function eQ(n){return ZK.replace(PS,n)}function tQ(n){return YK.replace(PS,n)}function a3(n,e){return e.map(t=>t.replace(PS,n))}var y0=(()=>{class n{constructor(t,i,o,r,s,a,l,c=null){this.eventManager=t,this.sharedStylesHost=i,this.appId=o,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=p0(a),this.defaultRenderer=new Ef(t,s,l,this.platformIsServer)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Jo.ShadowDom&&(i=I(v({},i),{encapsulation:Jo.Emulated}));let o=this.getOrCreateRenderer(t,i);return o instanceof _0?o.applyToHost(t):o instanceof Sf&&o.applyStyles(),o}getOrCreateRenderer(t,i){let o=this.rendererByCompId,r=o.get(i.id);if(!r){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(i.encapsulation){case Jo.Emulated:r=new _0(l,c,i,this.appId,d,s,a,f);break;case Jo.ShadowDom:return new DS(l,c,t,i,s,a,this.nonce,f);default:r=new Sf(l,c,i,d,s,a,f);break}o.set(i.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(i){return new(i||n)($(o3),$(r3),$(qw),$(XK),$(wn),$(ea),$(ot),$(jE))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Ef=class{constructor(e,t,i,o){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xS[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(n3(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(n3(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){t.remove()}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new F(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,o){if(o){t=o+":"+t;let r=xS[o];r?e.setAttributeNS(r,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let o=xS[i];o?e.removeAttributeNS(o,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,o){o&(Hr.DashCase|Hr.Important)?e.style.setProperty(t,i,o&Hr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Hr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=ir().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function n3(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var DS=class extends Ef{constructor(e,t,i,o,r,s,a,l){super(e,r,s,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=a3(o.id,o.styles);for(let d of c){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Sf=class extends Ef{constructor(e,t,i,o,r,s,a,l){super(e,r,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=l?a3(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},_0=class extends Sf{constructor(e,t,i,o,r,s,a,l){let c=o+"-"+i.id;super(e,t,i,r,s,a,l,c),this.contentAttr=eQ(c),this.hostAttr=tQ(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},nQ=(()=>{class n extends v0{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,o){return t.addEventListener(i,o,!1),()=>this.removeEventListener(t,i,o)}removeEventListener(t,i,o){return t.removeEventListener(i,o)}static{this.\u0275fac=function(i){return new(i||n)($(wn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),i3=["alt","control","meta","shift"],iQ={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},oQ={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},rQ=(()=>{class n extends v0{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,i,o){let r=n.parseEventName(i),s=n.eventCallback(r.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ir().onAndCancel(t,r.domEventName,s))}static parseEventName(t){let i=t.toLowerCase().split("."),o=i.shift();if(i.length===0||!(o==="keydown"||o==="keyup"))return null;let r=n._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),i3.forEach(c=>{let d=i.indexOf(c);d>-1&&(i.splice(d,1),s+=c+".")}),s+=r,i.length!=0||r.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(t,i){let o=iQ[t.key]||t.key,r="";return i.indexOf("code.")>-1&&(o=t.code,r="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),i3.forEach(s=>{if(s!==o){let a=oQ[s];a(t)&&(r+=s+".")}}),r+=o,r===i)}static eventCallback(t,i,o){return r=>{n.matchEventFullKeyCode(r,t)&&o.runGuarded(()=>i(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(i){return new(i||n)($(wn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function l3(n,e){return T5(v({rootComponent:n},sQ(e)))}function sQ(n){return{appProviders:[...c3,...n?.providers??[]],platformProviders:dQ}}function aQ(){TS.makeCurrent()}function lQ(){return new Br}function cQ(){return sO(document),document}var dQ=[{provide:ea,useValue:B5},{provide:HE,useValue:aQ,multi:!0},{provide:wn,useFactory:cQ,deps:[]}];var uQ=new Z(""),hQ=[{provide:bf,useClass:IS,deps:[]},{provide:lS,useClass:s0,deps:[ot,a0,bf]},{provide:s0,useClass:s0,deps:[ot,a0,bf]}],c3=[{provide:Hw,useValue:"root"},{provide:Br,useFactory:lQ,deps:[]},{provide:MS,useClass:nQ,multi:!0,deps:[wn,ot,ea]},{provide:MS,useClass:rQ,multi:!0,deps:[wn]},y0,r3,o3,{provide:Qs,useExisting:y0},{provide:nu,useClass:QK,deps:[]},[]],RS=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:qw,useValue:t.appId}]}}static{this.\u0275fac=function(i){return new(i||n)($(uQ,12))}}static{this.\u0275mod=fi({type:n})}static{this.\u0275inj=mi({providers:[...c3,...hQ],imports:[Ji,A5]})}}return n})();var d3=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(i){return new(i||n)($(wn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var NS=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:function(i){let o=null;return i?o=new(i||n):o=$(mQ),o},providedIn:"root"})}}return n})(),mQ=(()=>{class n extends NS{constructor(t){super(),this._doc=t}sanitize(t,i){if(i==null)return null;switch(t){case qr.NONE:return i;case qr.HTML:return Hl(i,"HTML")?tr(i):qE(this._doc,String(i)).toString();case qr.STYLE:return Hl(i,"Style")?tr(i):i;case qr.SCRIPT:if(Hl(i,"Script"))return tr(i);throw new F(5200,!1);case qr.URL:return Hl(i,"URL")?tr(i):WE(String(i));case qr.RESOURCE_URL:if(Hl(i,"ResourceURL"))return tr(i);throw new F(5201,!1);default:throw new F(5202,!1)}}bypassSecurityTrustHtml(t){return cO(t)}bypassSecurityTrustStyle(t){return dO(t)}bypassSecurityTrustScript(t){return uO(t)}bypassSecurityTrustUrl(t){return hO(t)}bypassSecurityTrustResourceUrl(t){return mO(t)}static{this.\u0275fac=function(i){return new(i||n)($(wn))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ie="primary",Uf=Symbol("RouteTitle"),BS=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function lu(n){return new BS(n)}function fQ(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let o={};for(let r=0;r<i.length;r++){let s=i[r],a=n[r];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:o}}function pQ(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!rr(n[t],e[t]))return!1;return!0}function rr(n,e){let t=n?zS(n):void 0,i=e?zS(e):void 0;if(!t||!i||t.length!=i.length)return!1;let o;for(let r=0;r<t.length;r++)if(o=t[r],!k3(n[o],e[o]))return!1;return!0}function zS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function k3(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((o,r)=>i[r]===o)}else return n===e}function v3(n){return n.length>0?n[n.length-1]:null}function aa(n){return z1(n)?n:jl(n)?Ke(Promise.resolve(n)):re(n)}var gQ={exact:_3,subset:C3},y3={exact:bQ,subset:wQ,ignored:()=>!0};function h3(n,e,t){return gQ[t.paths](n.root,e.root,t.matrixParams)&&y3[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function bQ(n,e){return rr(n,e)}function _3(n,e,t){if(!Gl(n.segments,e.segments)||!S0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!_3(n.children[i],e.children[i],t))return!1;return!0}function wQ(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>k3(n[t],e[t]))}function C3(n,e,t){return E3(n,e,e.segments,t)}function E3(n,e,t,i){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Gl(o,t)||e.hasChildren()||!S0(o,t,i))}else if(n.segments.length===t.length){if(!Gl(n.segments,t)||!S0(n.segments,t,i))return!1;for(let o in e.children)if(!n.children[o]||!C3(n.children[o],e.children[o],i))return!1;return!0}else{let o=t.slice(0,n.segments.length),r=t.slice(n.segments.length);return!Gl(n.segments,o)||!S0(n.segments,o,i)||!n.children[Ie]?!1:E3(n.children[Ie],e,r,i)}}function S0(n,e,t){return e.every((i,o)=>y3[t](n[o].parameters,i.parameters))}var es=class{constructor(e=new rt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=lu(this.queryParams),this._queryParamMap}toString(){return yQ.serialize(this)}},rt=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return x0(this)}},ql=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=lu(this.parameters),this._parameterMap}toString(){return x3(this)}};function kQ(n,e){return Gl(n,e)&&n.every((t,i)=>rr(t.parameters,e[i].parameters))}function Gl(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function vQ(n,e){let t=[];return Object.entries(n.children).forEach(([i,o])=>{i===Ie&&(t=t.concat(e(o,i)))}),Object.entries(n.children).forEach(([i,o])=>{i!==Ie&&(t=t.concat(e(o,i)))}),t}var hx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>new Pf,providedIn:"root"})}}return n})(),Pf=class{parse(e){let t=new US(e);return new es(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${xf(e.root,!0)}`,i=EQ(e.queryParams),o=typeof e.fragment=="string"?`#${_Q(e.fragment)}`:"";return`${t}${i}${o}`}},yQ=new Pf;function x0(n){return n.segments.map(e=>x3(e)).join("/")}function xf(n,e){if(!n.hasChildren())return x0(n);if(e){let t=n.children[Ie]?xf(n.children[Ie],!1):"",i=[];return Object.entries(n.children).forEach(([o,r])=>{o!==Ie&&i.push(`${o}:${xf(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=vQ(n,(i,o)=>o===Ie?[xf(n.children[Ie],!1)]:[`${o}:${xf(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ie]!=null?`${x0(n)}/${t[0]}`:`${x0(n)}/(${t.join("//")})`}}function S3(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function C0(n){return S3(n).replace(/%3B/gi,";")}function _Q(n){return encodeURI(n)}function HS(n){return S3(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function A0(n){return decodeURIComponent(n)}function m3(n){return A0(n.replace(/\+/g,"%20"))}function x3(n){return`${HS(n.path)}${CQ(n.parameters)}`}function CQ(n){return Object.entries(n).map(([e,t])=>`;${HS(e)}=${HS(t)}`).join("")}function EQ(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(o=>`${C0(t)}=${C0(o)}`).join("&"):`${C0(t)}=${C0(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var SQ=/^[^\/()?;#]+/;function OS(n){let e=n.match(SQ);return e?e[0]:""}var xQ=/^[^\/()?;=#]+/;function AQ(n){let e=n.match(xQ);return e?e[0]:""}var TQ=/^[^=?&#]+/;function IQ(n){let e=n.match(TQ);return e?e[0]:""}var MQ=/^[^&#]+/;function DQ(n){let e=n.match(MQ);return e?e[0]:""}var US=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[Ie]=new rt(e,t)),i}parseSegment(){let e=OS(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new F(4009,!1);return this.capture(e),new ql(A0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=AQ(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=OS(this.remaining);o&&(i=o,this.capture(i))}e[A0(t)]=A0(i)}parseQueryParam(e){let t=IQ(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let s=DQ(this.remaining);s&&(i=s,this.capture(i))}let o=m3(t),r=m3(i);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(r)}else e[o]=r}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=OS(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new F(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):e&&(r=Ie);let s=this.parseChildren();t[r]=Object.keys(s).length===1?s[Ie]:new rt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new F(4011,!1)}};function A3(n){return n.segments.length>0?new rt([],{[Ie]:n}):n}function T3(n){let e={};for(let[i,o]of Object.entries(n.children)){let r=T3(o);if(i===Ie&&r.segments.length===0&&r.hasChildren())for(let[s,a]of Object.entries(r.children))e[s]=a;else(r.segments.length>0||r.hasChildren())&&(e[i]=r)}let t=new rt(n.segments,e);return PQ(t)}function PQ(n){if(n.numberOfChildren===1&&n.children[Ie]){let e=n.children[Ie];return new rt(n.segments.concat(e.segments),e.children)}return n}function Rf(n){return n instanceof es}function RQ(n,e,t=null,i=null){let o=I3(n);return M3(o,e,t,i)}function I3(n){let e;function t(r){let s={};for(let l of r.children){let c=t(l);s[l.outlet]=c}let a=new rt(r.url,s);return r===n&&(e=a),a}let i=t(n.root),o=A3(i);return e??o}function M3(n,e,t,i){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return LS(o,o,o,t,i);let r=NQ(e);if(r.toRoot())return LS(o,o,new rt([],{}),t,i);let s=OQ(r,o,n),a=s.processChildren?If(s.segmentGroup,s.index,r.commands):P3(s.segmentGroup,s.index,r.commands);return LS(o,s.segmentGroup,a,t,i)}function T0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Nf(n){return typeof n=="object"&&n!=null&&n.outlets}function LS(n,e,t,i,o){let r={};i&&Object.entries(i).forEach(([l,c])=>{r[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let s;n===e?s=t:s=D3(n,e,t);let a=A3(T3(s));return new es(a,r,o)}function D3(n,e,t){let i={};return Object.entries(n.children).forEach(([o,r])=>{r===e?i[o]=t:i[o]=D3(r,e,t)}),new rt(n.segments,i)}var I0=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&T0(i[0]))throw new F(4003,!1);let o=i.find(Nf);if(o&&o!==v3(i))throw new F(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function NQ(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new I0(!0,0,n);let e=0,t=!1,i=n.reduce((o,r,s)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:s===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,r]},[]);return new I0(t,e,i)}var ru=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function OQ(n,e,t){if(n.isAbsolute)return new ru(e,!0,0);if(!t)return new ru(e,!1,NaN);if(t.parent===null)return new ru(t,!0,0);let i=T0(n.commands[0])?0:1,o=t.segments.length-1+i;return LQ(t,o,n.numberOfDoubleDots)}function LQ(n,e,t){let i=n,o=e,r=t;for(;r>o;){if(r-=o,i=i.parent,!i)throw new F(4005,!1);o=i.segments.length}return new ru(i,!1,o-r)}function FQ(n){return Nf(n[0])?n[0].outlets:{[Ie]:n}}function P3(n,e,t){if(n??=new rt([],{}),n.segments.length===0&&n.hasChildren())return If(n,e,t);let i=VQ(n,e,t),o=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let r=new rt(n.segments.slice(0,i.pathIndex),{});return r.children[Ie]=new rt(n.segments.slice(i.pathIndex),n.children),If(r,0,o)}else return i.match&&o.length===0?new rt(n.segments,{}):i.match&&!n.hasChildren()?jS(n,e,t):i.match?If(n,0,o):jS(n,e,t)}function If(n,e,t){if(t.length===0)return new rt(n.segments,{});{let i=FQ(t),o={};if(Object.keys(i).some(r=>r!==Ie)&&n.children[Ie]&&n.numberOfChildren===1&&n.children[Ie].segments.length===0){let r=If(n.children[Ie],e,t);return new rt(n.segments,r.children)}return Object.entries(i).forEach(([r,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[r]=P3(n.children[r],e,s))}),Object.entries(n.children).forEach(([r,s])=>{i[r]===void 0&&(o[r]=s)}),new rt(n.segments,o)}}function VQ(n,e,t){let i=0,o=e,r={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(i>=t.length)return r;let s=n.segments[o],a=t[i];if(Nf(a))break;let l=`${a}`,c=i<t.length-1?t[i+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!p3(l,c,s))return r;i+=2}else{if(!p3(l,{},s))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function jS(n,e,t){let i=n.segments.slice(0,e),o=0;for(;o<t.length;){let r=t[o];if(Nf(r)){let l=BQ(r.outlets);return new rt(i,l)}if(o===0&&T0(t[0])){let l=n.segments[e];i.push(new ql(l.path,f3(t[0]))),o++;continue}let s=Nf(r)?r.outlets[Ie]:`${r}`,a=o<t.length-1?t[o+1]:null;s&&a&&T0(a)?(i.push(new ql(s,f3(a))),o+=2):(i.push(new ql(s,{})),o++)}return new rt(i,{})}function BQ(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=jS(new rt([],{}),0,i))}),e}function f3(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function p3(n,e,t){return n==t.path&&rr(e,t.parameters)}var Mf="imperative",kn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(kn||{}),Xi=class{constructor(e,t){this.id=e,this.url=t}},Of=class extends Xi{constructor(e,t,i="imperative",o=null){super(e,t),this.type=kn.NavigationStart,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Kl=class extends Xi{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=kn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Di=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Di||{}),$S=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($S||{}),Xr=class extends Xi{constructor(e,t,i,o){super(e,t),this.reason=i,this.code=o,this.type=kn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ql=class extends Xi{constructor(e,t,i,o){super(e,t),this.reason=i,this.code=o,this.type=kn.NavigationSkipped}},Lf=class extends Xi{constructor(e,t,i,o){super(e,t),this.error=i,this.target=o,this.type=kn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},M0=class extends Xi{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=kn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},WS=class extends Xi{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=kn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qS=class extends Xi{constructor(e,t,i,o,r){super(e,t),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r,this.type=kn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},GS=class extends Xi{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=kn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},KS=class extends Xi{constructor(e,t,i,o){super(e,t),this.urlAfterRedirects=i,this.state=o,this.type=kn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},QS=class{constructor(e){this.route=e,this.type=kn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},YS=class{constructor(e){this.route=e,this.type=kn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ZS=class{constructor(e){this.snapshot=e,this.type=kn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},JS=class{constructor(e){this.snapshot=e,this.type=kn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},XS=class{constructor(e){this.snapshot=e,this.type=kn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ex=class{constructor(e){this.snapshot=e,this.type=kn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ff=class{},cu=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function zQ(n,e){return n.providers&&!n._injector&&(n._injector=iS(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Do(n){return n.outlet||Ie}function HQ(n,e){let t=n.filter(i=>Do(i)===e);return t.push(...n.filter(i=>Do(i)!==e)),t}function jf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var tx=class{get injector(){return jf(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new F0(this.rootInjector),this.attachRef=null}},F0=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,i){let o=this.getOrCreateContext(t);o.outlet=i,this.contexts.set(t,o)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new tx(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(i){return new(i||n)($(ui))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),D0=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=nx(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=nx(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ix(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return ix(e,this._root).map(t=>t.value)}};function nx(n,e){if(n===e.value)return e;for(let t of e.children){let i=nx(n,t);if(i)return i}return null}function ix(n,e){if(n===e.value)return[e];for(let t of e.children){let i=ix(n,t);if(i.length)return i.unshift(e),i}return[]}var Mi=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ou(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var P0=class extends D0{constructor(e,t){super(e),this.snapshot=t,mx(this,e)}toString(){return this.snapshot.toString()}};function R3(n){let e=UQ(n),t=new en([new ql("",{})]),i=new en({}),o=new en({}),r=new en({}),s=new en(""),a=new sa(t,i,r,s,o,Ie,n,e.root);return a.snapshot=e.root,new P0(new Mi(a,[]),e)}function UQ(n){let e={},t={},i={},o="",r=new su([],e,i,o,t,Ie,n,null,{});return new N0("",new Mi(r,[]))}var sa=class{constructor(e,t,i,o,r,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(he(c=>c[Uf]))??re(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(he(e=>lu(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(he(e=>lu(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function R0(n,e,t="emptyOnly"){let i,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:v(v({},e.params),n.params),data:v(v({},e.data),n.data),resolve:v(v(v(v({},n.data),e.data),o?.data),n._resolvedData)}:i={params:v({},n.params),data:v({},n.data),resolve:v(v({},n.data),n._resolvedData??{})},o&&O3(o)&&(i.resolve[Uf]=o.title),i}var su=class{get title(){return this.data?.[Uf]}constructor(e,t,i,o,r,s,a,l,c){this.url=e,this.params=t,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=lu(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=lu(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},N0=class extends D0{constructor(e,t){super(t),this.url=e,mx(this,t)}toString(){return N3(this._root)}};function mx(n,e){e.value._routerState=n,e.children.forEach(t=>mx(n,t))}function N3(n){let e=n.children.length>0?` { ${n.children.map(N3).join(", ")} } `:"";return`${n.value}${e}`}function FS(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,rr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),rr(e.params,t.params)||n.paramsSubject.next(t.params),pQ(e.url,t.url)||n.urlSubject.next(t.url),rr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function ox(n,e){let t=rr(n.params,e.params)&&kQ(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||ox(n.parent,e.parent))}function O3(n){return typeof n.title=="string"||n.title===null}var fx=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new bt,this.deactivateEvents=new bt,this.attachEvents=new bt,this.detachEvents=new bt,this.parentContexts=L(F0),this.location=L(ta),this.changeDetector=L($l),this.inputBinder=L(px,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:o}=t.name;if(i)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new F(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new F(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new F(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new F(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new rx(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275dir=Ti({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zs]})}}return n})(),rx=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===sa?this.route:e===F0?this.childContexts:this.parent.get(e,t)}},px=new Z("");function jQ(n,e,t){let i=Vf(n,e._root,t?t._root:void 0);return new P0(i,e)}function Vf(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let o=$Q(n,e,t);return new Mi(i,o)}else{if(n.shouldAttach(e.value)){let r=n.retrieve(e.value);if(r!==null){let s=r.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Vf(n,a)),s}}let i=WQ(e.value),o=e.children.map(r=>Vf(n,r));return new Mi(i,o)}}function $Q(n,e,t){return e.children.map(i=>{for(let o of t.children)if(n.shouldReuseRoute(i.value,o.value.snapshot))return Vf(n,i,o);return Vf(n,i)})}function WQ(n){return new sa(new en(n.url),new en(n.params),new en(n.queryParams),new en(n.fragment),new en(n.data),n.outlet,n.component,n)}var Bf=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},L3="ngNavigationCancelingError";function O0(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Rf(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=F3(!1,Di.Redirect);return o.url=t,o.navigationBehaviorOptions=i,o}function F3(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[L3]=!0,t.cancellationCode=e,t}function qQ(n){return V3(n)&&Rf(n.url)}function V3(n){return!!n&&n[L3]}var GQ=(n,e,t,i)=>he(o=>(new sx(e,o.targetRouterState,o.currentRouterState,t,i).activate(n),o)),sx=class{constructor(e,t,i,o,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),FS(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let o=ou(t);e.children.forEach(r=>{let s=r.value.outlet;this.deactivateRoutes(r,o[s],i),delete o[s]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(e,t,i){let o=e.value,r=t?t.value:null;if(o===r)if(o.component){let s=i.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,i);else r&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,r=ou(e);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),o=i&&e.value.component?i.children:t,r=ou(e);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let o=ou(t);e.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new ex(r.value.snapshot))}),e.children.length&&this.forwardEvent(new JS(e.value.snapshot))}activateRoutes(e,t,i){let o=e.value,r=t?t.value:null;if(FS(o),o===r)if(o.component){let s=i.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,i);else if(o.component){let s=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),FS(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,i)}},L0=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},au=class{constructor(e,t){this.component=e,this.route=t}};function KQ(n,e,t){let i=n._root,o=e?e._root:null;return Af(i,o,t,[i.value])}function QQ(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function uu(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!WR(n)?n:e.get(n):i}function Af(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=ou(e);return n.children.forEach(s=>{YQ(s,r[s.value.outlet],t,i.concat([s.value]),o),delete r[s.value.outlet]}),Object.entries(r).forEach(([s,a])=>Df(a,t.getContext(s),o)),o}function YQ(n,e,t,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&r.routeConfig===s.routeConfig){let l=ZQ(s,r,r.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new L0(i)):(r.data=s.data,r._resolvedData=s._resolvedData),r.component?Af(n,e,a?a.children:null,i,o):Af(n,e,t,i,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new au(a.outlet.component,s))}else s&&Df(e,a,o),o.canActivateChecks.push(new L0(i)),r.component?Af(n,null,a?a.children:null,i,o):Af(n,null,t,i,o);return o}function ZQ(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gl(n.url,e.url)||!rr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ox(n,e)||!rr(n.queryParams,e.queryParams);case"paramsChange":default:return!ox(n,e)}}function Df(n,e,t){let i=ou(n),o=n.value;Object.entries(i).forEach(([r,s])=>{o.component?e?Df(s,e.children.getContext(r),t):Df(s,null,t):Df(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new au(e.outlet.component,o)):t.canDeactivateChecks.push(new au(null,o)):t.canDeactivateChecks.push(new au(null,o))}function $f(n){return typeof n=="function"}function JQ(n){return typeof n=="boolean"}function XQ(n){return n&&$f(n.canLoad)}function eY(n){return n&&$f(n.canActivate)}function tY(n){return n&&$f(n.canActivateChild)}function nY(n){return n&&$f(n.canDeactivate)}function iY(n){return n&&$f(n.canMatch)}function B3(n){return n instanceof Fr||n?.name==="EmptyError"}var E0=Symbol("INITIAL_VALUE");function du(){return li(n=>Jb(n.map(e=>e.pipe(Qo(1),G1(E0)))).pipe(he(e=>{for(let t of e)if(t!==!0){if(t===E0)return E0;if(t===!1||oY(t))return t}return!0}),un(e=>e!==E0),Qo(1)))}function oY(n){return Rf(n)||n instanceof Bf}function rY(n,e){return tn(t=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:s}}=t;return s.length===0&&r.length===0?re(I(v({},t),{guardsResult:!0})):sY(s,i,o,n).pipe(tn(a=>a&&JQ(a)?aY(i,r,n,e):re(a)),he(a=>I(v({},t),{guardsResult:a})))})}function sY(n,e,t,i){return Ke(n).pipe(tn(o=>hY(o.component,o.route,t,e,i)),Gi(o=>o!==!0,!0))}function aY(n,e,t,i){return Ke(e).pipe(vo(o=>Rd(cY(o.route.parent,i),lY(o.route,i),uY(n,o.path,t),dY(n,o.route,t))),Gi(o=>o!==!0,!0))}function lY(n,e){return n!==null&&e&&e(new XS(n)),re(!0)}function cY(n,e){return n!==null&&e&&e(new ZS(n)),re(!0)}function dY(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return re(!0);let o=i.map(r=>Xb(()=>{let s=jf(e)??t,a=uu(r,s),l=eY(a)?a.canActivate(e,n):So(s,()=>a(e,n));return aa(l).pipe(Gi())}));return re(o).pipe(du())}function uY(n,e,t){let i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(s=>QQ(s)).filter(s=>s!==null).map(s=>Xb(()=>{let a=s.guards.map(l=>{let c=jf(s.node)??t,d=uu(l,c),f=tY(d)?d.canActivateChild(i,n):So(c,()=>d(i,n));return aa(f).pipe(Gi())});return re(a).pipe(du())}));return re(r).pipe(du())}function hY(n,e,t,i,o){let r=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!r||r.length===0)return re(!0);let s=r.map(a=>{let l=jf(e)??o,c=uu(a,l),d=nY(c)?c.canDeactivate(n,e,t,i):So(l,()=>c(n,e,t,i));return aa(d).pipe(Gi())});return re(s).pipe(du())}function mY(n,e,t,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let r=o.map(s=>{let a=uu(s,n),l=XQ(a)?a.canLoad(e,t):So(n,()=>a(e,t));return aa(l)});return re(r).pipe(du(),z3(i))}function z3(n){return L1(at(e=>{if(typeof e!="boolean")throw O0(n,e)}),he(e=>e===!0))}function fY(n,e,t,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let r=o.map(s=>{let a=uu(s,n),l=iY(a)?a.canMatch(e,t):So(n,()=>a(e,t));return aa(l)});return re(r).pipe(du(),z3(i))}var zf=class{constructor(e){this.segmentGroup=e||null}},Hf=class extends Error{constructor(e){super(),this.urlTree=e}};function iu(n){return Lr(new zf(n))}function pY(n){return Lr(new F(4e3,!1))}function gY(n){return Lr(F3(!1,Di.GuardRejected))}var ax=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],o=t.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return re(i);if(o.numberOfChildren>1||!o.children[Ie])return pY(`${e.redirectTo}`);o=o.children[Ie]}}applyRedirectCommands(e,t,i,o,r){if(typeof t!="string"){let a=t,{queryParams:l,fragment:c,routeConfig:d,url:f,outlet:p,params:g,data:w,title:k}=o,C=So(r,()=>a({params:g,data:w,queryParams:l,fragment:c,routeConfig:d,url:f,outlet:p,title:k}));if(C instanceof es)throw new Hf(C);t=C}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t[0]==="/")throw new Hf(s);return s}applyRedirectCreateUrlTree(e,t,i,o){let r=this.createSegmentGroup(e,t.root,i,o);return new es(r,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([o,r])=>{if(typeof r=="string"&&r[0]===":"){let a=r.substring(1);i[o]=t[a]}else i[o]=r}),i}createSegmentGroup(e,t,i,o){let r=this.createSegments(e,t.segments,i,o),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,o)}),new rt(r,s)}createSegments(e,t,i,o){return t.map(r=>r.path[0]===":"?this.findPosParam(e,r,o):this.findOrReturn(r,i))}findPosParam(e,t,i){let o=i[t.path.substring(1)];if(!o)throw new F(4001,!1);return o}findOrReturn(e,t){let i=0;for(let o of t){if(o.path===e.path)return t.splice(i),o;i++}return e}},lx={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function bY(n,e,t,i,o){let r=H3(n,e,t);return r.matched?(i=zQ(e,i),fY(i,e,t,o).pipe(he(s=>s===!0?r:v({},lx)))):re(r)}function H3(n,e,t){if(e.path==="**")return wY(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?v({},lx):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||fQ)(t,n,e);if(!o)return v({},lx);let r={};Object.entries(o.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let s=o.consumed.length>0?v(v({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function wY(n){return{matched:!0,parameters:n.length>0?v3(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function g3(n,e,t,i){return t.length>0&&yY(n,t,i)?{segmentGroup:new rt(e,vY(i,new rt(t,n.children))),slicedSegments:[]}:t.length===0&&_Y(n,t,i)?{segmentGroup:new rt(n.segments,kY(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new rt(n.segments,n.children),slicedSegments:t}}function kY(n,e,t,i){let o={};for(let r of t)if(V0(n,e,r)&&!i[Do(r)]){let s=new rt([],{});o[Do(r)]=s}return v(v({},i),o)}function vY(n,e){let t={};t[Ie]=e;for(let i of n)if(i.path===""&&Do(i)!==Ie){let o=new rt([],{});t[Do(i)]=o}return t}function yY(n,e,t){return t.some(i=>V0(n,e,i)&&Do(i)!==Ie)}function _Y(n,e,t){return t.some(i=>V0(n,e,i))}function V0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function CY(n,e,t){return e.length===0&&!n.children[t]}var cx=class{};function EY(n,e,t,i,o,r,s="emptyOnly"){return new dx(n,e,t,i,o,s,r).recognize()}var SY=31,dx=class{constructor(e,t,i,o,r,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new ax(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new F(4002,`'${e.segmentGroup}'`)}recognize(){let e=g3(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(he(({children:t,rootSnapshot:i})=>{let o=new Mi(i,t),r=new N0("",o),s=RQ(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(s),{state:r,tree:s}}))}match(e){let t=new su([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ie,t).pipe(he(i=>({children:i,rootSnapshot:t})),bn(i=>{if(i instanceof Hf)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof zf?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,o,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,r):this.processSegment(e,t,i,i.segments,o,!0,r).pipe(he(s=>s instanceof Mi?[s]:[]))}processChildren(e,t,i,o){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Ke(r).pipe(vo(s=>{let a=i.children[s],l=HQ(t,s);return this.processSegmentGroup(e,l,a,s,o)}),q1((s,a)=>(s.push(...a),s)),Hs(null),W1(),tn(s=>{if(s===null)return iu(i);let a=U3(s);return xY(a),re(a)}))}processSegment(e,t,i,o,r,s,a){return Ke(t).pipe(vo(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,o,r,s,a).pipe(bn(c=>{if(c instanceof zf)return re(null);throw c}))),Gi(l=>!!l),bn(l=>{if(B3(l))return CY(i,o,r)?re(new cx):iu(i);throw l}))}processSegmentAgainstRoute(e,t,i,o,r,s,a,l){return Do(i)!==s&&(s===Ie||!V0(o,r,i))?iu(o):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,i,r,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,i,r,s,l):iu(o)}expandSegmentAgainstRouteUsingRedirect(e,t,i,o,r,s,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:f,remainingSegments:p}=H3(t,o,r);if(!l)return iu(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SY&&(this.allowRedirects=!1));let g=new su(r,c,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,b3(o),Do(o),o.component??o._loadedComponent??null,o,w3(o)),w=R0(g,a,this.paramsInheritanceStrategy);g.params=Object.freeze(w.params),g.data=Object.freeze(w.data);let k=this.applyRedirects.applyRedirectCommands(d,o.redirectTo,f,g,e);return this.applyRedirects.lineralizeSegments(o,k).pipe(tn(C=>this.processSegment(e,i,t,C.concat(p),s,!1,a)))}matchSegmentAgainstRoute(e,t,i,o,r,s){let a=bY(t,i,o,e,this.urlSerializer);return i.path==="**"&&(t.children={}),a.pipe(li(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,o).pipe(li(({routes:c})=>{let d=i._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:g}=l,w=new su(p,f,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,b3(i),Do(i),i.component??i._loadedComponent??null,i,w3(i)),k=R0(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(k.params),w.data=Object.freeze(k.data);let{segmentGroup:C,slicedSegments:S}=g3(t,p,g,c);if(S.length===0&&C.hasChildren())return this.processChildren(d,c,C,w).pipe(he(V=>new Mi(w,V)));if(c.length===0&&S.length===0)return re(new Mi(w,[]));let T=Do(i)===r;return this.processSegment(d,c,C,S,T?Ie:r,!0,w).pipe(he(V=>new Mi(w,V instanceof Mi?[V]:[])))}))):iu(t)))}getChildConfig(e,t,i){return t.children?re({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?re({routes:t._loadedRoutes,injector:t._loadedInjector}):mY(e,t,i,this.urlSerializer).pipe(tn(o=>o?this.configLoader.loadChildren(e,t).pipe(at(r=>{t._loadedRoutes=r.routes,t._loadedInjector=r.injector})):gY(t))):re({routes:[],injector:e})}};function xY(n){n.sort((e,t)=>e.value.outlet===Ie?-1:t.value.outlet===Ie?1:e.value.outlet.localeCompare(t.value.outlet))}function AY(n){let e=n.value.routeConfig;return e&&e.path===""}function U3(n){let e=[],t=new Set;for(let i of n){if(!AY(i)){e.push(i);continue}let o=e.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),t.add(o)):e.push(i)}for(let i of t){let o=U3(i.children);e.push(new Mi(i.value,o))}return e.filter(i=>!t.has(i))}function b3(n){return n.data||{}}function w3(n){return n.resolve||{}}function TY(n,e,t,i,o,r){return tn(s=>EY(n,e,t,i,s.extractedUrl,o,r).pipe(he(({state:a,tree:l})=>I(v({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function IY(n,e){return tn(t=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=t;if(!o.length)return re(t);let r=new Set(o.map(l=>l.route)),s=new Set;for(let l of r)if(!s.has(l))for(let c of j3(l))s.add(c);let a=0;return Ke(s).pipe(vo(l=>r.has(l)?MY(l,i,n,e):(l.data=R0(l,l.parent,n).resolve,re(void 0))),at(()=>a++),Nd(1),tn(l=>a===s.size?re(t):si))})}function j3(n){let e=n.children.map(t=>j3(t)).flat();return[n,...e]}function MY(n,e,t,i){let o=n.routeConfig,r=n._resolve;return o?.title!==void 0&&!O3(o)&&(r[Uf]=o.title),DY(r,n,e,i).pipe(he(s=>(n._resolvedData=s,n.data=R0(n,n.parent,t).resolve,null)))}function DY(n,e,t,i){let o=zS(n);if(o.length===0)return re({});let r={};return Ke(o).pipe(tn(s=>PY(n[s],e,t,i).pipe(Gi(),at(a=>{if(a instanceof Bf)throw O0(new Pf,a);r[s]=a}))),Nd(1),$1(r),bn(s=>B3(s)?si:Lr(s)))}function PY(n,e,t,i){let o=jf(e)??i,r=uu(n,o),s=r.resolve?r.resolve(e,t):So(o,()=>r(e,t));return aa(s)}function VS(n){return li(e=>{let t=n(e);return t?Ke(t).pipe(he(()=>e)):re(e)})}var $3=(()=>{class n{buildTitle(t){let i,o=t.root;for(;o!==void 0;)i=this.getResolvedTitleForRoute(o)??i,o=o.children.find(r=>r.outlet===Ie);return i}getResolvedTitleForRoute(t){return t.data[Uf]}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(RY),providedIn:"root"})}}return n})(),RY=(()=>{class n extends $3{constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static{this.\u0275fac=function(i){return new(i||n)($(d3))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),gx=new Z("",{providedIn:"root",factory:()=>({})}),NY=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275cmp=ne({type:n,selectors:[["ng-component"]],standalone:!0,features:[le],decls:1,vars:0,template:function(i,o){i&1&&b(0,"router-outlet")},dependencies:[fx],encapsulation:2})}}return n})();function bx(n){let e=n.children&&n.children.map(bx),t=e?I(v({},n),{children:e}):v({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ie&&(t.component=NY),t}var wx=new Z(""),OY=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(dS)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return re(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=aa(t.loadComponent()).pipe(he(W3),at(r=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=r}),Us(()=>{this.componentLoaders.delete(t)})),o=new Dd(i,()=>new At).pipe(Md());return this.componentLoaders.set(t,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return re({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let r=LY(i,this.compiler,t,this.onLoadEndListener).pipe(Us(()=>{this.childrenLoaders.delete(i)})),s=new Dd(r,()=>new At).pipe(Md());return this.childrenLoaders.set(i,s),s}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function LY(n,e,t,i){return aa(n.loadChildren()).pipe(he(W3),tn(o=>o instanceof rf||Array.isArray(o)?re(o):Ke(e.compileModuleAsync(o))),he(o=>{i&&i(n);let r,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(r=o.create(t).injector,s=r.get(wx,[],{optional:!0,self:!0}).flat()),{routes:s.map(bx),injector:r}}))}function FY(n){return n&&typeof n=="object"&&"default"in n}function W3(n){return FY(n)?n.default:n}var kx=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(VY),providedIn:"root"})}}return n})(),VY=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),BY=new Z("");var zY=new Z(""),HY=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new At,this.transitionAbortSubject=new At,this.configLoader=L(OY),this.environmentInjector=L(ui),this.urlSerializer=L(hx),this.rootContexts=L(F0),this.location=L(or),this.inputBindingEnabled=L(px,{optional:!0})!==null,this.titleStrategy=L($3),this.options=L(gx,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(kx),this.createViewTransition=L(BY,{optional:!0}),this.navigationErrorHandler=L(zY,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>re(void 0),this.rootComponentType=null;let t=o=>this.events.next(new QS(o)),i=o=>this.events.next(new YS(o));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;this.transitions?.next(I(v(v({},this.transitions.value),t),{id:i}))}setupNavigations(t,i,o){return this.transitions=new en({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Mf,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(un(r=>r.id!==0),he(r=>I(v({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),li(r=>{let s=!1,a=!1;return re(r).pipe(li(l=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Di.SupersededByNewNavigation),si;this.currentTransition=r,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?I(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!c&&d!=="reload"){let f="";return this.events.next(new Ql(l.id,this.urlSerializer.serialize(l.rawUrl),f,$S.IgnoredSameUrlNavigation)),l.resolve(!1),si}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return re(l).pipe(li(f=>{let p=this.transitions?.getValue();return this.events.next(new Of(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions?.getValue()?si:Promise.resolve(f)}),TY(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),at(f=>{r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=I(v({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let p=new M0(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:f,extractedUrl:p,source:g,restoredState:w,extras:k}=l,C=new Of(f,this.urlSerializer.serialize(p),g,w);this.events.next(C);let S=R3(this.rootComponentType).snapshot;return this.currentTransition=r=I(v({},l),{targetSnapshot:S,urlAfterRedirects:p,extras:I(v({},k),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,re(r)}else{let f="";return this.events.next(new Ql(l.id,this.urlSerializer.serialize(l.extractedUrl),f,$S.IgnoredByUrlHandlingStrategy)),l.resolve(!1),si}}),at(l=>{let c=new WS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),he(l=>(this.currentTransition=r=I(v({},l),{guards:KQ(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),r)),rY(this.environmentInjector,l=>this.events.next(l)),at(l=>{if(r.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw O0(this.urlSerializer,l.guardsResult);let c=new qS(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),un(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Di.GuardRejected),!1)),VS(l=>{if(l.guards.canActivateChecks.length)return re(l).pipe(at(c=>{let d=new GS(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),li(c=>{let d=!1;return re(c).pipe(IY(this.paramsInheritanceStrategy,this.environmentInjector),at({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(c,"",Di.NoDataFromResolver)}}))}),at(c=>{let d=new KS(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}))}),VS(l=>{let c=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(at(p=>{d.component=p}),he(()=>{})));for(let p of d.children)f.push(...c(p));return f};return Jb(c(l.targetSnapshot.root)).pipe(Hs(null),Qo(1))}),VS(()=>this.afterPreactivation()),li(()=>{let{currentSnapshot:l,targetSnapshot:c}=r,d=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return d?Ke(d).pipe(he(()=>r)):re(r)}),he(l=>{let c=jQ(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=r=I(v({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,r}),at(()=>{this.events.next(new Ff)}),GQ(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Qo(1),at({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Kl(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Od(this.transitionAbortSubject.pipe(at(l=>{throw l}))),Us(()=>{!s&&!a&&this.cancelNavigationTransition(r,"",Di.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),bn(l=>{if(a=!0,V3(l))this.events.next(new Xr(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode)),qQ(l)?this.events.next(new cu(l.url,l.navigationBehaviorOptions)):r.resolve(!1);else{let c=new Lf(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);try{let d=So(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(d instanceof Bf){let{message:f,cancellationCode:p}=O0(this.urlSerializer,d);this.events.next(new Xr(r.id,this.urlSerializer.serialize(r.extractedUrl),f,p)),this.events.next(new cu(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(c);let f=t.errorHandler(l);r.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(d)}}return si}))}))}cancelNavigationTransition(t,i,o){let r=new Xr(t.id,this.urlSerializer.serialize(t.extractedUrl),i,o);this.events.next(r),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function UY(n){return n!==Mf}var jY=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L($Y),providedIn:"root"})}}return n})(),ux=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},$Y=(()=>{class n extends ux{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Io(n)))(o||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),q3=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:()=>L(WY),providedIn:"root"})}}return n})(),WY=(()=>{class n extends q3{constructor(){super(...arguments),this.location=L(or),this.urlSerializer=L(hx),this.options=L(gx,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(kx),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new es,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=R3(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&t(i.url,i.state)})}handleRouterEvent(t,i){if(t instanceof Of)this.stateMemento=this.createStateMemento();else if(t instanceof Ql)this.rawUrlTree=i.initialUrl;else if(t instanceof M0){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??o,i)}}else t instanceof Ff?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):t instanceof Xr&&(t.code===Di.GuardRejected||t.code===Di.NoDataFromResolver)?this.restoreHistory(i):t instanceof Lf?this.restoreHistory(i,!0):t instanceof Kl&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,i){let o=t instanceof es?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(o)||i.extras.replaceUrl){let r=this.browserPageId,s=v(v({},i.extras.state),this.generateNgRouterState(i.id,r));this.location.replaceState(o,"",s)}else{let r=v(v({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(o,"",r)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,r=this.currentPageId-o;r!==0?this.location.historyGo(r):this.currentUrlTree===t.finalUrl&&r===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Io(n)))(o||n)}})()}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tf=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Tf||{});function qY(n,e){n.events.pipe(un(t=>t instanceof Kl||t instanceof Xr||t instanceof Lf||t instanceof Ql),he(t=>t instanceof Kl||t instanceof Ql?Tf.COMPLETE:(t instanceof Xr?t.code===Di.Redirect||t.code===Di.SupersededByNewNavigation:!1)?Tf.REDIRECTING:Tf.FAILED),un(t=>t!==Tf.REDIRECTING),Qo(1)).subscribe(()=>{e()})}function GY(n){throw n}var KY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},QY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},la=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(r0),this.stateManager=L(q3),this.options=L(gx,{optional:!0})||{},this.pendingTasks=L($r),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(HY),this.urlSerializer=L(hx),this.location=L(or),this.urlHandlingStrategy=L(kx),this._events=new At,this.errorHandler=this.options.errorHandler||GY,this.navigated=!1,this.routeReuseStrategy=L(jY),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(wx,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(px,{optional:!0}),this.eventsSubscription=new zt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let o=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(o!==null&&r!==null){if(this.stateManager.handleRouterEvent(i,r),i instanceof Xr&&i.code!==Di.Redirect&&i.code!==Di.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Kl)this.navigated=!0;else if(i instanceof cu){let s=i.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(i.url,o.currentRawUrl),l=v({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UY(o.source)},s);this.scheduleNavigation(a,Mf,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}ZY(i)&&this._events.next(i)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mf,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",i)},0)})}navigateToSyncWithBrowser(t,i,o){let r={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=v({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(r.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,i,s,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bx),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:o,queryParams:r,fragment:s,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=v(v({},this.currentUrlTree.queryParams),r);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=r||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let p=o?o.snapshot:this.routerState.snapshot.root;f=I3(p)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return M3(f,t,d,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){let o=Rf(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(r,Mf,null,i)}navigate(t,i={skipLocationChange:!1}){return YY(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let o;if(i===!0?o=v({},KY):i===!1?o=v({},QY):o=i,Rf(t))return h3(this.currentUrlTree,t,o);let r=this.parseUrl(t);return h3(this.currentUrlTree,r,o)}removeEmptyProps(t){return Object.entries(t).reduce((i,[o,r])=>(r!=null&&(i[o]=r),i),{})}scheduleNavigation(t,i,o,r,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((f,p)=>{a=f,l=p});let d=this.pendingTasks.add();return qY(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:r,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function YY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new F(4008,!1)}function ZY(n){return!(n instanceof Ff)&&!(n instanceof cu)}var JY=new Z("");function G3(n,...e){return Yd([{provide:wx,multi:!0,useValue:n},[],{provide:sa,useFactory:XY,deps:[la]},{provide:l0,multi:!0,useFactory:eZ},e.map(t=>t.\u0275providers)])}function XY(n){return n.routerState.root}function eZ(){let n=L(Ks);return e=>{let t=n.get(Zr);if(e!==t.components[0])return;let i=n.get(la),o=n.get(tZ);n.get(nZ)===1&&i.initialNavigation(),n.get(iZ,null,Re.Optional)?.setUpPreloading(),n.get(JY,null,Re.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var tZ=new Z("",{factory:()=>new At}),nZ=new Z("",{providedIn:"root",factory:()=>1});var iZ=new Z("");var Ce=class n{route=L(sa);router=L(la);location=L(or);constructor(){}ngOnInit(){console.log("BaseComponent initialized by ",this.constructor.name.replace(/^_/,"")),this.initializeWithAnimation()}initializeWithAnimation(){this.route.queryParams.subscribe(e=>{let t=e.scrollTo;if(t){let i=document.getElementById(t);i&&(document.body.classList.remove("animate-out"),document.body.classList.add("animate-in"),i.scrollIntoView({behavior:"auto"}))}else document.body.classList.remove("animate-out"),document.body.classList.add("animate-in"),window.scrollTo({top:0,behavior:"smooth"})})}navigateWithAnimation(e,t){document.body.classList.remove("animate-in"),document.body.classList.add("animate-out"),setTimeout(()=>{this.router.navigate(e,t)},400)}goBack(){this.location.back()}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ti({type:n})};function oZ(n,e){if(n&1){let t=Ul();u(0,"li")(1,"a",5),R("click",function(){let o=Ao(t).$implicit;return To(o.action())}),m(2),h()()}if(n&2){let t=e.$implicit;wt(2),Qr(t.label)}}function rZ(n,e){if(n&1&&(u(0,"div",3)(1,"ul"),Ii(2,oZ,3,1,"li",4),h()()),n&2){let t=Mo();wt(2),$n("ngForOf",t.menuItems)}}var sr=class n{constructor(e){this.router=e}menuItems=[];isMenuOpen=!1;handleClickOutside(e){e.target.closest(".menu-button-container")||(this.isMenuOpen=!1)}toggleMenu(){this.isMenuOpen=!this.isMenuOpen}static \u0275fac=function(t){return new(t||n)(Ge(la))};static \u0275cmp=ne({type:n,selectors:[["app-menu"]],hostBindings:function(t,i){t&1&&R("click",function(r){return i.handleClickOutside(r)},!1,vO)},inputs:{menuItems:"menuItems"},standalone:!0,features:[le],decls:4,vars:1,consts:[[1,"menu-button-container"],[1,"menu-button",3,"click"],["class","menu",4,"ngIf"],[1,"menu"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"button",1),R("click",function(){return i.toggleMenu()}),m(2," \u22EE "),h(),Ii(3,rZ,3,1,"div",2),h()),t&2&&(wt(3),$n("ngIf",i.isMenuOpen))},dependencies:[Ji,f0,V5],styles:[".menu-button-container[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.menu-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff}.menu[_ngcontent-%COMP%]{position:absolute;width:max-content;top:40px;right:10px;background:#fff;border:1px solid #ccc;z-index:1000}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]})};function It(n){let e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function Pe(n,e){let t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}function hu(n,e){let t=It(n);if(isNaN(t.getTime()))throw new RangeError("Invalid time value");let i=e?.format??"extended",o=e?.representation??"complete",r="",s="",a=i==="extended"?"-":"",l=i==="extended"?":":"";if(o!=="time"){let c=Pe(t.getDate(),2),d=Pe(t.getMonth()+1,2);r=`${Pe(t.getFullYear(),4)}${a}${d}${a}${c}`}if(o!=="date"){let c=t.getTimezoneOffset();if(c!==0){let k=Math.abs(c),C=Pe(Math.trunc(k/60),2),S=Pe(k%60,2);s=`${c<0?"+":"-"}${C}:${S}`}else s="Z";let d=Pe(t.getHours(),2),f=Pe(t.getMinutes(),2),p=Pe(t.getSeconds(),2),g=r===""?"":"T",w=[d,f,p].join(l);r=`${r}${g}${w}${s}`}return r}var B0=class{globalStore;constructor(e){this.globalStore=e}clear(){console.clear()}filterByLabel(e){Q3(e,this.globalStore.cache).forEach(i=>{Wf(i)})}filterByNamespace(...e){Y3(e,this.globalStore.cache).forEach(i=>{Wf(i)})}filterByLevel(e){Z3(e,this.globalStore.cache).forEach(i=>{Wf(i)})}renderAll(){this.globalStore.cache.forEach(e=>{Wf(e)})}};var qf=class{config;pidCounter=1;labels=new Map;_listenerCounter=0;_levelsToListeners=new Map;_cache=[];constructor(e={}){this.config=e}get cache(){return this._cache}get configuration(){return this.config}get pid(){let e=this.pidCounter;return this.pidCounter++,e}get tools(){return new B0(this)}addLogToCache(e){this._cache.length<(this.config.cacheSize??300)&&this._cache.push(e)}clearCache(){this._cache=[]}getLabel(e){return this.labels.get(e)}setLabel(e,t){this.labels.set(e,t)}addListener(e,t){let i=this._listenerCounter+=1;return Gf(v(v({},Pi.levels),this.config.levels??{}),e).forEach(r=>{this._levelsToListeners.has(r)?this._levelsToListeners.get(r).set(i,t):this._levelsToListeners.set(r,new Map([[i,t]]))}),i}removeListener(e){this._levelsToListeners.forEach(t=>{t.delete(e)})}getListeners(e){return Array.from(this._levelsToListeners.get(e)?.values()??[])}};function Kf(n){let e=globalThis.$adzeGlobal;if(sZ(e))return e;let t=new qf(n);return globalThis.$adzeGlobal=t,t}function sZ(n){return n instanceof qf}function mu(){return typeof window<"u"&&typeof window.location<"u"&&typeof window.navigator.userAgent<"u"&&!aZ()}function aZ(){return typeof Deno<"u"}function J3(n){return mu()}function X3(){let n=!1;return mu()&&(n=new URLSearchParams(globalThis.location.search).get("ADZE_ENV")==="test"),globalThis.$ADZE_ENV==="test"||n}function eL(){let n=globalThis;return J3(n)?n.navigator.userAgent.includes("Firefox"):!1}function fu(n){return Object.prototype.toString.call(n)==="[object String]"}function pu(n){return n!==null&&!isNaN(Number(n))}function z0(n){return _x.includes(n)}function tL(n){return oL.includes(n)}function nL(n){return yx.includes(n)}function vx(n){return n.every(e=>fu(e))}function iL(n){return Array.isArray(n)&&n.length===3&&n[1]==="-"}function rL(){return Error().stack?.replace(/^Error\n/,`
`)}function sL(n){return pu(n.activeLevel)?n.activeLevel:n.levels[n.activeLevel].level}var Sx=C1(lL(),1),cL=Sx.default??Sx;function dL(n){return n.charAt(0).toUpperCase()+n.slice(1)}function xx(n){return Object.values(n).map(e=>e.level)}function Ax(n,e,t){return n.filter(i=>i>=e&&i<=t)}function uL(n,e=!1,t){let o=(e&&t?9+t.length:9)-n.length,r=n;for(let s=0;s<=o;s+=1)r+=" ";return r}function hL(n,e){return e.reduce((t,i)=>cL[i](t),n)}function Wf(n){n.data&&console[n.data.method](...n.data.message)}function mL(n){return n.filter(e=>e!=="")}function fL(n){return typeof n=="object"&&n!==null}function Gf(n,e){if(e==="*")return Object.values(n).map(t=>t.level);if(fu(e))return[n[e].level];if(pu(e))return[e];if(iL(e)){if(vx(e)){let t=n[e[0]].level,i=n[e[2]].level;return Ax(xx(n),t,i)}return Ax(xx(n),e[0],e[2])}return Array.isArray(e)&&vx(e)?e.map(t=>n[t].level):e}function Tx(n,e,t){return e.length===0?!1:n==="include"?!e.includes(t):e.includes(t)}function Ix(n,e){return n.length===0?!1:n.length>0&&e.length===0?!0:!e.map(t=>n.includes(t)).includes(!0)}function Mx(n,e){return n.length===0?!1:n.length>0&&e.length===0?!0:e.map(t=>n.includes(t)).includes(!0)}function Q3(n,e){return e.filter(t=>t.data?.label?.name===n)}function Y3(n,e){return e.filter(t=>t.data?.namespace?t.data.namespace.map(o=>n.includes(o)).includes(!0):!1)}function Z3(n,e){return e.filter(t=>{let i=Gf(t.configuration.levels,n);return t.data?.level===void 0?!1:Tx("exclude",i,t.data.level)})}function pL(n){return n&&n.length>0?n.reduce((e,t)=>`${e}#${t} `,""):""}function gL(n){return n?`[${n.name}] `:""}function bL(n){return n!==void 0?`(Count: ${n}) `:""}function wL(n,e){return n!==void 0&&!n?`${e?"\u274C ":""}Assertion failed:`:""}function kL(n,e){return n!==void 0&&n?`${e?"\u2705 ":""}Expression passed:`:""}var vL=typeof self=="object"?self:globalThis,lZ=(n,e)=>{let t=(o,r)=>(n.set(r,o),o),i=o=>{if(n.has(o))return n.get(o);let[r,s]=e[o];switch(r){case 0:case-1:return t(s,o);case 1:{let a=t([],o);for(let l of s)a.push(i(l));return a}case 2:{let a=t({},o);for(let[l,c]of s)a[i(l)]=i(c);return a}case 3:return t(new Date(s),o);case 4:{let{source:a,flags:l}=s;return t(new RegExp(a,l),o)}case 5:{let a=t(new Map,o);for(let[l,c]of s)a.set(i(l),i(c));return a}case 6:{let a=t(new Set,o);for(let l of s)a.add(i(l));return a}case 7:{let{name:a,message:l}=s;return t(new vL[a](l),o)}case 8:return t(BigInt(s),o);case"BigInt":return t(Object(BigInt(s)),o)}return t(new vL[r](s),o)};return i},Nx=n=>lZ(new Map,n)(0);var gu="",{toString:cZ}={},{keys:dZ}=Object,Jf=n=>{let e=typeof n;if(e!=="object"||!n)return[0,e];let t=cZ.call(n).slice(8,-1);switch(t){case"Array":return[1,gu];case"Object":return[2,gu];case"Date":return[3,gu];case"RegExp":return[4,gu];case"Map":return[5,gu];case"Set":return[6,gu]}return t.includes("Array")?[1,t]:t.includes("Error")?[7,t]:[2,t]},W0=([n,e])=>n===0&&(e==="function"||e==="symbol"),uZ=(n,e,t,i)=>{let o=(s,a)=>{let l=i.push(s)-1;return t.set(a,l),l},r=s=>{if(t.has(s))return t.get(s);let[a,l]=Jf(s);switch(a){case 0:{let d=s;switch(l){case"bigint":a=8,d=s.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return o([-1],s)}return o([a,d],s)}case 1:{if(l)return o([l,[...s]],s);let d=[],f=o([a,d],s);for(let p of s)d.push(r(p));return f}case 2:{if(l)switch(l){case"BigInt":return o([l,s.toString()],s);case"Boolean":case"Number":case"String":return o([l,s.valueOf()],s)}if(e&&"toJSON"in s)return r(s.toJSON());let d=[],f=o([a,d],s);for(let p of dZ(s))(n||!W0(Jf(s[p])))&&d.push([r(p),r(s[p])]);return f}case 3:return o([a,s.toISOString()],s);case 4:{let{source:d,flags:f}=s;return o([a,{source:d,flags:f}],s)}case 5:{let d=[],f=o([a,d],s);for(let[p,g]of s)(n||!(W0(Jf(p))||W0(Jf(g))))&&d.push([r(p),r(g)]);return f}case 6:{let d=[],f=o([a,d],s);for(let p of s)(n||!W0(Jf(p)))&&d.push(r(p));return f}}let{message:c}=s;return o([a,{name:l,message:c}],s)};return r},Ox=(n,{json:e,lossy:t}={})=>{let i=[];return uZ(!(e||t),!!e,new Map,i)(n),i};var Lx=typeof structuredClone=="function"?(n,e)=>e&&("json"in e||"lossy"in e)?Nx(Ox(n,e)):structuredClone(n):(n,e)=>Nx(Ox(n,e));function Fx(n,e,t,i){let c=e.exportValues(),{formatters:o,middleware:r=[]}=c,s=Bt(c,["formatters","middleware"]);return class extends n{_cfg=new Yl(I(v({},Lx(s)),{formatters:v({},o),middleware:[...r]}));_modifierData=Lx(t);modifierQueue=[...i]}}function Vx([n,e]){return`${n}s ${e/1e6}ms`}function yL(){return Vx(q0())}function q0(n){let e=performance.now()*.001,t=Math.floor(e),i=Math.floor(e%1*1e9);if(n===void 0)return[t,i];let o=t-n[0],r=i-n[1];return r<0&&(o-=1,r+=1e9),[o,r]}var Po=class{cfg;level;timestampFormatFunction=e=>hu(e);constructor(e,t){this.cfg=e,this.level=t}get timestampFormatter(){return this.cfg.timestampFormatter?this.cfg.timestampFormatter:this.timestampFormatFunction}print(e,t,i){if(this.level.level>sL(this.cfg))return[];if(this.failsFilters(e))return[];if(e.assertion===!0)return[];if(e.if===!1)return[];if(e.method&&!nL(e.method)&&tL(e.method)&&z0(e.method))return i;let o=mu()?this.formatBrowser(e,t,i):this.formatServer(e,t,i);return e.stacktrace&&o.push(e.stacktrace),o}failsFilters(e){return!!(this.failsLevelSelector()||this.failsNamespacesFilter(e)||this.failsLabelsFilter(e))}failsLevelSelector(){if(this.cfg.filters?.levels===void 0)return!1;let e=Gf(this.cfg.levels,this.cfg.filters.levels.values);return!!Tx(this.cfg.filters.levels.type,e,this.level.level)}failsNamespacesFilter(e){if(this.cfg.filters?.namespaces===void 0)return!1;if(this.cfg.filters.namespaces.values.length>0&&e.namespace===void 0)return!0;if(this.cfg.filters.namespaces.type==="include"){let i=e.namespace??[];return Ix(this.cfg.filters.namespaces.values,i)}let t=e.namespace??[];return Mx(this.cfg.filters.namespaces.values,t)}failsLabelsFilter(e){if(this.cfg.filters?.labels===void 0)return!1;if(this.cfg.filters.labels.values.length>0&&e.label===void 0)return!0;let t=e.label?[e.label.name]:[];return this.cfg.filters.labels.type==="include"?Ix(this.cfg.filters.labels.values,t):Mx(this.cfg.filters.labels.values,t)}};var hZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_L=(n,e,t)=>{let i,o=hZ[n];return typeof o=="string"?i=o:e===1?i=o.one:i=o.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function G0(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var mZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},pZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},CL={date:G0({formats:mZ,defaultWidth:"full"}),time:G0({formats:fZ,defaultWidth:"full"}),dateTime:G0({formats:pZ,defaultWidth:"full"})};var gZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},EL=(n,e,t,i)=>gZ[n];function bu(n){return(e,t)=>{let i=t?.context?String(t.context):"standalone",o;if(i==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;o=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;o=n.values[a]||n.values[s]}let r=n.argumentCallback?n.argumentCallback(e):e;return o[r]}}var bZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},kZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},yZ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_Z={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},CZ=(n,e)=>{let t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},SL={ordinalNumber:CZ,era:bu({values:bZ,defaultWidth:"wide"}),quarter:bu({values:wZ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:bu({values:kZ,defaultWidth:"wide"}),day:bu({values:vZ,defaultWidth:"wide"}),dayPeriod:bu({values:yZ,defaultWidth:"wide",formattingValues:_Z,defaultFormattingWidth:"wide"})};function wu(n){return(e,t={})=>{let i=t.width,o=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],r=e.match(o);if(!r)return null;let s=r[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?SZ(a,f=>f.test(s)):EZ(a,f=>f.test(s)),c;c=n.valueCallback?n.valueCallback(l):l,c=t.valueCallback?t.valueCallback(c):c;let d=e.slice(s.length);return{value:c,rest:d}}}function EZ(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function SZ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function xL(n){return(e,t={})=>{let i=e.match(n.matchPattern);if(!i)return null;let o=i[0],r=e.match(n.parsePattern);if(!r)return null;let s=n.valueCallback?n.valueCallback(r[0]):r[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(o.length);return{value:s,rest:a}}}var xZ=/^(\d+)(th|st|nd|rd)?/i,AZ=/\d+/i,TZ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},IZ={any:[/^b/i,/^(a|c)/i]},MZ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},DZ={any:[/1/i,/2/i,/3/i,/4/i]},PZ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},RZ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},NZ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},OZ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},LZ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},FZ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AL={ordinalNumber:xL({matchPattern:xZ,parsePattern:AZ,valueCallback:n=>parseInt(n,10)}),era:wu({matchPatterns:TZ,defaultMatchWidth:"wide",parsePatterns:IZ,defaultParseWidth:"any"}),quarter:wu({matchPatterns:MZ,defaultMatchWidth:"wide",parsePatterns:DZ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:wu({matchPatterns:PZ,defaultMatchWidth:"wide",parsePatterns:RZ,defaultParseWidth:"any"}),day:wu({matchPatterns:NZ,defaultMatchWidth:"wide",parsePatterns:OZ,defaultParseWidth:"any"}),dayPeriod:wu({matchPatterns:LZ,defaultMatchWidth:"any",parsePatterns:FZ,defaultParseWidth:"any"})};var Bx={code:"en-US",formatDistance:_L,formatLong:CL,formatRelative:EL,localize:SL,match:AL,options:{weekStartsOn:0,firstWeekContainsDate:1}};var VZ={};function ca(){return VZ}var BZ=Math.pow(10,8)*24*60*60*1e3,TAe=-BZ,K0=6048e5,TL=864e5;var zZ=3600;var IL=zZ*24,IAe=IL*7,HZ=IL*365.2425,UZ=HZ/12,MAe=UZ*3;function zx(n){let e=It(n);return e.setHours(0,0,0,0),e}function Hx(n){let e=It(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function ML(n,e){let t=zx(n),i=zx(e),o=+t-Hx(t),r=+i-Hx(i);return Math.round((o-r)/TL)}function eo(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function DL(n){let e=It(n),t=eo(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function PL(n){let e=It(n);return ML(e,DL(e))+1}function ts(n,e){let t=ca(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,o=It(n),r=o.getDay(),s=(r<i?7:0)+r-i;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function Zl(n){return ts(n,{weekStartsOn:1})}function Q0(n){let e=It(n),t=e.getFullYear(),i=eo(n,0);i.setFullYear(t+1,0,4),i.setHours(0,0,0,0);let o=Zl(i),r=eo(n,0);r.setFullYear(t,0,4),r.setHours(0,0,0,0);let s=Zl(r);return e.getTime()>=o.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function RL(n){let e=Q0(n),t=eo(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Zl(t)}function NL(n){let e=It(n),t=+Zl(e)-+RL(e);return Math.round(t/K0)+1}function Y0(n,e){let t=It(n),i=t.getFullYear(),o=ca(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,s=eo(n,0);s.setFullYear(i+1,0,r),s.setHours(0,0,0,0);let a=ts(s,e),l=eo(n,0);l.setFullYear(i,0,r),l.setHours(0,0,0,0);let c=ts(l,e);return t.getTime()>=a.getTime()?i+1:t.getTime()>=c.getTime()?i:i-1}function OL(n,e){let t=ca(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,o=Y0(n,e),r=eo(n,0);return r.setFullYear(o,0,i),r.setHours(0,0,0,0),ts(r,e)}function LL(n,e){let t=It(n),i=+ts(t,e)-+OL(t,e);return Math.round(i/K0)+1}var ns={y(n,e){let t=n.getFullYear(),i=t>0?t:1-t;return Pe(e==="yy"?i%100:i,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):Pe(t+1,2)},d(n,e){return Pe(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Pe(n.getHours()%12||12,e.length)},H(n,e){return Pe(n.getHours(),e.length)},m(n,e){return Pe(n.getMinutes(),e.length)},s(n,e){return Pe(n.getSeconds(),e.length)},S(n,e){let t=e.length,i=n.getMilliseconds(),o=Math.trunc(i*Math.pow(10,t-3));return Pe(o,e.length)}};var ku={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Ux={G:function(n,e,t){let i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let i=n.getFullYear(),o=i>0?i:1-i;return t.ordinalNumber(o,{unit:"year"})}return ns.y(n,e)},Y:function(n,e,t,i){let o=Y0(n,i),r=o>0?o:1-o;if(e==="YY"){let s=r%100;return Pe(s,2)}return e==="Yo"?t.ordinalNumber(r,{unit:"year"}):Pe(r,e.length)},R:function(n,e){let t=Q0(n);return Pe(t,e.length)},u:function(n,e){let t=n.getFullYear();return Pe(t,e.length)},Q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return Pe(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return Pe(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){let i=n.getMonth();switch(e){case"M":case"MM":return ns.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){let i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return Pe(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){let o=LL(n,i);return e==="wo"?t.ordinalNumber(o,{unit:"week"}):Pe(o,e.length)},I:function(n,e,t){let i=NL(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):Pe(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):ns.d(n,e)},D:function(n,e,t){let i=PL(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):Pe(i,e.length)},E:function(n,e,t){let i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){let o=n.getDay(),r=(o-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(r);case"ee":return Pe(r,2);case"eo":return t.ordinalNumber(r,{unit:"day"});case"eee":return t.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(o,{width:"short",context:"formatting"});case"eeee":default:return t.day(o,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){let o=n.getDay(),r=(o-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(r);case"cc":return Pe(r,e.length);case"co":return t.ordinalNumber(r,{unit:"day"});case"ccc":return t.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(o,{width:"narrow",context:"standalone"});case"cccccc":return t.day(o,{width:"short",context:"standalone"});case"cccc":default:return t.day(o,{width:"wide",context:"standalone"})}},i:function(n,e,t){let i=n.getDay(),o=i===0?7:i;switch(e){case"i":return String(o);case"ii":return Pe(o,e.length);case"io":return t.ordinalNumber(o,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){let o=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(n,e,t){let i=n.getHours(),o;switch(i===12?o=ku.noon:i===0?o=ku.midnight:o=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(n,e,t){let i=n.getHours(),o;switch(i>=17?o=ku.evening:i>=12?o=ku.afternoon:i>=4?o=ku.morning:o=ku.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return ns.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):ns.H(n,e)},K:function(n,e,t){let i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):Pe(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):Pe(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):ns.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):ns.s(n,e)},S:function(n,e){return ns.S(n,e)},X:function(n,e,t){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return VL(i);case"XXXX":case"XX":return Jl(i);case"XXXXX":case"XXX":default:return Jl(i,":")}},x:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"x":return VL(i);case"xxxx":case"xx":return Jl(i);case"xxxxx":case"xxx":default:return Jl(i,":")}},O:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+FL(i,":");case"OOOO":default:return"GMT"+Jl(i,":")}},z:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+FL(i,":");case"zzzz":default:return"GMT"+Jl(i,":")}},t:function(n,e,t){let i=Math.trunc(n.getTime()/1e3);return Pe(i,e.length)},T:function(n,e,t){let i=n.getTime();return Pe(i,e.length)}};function FL(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),o=Math.trunc(i/60),r=i%60;return r===0?t+String(o):t+String(o)+e+Pe(r,2)}function VL(n,e){return n%60===0?(n>0?"-":"+")+Pe(Math.abs(n)/60,2):Jl(n,e)}function Jl(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),o=Pe(Math.trunc(i/60),2),r=Pe(i%60,2);return t+o+e+r}var BL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},zL=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},jZ=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],i=t[1],o=t[2];if(!o)return BL(n,e);let r;switch(i){case"P":r=e.dateTime({width:"short"});break;case"PP":r=e.dateTime({width:"medium"});break;case"PPP":r=e.dateTime({width:"long"});break;case"PPPP":default:r=e.dateTime({width:"full"});break}return r.replace("{{date}}",BL(i,e)).replace("{{time}}",zL(o,e))},HL={p:zL,P:jZ};var $Z=/^D+$/,WZ=/^Y+$/,qZ=["D","DD","YY","YYYY"];function UL(n){return $Z.test(n)}function jL(n){return WZ.test(n)}function $L(n,e,t){let i=GZ(n,e,t);if(console.warn(i),qZ.includes(n))throw new RangeError(i)}function GZ(n,e,t){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}function WL(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function qL(n){if(!WL(n)&&typeof n!="number")return!1;let e=It(n);return!isNaN(Number(e))}var KZ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QZ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,YZ=/^'([^]*?)'?$/,ZZ=/''/g,JZ=/[a-zA-Z]/;function GL(n,e,t){let i=ca(),o=t?.locale??i.locale??Bx,r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=It(n);if(!qL(a))throw new RangeError("Invalid time value");let l=e.match(QZ).map(d=>{let f=d[0];if(f==="p"||f==="P"){let p=HL[f];return p(d,o.formatLong)}return d}).join("").match(KZ).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let f=d[0];if(f==="'")return{isToken:!1,value:XZ(d)};if(Ux[f])return{isToken:!0,value:d};if(f.match(JZ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});o.localize.preprocessor&&(l=o.localize.preprocessor(a,l));let c={firstWeekContainsDate:r,weekStartsOn:s,locale:o};return l.map(d=>{if(!d.isToken)return d.value;let f=d.value;(!t?.useAdditionalWeekYearTokens&&jL(f)||!t?.useAdditionalDayOfYearTokens&&UL(f))&&$L(f,e,String(n));let p=Ux[f[0]];return p(a,f,o.localize,c)}).join("")}function XZ(n){let e=n.match(YZ);return e?e[1].replace(ZZ,"'"):n}var Z0=class extends Po{timestampFormatFunction=e=>GL(e,"dd/MMM/yyyy:HH:mm:ss xx");formatBrowser(e,t,i){return this.formatMessage(e,t,i)}formatServer(e,t,i){return this.formatMessage(e,t,i)}formatMessage(e,t,i){this.cfg.meta.hostname===void 0&&console.warn(new Error("Adze: 'hostname' is required for the common log format. Please provide this value in your log's meta data."));let o=this.cfg.meta.hostname,r=this.cfg.meta.ident??"-",s=this.cfg.meta.user??"-",a=i[0];return[`${o} ${r} ${s} [${t}] ${a}`]}};var KL=Z0;function QL(n){return typeof n.name=="string"&&typeof n.hostname=="string"}var J0=class extends Po{timestampFormatFunction=e=>hu(e);formatBrowser(e,t,i){return this.formatMessage(e,t,i)}formatServer(e,t,i){return this.formatMessage(e,t,i)}formatMessage(e,t,i){let o=Kf(),r=[...i],s=r.shift();if(QL(this.cfg.meta)){let a=this.cfg.meta,{src:l,err:c,req_id:d,req:f,res:p,latency:g,hostname:w,name:k}=a,C=Bt(a,["src","err","req_id","req","res","latency","hostname","name"]),{namespace:S,label:T}=e,V={v:1,level:this.level.level,levelName:this.level.levelName,name:k,hostname:w,msg:s,args:r,pid:o.pid,time:t,meta:Object.keys(C).length>0?C:void 0,namespace:S,label:T?.name,src:l,err:c,req_id:d,req:f,res:p,latency:g};return[JSON.stringify(V)]}return console.warn(new Error("Adze: Required fields are missing from the log meta for generating a JSON log.")),[...r]}};var YL=J0;var X0=class extends Po{formatBrowser(e,t,i){let o=this.formatLeader(),r=this.formatMeta(e,t);return this.cfg.withEmoji?[o,"font-size: 12px;",this.level.style,r,...i]:[o,this.level.style,r,...i]}formatServer(e,t,i){let o=[],s=`${uL(this.formatLeader(!1),this.cfg.withEmoji,this.level.emoji)} `,a=this.formatMeta(e,t),l=hL(s,this.level.terminalStyle);return o.push(l),a!==""&&o.push(a),[l,a,...i]}formatLeader(e=!0){let t=e?"%c":"",i=" "+dL(this.level.levelName);return this.cfg.withEmoji?`${t}${this.formatEmoji(e)}${t}${i}`:`${t}${i}`}formatEmoji(e){let t=e?" ":"";return this.level.emoji?`${this.level.emoji}${t}`:""}formatMeta(e,t){let i=this.cfg.showTimestamp?`${t} `:"",o=pL(e.namespace),r=gL(e.label),s=this.formatTime(e),a=bL(e.label?.count),l=wL(e.assertion,this.cfg.withEmoji),c=kL(e.if,this.cfg.withEmoji),d=l!==""?l:c!==""?c:"";return i+o+r+s+a+d}formatTime(e){let t=this.cfg.withEmoji?"\u23F1 ":"Time elapsed: ";return e.timeNow?`(${t}${e.timeNow})`:e.label?.timeElapsed?`(${t}${e.label.timeElapsed})`:""}};var jx=X0;var Xf=class extends Po{timestampFormatFunction=e=>hu(e);formatBrowser(e,t,i){return this.formatMessage(t,e,i)}formatServer(e,t,i){return this.formatMessage(t,e,i)}formatMessage(e,t,i){let o="",{appname:r,hostname:s,port:a}=this.cfg.meta,l=pu(a)?`/${a}`:"",c=fu(r)?`${r}${l}`:"",d=fu(s)?` on ${s}: `:"",f=this.formatNamespace(t.namespace),p=t.label?`[${t.label.name}] `:"";return o=`${c}${d}${f}${p}`,[`[${e}] ${this.level.levelName.toUpperCase()}: ${o}${i[0]} `,i.map(g=>fL(g)?JSON.stringify(g):g).slice(1).join(" ")]}formatNamespace(e){return e&&e.length>0?`${e.reduce((i,o,r)=>r===e.length-1?`${i}${o}`:`${i}${o}/`,"")} `:""}};var yx=["group","groupCollapsed"],ZL=["dir","dirxml","table",...yx],_x=["error","warn","info","log","debug",...ZL],Cx=["clear","groupEnd"],oL=[...ZL,...Cx],M2e=[..._x,...Cx];var Pi={activeLevel:"log",cache:!1,cacheSize:300,dump:!1,format:"pretty",meta:{},middleware:[],showTimestamp:!1,silent:!1,withEmoji:!1,levels:{alert:eJ(),error:tJ(),warn:nJ(),info:iJ(),fail:oJ(),success:rJ(),log:sJ(),debug:aJ(),verbose:lJ()},formatters:{default:jx,pretty:jx,standard:Xf,common:KL,json:YL}};function eJ(n={}){return v({levelName:"alert",level:0,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fc8585, #fc2323); color: #fff; border-color: #b70101;",terminalStyle:["white","bold","bgRed"],method:"error",emoji:"\u{1F6A8}"},n)}function tJ(n={}){return v({levelName:"error",level:1,style:"padding-right: 24px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #fff, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"error",emoji:"\u{1F525}"},n)}function nJ(n={}){return v({levelName:"warn",level:2,style:`font-size: 12px; border-radius: 4px;  background: linear-gradient(to right, #fff, #fff0a8); color: #715100; border-color: #e3d696; padding-right: ${eL()?"44px":"30px"};`,terminalStyle:["white","bgYellow"],method:"warn",emoji:"\u{1F514}"},n)}function iJ(n={}){return v({levelName:"info",level:3,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #d8ebff, #b2d7ff); color: #465464; border-color: #96b5d7;",terminalStyle:["white","bgBlue"],method:"info",emoji:"\u2139\uFE0F"},n)}function oJ(n={}){return v({levelName:"fail",level:4,style:"padding-right: 44px; font-size: 12px; border-radius: 4px; background: linear-gradient(to right, #ffe8e8, #ffd1d1); color: #a4000f; border-color: #e3bbbb;",terminalStyle:["white","bgRed"],method:"info",emoji:"\u274C"},n)}function rJ(n={}){return v({levelName:"success",level:5,style:"font-size: 12px; border-radius: 4px; padding-right: 22px; background: linear-gradient(to right, #e6f6e4, #ceedc9); color: #4e594d; border-color: #b7d1b3;",terminalStyle:["white","bgGreen"],method:"info",emoji:"\u{1F389}"},n)}function sJ(n={}){return v({levelName:"log",level:6,style:"font-size: 12px; border-radius: 4px; padding-right: 51px; background: linear-gradient(to right, #ecedef, #d9dce0); color: #333435; border-color: #bfc1c5;",terminalStyle:["white","bgBlackBright"],method:"log",emoji:"\u{1FAB5}"},n)}function aJ(n={}){return v({levelName:"debug",level:7,style:"font-size: 12px; padding-right: 36px; border-right: 1px solid #d9dce0; color: #465464; border-color: #999999;",terminalStyle:["white","bgBlack"],method:"debug",emoji:"\u{1F41E}"},n)}function lJ(n={}){return v({levelName:"verbose",level:8,style:"font-size: 12px; padding-right: 22px; color: #999999;",terminalStyle:["black","italic"],method:"debug",emoji:"\u{1F4AC}"},n)}var Yl=class{logCfg;glblCfg;constructor(e){this.logCfg=e??{},this.glblCfg=globalThis.$adzeGlobal?.configuration}updateConfiguration(e){this.logCfg=e}get activeLevel(){return this.glblCfg?.activeLevel??this.logCfg.activeLevel??Pi.activeLevel}set activeLevel(e){this.logCfg.activeLevel=e}get cache(){return this.glblCfg?.cache??this.logCfg.cache??Pi.cache}set cache(e){this.logCfg.cache=e}get cacheSize(){return this.glblCfg?.cacheSize??this.logCfg.cacheSize??Pi.cacheSize}set cacheSize(e){this.logCfg.cacheSize=e}get dump(){return this.glblCfg?.dump??this.logCfg.dump??Pi.dump}set dump(e){this.logCfg.dump=e}get meta(){return v(v({},this.logCfg.meta),this.glblCfg?.meta)}set meta(e){this.logCfg.meta=e}get silent(){return this.glblCfg?.silent??this.logCfg.silent??Pi.silent}set silent(e){this.logCfg.silent=e}get showTimestamp(){return this.glblCfg?.showTimestamp??this.logCfg.showTimestamp??Pi.showTimestamp}set showTimestamp(e){this.logCfg.showTimestamp=e}get withEmoji(){return this.glblCfg?.withEmoji??this.logCfg.withEmoji??Pi.withEmoji}set withEmoji(e){this.logCfg.withEmoji=e}get format(){return this.glblCfg?.format??this.logCfg.format??Pi.format}set format(e){this.logCfg.format=e}get levels(){return v(v(v({},Pi.levels),this.logCfg.levels??{}),this.glblCfg?.levels??{})}set levels(e){this.logCfg.levels=e}get middleware(){return[...this.glblCfg?.middleware??[],...this.logCfg.middleware??[]]}set middleware(e){this.logCfg.middleware=e}get filters(){return this.glblCfg?.filters??this.logCfg.filters}set filters(e){this.logCfg.filters=e}get timestampFormatter(){return this.glblCfg?.timestampFormatter??this.logCfg.timestampFormatter}set timestampFormatter(e){this.logCfg.timestampFormatter=e}get formatters(){return v(v(v({},Pi.formatters),this.logCfg.formatters??{}),this.glblCfg?.formatters??{})}set formatters(e){this.logCfg.formatters=e}exportValues(){return{activeLevel:this.logCfg.activeLevel,cache:this.logCfg.cache,cacheSize:this.logCfg.cacheSize,dump:this.logCfg.dump,meta:this.logCfg.meta,silent:this.logCfg.silent,showTimestamp:this.logCfg.showTimestamp,withEmoji:this.logCfg.withEmoji,format:this.logCfg.format,levels:this.logCfg.levels,middleware:this.logCfg.middleware,filters:this.logCfg.filters,timestampFormatter:this.logCfg.timestampFormatter,formatters:this.logCfg.formatters}}};function cJ(n){return typeof n=="function"}var ek=class n{globalStore;_cfg;_modifierData;_data;modifierQueue=[];constructor(e={},t){this.globalStore=Kf(e),this._modifierData=t??{},this._cfg=new Yl(e),this.doHook(i=>{i.constructed&&i.constructed(this)})}get data(){return this._data}get modifierData(){return this._modifierData}get configuration(){return this._cfg}alert(...e){this.terminate("alert",e)}static alert(...e){new this().alert(...e)}error(...e){this.terminate("error",e)}static error(...e){new this().error(...e)}warn(...e){this.terminate("warn",e)}static warn(...e){new this().warn(...e)}info(...e){this.terminate("info",e)}static info(...e){new this().info(...e)}fail(...e){this.terminate("fail",e)}static fail(...e){new this().fail(...e)}success(...e){this.terminate("success",e)}static success(...e){new this().success(...e)}log(...e){this.terminate("log",e)}static log(e,...t){new this().log(e,...t)}debug(...e){this.terminate("debug",e)}static debug(...e){new this().debug(...e)}verbose(...e){this.terminate("verbose",e)}static verbose(...e){new this().verbose(...e)}clear(){console.clear()}static clear(){console.clear()}clr(){console.clear()}static clr(){console.clear()}custom(e,...t){return this._cfg.levels[e]?(this.terminate(e,t),this):(console.warn(new Error("Custom log level not found in configuration.")),this)}static custom(e,...t){return new this().custom(e,...t)}seal(e){return e&&this._cfg.updateConfiguration(e),Fx(n,this._cfg,this.modifierData,this.modifierQueue)}static seal(e){return new this().seal(e)}sealTag(e,t){return this._cfg=new Yl(v(v({},this._cfg.exportValues()),t)),(i,...o)=>{let r=String.raw({raw:i},...o),s=Fx(n,this._cfg,this.modifierData,this.modifierQueue),a=e;cJ(s[a])&&s[a](r)}}static sealTag(e,t){return new this().sealTag(e,t)}thread(e,t){this.runModifierQueue(),this._modifierData.label&&(this._modifierData.label.context||(this._modifierData.label.context={}),this._modifierData.label.context=I(v({},this._modifierData.label.context),{[e]:t}))}static thread(e,t){new this().thread(e,t)}assert(e){return this.modifierQueue.push(["assert",t=>(t.assertion=e,t)]),this}static assert(e){return new this().assert(e)}get closeThread(){return this.modifierQueue.push(["closeThread",e=>(e.label?.context&&(e.label.context=void 0),e)]),this}static get closeThread(){return new this().closeThread}get count(){return this.modifierQueue.push(["count",e=>(e.label&&(e.label.count=e.label.count!==void 0?e.label.count+1:1),e)]),this}static get count(){return new this().count}get countClear(){return this.modifierQueue.push(["countClear",e=>(e.label&&delete e.label.count,e)]),this}static get countClear(){return new this().countClear}get countReset(){return this.modifierQueue.push(["countReset",e=>(e.label&&(e.label.count=0),e)]),this}static get countReset(){return new this().countReset}get dir(){return this.modifierQueue.push(["dir",e=>(e.method="dir",e)]),this}static get dir(){return new this().dir}get dirxml(){return this.modifierQueue.push(["dirxml",e=>(e.method="dirxml",e)]),this}static get dirxml(){return new this().dirxml}get dump(){return this.modifierQueue.push(["dump",(e,t)=>(t._cfg.dump=!0,e)]),this}static get dump(){return new this().dump}format(e){return this.modifierQueue.push(["format",(t,i)=>Object.keys(i._cfg.formatters).includes(e)?(i._cfg.format=e,t):(console.warn(new Error(`Adze: Formatter "${e}" not found in configuration.`)),t)]),this}static format(e){return new this().format(e)}get group(){return this.modifierQueue.push(["group",e=>(e.method="group",e)]),this}static get group(){return new this().group}get groupCollapsed(){return this.modifierQueue.push(["groupCollapsed",e=>(e.method="groupCollapsed",e)]),this}static get groupCollapsed(){return new this().groupCollapsed}get groupEnd(){return this.modifierQueue.push(["groupEnd",e=>(e.method="groupEnd",e)]),this}static get groupEnd(){return new this().groupEnd}if(e){return this.modifierQueue.push(["if",t=>(t.if=e,t)]),this}static if(e){return new this().if(e)}test(e){return this.if(e)}static test(e){return new this().if(e)}label(e){return this.modifierQueue.unshift(["label",t=>{let i=this.globalStore.getLabel(e)??{name:e};return t.label=i,this.globalStore.setLabel(e,i),t}]),this}static label(e){return new this().label(e)}meta(e){return this.modifierQueue.push(["meta",(t,i)=>(i._cfg.meta=v(v({},i._cfg.meta),e),t)]),this}static meta(e){return new this().meta(e)}namespace(...e){return this.modifierQueue.push(["namespace",t=>{let i=t.namespace??[];return t.namespace=i.length>0?[...i,...e]:e,t}]),this}static namespace(...e){return new this().namespace(...e)}ns(...e){return this.namespace(...e)}static ns(...e){return new this().namespace(...e)}get silent(){return this.modifierQueue.push(["silent",(e,t)=>(t._cfg.silent=!0,e)]),this}static get silent(){return new this().silent}get table(){return this.modifierQueue.push(["table",e=>(e.method="table",e)]),this}static get table(){return new this().table}get time(){return this.modifierQueue.push(["time",e=>{let t=q0();return e.label&&(e.label.timeStart=t),e}]),this}static get time(){return new this().time}get timeEnd(){return this.modifierQueue.push(["timeEnd",e=>(e.label?.timeStart&&(e.label.timeElapsed=Vx(q0(e.label.timeStart))),e)]),this}static get timeEnd(){return new this().timeEnd}get timeNow(){return this.modifierQueue.push(["timeNow",e=>(e.timeNow=yL(),e)]),this}static get timeNow(){return new this().timeNow}get timestamp(){return this.modifierQueue.push(["timestamp",(e,t)=>(t._cfg.showTimestamp=!0,e)]),this}static get timestamp(){return new this().timestamp}get trace(){return this.modifierQueue.push(["trace",e=>(e.stacktrace=rL(),e)]),this}static get trace(){return new this().trace}get withEmoji(){return this.modifierQueue.push(["withEmoji",(e,t)=>(t._cfg.withEmoji=!0,e)]),this}static get withEmoji(){return new this().withEmoji}print(e){X3()||e.silent||e.message.length<1||(z0(e.method)?console[e.method](...e.message):console[e.method]())}terminate(e,t){this.doHook(T=>{T.beforeTerminated&&T.beforeTerminated(this,e,t)}),this.runModifierQueue();let i=this.getLevelConfig(e),o=this.selectFormatter(this._cfg.format),r=new o(this._cfg,i),s=r.timestampFormatter(new Date),a=mL(r.print(this.modifierData,s,t));this._cfg.dump&&this.modifierData.label?.context&&a.push(this.modifierData.label.context),this.doHook(T=>{T.beforeFormatApplied&&(a=T.beforeFormatApplied(this,this._cfg.format,a))});let{activeLevel:l,cache:c,cacheSize:d,dump:f,format:p,meta:g,showTimestamp:w,silent:k,withEmoji:C}=this._cfg,S=I(v(v({activeLevel:l,cache:c,cacheSize:d,dump:f,format:p,meta:g,showTimestamp:w,silent:k,withEmoji:C},i),this._modifierData),{terminator:e,args:t,timestamp:s,message:a});this.doHook(T=>{T.afterFormatApplied&&T.afterFormatApplied(this,this._cfg.format,a)}),this._data=S,this._cfg.cache&&this.globalStore.addLogToCache(this),this.doHook(T=>{T.beforePrint&&T.beforePrint(this)}),this.print(this._data),this.doHook(T=>{T.afterTerminated&&T.afterTerminated(this,e,t)}),this.globalStore.getListeners(i.level).forEach(T=>{T(this)})}selectFormatter(e){return this._cfg.formatters[e]}getLevelConfig(e){return this._cfg.levels[e]}runModifierQueue(){this.modifierQueue.forEach(([e,t])=>{let i=t(this.modifierData,this);this.doHook(o=>{o.beforeModifierApplied&&o.beforeModifierApplied(this,e,i)}),this._modifierData=i,this.doHook(o=>{o.afterModifierApplied&&o.afterModifierApplied(this,e,i)})})}doHook(e){this._cfg.middleware?.forEach(t=>{e(t)})}};var dJ=["black","red","green","yellow","blue","magenta","cyan","white","gray","blackBright","redBright","greenBright","yellowBright","blueBright","magentaBright","cyanBright","whiteBright","bgBlack","bgRed","bgGreen","bgYellow","bgBlue","bgMagenta","bgCyan","bgWhite","bgBlackBright","bgRedBright","bgGreenBright","bgYellowBright","bgBlueBright","bgMagentaBright","bgCyanBright","bgWhiteBright","reset","bold","dim","italic","underline","inverse","hidden","strikethrough"],q2e=Object.freeze(dJ);var tk=ek;var qk={};wo(qk,{blockAPICallsBeforeInitialize:()=>$k,blockAcquireTokenInPopups:()=>O4,blockNonBrowserEnvironment:()=>jk,blockRedirectInIframe:()=>N4,blockReloadInHiddenIframes:()=>R4,clearHash:()=>tT,createGuid:()=>oT,getCurrentUri:()=>Zn,getHomepage:()=>iT,invoke:()=>Kn,invokeAsync:()=>P,isInIframe:()=>jp,isInPopup:()=>P4,preconnect:()=>Wp,preflightCheck:()=>$p,redirectPreflightCheck:()=>Wk,replaceHash:()=>nT});var x={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},vu={SUCCESS:200,SUCCESS_RANGE_START:200,SUCCESS_RANGE_END:299,REDIRECT:302,CLIENT_ERROR:400,CLIENT_ERROR_RANGE_START:400,BAD_REQUEST:400,UNAUTHORIZED:401,NOT_FOUND:404,REQUEST_TIMEOUT:408,TOO_MANY_REQUESTS:429,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR:500,SERVER_ERROR_RANGE_START:500,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,SERVER_ERROR_RANGE_END:599,MULTI_SIDED_ERROR:600},Ri=[x.OPENID_SCOPE,x.PROFILE_SCOPE,x.OFFLINE_ACCESS_SCOPE],$x=[...Ri,x.EMAIL_SCOPE],$t={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Wt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},Ro={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},yu={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},yt={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},nk={PLAIN:"plain",S256:"S256"},No={QUERY:"query",FRAGMENT:"fragment"},Wx=I(v({},No),{FORM_POST:"form_post"}),ep={IMPLICIT_GRANT:"implicit",AUTHORIZATION_CODE_GRANT:"authorization_code",CLIENT_CREDENTIALS_GRANT:"client_credentials",RESOURCE_OWNER_PASSWORD_GRANT:"password",REFRESH_TOKEN_GRANT:"refresh_token",DEVICE_CODE_GRANT:"device_code",JWT_BEARER:"urn:ietf:params:oauth:grant-type:jwt-bearer"},_u={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",MSAV1_ACCOUNT_TYPE:"MSA",GENERIC_ACCOUNT_TYPE:"Generic"},Ht={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ae={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"};var tp="appmetadata",JL="client_info",da="1",Cu={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Wn={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},nn={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Fe={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},is={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},ik={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ok={username:"username",password:"password"},np={httpSuccess:200,httpBadRequest:400},Xl={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},rk={CONFIGURED_MATCHES_DETECTED:"1",CONFIGURED_NO_AUTO_DETECTION:"2",CONFIGURED_NOT_DETECTED:"3",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Oo={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},sk={Jwt:"JWT",Jwk:"JWK",Pop:"pop"};var qx=300;var ec={};wo(ec,{postRequestFailed:()=>op,unexpectedError:()=>ip});var ip="unexpected_error",op="post_request_failed";var ak={[ip]:"Unexpected error in authentication.",[op]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."},XL={unexpectedError:{code:ip,desc:ak[ip]},postRequestFailed:{code:op,desc:ak[op]}},xe=class n extends Error{constructor(e,t,i){let o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,n.prototype),this.errorCode=e||x.EMPTY_STRING,this.errorMessage=t||x.EMPTY_STRING,this.subError=i||x.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}};function rp(n,e){return new xe(n,e?`${ak[n]} ${e}`:ak[n])}var on={};wo(on,{authTimeNotFound:()=>os,authorizationCodeMissingFromServerResponse:()=>pc,bindingKeyNotRemoved:()=>gc,cannotAppendScopeSet:()=>hc,cannotRemoveEmptyScope:()=>uc,clientInfoDecodingError:()=>ua,clientInfoEmptyError:()=>tc,deviceCodeExpired:()=>cp,deviceCodePollingCancelled:()=>lp,deviceCodeUnknownError:()=>dp,emptyInputScopeSet:()=>fa,endSessionEndpointNotSupported:()=>bc,endpointResolutionError:()=>qn,hashNotDeserialized:()=>rc,invalidAssertion:()=>mp,invalidCacheEnvironment:()=>ss,invalidCacheRecord:()=>mc,invalidClientCredential:()=>fp,invalidState:()=>Lo,keyIdMissing:()=>wc,maxAgeTranspired:()=>lc,methodNotImplemented:()=>ke,missingTenantIdError:()=>wp,multipleMatchingAccounts:()=>ap,multipleMatchingAppMetadata:()=>cc,multipleMatchingTokens:()=>sp,nestedAppAuthBridgeDisabled:()=>kp,networkError:()=>ic,noAccountFound:()=>up,noAccountInSilentRequest:()=>rs,noCryptoObject:()=>pa,noNetworkConnectivity:()=>gp,nonceMismatch:()=>ac,nullOrEmptyToken:()=>nc,openIdConfigError:()=>oc,requestCannotBeMade:()=>dc,stateMismatch:()=>sc,stateNotFound:()=>ma,tokenClaimsCnfRequiredForSignedJwt:()=>fc,tokenParsingError:()=>ha,tokenRefreshRequired:()=>ar,unexpectedCredentialType:()=>hp,userCanceled:()=>bp,userTimeoutReached:()=>pp});var ua="client_info_decoding_error",tc="client_info_empty_error",ha="token_parsing_error",nc="null_or_empty_token",qn="endpoints_resolution_error",ic="network_error",oc="openid_config_error",rc="hash_not_deserialized",Lo="invalid_state",sc="state_mismatch",ma="state_not_found",ac="nonce_mismatch",os="auth_time_not_found",lc="max_age_transpired",sp="multiple_matching_tokens",ap="multiple_matching_accounts",cc="multiple_matching_appMetadata",dc="request_cannot_be_made",uc="cannot_remove_empty_scope",hc="cannot_append_scopeset",fa="empty_input_scopeset",lp="device_code_polling_cancelled",cp="device_code_expired",dp="device_code_unknown_error",rs="no_account_in_silent_request",mc="invalid_cache_record",ss="invalid_cache_environment",up="no_account_found",pa="no_crypto_object",hp="unexpected_credential_type",mp="invalid_assertion",fp="invalid_client_credential",ar="token_refresh_required",pp="user_timeout_reached",fc="token_claims_cnf_required_for_signedjwt",pc="authorization_code_missing_from_server_response",gc="binding_key_not_removed",bc="end_session_endpoint_not_supported",wc="key_id_missing",gp="no_network_connectivity",bp="user_canceled",wp="missing_tenant_id_error",ke="method_not_implemented",kp="nested_app_auth_bridge_disabled";var ve={[ua]:"The client info could not be parsed/decoded correctly",[tc]:"The client info was empty",[ha]:"Token cannot be parsed",[nc]:"The token is null or empty",[qn]:"Endpoints cannot be resolved",[ic]:"Network request failed",[oc]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[rc]:"The hash parameters could not be deserialized",[Lo]:"State was not the expected format",[sc]:"State mismatch error",[ma]:"State not found",[ac]:"Nonce mismatch error",[os]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[lc]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[sp]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ap]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[cc]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[dc]:"Token request cannot be made without authorization code or refresh token.",[uc]:"Cannot remove null or empty scope from ScopeSet",[hc]:"Cannot append ScopeSet",[fa]:"Empty input ScopeSet cannot be processed",[lp]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[cp]:"Device code is expired.",[dp]:"Device code stopped polling for unknown reasons.",[rs]:"Please pass an account object, silent flow is not supported without account information",[mc]:"Cache record object was null or undefined.",[ss]:"Invalid environment when attempting to create cache entry",[up]:"No account found in cache for given key.",[pa]:"No crypto object detected.",[hp]:"Unexpected credential type.",[mp]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[fp]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[ar]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[pp]:"User defined timeout for device code polling reached",[fc]:"Cannot generate a POP jwt if the token_claims are not populated",[pc]:"Server response does not contain an authorization code to proceed",[gc]:"Could not remove the credential's binding key from storage.",[bc]:"The provided authority does not support logout",[wc]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[gp]:"No network connectivity. Check your internet connection.",[bp]:"User cancelled the flow.",[wp]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ke]:"This method has not been implemented",[kp]:"The nested app auth bridge is disabled"},e4={clientInfoDecodingError:{code:ua,desc:ve[ua]},clientInfoEmptyError:{code:tc,desc:ve[tc]},tokenParsingError:{code:ha,desc:ve[ha]},nullOrEmptyToken:{code:nc,desc:ve[nc]},endpointResolutionError:{code:qn,desc:ve[qn]},networkError:{code:ic,desc:ve[ic]},unableToGetOpenidConfigError:{code:oc,desc:ve[oc]},hashNotDeserialized:{code:rc,desc:ve[rc]},invalidStateError:{code:Lo,desc:ve[Lo]},stateMismatchError:{code:sc,desc:ve[sc]},stateNotFoundError:{code:ma,desc:ve[ma]},nonceMismatchError:{code:ac,desc:ve[ac]},authTimeNotFoundError:{code:os,desc:ve[os]},maxAgeTranspired:{code:lc,desc:ve[lc]},multipleMatchingTokens:{code:sp,desc:ve[sp]},multipleMatchingAccounts:{code:ap,desc:ve[ap]},multipleMatchingAppMetadata:{code:cc,desc:ve[cc]},tokenRequestCannotBeMade:{code:dc,desc:ve[dc]},removeEmptyScopeError:{code:uc,desc:ve[uc]},appendScopeSetError:{code:hc,desc:ve[hc]},emptyInputScopeSetError:{code:fa,desc:ve[fa]},DeviceCodePollingCancelled:{code:lp,desc:ve[lp]},DeviceCodeExpired:{code:cp,desc:ve[cp]},DeviceCodeUnknownError:{code:dp,desc:ve[dp]},NoAccountInSilentRequest:{code:rs,desc:ve[rs]},invalidCacheRecord:{code:mc,desc:ve[mc]},invalidCacheEnvironment:{code:ss,desc:ve[ss]},noAccountFound:{code:up,desc:ve[up]},noCryptoObj:{code:pa,desc:ve[pa]},unexpectedCredentialType:{code:hp,desc:ve[hp]},invalidAssertion:{code:mp,desc:ve[mp]},invalidClientCredential:{code:fp,desc:ve[fp]},tokenRefreshRequired:{code:ar,desc:ve[ar]},userTimeoutReached:{code:pp,desc:ve[pp]},tokenClaimsRequired:{code:fc,desc:ve[fc]},noAuthorizationCodeFromServer:{code:pc,desc:ve[pc]},bindingKeyNotRemovedError:{code:gc,desc:ve[gc]},logoutNotSupported:{code:bc,desc:ve[bc]},keyIdMissing:{code:wc,desc:ve[wc]},noNetworkConnectivity:{code:gp,desc:ve[gp]},userCanceledError:{code:bp,desc:ve[bp]},missingTenantIdError:{code:wp,desc:ve[wp]},nestedAppAuthBridgeDisabled:{code:kp,desc:ve[kp]}},kc=class n extends xe{constructor(e,t){super(e,t?`${ve[e]}: ${t}`:ve[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,n.prototype)}};function D(n,e){return new kc(n,e)}var ga={createNewGuid:()=>{throw D(ke)},base64Decode:()=>{throw D(ke)},base64Encode:()=>{throw D(ke)},base64UrlEncode:()=>{throw D(ke)},encodeKid:()=>{throw D(ke)},getPublicKeyThumbprint(){return E(this,null,function*(){throw D(ke)})},removeTokenBindingKey(){return E(this,null,function*(){throw D(ke)})},clearKeystore(){return E(this,null,function*(){throw D(ke)})},signJwt(){return E(this,null,function*(){throw D(ke)})},hashString(){return E(this,null,function*(){throw D(ke)})}};var st=function(n){return n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace",n}(st||{}),gi=class n{constructor(e,t,i){this.level=st.Info;let o=()=>{},r=e||n.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||o,this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level=typeof r.logLevel=="number"?r.logLevel:st.Info,this.correlationId=r.correlationId||x.EMPTY_STRING,this.packageName=t||x.EMPTY_STRING,this.packageVersion=i||x.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:st.Info}}clone(e,t,i){return new n({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:i||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;let r=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${st[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,r,t.containsPii||!1)}executeCallback(e,t,i){this.localCallback&&this.localCallback(e,t,i)}error(e,t){this.logMessage(e,{logLevel:st.Error,containsPii:!1,correlationId:t||x.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:st.Error,containsPii:!0,correlationId:t||x.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:st.Warning,containsPii:!1,correlationId:t||x.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:st.Warning,containsPii:!0,correlationId:t||x.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:st.Info,containsPii:!1,correlationId:t||x.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:st.Info,containsPii:!0,correlationId:t||x.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:st.Verbose,containsPii:!1,correlationId:t||x.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:st.Verbose,containsPii:!0,correlationId:t||x.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:st.Trace,containsPii:!1,correlationId:t||x.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:st.Trace,containsPii:!0,correlationId:t||x.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}};var lk="@azure/msal-common",Eu="14.16.0";var ba={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net",AzureChina:"https://login.chinacloudapi.cn",AzureGermany:"https://login.microsoftonline.de",AzureUsGovernment:"https://login.microsoftonline.us"};var mt={};wo(mt,{createAccessTokenEntity:()=>Qx,createIdTokenEntity:()=>Kx,createRefreshTokenEntity:()=>Yx,generateAppMetadataKey:()=>_J,generateAuthorityMetadataExpiresAt:()=>dk,generateCredentialKey:()=>_p,isAccessTokenEntity:()=>hJ,isAppMetadataEntity:()=>CJ,isAuthorityMetadataEntity:()=>EJ,isAuthorityMetadataExpired:()=>uk,isCredentialEntity:()=>ck,isIdTokenEntity:()=>mJ,isRefreshTokenEntity:()=>fJ,isServerTelemetryEntity:()=>vJ,isThrottlingEntity:()=>yJ,updateAuthorityEndpointMetadata:()=>xu,updateCloudDiscoveryMetadata:()=>Cp});var wa={};wo(wa,{checkMaxAge:()=>vp,extractTokenClaims:()=>as,getJWSPayload:()=>t4});function as(n,e){let t=t4(n);try{let i=e(t);return JSON.parse(i)}catch{throw D(ha)}}function t4(n){if(!n)throw D(nc);let t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw D(ha);return t[2]}function vp(n,e){if(e===0||Date.now()-3e5>n+e)throw D(lc)}var yp={};wo(yp,{delay:()=>uJ,isTokenExpired:()=>Su,nowSeconds:()=>Ni,wasClockTurnedBack:()=>Gx});function Ni(){return Math.round(new Date().getTime()/1e3)}function Su(n,e){let t=Number(n)||0;return Ni()+e>t}function Gx(n){return Number(n)>Ni()}function uJ(n,e){return new Promise(t=>setTimeout(()=>t(e),n))}function _p(n){return[pJ(n),gJ(n),bJ(n),wJ(n),kJ(n)].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}function Kx(n,e,t,i,o){return{credentialType:ae.ID_TOKEN,homeAccountId:n,environment:e,clientId:i,secret:t,realm:o}}function Qx(n,e,t,i,o,r,s,a,l,c,d,f,p,g,w){let k={homeAccountId:n,credentialType:ae.ACCESS_TOKEN,secret:t,cachedAt:Ni().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:i,realm:o,target:r,tokenType:d||Fe.BEARER};if(f&&(k.userAssertionHash=f),c&&(k.refreshOn=c.toString()),g&&(k.requestedClaims=g,k.requestedClaimsHash=w),k.tokenType?.toLowerCase()!==Fe.BEARER.toLowerCase())switch(k.credentialType=ae.ACCESS_TOKEN_WITH_AUTH_SCHEME,k.tokenType){case Fe.POP:let C=as(t,l);if(!C?.cnf?.kid)throw D(fc);k.keyId=C.cnf.kid;break;case Fe.SSH:k.keyId=p}return k}function Yx(n,e,t,i,o,r,s){let a={credentialType:ae.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:i,secret:t};return r&&(a.userAssertionHash=r),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function ck(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function hJ(n){return n?ck(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===ae.ACCESS_TOKEN||n.credentialType===ae.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function mJ(n){return n?ck(n)&&n.hasOwnProperty("realm")&&n.credentialType===ae.ID_TOKEN:!1}function fJ(n){return n?ck(n)&&n.credentialType===ae.REFRESH_TOKEN:!1}function pJ(n){return[n.homeAccountId,n.environment].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}function gJ(n){let e=n.credentialType===ae.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}function bJ(n){return(n.target||"").toLowerCase()}function wJ(n){return(n.requestedClaimsHash||"").toLowerCase()}function kJ(n){return n.tokenType&&n.tokenType.toLowerCase()!==Fe.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function vJ(n,e){let t=n.indexOf(nn.CACHE_KEY)===0,i=!0;return e&&(i=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&i}function yJ(n,e){let t=!1;n&&(t=n.indexOf(is.THROTTLING_PREFIX)===0);let i=!0;return e&&(i=e.hasOwnProperty("throttleTime")),t&&i}function _J({environment:n,clientId:e}){return[tp,n,e].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}function CJ(n,e){return e?n.indexOf(tp)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function EJ(n,e){return e?n.indexOf(Cu.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function dk(){return Ni()+Cu.REFRESH_TIME_SECONDS}function xu(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Cp(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function uk(n){return n.expiresAt<=Ni()}var Fo={};wo(Fo,{authorityMismatch:()=>Mp,authorityUriInsecure:()=>yc,cannotAllowNativeBroker:()=>Ip,cannotSetOIDCOptions:()=>Tp,claimsRequestParsingError:()=>Ep,emptyInputScopesError:()=>Cc,invalidAuthenticationHeader:()=>Ap,invalidAuthorityMetadata:()=>Tc,invalidClaims:()=>ls,invalidCloudDiscoveryMetadata:()=>ka,invalidCodeChallengeMethod:()=>Ac,invalidPromptValue:()=>Ec,logoutRequestEmpty:()=>xc,missingNonceAuthenticationHeader:()=>xp,missingSshJwk:()=>ds,missingSshKid:()=>Sp,pkceParamsMissing:()=>cs,redirectUriEmpty:()=>vc,tokenRequestEmpty:()=>Sc,untrustedAuthority:()=>Ic,urlEmptyError:()=>_c,urlParseError:()=>lr});var vc="redirect_uri_empty",Ep="claims_request_parsing_error",yc="authority_uri_insecure",lr="url_parse_error",_c="empty_url_error",Cc="empty_input_scopes_error",Ec="invalid_prompt_value",ls="invalid_claims",Sc="token_request_empty",xc="logout_request_empty",Ac="invalid_code_challenge_method",cs="pkce_params_missing",ka="invalid_cloud_discovery_metadata",Tc="invalid_authority_metadata",Ic="untrusted_authority",ds="missing_ssh_jwk",Sp="missing_ssh_kid",xp="missing_nonce_authentication_header",Ap="invalid_authentication_header",Tp="cannot_set_OIDCOptions",Ip="cannot_allow_native_broker",Mp="authority_mismatch";var Nt={[vc]:"A redirect URI is required for all calls, and none has been set.",[Ep]:"Could not parse the given claims request object.",[yc]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[lr]:"URL could not be parsed into appropriate segments.",[_c]:"URL was empty or null.",[Cc]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Ec]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ls]:"Given claims parameter must be a stringified JSON object.",[Sc]:"Token request was empty and not found in cache.",[xc]:"The logout request was null or undefined.",[Ac]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[cs]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ka]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Tc]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Ic]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[ds]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Sp]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[xp]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ap]:"Invalid authentication header provided",[Tp]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Ip]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Mp]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."},n4={redirectUriNotSet:{code:vc,desc:Nt[vc]},claimsRequestParsingError:{code:Ep,desc:Nt[Ep]},authorityUriInsecure:{code:yc,desc:Nt[yc]},urlParseError:{code:lr,desc:Nt[lr]},urlEmptyError:{code:_c,desc:Nt[_c]},emptyScopesError:{code:Cc,desc:Nt[Cc]},invalidPrompt:{code:Ec,desc:Nt[Ec]},invalidClaimsRequest:{code:ls,desc:Nt[ls]},tokenRequestEmptyError:{code:Sc,desc:Nt[Sc]},logoutRequestEmptyError:{code:xc,desc:Nt[xc]},invalidCodeChallengeMethod:{code:Ac,desc:Nt[Ac]},invalidCodeChallengeParams:{code:cs,desc:Nt[cs]},invalidCloudDiscoveryMetadata:{code:ka,desc:Nt[ka]},invalidAuthorityMetadata:{code:Tc,desc:Nt[Tc]},untrustedAuthority:{code:Ic,desc:Nt[Ic]},missingSshJwk:{code:ds,desc:Nt[ds]},missingSshKid:{code:Sp,desc:Nt[Sp]},missingNonceAuthenticationHeader:{code:xp,desc:Nt[xp]},invalidAuthenticationHeader:{code:Ap,desc:Nt[Ap]},cannotSetOIDCOptions:{code:Tp,desc:Nt[Tp]},cannotAllowNativeBroker:{code:Ip,desc:Nt[Ip]},authorityMismatch:{code:Mp,desc:Nt[Mp]}},Dp=class n extends xe{constructor(e){super(e,Nt[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,n.prototype)}};function ze(n){return new Dp(n)}var Ot=class{static isEmptyObj(e){if(e)try{let t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){let t={},i=e.split("&"),o=r=>decodeURIComponent(r.replace(/\+/g," "));return i.forEach(r=>{if(r.trim()){let[s,a]=r.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}};var _t=class n{constructor(e){let t=e?Ot.trimArrayEntries([...e]):[],i=t?Ot.removeEmptyStringsFromArray(t):[];this.validateInputScopes(i),this.scopes=new Set,i.forEach(o=>this.scopes.add(o))}static fromString(e){let i=(e||x.EMPTY_STRING).split(" ");return new n(i)}static createSearchScopes(e){let t=new n(e);return t.containsOnlyOIDCScopes()?t.removeScope(x.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw ze(Cc)}containsScope(e){let t=this.printScopesLowerCase().split(" "),i=new n(t);return e?i.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return $x.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw D(hc)}}removeScope(e){if(!e)throw D(uc);this.scopes.delete(e.trim())}removeOIDCScopes(){$x.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw D(fa);let t=new Set;return e.scopes.forEach(i=>t.add(i.toLowerCase())),this.scopes.forEach(i=>t.add(i.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw D(fa);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();let t=this.unionScopeSets(e),i=e.getScopeCount(),o=this.getScopeCount();return t.size<o+i}getScopeCount(){return this.scopes.size}asArray(){let e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):x.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}};function Au(n,e){if(!n)throw D(tc);try{let t=e(n);return JSON.parse(t)}catch{throw D(ua)}}function us(n){if(!n)throw D(ua);let e=n.split(Ht.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?x.EMPTY_STRING:e[1]}}function Tu(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Iu(n,e,t,i){if(i){let{oid:o,sub:r,tid:s,name:a,tfp:l,acr:c}=i,d=s||l||c||"";return{tenantId:d,localAccountId:o||r||"",name:a,isHomeTenant:Tu(d,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:Tu(t,n)}}function Mc(n,e,t,i){let o=n;if(e){let r=e,{isHomeTenant:a}=r,l=Bt(r,["isHomeTenant"]);o=v(v({},n),l)}if(t){let s=Iu(n.homeAccountId,n.localAccountId,n.tenantId,t),{isHomeTenant:a}=s,l=Bt(s,["isHomeTenant"]);return o=I(v(v({},o),l),{idTokenClaims:t,idToken:i}),o}return o}var Gn={Default:0,Adfs:1,Dsts:2,Ciam:3};function hk(n){return n&&(n.tid||n.tfp||n.acr)||null}var vn={AAD:"AAD",OIDC:"OIDC"};var kt=class n{generateAccountId(){return[this.homeAccountId,this.environment].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){let t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Ht.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,i){let o=new n;t.authorityType===Gn.Adfs?o.authorityType=_u.ADFS_ACCOUNT_TYPE:t.protocolMode===vn.AAD?o.authorityType=_u.MSSTS_ACCOUNT_TYPE:o.authorityType=_u.GENERIC_ACCOUNT_TYPE;let r;e.clientInfo&&i&&(r=Au(e.clientInfo,i)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;let s=e.environment||t&&t.getPreferredCache();if(!s)throw D(ss);o.environment=s,o.realm=r?.utid||hk(e.idTokenClaims)||"",o.localAccountId=r?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";let a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,l=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||l||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{let c=Iu(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[c]}return o}static createFromAccountInfo(e,t,i){let o=new n;return o.authorityType=e.authorityType||_u.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=i,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,t,i,o,r){if(!(t===Gn.Adfs||t===Gn.Dsts)){if(e)try{let s=Au(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}i.warning("No client info in response")}return r?.sub||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,i){if(!e||!t)return!1;let o=!0;if(i){let r=e.idTokenClaims||{},s=t.idTokenClaims||{};o=r.iat===s.iat&&r.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}};var va={};wo(va,{getDeserializedResponse:()=>Zx,stripLeadingHashOrQuery:()=>i4});function i4(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Zx(n){if(!n||n.indexOf("=")<0)return null;try{let e=i4(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw D(rc)}return null}var ye=class n{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ze(_c);e.includes("#")||(this._urlString=n.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Ot.endsWith(t,"?")?t=t.slice(0,-1):Ot.endsWith(t,"?/")&&(t=t.slice(0,-2)),Ot.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw ze(lr)}if(!e.HostNameAndPort||!e.PathSegments)throw ze(lr);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw ze(yc)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return n.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){let t=this.getUrlComponents(),i=t.PathSegments;return e&&i.length!==0&&(i[0]===Ro.COMMON||i[0]===Ro.ORGANIZATIONS)&&(i[0]=e),n.constructAuthorityUriFromObject(t)}getUrlComponents(){let e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ze(lr);let i={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]},o=i.AbsolutePath.split("/");return o=o.filter(r=>r&&r.length>0),i.PathSegments=o,i.QueryString&&i.QueryString.endsWith("/")&&(i.QueryString=i.QueryString.substring(0,i.QueryString.length-1)),i}static getDomainFromUrl(e){let t=RegExp("^([^:/?#]+://)?([^/?#]*)"),i=e.match(t);if(!i)throw ze(lr);return i[2]}static getAbsoluteUrl(e,t){if(e[0]===x.FORWARD_SLASH){let o=new n(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new n(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Zx(e)}};var r4={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Jx=r4.endpointMetadata,Xx=r4.instanceDiscoveryMetadata,eA=new Set;Xx.metadata.forEach(n=>{n.aliases.forEach(e=>{eA.add(e)})});function s4(n,e){let t,i=n.canonicalAuthority;if(i){let o=new ye(i).getUrlComponents().HostNameAndPort;t=o4(o,n.cloudDiscoveryMetadata?.metadata,Wn.CONFIG,e)||o4(o,Xx.metadata,Wn.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function o4(n,e,t,i){if(i?.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){let o=Pp(e,n);if(o)return i?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;i?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function a4(n){return Pp(Xx.metadata,n)}function Pp(n,e){for(let t=0;t<n.length;t++){let i=n[t];if(i.aliases.includes(e))return i}return null}var mk="cache_quota_exceeded",Rp="cache_error_unknown";var tA={[mk]:"Exceeded cache storage capacity.",[Rp]:"Unexpected error occurred when using cache storage."},hs=class n extends Error{constructor(e,t){let i=t||(tA[e]?tA[e]:tA[Rp]);super(`${e}: ${i}`),Object.setPrototypeOf(this,n.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=i}};var ms=class n{constructor(e,t,i,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=i.clone(lk,Eu),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){let t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){let t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(i=>this.getTenantProfilesFromAccountEntity(i,t?.tenantId,t))}getTenantedAccountInfoByFilter(e,t,i,o){let r=null,s;if(o&&!this.tenantProfileMatchesFilter(i,o))return null;let a=this.getIdToken(e,t,i.tenantId);return a&&(s=as(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(r=Mc(e,i,s,a?.secret),r)}getTenantProfilesFromAccountEntity(e,t,i){let o=e.getAccountInfo(),r=o.tenantProfiles||new Map,s=this.getTokenKeys();if(t){let l=r.get(t);if(l)r=new Map([[t,l]]);else return[]}let a=[];return r.forEach(l=>{let c=this.getTenantedAccountInfoByFilter(o,s,l,i);c&&a.push(c)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}saveCacheRecord(e,t,i){return E(this,null,function*(){if(!e)throw D(mc);try{e.account&&this.setAccount(e.account),e.idToken&&t?.idToken!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&t?.accessToken!==!1&&(yield this.saveAccessToken(e.accessToken)),e.refreshToken&&t?.refreshToken!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(o){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),o instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o.message}`,i),o.name==="QuotaExceededError"||o.name==="NS_ERROR_DOM_QUOTA_REACHED"||o.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",i),new hs(mk)):new hs(o.name,o.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${o}`,i),new hs(Rp))}})}saveAccessToken(e){return E(this,null,function*(){let t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=this.getTokenKeys(),o=_t.fromString(e.target),r=[];i.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,t,!1))return;let a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,t)&&_t.fromString(a.target).intersectingScopeSets(o)&&r.push(this.removeAccessToken(s))}),yield Promise.all(r),this.setAccessTokenCredential(e)})}getAccountsFilteredBy(e){let t=this.getAccountKeys(),i=[];return t.forEach(o=>{if(!this.isAccountKey(o,e.homeAccountId))return;let r=this.getAccount(o,this.commonLogger);if(!r||e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId)||e.username&&!this.matchUsername(r.username,e.username)||e.environment&&!this.matchEnvironment(r,e.environment)||e.realm&&!this.matchRealm(r,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;let s={localAccountId:e?.localAccountId,name:e?.name},a=r.tenantProfiles?.filter(l=>this.tenantProfileMatchesFilter(l,s));a&&a.length===0||i.push(r)}),i}isAccountKey(e,t,i){return!(e.split(Ht.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||i&&!e.toLowerCase().includes(i.toLowerCase()))}isCredentialKey(e){if(e.split(Ht.CACHE_KEY_SEPARATOR).length<6)return!1;let t=e.toLowerCase();if(t.indexOf(ae.ID_TOKEN.toLowerCase())===-1&&t.indexOf(ae.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(ae.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(ae.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(ae.REFRESH_TOKEN.toLowerCase())>-1){let i=`${ae.REFRESH_TOKEN}${Ht.CACHE_KEY_SEPARATOR}${this.clientId}${Ht.CACHE_KEY_SEPARATOR}`,o=`${ae.REFRESH_TOKEN}${Ht.CACHE_KEY_SEPARATOR}${da}${Ht.CACHE_KEY_SEPARATOR}`;if(t.indexOf(i.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===ae.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===Fe.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){let t=this.getKeys(),i={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;let r=this.getAppMetadata(o);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(i[o]=r))}),i}getAuthorityMetadataByAlias(e){let t=this.getAuthorityMetadataKeys(),i=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;let r=this.getAuthorityMetadata(o);r&&r.aliases.indexOf(e)!==-1&&(i=r)}),i}removeAllAccounts(){return E(this,null,function*(){let e=this.getAccountKeys(),t=[];e.forEach(i=>{t.push(this.removeAccount(i))}),yield Promise.all(t)})}removeAccount(e){return E(this,null,function*(){let t=this.getAccount(e,this.commonLogger);t&&(yield this.removeAccountContext(t),this.removeItem(e))})}removeAccountContext(e){return E(this,null,function*(){let t=this.getTokenKeys(),i=e.generateAccountId(),o=[];t.idToken.forEach(r=>{r.indexOf(i)===0&&this.removeIdToken(r)}),t.accessToken.forEach(r=>{r.indexOf(i)===0&&o.push(this.removeAccessToken(r))}),t.refreshToken.forEach(r=>{r.indexOf(i)===0&&this.removeRefreshToken(r)}),yield Promise.all(o)})}updateOutdatedCachedAccount(e,t,i){if(t&&t.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");let o=this.getAccountKeys().filter(c=>c.startsWith(t.homeAccountId)),r=[];o.forEach(c=>{let d=this.getCachedAccountEntity(c);d&&r.push(d)});let s=r.find(c=>Tu(c.realm,c.homeAccountId))||r[0];s.tenantProfiles=r.map(c=>({tenantId:c.realm,localAccountId:c.localAccountId,name:c.name,isHomeTenant:Tu(c.realm,c.homeAccountId)}));let a=n.toObject(new kt,v({},s)),l=a.generateAccountKey();return o.forEach(c=>{c!==l&&this.removeOutdatedAccount(e)}),this.setAccount(a),i?.verbose("Updated an outdated account entity in the cache"),a}return t}removeAccessToken(e){return E(this,null,function*(){let t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===ae.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===Fe.POP){let o=t.keyId;if(o)try{yield this.cryptoImpl.removeTokenBindingKey(o)}catch{throw D(gc)}}return this.removeItem(e)}})}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){let t=kt.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,i,o,r){this.commonLogger.trace("CacheManager - getIdToken called");let s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ae.ID_TOKEN,clientId:this.clientId,realm:i},a=this.getIdTokensByFilter(s,t),l=a.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let c=a;if(!i){let d=new Map;a.forEach((p,g)=>{p.realm===e.tenantId&&d.set(g,p)});let f=d.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;c=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((d,f)=>{this.removeIdToken(f)}),o&&r&&o.addFields({multiMatchedID:a.size},r),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){let i=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return i.forEach(r=>{if(!this.idTokenKeyMatchesFilter(r,v({clientId:this.clientId},e)))return;let s=this.getIdTokenCredential(r);s&&this.credentialMatchesFilter(s,e)&&o.set(r,s)}),o}idTokenKeyMatchesFilter(e,t){let i=e.toLowerCase();return!(t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,i,o,r,s){this.commonLogger.trace("CacheManager - getAccessToken called");let a=_t.createSearchScopes(t.scopes),l=t.authenticationScheme||Fe.BEARER,c=l&&l.toLowerCase()!==Fe.BEARER.toLowerCase()?ae.ACCESS_TOKEN_WITH_AUTH_SCHEME:ae.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:l,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},f=i&&i.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(w=>{if(this.accessTokenKeyMatchesFilter(w,d,!0)){let k=this.getAccessTokenCredential(w);k&&this.credentialMatchesFilter(k,d)&&p.push(k)}});let g=p.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(w=>{this.removeAccessToken(_p(w))}),r&&s&&r.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,t,i){let o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){let r=t.target.asArray();for(let s=0;s<r.length;s++){if(i&&!o.includes(r[s].toLowerCase()))return!1;if(!i&&o.includes(r[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){let t=this.getTokenKeys(),i=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;let r=this.getAccessTokenCredential(o);r&&this.credentialMatchesFilter(r,e)&&i.push(r)}),i}getRefreshToken(e,t,i,o,r){this.commonLogger.trace("CacheManager - getRefreshToken called");let s=t?da:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ae.REFRESH_TOKEN,clientId:this.clientId,familyId:s},l=i&&i.refreshToken||this.getTokenKeys().refreshToken,c=[];l.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){let p=this.getRefreshTokenCredential(f);p&&this.credentialMatchesFilter(p,a)&&c.push(p)}});let d=c.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&r&&o.addFields({multiMatchedRT:d},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){let i=e.toLowerCase();return!(t.familyId&&i.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&i.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&i.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){let t={environment:e,clientId:this.clientId},i=this.getAppMetadataFilteredBy(t),o=Object.keys(i).map(s=>i[s]),r=o.length;if(r<1)return null;if(r>1)throw D(cc);return o[0]}isAppMetadataFOCI(e){let t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===da)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){let i=e.oid||e.sub;return t===i}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return t.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,t){return!!(e&&typeof e=="string"&&t?.toLowerCase()===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){let o=s4(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}let i=this.getAuthorityMetadataByAlias(t);return!!(i&&i.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){return e.realm?.toLowerCase()===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==ae.ACCESS_TOKEN&&e.credentialType!==ae.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:_t.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(tp)!==-1}isAuthorityMetadata(e){return e.indexOf(Cu.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Cu.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(let i in t)e[i]=t[i];return e}},Np=class extends ms{setAccount(){throw D(ke)}getAccount(){throw D(ke)}getCachedAccountEntity(){throw D(ke)}setIdTokenCredential(){throw D(ke)}getIdTokenCredential(){throw D(ke)}setAccessTokenCredential(){throw D(ke)}getAccessTokenCredential(){throw D(ke)}setRefreshTokenCredential(){throw D(ke)}getRefreshTokenCredential(){throw D(ke)}setAppMetadata(){throw D(ke)}getAppMetadata(){throw D(ke)}setServerTelemetry(){throw D(ke)}getServerTelemetry(){throw D(ke)}setAuthorityMetadata(){throw D(ke)}getAuthorityMetadata(){throw D(ke)}getAuthorityMetadataKeys(){throw D(ke)}setThrottlingCache(){throw D(ke)}getThrottlingCache(){throw D(ke)}removeItem(){throw D(ke)}getKeys(){throw D(ke)}getAccountKeys(){throw D(ke)}getTokenKeys(){throw D(ke)}updateCredentialCacheKey(){throw D(ke)}removeOutdatedAccount(){throw D(ke)}};var fk={tokenRenewalOffsetSeconds:qx,preventCorsPreflight:!1},SJ={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:st.Info,correlationId:x.EMPTY_STRING},xJ={claimsBasedCachingEnabled:!1},AJ={sendGetRequestAsync(){return E(this,null,function*(){throw D(ke)})},sendPostRequestAsync(){return E(this,null,function*(){throw D(ke)})}},TJ={sku:x.SKU,version:Eu,cpu:x.EMPTY_STRING,os:x.EMPTY_STRING},IJ={clientSecret:x.EMPTY_STRING,clientAssertion:void 0},MJ={azureCloudInstance:ba.None,tenant:`${x.DEFAULT_COMMON_TENANT}`},DJ={application:{appName:"",appVersion:""}};function l4({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:i,storageInterface:o,networkInterface:r,cryptoInterface:s,clientCredentials:a,libraryInfo:l,telemetry:c,serverTelemetryManager:d,persistencePlugin:f,serializableCache:p}){let g=v(v({},SJ),t);return{authOptions:PJ(n),systemOptions:v(v({},fk),e),loggerOptions:g,cacheOptions:v(v({},xJ),i),storageInterface:o||new Np(n.clientId,ga,new gi(g)),networkInterface:r||AJ,cryptoInterface:s||ga,clientCredentials:a||IJ,libraryInfo:v(v({},TJ),l),telemetry:v(v({},DJ),c),serverTelemetryManager:d||null,persistencePlugin:f||null,serializableCache:p||null}}function PJ(n){return v({clientCapabilities:[],azureCloudOptions:MJ,skipAuthorityMetadataCache:!1,instanceAware:!1},n)}function Op(n){return n.authOptions.authority.options.protocolMode===vn.OIDC}var rn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};var ps={};wo(ps,{ACCESS_TOKEN:()=>OJ,BROKER_CLIENT_ID:()=>vk,BROKER_REDIRECT_URI:()=>FA,CCS_HEADER:()=>jJ,CLAIMS:()=>oA,CLIENT_ASSERTION:()=>TA,CLIENT_ASSERTION_TYPE:()=>IA,CLIENT_ID:()=>fs,CLIENT_INFO:()=>zJ,CLIENT_REQUEST_ID:()=>fA,CLIENT_SECRET:()=>AA,CODE:()=>dA,CODE_CHALLENGE:()=>uA,CODE_CHALLENGE_METHOD:()=>hA,CODE_VERIFIER:()=>mA,DEVICE_CODE:()=>xA,DOMAIN_HINT:()=>LA,ERROR:()=>RJ,ERROR_DESCRIPTION:()=>NJ,EXPIRES_IN:()=>FJ,FOCI:()=>UJ,GRANT_TYPE:()=>iA,ID_TOKEN:()=>LJ,ID_TOKEN_HINT:()=>SA,LOGIN_HINT:()=>OA,LOGOUT_HINT:()=>RA,NATIVE_BROKER:()=>PA,NONCE:()=>lA,OBO_ASSERTION:()=>MA,ON_BEHALF_OF:()=>HJ,POST_LOGOUT_URI:()=>EA,PROMPT:()=>cA,REDIRECT_URI:()=>pk,REFRESH_TOKEN:()=>sA,REFRESH_TOKEN_EXPIRES_IN:()=>VJ,REQUESTED_TOKEN_USE:()=>DA,REQ_CNF:()=>wk,RESPONSE_MODE:()=>nA,RESPONSE_TYPE:()=>gk,RETURN_SPA_CODE:()=>kk,SCOPE:()=>rA,SESSION_STATE:()=>BJ,SID:()=>NA,STATE:()=>aA,TOKEN_TYPE:()=>bk,X_APP_NAME:()=>_A,X_APP_VER:()=>CA,X_CLIENT_CPU:()=>wA,X_CLIENT_CURR_TELEM:()=>kA,X_CLIENT_EXTRA_SKU:()=>$J,X_CLIENT_LAST_TELEM:()=>vA,X_CLIENT_OS:()=>bA,X_CLIENT_SKU:()=>pA,X_CLIENT_VER:()=>gA,X_MS_LIB_CAPABILITY:()=>yA});var fs="client_id",pk="redirect_uri",gk="response_type",nA="response_mode",iA="grant_type",oA="claims",rA="scope",RJ="error",NJ="error_description",OJ="access_token",LJ="id_token",sA="refresh_token",FJ="expires_in",VJ="refresh_token_expires_in",aA="state",lA="nonce",cA="prompt",BJ="session_state",zJ="client_info",dA="code",uA="code_challenge",hA="code_challenge_method",mA="code_verifier",fA="client-request-id",pA="x-client-SKU",gA="x-client-VER",bA="x-client-OS",wA="x-client-CPU",kA="x-client-current-telemetry",vA="x-client-last-telemetry",yA="x-ms-lib-capability",_A="x-app-name",CA="x-app-ver",EA="post_logout_redirect_uri",SA="id_token_hint",xA="device_code",AA="client_secret",TA="client_assertion",IA="client_assertion_type",bk="token_type",wk="req_cnf",MA="assertion",DA="requested_token_use",HJ="on_behalf_of",UJ="foci",jJ="X-AnchorMailbox",kk="return_spa_code",PA="nativebroker",RA="logout_hint",NA="sid",OA="login_hint",LA="domain_hint",$J="x-client-xtra-sku",vk="brk_client_id",FA="brk_redirect_uri";var cr=class{static validateRedirectUri(e){if(!e)throw ze(vc)}static validatePrompt(e){let t=[];for(let i in yt)t.push(yt[i]);if(t.indexOf(e)<0)throw ze(Ec)}static validateClaims(e){try{JSON.parse(e)}catch{throw ze(ls)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw ze(cs);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([nk.PLAIN,nk.S256].indexOf(e)<0)throw ze(Ac)}};function WJ(n,e,t){if(!e)return;let i=n.get(fs);i&&n.has(vk)&&t?.addFields({embeddedClientId:i,embeddedRedirectUri:n.get(pk)},e)}var dr=class{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(gk,encodeURIComponent(x.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(gk,encodeURIComponent(`${x.TOKEN_RESPONSE_TYPE} ${x.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(nA,encodeURIComponent(e||Wx.QUERY))}addNativeBroker(){this.parameters.set(PA,encodeURIComponent("1"))}addScopes(e,t=!0,i=Ri){t&&!i.includes("openid")&&!e.includes("openid")&&i.push("openid");let o=t?[...e||[],...i]:e||[],r=new _t(o);this.parameters.set(rA,encodeURIComponent(r.printScopes()))}addClientId(e){this.parameters.set(fs,encodeURIComponent(e))}addRedirectUri(e){cr.validateRedirectUri(e),this.parameters.set(pk,encodeURIComponent(e))}addPostLogoutRedirectUri(e){cr.validateRedirectUri(e),this.parameters.set(EA,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(SA,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(LA,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(OA,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set($t.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set($t.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(NA,encodeURIComponent(e))}addClaims(e,t){let i=this.addClientCapabilitiesToClaims(e,t);cr.validateClaims(i),this.parameters.set(oA,encodeURIComponent(i))}addCorrelationId(e){this.parameters.set(fA,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(pA,e.sku),this.parameters.set(gA,e.version),e.os&&this.parameters.set(bA,e.os),e.cpu&&this.parameters.set(wA,e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set(_A,e.appName),e?.appVersion&&this.parameters.set(CA,e.appVersion)}addPrompt(e){cr.validatePrompt(e),this.parameters.set(`${cA}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(aA,encodeURIComponent(e))}addNonce(e){this.parameters.set(lA,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(cr.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(uA,encodeURIComponent(e)),this.parameters.set(hA,encodeURIComponent(t));else throw ze(cs)}addAuthorizationCode(e){this.parameters.set(dA,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(xA,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(sA,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(mA,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(AA,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(TA,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(IA,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(MA,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(DA,encodeURIComponent(e))}addGrantType(e){this.parameters.set(iA,encodeURIComponent(e))}addClientInfo(){this.parameters.set(JL,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,i])=>{!this.parameters.has(t)&&i&&this.parameters.set(t,i)})}addClientCapabilitiesToClaims(e,t){let i;if(!e)i={};else try{i=JSON.parse(e)}catch{throw ze(ls)}return t&&t.length>0&&(i.hasOwnProperty(yu.ACCESS_TOKEN)||(i[yu.ACCESS_TOKEN]={}),i[yu.ACCESS_TOKEN][yu.XMS_CC]={values:t}),JSON.stringify(i)}addUsername(e){this.parameters.set(ok.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(ok.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(bk,Fe.POP),this.parameters.set(wk,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(bk,Fe.SSH),this.parameters.set(wk,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(kA,e.generateCurrentRequestHeaderValue()),this.parameters.set(vA,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(yA,is.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(RA,encodeURIComponent(e))}addBrokerParameters(e){let t={};t[vk]=e.brokerClientId,t[FA]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){let e=new Array;return this.parameters.forEach((t,i)=>{e.push(`${i}=${t}`)}),WJ(this.parameters,this.correlationId,this.performanceClient),e.join("&")}};var _k={};wo(_k,{createDiscoveredInstance:()=>zA});function c4(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}function d4(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}function u4(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}var y={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},dDe=new Map([[y.AcquireTokenByCode,"ATByCode"],[y.AcquireTokenByRefreshToken,"ATByRT"],[y.AcquireTokenSilent,"ATS"],[y.AcquireTokenSilentAsync,"ATSAsync"],[y.AcquireTokenPopup,"ATPopup"],[y.AcquireTokenRedirect,"ATRedirect"],[y.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[y.CryptoOptsSignJwt,"CryptoSignJwt"],[y.SilentCacheClientAcquireToken,"SltCacheClientAT"],[y.SilentIframeClientAcquireToken,"SltIframeClientAT"],[y.SilentRefreshClientAcquireToken,"SltRClientAT"],[y.SsoSilent,"SsoSlt"],[y.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[y.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[y.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[y.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[y.NetworkClientSendPostRequestAsync,"NetClientSendPost"],[y.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[y.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[y.BrokerHandhshake,"BrokerHandshake"],[y.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[y.AcquireTokenByBroker,"ATByBroker"],[y.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[y.RefreshTokenClientAcquireToken,"RTClientAT"],[y.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[y.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[y.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[y.AcquireTokenFromCache,"ATFromCache"],[y.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[y.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[y.AcquireTokenBySilentIframe,"ATBySltIframe"],[y.InitializeBaseRequest,"InitBaseReq"],[y.InitializeSilentRequest,"InitSltReq"],[y.InitializeClientApplication,"InitClientApplication"],[y.SilentIframeClientTokenHelper,"SIClientTHelper"],[y.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[y.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[y.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[y.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[y.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[y.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[y.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[y.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[y.GetAuthCodeUrl,"GetAuthCodeUrl"],[y.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[y.HandleCodeResponse,"HandleCodeResp"],[y.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[y.AuthClientAcquireToken,"AuthClientAT"],[y.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[y.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[y.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[y.PopTokenGenerateCnf,"PopTGenCnf"],[y.PopTokenGenerateKid,"PopTGenKid"],[y.HandleServerTokenResponse,"HandleServerTRes"],[y.DeserializeResponse,"DeserializeRes"],[y.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[y.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[y.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[y.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[y.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[y.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[y.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[y.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[y.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[y.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[y.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[y.AcquireTokenByCodeAsync,"ATByCodeAsync"],[y.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[y.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[y.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[y.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[y.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[y.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[y.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[y.NativeGenerateAuthResult,"NtvGenAuthRes"],[y.RemoveHiddenIframe,"RemoveHiddenIframe"],[y.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[y.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[y.GeneratePkceCodes,"GenPkceCodes"],[y.GenerateCodeVerifier,"GenCodeVerifier"],[y.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[y.Sha256Digest,"Sha256Digest"],[y.GetRandomValues,"GetRandomValues"]]),VA={NotStarted:0,InProgress:1,Completed:2};var Kn=(n,e,t,i,o)=>(...r)=>{t.trace(`Executing function ${e}`);let s=i?.startMeasurement(e,o);if(o){let a=e+"CallCount";i?.incrementFields({[a]:1},o)}try{let a=n(...r);return s?.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},P=(n,e,t,i,o)=>(...r)=>{t.trace(`Executing function ${e}`);let s=i?.startMeasurement(e,o);if(o){let a=e+"CallCount";i?.incrementFields({[a]:1},o)}return i?.setPreQueueTime(e,o),n(...r).then(a=>(t.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};var h4=(()=>{class n{constructor(t,i,o,r){this.networkInterface=t,this.logger=i,this.performanceClient=o,this.correlationId=r}detectRegion(t,i){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RegionDiscoveryDetectRegion,this.correlationId);let o=t;if(o)i.region_source=Xl.ENVIRONMENT_VARIABLE;else{let r=n.IMDS_OPTIONS;try{let s=yield P(this.getRegionFromIMDS.bind(this),y.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(x.IMDS_VERSION,r);if(s.status===np.httpSuccess&&(o=s.body,i.region_source=Xl.IMDS),s.status===np.httpBadRequest){let a=yield P(this.getCurrentVersion.bind(this),y.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(r);if(!a)return i.region_source=Xl.FAILED_AUTO_DETECTION,null;let l=yield P(this.getRegionFromIMDS.bind(this),y.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,r);l.status===np.httpSuccess&&(o=l.body,i.region_source=Xl.IMDS)}}catch{return i.region_source=Xl.FAILED_AUTO_DETECTION,null}}return o||(i.region_source=Xl.FAILED_AUTO_DETECTION),o||null})}getRegionFromIMDS(t,i){return E(this,null,function*(){return this.performanceClient?.addQueueMeasurement(y.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${x.IMDS_ENDPOINT}?api-version=${t}&format=text`,i,x.IMDS_TIMEOUT)})}getCurrentVersion(t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RegionDiscoveryGetCurrentVersion,this.correlationId);try{let i=yield this.networkInterface.sendGetRequestAsync(`${x.IMDS_ENDPOINT}?format=json`,t);return i.status===np.httpBadRequest&&i.body&&i.body["newest-versions"]&&i.body["newest-versions"].length>0?i.body["newest-versions"][0]:null}catch{return null}})}}return n.IMDS_OPTIONS={headers:{Metadata:"true"}},n})();var to=class n{constructor(e,t,i,o,r,s,a,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=i,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=r,this.performanceClient=a,this.correlationId=s,this.managedIdentity=l||!1,this.regionDiscovery=new h4(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(x.CIAM_AUTH_URL))return Gn.Ciam;let t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case x.ADFS:return Gn.Adfs;case x.DSTS:return Gn.Dsts}return Gn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ye(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw D(qn)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw D(qn)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw D(qn)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw D(bc);return this.replacePath(this.metadata.end_session_endpoint)}else throw D(qn)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw D(qn)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw D(qn)}canReplaceTenant(e){return e.PathSegments.length===1&&!n.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Gn.Default&&this.protocolMode===vn.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e,o=new ye(this.metadata.canonical_authority).getUrlComponents(),r=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,l)=>{let c=r[l];if(l===0&&this.canReplaceTenant(o)){let d=new ye(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==d&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${d}`),c=d)}a!==c&&(t=t.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){let e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Gn.Adfs||this.protocolMode!==vn.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityResolveEndpointsAsync,this.correlationId);let e=this.getCurrentMetadataEntity(),t=yield P(this.updateCloudDiscoveryMetadata.bind(this),y.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);let i=yield P(this.updateEndpointMetadata.bind(this),y.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:i}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:i},this.correlationId)})}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:dk(),jwks_uri:""}),e}updateCachedMetadata(e,t,i){t!==Wn.CACHE&&i?.source!==Wn.CACHE&&(e.expiresAt=dk(),e.canonical_authority=this.canonicalAuthority);let o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityUpdateEndpointMetadata,this.correlationId);let t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===Wn.HARDCODED_VALUES&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){let o=yield P(this.updateMetadataWithRegionalInformation.bind(this),y.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);xu(e,o,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let i=yield P(this.getEndpointMetadataFromNetwork.bind(this),y.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(i)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(i=yield P(this.updateMetadataWithRegionalInformation.bind(this),y.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(i)),xu(e,i,!0),Wn.NETWORK;throw D(oc,this.defaultOpenIdConfigurationEndpoint)})}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");let t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),xu(e,t,!1),{source:Wn.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{let o=this.getEndpointMetadataFromHardcodedValues();if(o)return xu(e,o,!1),{source:Wn.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}let i=uk(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!i?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Wn.CACHE}):(i&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ye(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw ze(Tc)}return null}getEndpointMetadataFromNetwork(){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);let e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{let i=yield this.networkInterface.sendGetRequestAsync(t,e);return c4(i.body)?i.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(i){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${i}`),null}})}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Jx?Jx[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);let t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==x.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=rk.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,n.replaceWithRegionalInformation(e,t);let i=yield P(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),y.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(i)return this.regionDiscoveryMetadata.region_outcome=rk.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=i,n.replaceWithRegionalInformation(e,i);this.regionDiscoveryMetadata.region_outcome=rk.AUTO_DETECTION_REQUESTED_FAILED}return e})}updateCloudDiscoveryMetadata(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);let t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;let i=yield P(this.getCloudDiscoveryMetadataFromNetwork.bind(this),y.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(i)return Cp(e,i,!0),Wn.NETWORK;throw ze(Ic)})}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||x.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||x.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||x.NOT_APPLICABLE}`);let t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Cp(e,t,!1),Wn.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{let o=a4(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Cp(e,o,!1),Wn.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}let i=uk(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!i?(this.logger.verbose("Found cloud discovery metadata in the cache."),Wn.CACHE):(i&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Gn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");let e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Pp(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ze(ka)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);let e=`${x.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={},i=null;try{let o=yield this.networkInterface.sendGetRequestAsync(e,t),r,s;if(d4(o.body))r=o.body,s=r.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${r.tenant_discovery_endpoint}`);else if(u4(o.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${o.status}`),r=o.body,r.error===x.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${r.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${r.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),s=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),i=Pp(s,this.hostnameAndPort)}catch(o){if(o instanceof xe)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${o.errorCode}
Error Description: ${o.errorMessage}`);else{let r=o;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${r.name}
Error Description: ${r.message}`)}return null}return i||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),i=n.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),i})}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ye.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let i;if(t&&t.azureCloudInstance!==ba.None){let o=t.tenant?t.tenant:x.DEFAULT_COMMON_TENANT;i=`${t.azureCloudInstance}/${o}/`}return i||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return x.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw D(qn)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return eA.has(e)}static isPublicCloudAuthority(e){return x.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,i){let o=new ye(e);o.validateAsUri();let r=o.getUrlComponents(),s=`${t}.${r.HostNameAndPort}`;this.isPublicCloudAuthority(r.HostNameAndPort)&&(s=`${t}.${x.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);let a=ye.constructAuthorityUriFromObject(I(v({},o.getUrlComponents()),{HostNameAndPort:s})).urlString;return i?`${a}?${i}`:a}static replaceWithRegionalInformation(e,t){let i=v({},e);return i.authorization_endpoint=n.buildRegionalAuthorityString(i.authorization_endpoint,t),i.token_endpoint=n.buildRegionalAuthorityString(i.token_endpoint,t),i.end_session_endpoint&&(i.end_session_endpoint=n.buildRegionalAuthorityString(i.end_session_endpoint,t)),i}static transformCIAMAuthority(e){let t=e,o=new ye(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(x.CIAM_AUTH_URL)){let r=o.HostNameAndPort.split(".")[0];t=`${t}${r}${x.AAD_TENANT_DOMAIN_SUFFIX}`}return t}};to.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ro.COMMON,Ro.CONSUMERS,Ro.ORGANIZATIONS]);function m4(n){let i=new ye(n).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(i){case Ro.COMMON:case Ro.ORGANIZATIONS:case Ro.CONSUMERS:return;default:return i}}function yk(n){return n.endsWith(x.FORWARD_SLASH)?n:`${n}${x.FORWARD_SLASH}`}function BA(n){let e=n.cloudDiscoveryMetadata,t;if(e)try{t=JSON.parse(e)}catch{throw ze(ka)}return{canonicalAuthority:n.authority?yk(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}function zA(n,e,t,i,o,r,s){return E(this,null,function*(){s?.addQueueMeasurement(y.AuthorityFactoryCreateDiscoveredInstance,r);let a=to.transformCIAMAuthority(yk(n)),l=new to(a,e,t,i,o,r,s);try{return yield P(l.resolveEndpointsAsync.bind(l),y.AuthorityResolveEndpointsAsync,o,s,r)(),l}catch{throw D(qn)}})}var Qn=class n extends xe{constructor(e,t,i,o,r){super(e,t,i),this.name="ServerError",this.errorNo=o,this.status=r,Object.setPrototypeOf(this,n.prototype)}};var ur=class n{static generateThrottlingStorageKey(e){return`${is.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){let i=n.generateThrottlingStorageKey(t),o=e.getThrottlingCache(i);if(o){if(o.throttleTime<Date.now()){e.removeItem(i);return}throw new Qn(o.errorCodes?.join(" ")||x.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,i){if(n.checkResponseStatus(i)||n.checkResponseForRetryAfter(i)){let o={throttleTime:n.calculateThrottleTime(parseInt(i.headers[$t.RETRY_AFTER])),error:i.body.error,errorCodes:i.body.error_codes,errorMessage:i.body.error_description,subError:i.body.suberror};e.setThrottlingCache(n.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty($t.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){let t=e<=0?0:e,i=Date.now()/1e3;return Math.floor(Math.min(i+(t||is.DEFAULT_THROTTLE_TIME_SECONDS),i+is.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,i,o){let r={clientId:t,authority:i.authority,scopes:i.scopes,homeAccountIdentifier:o,claims:i.claims,authenticationScheme:i.authenticationScheme,resourceRequestMethod:i.resourceRequestMethod,resourceRequestUri:i.resourceRequestUri,shrClaims:i.shrClaims,sshKid:i.sshKid},s=this.generateThrottlingStorageKey(r);e.removeItem(s)}};var Mu=class n extends xe{constructor(e,t,i){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,n.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=i}};function Ck(n,e,t){return new Mu(n,e,t)}var ya=class{constructor(e,t){this.config=l4(e),this.logger=new gi(this.config.loggerOptions,lk,Eu),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){let t={};if(t[$t.CONTENT_TYPE]=x.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case rn.HOME_ACCOUNT_ID:try{let i=us(e.credential);t[$t.CCS_HEADER]=`Oid:${i.uid}@${i.utid}`}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case rn.UPN:t[$t.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}executePostToTokenEndpoint(e,t,i,o,r,s){return E(this,null,function*(){s&&this.performanceClient?.addQueueMeasurement(s,r);let a=yield this.sendPostRequest(o,e,{body:t,headers:i},r);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a})}sendPostRequest(e,t,i,o){return E(this,null,function*(){ur.preProcess(this.cacheManager,e);let r;try{r=yield P(this.networkClient.sendPostRequestAsync.bind(this.networkClient),y.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,i);let s=r.headers||{};this.performanceClient?.addFields({refreshTokenSize:r.body.refresh_token?.length||0,httpVerToken:s[$t.X_MS_HTTP_VERSION]||"",requestId:s[$t.X_MS_REQUEST_ID]||""},o)}catch(s){if(s instanceof Mu){let a=s.responseHeaders;throw a&&this.performanceClient?.addFields({httpVerToken:a[$t.X_MS_HTTP_VERSION]||"",requestId:a[$t.X_MS_REQUEST_ID]||"",contentTypeHeader:a[$t.CONTENT_TYPE]||void 0,contentLengthHeader:a[$t.CONTENT_LENGTH]||void 0,httpStatus:s.httpStatus},o),s.error}throw s instanceof xe?s:D(ic)}return ur.postProcess(this.cacheManager,e,r),r})}updateAuthority(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.UpdateTokenEndpointAuthority,t);let i=`https://${e}/${this.authority.tenant}/`,o=yield zA(i,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o})}createTokenQueryParameters(e){let t=new dr(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}};var gs={};wo(gs,{badToken:()=>Ca,consentRequired:()=>UA,interactionRequired:()=>HA,loginRequired:()=>jA,nativeAccountUnavailable:()=>Lp,noTokensFound:()=>_a,refreshTokenExpired:()=>Fp});var _a="no_tokens_found",Lp="native_account_unavailable",Fp="refresh_token_expired",HA="interaction_required",UA="consent_required",jA="login_required",Ca="bad_token";var f4=[HA,UA,jA,Ca],qJ=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ek={[_a]:"No refresh token found in the cache. Please sign-in.",[Lp]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Fp]:"Refresh token has expired.",[Ca]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."},p4={noTokensFoundError:{code:_a,desc:Ek[_a]},native_account_unavailable:{code:Lp,desc:Ek[Lp]},bad_token:{code:Ca,desc:Ek[Ca]}},yn=class n extends xe{constructor(e,t,i,o,r,s,a,l){super(e,t,i),Object.setPrototypeOf(this,n.prototype),this.timestamp=o||x.EMPTY_STRING,this.traceId=r||x.EMPTY_STRING,this.correlationId=s||x.EMPTY_STRING,this.claims=a||x.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}};function $A(n,e,t){let i=!!n&&f4.indexOf(n)>-1,o=!!t&&qJ.indexOf(t)>-1,r=!!e&&f4.some(s=>e.indexOf(s)>-1);return i||r||o}function Du(n){return new yn(n,Ek[n])}var sn=class n{static setRequestState(e,t,i){let o=n.generateLibraryState(e,i);return t?`${o}${x.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw D(pa);let i={id:e.createNewGuid()};t&&(i.meta=t);let o=JSON.stringify(i);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw D(pa);if(!t)throw D(Lo);try{let i=t.split(x.RESOURCE_DELIM),o=i[0],r=i.length>1?i.slice(1).join(x.RESOURCE_DELIM):x.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:r||x.EMPTY_STRING,libraryState:a}}catch{throw D(Lo)}}};var GJ={SW:"sw",UHW:"uhw"},Oi=class{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}generateCnf(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.PopTokenGenerateCnf,e.correlationId);let i=yield P(this.generateKid.bind(this),y.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(i));return{kid:i.kid,reqCnfString:o}})}generateKid(e){return E(this,null,function*(){return this.performanceClient?.addQueueMeasurement(y.PopTokenGenerateKid,e.correlationId),{kid:yield this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:GJ.SW}})}signPopToken(e,t,i){return E(this,null,function*(){return this.signPayload(e,t,i)})}signPayload(e,t,i,o){return E(this,null,function*(){let{resourceRequestMethod:r,resourceRequestUri:s,shrClaims:a,shrNonce:l,shrOptions:c}=i,f=(s?new ye(s):void 0)?.getUrlComponents();return this.cryptoUtils.signJwt(v({at:e,ts:Ni(),m:r?.toUpperCase(),u:f?.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0},o),t,c,i.correlationId)})}};var Sk=class{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}};function KJ(n){let e="code=",t=n.error_uri?.lastIndexOf(e);return t&&t>=0?n.error_uri?.substring(t+e.length):void 0}var hr=class n{constructor(e,t,i,o,r,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=i,this.logger=o,this.serializableCache=r,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?D(ma,"Cached State"):D(ma,"Server State");let i,o;try{i=decodeURIComponent(e.state)}catch{throw D(Lo,e.state)}try{o=decodeURIComponent(t)}catch{throw D(Lo,e.state)}if(i!==o)throw D(sc);if(e.error||e.error_description||e.suberror){let r=KJ(e);throw $A(e.error,e.error_description,e.suberror)?new yn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",r):new Qn(e.error||"",e.error_description,e.suberror,r)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){let i=`Error(s): ${e.error_codes||x.NOT_AVAILABLE} - Timestamp: ${e.timestamp||x.NOT_AVAILABLE} - Description: ${e.error_description||x.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||x.NOT_AVAILABLE} - Trace ID: ${e.trace_id||x.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,r=new Qn(e.error,i,e.suberror,o,e.status);if(t&&e.status&&e.status>=vu.SERVER_ERROR_RANGE_START&&e.status<=vu.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${r}`);return}else if(t&&e.status&&e.status>=vu.CLIENT_ERROR_RANGE_START&&e.status<=vu.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${r}`);return}throw $A(e.error,e.error_description,e.suberror)?new yn(e.error,e.error_description,e.suberror,e.timestamp||x.EMPTY_STRING,e.trace_id||x.EMPTY_STRING,e.correlation_id||x.EMPTY_STRING,e.claims||x.EMPTY_STRING,o):r}}handleServerTokenResponse(e,t,i,o,r,s,a,l,c){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=as(e.id_token||x.EMPTY_STRING,this.cryptoObj.base64Decode),r&&r.nonce&&d.nonce!==r.nonce)throw D(ac);if(o.maxAge||o.maxAge===0){let w=d.auth_time;if(!w)throw D(os);vp(w,o.maxAge)}}this.homeAccountIdentifier=kt.generateHomeAccountId(e.client_info||x.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,d);let f;r&&r.state&&(f=sn.parseRequestState(this.cryptoObj,r.state)),e.key_id=e.key_id||o.sshKid||void 0;let p=this.generateCacheRecord(e,t,i,o,d,s,r),g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Sk(this.serializableCache,!0),yield this.persistencePlugin.beforeCacheAccess(g)),a&&!l&&p.account){let w=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(w,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,d,f,void 0,c)}yield this.cacheStorage.saveCacheRecord(p,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield this.persistencePlugin.afterCacheAccess(g))}return n.generateAuthenticationResult(this.cryptoObj,t,p,!1,o,d,f,e,c)})}generateCacheRecord(e,t,i,o,r,s,a){let l=t.getPreferredCache();if(!l)throw D(ss);let c=hk(r),d,f;e.id_token&&r&&(d=Kx(this.homeAccountIdentifier,l,e.id_token,this.clientId,c||""),f=Pu(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r,e.client_info,l,c,a,void 0,this.logger));let p=null;if(e.access_token){let k=e.scope?_t.fromString(e.scope):new _t(o.scopes||[]),C=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,S=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,T=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,V=i+C,K=V+S,de=T&&T>0?i+T:void 0;p=Qx(this.homeAccountIdentifier,l,e.access_token,this.clientId,c||t.tenant||"",k.printScopes(),V,K,this.cryptoObj.base64Decode,de,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let k;if(e.refresh_token_expires_in){let C=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;k=i+C}g=Yx(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,s,k)}let w=null;return e.foci&&(w={clientId:this.clientId,environment:l,familyId:e.foci}),{account:f,idToken:d,accessToken:p,refreshToken:g,appMetadata:w}}static generateAuthenticationResult(e,t,i,o,r,s,a,l,c){return E(this,null,function*(){let d=x.EMPTY_STRING,f=[],p=null,g,w,k=x.EMPTY_STRING;if(i.accessToken){if(i.accessToken.tokenType===Fe.POP&&!r.popKid){let V=new Oi(e),{secret:K,keyId:de}=i.accessToken;if(!de)throw D(wc);d=yield V.signPopToken(K,de,r)}else d=i.accessToken.secret;f=_t.fromString(i.accessToken.target).asArray(),p=new Date(Number(i.accessToken.expiresOn)*1e3),g=new Date(Number(i.accessToken.extendedExpiresOn)*1e3),i.accessToken.refreshOn&&(w=new Date(Number(i.accessToken.refreshOn)*1e3))}i.appMetadata&&(k=i.appMetadata.familyId===da?da:"");let C=s?.oid||s?.sub||"",S=s?.tid||"";l?.spa_accountid&&i.account&&(i.account.nativeAccountId=l?.spa_accountid);let T=i.account?Mc(i.account.getAccountInfo(),void 0,s,i.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:C,tenantId:S,scopes:f,account:T,idToken:i?.idToken?.secret||"",idTokenClaims:s||{},accessToken:d,fromCache:o,expiresOn:p,extExpiresOn:g,refreshOn:w,correlationId:r.correlationId,requestId:c||x.EMPTY_STRING,familyId:k,tokenType:i.accessToken?.tokenType||x.EMPTY_STRING,state:a?a.userRequestState:x.EMPTY_STRING,cloudGraphHostName:i.account?.cloudGraphHostName||x.EMPTY_STRING,msGraphHost:i.account?.msGraphHost||x.EMPTY_STRING,code:l?.spa_code,fromNativeBroker:!1}})}};function Pu(n,e,t,i,o,r,s,a,l,c,d){d?.verbose("setCachedAccount called");let p=n.getAccountKeys().find(S=>S.startsWith(t)),g=null;p&&(g=n.getAccount(p,d));let w=g||kt.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:r,environment:s,cloudGraphHostName:l?.cloud_graph_host_name,msGraphHost:l?.msgraph_host,nativeAccountId:c},e,i),k=w.tenantProfiles||[],C=a||w.realm;if(C&&!k.find(S=>S.tenantId===C)){let S=Iu(t,w.localAccountId,C,o);k.push(S)}return w.tenantProfiles=k,w}function xk(n,e,t){return E(this,null,function*(){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})})}var Dc=class extends ya{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.GetAuthCodeUrl,e.correlationId);let t=yield P(this.createAuthCodeUrlQueryString.bind(this),y.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return ye.appendQueryString(this.authority.authorizationEndpoint,t)})}acquireToken(e,t){return E(this,null,function*(){if(this.performanceClient?.addQueueMeasurement(y.AuthClientAcquireToken,e.correlationId),!e.code)throw D(dc);let i=Ni(),o=yield P(this.executeTokenRequest.bind(this),y.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),r=o.headers?.[$t.X_MS_REQUEST_ID],s=new hr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),P(s.handleServerTokenResponse.bind(s),y.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,i,e,t,void 0,void 0,void 0,r)})}handleFragmentResponse(e,t){if(new hr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw D(pc);return e}getLogoutUri(e){if(!e)throw ze(xc);let t=this.createLogoutUrlQueryString(e);return ye.appendQueryString(this.authority.endSessionEndpoint,t)}executeTokenRequest(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthClientExecuteTokenRequest,t.correlationId);let i=this.createTokenQueryParameters(t),o=ye.appendQueryString(e.tokenEndpoint,i),r=yield P(this.createTokenRequestBody.bind(this),y.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t),s;if(t.clientInfo)try{let c=Au(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${c.uid}${Ht.CLIENT_INFO_SEPARATOR}${c.utid}`,type:rn.HOME_ACCOUNT_ID}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}let a=this.createTokenRequestHeaders(s||t.ccsCredential),l={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return P(this.executePostToTokenEndpoint.bind(this),y.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,r,a,l,t.correlationId,y.AuthorizationCodeClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.AuthClientCreateTokenRequestBody,e.correlationId);let t=new dr(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[fs]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):cr.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!Op(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;t.addClientAssertion(yield xk(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(o.assertionType)}if(t.addGrantType(ep.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===Fe.POP){let o=new Oi(this.cryptoUtils,this.performanceClient),r;e.popKid?r=this.cryptoUtils.encodeKid(e.popKid):r=(yield P(o.generateCnf.bind(o),y.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(r)}else if(e.authenticationScheme===Fe.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw ze(ds);(!Ot.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let i;if(e.clientInfo)try{let o=Au(e.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${o.uid}${Ht.CLIENT_INFO_SEPARATOR}${o.utid}`,type:rn.HOME_ACCOUNT_ID}}catch(o){this.logger.verbose("Could not parse client info for CCS Header: "+o)}else i=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&i)switch(i.type){case rn.HOME_ACCOUNT_ID:try{let o=us(i.credential);t.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case rn.UPN:t.addCcsUpn(i.credential);break}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[kk])&&t.addExtraQueryParameters({[kk]:"1"}),t.createQueryString()})}createAuthCodeUrlQueryString(e){return E(this,null,function*(){let t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(y.AuthClientCreateQueryString,t);let i=new dr(t,this.performanceClient);i.addClientId(e.embeddedClientId||e.extraQueryParameters?.[fs]||this.config.authOptions.clientId);let o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(i.addScopes(o,!0,this.oidcDefaultScopes),i.addRedirectUri(e.redirectUri),i.addCorrelationId(t),i.addResponseMode(e.responseMode),i.addResponseTypeCode(),i.addLibraryInfo(this.config.libraryInfo),Op(this.config)||i.addApplicationTelemetry(this.config.telemetry.application),i.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&i.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&i.addPrompt(e.prompt),e.domainHint&&i.addDomainHint(e.domainHint),e.prompt!==yt.SELECT_ACCOUNT)if(e.sid&&e.prompt===yt.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),i.addSid(e.sid);else if(e.account){let r=this.extractAccountSid(e.account),s=this.extractLoginHint(e.account);if(s&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),s=null),s){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),i.addLoginHint(s);try{let a=us(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(r&&e.prompt===yt.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),i.addSid(r);try{let a=us(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),i.addLoginHint(e.loginHint),i.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),i.addLoginHint(e.account.username);try{let a=us(e.account.homeAccountId);i.addCcsOid(a)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),i.addLoginHint(e.loginHint),i.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&i.addNonce(e.nonce),e.state&&i.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,i),e.nativeBroker&&(i.addNativeBroker(),e.authenticationScheme===Fe.POP)){let r=new Oi(this.cryptoUtils),s;e.popKid?s=this.cryptoUtils.encodeKid(e.popKid):s=(yield P(r.generateCnf.bind(r),y.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,i.addPopToken(s)}return i.createQueryString()})}createLogoutUrlQueryString(e){let t=new dr(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}};var QJ=300,Ea=class extends ya{constructor(e,t){super(e,t)}acquireToken(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RefreshTokenClientAcquireToken,e.correlationId);let t=Ni(),i=yield P(this.executeTokenRequest.bind(this),y.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=i.headers?.[$t.X_MS_REQUEST_ID],r=new hr(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return r.validateTokenResponse(i.body),P(r.handleServerTokenResponse.bind(r),y.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)})}acquireTokenByRefreshToken(e){return E(this,null,function*(){if(!e)throw ze(Sc);if(this.performanceClient?.addQueueMeasurement(y.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw D(rs);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield P(this.acquireTokenWithCachedRefreshToken.bind(this),y.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(i){let o=i instanceof yn&&i.errorCode===_a,r=i instanceof Qn&&i.errorCode===ik.INVALID_GRANT_ERROR&&i.subError===ik.CLIENT_MISMATCH_ERROR;if(o||r)return P(this.acquireTokenWithCachedRefreshToken.bind(this),y.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw i}return P(this.acquireTokenWithCachedRefreshToken.bind(this),y.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)})}acquireTokenWithCachedRefreshToken(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);let i=Kn(this.cacheManager.getRefreshToken.bind(this.cacheManager),y.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!i)throw Du(_a);if(i.expiresOn&&Su(i.expiresOn,e.refreshTokenExpirationOffsetSeconds||QJ))throw Du(Fp);let o=I(v({},e),{refreshToken:i.secret,authenticationScheme:e.authenticationScheme||Fe.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:rn.HOME_ACCOUNT_ID}});try{return yield P(this.acquireToken.bind(this),y.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(r){if(r instanceof yn&&r.subError===Ca){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");let s=_p(i);this.cacheManager.removeRefreshToken(s)}throw r}})}executeTokenRequest(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RefreshTokenClientExecuteTokenRequest,e.correlationId);let i=this.createTokenQueryParameters(e),o=ye.appendQueryString(t.tokenEndpoint,i),r=yield P(this.createTokenRequestBody.bind(this),y.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return P(this.executePostToTokenEndpoint.bind(this),y.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,r,s,a,e.correlationId,y.RefreshTokenClientExecutePostToTokenEndpoint)})}createTokenRequestBody(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.RefreshTokenClientCreateTokenRequestBody,e.correlationId);let t=e.correlationId,i=new dr(t,this.performanceClient);if(i.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[fs]||this.config.authOptions.clientId),e.redirectUri&&i.addRedirectUri(e.redirectUri),i.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),i.addGrantType(ep.REFRESH_TOKEN_GRANT),i.addClientInfo(),i.addLibraryInfo(this.config.libraryInfo),i.addApplicationTelemetry(this.config.telemetry.application),i.addThrottling(),this.serverTelemetryManager&&!Op(this.config)&&i.addServerTelemetry(this.serverTelemetryManager),i.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&i.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){let o=this.config.clientCredentials.clientAssertion;i.addClientAssertion(yield xk(o.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),i.addClientAssertionType(o.assertionType)}if(e.authenticationScheme===Fe.POP){let o=new Oi(this.cryptoUtils,this.performanceClient),r;e.popKid?r=this.cryptoUtils.encodeKid(e.popKid):r=(yield P(o.generateCnf.bind(o),y.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,i.addPopToken(r)}else if(e.authenticationScheme===Fe.SSH)if(e.sshJwk)i.addSshJwk(e.sshJwk);else throw ze(ds);if((!Ot.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&i.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case rn.HOME_ACCOUNT_ID:try{let o=us(e.ccsCredential.credential);i.addCcsOid(o)}catch(o){this.logger.verbose("Could not parse home account ID for CCS Header: "+o)}break;case rn.UPN:i.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&i.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&i.addExtraQueryParameters(e.tokenBodyParameters),i.createQueryString()})}};var Vp=class extends ya{constructor(e,t){super(e,t)}acquireToken(e){return E(this,null,function*(){try{let[t,i]=yield this.acquireCachedToken(I(v({},e),{scopes:e.scopes?.length?e.scopes:[...Ri]}));return i===Oo.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Ea(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),t}catch(t){if(t instanceof kc&&t.errorCode===ar)return new Ea(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw t}})}acquireCachedToken(e){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Oo.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Ot.isEmptyObj(e.claims))throw this.setCacheOutcome(Oo.FORCE_REFRESH_OR_CLAIMS,e.correlationId),D(ar);if(!e.account)throw D(rs);let i=e.account.tenantId||m4(e.authority),o=this.cacheManager.getTokenKeys(),r=this.cacheManager.getAccessToken(e.account,e,o,i,this.performanceClient,e.correlationId);if(r){if(Gx(r.cachedAt)||Su(r.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Oo.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),D(ar);r.refreshOn&&Su(r.refreshOn,0)&&(t=Oo.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Oo.NO_CACHED_ACCESS_TOKEN,e.correlationId),D(ar);let s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:r,idToken:this.cacheManager.getIdToken(e.account,o,i,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[yield P(this.generateResultFromCacheRecord.bind(this),y.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]})}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==Oo.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,t){return E(this,null,function*(){this.performanceClient?.addQueueMeasurement(y.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let i;if(e.idToken&&(i=as(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){let o=i?.auth_time;if(!o)throw D(os);vp(o,t.maxAge)}return hr.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,i)})}};var WA={sendGetRequestAsync:()=>Promise.reject(D(ke)),sendPostRequestAsync:()=>Promise.reject(D(ke))};var g4=",",b4="|";function YJ(n){let{skus:e,libraryName:t,libraryVersion:i,extensionName:o,extensionVersion:r}=n,s=new Map([[0,[t,i]],[2,[o,r]]]),a=[];if(e?.length){if(a=e.split(g4),a.length<4)return e}else a=Array.from({length:4},()=>b4);return s.forEach((l,c)=>{l.length===2&&l[0]?.length&&l[1]?.length&&ZJ({skuArr:a,index:c,skuName:l[0],skuVersion:l[1]})}),a.join(g4)}function ZJ(n){let{skuArr:e,index:t,skuName:i,skuVersion:o}=n;t>=e.length||(e[t]=[i,o].join(b4))}var Pc=class n{constructor(e,t){this.cacheOutcome=Oo.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||x.EMPTY_STRING,this.wrapperVer=e.wrapperVer||x.EMPTY_STRING,this.telemetryCacheKey=nn.CACHE_KEY+Ht.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){let e=`${this.apiId}${nn.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],i=this.getNativeBrokerErrorCode();i?.length&&t.push(`broker_error=${i}`);let o=t.join(nn.VALUE_SEPARATOR),r=this.getRegionDiscoveryFields(),s=[e,r].join(nn.VALUE_SEPARATOR);return[nn.SCHEMA_VERSION,s,o].join(nn.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),i=e.failedRequests.slice(0,2*t).join(nn.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(nn.VALUE_SEPARATOR),r=e.errors.length,s=t<r?nn.OVERFLOW_TRUE:nn.OVERFLOW_FALSE,a=[r,s].join(nn.VALUE_SEPARATOR);return[nn.SCHEMA_VERSION,e.cacheHits,i,o,a].join(nn.CATEGORY_SEPARATOR)}cacheFailedRequest(e){let t=this.getLastRequests();t.errors.length>=nn.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof xe?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(nn.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){let e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){let e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){let e=this.getLastRequests(),t=n.maxErrorsToSend(e),i=e.errors.length;if(t===i)this.cacheManager.removeItem(this.telemetryCacheKey);else{let o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,i=0,o=0,r=e.errors.length;for(t=0;t<r;t++){let s=e.failedRequests[2*t]||x.EMPTY_STRING,a=e.failedRequests[2*t+1]||x.EMPTY_STRING,l=e.errors[t]||x.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+l.length+3,o<nn.MAX_LAST_HEADER_BYTES)i+=1;else break}return i}getRegionDiscoveryFields(){let e=[];return e.push(this.regionUsed||x.EMPTY_STRING),e.push(this.regionSource||x.EMPTY_STRING),e.push(this.regionOutcome||x.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){let t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){let e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return YJ(e)}};var Ak="missing_kid_error",Tk="missing_alg_error";var JJ={[Ak]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Tk]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."},qA=class n extends xe{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,n.prototype)}};function GA(n){return new qA(n,JJ[n])}var Bp=class n{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw GA(Ak);if(!e.alg)throw GA(Tk);let t=new n({typ:e.typ||sk.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}};var Ik=class{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}},Ru=class{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:VA.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Ik}}startPerformanceMeasurement(){return new Ik}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}};var Rc="pkce_not_created",Nc="crypto_nonexistent",mr="empty_navigate_uri",Nu="hash_empty_error",Sa="no_state_in_hash",Ou="hash_does_not_contain_known_properties",Lu="unable_to_parse_state",Fu="state_interaction_type_mismatch",Vu="interaction_in_progress",Bu="popup_window_error",zu="empty_window_error",bi="user_cancelled",Mk="monitor_popup_timeout",Hu="monitor_window_timeout",Uu="redirect_in_iframe",ju="block_iframe_reload",$u="block_nested_popups",Dk="iframe_closed_prematurely",fr="silent_logout_unsupported",Wu="no_account_error",Pk="silent_prompt_value_error",qu="no_token_request_cache_error",Gu="unable_to_parse_token_request_cache_error",xa="no_cached_authority_error",Rk="auth_request_not_set_error",Nk="invalid_cache_type",pr="non_browser_environment",gr="database_not_open",bs="no_network_connectivity",Ku="post_request_failed",Qu="get_request_failed",Oc="failed_to_parse_response",Yu="unable_to_load_token",Aa="crypto_key_not_found",Zu="auth_code_required",Ju="auth_code_or_nativeAccountId_required",Xu="spa_code_and_nativeAccountId_present",Ta="database_unavailable",eh="unable_to_acquire_token_from_native_platform",th="native_handshake_timeout",nh="native_extension_not_installed",no="native_connection_not_established",ih="uninitialized_public_client_application",oh="native_prompt_not_supported",rh="invalid_base64_string",sh="invalid_pop_token_request",Ok="failed_to_build_headers",Lk="failed_to_parse_headers";var ws="For more visit: aka.ms/msaljs/browser-errors",fe={[Rc]:"The PKCE code challenge and verifier could not be generated.",[Nc]:"The crypto object or function is not available.",[mr]:"Navigation URI is empty. Please check stack trace for more info.",[Nu]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ws}`,[Sa]:"Hash does not contain state. Please verify that the request originated from msal.",[Ou]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ws}`,[Lu]:"Unable to parse state. Please verify that the request originated from msal.",[Fu]:"Hash contains state but the interaction type does not match the caller.",[Vu]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ws}`,[Bu]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[zu]:"window.open returned null or undefined window object.",[bi]:"User cancelled the flow.",[Mk]:`Token acquisition in popup failed due to timeout.  ${ws}`,[Hu]:`Token acquisition in iframe failed due to timeout.  ${ws}`,[Uu]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[ju]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ws}`,[$u]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Dk]:"The iframe being monitored was closed prematurely.",[fr]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[Wu]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[Pk]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[qu]:"No token request found in cache.",[Gu]:"The cached token request could not be parsed.",[xa]:"No cached authority found.",[Rk]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Nk]:"Invalid cache type",[pr]:"Login and token requests are not supported in non-browser environments.",[gr]:"Database is not open!",[bs]:"No network connectivity. Check your internet connection.",[Ku]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Qu]:"Network request failed. Please check the network trace to determine root cause.",[Oc]:"Failed to parse network response. Check network trace.",[Yu]:"Error loading token to cache.",[Aa]:"Cryptographic Key or Keypair not found in browser storage.",[Zu]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ju]:"An authorization code or nativeAccountId must be provided to this flow.",[Xu]:"Request cannot contain both spa code and native account id.",[Ta]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[eh]:`Unable to acquire token from native platform.  ${ws}`,[th]:"Timed out while attempting to establish connection to browser extension",[nh]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[no]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ws}`,[ih]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ws}`,[oh]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[rh]:"Invalid base64 encoded string.",[sh]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Ok]:"Failed to build request headers object.",[Lk]:"Failed to parse response headers"},rOe={pkceNotGenerated:{code:Rc,desc:fe[Rc]},cryptoDoesNotExist:{code:Nc,desc:fe[Nc]},emptyNavigateUriError:{code:mr,desc:fe[mr]},hashEmptyError:{code:Nu,desc:fe[Nu]},hashDoesNotContainStateError:{code:Sa,desc:fe[Sa]},hashDoesNotContainKnownPropertiesError:{code:Ou,desc:fe[Ou]},unableToParseStateError:{code:Lu,desc:fe[Lu]},stateInteractionTypeMismatchError:{code:Fu,desc:fe[Fu]},interactionInProgress:{code:Vu,desc:fe[Vu]},popupWindowError:{code:Bu,desc:fe[Bu]},emptyWindowError:{code:zu,desc:fe[zu]},userCancelledError:{code:bi,desc:fe[bi]},monitorPopupTimeoutError:{code:Mk,desc:fe[Mk]},monitorIframeTimeoutError:{code:Hu,desc:fe[Hu]},redirectInIframeError:{code:Uu,desc:fe[Uu]},blockTokenRequestsInHiddenIframeError:{code:ju,desc:fe[ju]},blockAcquireTokenInPopupsError:{code:$u,desc:fe[$u]},iframeClosedPrematurelyError:{code:Dk,desc:fe[Dk]},silentLogoutUnsupportedError:{code:fr,desc:fe[fr]},noAccountError:{code:Wu,desc:fe[Wu]},silentPromptValueError:{code:Pk,desc:fe[Pk]},noTokenRequestCacheError:{code:qu,desc:fe[qu]},unableToParseTokenRequestCacheError:{code:Gu,desc:fe[Gu]},noCachedAuthorityError:{code:xa,desc:fe[xa]},authRequestNotSet:{code:Rk,desc:fe[Rk]},invalidCacheType:{code:Nk,desc:fe[Nk]},notInBrowserEnvironment:{code:pr,desc:fe[pr]},databaseNotOpen:{code:gr,desc:fe[gr]},noNetworkConnectivity:{code:bs,desc:fe[bs]},postRequestFailed:{code:Ku,desc:fe[Ku]},getRequestFailed:{code:Qu,desc:fe[Qu]},failedToParseNetworkResponse:{code:Oc,desc:fe[Oc]},unableToLoadTokenError:{code:Yu,desc:fe[Yu]},signingKeyNotFoundInStorage:{code:Aa,desc:fe[Aa]},authCodeRequired:{code:Zu,desc:fe[Zu]},authCodeOrNativeAccountRequired:{code:Ju,desc:fe[Ju]},spaCodeAndNativeAccountPresent:{code:Xu,desc:fe[Xu]},databaseUnavailable:{code:Ta,desc:fe[Ta]},unableToAcquireTokenFromNativePlatform:{code:eh,desc:fe[eh]},nativeHandshakeTimeout:{code:th,desc:fe[th]},nativeExtensionNotInstalled:{code:nh,desc:fe[nh]},nativeConnectionNotEstablished:{code:no,desc:fe[no]},uninitializedPublicClientApplication:{code:ih,desc:fe[ih]},nativePromptNotSupported:{code:oh,desc:fe[oh]},invalidBase64StringError:{code:rh,desc:fe[rh]},invalidPopTokenRequest:{code:sh,desc:fe[sh]}},Lc=class n extends xe{constructor(e,t){super(e,fe[e],t),Object.setPrototypeOf(this,n.prototype),this.name="BrowserAuthError"}};function B(n,e){return new Lc(n,e)}var qt={INTERACTION_IN_PROGRESS_VALUE:"interaction_in_progress",INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Ia={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},ks={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},ct={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},KA={GET:"GET",POST:"POST"},Ye={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},vs={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},zp={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},et={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962},W=function(n){return n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none",n}(W||{}),Zt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},QA={scopes:Ri},YA="jwk",ZA={React:"@azure/msal-react",Angular:"@azure/msal-angular"},Fk="msal.db",w4=1,k4=`${Fk}.keys`,Yn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},v4=[Yn.Default,Yn.Skip,Yn.RefreshTokenAndNetwork],y4="msal.browser.log.level",_4="msal.browser.log.pii";function Hp(n){return encodeURIComponent(Up(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Fc(n){return C4(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Up(n){return C4(new TextEncoder().encode(n))}function C4(n){let e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}var XJ="RSASSA-PKCS1-v1_5",x4="SHA-256",eX=2048,tX=new Uint8Array([1,0,1]),E4="0123456789abcdef",S4=new Uint32Array(1),nX="crypto_subtle_undefined",XA={name:XJ,hash:x4,modulusLength:eX,publicExponent:tX};function A4(){if(!window)throw B(pr);if(!window.crypto)throw B(Nc);if(!window.crypto.subtle)throw B(Nc,nX)}function eT(n,e,t){return E(this,null,function*(){e?.addQueueMeasurement(y.Sha256Digest,t);let o=new TextEncoder().encode(n);return window.crypto.subtle.digest(x4,o)})}function T4(n){return window.crypto.getRandomValues(n)}function JA(){return window.crypto.getRandomValues(S4),S4[0]}function Pn(){let n=Date.now(),e=JA()*1024+(JA()&1023),t=new Uint8Array(16),i=Math.trunc(e/2**30),o=e&2**30-1,r=JA();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|i>>>8,t[7]=i,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=r>>>24,t[13]=r>>>16,t[14]=r>>>8,t[15]=r;let s="";for(let a=0;a<t.length;a++)s+=E4.charAt(t[a]>>>4),s+=E4.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}function I4(n,e){return E(this,null,function*(){return window.crypto.subtle.generateKey(XA,n,e)})}function Vk(n){return E(this,null,function*(){return window.crypto.subtle.exportKey(YA,n)})}function M4(n,e,t){return E(this,null,function*(){return window.crypto.subtle.importKey(YA,n,XA,e,t)})}function D4(n,e){return E(this,null,function*(){return window.crypto.subtle.sign(XA,n,e)})}function Bk(n){return E(this,null,function*(){let e=yield eT(n),t=new Uint8Array(e);return Fc(t)})}var ah="storage_not_supported",zk="stubbed_public_client_application_called",lh="in_mem_redirect_unavailable";var Hk={[ah]:"Given storage configuration option was not supported.",[zk]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[lh]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."},iX={storageNotSupportedError:{code:ah,desc:Hk[ah]},stubPcaInstanceCalled:{code:zk,desc:Hk[zk]},inMemRedirectUnavailable:{code:lh,desc:Hk[lh]}},ch=class n extends xe{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,n.prototype)}};function Uk(n){return new ch(n,Hk[n])}function tT(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function nT(n){let e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function jp(){return window.parent!==window}function P4(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${qt.POPUP_NAME_PREFIX}.`)===0}function Zn(){return window.location.href.split("?")[0].split("#")[0]}function iT(){let e=new ye(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function R4(){if(ye.hashContainsKnownProperties(window.location.hash)&&jp())throw B(ju)}function N4(n){if(jp()&&!n)throw B(Uu)}function O4(){if(P4())throw B($u)}function jk(){if(typeof window>"u")throw B(pr)}function $k(n){if(!n)throw B(ih)}function $p(n){jk(),R4(),O4(),$k(n)}function Wk(n,e){if($p(n),N4(e.system.allowRedirectInIframe),e.cache.cacheLocation===ct.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Uk(lh)}function Wp(n){let e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function oT(){return Pn()}var qp=class n{navigateInternal(e,t){return n.defaultNavigateWindow(e,t)}navigateExternal(e,t){return n.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(i=>{setTimeout(()=>{i(!0)},t.timeout)})}};var Gk=class{sendGetRequestAsync(e,t){return E(this,null,function*(){let i,o={},r=0,s=L4(t);try{i=yield fetch(e,{method:KA.GET,headers:s})}catch{throw B(window.navigator.onLine?Qu:bs)}o=F4(i.headers);try{return r=i.status,{headers:o,body:yield i.json(),status:r}}catch{throw Ck(B(Oc),r,o)}})}sendPostRequestAsync(e,t){return E(this,null,function*(){let i=t&&t.body||"",o=L4(t),r,s=0,a={};try{r=yield fetch(e,{method:KA.POST,headers:o,body:i})}catch{throw B(window.navigator.onLine?Ku:bs)}a=F4(r.headers);try{return s=r.status,{headers:a,body:yield r.json(),status:s}}catch{throw Ck(B(Oc),s,a)}})}};function L4(n){try{let e=new Headers;if(!(n&&n.headers))return e;let t=n.headers;return Object.entries(t).forEach(([i,o])=>{e.append(i,o)}),e}catch{throw B(Ok)}}function F4(n){try{let e={};return n.forEach((t,i)=>{e[i]=t}),e}catch{throw B(Lk)}}var oX=6e4,Kk=1e4,rX=3e4,sX=2e3;function V4({auth:n,cache:e,system:t,telemetry:i},o){let r={clientId:x.EMPTY_STRING,authority:`${x.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:x.EMPTY_STRING,authorityMetadata:x.EMPTY_STRING,redirectUri:typeof window<"u"?Zn():"",postLogoutRedirectUri:x.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:vn.AAD,OIDCOptions:{serverResponseType:No.FRAGMENT,defaultScopes:[x.OPENID_SCOPE,x.PROFILE_SCOPE,x.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ba.None,tenant:x.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:ct.SessionStorage,temporaryCacheLocation:ct.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===ct.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:st.Info,piiLoggingEnabled:!1},l=I(v({},fk),{loggerOptions:a,networkClient:o?new Gk:WA,navigationClient:new qp,loadFrameTimeout:0,windowHashTimeout:t?.loadFrameTimeout||oX,iframeHashTimeout:t?.loadFrameTimeout||Kk,navigateFrameWait:0,redirectNavigationTimeout:rX,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:t?.nativeBrokerHandshakeTimeout||sX,pollIntervalMilliseconds:qt.DEFAULT_POLL_INTERVAL_MS}),c=I(v(v({},l),t),{loggerOptions:t?.loggerOptions||a}),d={application:{appName:x.EMPTY_STRING,appVersion:x.EMPTY_STRING},client:new Ru};if(n?.protocolMode!==vn.OIDC&&n?.OIDCOptions&&new gi(c.loggerOptions).warning(JSON.stringify(ze(Fo.cannotSetOIDCOptions))),n?.protocolMode&&n.protocolMode!==vn.AAD&&c?.allowNativeBroker)throw ze(Fo.cannotAllowNativeBroker);return{auth:I(v(v({},r),n),{OIDCOptions:v(v({},r.OIDCOptions),n?.OIDCOptions)}),cache:v(v({},s),e),system:c,telemetry:v(v({},d),i)}}var B4="@azure/msal-browser",Ma="3.27.0";var Qk=class n{static loggerCallback(e,t){switch(e){case st.Error:console.error(t);return;case st.Info:console.info(t);return;case st.Verbose:console.debug(t);return;case st.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){this.browserEnvironment=typeof window<"u",this.config=V4(e,this.browserEnvironment);let t;try{t=window[ct.SessionStorage]}catch{}let i=t?.getItem(y4),o=t?.getItem(_4)?.toLowerCase(),r=o==="true"?!0:o==="false"?!1:void 0,s=v({},this.config.system.loggerOptions),a=i&&Object.keys(st).includes(i)?st[i]:void 0;a&&(s.loggerCallback=n.loggerCallback,s.logLevel=a),r!==void 0&&(s.piiLoggingEnabled=r),this.logger=new gi(s,B4,Ma),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}};var Yk=(()=>{class n extends Qk{getModuleName(){return n.MODULE_NAME}getId(){return n.ID}initialize(){return E(this,null,function*(){return this.available=typeof window<"u",this.available})}}return n.MODULE_NAME="",n.ID="StandardOperatingContext",n})();function wi(n){return new TextDecoder().decode(aX(n))}function aX(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw B(rh)}let t=atob(e);return Uint8Array.from(t,i=>i.codePointAt(0)||0)}var Zk=class{constructor(){this.dbName=Fk,this.version=w4,this.tableName=k4,this.dbOpen=!1}open(){return E(this,null,function*(){return new Promise((e,t)=>{let i=window.indexedDB.open(this.dbName,this.version);i.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),i.addEventListener("success",o=>{let r=o;this.db=r.target.result,this.dbOpen=!0,e()}),i.addEventListener("error",()=>t(B(Ta)))})})}closeConnection(){let e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){return E(this,null,function*(){if(!this.dbOpen)return this.open()})}getItem(e){return E(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(gr));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{let l=a;this.closeConnection(),t(l.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}setItem(e,t){return E(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((i,o)=>{if(!this.db)return o(B(gr));let a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),i()}),a.addEventListener("error",l=>{this.closeConnection(),o(l)})})})}removeItem(e){return E(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(gr));let s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}getKeys(){return E(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(B(gr));let r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();r.addEventListener("success",s=>{let a=s;this.closeConnection(),e(a.target.result)}),r.addEventListener("error",s=>{this.closeConnection(),t(s)})})})}containsKey(e){return E(this,null,function*(){return yield this.validateDbIsOpen(),new Promise((t,i)=>{if(!this.db)return i(B(gr));let s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{let l=a;this.closeConnection(),t(l.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),i(a)})})})}deleteDatabase(){return E(this,null,function*(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{let i=window.indexedDB.deleteDatabase(Fk),o=setTimeout(()=>t(!1),200);i.addEventListener("success",()=>(clearTimeout(o),e(!0))),i.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),i.addEventListener("error",()=>(clearTimeout(o),t(!1)))})})}};var Vc=class{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){let e=[];return this.cache.forEach((t,i)=>{e.push(i)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}};var Jk=class{constructor(e){this.inMemoryCache=new Vc,this.indexedDBCache=new Zk,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Lc&&e.errorCode===Ta)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}getItem(e){return E(this,null,function*(){let t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.getItem(e)}catch(i){this.handleDatabaseAccessError(i)}return t})}setItem(e,t){return E(this,null,function*(){this.inMemoryCache.setItem(e,t);try{yield this.indexedDBCache.setItem(e,t)}catch(i){this.handleDatabaseAccessError(i)}})}removeItem(e){return E(this,null,function*(){this.inMemoryCache.removeItem(e);try{yield this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}})}getKeys(){return E(this,null,function*(){let e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e})}containsKey(e){return E(this,null,function*(){let t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield this.indexedDBCache.containsKey(e)}catch(i){this.handleDatabaseAccessError(i)}return t})}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){return E(this,null,function*(){try{this.logger.verbose("Deleting persistent keystore");let e=yield this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}})}};var H4=(()=>{class n{constructor(t,i){this.logger=t,A4(),this.cache=new Jk(this.logger),this.performanceClient=i}createNewGuid(){return Pn()}base64Encode(t){return Up(t)}base64Decode(t){return wi(t)}base64UrlEncode(t){return Hp(t)}encodeKid(t){return this.base64UrlEncode(JSON.stringify({kid:t}))}getPublicKeyThumbprint(t){return E(this,null,function*(){let i=this.performanceClient?.startMeasurement(y.CryptoOptsGetPublicKeyThumbprint,t.correlationId),o=yield I4(n.EXTRACTABLE,n.POP_KEY_USAGES),r=yield Vk(o.publicKey),s={e:r.e,kty:r.kty,n:r.n},a=z4(s),l=yield this.hashString(a),c=yield Vk(o.privateKey),d=yield M4(c,!1,["sign"]);return yield this.cache.setItem(l,{privateKey:d,publicKey:o.publicKey,requestMethod:t.resourceRequestMethod,requestUri:t.resourceRequestUri}),i&&i.end({success:!0}),l})}removeTokenBindingKey(t){return E(this,null,function*(){return yield this.cache.removeItem(t),!(yield this.cache.containsKey(t))})}clearKeystore(){return E(this,null,function*(){this.cache.clearInMemory();try{return yield this.cache.clearPersistent(),!0}catch(t){return t instanceof Error?this.logger.error(`Clearing keystore failed with error: ${t.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}})}signJwt(t,i,o,r){return E(this,null,function*(){let s=this.performanceClient?.startMeasurement(y.CryptoOptsSignJwt,r),a=yield this.cache.getItem(i);if(!a)throw B(Aa);let l=yield Vk(a.publicKey),c=z4(l),d=Hp(JSON.stringify({kid:i})),f=Bp.getShrHeaderString(I(v({},o?.header),{alg:l.alg,kid:d})),p=Hp(f);t.cnf={jwk:JSON.parse(c)};let g=Hp(JSON.stringify(t)),w=`${p}.${g}`,C=new TextEncoder().encode(w),S=yield D4(a.privateKey,C),T=Fc(new Uint8Array(S)),V=`${w}.${T}`;return s&&s.end({success:!0}),V})}hashString(t){return E(this,null,function*(){return Bk(t)})}}return n.POP_KEY_USAGES=["sign","verify"],n.EXTRACTABLE=!0,n})();function z4(n){return JSON.stringify(n,Object.keys(n).sort())}var Gp=class{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==ct.LocalStorage&&e!==ct.SessionStorage||!window[e])throw Uk(ah)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,t){this.windowStorage.setItem(e,t)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}};function Xk(n,e){if(!e)return null;try{return sn.parseRequestState(n,e).libraryState.meta}catch{throw D(on.invalidState)}}var dh=class n extends ms{constructor(e,t,i,o,r,s){super(e,i,o,r),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=t,this.logger=o,this.internalStorage=new Vc,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case ct.LocalStorage:case ct.SessionStorage:try{return new Gp(e)}catch(t){this.logger.verbose(t);break}}return this.cacheConfig.cacheLocation=ct.MemoryStorage,new Vc}setupTemporaryCacheStorage(e,t){switch(t){case ct.LocalStorage:case ct.SessionStorage:try{return new Gp(e||ct.SessionStorage)}catch(i){return this.logger.verbose(i),this.internalStorage}case ct.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){let e=`${x.CACHE_PREFIX}.${Wt.ID_TOKEN}`,t=`${x.CACHE_PREFIX}.${Wt.CLIENT_INFO}`,i=`${x.CACHE_PREFIX}.${Wt.ERROR}`,o=`${x.CACHE_PREFIX}.${Wt.ERROR_DESC}`,r=this.browserStorage.getItem(e),s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(i),l=this.browserStorage.getItem(o),c=[r,s,a,l];[Wt.ID_TOKEN,Wt.CLIENT_INFO,Wt.ERROR,Wt.ERROR_DESC].forEach((f,p)=>{let g=c[p];g&&this.setTemporaryCache(f,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");let e=this.getItem(vs.ACCOUNT_KEYS),t=this.getItem(`${vs.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){let r=this.getItem(o);if(r){let s=this.validateAndParseJson(r);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case ae.ID_TOKEN:if(mt.isIdTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,ae.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case ae.ACCESS_TOKEN:case ae.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(mt.isAccessTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,ae.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case ae.REFRESH_TOKEN:if(mt.isRefreshTokenEntity(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);let a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,ae.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){let r=this.getItem(o);if(r){let s=this.validateAndParseJson(r);s&&kt.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{let t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");let i=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,i,t)}getCachedAccountEntity(e){let t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;let i=this.validateAndParseJson(t);return!i||!kt.isAccountEntity(i)?(this.removeAccountKeyFromMap(e),null):ms.toObject(new kt,i)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");let t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");let e=this.getItem(vs.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);let t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(vs.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);let t=this.getAccountKeys(),i=t.indexOf(e);i>-1?(t.splice(i,1),this.setItem(vs.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e){return E(this,null,function*(){zm(n.prototype,this,"removeAccount").call(this,e),this.removeAccountKeyFromMap(e)})}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,ae.ID_TOKEN)}removeAccessToken(e){return E(this,null,function*(){zm(n.prototype,this,"removeAccessToken").call(this,e),this.removeTokenKey(e,ae.ACCESS_TOKEN)})}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,ae.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");let e=this.getItem(`${vs.TOKEN_KEYS}.${this.clientId}`);if(e){let t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");let i=this.getTokenKeys();switch(t){case ae.ID_TOKEN:i.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),i.idToken.push(e));break;case ae.ACCESS_TOKEN:i.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),i.accessToken.push(e));break;case ae.REFRESH_TOKEN:i.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),i.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),D(on.unexpectedCredentialType)}this.setItem(`${vs.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(i))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");let i=this.getTokenKeys();switch(t){case ae.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);let o=i.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),i.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case ae.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);let r=i.accessToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),i.accessToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case ae.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);let s=i.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),i.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),D(on.unexpectedCredentialType)}this.setItem(`${vs.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(i))}getIdTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.ID_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!mt.isIdTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),i)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");let t=mt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ae.ID_TOKEN)}getAccessTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.ACCESS_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!mt.isAccessTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),i)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");let t=mt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ae.ACCESS_TOKEN)}getRefreshTokenCredential(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.REFRESH_TOKEN),null;let i=this.validateAndParseJson(t);return!i||!mt.isRefreshTokenEntity(i)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ae.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),i)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");let t=mt.generateCredentialKey(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,ae.REFRESH_TOKEN)}getAppMetadata(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!mt.isAppMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),i)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");let t=mt.generateAppMetadataKey(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!mt.isServerTelemetryEntity(e,i)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),i)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){let t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;let i=this.validateAndParseJson(t);return i&&mt.isAuthorityMetadataEntity(e,i)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),i):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(zp.WRAPPER_SKU,e),this.internalStorage.setItem(zp.WRAPPER_VER,t)}getWrapperMetadata(){let e=this.internalStorage.getItem(zp.WRAPPER_SKU)||x.EMPTY_STRING,t=this.internalStorage.getItem(zp.WRAPPER_VER)||x.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){let e=this.generateCacheKey(Wt.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");let o=this.generateCacheKey(Wt.ACTIVE_ACCOUNT),r=this.getItem(o);if(!r)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;let s=this.getAccountInfoFilteredBy({localAccountId:r});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}let i=this.validateAndParseJson(t);return i?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:i.homeAccountId,localAccountId:i.localAccountId,tenantId:i.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){let t=this.generateCacheKey(Wt.ACTIVE_ACCOUNT_FILTERS),i=this.generateCacheKey(Wt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");let o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(o)),this.browserStorage.setItem(i,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(i)}getThrottlingCache(e){let t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;let i=this.validateAndParseJson(t);return!i||!mt.isThrottlingEntity(e,i)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),i)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){let i=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){let r=this.getItemCookie(i);if(r)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),r}let o=this.temporaryCacheStorage.getItem(i);if(!o){if(this.cacheConfig.cacheLocation===ct.LocalStorage){let r=this.browserStorage.getItem(i);if(r)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),r}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,i){let o=i?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,t))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}clear(){return E(this,null,function*(){yield this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(x.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(x.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()})}clearTokensAndKeysWithClaims(e,t){return E(this,null,function*(){e.addQueueMeasurement(y.ClearTokensAndKeysWithClaims,t);let i=this.getTokenKeys(),o=[];i.accessToken.forEach(r=>{let s=this.getAccessTokenCredential(r);s?.requestedClaimsHash&&r.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(r))}),yield Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)})}setItemCookie(e,t,i){let o=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(i){let r=this.getCookieExpirationTime(i);o+=`expires=${r};`}this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){let t=`${encodeURIComponent(e)}=`,i=document.cookie.split(";");for(let o=0;o<i.length;o++){let r=i[o];for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(t)===0)return decodeURIComponent(r.substring(t.length,r.length))}return x.EMPTY_STRING}clearMsalCookies(){let e=`${x.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(i=>{for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(e)===0){let o=i.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,x.EMPTY_STRING,-1)}getCookieExpirationTime(e){let t=new Date;return new Date(t.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):Ot.startsWith(e,x.CACHE_PREFIX)||Ot.startsWith(e,Wt.ADAL_ID_TOKEN)?e:`${x.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){let{libraryState:{id:t}}=sn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ye.AUTHORITY}.${t}`)}generateNonceKey(e){let{libraryState:{id:t}}=sn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ye.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){let{libraryState:{id:t}}=sn.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Ye.REQUEST_STATE}.${t}`)}getCachedAuthority(e){let t=this.generateStateKey(e),i=this.getTemporaryCache(t);if(!i)return null;let o=this.generateAuthorityKey(i);return this.getTemporaryCache(o)}updateCacheEntries(e,t,i,o,r){this.logger.trace("BrowserCacheManager.updateCacheEntries called");let s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);let a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);let l=this.generateAuthorityKey(e);if(this.setTemporaryCache(l,i,!1),r){let c={credential:r.homeAccountId,type:rn.HOME_ACCOUNT_ID};this.setTemporaryCache(Ye.CCS_CREDENTIAL,JSON.stringify(c),!0)}else if(o){let c={credential:o,type:rn.UPN};this.setTemporaryCache(Ye.CCS_CREDENTIAL,JSON.stringify(c),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Ye.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(Ye.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(Ye.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(Ye.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(Ye.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(Ye.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){let t=this.generateStateKey(e),i=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${i}`),this.resetRequestCache(i||x.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(Ye.REQUEST_STATE)===-1)return;let i=this.temporaryCacheStorage.getItem(t);if(!i)return;let o=Xk(this.cryptoImpl,i);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${i}`),this.resetRequestCache(i))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");let t=Up(JSON.stringify(e));this.setTemporaryCache(Ye.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");let t=this.getTemporaryCache(Ye.REQUEST_PARAMS,!0);if(!t)throw B(qu);let i;try{i=JSON.parse(wi(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),B(Gu)}if(this.removeTemporaryItem(this.generateCacheKey(Ye.REQUEST_PARAMS)),!i.authority){let o=this.generateAuthorityKey(e),r=this.getTemporaryCache(o);if(!r)throw B(xa);i.authority=r}return i}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");let e=this.getTemporaryCache(Ye.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;let t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){let t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){let e=`${x.CACHE_PREFIX}.${Ye.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){let t=`${x.CACHE_PREFIX}.${Ye.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw B(Vu);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){let e=this.getTemporaryCache(Wt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Wt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));let t=this.getTemporaryCache(Wt.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(Wt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));let i=t||e;if(i){let o=wa.extractTokenClaims(i,wi);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){let i=mt.generateCredentialKey(t);if(e!==i){let o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(i,o),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),i;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,t){return E(this,null,function*(){let i=mt.createIdTokenEntity(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId),o;t.claims&&(o=yield this.cryptoImpl.hashString(t.claims));let r=mt.createAccessTokenEntity(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,wi,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:i,accessToken:r};return this.saveCacheRecord(s)})}saveCacheRecord(e,t,i){return E(this,null,function*(){try{yield zm(n.prototype,this,"saveCacheRecord").call(this,e,t,i)}catch(o){if(o instanceof hs&&this.performanceClient&&i)try{let r=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:r.refreshToken.length,cacheIdCount:r.idToken.length,cacheAtCount:r.accessToken.length},i)}catch{}throw o}})}},U4=(n,e)=>{let t={cacheLocation:ct.MemoryStorage,temporaryCacheLocation:ct.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new dh(n,t,ga,e)};function j4(n,e,t,i){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(i):[]}function $4(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;let i=t.getAccountInfoFilteredBy(n);return i?(e.verbose("getAccount: Account matching provided filter found, returning"),i):(e.verbose("getAccount: No matching account found, returning null"),null)}function W4(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;let i=t.getAccountInfoFilteredBy({username:n});return i?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),i):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function q4(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;let i=t.getAccountInfoFilteredBy({homeAccountId:n});return i?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),i):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function G4(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;let i=t.getAccountInfoFilteredBy({localAccountId:n});return i?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),i):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function K4(n,e){e.setActiveAccount(n)}function Q4(n){return n.getActiveAccount()}var q={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};var ev=class{constructor(e){this.eventCallbacks=new Map,this.logger=e||new gi({})}addEventCallback(e,t,i){if(typeof window<"u"){let o=i||oT();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,i,o){if(typeof window<"u"){let r={eventType:e,interactionType:t||null,payload:i||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],l)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${l}: ${e}`),s.apply(null,[r]))})}}};var uh=class{constructor(e,t,i,o,r,s,a,l,c){this.config=e,this.browserStorage=t,this.browserCrypto=i,this.networkClient=this.config.system.networkClient,this.eventHandler=r,this.navigationClient=s,this.nativeMessageHandler=l,this.correlationId=c||Pn(),this.logger=o.clone(qt.MSAL_SKU,Ma,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){return E(this,null,function*(){if(e){kt.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{yield this.browserStorage.removeAccount(kt.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),yield this.browserStorage.clear(),yield this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})}getRedirectUri(e){this.logger.verbose("getRedirectUri called");let t=e||this.config.auth.redirectUri;return ye.getAbsoluteUrl(t,Zn())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");let i={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Pc(i,this.browserStorage)}getDiscoveredAuthority(e){return E(this,null,function*(){let{account:t}=e,i=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(y.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);let o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},r=e.requestAuthority||this.config.auth.authority,s=i?.length?i==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(ye.getDomainFromUrl(r),t.environment):r,l=to.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=yield P(_k.createDiscoveredInstance,y.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(l,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw ze(Fo.authorityMismatch);return c})}};var lX=32;function Y4(n,e,t){return E(this,null,function*(){n.addQueueMeasurement(y.GeneratePkceCodes,t);let i=Kn(cX,y.GenerateCodeVerifier,e,n,t)(n,e,t),o=yield P(dX,y.GenerateCodeChallengeFromVerifier,e,n,t)(i,n,e,t);return{verifier:i,challenge:o}})}function cX(n,e,t){try{let i=new Uint8Array(lX);return Kn(T4,y.GetRandomValues,e,n,t)(i),Fc(i)}catch{throw B(Rc)}}function dX(n,e,t,i){return E(this,null,function*(){e.addQueueMeasurement(y.GenerateCodeChallengeFromVerifier,i);try{let o=yield P(eT,y.Sha256Digest,t,e,i)(n,e,i);return Fc(new Uint8Array(o))}catch{throw B(Rc)}})}function Kp(n,e,t,i){return E(this,null,function*(){t.addQueueMeasurement(y.InitializeBaseRequest,n.correlationId);let o=n.authority||e.auth.authority,r=[...n&&n.scopes||[]],s=I(v({},n),{correlationId:n.correlationId,authority:o,scopes:r});if(!s.authenticationScheme)s.authenticationScheme=Fe.BEARER,i.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Fe.SSH){if(!n.sshJwk)throw ze(Fo.missingSshJwk);if(!n.sshKid)throw ze(Fo.missingSshKid)}i.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!Ot.isEmptyObj(n.claims)&&(s.requestedClaimsHash=yield Bk(n.claims)),s})}function Z4(n,e,t,i,o){return E(this,null,function*(){i.addQueueMeasurement(y.InitializeSilentRequest,n.correlationId);let r=yield P(Kp,y.InitializeBaseRequest,o,i,n.correlationId)(n,t,i,o);return I(v(v({},n),r),{account:e,forceRefresh:n.forceRefresh||!1})})}var ki=class extends uh{initializeAuthorizationCodeRequest(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);let t=yield P(Y4,y.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),i=I(v({},e),{redirectUri:e.redirectUri,code:x.EMPTY_STRING,codeVerifier:t.verifier});return e.codeChallenge=t.challenge,e.codeChallengeMethod=x.S256_CODE_CHALLENGE_METHOD,i})}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);let t=v({correlationId:this.correlationId||Pn()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){let i=this.getLogoutHintFromIdTokenClaims(e.account);i&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=i)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ye.getAbsoluteUrl(e.postLogoutRedirectUri,Zn())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ye.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Zn())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ye.getAbsoluteUrl(Zn(),Zn())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){let t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.StandardInteractionClientCreateAuthCodeClient,this.correlationId);let t=yield P(this.getClientConfiguration.bind(this),y.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new Dc(t,this.performanceClient)})}getClientConfiguration(e){return E(this,null,function*(){let{serverTelemetryManager:t,requestAuthority:i,requestAzureCloudOptions:o,requestExtraQueryParameters:r,account:s}=e;this.performanceClient.addQueueMeasurement(y.StandardInteractionClientGetClientConfiguration,this.correlationId);let a=yield P(this.getDiscoveredAuthority.bind(this),y.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:i,requestAzureCloudOptions:o,requestExtraQueryParameters:r,account:s}),l=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:qt.MSAL_SKU,version:Ma,cpu:x.EMPTY_STRING,os:x.EMPTY_STRING},telemetry:this.config.telemetry}})}initializeAuthorizationRequest(e,t){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);let i=this.getRedirectUri(e.redirectUri),o={interactionType:t},r=sn.setRequestState(this.browserCrypto,e&&e.state||x.EMPTY_STRING,o),s=yield P(Kp,y.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)(I(v({},e),{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=I(v({},s),{redirectUri:i,state:r,nonce:e.nonce||Pn(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),l=e.account||this.browserStorage.getActiveAccount();if(l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),a.account=l),!a.loginHint&&!l){let c=this.browserStorage.getLegacyLoginHint();c&&(a.loginHint=c)}return a})}};var J4="ContentError",tv="user_switch";var X4="USER_INTERACTION_REQUIRED",eF="USER_CANCEL",tF="NO_NETWORK",nF="PERSISTENT_ERROR",iF="DISABLED",oF="ACCOUNT_UNAVAILABLE";var uX=-2147186943,hX={[tv]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."},io=class n extends xe{constructor(e,t,i){super(e,t),Object.setPrototypeOf(this,n.prototype),this.name="NativeAuthError",this.ext=i}};function Da(n){if(n.ext&&n.ext.status&&(n.ext.status===nF||n.ext.status===iF)||n.ext&&n.ext.error&&n.ext.error===uX)return!0;switch(n.errorCode){case J4:return!0;default:return!1}}function Qp(n,e,t){if(t&&t.status)switch(t.status){case oF:return Du(gs.nativeAccountUnavailable);case X4:return new yn(n,e);case eF:return B(bi);case tF:return B(bs)}return new io(n,hX[n]||e,t)}var hh=class extends ki{acquireToken(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.SilentCacheClientAcquireToken,e.correlationId);let t=this.initializeServerTelemetryManager(et.acquireTokenSilent_silentFlow),i=yield P(this.getClientConfiguration.bind(this),y.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Vp(i,this.performanceClient);this.logger.verbose("Silent auth client created");try{let s=(yield P(o.acquireCachedToken.bind(o),y.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(r){throw r instanceof Lc&&r.errorCode===Aa&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),r}})}logout(e){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}};var oo=class extends uh{constructor(e,t,i,o,r,s,a,l,c,d,f,p){super(e,t,i,o,r,s,l,c,p),this.apiId=a,this.accountId=d,this.nativeMessageHandler=c,this.nativeStorageManager=f,this.silentCacheClient=new hh(e,this.nativeStorageManager,i,o,r,s,l,c,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);let g=this.nativeMessageHandler.getExtensionId()===Ia.PREFERRED_EXTENSION_ID?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Pc.makeExtraSkuString({libraryName:qt.MSAL_SKU,libraryVersion:Ma,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=I(v({},e.extraParameters),{[ps.X_CLIENT_EXTRA_SKU]:this.skus})}acquireToken(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");let t=this.performanceClient.startMeasurement(y.NativeInteractionClientAcquireToken,e.correlationId),i=yp.nowSeconds();try{let o=yield this.initializeNativeRequest(e);try{let c=yield this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}let r=Bt(o,[]),s={method:ks.GetToken,request:r},a=yield this.nativeMessageHandler.sendMessage(s),l=this.validateNativeResponse(a);return yield this.handleNativeResponse(l,o,i).then(c=>(t.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),c)).catch(c=>{throw t.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError,isNativeBroker:!0}),c})}catch(o){throw o instanceof io&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}})}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:_t.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}acquireTokensFromCache(e,t){return E(this,null,function*(){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),D(on.noAccountFound);let i=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!i)throw D(on.noAccountFound);try{let o=this.createSilentCacheRequest(t,i),r=yield this.silentCacheClient.acquireToken(o),s=I(v({},i),{idTokenClaims:r?.idTokenClaims,idToken:r?.idToken});return I(v({},r),{account:s})}catch(o){throw o}})}acquireTokenRedirect(e,t){return E(this,null,function*(){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");let i=Bt(e,[]);delete i.onRedirectNavigate;let o=yield this.initializeNativeRequest(i),r={method:ks.GetToken,request:o};try{let l=yield this.nativeMessageHandler.sendMessage(r);this.validateNativeResponse(l)}catch(l){if(l instanceof io&&(this.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Da(l)))throw l}this.browserStorage.setTemporaryCache(Ye.NATIVE_REQUEST,JSON.stringify(o),!0);let s={apiId:et.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),yield this.navigationClient.navigateExternal(a,s)})}handleRedirectPromise(e,t){return E(this,null,function*(){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let i=this.browserStorage.getCachedNativeRequest();if(!i)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;let l=i,{prompt:o}=l,r=Bt(l,["prompt"]);o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ye.NATIVE_REQUEST));let s={method:ks.GetToken,request:r},a=yp.nowSeconds();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");let c=yield this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(c);let d=this.handleNativeResponse(c,r,a);this.browserStorage.setInteractionInProgress(!1);let f=yield d;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),f}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}})}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,t,i){return E(this,null,function*(){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");let o=wa.extractTokenClaims(e.id_token,wi),r=this.createHomeAccountIdentifier(e,o),s=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(r!==s&&e.account.id!==t.accountId)throw Qp(tv);let a=yield this.getDiscoveredAuthority({requestAuthority:t.authority}),l=Pu(this.browserStorage,a,r,wi,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),c=yield this.generateAuthenticationResult(e,t,o,l,a.canonicalAuthority,i);return this.cacheAccount(l),this.cacheNativeTokens(e,t,r,o,e.access_token,c.tenantId,i),c})}createHomeAccountIdentifier(e,t){return kt.generateHomeAccountId(e.client_info||x.EMPTY_STRING,Gn.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?_t.fromString(e.scope):_t.fromString(t.scope)}generatePopAccessToken(e,t){return E(this,null,function*(){if(t.tokenType===Fe.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;let i=new Oi(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw D(on.keyIdMissing);return i.signPopToken(e.access_token,t.keyId,o)}else return e.access_token})}generateAuthenticationResult(e,t,i,o,r,s){return E(this,null,function*(){let a=this.addTelemetryFromNativeResponse(e),l=e.scope?_t.fromString(e.scope):_t.fromString(t.scope),c=e.account.properties||{},d=c.UID||i.oid||i.sub||x.EMPTY_STRING,f=c.TenantId||i.tid||x.EMPTY_STRING,p=Mc(o.getAccountInfo(),void 0,i,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);let g=yield this.generatePopAccessToken(e,t),w=t.tokenType===Fe.POP?Fe.POP:Fe.BEARER;return{authority:r,uniqueId:d,tenantId:f,scopes:l.asArray(),account:p,idToken:e.id_token,idTokenClaims:i,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:w,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}})}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,i,o,r,s,a){let l=mt.createIdTokenEntity(i,t.authority,e.id_token||"",t.clientId,o.tid||""),c=t.tokenType===Fe.POP?x.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=a+c,f=this.generateScopes(e,t),p=mt.createAccessTokenEntity(i,t.authority,r,t.clientId,o.tid||s,f.printScopes(),d,0,wi,void 0,t.tokenType,void 0,t.keyId),g={idToken:l,accessToken:p};this.nativeStorageManager.saveCacheRecord(g,t.storeInCache)}addTelemetryFromNativeResponse(e){let t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw rp(ec.unexpectedError,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){return E(this,null,function*(){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");let t=e.authority||this.config.auth.authority;e.account&&(yield this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));let i=new ye(t);i.validateAsUri();let c=e,{scopes:o}=c,r=Bt(c,["scopes"]),s=new _t(o||[]);s.appendScopes(Ri);let a=()=>{switch(this.apiId){case et.ssoSilent:case et.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),yt.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case yt.NONE:case yt.CONSENT:case yt.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),B(oh)}},l=I(v({},r),{accountId:this.accountId,clientId:this.config.auth.clientId,authority:i.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:v(v({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(l.signPopToken&&e.popKid)throw B(sh);if(this.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry=Ia.MATS_TELEMETRY,e.authenticationScheme===Fe.POP){let d={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},f=new Oi(this.browserCrypto),p;if(l.keyId)p=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{let g=yield P(f.generateCnf.bind(f),y.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(d,this.logger);p=g.reqCnfString,l.keyId=g.kid,l.signPopToken=!0}l.reqCnf=p}return this.addRequestSKUs(l),l})}handleExtraBrokerParams(e){let t=e.extraParameters&&e.extraParameters.hasOwnProperty(ps.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(ps.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(ps.CLIENT_ID);if(!e.embeddedClientId&&!t)return;let i="",o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,i=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[ps.BROKER_REDIRECT_URI],i=e.extraParameters[ps.CLIENT_ID]),e.extraParameters={child_client_id:i,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:i,embeddedRedirectUri:o},e.correlationId)}};var Li=class n{constructor(e,t,i,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=i,this.handshakeEvent=i.startMeasurement(y.NativeMessageHandlerHandshake)}sendMessage(e){return E(this,null,function*(){this.logger.trace("NativeMessageHandler - sendMessage called.");let t={channel:Ia.CHANNEL_ID,extensionId:this.extensionId,responseId:Pn(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((i,o)=>{this.resolvers.set(t.responseId,{resolve:i,reject:o})})})}static createProvider(e,t,i){return E(this,null,function*(){e.trace("NativeMessageHandler - createProvider called.");try{let o=new n(e,t,i,Ia.PREFERRED_EXTENSION_ID);return yield o.sendHandshakeRequest(),o}catch{let r=new n(e,t,i);return yield r.sendHandshakeRequest(),r}})}sendHandshakeRequest(){return E(this,null,function*(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);let e={channel:Ia.CHANNEL_ID,extensionId:this.extensionId,responseId:Pn(),body:{method:ks.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,i)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:i}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),i(B(th)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;let t=e.data;if(!(!t.channel||t.channel!==Ia.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===ks.HandshakeRequest){let i=this.handshakeResolvers.get(t.responseId);if(!i){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),i.reject(B(nh))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");let t=e.data,i=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{let r=t.body.method;if(r===ks.Response){if(!i)return;let s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")i.reject(Qp(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?i.reject(Qp(s.result.code,s.result.description,s.result.ext)):i.resolve(s.result);else throw rp(ec.unexpectedError,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(r===ks.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(r){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${r}`),this.logger.errorPii(`Unable to parse ${e}`),i?i.reject(r):o&&o.reject(r)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,i,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!i)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Fe.BEARER:case Fe.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}};var Pa=class{constructor(e,t,i,o,r){this.authModule=e,this.browserStorage=t,this.authCodeRequest=i,this.logger=o,this.performanceClient=r}handleCodeResponse(e,t){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.HandleCodeResponse,t.correlationId);let i;try{i=this.authModule.handleFragmentResponse(e,t.state)}catch(o){throw o instanceof Qn&&o.subError===bi?B(bi):o}return P(this.handleCodeResponseFromServer.bind(this),y.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(i,t)})}handleCodeResponseFromServer(e,t,i=!0){return E(this,null,function*(){if(this.performanceClient.addQueueMeasurement(y.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&(yield P(this.authModule.updateAuthority.bind(this.authModule),y.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId)),i&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{let r=this.createCcsCredentials(t);r&&(this.authCodeRequest.ccsCredential=r)}return yield P(this.authModule.acquireToken.bind(this.authModule),y.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)})}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:rn.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:rn.UPN}:null}};function nv(n,e,t){let i=va.getDeserializedResponse(n);if(!i)throw va.stripLeadingHashOrQuery(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),B(Ou)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),B(Nu));return i}function rF(n,e,t){if(!n.state)throw B(Sa);let i=Xk(e,n.state);if(!i)throw B(Lu);if(i.interactionType!==t)throw B(Fu)}var iv=class extends ki{constructor(e,t,i,o,r,s,a,l,c,d){super(e,t,i,o,r,s,a,c,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=l}acquireToken(e){try{let i={popupName:this.generatePopupName(e.scopes||Ri,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,i)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),i.popup=this.openSizedPopup("about:blank",i),this.acquireTokenPopupAsync(e,i))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");let t=this.initializeLogoutRequest(e),i={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,r=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,i,o,r)):(this.logger.verbose("asyncPopup set to false, opening popup"),i.popup=this.openSizedPopup("about:blank",i),this.logoutPopupAsync(t,i,o,r))}catch(t){return Promise.reject(t)}}acquireTokenPopupAsync(e,t){return E(this,null,function*(){this.logger.verbose("acquireTokenPopupAsync called");let i=this.initializeServerTelemetryManager(et.acquireTokenPopup),o=yield P(this.initializeAuthorizationRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,W.Popup);Wp(o.authority);try{let r=yield P(this.initializeAuthorizationCodeRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),s=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),a=Li.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme),l;a&&(l=this.performanceClient.startMeasurement(y.FetchAccountIdWithNativeBroker,e.correlationId));let c=yield s.getAuthCodeUrl(I(v({},o),{nativeBroker:a})),d=new Pa(s,this.browserStorage,r,this.logger,this.performanceClient),f=this.initiateAuthRequest(c,t);this.eventHandler.emitEvent(q.POPUP_OPENED,W.Popup,{popupWindow:f},null);let p=yield this.monitorPopupForHash(f,t.popupWindowParent),g=Kn(nv,y.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(p,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ur.removeThrottle(this.browserStorage,this.config.auth.clientId,r),g.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),l&&l.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw B(no);let k=new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,g.accountId,this.nativeStorage,o.correlationId),{userRequestState:C}=sn.parseRequestState(this.browserCrypto,o.state);return yield k.acquireToken(I(v({},o),{state:C,prompt:void 0}))}return yield d.handleCodeResponse(g,o)}catch(r){throw t.popup?.close(),r instanceof xe&&(r.setCorrelationId(this.correlationId),i.cacheFailedRequest(r)),r}})}logoutPopupAsync(e,t,i,o){return E(this,null,function*(){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(q.LOGOUT_START,W.Popup,e);let r=this.initializeServerTelemetryManager(et.logoutPopup);try{yield this.clearCacheOnLogout(e.account);let s=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:i,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===vn.OIDC){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(q.LOGOUT_SUCCESS,W.Popup,e),o){let c={apiId:et.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=ye.getAbsoluteUrl(o,Zn());yield this.navigationClient.navigateInternal(d,c)}t.popup?.close();return}}let a=s.getLogoutUri(e);this.eventHandler.emitEvent(q.LOGOUT_SUCCESS,W.Popup,e);let l=this.openPopup(a,t);if(this.eventHandler.emitEvent(q.POPUP_OPENED,W.Popup,{popupWindow:l},null),yield this.monitorPopupForHash(l,t.popupWindowParent).catch(()=>{}),o){let c={apiId:et.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},d=ye.getAbsoluteUrl(o,Zn());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${d}`),yield this.navigationClient.navigateInternal(d,c)}else this.logger.verbose("No main window navigation requested")}catch(s){throw t.popup?.close(),s instanceof xe&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(q.LOGOUT_FAILURE,W.Popup,null,s),this.eventHandler.emitEvent(q.LOGOUT_END,W.Popup),s}this.eventHandler.emitEvent(q.LOGOUT_END,W.Popup)})}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),B(mr)}monitorPopupForHash(e,t){return new Promise((i,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");let r=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),o(B(bi));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(r);let a="",l=this.config.auth.OIDCOptions.serverResponseType;e&&(l===No.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),i(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let i;if(t.popup?(i=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),i.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),i=this.openSizedPopup(e,t)),!i)throw B(zu);return i.focus&&i.focus(),this.currentWindow=i,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),i}catch(i){throw this.logger.error("error opening popup "+i.message),this.browserStorage.setInteractionInProgress(!1),B(Bu)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:i,popupWindowParent:o}){let r=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=i.popupSize?.width,d=i.popupSize?.height,f=i.popupPosition?.top,p=i.popupPosition?.left;return(!c||c<0||c>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=qt.POPUP_WIDTH),(!d||d<0||d>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=qt.POPUP_HEIGHT),(!f||f<0||f>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,l/2-qt.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-qt.POPUP_WIDTH/2+r)),o.open(e,t,`width=${c}, height=${d}, top=${f}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(W.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){let t=e.account&&e.account.homeAccountId;return`${qt.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}};var Yp=class{constructor(e,t,i,o,r){this.authModule=e,this.browserStorage=t,this.authCodeRequest=i,this.logger=o,this.performanceClient=r}initiateAuthRequest(e,t){return E(this,null,function*(){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Ye.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(Ye.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);let i={apiId:et.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),yield t.navigationClient.navigateExternal(e,i);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),yield t.navigationClient.navigateExternal(e,i);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),B(mr)})}handleCodeResponse(e,t){return E(this,null,function*(){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);let i=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(i);if(!o)throw D(on.stateNotFound,"Cached State");let r;try{r=this.authModule.handleFragmentResponse(e,o)}catch(c){throw c instanceof Qn&&c.subError===bi?B(bi):c}let s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=r.code,r.cloud_instance_host_name&&(yield P(this.authModule.updateAuthority.bind(this.authModule),y.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(r.cloud_instance_host_name,this.authCodeRequest.correlationId)),r.nonce=a||void 0,r.state=o,r.client_info)this.authCodeRequest.clientInfo=r.client_info;else{let c=this.checkCcsCredentials();c&&(this.authCodeRequest.ccsCredential=c)}let l=yield this.authModule.acquireToken(this.authCodeRequest,r);return this.browserStorage.cleanRequestByState(t),l})}checkCcsCredentials(){let e=this.browserStorage.getTemporaryCache(Ye.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};function mX(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;let n=window.performance.getEntriesByType("navigation");return(n.length?n[0]:void 0)?.type}var ov=class extends ki{constructor(e,t,i,o,r,s,a,l,c,d){super(e,t,i,o,r,s,a,c,d),this.nativeStorage=l}acquireToken(e){return E(this,null,function*(){let t=yield P(this.initializeAuthorizationRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,W.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);let i=this.initializeServerTelemetryManager(et.acquireTokenRedirect),o=r=>{r.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(q.RESTORE_FROM_BFCACHE,W.Redirect))};try{let r=yield P(this.initializeAuthorizationCodeRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Yp(s,this.browserStorage,r,this.logger,this.performanceClient),l=yield s.getAuthCodeUrl(I(v({},t),{nativeBroker:Li.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)})),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",o),yield a.initiateAuthRequest(l,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(r){throw r instanceof xe&&(r.setCorrelationId(this.correlationId),i.cacheFailedRequest(r)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),r}})}handleRedirectPromise(e="",t){return E(this,null,function*(){let i=this.initializeServerTelemetryManager(et.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;let[o,r]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(W.Redirect),mX()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;let s=this.browserStorage.getTemporaryCache(Ye.ORIGIN_URI,!0)||x.EMPTY_STRING,a=ye.removeHashFromUrl(s),l=ye.removeHashFromUrl(window.location.href);if(a===l&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&nT(s),yield this.handleResponse(o,i);if(this.config.auth.navigateToLoginRequestUrl){if(!jp()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Ye.URL_HASH,r,!0);let c={apiId:et.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0},d=!0;if(!s||s==="null"){let f=iT();this.browserStorage.setTemporaryCache(Ye.ORIGIN_URI,f,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield this.navigationClient.navigateInternal(f,c)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),d=yield this.navigationClient.navigateInternal(s,c);if(!d)return yield this.handleResponse(o,i)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield this.handleResponse(o,i);return null}catch(o){throw o instanceof xe&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(W.Redirect),o}})}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===No.QUERY?t=window.location.search:t=window.location.hash);let i=va.getDeserializedResponse(t);if(i){try{rF(i,this.browserCrypto,W.Redirect)}catch(r){return r instanceof xe&&this.logger.error(`Interaction type validation failed due to ${r.errorCode}: ${r.errorMessage}`),[null,""]}return tT(window),this.logger.verbose("Hash contains known properties, returning response hash"),[i,t]}let o=this.browserStorage.getTemporaryCache(Ye.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Ye.URL_HASH)),o&&(i=va.getDeserializedResponse(o),i)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[i,o]):[null,""]}handleResponse(e,t){return E(this,null,function*(){let i=e.state;if(!i)throw B(Sa);let o=this.browserStorage.getCachedRequest(i);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(no);let l=new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:c}=sn.parseRequestState(this.browserCrypto,i);return l.acquireToken(I(v({},o),{state:c,prompt:void 0})).finally(()=>{this.browserStorage.cleanRequestByState(i)})}let r=this.browserStorage.getCachedAuthority(i);if(!r)throw B(xa);let s=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:r});return ur.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new Yp(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,i)})}logout(e){return E(this,null,function*(){this.logger.verbose("logoutRedirect called");let t=this.initializeLogoutRequest(e),i=this.initializeServerTelemetryManager(et.logout);try{this.eventHandler.emitEvent(q.LOGOUT_START,W.Redirect,e),yield this.clearCacheOnLogout(t.account);let o={apiId:et.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(r.authority.protocolMode===vn.OIDC)try{r.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId){this.browserStorage.removeAccount(t.account?.homeAccountId),this.eventHandler.emitEvent(q.LOGOUT_SUCCESS,W.Redirect,t);return}}let s=r.getLogoutUri(t);if(this.eventHandler.emitEvent(q.LOGOUT_SUCCESS,W.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(s)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),yield this.navigationClient.navigateExternal(s,o);return}}catch(o){throw o instanceof xe&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),this.eventHandler.emitEvent(q.LOGOUT_FAILURE,W.Redirect,null,o),this.eventHandler.emitEvent(q.LOGOUT_END,W.Redirect),o}this.eventHandler.emitEvent(q.LOGOUT_END,W.Redirect)})}getRedirectStartPage(e){let t=e||window.location.href;return ye.getAbsoluteUrl(t,Zn())}};function sF(n,e,t,i,o){return E(this,null,function*(){if(e.addQueueMeasurement(y.SilentHandlerInitiateAuthRequest,i),!n)throw t.info("Navigate url is empty"),B(mr);return o?P(fX,y.SilentHandlerLoadFrame,t,e,i)(n,o,e,i):Kn(pX,y.SilentHandlerLoadFrameSync,t,e,i)(n)})}function aF(n,e,t,i,o,r,s){return E(this,null,function*(){return i.addQueueMeasurement(y.SilentHandlerMonitorIframeForHash,r),new Promise((a,l)=>{e<Kk&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Kk}ms). This may result in timeouts.`);let c=window.setTimeout(()=>{window.clearInterval(d),l(B(Hu))},e),d=window.setInterval(()=>{let f="",p=n.contentWindow;try{f=p?p.location.href:""}catch{}if(!f||f==="about:blank")return;let g="";p&&(s===No.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(c),window.clearInterval(d),a(g)},t)}).finally(()=>{Kn(gX,y.RemoveHiddenIframe,o,i,r)(n)})})}function fX(n,e,t,i){return t.addQueueMeasurement(y.SilentHandlerLoadFrame,i),new Promise((o,r)=>{let s=lF();window.setTimeout(()=>{if(!s){r("Unable to load iframe");return}s.src=n,o(s)},e)})}function pX(n){let e=lF();return e.src=n,e}function lF(){let n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function gX(n){document.body===n.parentNode&&document.body.removeChild(n)}var rv=class extends ki{constructor(e,t,i,o,r,s,a,l,c,d,f){super(e,t,i,o,r,s,l,d,f),this.apiId=a,this.nativeStorage=c}acquireToken(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");let t=v({},e);t.prompt?t.prompt!==yt.NONE&&t.prompt!==yt.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${yt.NONE}`),t.prompt=yt.NONE):t.prompt=yt.NONE;let i=yield P(this.initializeAuthorizationRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,W.Silent);Wp(i.authority);let o=this.initializeServerTelemetryManager(this.apiId),r;try{return r=yield P(this.createAuthCodeClient.bind(this),y.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),yield P(this.silentTokenHelper.bind(this),y.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(r,i)}catch(s){if(s instanceof xe&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!r||!(s instanceof xe)||s.errorCode!==qt.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);let a=yield P(this.initializeAuthorizationRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,W.Silent);return yield P(this.silentTokenHelper.bind(this),y.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(r,a)}})}logout(){return Promise.reject(B(fr))}silentTokenHelper(e,t){return E(this,null,function*(){let i=t.correlationId;this.performanceClient.addQueueMeasurement(y.SilentIframeClientTokenHelper,i);let o=yield P(this.initializeAuthorizationCodeRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,i)(t),r=yield P(e.getAuthCodeUrl.bind(e),y.GetAuthCodeUrl,this.logger,this.performanceClient,i)(I(v({},t),{nativeBroker:Li.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)})),s=new Pa(e,this.browserStorage,o,this.logger,this.performanceClient),a=yield P(sF,y.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,i)(r,this.performanceClient,this.logger,i,this.config.system.navigateFrameWait),l=this.config.auth.OIDCOptions.serverResponseType,c=yield P(aF,y.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,i)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,i,l),d=Kn(nv,y.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(c,l,this.logger);if(d.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(no);let f=new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,d.accountId,this.browserStorage,i),{userRequestState:p}=sn.parseRequestState(this.browserCrypto,t.state);return P(f.acquireToken.bind(f),y.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,i)(I(v({},t),{state:p,prompt:t.prompt||yt.NONE}))}return P(s.handleCodeResponse.bind(s),y.HandleCodeResponse,this.logger,this.performanceClient,i)(d,t)})}};var sv=class extends ki{acquireToken(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.SilentRefreshClientAcquireToken,e.correlationId);let t=yield P(Kp,y.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),i=v(v({},e),t);e.redirectUri&&(i.redirectUri=this.getRedirectUri(e.redirectUri));let o=this.initializeServerTelemetryManager(et.acquireTokenSilent_silentFlow),r=yield this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:i.authority,azureCloudOptions:i.azureCloudOptions,account:i.account});return P(r.acquireTokenByRefreshToken.bind(r),y.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(i).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})})}logout(){return Promise.reject(B(fr))}createRefreshTokenClient(e){return E(this,null,function*(){let t=yield P(this.getClientConfiguration.bind(this),y.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Ea(t,this.performanceClient)})}};var av=class{constructor(e,t,i,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=i,this.cryptoObj=o}loadExternalTokens(e,t,i){if(!this.isBrowserEnvironment)throw B(pr);let o=t.id_token?wa.extractTokenClaims(t.id_token,wi):void 0,r={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new to(to.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,r,this.logger,e.correlationId||Pn()):void 0,a=this.loadAccount(e,i.clientInfo||t.client_info||"",o,s),l=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),c=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,i),d=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:l,accessToken:c,refreshToken:d},o,s)}loadAccount(e,t,i,o){if(this.logger.verbose("TokenCache - loading account"),e.account){let l=kt.createFromAccountInfo(e.account);return this.storage.setAccount(l),l}else if(!o||!t&&!i)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),B(Yu);let r=kt.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,i),s=i?.tid,a=Pu(this.storage,o,r,wi,i,t,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,i,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");let r=mt.createIdTokenEntity(t,i,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(r),r}loadAccessToken(e,t,i,o,r,s){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");let a=t.scope?_t.fromString(t.scope):new _t(e.scopes),l=s.expiresOn||t.expires_in+new Date().getTime()/1e3,c=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,d=mt.createAccessTokenEntity(i,o,t.access_token,this.config.auth.clientId,r,a.printScopes(),l,c,wi);return this.storage.setAccessTokenCredential(d),d}loadRefreshToken(e,t,i){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");let o=mt.createRefreshTokenEntity(t,i,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,t,i,o){let r="",s=[],a=null,l;t?.accessToken&&(r=t.accessToken.secret,s=_t.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),l=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));let c=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:c.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:i||{},accessToken:r,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:l,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}};var lv=class extends Dc{constructor(e){super(e),this.includeRedirectUri=!1}};var cv=class extends ki{constructor(e,t,i,o,r,s,a,l,c,d){super(e,t,i,o,r,s,l,c,d),this.apiId=a}acquireToken(e){return E(this,null,function*(){if(!e.code)throw B(Zu);let t=yield P(this.initializeAuthorizationRequest.bind(this),y.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,W.Silent),i=this.initializeServerTelemetryManager(this.apiId);try{let o=I(v({},t),{code:e.code}),r=yield P(this.getClientConfiguration.bind(this),y.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new lv(r);this.logger.verbose("Auth code client created");let a=new Pa(s,this.browserStorage,o,this.logger,this.performanceClient);return yield P(a.handleCodeResponseFromServer.bind(a),y.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof xe&&(o.setCorrelationId(this.correlationId),i.cacheFailedRequest(o)),o}})}logout(){return Promise.reject(B(fr))}};function br(n){let e=n?.idTokenClaims;if(e?.tfp||e?.acr)return"B2C";if(e?.tid){if(e?.tid==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function dv(n,e){try{$p(n)}catch(t){throw e.end({success:!1},t),t}}var mh=class n{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new H4(this.logger,this.performanceClient):ga,this.eventHandler=new ev(this.logger),this.browserStorage=this.isBrowserEnvironment?new dh(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,BA(this.config.auth),this.performanceClient):U4(this.config.auth.clientId,this.logger);let t={cacheLocation:ct.MemoryStorage,temporaryCacheLocation:ct.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new dh(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new av(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,t){return E(this,null,function*(){let i=new n(e);return yield i.initialize(t),i})}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){return E(this,null,function*(){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(q.INITIALIZE_END);return}let t=e?.correlationId||this.getRequestCorrelationId(),i=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(y.InitializeClientApplication,t);if(this.eventHandler.emitEvent(q.INITIALIZE_START),i)try{this.nativeExtensionProvider=yield Li.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(r){this.logger.verbose(r)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield P(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),y.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(q.INITIALIZE_END),o.end({allowNativeBroker:i,success:!0})})}handleRedirectPromise(e){return E(this,null,function*(){if(this.logger.verbose("handleRedirectPromise called"),$k(this.initialized),this.isBrowserEnvironment){let t=e||"",i=this.redirectResponse.get(t);return typeof i>"u"?(i=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,i),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),i}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})}handleRedirectPromiseInternal(e){return E(this,null,function*(){let t=this.getAllAccounts(),i=this.browserStorage.getCachedNativeRequest(),o=i&&Li.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,r=o?i?.correlationId:this.browserStorage.getTemporaryCache(Ye.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(y.AcquireTokenRedirect,r);this.eventHandler.emitEvent(q.HANDLE_REDIRECT_START,W.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");let l=new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,i.accountId,this.nativeInternalStorage,i.correlationId);a=P(l.handleRedirectPromise.bind(l),y.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");let l=this.createRedirectClient(r);a=P(l.handleRedirectPromise.bind(l),y.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(l=>(l?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(q.LOGIN_SUCCESS,W.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_SUCCESS,W.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:br(l.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(q.HANDLE_REDIRECT_END,W.Redirect),l)).catch(l=>{let c=l;throw t.length>0?this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,c):this.eventHandler.emitEvent(q.LOGIN_FAILURE,W.Redirect,null,c),this.eventHandler.emitEvent(q.HANDLE_REDIRECT_END,W.Redirect),s.end({success:!1},c),l})})}acquireTokenRedirect(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);let i=this.performanceClient.startMeasurement(y.AcquireTokenPreRedirect,t);i.add({accountType:br(e.account),scenarioId:e.scenarioId});let o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{let a=typeof o=="function"?o(s):void 0;return a!==!1?i.end({success:!0}):i.discard(),a};else{let s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{let l=typeof s=="function"?s(a):void 0;return l!==!1?i.end({success:!0}):i.discard(),l}}let r=this.getAllAccounts().length>0;try{Wk(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),r?this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_START,W.Redirect,e):this.eventHandler.emitEvent(q.LOGIN_START,W.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,i).catch(l=>{if(l instanceof io&&Da(l))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(l instanceof yn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),l}):s=this.createRedirectClient(t).acquireToken(e),yield s}catch(s){throw i.end({success:!1},s),r?this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_FAILURE,W.Redirect,null,s):this.eventHandler.emitEvent(q.LOGIN_FAILURE,W.Redirect,null,s),s}})}acquireTokenPopup(e){let t=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(y.AcquireTokenPopup,t);i.add({scenarioId:e.scenarioId,accountType:br(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),dv(this.initialized,i),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}let o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_START,W.Popup,e):this.eventHandler.emitEvent(q.LOGIN_START,W.Popup,e);let r;return this.canUseNative(e)?r=this.acquireTokenNative(I(v({},e),{correlationId:t}),et.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),i.end({success:!0,isNativeBroker:!0,accountType:br(s.account)}),s)).catch(s=>{if(s instanceof io&&Da(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof yn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):r=this.createPopupClient(t).acquireToken(e),r.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(q.LOGIN_SUCCESS,W.Popup,s):this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_SUCCESS,W.Popup,s),i.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:br(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_FAILURE,W.Popup,null,s):this.eventHandler.emitEvent(q.LOGIN_FAILURE,W.Popup,null,s),i.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){let e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e),i=I(v({},e),{prompt:e.prompt,correlationId:t});this.ssoSilentMeasurement=this.performanceClient.startMeasurement(y.SsoSilent,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:br(e.account)}),dv(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(q.SSO_SILENT_START,W.Silent,i);let o;return this.canUseNative(i)?o=this.acquireTokenNative(i,et.ssoSilent).catch(r=>{if(r instanceof io&&Da(r))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(i.correlationId).acquireToken(i);throw r}):o=this.createSilentIframeClient(i.correlationId).acquireToken(i),o.then(r=>(this.eventHandler.emitEvent(q.SSO_SILENT_SUCCESS,W.Silent,r),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:r.fromNativeBroker,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length,accountType:br(r.account)}),r)).catch(r=>{throw this.eventHandler.emitEvent(q.SSO_SILENT_FAILURE,W.Silent,null,r),this.ssoSilentMeasurement?.end({success:!1},r),r}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenByCode(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);let i=this.performanceClient.startMeasurement(y.AcquireTokenByCode,t);dv(this.initialized,i),this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_BY_CODE_START,W.Silent,e),i.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw B(Xu);if(e.code){let o=e.code,r=this.hybridAuthCodeResponses.get(o);return r?(this.logger.verbose("Existing acquireTokenByCode request found",t),i.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),r=this.acquireTokenByCodeAsync(I(v({},e),{correlationId:t})).then(s=>(this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_BY_CODE_SUCCESS,W.Silent,s),this.hybridAuthCodeResponses.delete(o),i.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:br(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,s),i.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,r)),yield r}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){let o=yield this.acquireTokenNative(I(v({},e),{correlationId:t}),et.acquireTokenByCode,e.nativeAccountId).catch(r=>{throw r instanceof io&&Da(r)&&(this.nativeExtensionProvider=void 0),r});return i.end({accountType:br(o.account),success:!0}),o}else throw B(eh);else throw B(Ju)}catch(o){throw this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_BY_CODE_FAILURE,W.Silent,null,o),i.end({success:!1},o),o}})}acquireTokenByCodeAsync(e){return E(this,null,function*(){return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(y.AcquireTokenByCodeAsync,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),yield this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(o=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:o.fromCache,isNativeBroker:o.fromNativeBroker}),o)).catch(o=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},o),o}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})})}acquireTokenFromCache(e,t){return E(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(y.AcquireTokenFromCache,e.correlationId),t){case Yn.Default:case Yn.AccessToken:case Yn.AccessTokenAndRefreshToken:let i=this.createSilentCacheClient(e.correlationId);return P(i.acquireToken.bind(i),y.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw D(on.tokenRefreshRequired)}})}acquireTokenByRefreshToken(e,t){return E(this,null,function*(){switch(this.performanceClient.addQueueMeasurement(y.AcquireTokenByRefreshToken,e.correlationId),t){case Yn.Default:case Yn.AccessTokenAndRefreshToken:case Yn.RefreshToken:case Yn.RefreshTokenAndNetwork:let i=this.createSilentRefreshClient(e.correlationId);return P(i.acquireToken.bind(i),y.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw D(on.tokenRefreshRequired)}})}acquireTokenBySilentIframe(e){return E(this,null,function*(){this.performanceClient.addQueueMeasurement(y.AcquireTokenBySilentIframe,e.correlationId);let t=this.createSilentIframeClient(e.correlationId);return P(t.acquireToken.bind(t),y.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)})}logout(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(v({correlationId:t},e))})}logoutRedirect(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e);return Wk(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)})}logoutPopup(e){try{let t=this.getRequestCorrelationId(e);return $p(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}clearCache(e){return E(this,null,function*(){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}let t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)})}getAllAccounts(e){return j4(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return $4(e,this.logger,this.browserStorage)}getAccountByUsername(e){return W4(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return q4(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return G4(e,this.logger,this.browserStorage)}setActiveAccount(e){K4(e,this.browserStorage)}getActiveAccount(){return Q4(this.browserStorage)}hydrateCache(e,t){return E(this,null,function*(){this.logger.verbose("hydrateCache called");let i=kt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(i),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)})}acquireTokenNative(e,t,i){return E(this,null,function*(){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw B(no);return new oo(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,i||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)})}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!Li.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case yt.NONE:case yt.CONSENT:case yt.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){let t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new iv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new ov(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new rv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new hh(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new sv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new cv(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,et.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return jk(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(Wt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(q.ACTIVE_ACCOUNT_CHANGED);let t=e.newValue||e.oldValue;if(!t)return;let i=JSON.parse(t);if(typeof i!="object"||!kt.isAccountEntity(i))return;let r=ms.toObject(new kt,i).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(q.ACCOUNT_ADDED,void 0,r)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(q.ACCOUNT_REMOVED,void 0,r))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?Pn():x.EMPTY_STRING}loginRedirect(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(v({correlationId:t},e||QA))})}loginPopup(e){let t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(v({correlationId:t},e||QA))}acquireTokenSilent(e){return E(this,null,function*(){let t=this.getRequestCorrelationId(e),i=this.performanceClient.startMeasurement(y.AcquireTokenSilent,t);i.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),dv(this.initialized,i),this.logger.verbose("acquireTokenSilent called",t);let o=e.account||this.getActiveAccount();if(!o)throw B(Wu);i.add({accountType:br(o)});let r={clientId:this.config.auth.clientId,authority:e.authority||x.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(r),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);let l=P(this.acquireTokenSilentAsync.bind(this),y.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)(I(v({},e),{correlationId:t}),o).then(c=>(this.activeSilentTokenRequests.delete(s),i.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),c)).catch(c=>{throw this.activeSilentTokenRequests.delete(s),i.end({success:!1},c),c});return this.activeSilentTokenRequests.set(s,l),I(v({},yield l),{state:e.state})}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),i.discard(),I(v({},yield a),{state:e.state})})}acquireTokenSilentAsync(e,t){return E(this,null,function*(){let i=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(y.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_START,W.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",i);let o=yield P(Z4,y.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),r=e.cacheLookupPolicy||Yn.Default;return this.acquireTokenSilentNoIframe(o,r).catch(a=>E(this,null,function*(){if(bX(a,r))if(this.activeIframeRequest)if(r!==Yn.Skip){let[c,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,o.correlationId);let f=this.performanceClient.startMeasurement(y.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:d});let p=yield c;if(f.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,r);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),P(this.acquireTokenBySilentIframe.bind(this),y.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let c;return this.activeIframeRequest=[new Promise(d=>{c=d}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),P(this.acquireTokenBySilentIframe.bind(this),y.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(d=>(c(!0),d)).catch(d=>{throw c(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw a})).then(a=>(this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_SUCCESS,W.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_FAILURE,W.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",i)})})}acquireTokenSilentNoIframe(e,t){return E(this,null,function*(){return Li.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,et.acquireTokenSilent_silentFlow).catch(i=>E(this,null,function*(){throw i instanceof io&&Da(i)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,D(on.tokenRefreshRequired)):i}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),P(this.acquireTokenFromCache.bind(this),y.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(i=>{if(t===Yn.AccessToken)throw i;return this.eventHandler.emitEvent(q.ACQUIRE_TOKEN_NETWORK_START,W.Silent,e),P(this.acquireTokenByRefreshToken.bind(this),y.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))})}};function bX(n,e){let t=!(n instanceof yn&&n.subError!==gs.badToken),i=n.errorCode===qt.INVALID_GRANT_ERROR||n.errorCode===on.tokenRefreshRequired,o=t&&i||n.errorCode===gs.noTokensFound||n.errorCode===gs.refreshTokenExpired,r=v4.includes(e);return o&&r}function cF(n,e){return E(this,null,function*(){let t=new Yk(n);return yield t.initialize(),mh.createController(t,e)})}var Zp=class n{static createPublicClientApplication(e){return E(this,null,function*(){let t=yield cF(e);return new n(e,t)})}constructor(e,t){this.controller=t||new mh(new Yk(e))}initialize(e){return E(this,null,function*(){return this.controller.initialize(e)})}acquireTokenPopup(e){return E(this,null,function*(){return this.controller.acquireTokenPopup(e)})}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,t){return E(this,null,function*(){return this.controller.hydrateCache(e,t)})}clearCache(e){return this.controller.clearCache(e)}};var Jp=class{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case q.LOGIN_START:return Zt.Login;case q.SSO_SILENT_START:return Zt.SsoSilent;case q.ACQUIRE_TOKEN_START:if(e.interactionType===W.Redirect||e.interactionType===W.Popup)return Zt.AcquireToken;break;case q.HANDLE_REDIRECT_START:return Zt.HandleRedirect;case q.LOGOUT_START:return Zt.Logout;case q.SSO_SILENT_SUCCESS:case q.SSO_SILENT_FAILURE:if(t&&t!==Zt.SsoSilent)break;return Zt.None;case q.LOGOUT_END:if(t&&t!==Zt.Logout)break;return Zt.None;case q.HANDLE_REDIRECT_END:if(t&&t!==Zt.HandleRedirect)break;return Zt.None;case q.LOGIN_SUCCESS:case q.LOGIN_FAILURE:case q.ACQUIRE_TOKEN_SUCCESS:case q.ACQUIRE_TOKEN_FAILURE:case q.RESTORE_FROM_BFCACHE:if(e.interactionType===W.Redirect||e.interactionType===W.Popup){if(t&&t!==Zt.Login&&t!==Zt.AcquireToken)break;return Zt.None}break}return null}};var dF="@azure/msal-angular",rT="3.1.0",uv=new Z("MSAL_INSTANCE"),Xp=new Z("MSAL_GUARD_CONFIG"),uF=new Z("MSAL_INTERCEPTOR_CONFIG"),wX=new Z("MSAL_BROADCAST_CONFIG"),fh=(()=>{class n{constructor(t,i){this.instance=t,this.location=i;let o=this.location.path(!0).split("#").pop();o&&(this.redirectHash=`#${o}`),this.instance.initializeWrapperLibrary(ZA.Angular,rT)}initialize(){return Ke(this.instance.initialize())}acquireTokenPopup(t){return Ke(this.instance.acquireTokenPopup(t))}acquireTokenRedirect(t){return Ke(this.instance.acquireTokenRedirect(t))}acquireTokenSilent(t){return Ke(this.instance.acquireTokenSilent(t))}handleRedirectObservable(t){return Ke(this.instance.initialize().then(()=>this.instance.handleRedirectPromise(t||this.redirectHash)))}loginPopup(t){return Ke(this.instance.loginPopup(t))}loginRedirect(t){return Ke(this.instance.loginRedirect(t))}logout(t){return Ke(this.instance.logout(t))}logoutRedirect(t){return Ke(this.instance.logoutRedirect(t))}logoutPopup(t){return Ke(this.instance.logoutPopup(t))}ssoSilent(t){return Ke(this.instance.ssoSilent(t))}getLogger(){return this.logger||(this.logger=this.instance.getLogger().clone(dF,rT)),this.logger}setLogger(t){this.logger=t.clone(dF,rT),this.instance.setLogger(t)}}return n.\u0275fac=function(t){return new(t||n)($(uv),$(or))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),eg=(()=>{class n{constructor(t,i,o){this.msalInstance=t,this.authService=i,this.msalBroadcastConfig=o,this.msalBroadcastConfig&&this.msalBroadcastConfig.eventsToReplay>0?(this.authService.getLogger().verbose(`BroadcastService - eventsToReplay set on BroadcastConfig, replaying the last ${this.msalBroadcastConfig.eventsToReplay} events`),this._msalSubject=new Sl(this.msalBroadcastConfig.eventsToReplay)):this._msalSubject=new At,this.msalSubject$=this._msalSubject.asObservable(),this._inProgress=new en(Zt.Startup),this.inProgress$=this._inProgress.asObservable(),this.msalInstance.addEventCallback(r=>{this._msalSubject.next(r);let s=Jp.getInteractionStatusFromEvent(r,this._inProgress.value);s!==null&&(this.authService.getLogger().verbose(`BroadcastService - ${r.eventType} results in setting inProgress from ${this._inProgress.value} to ${s}`),this._inProgress.next(s))})}}return n.\u0275fac=function(t){return new(t||n)($(uv),$(fh),$(wX,8))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})(),tg=(()=>{class n{constructor(t,i,o,r,s){this.msalGuardConfig=t,this.msalBroadcastService=i,this.authService=o,this.location=r,this.router=s,this.msalBroadcastService.inProgress$.subscribe()}parseUrl(t){return this.router.parseUrl(t)}getDestinationUrl(t){this.authService.getLogger().verbose("Guard - getting destination url");let i=document.getElementsByTagName("base"),o=this.location.normalize(i.length?i[0].href:window.location.origin),r=this.location.prepareExternalUrl(t);return r.startsWith("#")?(this.authService.getLogger().verbose("Guard - destination by hash routing"),`${o}/${r}`):`${o}${t}`}loginInteractively(t){let i=typeof this.msalGuardConfig.authRequest=="function"?this.msalGuardConfig.authRequest(this.authService,t):v({},this.msalGuardConfig.authRequest);if(this.msalGuardConfig.interactionType===W.Popup)return this.authService.getLogger().verbose("Guard - logging in by popup"),this.authService.loginPopup(i).pipe(he(r=>(this.authService.getLogger().verbose("Guard - login by popup successful, can activate, setting active account"),this.authService.instance.setActiveAccount(r.account),!0)));this.authService.getLogger().verbose("Guard - logging in by redirect");let o=this.getDestinationUrl(t.url);return this.authService.loginRedirect(v({redirectStartPage:o},i)).pipe(he(()=>!1))}activateHelper(t){if(this.msalGuardConfig.interactionType!==W.Popup&&this.msalGuardConfig.interactionType!==W.Redirect)throw new ch("invalid_interaction_type","Invalid interaction type provided to MSAL Guard. InteractionType.Popup or InteractionType.Redirect must be provided in the MsalGuardConfiguration");if(this.authService.getLogger().verbose("MSAL Guard activated"),typeof window<"u"){if(ye.hashContainsKnownProperties(window.location.hash)&&qk.isInIframe()&&!this.authService.instance.getConfiguration().system.allowRedirectInIframe)return this.authService.getLogger().warning("Guard - redirectUri set to page with MSAL Guard. It is recommended to not set redirectUri to a page that requires authentication."),re(!1)}else return this.authService.getLogger().info("Guard - window is undefined, MSAL does not support server-side token acquisition"),re(!0);this.msalGuardConfig.loginFailedRoute&&(this.loginFailedRoute=this.parseUrl(this.msalGuardConfig.loginFailedRoute));let i=this.location.path(!0);return this.authService.initialize().pipe(vo(()=>this.authService.handleRedirectObservable()),vo(()=>{if(!this.authService.instance.getAllAccounts().length)return t?(this.authService.getLogger().verbose("Guard - no accounts retrieved, log in required to activate"),this.loginInteractively(t)):(this.authService.getLogger().verbose("Guard - no accounts retrieved, no state, cannot load"),re(!1));if(this.authService.getLogger().verbose("Guard - at least 1 account exists, can activate or load"),t){let o=this.includesCode(t.url),r=!!t.root&&!!t.root.fragment&&this.includesCode(`#${t.root.fragment}`),s=this.location.prepareExternalUrl(t.url).indexOf("#")===0;if(o&&(r||s))return this.authService.getLogger().info("Guard - Hash contains known code response, stopping navigation."),i.indexOf("#")>-1?re(this.parseUrl(this.location.path())):re(this.parseUrl(""))}return re(!0)}),bn(o=>(this.authService.getLogger().error("Guard - error while logging in, unable to activate"),this.authService.getLogger().errorPii(`Guard - error: ${o.message}`),this.loginFailedRoute&&t?(this.authService.getLogger().verbose("Guard - loginFailedRoute set, redirecting"),re(this.loginFailedRoute)):re(!1))))}includesCode(t){return t.lastIndexOf("/code")>-1&&t.lastIndexOf("/code")===t.length-5||t.indexOf("#code=")>-1||t.indexOf("&code=")>-1}canActivate(t,i){return this.authService.getLogger().verbose("Guard - canActivate"),this.activateHelper(i)}canActivateChild(t,i){return this.authService.getLogger().verbose("Guard - canActivateChild"),this.activateHelper(i)}canMatch(){return this.authService.getLogger().verbose("Guard - canLoad"),this.activateHelper()}}return n.\u0275fac=function(t){return new(t||n)($(Xp),$(eg),$(fh),$(or),$(la))},n.\u0275prov=G({token:n,factory:n.\u0275fac}),n})();var ph=class n{constructor(e,t,i){this.msalGuardConfig=e;this.authService=t;this.msalBroadcastService=i}isIframe=!1;isLoggedIn=!1;_destroying$=new At;authStatus$=new At;ngOnInit(){this.msalInit()}ngOnDestroy(){this._destroying$.next(void 0),this._destroying$.complete()}msalInit(){this.authService.handleRedirectObservable().subscribe(),this.isIframe=window!==window.parent&&!window.opener,this.setLoggedInStatus(),this.authService.instance.enableAccountStorageEvents(),this.msalBroadcastService.msalSubject$.pipe(un(e=>e.eventType===q.ACCOUNT_ADDED||e.eventType===q.ACCOUNT_REMOVED)).subscribe(e=>{this.authService.instance.getAllAccounts().length===0?window.location.pathname="/":this.setLoggedInStatus()}),this.msalBroadcastService.inProgress$.pipe(un(e=>e===Zt.None),Od(this._destroying$)).subscribe(()=>{this.setLoggedInStatus(),this.checkAndSetActiveAccount()})}setLoggedInStatus(){this.isLoggedIn=this.authService.instance.getAllAccounts().length>0,this.emitAuthStatus(this.isLoggedIn)}emitAuthStatus(e){this.authStatus$.next(e)}getAuthStatus(){return this.authStatus$.asObservable()}checkAndSetActiveAccount(){if(!this.authService.instance.getActiveAccount()&&this.authService.instance.getAllAccounts().length>0){let t=this.authService.instance.getAllAccounts();this.authService.instance.setActiveAccount(t[0])}}loginRedirect(){this.msalGuardConfig.authRequest?this.authService.loginRedirect(v({},this.msalGuardConfig.authRequest)).subscribe(e=>{console.log(e)}):this.authService.loginRedirect()}logout(e){e?this.authService.logoutPopup({mainWindowRedirectUri:"/"}):this.authService.logoutRedirect()}static \u0275fac=function(t){return new(t||n)($(Xp),$(fh),$(eg))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var yX=tk.namespace("MainComponent").seal(),hv=class n extends Ce{constructor(t){super();this.authService=t}authStatusSubscription;menuItems;ngOnInit(){super.ngOnInit(),this.authService.ngOnInit(),this.initializeMenu(),this.authStatusSubscription=this.authService.getAuthStatus().subscribe(t=>{yX.label("ngOnInit").info("Authentication status: "+t),this.initializeMenu()})}ngOnDestroy(){this.authStatusSubscription&&this.authStatusSubscription.unsubscribe()}initializeMenu(){this.menuItems=[],this.authService.isLoggedIn?(this.menuItems.push({label:"Logout",action:()=>this.authService.logout()}),this.menuItems.push({label:"Create new post",action:()=>this.router.navigateByUrl("/editor/")}),this.menuItems.push({label:"List posts",action:()=>this.router.navigateByUrl("/list")})):this.menuItems.push({label:"Login",action:()=>this.authService.loginRedirect()})}static \u0275fac=function(i){return new(i||n)(Ge(ph))};static \u0275cmp=ne({type:n,selectors:[["app-main"]],standalone:!0,features:[me,le],decls:894,vars:2,consts:[[3,"menuItems"],["id","main-header",1,"purple"],[1,"bg"],[1,"row"],[1,"small-16","columns"],[1,"stars"],["src","assets/images/illustrations/stars-home.svg","alt","",1,"animated","infinite","flash"],[1,"identity"],["id","logo","src","assets/images/logos/logo.png","alt","placeholder logo",1,"center-image"],[1,"tagline"],["src","assets/images/illustrations/ship-illustration.svg","alt","rocket",1,"rocket","center-image","animated","bounceInUp"],["id","about"],["id","links"],["href","./assets/cv/cv_Thierry_Langie.docx","target","_blank"],["src","assets/images/icons/icon-word.svg","alt",""],["href","https://www.linkedin.com/in/thierrylangie/","target","_blank"],["src","assets/images/icons/icon-linkedin.svg","alt",""],["href","./assets/cv/cv_Thierry_Langie.pdf","target","_blank"],["src","assets/images/icons/icon-pdf.svg","alt",""],[1,"spacer"],["id","profile"],[1,"small-8","columns","width-100-on-mobile"],[1,"table"],[1,"trow"],[1,"tcol","last"],[1,"tcol","limit"],[1,"hide-on-mobile"],[1,"small-16","columns","width-100-on-mobile"],["data-closable","fade-out",1,"alert","callout"],[1,"h3"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"small-16","columns","width-100-on-mobile","grid"],["data-open","modal-c-sharp",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-asp-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-web-api",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-razor",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-blazor",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net-core",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-html",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-css",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-scss",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-javascript",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-typescript",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-jquery",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ajax",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-angular",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-visual-studio",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-entity-framework",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-message-queuing",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-progressive-web-apps",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-aurelia",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-architecture-design",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-okta",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-data-visualization",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-api-management",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-gulp",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dependency-injection",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-tfs",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-active-directory",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-agile",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-enterprise-resource-planning",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-event-driven",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-iis",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-continuous-deployment",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-linq",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-asynchronous",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-design-pattern",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-mvc",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microservices",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-containers",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-docker",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-ci-cd-pipelines",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-performance-tuning",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-signalr",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-web-forms",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-powershell",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-caching",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-maui",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-kubernetes",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-on-premise",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-word-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-access-reporting",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-outlook-vba",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-outlook-form",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-e-banking",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-barcode-reader",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-c-sharp-dot-net",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-autocas-api",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-omnis-studio",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-cognitive-services",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-microsoft-authenticator",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-serverless",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-functions",1,"button","hollow-button","tiny-button","grid-item"],["data-open","modal-azure-sql-database",1,"button","hollow-button","tiny-button","grid-item"],["id","projects"],[1,"table","table-striped"],[1,"tcol","first","hide-on-mobile"],[1,"button","purple-tint1-button","hollow-button","shadow-button",3,"click"],[1,"badge"],[1,"tcol","last","hide-on-mobile"],["data-open","modal-dot-net",1,"button","hollow-button"],["data-open","modal-sql-server",1,"button","hollow-button"],["data-open","modal-digipass",1,"button","hollow-button"],["data-open","modal-on-premise",1,"button","hollow-button"],[1,"tcol","adjust"],["src","assets/images/icons/icon-nuclear.svg","alt","",1,"width-20"],[1,"link",3,"click"],[1,"button","purple-tint2-button","hollow-button","shadow-button",3,"click"],["data-open","modal-dot-net-core",1,"button","hollow-button"],["data-open","modal-okta",1,"button","hollow-button"],["data-open","modal-ubikey",1,"button","hollow-button"],["data-open","modal-c-sharp",1,"button","hollow-button"],["src","assets/images/icons/icon-energy.svg","alt","",1,"width-20"],[1,"button","purple-tint3-button","hollow-button","shadow-button",3,"click"],["data-open","modal-dot-net-framework",1,"button","hollow-button"],["src","assets/images/icons/icon-service.svg","alt","",1,"width-20"],[1,"button","purple-tint4-button","hollow-button","shadow-button",3,"click"],["data-open","modal-excel-vba",1,"button","hollow-button"],["data-open","modal-mainframe",1,"button","hollow-button"],["data-open","modal-crystal-reports",1,"button","hollow-button"],["src","assets/images/icons/icon-industry.svg","alt","",1,"width-20"],[1,"button","purple-tint5-button","hollow-button","shadow-button",3,"click"],["data-open","modal-access-vba",1,"button","hollow-button"],["src","assets/images/icons/icon-medal.svg","alt","",1,"width-20"],[1,"button","purple-tint6-button","hollow-button","shadow-button",3,"click"],["data-open","modal-vb-dot-net",1,"button","hollow-button"],["src","assets/images/icons/icon-pill.svg","alt","",1,"width-20"],[1,"button","purple-tint7-button","hollow-button","shadow-button",3,"click"],["data-open","modal-barcode-reader",1,"button","hollow-button"],["data-open","modal-access-database",1,"button","hollow-button"],["data-open","modal-access-reporting",1,"button","hollow-button"],[1,"button","purple-tint9-button","hollow-button","shadow-button",3,"click"],["data-open","modal-e-banking",1,"button","hollow-button"],["src","assets/images/icons/icon-cash.svg","alt","",1,"width-20"],[1,"button","purple-tint10-button","hollow-button","shadow-button",3,"click"],["data-open","modal-visual-basic",1,"button","hollow-button"],[1,"button","purple-tint11-button","hollow-button","shadow-button",3,"click"],["data-open","modal-word-vba",1,"button","hollow-button"],["src","assets/images/icons/icon-tech.svg","alt","",1,"width-20"],[1,"button","purple-tint12-button","hollow-button","shadow-button",3,"click"],["data-open","modal-powerbuilder",1,"button","hollow-button"],["data-open","modal-omnis-studio",1,"button","hollow-button"],[1,"button","purple-tint13-button","hollow-button","shadow-button",3,"click"],["src","assets/images/icons/icon-marketing.svg","alt","",1,"width-20"],[1,"button","purple-tint14-button","hollow-button","shadow-button",3,"click"],["data-open","modal-autocad-api",1,"button","hollow-button"],["src","assets/images/icons/icon-connect.svg","alt","",1,"width-20"],[1,"button","purple-tint15-button","hollow-button","shadow-button",3,"click"],["src","assets/images/icons/icon-wine.svg","alt","",1,"width-20"],[1,"button","purple-tint16-button","hollow-button","shadow-button",3,"click"],["src","assets/images/icons/icon-soda.svg","alt","",1,"width-20"],[1,"button","purple-tint17-button","hollow-button","shadow-button",3,"click"],["data-open","modal-outlook-vba",1,"button","hollow-button"],["data-open","modal-outlook-form",1,"button","hollow-button"],["src","assets/images/icons/icon-chef.svg","alt","",1,"width-20"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],["id","blog"],[1,"small-16","columns","masonry"],[1,"span5","height3","button","purple-tint2-button","hollow-button"],["href","viewer/user_experience_in_angular_applications"],[1,"button","hollow-button","tiny-button"],[1,"span4","height3","button","purple-tint2-button","hollow-button"],["href","viewer/in-process_and_isolated_functions"],[1,"span5","height1","button","purple-tint3-button","hollow-button"],["href","viewer/angular_components_and_directives"],[1,"span2","height3","button","white-button","no-border","hollow-button"],["href","viewer/angular_directives_you_should_know"],[1,"span5","height2","pic-profile","button","purple-tint4-button","shadow-button"],["src","assets/images/illustrations/picture-profile.png",1,"picture-profile"],[1,"span3","height2","button","purple-tint5-button","hollow-button"],["href","viewer/angular_cli_tips_&_tricks"],[1,"span3","height2","button","purple-tint6-button","hollow-button"],["href","viewer/understanding_angular_and_signals"],[1,"span2","height4","button","purple-tint7-button","hollow-button"],["href","viewer/custom_angular_library_for_reusable_components"],[1,"span1"],["src","assets/images/icons/icon-angular.svg"],[1,"span3","height2","button","purple-tint8-button","hollow-button"],[1,"span5","height2","button","purple-tint9-button","shadow-button"],[1,"span3","height3","button","purple-tint9-button","hollow-button"],[1,"span6","height2","button","purple-tint10-button","hollow-button"],[1,"span4","height2","utton","purple-tint10-button","hollow-button"],[1,"span2","button","purple-tint2-button","hollow-button"],[1,"span5","height2","button","purple-tint13-button","hollow-button"],[1,"span3","height2","purple-tint14-button","button","darkgreen-button","shadow-button"],[1,"span2","height2","button","purple-tint2-button","hollow-button"],["href",""],["src","assets/images/icons/icon-connect.svg"],[1,"span3","height3","button","purple-tint16-button","hollow-button"],[1,"span4","height2","button","purple-tint17-button","hollow-button"],[1,"span3","height3","button","hollow-button"],[1,"span6","height2","button","hollow-button"],[1,"span4","height2","button","hollow-button"],[1,"span5","height2","button","hollow-button"],[1,"span2","height2","button","darkgreen-button","shadow-button"],[1,"span4","button","purple-tint12-button","hollow-button"],[1,"span3","height4","button","hollow-button"],[1,"span4","height3","button","hollow-button"],[1,"span4","height2","button","darkgreen-button","shadow-button"],[1,"span5","height3","button","hollow-button"],[1,"span3","height2","button","darkgreen-button","shadow-button"],["src","assets/images/icons/icon-tech.svg"],[1,"span3","height2","button","hollow-button"]],template:function(i,o){i&1&&(b(0,"app-menu",0),u(1,"header",1)(2,"section",2)(3,"div",3)(4,"div",4)(5,"div",5),b(6,"img",6),h()()()(),u(7,"section",7)(8,"div",3)(9,"div",4),b(10,"img",8),u(11,"p",9),m(12,"Full stack .Net Angular developer"),h()()(),u(13,"div",3)(14,"div",4),b(15,"img",10),h()()()(),u(16,"section",11)(17,"div",3)(18,"header",4)(19,"h2"),m(20,"About"),h(),u(21,"p"),m(22," With nearly 3 decades of programming experience, I am \u2764\uFE0F"),u(23,"strong"),m(24,"deeply passionate"),h(),m(25," about my work. Over the years, I have encountered a multitude of challenges that have not only tested my skills but also provided me with invaluable learning opportunities. \u{1F680}"),u(26,"strong"),m(27,"Prolog.red"),h(),m(28," is my personal playground! This is a space to explore, experiment, and share a variety of ideas, projects, and interests. Whether I'm diving into the latest tech trends or simply sharing my thoughts, you'll find a little bit of everything here. "),h()()()(),u(29,"section",12)(30,"a",13),b(31,"img",14),h(),u(32,"a",15),b(33,"img",16),h(),u(34,"a",17),b(35,"img",18),h(),b(36,"hr",19)(37,"hr",19),h(),u(38,"section",20)(39,"div",3)(40,"header",4)(41,"h2"),m(42,"Profile"),h()(),u(43,"div",21)(44,"div",22)(45,"div",23)(46,"div",24),m(47," Thierry Langie "),h(),u(48,"div",25)(49,"strong"),m(50,"Name"),h(),m(51," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(52,"div",23)(53,"div",24),m(54," Full stack .Net "),u(55,"span",26),m(56,"Angular"),h()(),u(57,"div",25)(58,"strong"),m(59,"Role"),h(),m(60," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(61,"div",23)(62,"div",24),m(63),h(),u(64,"div",25)(65,"strong"),m(66,"Email"),h(),m(67," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(68,"div",23)(69,"div",24),m(70," +32 486 96 45 77 "),h(),u(71,"div",25)(72,"strong"),m(73,"Phone"),h(),m(74," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(75,"div",23)(76,"div",24),m(77," Namur, Belgium "),h(),u(78,"div",25)(79,"strong"),m(80,"Location"),h(),m(81," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()()()(),u(82,"div",21)(83,"div",22)(84,"div",23)(85,"div",24),m(86," French, English "),h(),u(87,"div",25)(88,"strong"),m(89,"Languages"),h(),m(90," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(91,"div",23)(92,"div",24),m(93," 51 years old "),h(),u(94,"div",25)(95,"strong"),m(96,"Age"),h(),m(97," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(98,"div",23)(99,"div",24),m(100," 30+ years "),u(101,"span",26),m(102,"of experience"),h()(),u(103,"div",25)(104,"strong"),m(105,"Experience"),h(),m(106," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(107,"div",23)(108,"div",24),m(109," 33+ "),u(110,"span",26),m(111,"completed"),h(),m(112," projects "),h(),u(113,"div",25)(114,"strong"),m(115,"Missions"),h(),m(116," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()(),u(117,"div",23)(118,"div",24)(119,"span",26),m(120,"Remotely &"),h(),m(121," Part-time only "),h(),u(122,"div",25)(123,"strong"),m(124,"Availability"),h(),m(125," . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "),h()()()(),b(126,"hr",19),u(127,"div",27)(128,"div",28)(129,"span",29),m(130,"\u26A0\uFE0F"),h(),u(131,"strong"),m(132,"Disponibility"),h(),m(133," I will not be available for freelance work over the next year. I must dedicate my time and resources to my current mission at Equans. "),u(134,"button",30)(135,"span",31),Ne(),u(136,"svg",32),b(137,"path",33),h()()()()()(),Oe(),u(138,"div",3)(139,"div",34)(140,"a",35),m(141,"C#"),h(),u(142,"a",36),m(143,"Asp.Net"),h(),u(144,"a",37),m(145,"Web API"),h(),u(146,"a",38),m(147,"Razor"),h(),u(148,"a",39),m(149,"Blazor"),h(),u(150,"a",40),m(151,".Net Core"),h(),u(152,"a",41),m(153,"Sql Server"),h(),u(154,"a",42),m(155,"HTML"),h(),u(156,"a",43),m(157,"CSS"),h(),u(158,"a",44),m(159,"SCSS"),h(),u(160,"a",45),m(161,"JavaScript"),h(),u(162,"a",46),m(163,"TypeScript"),h(),u(164,"a",47),m(165,"jQuery"),h(),u(166,"a",48),m(167,"Ajax"),h(),u(168,"a",49),m(169,"Angular"),h(),u(170,"a",50),m(171,"Visual Studio"),h(),u(172,"a",51),m(173,".Net"),h(),u(174,"a",52),m(175,"Entity Framework"),h(),u(176,"a",53),m(177,"Digpass"),h(),u(178,"a",54),m(179,"Ubikey"),h(),u(180,"a",55),m(181,"Message Queuing"),h(),u(182,"a",56),m(183,"Azure"),h(),u(184,"a",57),m(185,"Progressive Web Apps"),h(),u(186,"a",58),m(187,"Aurelia"),h(),u(188,"a",59),m(189,"Architecture Design"),h(),u(190,"a",60),m(191,"OKTA"),h(),u(192,"a",61),m(193,"Data Visualization"),h(),u(194,"a",62),m(195,"API Management"),h(),u(196,"a",63),m(197,"Gulp"),h(),u(198,"a",64),m(199,"Dependency Injection"),h(),u(200,"a",65),m(201,"TFS"),h(),u(202,"a",66),m(203,"Azure Active Directory"),h(),u(204,"a",67),m(205,"Agile"),h(),u(206,"a",68),m(207,"Enterprise Resource Planning"),h(),u(208,"a",69),m(209,"Event Driven"),h(),u(210,"a",70),m(211,"IIS"),h(),u(212,"a",71),m(213,"Continuous Deployment"),h(),u(214,"a",72),m(215,"Linq"),h(),u(216,"a",73),m(217,"Asynchronous"),h(),u(218,"a",74),m(219,"Design Pattern"),h(),u(220,"a",75),m(221,"MVC"),h(),u(222,"a",76),m(223,"Microservices"),h(),u(224,"a",77),m(225,"Containers"),h(),u(226,"a",78),m(227,"Docker"),h(),u(228,"a",79),m(229,"CI/CD Pipelines"),h(),u(230,"a",80),m(231,"Performance Tuning"),h(),u(232,"a",81),m(233,"SignalR"),h(),u(234,"a",82),m(235,"Web Forms"),h(),u(236,"a",83),m(237,"PowerShell"),h(),u(238,"a",84),m(239,"Caching"),h(),u(240,"a",85),m(241,"MAUI"),h(),u(242,"a",86),m(243,"Kubernetes"),h(),u(244,"a",87),m(245,"Visual Basic"),h(),u(246,"a",88),m(247,"On premise"),h(),u(248,"a",89),m(249,"Excel\xAE VBA"),h(),u(250,"a",90),m(251,"Word\xAE VBA"),h(),u(252,"a",91),m(253,"Access\xAE VBA"),h(),u(254,"a",92),m(255,"Access\xAE Database"),h(),u(256,"a",93),m(257,"Access\xAE Reporting"),h(),u(258,"a",94),m(259,"Outlook\xAE VBA"),h(),u(260,"a",95),m(261,"Outlook\xAE Form"),h(),u(262,"a",96),m(263,"Mainframe"),h(),u(264,"a",97),m(265,".Net Framework"),h(),u(266,"a",98),m(267,"Crystal Reports"),h(),u(268,"a",99),m(269,"e-Banking"),h(),u(270,"a",100),m(271,"Barcode Reader"),h(),u(272,"a",101),m(273,"VB.Net"),h(),u(274,"a",102),m(275,"C#.Net"),h(),u(276,"a",103),m(277,"Autocad API"),h(),u(278,"a",104),m(279,"Omnis Studio"),h(),u(280,"a",105),m(281,"Microsoft Graph"),h(),u(282,"a",106),m(283,"Azure Cognitive Services"),h(),u(284,"a",107),m(285,"Microsoft Authenticator"),h(),u(286,"a",108),m(287,"Serverless"),h(),u(288,"a",109),m(289,"Azure Functions"),h(),u(290,"a",110),m(291,"Azure Sql Database"),h()()()(),u(292,"section",111),b(293,"hr",19),u(294,"div",3)(295,"header",4)(296,"h2"),m(297,"Completed projects"),h()(),u(298,"div",4)(299,"div",112)(300,"div",23)(301,"div",113)(302,"a",114),R("click",function(){return o.navigateWithAnimation(["/clients/transnubel"])}),m(303,"Nuclear"),h(),u(304,"span",115),m(305,"5"),h()(),u(306,"div",116)(307,"a",117),m(308,".Net"),h(),u(309,"a",118),m(310,"Sql Server"),h(),u(311,"a",119),m(312,"Digipass"),h(),u(313,"a",120),m(314,"On premise"),h()(),u(315,"div",121),b(316,"img",122),u(317,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/transnubel"])}),u(318,"strong"),m(319,"Transnubel"),h()(),m(320," \u25CF "),u(321,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/transnubel"])}),m(322," Web applications for Transport / Packing / Content Management Systems "),h()()(),u(323,"div",23)(324,"div",113)(325,"a",124),R("click",function(){return o.navigateWithAnimation(["/clients/engie"])}),m(326,"Energy"),h(),u(327,"span",115),m(328,"4"),h()(),u(329,"div",116)(330,"a",125),m(331,".Net Framework"),h(),u(332,"a",118),m(333,"Sql Server"),h(),u(334,"a",126),m(335,"Okta"),h(),u(336,"a",127),m(337,"Ubikey"),h(),u(338,"a",128),m(339,"C#"),h()(),u(340,"div",121),b(341,"img",129),u(342,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/engie"])}),u(343,"strong"),m(344,"Engie Solutions"),h()(),m(345," \u25CF "),u(346,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/engie"])}),m(347," Migration tasks from on-premises infrastructure to Azure cloud servers plus implemented effective strategies to ensure seamless transition "),h()()(),u(348,"div",23)(349,"div",113)(350,"a",130),R("click",function(){return o.navigateWithAnimation(["/clients/equans"])}),m(351,"Industry"),h(),u(352,"span",115),m(353,"3"),h()(),u(354,"div",116)(355,"a",131),m(356,".Net Framework"),h(),u(357,"a",118),m(358,"Sql Server"),h(),u(359,"a",126),m(360,"Okta"),h(),u(361,"a",127),m(362,"Ubikey"),h(),u(363,"a",128),m(364,"C#"),h()(),u(365,"div",121),b(366,"img",132),u(367,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/equans"])}),u(368,"strong"),m(369,"Equans Belgium"),h()(),m(370," \u25CF "),u(371,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/equans"])}),m(372,"Okta integration with existing web applications for simplifying the process of securing sensitive data"),h()()(),u(373,"div",23)(374,"div",113)(375,"a",133),R("click",function(){return o.navigateWithAnimation(["/clients/akzonobel"])}),m(376,"Industry"),h(),u(377,"span",115),m(378,"1"),h()(),u(379,"div",116)(380,"a",134),m(381,"Excel\xAE VBA"),h(),u(382,"a",135),m(383,"Mainframe"),h(),u(384,"a",136),m(385,"Crystal Reports"),h()(),u(386,"div",121),b(387,"img",137),u(388,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/akzonobel"])}),u(389,"strong"),m(390,"AkzoNobel"),h()(),m(391," \u25CF "),u(392,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/akzonobel"])}),m(393," Production Management Template for Microsoft Excel\xAE "),h()()(),u(394,"div",23)(395,"div",113)(396,"a",138),R("click",function(){return o.navigateWithAnimation(["/clients/olympic"])}),m(397,"Sport"),h(),u(398,"span",115),m(399,"1"),h()(),u(400,"div",116)(401,"a",118),m(402,"Sql Server"),h(),u(403,"a",139),m(404,"Access\xAE VBA"),h()(),u(405,"div",121),b(406,"img",140),u(407,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/olympic"])}),u(408,"strong"),m(409,"Belgian Olympic Committee"),h()(),m(410," \u25CF "),u(411,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/olympic"])}),m(412," Sport Information Management for recording individual athlete's profiles "),h()()(),u(413,"div",23)(414,"div",113)(415,"a",141),R("click",function(){return o.navigateWithAnimation(["/clients/baxter"])}),m(416,"Pharma"),h(),u(417,"span",115),m(418,"1"),h()(),u(419,"div",116)(420,"a",131),m(421,".Net Framework"),h(),u(422,"a",118),m(423,"Sql Server"),h(),u(424,"a",142),m(425,"VB.Net"),h()(),u(426,"div",121),b(427,"img",143),u(428,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/baxter"])}),u(429,"strong"),m(430,"Baxter Belgium"),h()(),m(431," \u25CF "),u(432,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/baxter"])}),m(433," Environment Health Safety software and Industrial hygiene and chemical risk management solution "),h()()(),u(434,"div",23)(435,"div",113)(436,"a",144),R("click",function(){return o.navigateWithAnimation(["/clients/gsk"])}),m(437,"Pharma"),h(),u(438,"span",115),m(439,"3"),h()(),u(440,"div",116)(441,"a",145),m(442,"Barcode reader"),h(),u(443,"a",117),m(444,".Net"),h(),u(445,"a",134),m(446,"Excel\xAE VBA"),h(),u(447,"a",128),m(448,"C#"),h()(),u(449,"div",121),b(450,"img",143),u(451,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/gsk"])}),u(452,"strong"),m(453,"Glaxo Smith Kline"),h()(),m(454," \u25CF "),u(455,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/gsk"])}),m(456," Scientific data collection and analysis software "),h()()(),u(457,"div",23)(458,"div",113)(459,"a",144),R("click",function(){return o.navigateWithAnimation(["/clients/labima"])}),m(460,"Pharma"),h(),u(461,"span",115),m(462,"1"),h()(),u(463,"div",116)(464,"a",139),m(465,"Access\xAE VBA"),h(),u(466,"a",146),m(467,"Access\xAE Database"),h(),u(468,"a",147),m(469,"Access\xAE Reporting"),h()(),u(470,"div",121),b(471,"img",143),u(472,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/labima"])}),u(473,"strong"),m(474,"Labima"),h()(),m(475," \u25CF "),u(476,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/labima"])}),m(477," Sales Representative software for monitoring commercial delegates performance "),h()()(),u(478,"div",23)(479,"div",113)(480,"a",148),R("click",function(){return o.navigateWithAnimation(["/clients/fib"])}),m(481,"Banking"),h(),u(482,"span",115),m(483,"5"),h()(),u(484,"div",116)(485,"a",131),m(486,".Net Framework"),h(),u(487,"a",142),m(488,"VB.Net"),h(),u(489,"a",119),m(490,"Digipass"),h(),u(491,"a",149),m(492,"e-Banking"),h()(),u(493,"div",121),b(494,"img",150),u(495,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/fib"])}),u(496,"strong"),m(497,"Fortis Insurance Belgium"),h()(),m(498," \u25CF "),u(499,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/fib"])}),m(500," Financial Operations software. Authentication modules. "),h()()(),u(501,"div",23)(502,"div",113)(503,"a",151),R("click",function(){return o.navigateWithAnimation(["/clients/credit-general"])}),m(504,"Banking"),h(),u(505,"span",115),m(506,"1"),h()(),u(507,"div",116)(508,"a",152),m(509,"Visual Basic"),h(),u(510,"a",146),m(511,"Access\xAE Database"),h(),u(512,"a",136),m(513,"Crystal Reports"),h()(),u(514,"div",121),b(515,"img",150),u(516,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/credit-general"])}),u(517,"strong"),m(518,"Credit General"),h()(),m(519," \u25CF "),u(520,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/credit-general"])}),m(521," Prospection Software designed for the Credit General "),h()()(),u(522,"div",23)(523,"div",113)(524,"a",153),R("click",function(){return o.navigateWithAnimation(["/clients/tott-systems"])}),m(525,"Tech"),h(),u(526,"span",115),m(527,"3"),h()(),u(528,"div",116)(529,"a",152),m(530,"Visual Basic"),h(),u(531,"a",134),m(532,"Excel\xAE VBA"),h(),u(533,"a",154),m(534,"Word\xAE VBA"),h()(),u(535,"div",121),b(536,"img",155),u(537,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/tott-systems"])}),u(538,"strong"),m(539,"Tott Systems"),h()(),m(540," \u25CF "),u(541,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/tott-systems"])}),m(542," Helpdesk Solution to streamline IT support processes "),h()()(),u(543,"div",23)(544,"div",113)(545,"a",156),R("click",function(){return o.navigateWithAnimation(["/clients/jpass"])}),m(546,"Tech"),h(),u(547,"span",115),m(548,"1"),h()(),u(549,"div",116)(550,"a",157),m(551,"PowerBuilder"),h(),u(552,"a",158),m(553,"Omnis Studio"),h()(),u(554,"div",121),b(555,"img",155),u(556,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/jpass"])}),u(557,"strong"),m(558,"JPass International"),h()(),m(559," \u25CF "),u(560,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/jpass"])}),m(561," Material Safety Data Sheets (MSDS) expert software for Windows. "),h()()(),u(562,"div",23)(563,"div",113)(564,"a",159),R("click",function(){return o.navigateWithAnimation(["/clients/sopres"])}),m(565,"Marketing"),h(),u(566,"span",115),m(567,"1"),h()(),u(568,"div",116)(569,"a",152),m(570,"Visual Basic"),h(),u(571,"a",135),m(572,"Mainframe"),h()(),u(573,"div",121),b(574,"img",160),u(575,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/sopres"])}),u(576,"strong"),m(577,"Sopres"),h()(),m(578," \u25CF "),u(579,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/sopres"])}),m(580," Rental Mailing List software designed with IT and business collaboration in mind "),h()()(),u(581,"div",23)(582,"div",113)(583,"a",161),R("click",function(){return o.navigateWithAnimation(["/clients/tplan"])}),m(584,"Telecom"),h(),u(585,"span",115),m(586,"1"),h()(),u(587,"div",116)(588,"a",152),m(589,"Visual Basic"),h(),u(590,"a",162),m(591,"Autocad API"),h()(),u(592,"div",121),b(593,"img",163),u(594,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/tplan"])}),u(595,"strong"),m(596,"T Plan"),h()(),m(597," \u25CF "),u(598,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/tplan"])}),m(599," Geographic Information System (GIS) software used to establish routes for placement of optic fibers in the ground. "),h()()(),u(600,"div",23)(601,"div",113)(602,"a",164),R("click",function(){return o.navigateWithAnimation(["/clients/schenk"])}),m(603,"Food & Beverage"),h(),u(604,"span",115),m(605,"1"),h()(),u(606,"div",116)(607,"a",152),m(608,"Visual Basic"),h(),u(609,"a",146),m(610,"Access\xAE Database"),h(),u(611,"a",136),m(612,"Crystal Reports"),h()(),u(613,"div",121),b(614,"img",165),u(615,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/schenk"])}),u(616,"strong"),m(617,"Schenk Holding"),h()(),m(618," \u25CF "),u(619,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/schenk"])}),m(620," Stock Management System with statistics and reports "),h()()(),u(621,"div",23)(622,"div",113)(623,"a",166),R("click",function(){return o.navigateWithAnimation(["/clients/coca-cola"])}),m(624,"Food & Beverage"),h(),u(625,"span",115),m(626,"1"),h()(),u(627,"div",116)(628,"a",134),m(629,"Excel\xAE VBA"),h(),u(630,"a",135),m(631,"Mainframe"),h(),u(632,"a",152),m(633,"Visual Basic"),h()(),u(634,"div",121),b(635,"img",167),u(636,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/coca-cola"])}),u(637,"strong"),m(638,"Coca-Cola"),h()(),m(639," \u25CF "),u(640,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/coca-cola"])}),m(641," Y2K millennium bug \u25CF Transition to the Euro \u25CF Excel Macros migration "),h()()(),u(642,"div",23)(643,"div",113)(644,"a",168),R("click",function(){return o.navigateWithAnimation(["/clients/kjs"])}),m(645,"Food & Beverage"),h(),u(646,"span",115),m(647,"1"),h()(),u(648,"div",116)(649,"a",169),m(650,"Outlook\xAE VBA"),h(),u(651,"a",170),m(652,"Outlook\xAE Form"),h()(),u(653,"div",121),b(654,"img",171),u(655,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/kjs"])}),u(656,"strong"),m(657,"Kraft Jacobs Suchard"),h()(),m(658," \u25CF "),u(659,"a",123),R("click",function(){return o.navigateWithAnimation(["/clients/kjs"])}),m(660," European Survey on sales performance. Electronic forms dispatched via Outlook. "),h()()()()()()(),u(661,"footer",172),b(662,"div",3),u(663,"div",173)(664,"div",3)(665,"div",4)(666,"p",174),m(667,"Copyright \xA9 2025 "),u(668,"a",175),m(669,"Prolog.Red"),h(),b(670,"img",176),u(671,"span",26),m(672," All Rights Reserved"),h()()()()()(),u(673,"section",177),b(674,"hr",19),u(675,"div",3)(676,"header",4)(677,"h2"),m(678,"Blog"),h()(),u(679,"div",178)(680,"ul")(681,"li",179)(682,"a",180)(683,"h2"),m(684,"\u{1F4A5}User Experience in Angular Applications"),h(),u(685,"div")(686,"div",181),m(687,"angular"),h(),u(688,"div",181),m(689,"ux"),h()()()(),u(690,"li",182)(691,"a",183)(692,"h2"),m(693,"\u26A1\uFE0FIn-process And"),b(694,"br"),m(695,"Isolated Functions"),h(),u(696,"div")(697,"div",181),m(698,".net"),h(),u(699,"div",181),m(700,"azure functions"),h()()()(),u(701,"li",184)(702,"a",185)(703,"h4"),m(704,"Angular Components And Directives"),h()()(),u(705,"li",186)(706,"a",187)(707,"h3"),m(708,"\u{1F680}Angular Directives You Should Know"),h()()(),u(709,"li",188),b(710,"img",189),u(711,"h4"),m(712,"Inside the Mind of a Developer Crafting Code and Solving Problems Efficiently"),h()(),u(713,"li",190)(714,"a",191)(715,"h3"),m(716,"Angular CLI"),b(717,"br"),m(718,"tips & tricks"),h()()(),u(719,"li",192)(720,"a",193)(721,"h3"),m(722,"\u{1F62E}Understanding"),b(723,"br"),m(724,"Angular and Signals"),h()()(),u(725,"li",194)(726,"a",195)(727,"h3"),m(728,"Custom Angular library for reusable components"),h(),u(729,"div")(730,"div",181),m(731,"angular"),h(),u(732,"div",181),m(733,"library"),h()()()(),u(734,"li",196),b(735,"img",197),h(),u(736,"li",198)(737,"p"),m(738,"Algorithm: A set of rules or steps used to solve a problem"),h()(),u(739,"li",199)(740,"h1"),m(741,"Cybersecurity"),h()(),u(742,"li",200)(743,"p"),m(744,"Back End: The server side of an application that handles the logic, database interactions, and server configuration"),h()(),u(745,"li",200)(746,"p"),m(747,"Version Control: A system that records changes to a file or set of files over time so that you can recall specific versions later"),h()(),u(748,"li",201)(749,"p"),m(750,"Machine Learning: A subset of artificial intelligence where computers use data to learn and make decisions without being explicitly programmed \u201D "),h()(),u(751,"li",202)(752,"p"),m(753,"Blockchain: A decentralized digital ledger that records transactions across many computers securely"),h()(),u(754,"li",203)(755,"p"),m(756,"Design Pattern"),h()(),u(757,"li",203)(758,"p"),m(759,"Dependency Injection"),h()(),u(760,"li",204)(761,"p"),m(762,"IoT (Internet of Things): A network of physical devices connected to the internet, enabling them to collect and exchange data"),h()(),u(763,"li",205)(764,"h1"),m(765,"DevOps"),h()(),u(766,"li",206)(767,"a",207)(768,"h4"),m(769,"Progressive Web Apps"),h(),u(770,"div")(771,"div",181),m(772,"pwa"),h()()()(),u(773,"li",196),b(774,"img",208),h(),u(775,"li",209)(776,"p"),m(777,"Big Data: Extremely large data sets that can be analyzed computationally to reveal patterns, trends, and associations"),h()(),u(778,"li",210)(779,"p"),m(780,"Cybersecurity: The practice of protecting systems, networks, and programs from digital attacks "),h()(),u(781,"li",211)(782,"p"),m(783,"Virtual Reality (VR): A simulated experience that can be similar to or completely different from the real world, typically using VR headsets"),h()(),u(784,"li",212)(785,"p"),m(786,"Augmented Reality (AR): An interactive experience where real-world environments are enhanced by computer-generated perceptual information"),h()(),u(787,"li",212)(788,"p"),m(789,"SaaS (Software as a Service): A model where applications are hosted by a service provider and made available to customers over the internet"),h()(),u(790,"li",213)(791,"p"),m(792,"Open Source: Software with source code that anyone can inspect, modify, and enhance"),h()(),u(793,"li",212)(794,"p"),m(795,"Firewall: A network security system that monitors and controls incoming and outgoing network traffic based on predetermined security rules"),h()(),u(796,"li",214)(797,"p"),m(798,"Artificial Intelligence (AI): The simulation of human intelligence processes by machines, especially computer systems"),h()(),u(799,"li",212)(800,"p"),m(801,"Deep Learning: A type of machine learning involving neural networks with many layers, used for analyzing complex patterns in large data sets"),h()(),u(802,"li",215)(803,"h1"),m(804,"Scrum"),h()(),u(805,"li",211)(806,"p"),m(807,"Responsive Design: An approach to web design that makes web pages render well on a variety of devices and window or screen sizes"),h()(),u(808,"li",214)(809,"p"),m(810,"Scrum: An agile framework for managing complex projects, typically used in software development "),h()(),u(811,"li",214)(812,"p"),m(813,"Phishing: A type of cyber attack where attackers disguise themselves as trustworthy entities to steal sensitive information"),h()(),u(814,"li",212)(815,"p"),m(816,"SDK (Software Development Kit): A collection of software development tools in one installable package, used for developing applications for a specific platform"),h()(),u(817,"li",216)(818,"p"),m(819,"Bandwidth: The maximum rate of data transfer across a given path"),h()(),u(820,"li",213)(821,"p"),m(822,"Front End: The part of a software application that interacts directly with the user"),h()(),u(823,"li",213)(824,"p"),m(825,"Latency: The delay before a transfer of data begins following an instruction for its transfer"),h()(),u(826,"li",211)(827,"p"),m(828,"Cache: A hardware or software component that stores data so future requests for that data can be served faster"),h()(),u(829,"li",212)(830,"p"),m(831,"Load Balancer: A device that distributes network or application traffic across multiple servers to ensure no single server becomes overwhelmed"),h()(),u(832,"li",217)(833,"p"),m(834,"Microservices: An architectural style in development that structures an application as a collection of loosely coupled services, each one implementing a business capability"),h()(),u(835,"li",213)(836,"p"),m(837,"DNS (Domain Name System): The system that translates domain names (like www.example.com) into IP addresses"),h()(),u(838,"li",214)(839,"p"),m(840,"HTTP/HTTPS (Hypertext Transfer Protocol/Secure): The protocol used for transmitting web pages over the internet, with HTTPS adding a layer of security"),h()(),u(841,"li",211)(842,"p"),m(843,"Proxy Server: A server that acts as an intermediary for requests from clients seeking resources from other servers"),h()(),u(844,"li",213)(845,"p"),m(846,"Virtual Machine (VM): An emulation of a computer system that provides the functionality of a physical computer"),h()(),u(847,"li",218)(848,"p"),m(849,"Containerization: A lightweight form of virtualization that involves encapsulating an application and its dependencies into a container"),h()(),u(850,"li",219)(851,"h1"),m(852,"Version Control"),h()(),u(853,"li",218)(854,"p"),m(855,"Edge Computing: A distributed computing paradigm that brings computation and data storage closer to the location where it is needed"),h()(),u(856,"li",217)(857,"p"),m(858,"Quantum Computing: A type of computing that uses quantum-mechanical phenomena, such as superposition and entanglement, to perform operations on data"),h()(),u(859,"li",218)(860,"p"),m(861,"CI/CD (Continuous Integration/Continuous Deployment): Practices that involve automatically testing and deploying code changes to production"),h()(),u(862,"li",213)(863,"p"),m(864,"Serverless Computing: A cloud-computing execution model where the cloud provider dynamically manages the allocation of machine resources"),h()(),u(865,"li",220)(866,"p"),m(867,"API Gateway: A server that acts as an API front-end, receiving API requests, enforcing throttling and security policies, passing requests to the back-end service, and then passing the response back to the requester"),h()(),u(868,"li",211)(869,"p"),m(870,"Data Lake: A centralized repository that allows you to store all your structured and unstructured data at any scale"),h()(),u(871,"li",211)(872,"p"),m(873,"Data Warehouse: A system used for reporting and data analysis, and is considered a core component of business intelligence"),h()(),u(874,"li",218)(875,"p"),m(876,"NoSQL Database: A type of database that provides a mechanism for storage and retrieval of data that is modeled in means other than the tabular relations used in relational databases"),h()(),u(877,"li",218)(878,"p"),m(879,"ORM (Object-Relational Mapping): A programming technique for converting data between incompatible type systems in object-oriented programming languages"),h()(),u(880,"li",221)(881,"h1"),m(882,"Latency"),h()(),u(883,"li",196),b(884,"img",222),h(),u(885,"li",218)(886,"p"),m(887,"Scalability: The capability of a system, network, or process to handle a growing amount of work, or its potential to accommodate growth"),h()(),u(888,"li",211)(889,"p"),m(890,"Single Sign-On (SSO): An authentication process that allows a user to access multiple applications with one set of login credentials"),h()(),u(891,"li",223)(892,"p"),m(893,"Web Scraping: The process of using bots to extract content and data from a website"),h()()()()()()),i&2&&($n("menuItems",o.menuItems),wt(63),Yr(" ","thierry@prolog.red"," "))},dependencies:[sr],encapsulation:2})};var mv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-equans"]],standalone:!0,features:[me,le],decls:113,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],["data-closable","fade-out",1,"alert","callout"],[1,"text-center"],["data-open","modal-angular",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-functions",1,"button","hollow-button","tiny-button"],["data-open","modal-dot-net-core",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-sql-database",1,"button","hollow-button","tiny-button"],["data-open","modal-c-sharp",1,"button","hollow-button","tiny-button"],["data-open","modal-okta",1,"button","hollow-button","tiny-button"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-authenticator",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button"],["data-open","modal-azure-cognitive-services",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Equans Belgium"),h()(),u(13,"div")(14,"p"),m(15," Leading global player in multi-technical installations and maintenance services. They design, install and deliver customised solutions and services to improve customers' infrastructure, equipment, systems and technical processes. "),h(),u(16,"div",11)(17,"strong"),m(18,"Equans"),h(),m(19," (formerly known as Transnubel) is linked to the "),u(20,"strong"),m(21,"ENGIE group"),h(),m(22," which is made up of 71 companies. I have been working for Equans since 2022 as a freelance. This experience has allowed me to contribute to and learn from a leading company in the Nuclear industry. "),u(23,"button",12)(24,"span",13),Ne(),u(25,"svg",14),b(26,"path",15),h()()()(),Oe(),u(27,"p")(28,"strong"),m(29,"Platon"),h(),u(30,"span",16),m(31,"WEB\xB7APP"),h(),m(32," Shuttle Transport Booking web application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),h(),u(33,"p")(34,"strong"),m(35,"Transportboek"),h(),u(36,"span",16),m(37,"WEB\xB7APP"),h(),m(38," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),h(),u(39,"p")(40,"strong"),m(41,"Paris"),h(),u(42,"span",16),m(43,"WEB\xB7APP"),h(),m(44," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),h(),u(45,"div",17)(46,"strong"),m(47,"Gaffe"),h(),u(48,"span",16),m(49,"DISCONTINUED"),h(),m(50," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),b(51,"br"),u(52,"strong"),m(53,"Replaced by SharePoint"),h(),u(54,"button",12)(55,"span",13),Ne(),u(56,"svg",14),b(57,"path",15),h()()()(),Oe(),u(58,"div",17)(59,"strong"),m(60,"Launcher"),h(),u(61,"span",16),m(62,"DISCONTINUED"),h(),m(63," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),b(64,"br"),u(65,"strong"),m(66,"Replaced by SharePoint"),h(),u(67,"button",12)(68,"span",13),Ne(),u(69,"svg",14),b(70,"path",15),h()()()(),Oe(),u(71,"p")(72,"code"),m(73,"Okta"),h(),m(74," integration on smartphones to align with modern security standards. This includes the implementation of two-factor authentication (2FA), adding an additional layer of protection. With 2FA, users must provide two forms of identification before accessing the web applications listed above, this significantly bolstering security. "),h(),u(75,"p")(76,"code"),m(77,"Yubikey"),h(),m(78," are used when smartphones are not allowed on certain sites (nuclear power plants). People need an alternative way to authenticate securely. For these situations, we use YubiKey. Which is a physical security key that provides strong authentication without the need for a smartphone. Just plug it into a USB port and tap the key to authenticate, ensuring secure access to web applications listed above. "),h()(),b(79,"hr"),u(80,"footer")(81,"div",18)(82,"a",19),m(83,"Angular"),h(),u(84,"a",20),m(85,"Azure Functions"),h(),u(86,"a",21),m(87,".Net Core"),h(),u(88,"a",22),m(89,"Azure Sql Database"),h(),u(90,"a",23),m(91,"c#"),h(),u(92,"a",24),m(93,"Okta"),h(),u(94,"a",25),m(95,"Ubikey (2FA)"),h(),u(96,"a",26),m(97,"Microsoft Authenticator"),h(),u(98,"a",27),m(99,"Microsoft Graph"),h(),u(100,"a",28),m(101,"Azure Cognitive Services"),h()()()()()()()(),u(102,"footer",29)(103,"div",30)(104,"div",5)(105,"div",6)(106,"p",31),m(107,"Copyright \xA9 2025 "),u(108,"a",32),m(109,"Prolog.Red"),h(),b(110,"img",33),u(111,"span",34),m(112," All Rights Reserved"),h()()()()()())},encapsulation:2})};var fv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-equans"]],standalone:!0,features:[me,le],decls:51,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"AkzoNobel"),h()(),u(13,"div")(14,"p"),m(15," Dutch multinational company which creates paints and performance coatings for both industry and consumers worldwide. Headquartered in Amsterdam, the company has activities in more than 80 countries, and employs over 32,000 people. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"AkzoNobel"),h(),m(20," from 2010 to 2011 as a freelance. This experience provided me the opportunity to contribute to and gain valuable insights from a top-tier company in the industry. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Production Management Template for Microsoft Excel\xAE"),h(),u(28,"span",16),m(29,"EXCEL\xB7TEMPLATE"),h(),m(30," Generator and calculator of production orders. Main features are planning, monitoring, production statistics and reporting. Furthermore the elimination of manual data entry and manual transposition errors improved the process. "),h(),b(31,"p"),h(),u(32,"footer")(33,"div",17)(34,"a",18),m(35,"Excel\xAE VBA"),h(),u(36,"a",19),m(37,"Mainframe"),h(),u(38,"a",20),m(39,"Crystal Reports"),h()()()()()()()(),u(40,"footer",21)(41,"div",22)(42,"div",5)(43,"div",6)(44,"p",23),m(45,"Copyright \xA9 2025 "),u(46,"a",24),m(47,"Prolog.Red"),h(),b(48,"img",25),u(49,"span",26),m(50," All Rights Reserved "),h()()()()()())},encapsulation:2})};var pv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-olympic"]],standalone:!0,features:[me,le],decls:48,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Olympic Committee"),h()(),u(13,"div")(14,"p"),m(15," National Olympic Committee (NOC) that represents the Olympic movement and its values in Belgium. "),h(),u(16,"div",11),m(17," I worked for the "),u(18,"strong"),m(19,"National Olympic Committee"),h(),m(20," from 2011 to 2012 as a freelance. This role allowed me to gain deep insights from a prestigious organization. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Sport Information Management System"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Windows application for recording of individual athlete's profiles for fast and reliable access to information. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Sql Server"),h(),u(35,"a",19),m(36,"Access VBA"),h()()()()()()()(),u(37,"footer",20)(38,"div",21)(39,"div",5)(40,"div",6)(41,"p",22),m(42,"Copyright \xA9 2025 "),u(43,"a",23),m(44,"Prolog.Red"),h(),b(45,"img",24),u(46,"span",25),m(47," All Rights Reserved"),h()()()()()())},encapsulation:2})};var gv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-baxter"]],standalone:!0,features:[me,le],decls:50,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Baxter Belgium"),h()(),u(13,"div")(14,"p"),m(15," American multinational health care company with headquarters in Deerfield, Illinois. The company primarily focuses on products to treat hemophilia, kidney disease, immune disorders and other chronic and acute medical conditions. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Baxter"),h(),m(20," from 2010 to 2011 as a freelance. During this period, I gained valuable insights from a leading pharmaceutical company, known for its impactful advancements in healthcare. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Environment Health Safety (EHS)"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Industrial hygiene and chemical risk management to improve well-being at work. Help reduce time, effort and cost by standardizing and automating processes in order to improve effectiveness and efficiency. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,".Net Framework"),h(),u(35,"a",19),m(36,"Sql Server"),h(),u(37,"a",20),m(38,"VB.Net"),h()()()()()()()(),u(39,"footer",21)(40,"div",22)(41,"div",5)(42,"div",6)(43,"p",23),m(44,"Copyright \xA9 2025 "),u(45,"a",24),m(46,"Prolog.Red"),h(),b(47,"img",25),u(48,"span",26),m(49," All Rights Reserved "),h()()()()()())},encapsulation:2})};var bv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-gsk"]],standalone:!0,features:[me,le],decls:66,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-barcode-scanner",1,"button","hollow-button","tiny-button"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-c-sharp",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Glaxo Smith Kline"),h()(),u(13,"div")(14,"p"),m(15," British multinational pharmaceutical company headquartered in London, England. Established in 2000 by a merger of Glaxo Wellcome and SmithKline Beecham, GSK was the world\u2019s sixth largest pharmaceutical company according to Forbes as of 2019, after Pfizer, Novartis, Roche, Sanofi, and Merck & Co. "),h(),u(16,"div",11),m(17," I worked as a freelance for "),u(18,"strong"),m(19,"Glaxo Smith Kline"),h(),m(20," from 2009 to 2010. During this time, I was able to make significant contributions and acquire valuable insights from this esteemed pharmaceutical company. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Bio Stat"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Scientific data collection and analysis application. The objectives laid down for this program are multiple like the ease of use, the clear presentation of results. All the possible statistical procedures have not been included yet but any such additions are quite simple. "),h(),u(31,"p")(32,"strong"),m(33,"Dynamic Planner"),h(),u(34,"span",16),m(35,"EXCEL\xB7TEMPLATE"),h(),m(36," Template for Microsoft Excel\xAE. Custom made tool allowing order taking of new preparations and their planning on a dynamic schedule covering a full year. Daily, weekly, monthly planner that helps teams to keep well organized. Includes up to 52 weeks on separate worksheets. Designed to be printed on both sides of A3 format with a month on each side. "),h(),u(37,"p")(38,"strong"),m(39,"Tratt Scan"),h(),u(40,"span",16),m(41,"WIN\xB7APP"),h(),m(42," In-house Management Training Courses application updated in 2010 with enhancements and bug fixes. This tool can help teams to stay up-to-date and quickly gain new skills with engaging training modules by connecting users to their every process, policy, and procedure. "),h()(),u(43,"footer")(44,"div",17)(45,"a",18),m(46,".Net Framework"),h(),u(47,"a",19),m(48,"Barcode Scanner"),h(),u(49,"a",20),m(50,"Excel\xAE VBA"),h(),u(51,"a",21),m(52,"Access\xAE VBA"),h(),u(53,"a",22),m(54,"C#"),h()()()()()()()(),u(55,"footer",23)(56,"div",24)(57,"div",5)(58,"div",6)(59,"p",25),m(60,"Copyright \xA9 2025 "),u(61,"a",26),m(62,"Prolog.Red"),h(),b(63,"img",27),u(64,"span",28),m(65," All Rights Reserved "),h()()()()()())},encapsulation:2})};var wv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-labima"]],standalone:!0,features:[me,le],decls:50,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-access-reporting",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Labima"),h()(),u(13,"div")(14,"p"),m(15," Belgian private pharmaceutical laboratory, located in the region of Brussels (Belgium). She ceased her activities in 2016. The objectives of Labima are clear: delivering high quality products and services in a win-win way for our partners and ourselves. "),h(),u(16,"div",11),m(17," I worked at "),u(18,"strong"),m(19,"Labima"),h(),m(20," from 1997 to 1999. During this period, I made significant contributions and gained valuable insights from this dedicated small company. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Sales Representative"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," windows application for monitoring commercial delegates performance. The bi-directional synchronization is done daily. Main features are as follows: recording sales visit data; arranging follow-up calls or visits; route planning between appointments; sales reporting. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Access\xAE VBA"),h(),u(35,"a",19),m(36,"Access\xAE Database"),h(),u(37,"a",20),m(38,"Access\xAE Reporting"),h()()()()()()()(),u(39,"footer",21)(40,"div",22)(41,"div",5)(42,"div",6)(43,"p",23),m(44,"Copyright \xA9 2025 "),u(45,"a",24),m(46,"Prolog.Red"),h(),b(47,"img",25),u(48,"span",26),m(49," All Rights Reserved "),h()()()()()())},encapsulation:2})};var kv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-fib"]],standalone:!0,features:[me,le],decls:88,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-asp-dot-net",1,"button","hollow-button","tiny-button"],["data-open","modal-vb-dot-net",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Fortis Insurance Belgium"),h()(),u(13,"div")(14,"p"),m(15," Belgian insurance company providing life insurance and non-life insurance (auto, fire, accident, hospitalization, civil liability and other) and supplementary pensions. It has been present on the Belgian insurance market since 1824. It targets private individuals, as well as self-employed persons, SMEs and large companies. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Fortis Insurance Belgium"),h(),m(20," from 2000 to 2005 as a freelance. During this time, I acquired profound knowledge from this leading financial institution. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"FinOp"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Financial Operations windows application. Enhancements, bug fixing. "),h(),u(31,"p")(32,"strong"),m(33,"Authentication APIs"),h(),u(34,"span",16),m(35,"MODULE"),h(),m(36," to gain access to internet services. "),h(),u(37,"p")(38,"strong"),m(39,"E-banking Access"),h(),u(40,"span",16),m(41,"MODULE"),h(),m(42," updated in 2002. "),h(),u(43,"p")(44,"strong"),m(45,"Tax Records Management"),h(),u(46,"span",16),m(47,"WIN\xB7APP"),h(),m(48," designed in 2003 for internal use. "),h(),u(49,"p")(50,"strong"),m(51,"Expenses Validation"),h(),u(52,"span",16),m(53,"WEB\xB7APP"),h(),m(54," updated in 2004. "),h(),u(55,"p")(56,"strong"),m(57,"Brokers Bank"),h(),u(58,"span",16),m(59,"WEB\xB7SITE"),h(),m(60," Collaborated closely with a fifteenperson team. "),h()(),u(61,"footer")(62,"div",17)(63,"a",18),m(64,".Net Framework"),h(),u(65,"a",19),m(66,"Visual Basic"),h(),u(67,"a",20),m(68,"ASP.Net"),h(),u(69,"a",21),m(70,"VB.Net"),h(),u(71,"a",22),m(72,"Access\xAE VBA"),h(),u(73,"a",23),m(74,"Mainframe"),h(),u(75,"a",24),m(76,"Digipass"),h()()()()()()()(),u(77,"footer",25)(78,"div",26)(79,"div",5)(80,"div",6)(81,"p",27),m(82,"Copyright \xA9 2025 "),u(83,"a",28),m(84,"Prolog.Red"),h(),b(85,"img",29),u(86,"span",30),m(87," All Rights Reserved"),h()()()()()())},encapsulation:2})};var vv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-equans"]],standalone:!0,features:[me,le],decls:50,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Credit General"),h()(),u(13,"div")(14,"p"),m(15," Now parts of the group CBC (french-speaking branch of the KBC group). Belgian group of international scope, active mainly in Belgium as well as in Central and Eastern Europe. "),h(),u(16,"div",11),m(17," I worked for the "),u(18,"strong"),m(19,"Credit General"),h(),m(20," from 1996 to 1997, gaining extensive expertise and knowledge from this prominent financial institution during that period. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Prospection "),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Windows application designed for the Credit General. Complete module of prospection and qualification of prospects and customers files. Complete history of all actions on prospect/client files and contacts. Complete workflow on appointments management : appointments orders, confirmation of appointments, appointment status by employees, full statistics. Contact file entirely configurable (numbers of columns, column nominations). "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Visual Basic"),h(),u(35,"a",19),m(36,"Access\xAE Database"),h(),u(37,"a",20),m(38,"Crystal Reports"),h()()()()()()()(),u(39,"footer",21)(40,"div",22)(41,"div",5)(42,"div",6)(43,"p",23),m(44,"Copyright \xA9 2025 "),u(45,"a",24),m(46,"Prolog.Red"),h(),b(47,"img",25),u(48,"span",26),m(49," All Rights Reserved"),h()()()()()())},encapsulation:2})};var yv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-engie"]],standalone:!0,features:[me,le],decls:110,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],["data-closable","fade-out",1,"alert","callout"],[1,"text-center"],["data-open","modal-iis",1,"button","hollow-button","tiny-button"],["data-open","modal-virtual-machine",1,"button","hollow-button","tiny-button"],["data-open","modal-aurelia",1,"button","hollow-button","tiny-button"],["data-open","modal-microsoft-graph",1,"button","hollow-button","tiny-button"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-c-sharp",1,"button","hollow-button","tiny-button"],["data-open","modal-okta",1,"button","hollow-button","tiny-button"],["data-open","modal-ubikey",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Engie Solutions"),h()(),u(13,"div")(14,"p"),m(15," Engie Solutions supports cities, industries and tertiary sector companies by providing them with answers to the challenge of the energy transition through turnkey and tailor-made offers. "),h(),u(16,"div",11),m(17," The "),u(18,"strong"),m(19,"Engie group"),h(),m(20," is made up of 71 companies including Transubel (now known as Equans). I worked for them from 2021 to 2022. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Platon"),h(),u(28,"span",16),m(29,"WEB\xB7APP"),h(),m(30," Shuttle Transport Booking application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),h(),u(31,"p")(32,"strong"),m(33,"Transportboek"),h(),u(34,"span",16),m(35,"WEB\xB7APP"),h(),m(36," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),h(),u(37,"p")(38,"strong"),m(39,"Paris"),h(),u(40,"span",16),m(41,"WEB\xB7APP"),h(),m(42," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),h(),u(43,"p")(44,"strong"),m(45,"Gaffe"),h(),u(46,"span",16),m(47,"WEB\xB7APP"),h(),m(48," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),h(),u(49,"div",17)(50,"strong"),m(51,"Launcher"),h(),u(52,"span",16),m(53,"DISCONTINUED"),h(),m(54," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),b(55,"br"),u(56,"strong"),m(57,"Replaced by SharePoint"),h(),u(58,"button",12)(59,"span",13),Ne(),u(60,"svg",14),b(61,"path",15),h()()()(),Oe(),u(62,"p")(63,"code"),m(64,"Okta"),h(),m(65," integration on smartphones to align with modern security standards. This includes the implementation of two-factor authentication (2FA), adding an additional layer of protection. With 2FA, users must provide two forms of identification before accessing the web applications listed above, this significantly bolstering security. "),h(),u(66,"p")(67,"code"),m(68,"Yubikey"),h(),m(69," are used when smartphones are not allowed on certain sites (nuclear power plants). People need an alternative way to authenticate securely. For these situations, we use YubiKey. Which is a physical security key that provides strong authentication without the need for a smartphone. Just plug it into a USB port and tap the key to authenticate, ensuring secure access to web applications listed above. "),h(),u(70,"p")(71,"code"),m(72,"Migration"),h(),m(73," tasks from on-premises infrastructure in Transnubel offices located in Dessel to Azure cloud servers. Implemented effective strategies to ensure seamless transition. "),h(),u(74,"p")(75,"code"),m(76,"Microsoft Graph"),h(),m(77," integration into web applications listed above to manage emails. This integration allows my applications to send emails seamlessly using Microsoft 365 services, enhancing email functionality and improving overall user experience. "),h()(),b(78,"hr"),u(79,"footer")(80,"div",18)(81,"a",19),m(82,"IIS"),h(),u(83,"a",20),m(84,"Virtual Machine"),h(),u(85,"a",21),m(86,"Aurelia"),h(),u(87,"a",22),m(88,"Microsoft Graph"),h(),u(89,"a",23),m(90,".Net Framework"),h(),u(91,"a",24),m(92,"Sql Server"),h(),u(93,"a",25),m(94,"c#"),h(),u(95,"a",26),m(96,"Okta"),h(),u(97,"a",27),m(98,"Ubikey (2FA)"),h()()()()()()()(),u(99,"footer",28)(100,"div",29)(101,"div",5)(102,"div",6)(103,"p",30),m(104,"Copyright \xA9 2025 "),u(105,"a",31),m(106,"Prolog.Red"),h(),b(107,"img",32),u(108,"span",33),m(109,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var _v=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-tott-systems"]],standalone:!0,features:[me,le],decls:76,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-access-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-word-vba",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Tott Systems"),h()(),u(13,"div")(14,"p"),m(15," Belgian private ICT company, located in the region of Brussels (Belgium). She ceased her activities in 2005. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Tott Systems"),h(),m(20," from 1999 to 2001. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Helpdesk"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," solution to streamline IT support processes. Developed features for ticket management, user authentication, and automated responses. Collaborated with cross-functional teams to ensure seamless integration with existing systems "),h(),u(31,"p")(32,"strong"),m(33,"Freight Transport Management"),h(),u(34,"span",16),m(35,"WIN\xB7APP"),h(),m(36," Bug-fixes & added features. "),h(),u(37,"p")(38,"strong"),m(39,"Y2K"),h(),u(40,"span",16),m(41,"FIX"),h(),m(42," developments related & the changeover to the euro currency. "),h(),u(43,"p")(44,"strong"),m(45,"Backup solution"),h(),u(46,"span",16),m(47,"WIN\xB7APP"),h(),m(48," remotely controlled through a phone connection (RDC). "),h(),u(49,"p")(50,"strong"),m(51,"Documentation Automation"),h(),u(52,"span",16),m(53,"WORD PLUGIN"),h(),m(54," solution from source code. "),h()(),u(55,"footer")(56,"div",17)(57,"a",18),m(58,"Visual Basic"),h(),u(59,"a",19),m(60,"Excel\xAE VBA"),h(),u(61,"a",20),m(62,"Access\xAE VBA"),h(),u(63,"a",21),m(64,"Word\xAE VBA"),h()()()()()()()(),u(65,"footer",22)(66,"div",23)(67,"div",5)(68,"div",6)(69,"p",24),m(70,"Copyright \xA9 2025 "),u(71,"a",25),m(72,"Prolog.Red"),h(),b(73,"img",26),u(74,"span",27),m(75,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Cv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-equans"]],standalone:!0,features:[me,le],decls:48,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"copyright"],[1,"text-center"],["data-open","modal-powerbuilder",1,"button","hollow-button","tiny-button"],["data-open","modal-omnis-studio",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"JPass International"),h()(),u(13,"div")(14,"p"),m(15," Belgian private ICT company, located in the region of Brussels (Belgium). she ceased her activities in 2016. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"JPass International"),h(),m(20," from 1997 to 1999. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong")(27,"span",16),m(28,"\xA9"),h(),m(29,"Pollux"),h(),m(30," Material Safety Data Sheets (MSDS) expert software. Manage transport documents and security documents related to chemicals. Users can easily search and print SDS\u2019s for all of the chemicals they work with. Software used by clients like Petrofina, Texaco and Total to name a few. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"PowerBuilder"),h(),u(35,"a",19),m(36,"Omnis Studio"),h()()()()()()()(),u(37,"footer",20)(38,"div",16)(39,"div",5)(40,"div",6)(41,"p",21),m(42,"Copyright \xA9 2025 "),u(43,"a",22),m(44,"Prolog.Red"),h(),b(45,"img",23),u(46,"span",24),m(47,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Ev=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-sopres"]],standalone:!0,features:[me,le],decls:48,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Sopres"),h()(),u(13,"div")(14,"p"),m(15," A consumer-oriented marketing data specialist. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Sopres"),h(),m(20," from 1999 to 2000. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Rental Mailing List"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," software designed with IT and business collaboration in mind. The software's capability to handle various kinds of queries according to the business requirements. Helps minimize human error and offers a secure way for all users to access and utilize data. Help identify and fill gaps in missing information, and decrease redundancy. Easy-to-use and intuitive interface so that even your non-technical staff can use it. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Visual Basic"),h(),u(35,"a",19),m(36,"Mainframe"),h()()()()()()()(),u(37,"footer",20)(38,"div",21)(39,"div",5)(40,"div",6)(41,"p",22),m(42,"Copyright \xA9 2025 "),u(43,"a",23),m(44,"Prolog.Red"),h(),b(45,"img",24),u(46,"span",25),m(47,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Sv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-tplan"]],standalone:!0,features:[me,le],decls:48,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-autocad-api",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"TPlan"),h()(),u(13,"div")(14,"p"),m(15," Continued the development of the test management tool, for testing of the dematerialisation of share certificates project. The solution was ensuring that programs of critical importance to the UK and Global economy were developed, tested and launched successfully. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"TPlan"),h(),m(20," from 1999 to 2000. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Geographic Information System (GIS)"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," Windows application used to establish routes for placement of optic fibers in the ground. The software integrate Autocad maps (dwg) for mapping. Modulation and structuration of spatial data. Complete toolbox (plot, lines, curves, shapes, adding annotations, etc\u2026). "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Visual Basic"),h(),u(35,"a",19),m(36,"Autocad API"),h()()()()()()()(),u(37,"footer",20)(38,"div",21)(39,"div",5)(40,"div",6)(41,"p",22),m(42,"Copyright \xA9 2025 "),u(43,"a",23),m(44,"Prolog.Red"),h(),b(45,"img",24),u(46,"span",25),m(47,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var xv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-transnubel"]],standalone:!0,features:[me,le],decls:83,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-dot-net-framework",1,"button","hollow-button","tiny-button"],["data-open","modal-sql-server",1,"button","hollow-button","tiny-button"],["data-open","modal-digipass",1,"button","hollow-button","tiny-button"],["data-open","modal-rfid-scanner",1,"button","hollow-button","tiny-button"],["data-open","modal-on-premise",1,"button","hollow-button","tiny-button"],["data-open","modal-c-sharp",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Transnubel"),h()(),u(13,"div")(14,"p"),m(15," Highly integrated solutions provider for the nuclear sector. They coordinate all the activities in Belgium and abroad from the headquarters in the Belgian town of Dessel. "),h(),u(16,"div",11)(17,"strong"),m(18,"Transnubel"),h(),m(19," (now known as Equans) is linked to the "),u(20,"strong"),m(21,"ENGIE group"),h(),m(22," made up of 71 companies. "),u(23,"button",12)(24,"span",13),Ne(),u(25,"svg",14),b(26,"path",15),h()()()(),Oe(),u(27,"p")(28,"strong"),m(29,"Platon"),h(),u(30,"span",16),m(31,"WEB\xB7APP"),h(),m(32," Shuttle Transport Booking application. An intuitive application designed to streamline the booking and management of shuttle transportation services. This application offers a user-friendly interface and robust features for managing non nuclear transports. With options to view schedules, make reservations, it simplifies the entire process, making it efficient and hassle-free. "),h(),u(33,"p")(34,"strong"),m(35,"Transportboek"),h(),u(36,"span",16),m(37,"WEB\xB7APP"),h(),m(38," Transport Management System (TMS) designed for the management and planning of nuclear transport. The system features a modular design, including modules for billing, permissions, and transportation. It also supports planning and operational monitoring of transportation activities. Initially built in 2005 and has since undergone continuous improvements, culminating in the release of a new web-based version. "),h(),u(39,"p")(40,"strong"),m(41,"Paris"),h(),u(42,"span",16),m(43,"WEB\xB7APP"),h(),m(44," Acronym for Packing Registration and Identification Software. Web-based application for monitoring industrial packages. The initial version of this application was developed in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Currently, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards and includes 2-factor authentication for enhanced security. "),h(),u(45,"p")(46,"strong"),m(47,"Gaffe"),h(),u(48,"span",16),m(49,"WEB\xB7APP"),h(),m(50," Enterprise Content Management (ECM) software developed to manage the organization's documents, aiming to eliminate dependence on paper. The initial version was created in 2006 as a Windows thick client. Since then, it has undergone numerous updates and optimizations. Today, it is used at Equans as an internet-facing application. The security layer has been upgraded to meet modern standards, including 2-factor authentication for enhanced security. "),h(),u(51,"p")(52,"strong"),m(53,"Launcher"),h(),u(54,"span",16),m(55,"WEB\xB7APP"),h(),m(56," Intranet web application for internal messaging, designed to facilitate secure and efficient communication within the organization. This web app enables real-time messaging, file sharing, and collaboration, significantly enhancing internal communication and operational efficiency. It features a user-friendly interface, and ensures all communication remains private and secure within the company's network. "),h()(),b(57,"hr"),u(58,"footer")(59,"div",17)(60,"a",18),m(61,".Net Framework"),h(),u(62,"a",19),m(63,"Sql Server"),h(),u(64,"a",20),m(65,"Digipass"),h(),u(66,"a",21),m(67,"RFID Scanner"),h(),u(68,"a",22),m(69,"On premise"),h(),u(70,"a",23),m(71,"C#"),h()()()()()()()(),u(72,"footer",24)(73,"div",25)(74,"div",5)(75,"div",6)(76,"p",26),m(77,"Copyright \xA9 2025 "),u(78,"a",27),m(79,"Prolog.Red"),h(),b(80,"img",28),u(81,"span",29),m(82,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Av=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-schenk"]],standalone:!0,features:[me,le],decls:50,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"badge"],[1,"text-center"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],["data-open","modal-access-database",1,"button","hollow-button","tiny-button"],["data-open","modal-crystal-reports",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Schenk"),h()(),u(13,"div")(14,"p"),m(15," Wine merchant on a European scale. After more than a century, the Schenk group is present in Switzerland, France, Italy, Spain, Germany, Benelux and Great Britain. The group's steady expansion is combined with a policy of major investments in vineyards as well as in recent equipment and techniques for wine cellars and bottling lines. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Schenk"),h(),m(20," from 1996 to 1997. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p")(26,"strong"),m(27,"Stock Management System"),h(),u(28,"span",16),m(29,"WIN\xB7APP"),h(),m(30," with statistics and reports. Complete stock control over multiple warehouses and locations. Overview of stock data, minimal quantities and expiring items. Useful insights into profit, sales and stock supply. Simplify and speed up the process from quote to delivery and final invoice. "),h()(),u(31,"footer")(32,"div",17)(33,"a",18),m(34,"Visual Basic"),h(),u(35,"a",19),m(36,"Access\xAE Database"),h(),u(37,"a",20),m(38,"Crystal Reports"),h()()()()()()()(),u(39,"footer",21)(40,"div",22)(41,"div",5)(42,"div",6)(43,"p",23),m(44,"Copyright \xA9 2025 "),u(45,"a",24),m(46,"Prolog.Red"),h(),b(47,"img",25),u(48,"span",26),m(49,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Tv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-coca-cola"]],standalone:!0,features:[me,le],decls:46,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"text-center"],["data-open","modal-excel-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-mainframe",1,"button","hollow-button","tiny-button"],["data-open","modal-visual-basic",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Coca-Cola"),h()(),u(13,"div")(14,"p"),m(15," American multinational beverage corporation incorporated under Delaware\u2019s General Corporation Law and headquartered in Atlanta, Georgia. The Coca-Cola Company has interests in the manufacturing, retailing, and marketing of nonalcoholic beverage concentrates and syrups. The company produces Coca-Cola, invented in 1886 by pharmacist John Stith Pemberton. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Coca-Cola"),h(),m(20," from 1998 to 1999. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p"),m(26," Y2K millennium bug \u25CF Transition to the Euro \u25CF Excel Macros migration to interrogate a server mainframe-based \u25CF SQL queries dynamically generated. "),h()(),u(27,"footer")(28,"div",16)(29,"a",17),m(30,"Excel\xAE VBA"),h(),u(31,"a",18),m(32,"Mainframe"),h(),u(33,"a",19),m(34,"Visual Basic"),h()()()()()()()(),u(35,"footer",20)(36,"div",21)(37,"div",5)(38,"div",6)(39,"p",22),m(40,"Copyright \xA9 2025 "),u(41,"a",23),m(42,"Prolog.Red"),h(),b(43,"img",24),u(44,"span",25),m(45,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var Iv=class n extends Ce{constructor(){super()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-kjs"]],standalone:!0,features:[me,le],decls:46,vars:0,consts:[["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],["data-closable","fade-out",1,"success","callout"],["aria-label","Dismiss alert","type","button","data-close","",1,"close-button"],["aria-hidden","true"],["xmlns","http://www.w3.org/2000/svg","width","13","height","13","viewBox","0 0 3.44 3.44"],["fill","#000","fill-rule","evenodd","d","M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z","clip-rule","evenodd"],[1,"text-center"],["data-open","modal-outlook-vba",1,"button","hollow-button","tiny-button"],["data-open","modal-outlook-form",1,"button","hollow-button","tiny-button"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],[1,"date"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),b(3,"img",3),h()(),u(4,"div",4)(5,"div",5)(6,"div",6)(7,"article",7)(8,"a",8),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(9,"img",9),h(),u(10,"header")(11,"h1",10),m(12,"Kraft Jacobs Suchard"),h()(),u(13,"div")(14,"p"),m(15," Now belongs to group Kraft Foods which is an American food manufacturing. "),h(),u(16,"div",11),m(17," I worked for "),u(18,"strong"),m(19,"Kraft Jacobs Suchard"),h(),m(20," from 1998 to 1999. "),u(21,"button",12)(22,"span",13),Ne(),u(23,"svg",14),b(24,"path",15),h()()()(),Oe(),u(25,"p"),m(26," European Survey on sales performance. Electronic forms dispatched via Outlook in order to collect information. Serves as an indicator of the country\u2019s statistical performance. "),h()(),u(27,"footer")(28,"div",16)(29,"a",17),m(30,"Outlook\xAE VBA"),h(),u(31,"a",18),m(32,"Outlook\xAE Form"),h()()()()()()()(),u(33,"footer",19)(34,"div",20)(35,"div",5)(36,"div",6)(37,"p",21),m(38,"Copyright \xA9 "),b(39,"span",22),m(40,"2025 "),u(41,"a",23),m(42,"Prolog.Red"),h(),b(43,"img",24),u(44,"span",25),m(45,"All Rights Reserved"),h()()()()()())},encapsulation:2})};var kF=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(i){return new(i||n)(Ge(eu),Ge(Zi))}}static{this.\u0275dir=Ti({type:n})}}return n})(),_X=(()=>{class n extends kF{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Io(n)))(o||n)}})()}static{this.\u0275dir=Ti({type:n,features:[me]})}}return n})(),Nv=new Z("");var CX={provide:Nv,useExisting:zl(()=>Ov),multi:!0};function EX(){let n=ir()?ir().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var SX=new Z(""),Ov=(()=>{class n extends kF{constructor(t,i,o){super(t,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!EX())}writeValue(t){let i=t??"";this.setProperty("value",i)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(i){return new(i||n)(Ge(eu),Ge(Zi),Ge(SX,8))}}static{this.\u0275dir=Ti({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&R("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[gf([CX]),me]})}}return n})();var xX=new Z(""),AX=new Z("");function vF(n){return n!=null}function yF(n){return jl(n)?Ke(n):n}function _F(n){let e={};return n.forEach(t=>{e=t!=null?v(v({},e),t):e}),Object.keys(e).length===0?null:e}function CF(n,e){return e.map(t=>t(n))}function TX(n){return!n.validate}function EF(n){return n.map(e=>TX(e)?e:t=>e.validate(t))}function IX(n){if(!n)return null;let e=n.filter(vF);return e.length==0?null:function(t){return _F(CF(t,e))}}function SF(n){return n!=null?IX(EF(n)):null}function MX(n){if(!n)return null;let e=n.filter(vF);return e.length==0?null:function(t){let i=CF(t,e).map(yF);return U1(i).pipe(he(_F))}}function xF(n){return n!=null?MX(EF(n)):null}function hF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function DX(n){return n._rawValidators}function PX(n){return n._rawAsyncValidators}function sT(n){return n?Array.isArray(n)?n:[n]:[]}function Dv(n,e){return Array.isArray(n)?n.includes(e):n===e}function mF(n,e){let t=sT(e);return sT(n).forEach(o=>{Dv(t,o)||t.push(o)}),t}function fF(n,e){return sT(e).filter(t=>!Dv(n,t))}var Pv=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=SF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},aT=class extends Pv{get formDirective(){return null}get path(){return null}},sg=class extends Pv{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},lT=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},RX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},jVe=I(v({},RX),{"[class.ng-submitted]":"isSubmitted"}),AF=(()=>{class n extends lT{constructor(t){super(t)}static{this.\u0275fac=function(i){return new(i||n)(Ge(sg,2))}}static{this.\u0275dir=Ti({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&uf("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[me]})}}return n})();var ng="VALID",Mv="INVALID",gh="PENDING",ig="DISABLED",wh=class{},Rv=class extends wh{constructor(e,t){super(),this.value=e,this.source=t}},og=class extends wh{constructor(e,t){super(),this.pristine=e,this.source=t}},rg=class extends wh{constructor(e,t){super(),this.touched=e,this.source=t}},bh=class extends wh{constructor(e,t){super(),this.status=e,this.source=t}};function NX(n){return(Lv(n)?n.validators:n)||null}function OX(n){return Array.isArray(n)?SF(n):n||null}function LX(n,e){return(Lv(e)?e.asyncValidators:n)||null}function FX(n){return Array.isArray(n)?xF(n):n||null}function Lv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var cT=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=d0(()=>this.statusReactive()),this.statusReactive=n0(void 0),this._pristine=d0(()=>this.pristineReactive()),this.pristineReactive=n0(!0),this._touched=d0(()=>this.touchedReactive()),this.touchedReactive=n0(!1),this._events=new At,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return na(this.statusReactive)}set status(e){na(()=>this.statusReactive.set(e))}get valid(){return this.status===ng}get invalid(){return this.status===Mv}get pending(){return this.status==gh}get disabled(){return this.status===ig}get enabled(){return this.status!==ig}get pristine(){return na(this.pristineReactive)}set pristine(e){na(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return na(this.touchedReactive)}set touched(e){na(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(mF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(fF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(fF(e,this._rawAsyncValidators))}hasValidator(e){return Dv(this._rawValidators,e)}hasAsyncValidator(e){return Dv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(I(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new rg(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),t&&e.emitEvent!==!1&&this._events.next(new rg(!1,i))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(I(v({},e),{sourceControl:i})),t&&e.emitEvent!==!1&&this._events.next(new og(!1,i))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),t&&e.emitEvent!==!1&&this._events.next(new og(!0,i))}markAsPending(e={}){this.status=gh;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bh(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(I(v({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ig,this.errors=null,this._forEachChild(o=>{o.disable(I(v({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rv(this.value,i)),this._events.next(new bh(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(I(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ng,this._forEachChild(i=>{i.enable(I(v({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(I(v({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ng||this.status===gh)&&this._runAsyncValidator(i,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rv(this.value,t)),this._events.next(new bh(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(I(v({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ig:ng}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=gh,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let i=yF(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,o)=>i&&i._find(o),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new bh(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,i)}_initObservables(){this.valueChanges=new bt,this.statusChanges=new bt}_calculateStatus(){return this._allControlsDisabled()?ig:this.errors?Mv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gh)?gh:this._anyControlsHaveStatus(Mv)?Mv:ng}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let i=!this._anyControlsDirty(),o=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new og(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new rg(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Lv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=FX(this._rawAsyncValidators)}};var TF=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>dT}),dT="always";function VX(n,e){return[...e.path,n]}function BX(n,e,t=dT){HX(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),UX(n,e),$X(n,e),jX(n,e),zX(n,e)}function pF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function zX(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function HX(n,e){let t=DX(n);e.validator!==null?n.setValidators(hF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=PX(n);e.asyncValidator!==null?n.setAsyncValidators(hF(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let o=()=>n.updateValueAndValidity();pF(e._rawValidators,o),pF(e._rawAsyncValidators,o)}function UX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&IF(n,e)})}function jX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&IF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function IF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $X(n,e){let t=(i,o)=>{e.valueAccessor.writeValue(i),o&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function WX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function qX(n){return Object.getPrototypeOf(n.constructor)===_X}function GX(n,e){if(!e)return null;Array.isArray(e);let t,i,o;return e.forEach(r=>{r.constructor===Ov?t=r:qX(r)?i=r:o=r}),o||i||t||null}function gF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function bF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var KX=class extends cT{constructor(e=null,t,i){super(NX(t),LX(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Lv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(bF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){bF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var QX={provide:sg,useExisting:zl(()=>uT)},wF=Promise.resolve(),uT=(()=>{class n extends sg{constructor(t,i,o,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new KX,this._registered=!1,this.name="",this.update=new bt,this._parent=t,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=GX(this,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),WX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){BX(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){wF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let i=t.isDisabled.currentValue,o=i!==0&&c0(i);wF.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?VX(t,this._parent):[t]}static{this.\u0275fac=function(i){return new(i||n)(Ge(aT,9),Ge(xX,10),Ge(AX,10),Ge(Nv,10),Ge($l,8),Ge(TF,8))}}static{this.\u0275dir=Ti({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[gf([QX]),me,Zs]})}}return n})();var YX=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=fi({type:n})}static{this.\u0275inj=mi({})}}return n})();var kh=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:TF,useValue:t.callSetDisabledState??dT}]}}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=fi({type:n})}static{this.\u0275inj=mi({imports:[YX]})}}return n})();var Rn=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function MF(){let[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+Rn[n>>0&255]+Rn[n>>8&255]+Rn[n>>16&255]+Rn[n>>24&255]+Rn[e>>0&255]+Rn[e>>8&255]+Rn[e>>16&255]+Rn[e>>24&255]+Rn[t>>0&255]+Rn[t>>8&255]+Rn[t>>16&255]+Rn[t>>24&255]+Rn[i>>0&255]+Rn[i>>8&255]+Rn[i>>16&255]+Rn[i>>24&255]}function JX(n,e){}var hT="Lock from Angular integration (@ckeditor/ckeditor5-angular)",DF=(()=>{class n{elementRef;editor;config={};data="";tagName="div";watchdog;editorWatchdogConfig;disableTwoWayDataBinding=!1;set disabled(t){this.setDisabledState(t)}get disabled(){return this.editorInstance?this.editorInstance.isReadOnly:this.initiallyDisabled}ready=new bt;change=new bt;blur=new bt;focus=new bt;error=new bt;get editorInstance(){let t=this.editorWatchdog;return this.watchdog&&(t=this.watchdog._watchdogs.get(this.id)),t?t.editor:null}editorWatchdog;initiallyDisabled=!1;ngZone;cvaOnChange;cvaOnTouched;editorElement;isEditorSettingData=!1;id=MF();getId(){return this.id}constructor(t,i){this.ngZone=i,this.elementRef=t,this.checkVersion()}checkVersion(){let{CKEDITOR_VERSION:t}=window;if(!t)return console.warn('Cannot find the "CKEDITOR_VERSION" in the "window" scope.');let[i]=t.split(".").map(Number);i>=42||t.startsWith("0.0.0")||console.warn("The <CKEditor> component requires using CKEditor 5 in version 42+ or nightly build.")}ngOnChanges(t){Object.prototype.hasOwnProperty.call(t,"data")&&t.data&&!t.data.isFirstChange()&&this.writeValue(t.data.currentValue)}ngAfterViewInit(){this.attachToWatchdog()}ngOnDestroy(){return E(this,null,function*(){this.watchdog?yield this.watchdog.remove(this.id):this.editorWatchdog&&this.editorWatchdog.editor&&(yield this.editorWatchdog.destroy(),this.editorWatchdog=void 0)})}writeValue(t){t===null&&(t=""),this.editorInstance?(this.isEditorSettingData=!0,this.editorInstance.data.set(t),this.isEditorSettingData=!1):(this.data=t,this.ready.pipe(Gi()).subscribe(i=>{i.data.set(this.data)}))}registerOnChange(t){this.cvaOnChange=t}registerOnTouched(t){this.cvaOnTouched=t}setDisabledState(t){this.editorInstance&&(t?this.editorInstance.enableReadOnlyMode(hT):this.editorInstance.disableReadOnlyMode(hT)),this.initiallyDisabled=t}attachToWatchdog(){let t=(a,l)=>this.ngZone.runOutsideAngular(()=>E(this,null,function*(){this.elementRef.nativeElement.appendChild(a);let c=yield this.editor.create(a,l);return this.initiallyDisabled&&c.enableReadOnlyMode(hT),this.ngZone.run(()=>{this.ready.emit(c)}),this.setUpEditorEvents(c),c})),i=a=>E(this,null,function*(){yield a.destroy(),this.elementRef.nativeElement.removeChild(this.editorElement)}),o=a=>{XX(this.error)&&this.ngZone.run(()=>this.error.emit(a))},r=document.createElement(this.tagName),s=this.getConfig();if(this.editorElement=r,this.watchdog)this.watchdog.add({id:this.id,type:"editor",creator:t,destructor:i,sourceElementOrData:r,config:s}).catch(a=>{o(a)}),this.watchdog.on("itemError",(a,{itemId:l})=>{l===this.id&&o()});else{let a=new this.editor.EditorWatchdog(this.editor,this.editorWatchdogConfig);a.setCreator(t),a.setDestructor(i),a.on("error",o),this.editorWatchdog=a,this.ngZone.runOutsideAngular(()=>{a.create(r,s).catch(l=>{o(l)})})}}getConfig(){if(this.data&&this.config.initialData)throw new Error("Editor data should be provided either using `config.initialData` or `data` properties.");let t=v({},this.config),i=this.config.initialData||this.data;return i&&(t.initialData=i),t}setUpEditorEvents(t){let i=t.model.document,o=t.editing.view.document;i.on("change:data",r=>{this.ngZone.run(()=>{if(!this.disableTwoWayDataBinding){if(this.cvaOnChange&&!this.isEditorSettingData){let s=t.data.get();this.cvaOnChange(s)}this.change.emit({event:r,editor:t})}})}),o.on("focus",r=>{this.ngZone.run(()=>{this.focus.emit({event:r,editor:t})})}),o.on("blur",r=>{this.ngZone.run(()=>{this.cvaOnTouched&&this.cvaOnTouched(),this.blur.emit({event:r,editor:t})})})}static \u0275fac=function(i){return new(i||n)(Ge(Zi),Ge(ot))};static \u0275cmp=ne({type:n,selectors:[["ckeditor"]],inputs:{editor:"editor",config:"config",data:"data",tagName:"tagName",watchdog:"watchdog",editorWatchdogConfig:"editorWatchdogConfig",disableTwoWayDataBinding:"disableTwoWayDataBinding",disabled:"disabled"},outputs:{ready:"ready",change:"change",blur:"blur",focus:"focus",error:"error"},features:[gf([{provide:Nv,useExisting:zl(()=>n),multi:!0}]),Zs],decls:1,vars:0,template:function(i,o){i&1&&Ii(0,JX,0,0,"ng-template")},encapsulation:2})}return n})();function XX(n){return n.observed||n.observers.length>0}var PF=(()=>{class n{static \u0275fac=function(i){return new(i||n)};static \u0275mod=fi({type:n});static \u0275inj=mi({imports:[kh,Ji]})}return n})();var Ra={production:!1,apiUrl:"http://localhost:7071/api/",msalConfig:{auth:{clientId:"175fef89-c02f-4e52-bbfe-426af94dee83",authority:"https://login.microsoftonline.com/f4f321ee-5728-48e6-85f7-62dc63501868"}},apiConfig:{scopes:["User.Read"],uri:"http://localhost:7071/api/"}};var Bc=tk.namespace("PostDataService").seal(),Na=class n{constructor(e){this.http=e}baseUrl=Ra.apiUrl;basePostUrl=this.baseUrl+"posts";getPosts(){return this.http.get(this.basePostUrl).pipe(at(()=>Bc.label("getPosts").info("Posts fetched successfully")),he(e=>e),bn(this.handleError))}getPostById(e){return this.http.get(this.basePostUrl+"/id/"+e).pipe(at(()=>Bc.label("getPostById").info(`post id ${e} fetched successfully`)),bn(this.handleError))}getPostBySlug(e){return this.http.get(this.basePostUrl+"/slug/"+e).pipe(at(()=>Bc.label("getPostBySlug").info(`post ${e} fetched successfully`)),bn(this.handleError))}insertPost(e){return this.http.post(this.basePostUrl,e).pipe(at(t=>Bc.label("insertPost").info("status: "+t.status)),he(t=>t.post),bn(this.handleError))}updatePost(e){return this.http.put(this.basePostUrl+"/"+e.id,e).pipe(at(t=>Bc.label("updatePost").info("Backend response status: "+t.status,t)),he(t=>t.post),bn(this.handleError))}deletePost(e){return this.http.delete(this.basePostUrl+"/"+e).pipe(at(()=>Bc.label("deletePost").info(`post id ${e} deleted successfully`)),bn(this.handleError))}handleError(e){if(Bc.label("handleError").error("server error:",e),e.error instanceof Error){let t=e.error.message;return Lr(()=>new Error(t))}return Lr(()=>new Error(e.message||"Node.js server error"))}static \u0275fac=function(t){return new(t||n)($(_S))};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var vh=class n{alertRequest=new Sl;alertRequest$=this.alertRequest.asObservable();constructor(){}showAlert(e){this.alertRequest.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=G({token:n,factory:n.\u0275fac,providedIn:"root"})};var nee=typeof global=="object"&&global&&global.Object===Object&&global,Fv=nee;var iee=typeof self=="object"&&self&&self.Object===Object&&self,oee=Fv||iee||Function("return this")(),Ut=oee;var ree=Ut.Symbol,Jn=ree;var RF=Object.prototype,see=RF.hasOwnProperty,aee=RF.toString,ag=Jn?Jn.toStringTag:void 0;function lee(n){var e=see.call(n,ag),t=n[ag];try{n[ag]=void 0;var i=!0}catch{}var o=aee.call(n);return i&&(e?n[ag]=t:delete n[ag]),o}var NF=lee;var cee=Object.prototype,dee=cee.toString;function uee(n){return dee.call(n)}var OF=uee;var hee="[object Null]",mee="[object Undefined]",LF=Jn?Jn.toStringTag:void 0;function fee(n){return n==null?n===void 0?mee:hee:LF&&LF in Object(n)?NF(n):OF(n)}var Xn=fee;function pee(n){return n!=null&&typeof n=="object"}var Lt=pee;var gee="[object Symbol]";function bee(n){return typeof n=="symbol"||Lt(n)&&Xn(n)==gee}var Oa=bee;function wee(n,e){for(var t=-1,i=n==null?0:n.length,o=Array(i);++t<i;)o[t]=e(n[t],t,n);return o}var FF=wee;var kee=Array.isArray,Mt=kee;var vee=1/0,VF=Jn?Jn.prototype:void 0,BF=VF?VF.toString:void 0;function zF(n){if(typeof n=="string")return n;if(Mt(n))return FF(n,zF)+"";if(Oa(n))return BF?BF.call(n):"";var e=n+"";return e=="0"&&1/n==-vee?"-0":e}var HF=zF;var yee=/\s/;function _ee(n){for(var e=n.length;e--&&yee.test(n.charAt(e)););return e}var UF=_ee;var Cee=/^\s+/;function Eee(n){return n&&n.slice(0,UF(n)+1).replace(Cee,"")}var jF=Eee;function See(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var De=See;var $F=NaN,xee=/^[-+]0x[0-9a-f]+$/i,Aee=/^0b[01]+$/i,Tee=/^0o[0-7]+$/i,Iee=parseInt;function Mee(n){if(typeof n=="number")return n;if(Oa(n))return $F;if(De(n)){var e=typeof n.valueOf=="function"?n.valueOf():n;n=De(e)?e+"":e}if(typeof n!="string")return n===0?n:+n;n=jF(n);var t=Aee.test(n);return t||Tee.test(n)?Iee(n.slice(2),t?2:8):xee.test(n)?$F:+n}var mT=Mee;function Dee(n){return n}var yh=Dee;var Pee="[object AsyncFunction]",Ree="[object Function]",Nee="[object GeneratorFunction]",Oee="[object Proxy]";function Lee(n){if(!De(n))return!1;var e=Xn(n);return e==Ree||e==Nee||e==Pee||e==Oee}var Fi=Lee;var Fee=Ut["__core-js_shared__"],Vv=Fee;var WF=function(){var n=/[^.]+$/.exec(Vv&&Vv.keys&&Vv.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Vee(n){return!!WF&&WF in n}var qF=Vee;var Bee=Function.prototype,zee=Bee.toString;function Hee(n){if(n!=null){try{return zee.call(n)}catch{}try{return n+""}catch{}}return""}var ys=Hee;var Uee=/[\\^$.*+?()[\]{}|]/g,jee=/^\[object .+?Constructor\]$/,$ee=Function.prototype,Wee=Object.prototype,qee=$ee.toString,Gee=Wee.hasOwnProperty,Kee=RegExp("^"+qee.call(Gee).replace(Uee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qee(n){if(!De(n)||qF(n))return!1;var e=Fi(n)?Kee:jee;return e.test(ys(n))}var GF=Qee;function Yee(n,e){return n?.[e]}var KF=Yee;function Zee(n,e){var t=KF(n,e);return GF(t)?t:void 0}var vi=Zee;var Jee=vi(Ut,"WeakMap"),Bv=Jee;var QF=Object.create,Xee=function(){function n(){}return function(e){if(!De(e))return{};if(QF)return QF(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),YF=Xee;function ete(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var ZF=ete;function tte(n,e){var t=-1,i=n.length;for(e||(e=Array(i));++t<i;)e[t]=n[t];return e}var zv=tte;var nte=800,ite=16,ote=Date.now;function rte(n){var e=0,t=0;return function(){var i=ote(),o=ite-(i-t);if(t=i,o>0){if(++e>=nte)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var JF=rte;function ste(n){return function(){return n}}var XF=ste;var ate=function(){try{var n=vi(Object,"defineProperty");return n({},"",{}),n}catch{}}(),_h=ate;var lte=_h?function(n,e){return _h(n,"toString",{configurable:!0,enumerable:!1,value:XF(e),writable:!0})}:yh,eV=lte;var cte=JF(eV),tV=cte;function dte(n,e){for(var t=-1,i=n==null?0:n.length;++t<i&&e(n[t],t,n)!==!1;);return n}var nV=dte;var ute=9007199254740991,hte=/^(?:0|[1-9]\d*)$/;function mte(n,e){var t=typeof n;return e=e??ute,!!e&&(t=="number"||t!="symbol"&&hte.test(n))&&n>-1&&n%1==0&&n<e}var La=mte;function fte(n,e,t){e=="__proto__"&&_h?_h(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Fa=fte;function pte(n,e){return n===e||n!==n&&e!==e}var wr=pte;var gte=Object.prototype,bte=gte.hasOwnProperty;function wte(n,e,t){var i=n[e];(!(bte.call(n,e)&&wr(i,t))||t===void 0&&!(e in n))&&Fa(n,e,t)}var Ch=wte;function kte(n,e,t,i){var o=!t;t||(t={});for(var r=-1,s=e.length;++r<s;){var a=e[r],l=i?i(t[a],n[a],a,t,n):void 0;l===void 0&&(l=n[a]),o?Fa(t,a,l):Ch(t,a,l)}return t}var ro=kte;var iV=Math.max;function vte(n,e,t){return e=iV(e===void 0?n.length-1:e,0),function(){for(var i=arguments,o=-1,r=iV(i.length-e,0),s=Array(r);++o<r;)s[o]=i[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=i[o];return a[e]=t(s),ZF(n,this,a)}}var oV=vte;function yte(n,e){return tV(oV(n,e,yh),n+"")}var rV=yte;var _te=9007199254740991;function Cte(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=_te}var Eh=Cte;function Ete(n){return n!=null&&Eh(n.length)&&!Fi(n)}var Va=Ete;function Ste(n,e,t){if(!De(t))return!1;var i=typeof e;return(i=="number"?Va(t)&&La(e,t.length):i=="string"&&e in t)?wr(t[e],n):!1}var sV=Ste;function xte(n){return rV(function(e,t){var i=-1,o=t.length,r=o>1?t[o-1]:void 0,s=o>2?t[2]:void 0;for(r=n.length>3&&typeof r=="function"?(o--,r):void 0,s&&sV(t[0],t[1],s)&&(r=o<3?void 0:r,o=1),e=Object(e);++i<o;){var a=t[i];a&&n(e,a,i,r)}return e})}var Sh=xte;var Ate=Object.prototype;function Tte(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Ate;return n===t}var xh=Tte;function Ite(n,e){for(var t=-1,i=Array(n);++t<n;)i[t]=e(t);return i}var aV=Ite;var Mte="[object Arguments]";function Dte(n){return Lt(n)&&Xn(n)==Mte}var fT=Dte;var lV=Object.prototype,Pte=lV.hasOwnProperty,Rte=lV.propertyIsEnumerable,Nte=fT(function(){return arguments}())?fT:function(n){return Lt(n)&&Pte.call(n,"callee")&&!Rte.call(n,"callee")},zc=Nte;function Ote(){return!1}var cV=Ote;var hV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dV=hV&&typeof module=="object"&&module&&!module.nodeType&&module,Lte=dV&&dV.exports===hV,uV=Lte?Ut.Buffer:void 0,Fte=uV?uV.isBuffer:void 0,Vte=Fte||cV,_s=Vte;var Bte="[object Arguments]",zte="[object Array]",Hte="[object Boolean]",Ute="[object Date]",jte="[object Error]",$te="[object Function]",Wte="[object Map]",qte="[object Number]",Gte="[object Object]",Kte="[object RegExp]",Qte="[object Set]",Yte="[object String]",Zte="[object WeakMap]",Jte="[object ArrayBuffer]",Xte="[object DataView]",ene="[object Float32Array]",tne="[object Float64Array]",nne="[object Int8Array]",ine="[object Int16Array]",one="[object Int32Array]",rne="[object Uint8Array]",sne="[object Uint8ClampedArray]",ane="[object Uint16Array]",lne="[object Uint32Array]",Ct={};Ct[ene]=Ct[tne]=Ct[nne]=Ct[ine]=Ct[one]=Ct[rne]=Ct[sne]=Ct[ane]=Ct[lne]=!0;Ct[Bte]=Ct[zte]=Ct[Jte]=Ct[Hte]=Ct[Xte]=Ct[Ute]=Ct[jte]=Ct[$te]=Ct[Wte]=Ct[qte]=Ct[Gte]=Ct[Kte]=Ct[Qte]=Ct[Yte]=Ct[Zte]=!1;function cne(n){return Lt(n)&&Eh(n.length)&&!!Ct[Xn(n)]}var mV=cne;function dne(n){return function(e){return n(e)}}var Ah=dne;var fV=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lg=fV&&typeof module=="object"&&module&&!module.nodeType&&module,une=lg&&lg.exports===fV,pT=une&&Fv.process,hne=function(){try{var n=lg&&lg.require&&lg.require("util").types;return n||pT&&pT.binding&&pT.binding("util")}catch{}}(),Cs=hne;var pV=Cs&&Cs.isTypedArray,mne=pV?Ah(pV):mV,Th=mne;var fne=Object.prototype,pne=fne.hasOwnProperty;function gne(n,e){var t=Mt(n),i=!t&&zc(n),o=!t&&!i&&_s(n),r=!t&&!i&&!o&&Th(n),s=t||i||o||r,a=s?aV(n.length,String):[],l=a.length;for(var c in n)(e||pne.call(n,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||r&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||La(c,l)))&&a.push(c);return a}var Hv=gne;function bne(n,e){return function(t){return n(e(t))}}var Uv=bne;var wne=Uv(Object.keys,Object),gV=wne;var kne=Object.prototype,vne=kne.hasOwnProperty;function yne(n){if(!xh(n))return gV(n);var e=[];for(var t in Object(n))vne.call(n,t)&&t!="constructor"&&e.push(t);return e}var bV=yne;function _ne(n){return Va(n)?Hv(n):bV(n)}var kr=_ne;function Cne(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var wV=Cne;var Ene=Object.prototype,Sne=Ene.hasOwnProperty;function xne(n){if(!De(n))return wV(n);var e=xh(n),t=[];for(var i in n)i=="constructor"&&(e||!Sne.call(n,i))||t.push(i);return t}var kV=xne;function Ane(n){return Va(n)?Hv(n,!0):kV(n)}var so=Ane;var Tne=Sh(function(n,e){ro(e,so(e),n)}),Ih=Tne;var Ine=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mne=/^\w*$/;function Dne(n,e){if(Mt(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||Oa(n)?!0:Mne.test(n)||!Ine.test(n)||e!=null&&n in Object(e)}var Mh=Dne;var Pne=vi(Object,"create"),Es=Pne;function Rne(){this.__data__=Es?Es(null):{},this.size=0}var vV=Rne;function Nne(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var yV=Nne;var One="__lodash_hash_undefined__",Lne=Object.prototype,Fne=Lne.hasOwnProperty;function Vne(n){var e=this.__data__;if(Es){var t=e[n];return t===One?void 0:t}return Fne.call(e,n)?e[n]:void 0}var _V=Vne;var Bne=Object.prototype,zne=Bne.hasOwnProperty;function Hne(n){var e=this.__data__;return Es?e[n]!==void 0:zne.call(e,n)}var CV=Hne;var Une="__lodash_hash_undefined__";function jne(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Es&&e===void 0?Une:e,this}var EV=jne;function Dh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Dh.prototype.clear=vV;Dh.prototype.delete=yV;Dh.prototype.get=_V;Dh.prototype.has=CV;Dh.prototype.set=EV;var gT=Dh;function $ne(){this.__data__=[],this.size=0}var SV=$ne;function Wne(n,e){for(var t=n.length;t--;)if(wr(n[t][0],e))return t;return-1}var Ba=Wne;var qne=Array.prototype,Gne=qne.splice;function Kne(n){var e=this.__data__,t=Ba(e,n);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():Gne.call(e,t,1),--this.size,!0}var xV=Kne;function Qne(n){var e=this.__data__,t=Ba(e,n);return t<0?void 0:e[t][1]}var AV=Qne;function Yne(n){return Ba(this.__data__,n)>-1}var TV=Yne;function Zne(n,e){var t=this.__data__,i=Ba(t,n);return i<0?(++this.size,t.push([n,e])):t[i][1]=e,this}var IV=Zne;function Ph(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Ph.prototype.clear=SV;Ph.prototype.delete=xV;Ph.prototype.get=AV;Ph.prototype.has=TV;Ph.prototype.set=IV;var za=Ph;var Jne=vi(Ut,"Map"),Ha=Jne;function Xne(){this.size=0,this.__data__={hash:new gT,map:new(Ha||za),string:new gT}}var MV=Xne;function eie(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var DV=eie;function tie(n,e){var t=n.__data__;return DV(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Ua=tie;function nie(n){var e=Ua(this,n).delete(n);return this.size-=e?1:0,e}var PV=nie;function iie(n){return Ua(this,n).get(n)}var RV=iie;function oie(n){return Ua(this,n).has(n)}var NV=oie;function rie(n,e){var t=Ua(this,n),i=t.size;return t.set(n,e),this.size+=t.size==i?0:1,this}var OV=rie;function Rh(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var i=n[e];this.set(i[0],i[1])}}Rh.prototype.clear=MV;Rh.prototype.delete=PV;Rh.prototype.get=RV;Rh.prototype.has=NV;Rh.prototype.set=OV;var Hc=Rh;var sie="Expected a function";function bT(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(sie);var t=function(){var i=arguments,o=e?e.apply(this,i):i[0],r=t.cache;if(r.has(o))return r.get(o);var s=n.apply(this,i);return t.cache=r.set(o,s)||r,s};return t.cache=new(bT.Cache||Hc),t}bT.Cache=Hc;var LV=bT;var aie=500;function lie(n){var e=LV(n,function(i){return t.size===aie&&t.clear(),i}),t=e.cache;return e}var FV=lie;var cie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,die=/\\(\\)?/g,uie=FV(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(cie,function(t,i,o,r){e.push(o?r.replace(die,"$1"):i||t)}),e}),VV=uie;function hie(n){return n==null?"":HF(n)}var ja=hie;function mie(n,e){return Mt(n)?n:Mh(n,e)?[n]:VV(ja(n))}var $a=mie;var fie=1/0;function pie(n){if(typeof n=="string"||Oa(n))return n;var e=n+"";return e=="0"&&1/n==-fie?"-0":e}var ao=pie;function gie(n,e){e=$a(e,n);for(var t=0,i=e.length;n!=null&&t<i;)n=n[ao(e[t++])];return t&&t==i?n:void 0}var Nh=gie;function bie(n,e,t){var i=n==null?void 0:Nh(n,e);return i===void 0?t:i}var Wa=bie;function wie(n,e){for(var t=-1,i=e.length,o=n.length;++t<i;)n[o+t]=e[t];return n}var jv=wie;var kie=Uv(Object.getPrototypeOf,Object),Oh=kie;var vie="[object Object]",yie=Function.prototype,_ie=Object.prototype,BV=yie.toString,Cie=_ie.hasOwnProperty,Eie=BV.call(Object);function Sie(n){if(!Lt(n)||Xn(n)!=vie)return!1;var e=Oh(n);if(e===null)return!0;var t=Cie.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&BV.call(t)==Eie}var Gt=Sie;function xie(n,e,t){var i=-1,o=n.length;e<0&&(e=-e>o?0:o+e),t=t>o?o:t,t<0&&(t+=o),o=e>t?0:t-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=n[i+e];return r}var $v=xie;function Aie(n,e,t){var i=n.length;return t=t===void 0?i:t,!e&&t>=i?n:$v(n,e,t)}var zV=Aie;var Tie="\\ud800-\\udfff",Iie="\\u0300-\\u036f",Mie="\\ufe20-\\ufe2f",Die="\\u20d0-\\u20ff",Pie=Iie+Mie+Die,Rie="\\ufe0e\\ufe0f",Nie="\\u200d",Oie=RegExp("["+Nie+Tie+Pie+Rie+"]");function Lie(n){return Oie.test(n)}var Wv=Lie;function Fie(n){return n.split("")}var HV=Fie;var UV="\\ud800-\\udfff",Vie="\\u0300-\\u036f",Bie="\\ufe20-\\ufe2f",zie="\\u20d0-\\u20ff",Hie=Vie+Bie+zie,Uie="\\ufe0e\\ufe0f",jie="["+UV+"]",wT="["+Hie+"]",kT="\\ud83c[\\udffb-\\udfff]",$ie="(?:"+wT+"|"+kT+")",jV="[^"+UV+"]",$V="(?:\\ud83c[\\udde6-\\uddff]){2}",WV="[\\ud800-\\udbff][\\udc00-\\udfff]",Wie="\\u200d",qV=$ie+"?",GV="["+Uie+"]?",qie="(?:"+Wie+"(?:"+[jV,$V,WV].join("|")+")"+GV+qV+")*",Gie=GV+qV+qie,Kie="(?:"+[jV+wT+"?",wT,$V,WV,jie].join("|")+")",Qie=RegExp(kT+"(?="+kT+")|"+Kie+Gie,"g");function Yie(n){return n.match(Qie)||[]}var KV=Yie;function Zie(n){return Wv(n)?KV(n):HV(n)}var QV=Zie;function Jie(n){return function(e){e=ja(e);var t=Wv(e)?QV(e):void 0,i=t?t[0]:e.charAt(0),o=t?zV(t,1).join(""):e.slice(1);return i[n]()+o}}var YV=Jie;var Xie=YV("toUpperCase"),cg=Xie;function eoe(n,e,t,i){var o=-1,r=n==null?0:n.length;for(i&&r&&(t=n[++o]);++o<r;)t=e(t,n[o],o,n);return t}var ZV=eoe;function toe(n){return function(e){return n?.[e]}}var JV=toe;var noe={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ioe=JV(noe),XV=ioe;var ooe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,roe="\\u0300-\\u036f",soe="\\ufe20-\\ufe2f",aoe="\\u20d0-\\u20ff",loe=roe+soe+aoe,coe="["+loe+"]",doe=RegExp(coe,"g");function uoe(n){return n=ja(n),n&&n.replace(ooe,XV).replace(doe,"")}var eB=uoe;var hoe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function moe(n){return n.match(hoe)||[]}var tB=moe;var foe=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function poe(n){return foe.test(n)}var nB=poe;var aB="\\ud800-\\udfff",goe="\\u0300-\\u036f",boe="\\ufe20-\\ufe2f",woe="\\u20d0-\\u20ff",koe=goe+boe+woe,lB="\\u2700-\\u27bf",cB="a-z\\xdf-\\xf6\\xf8-\\xff",voe="\\xac\\xb1\\xd7\\xf7",yoe="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",_oe="\\u2000-\\u206f",Coe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dB="A-Z\\xc0-\\xd6\\xd8-\\xde",Eoe="\\ufe0e\\ufe0f",uB=voe+yoe+_oe+Coe,hB="['\u2019]",iB="["+uB+"]",Soe="["+koe+"]",mB="\\d+",xoe="["+lB+"]",fB="["+cB+"]",pB="[^"+aB+uB+mB+lB+cB+dB+"]",Aoe="\\ud83c[\\udffb-\\udfff]",Toe="(?:"+Soe+"|"+Aoe+")",Ioe="[^"+aB+"]",gB="(?:\\ud83c[\\udde6-\\uddff]){2}",bB="[\\ud800-\\udbff][\\udc00-\\udfff]",Lh="["+dB+"]",Moe="\\u200d",oB="(?:"+fB+"|"+pB+")",Doe="(?:"+Lh+"|"+pB+")",rB="(?:"+hB+"(?:d|ll|m|re|s|t|ve))?",sB="(?:"+hB+"(?:D|LL|M|RE|S|T|VE))?",wB=Toe+"?",kB="["+Eoe+"]?",Poe="(?:"+Moe+"(?:"+[Ioe,gB,bB].join("|")+")"+kB+wB+")*",Roe="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Noe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ooe=kB+wB+Poe,Loe="(?:"+[xoe,gB,bB].join("|")+")"+Ooe,Foe=RegExp([Lh+"?"+fB+"+"+rB+"(?="+[iB,Lh,"$"].join("|")+")",Doe+"+"+sB+"(?="+[iB,Lh+oB,"$"].join("|")+")",Lh+"?"+oB+"+"+rB,Lh+"+"+sB,Noe,Roe,mB,Loe].join("|"),"g");function Voe(n){return n.match(Foe)||[]}var vB=Voe;function Boe(n,e,t){return n=ja(n),e=t?void 0:e,e===void 0?nB(n)?vB(n):tB(n):n.match(e)||[]}var yB=Boe;var zoe="['\u2019]",Hoe=RegExp(zoe,"g");function Uoe(n){return function(e){return ZV(yB(eB(e).replace(Hoe,"")),n,"")}}var _B=Uoe;function joe(){this.__data__=new za,this.size=0}var CB=joe;function $oe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var EB=$oe;function Woe(n){return this.__data__.get(n)}var SB=Woe;function qoe(n){return this.__data__.has(n)}var xB=qoe;var Goe=200;function Koe(n,e){var t=this.__data__;if(t instanceof za){var i=t.__data__;if(!Ha||i.length<Goe-1)return i.push([n,e]),this.size=++t.size,this;t=this.__data__=new Hc(i)}return t.set(n,e),this.size=t.size,this}var AB=Koe;function Fh(n){var e=this.__data__=new za(n);this.size=e.size}Fh.prototype.clear=CB;Fh.prototype.delete=EB;Fh.prototype.get=SB;Fh.prototype.has=xB;Fh.prototype.set=AB;var vr=Fh;function Qoe(n,e){return n&&ro(e,kr(e),n)}var TB=Qoe;function Yoe(n,e){return n&&ro(e,so(e),n)}var IB=Yoe;var RB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,MB=RB&&typeof module=="object"&&module&&!module.nodeType&&module,Zoe=MB&&MB.exports===RB,DB=Zoe?Ut.Buffer:void 0,PB=DB?DB.allocUnsafe:void 0;function Joe(n,e){if(e)return n.slice();var t=n.length,i=PB?PB(t):new n.constructor(t);return n.copy(i),i}var qv=Joe;function Xoe(n,e){for(var t=-1,i=n==null?0:n.length,o=0,r=[];++t<i;){var s=n[t];e(s,t,n)&&(r[o++]=s)}return r}var NB=Xoe;function ere(){return[]}var Gv=ere;var tre=Object.prototype,nre=tre.propertyIsEnumerable,OB=Object.getOwnPropertySymbols,ire=OB?function(n){return n==null?[]:(n=Object(n),NB(OB(n),function(e){return nre.call(n,e)}))}:Gv,Vh=ire;function ore(n,e){return ro(n,Vh(n),e)}var LB=ore;var rre=Object.getOwnPropertySymbols,sre=rre?function(n){for(var e=[];n;)jv(e,Vh(n)),n=Oh(n);return e}:Gv,Kv=sre;function are(n,e){return ro(n,Kv(n),e)}var FB=are;function lre(n,e,t){var i=e(n);return Mt(n)?i:jv(i,t(n))}var Qv=lre;function cre(n){return Qv(n,kr,Vh)}var dg=cre;function dre(n){return Qv(n,so,Kv)}var VB=dre;var ure=vi(Ut,"DataView"),Yv=ure;var hre=vi(Ut,"Promise"),Zv=hre;var mre=vi(Ut,"Set"),Jv=mre;var BB="[object Map]",fre="[object Object]",zB="[object Promise]",HB="[object Set]",UB="[object WeakMap]",jB="[object DataView]",pre=ys(Yv),gre=ys(Ha),bre=ys(Zv),wre=ys(Jv),kre=ys(Bv),Uc=Xn;(Yv&&Uc(new Yv(new ArrayBuffer(1)))!=jB||Ha&&Uc(new Ha)!=BB||Zv&&Uc(Zv.resolve())!=zB||Jv&&Uc(new Jv)!=HB||Bv&&Uc(new Bv)!=UB)&&(Uc=function(n){var e=Xn(n),t=e==fre?n.constructor:void 0,i=t?ys(t):"";if(i)switch(i){case pre:return jB;case gre:return BB;case bre:return zB;case wre:return HB;case kre:return UB}return e});var Ss=Uc;var vre=Object.prototype,yre=vre.hasOwnProperty;function _re(n){var e=n.length,t=new n.constructor(e);return e&&typeof n[0]=="string"&&yre.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var $B=_re;var Cre=Ut.Uint8Array,Bh=Cre;function Ere(n){var e=new n.constructor(n.byteLength);return new Bh(e).set(new Bh(n)),e}var zh=Ere;function Sre(n,e){var t=e?zh(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.byteLength)}var WB=Sre;var xre=/\w*$/;function Are(n){var e=new n.constructor(n.source,xre.exec(n));return e.lastIndex=n.lastIndex,e}var qB=Are;var GB=Jn?Jn.prototype:void 0,KB=GB?GB.valueOf:void 0;function Tre(n){return KB?Object(KB.call(n)):{}}var QB=Tre;function Ire(n,e){var t=e?zh(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var Xv=Ire;var Mre="[object Boolean]",Dre="[object Date]",Pre="[object Map]",Rre="[object Number]",Nre="[object RegExp]",Ore="[object Set]",Lre="[object String]",Fre="[object Symbol]",Vre="[object ArrayBuffer]",Bre="[object DataView]",zre="[object Float32Array]",Hre="[object Float64Array]",Ure="[object Int8Array]",jre="[object Int16Array]",$re="[object Int32Array]",Wre="[object Uint8Array]",qre="[object Uint8ClampedArray]",Gre="[object Uint16Array]",Kre="[object Uint32Array]";function Qre(n,e,t){var i=n.constructor;switch(e){case Vre:return zh(n);case Mre:case Dre:return new i(+n);case Bre:return WB(n,t);case zre:case Hre:case Ure:case jre:case $re:case Wre:case qre:case Gre:case Kre:return Xv(n,t);case Pre:return new i;case Rre:case Lre:return new i(n);case Nre:return qB(n);case Ore:return new i;case Fre:return QB(n)}}var YB=Qre;function Yre(n){return typeof n.constructor=="function"&&!xh(n)?YF(Oh(n)):{}}var ey=Yre;var Zre="[object Map]";function Jre(n){return Lt(n)&&Ss(n)==Zre}var ZB=Jre;var JB=Cs&&Cs.isMap,Xre=JB?Ah(JB):ZB,XB=Xre;var ese="[object Set]";function tse(n){return Lt(n)&&Ss(n)==ese}var e6=tse;var t6=Cs&&Cs.isSet,nse=t6?Ah(t6):e6,n6=nse;var ise=1,ose=2,rse=4,i6="[object Arguments]",sse="[object Array]",ase="[object Boolean]",lse="[object Date]",cse="[object Error]",o6="[object Function]",dse="[object GeneratorFunction]",use="[object Map]",hse="[object Number]",r6="[object Object]",mse="[object RegExp]",fse="[object Set]",pse="[object String]",gse="[object Symbol]",bse="[object WeakMap]",wse="[object ArrayBuffer]",kse="[object DataView]",vse="[object Float32Array]",yse="[object Float64Array]",_se="[object Int8Array]",Cse="[object Int16Array]",Ese="[object Int32Array]",Sse="[object Uint8Array]",xse="[object Uint8ClampedArray]",Ase="[object Uint16Array]",Tse="[object Uint32Array]",vt={};vt[i6]=vt[sse]=vt[wse]=vt[kse]=vt[ase]=vt[lse]=vt[vse]=vt[yse]=vt[_se]=vt[Cse]=vt[Ese]=vt[use]=vt[hse]=vt[r6]=vt[mse]=vt[fse]=vt[pse]=vt[gse]=vt[Sse]=vt[xse]=vt[Ase]=vt[Tse]=!0;vt[cse]=vt[o6]=vt[bse]=!1;function ty(n,e,t,i,o,r){var s,a=e&ise,l=e&ose,c=e&rse;if(t&&(s=o?t(n,i,o,r):t(n)),s!==void 0)return s;if(!De(n))return n;var d=Mt(n);if(d){if(s=$B(n),!a)return zv(n,s)}else{var f=Ss(n),p=f==o6||f==dse;if(_s(n))return qv(n,a);if(f==r6||f==i6||p&&!o){if(s=l||p?{}:ey(n),!a)return l?FB(n,IB(s,n)):LB(n,TB(s,n))}else{if(!vt[f])return o?n:{};s=YB(n,f,a)}}r||(r=new vr);var g=r.get(n);if(g)return g;r.set(n,s),n6(n)?n.forEach(function(C){s.add(ty(C,e,t,C,n,r))}):XB(n)&&n.forEach(function(C,S){s.set(S,ty(C,e,t,S,n,r))});var w=c?l?VB:dg:l?so:kr,k=d?void 0:w(n);return nV(k||n,function(C,S){k&&(S=C,C=n[S]),Ch(s,S,ty(C,e,t,S,n,r))}),s}var Hh=ty;var Ise=4;function Mse(n){return Hh(n,Ise)}var ny=Mse;var Dse=1,Pse=4;function Rse(n){return Hh(n,Dse|Pse)}var Nn=Rse;var Nse=1,Ose=4;function Lse(n,e){return e=typeof e=="function"?e:void 0,Hh(n,Nse|Ose,e)}var jc=Lse;var Fse="__lodash_hash_undefined__";function Vse(n){return this.__data__.set(n,Fse),this}var s6=Vse;function Bse(n){return this.__data__.has(n)}var a6=Bse;function iy(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Hc;++e<t;)this.add(n[e])}iy.prototype.add=iy.prototype.push=s6;iy.prototype.has=a6;var l6=iy;function zse(n,e){for(var t=-1,i=n==null?0:n.length;++t<i;)if(e(n[t],t,n))return!0;return!1}var c6=zse;function Hse(n,e){return n.has(e)}var d6=Hse;var Use=1,jse=2;function $se(n,e,t,i,o,r){var s=t&Use,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=r.get(n),d=r.get(e);if(c&&d)return c==e&&d==n;var f=-1,p=!0,g=t&jse?new l6:void 0;for(r.set(n,e),r.set(e,n);++f<a;){var w=n[f],k=e[f];if(i)var C=s?i(k,w,f,e,n,r):i(w,k,f,n,e,r);if(C!==void 0){if(C)continue;p=!1;break}if(g){if(!c6(e,function(S,T){if(!d6(g,T)&&(w===S||o(w,S,t,i,r)))return g.push(T)})){p=!1;break}}else if(!(w===k||o(w,k,t,i,r))){p=!1;break}}return r.delete(n),r.delete(e),p}var oy=$se;function Wse(n){var e=-1,t=Array(n.size);return n.forEach(function(i,o){t[++e]=[o,i]}),t}var u6=Wse;function qse(n){var e=-1,t=Array(n.size);return n.forEach(function(i){t[++e]=i}),t}var h6=qse;var Gse=1,Kse=2,Qse="[object Boolean]",Yse="[object Date]",Zse="[object Error]",Jse="[object Map]",Xse="[object Number]",eae="[object RegExp]",tae="[object Set]",nae="[object String]",iae="[object Symbol]",oae="[object ArrayBuffer]",rae="[object DataView]",m6=Jn?Jn.prototype:void 0,vT=m6?m6.valueOf:void 0;function sae(n,e,t,i,o,r,s){switch(t){case rae:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case oae:return!(n.byteLength!=e.byteLength||!r(new Bh(n),new Bh(e)));case Qse:case Yse:case Xse:return wr(+n,+e);case Zse:return n.name==e.name&&n.message==e.message;case eae:case nae:return n==e+"";case Jse:var a=u6;case tae:var l=i&Gse;if(a||(a=h6),n.size!=e.size&&!l)return!1;var c=s.get(n);if(c)return c==e;i|=Kse,s.set(n,e);var d=oy(a(n),a(e),i,o,r,s);return s.delete(n),d;case iae:if(vT)return vT.call(n)==vT.call(e)}return!1}var f6=sae;var aae=1,lae=Object.prototype,cae=lae.hasOwnProperty;function dae(n,e,t,i,o,r){var s=t&aae,a=dg(n),l=a.length,c=dg(e),d=c.length;if(l!=d&&!s)return!1;for(var f=l;f--;){var p=a[f];if(!(s?p in e:cae.call(e,p)))return!1}var g=r.get(n),w=r.get(e);if(g&&w)return g==e&&w==n;var k=!0;r.set(n,e),r.set(e,n);for(var C=s;++f<l;){p=a[f];var S=n[p],T=e[p];if(i)var V=s?i(T,S,p,e,n,r):i(S,T,p,n,e,r);if(!(V===void 0?S===T||o(S,T,t,i,r):V)){k=!1;break}C||(C=p=="constructor")}if(k&&!C){var K=n.constructor,de=e.constructor;K!=de&&"constructor"in n&&"constructor"in e&&!(typeof K=="function"&&K instanceof K&&typeof de=="function"&&de instanceof de)&&(k=!1)}return r.delete(n),r.delete(e),k}var p6=dae;var uae=1,g6="[object Arguments]",b6="[object Array]",ry="[object Object]",hae=Object.prototype,w6=hae.hasOwnProperty;function mae(n,e,t,i,o,r){var s=Mt(n),a=Mt(e),l=s?b6:Ss(n),c=a?b6:Ss(e);l=l==g6?ry:l,c=c==g6?ry:c;var d=l==ry,f=c==ry,p=l==c;if(p&&_s(n)){if(!_s(e))return!1;s=!0,d=!1}if(p&&!d)return r||(r=new vr),s||Th(n)?oy(n,e,t,i,o,r):f6(n,e,l,t,i,o,r);if(!(t&uae)){var g=d&&w6.call(n,"__wrapped__"),w=f&&w6.call(e,"__wrapped__");if(g||w){var k=g?n.value():n,C=w?e.value():e;return r||(r=new vr),o(k,C,t,i,r)}}return p?(r||(r=new vr),p6(n,e,t,i,o,r)):!1}var k6=mae;function v6(n,e,t,i,o){return n===e?!0:n==null||e==null||!Lt(n)&&!Lt(e)?n!==n&&e!==e:k6(n,e,t,i,v6,o)}var qa=v6;var fae=1,pae=2;function gae(n,e,t,i){var o=t.length,r=o,s=!i;if(n==null)return!r;for(n=Object(n);o--;){var a=t[o];if(s&&a[2]?a[1]!==n[a[0]]:!(a[0]in n))return!1}for(;++o<r;){a=t[o];var l=a[0],c=n[l],d=a[1];if(s&&a[2]){if(c===void 0&&!(l in n))return!1}else{var f=new vr;if(i)var p=i(c,d,l,n,e,f);if(!(p===void 0?qa(d,c,fae|pae,i,f):p))return!1}}return!0}var y6=gae;function bae(n){return n===n&&!De(n)}var sy=bae;function wae(n){for(var e=kr(n),t=e.length;t--;){var i=e[t],o=n[i];e[t]=[i,o,sy(o)]}return e}var _6=wae;function kae(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}var ay=kae;function vae(n){var e=_6(n);return e.length==1&&e[0][2]?ay(e[0][0],e[0][1]):function(t){return t===n||y6(t,n,e)}}var C6=vae;function yae(n,e){return n!=null&&e in Object(n)}var E6=yae;function _ae(n,e,t){e=$a(e,n);for(var i=-1,o=e.length,r=!1;++i<o;){var s=ao(e[i]);if(!(r=n!=null&&t(n,s)))break;n=n[s]}return r||++i!=o?r:(o=n==null?0:n.length,!!o&&Eh(o)&&La(s,o)&&(Mt(n)||zc(n)))}var S6=_ae;function Cae(n,e){return n!=null&&S6(n,e,E6)}var x6=Cae;var Eae=1,Sae=2;function xae(n,e){return Mh(n)&&sy(e)?ay(ao(n),e):function(t){var i=Wa(t,n);return i===void 0&&i===e?x6(t,n):qa(e,i,Eae|Sae)}}var A6=xae;function Aae(n){return function(e){return e?.[n]}}var T6=Aae;function Tae(n){return function(e){return Nh(e,n)}}var I6=Tae;function Iae(n){return Mh(n)?T6(ao(n)):I6(n)}var M6=Iae;function Mae(n){return typeof n=="function"?n:n==null?yh:typeof n=="object"?Mt(n)?A6(n[0],n[1]):C6(n):M6(n)}var D6=Mae;function Dae(n){return function(e,t,i){for(var o=-1,r=Object(e),s=i(e),a=s.length;a--;){var l=s[n?a:++o];if(t(r[l],l,r)===!1)break}return e}}var P6=Dae;var Pae=P6(),ly=Pae;function Rae(n,e){return n&&ly(n,e,kr)}var R6=Rae;var Nae=function(){return Ut.Date.now()},cy=Nae;var Oae="Expected a function",Lae=Math.max,Fae=Math.min;function Vae(n,e,t){var i,o,r,s,a,l,c=0,d=!1,f=!1,p=!0;if(typeof n!="function")throw new TypeError(Oae);e=mT(e)||0,De(t)&&(d=!!t.leading,f="maxWait"in t,r=f?Lae(mT(t.maxWait)||0,e):r,p="trailing"in t?!!t.trailing:p);function g(O){var j=i,z=o;return i=o=void 0,c=O,s=n.apply(z,j),s}function w(O){return c=O,a=setTimeout(S,e),d?g(O):s}function k(O){var j=O-l,z=O-c,Ue=e-j;return f?Fae(Ue,r-z):Ue}function C(O){var j=O-l,z=O-c;return l===void 0||j>=e||j<0||f&&z>=r}function S(){var O=cy();if(C(O))return T(O);a=setTimeout(S,k(O))}function T(O){return a=void 0,p&&i?g(O):(i=o=void 0,s)}function V(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function K(){return a===void 0?s:T(cy())}function de(){var O=cy(),j=C(O);if(i=arguments,o=this,l=O,j){if(a===void 0)return w(l);if(f)return clearTimeout(a),a=setTimeout(S,e),g(l)}return a===void 0&&(a=setTimeout(S,e)),s}return de.cancel=V,de.flush=K,de}var lo=Vae;function Bae(n,e,t){(t!==void 0&&!wr(n[e],t)||t===void 0&&!(e in n))&&Fa(n,e,t)}var ug=Bae;function zae(n){return Lt(n)&&Va(n)}var N6=zae;function Hae(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var hg=Hae;function Uae(n){return ro(n,so(n))}var O6=Uae;function jae(n,e,t,i,o,r,s){var a=hg(n,t),l=hg(e,t),c=s.get(l);if(c){ug(n,t,c);return}var d=r?r(a,l,t+"",n,e,s):void 0,f=d===void 0;if(f){var p=Mt(l),g=!p&&_s(l),w=!p&&!g&&Th(l);d=l,p||g||w?Mt(a)?d=a:N6(a)?d=zv(a):g?(f=!1,d=qv(l,!0)):w?(f=!1,d=Xv(l,!0)):d=[]:Gt(l)||zc(l)?(d=a,zc(a)?d=O6(a):(!De(a)||Fi(a))&&(d=ey(l))):f=!1}f&&(s.set(l,d),o(d,l,i,r,s),s.delete(l)),ug(n,t,d)}var L6=jae;function F6(n,e,t,i,o){n!==e&&ly(e,function(r,s){if(o||(o=new vr),De(r))L6(n,e,s,t,F6,i,o);else{var a=i?i(hg(n,s),r,s+"",n,e,o):void 0;a===void 0&&(a=r),ug(n,s,a)}},so)}var dy=F6;var $ae=Sh(function(n,e,t,i){dy(n,e,t,i)}),yT=$ae;function Wae(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}var V6=Wae;var qae="[object String]";function Gae(n){return typeof n=="string"||!Mt(n)&&Lt(n)&&Xn(n)==qae}var uy=Gae;function Kae(n,e){return e.length<2?n:Nh(n,$v(e,0,-1))}var B6=Kae;function Qae(n){return Lt(n)&&n.nodeType===1&&!Gt(n)}var Vi=Qae;function Yae(n,e){return qa(n,e)}var $c=Yae;function Zae(n,e,t){t=typeof t=="function"?t:void 0;var i=t?t(n,e):void 0;return i===void 0?qa(n,e,void 0,t):!!i}var _T=Zae;function Jae(n,e){var t={};return e=D6(e,3),R6(n,function(i,o,r){Fa(t,o,e(i,o,r))}),t}var CT=Jae;var Xae=Sh(function(n,e,t){dy(n,e,t)}),Uh=Xae;function ele(n,e){return e=$a(e,n),n=B6(n,e),n==null||delete n[ao(V6(e))]}var z6=ele;function tle(n,e,t,i){if(!De(n))return n;e=$a(e,n);for(var o=-1,r=e.length,s=r-1,a=n;a!=null&&++o<r;){var l=ao(e[o]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return n;if(o!=s){var d=a[l];c=i?i(d,l,a):void 0,c===void 0&&(c=De(d)?d:La(e[o+1])?[]:{})}Ch(a,l,c),a=a[l]}return n}var H6=tle;function nle(n,e,t){return n==null?n:H6(n,e,t)}var ET=nle;var ile=_B(function(n,e,t){return n+(t?" ":"")+cg(e)}),ST=ile;var ole="Expected a function";function rle(n,e,t){var i=!0,o=!0;if(typeof n!="function")throw new TypeError(ole);return De(t)&&(i="leading"in t?!!t.leading:i,o="trailing"in t?!!t.trailing:o),lo(n,e,{leading:i,maxWait:e,trailing:o})}var Ga=rle;function sle(n,e){return n==null?!0:z6(n,e)}var xT=sle;var MT;try{MT={window,document}}catch{MT={window:{},document:{}}}var U=MT;function ale(){try{return navigator.userAgent.toLowerCase()}catch{return""}}var Wc=ale(),ie={isMac:o7(Wc),isWindows:lle(Wc),isGecko:cle(Wc),isSafari:dle(Wc),isiOS:ule(Wc),isAndroid:hle(Wc),isBlink:mle(Wc),get isMediaForcedColors(){return ple()},get isMotionReduced(){return gle()},features:{isRegExpUnicodePropertySupported:fle()}};function o7(n){return n.indexOf("macintosh")>-1}function lle(n){return n.indexOf("windows")>-1}function cle(n){return!!n.match(/gecko\/\d+/)}function dle(n){return n.indexOf(" applewebkit/")>-1&&n.indexOf("chrome")===-1}function ule(n){return!!n.match(/iphone|ipad/i)||o7(n)&&navigator.maxTouchPoints>0}function hle(n){return n.indexOf("android")>-1}function mle(n){return n.indexOf("chrome/")>-1&&n.indexOf("edge/")<0}function fle(){let n=!1;try{n="\u0107".search(new RegExp("[\\p{L}]","u"))===0}catch{}return n}function ple(){return U.window.matchMedia?U.window.matchMedia("(forced-colors: active)").matches:!1}function gle(){return U.window.matchMedia?U.window.matchMedia("(prefers-reduced-motion)").matches:!1}function LT(n,e,t,i){t=t||function(l,c){return l===c};let o=Array.isArray(n)?n:Array.prototype.slice.call(n),r=Array.isArray(e)?e:Array.prototype.slice.call(e),s=ble(o,r,t);return i?kle(s,r.length):wle(r,s)}function ble(n,e,t){let i=U6(n,e,t);if(i===-1)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};let o=j6(n,i),r=j6(e,i),s=U6(o,r,t),a=n.length-s,l=e.length-s;return{firstIndex:i,lastIndexOld:a,lastIndexNew:l}}function U6(n,e,t){for(let i=0;i<Math.max(n.length,e.length);i++)if(n[i]===void 0||e[i]===void 0||!t(n[i],e[i]))return i;return-1}function j6(n,e){return n.slice(e).reverse()}function wle(n,e){let t=[],{firstIndex:i,lastIndexOld:o,lastIndexNew:r}=e;return r-i>0&&t.push({index:i,type:"insert",values:n.slice(i,r)}),o-i>0&&t.push({index:i+(r-i),type:"delete",howMany:o-i}),t}function kle(n,e){let{firstIndex:t,lastIndexOld:i,lastIndexNew:o}=n;if(t===-1)return Array(e).fill("equal");let r=[];return t>0&&(r=r.concat(Array(t).fill("equal"))),o-t>0&&(r=r.concat(Array(o-t).fill("insert"))),i-t>0&&(r=r.concat(Array(i-t).fill("delete"))),o<e&&(r=r.concat(Array(e-o).fill("equal"))),r}function Wh(n,e,t){t=t||function(k,C){return k===C};let i=n.length,o=e.length;if(i>200||o>200||i+o>300)return Wh.fastDiff(n,e,t,!0);let r,s;if(o<i){let k=n;n=e,e=k,r="delete",s="insert"}else r="insert",s="delete";let a=n.length,l=e.length,c=l-a,d={},f={};function p(k){let C=(f[k-1]!==void 0?f[k-1]:-1)+1,S=f[k+1]!==void 0?f[k+1]:-1,T=C>S?-1:1;d[k+T]&&(d[k]=d[k+T].slice(0)),d[k]||(d[k]=[]),d[k].push(C>S?r:s);let V=Math.max(C,S),K=V-k;for(;K<a&&V<l&&t(n[K],e[V]);)K++,V++,d[k].push("equal");return V}let g=0,w;do{for(w=-g;w<c;w++)f[w]=p(w);for(w=c+g;w>c;w--)f[w]=p(w);f[c]=p(c),g++}while(f[c]!==l);return d[c].slice(1)}Wh.fastDiff=LT;function $6(){return function n(){n.called=!0}}var yi=class{source;name;path;stop;off;return;constructor(e,t){this.source=e,this.name=t,this.path=[],this.stop=$6(),this.off=$6()}};var On=new Array(256).fill("").map((n,e)=>("0"+e.toString(16)).slice(-2));function an(){let[n,e,t,i]=crypto.getRandomValues(new Uint32Array(4));return"e"+On[n>>0&255]+On[n>>8&255]+On[n>>16&255]+On[n>>24&255]+On[e>>0&255]+On[e>>8&255]+On[e>>16&255]+On[e>>24&255]+On[t>>0&255]+On[t>>8&255]+On[t>>16&255]+On[t>>24&255]+On[i>>0&255]+On[i>>8&255]+On[i>>16&255]+On[i>>24&255]}var _n={get(n="normal"){return typeof n!="number"?this[n]||this.normal:n},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function FT(n,e){let t=_n.get(e.priority);for(let i=0;i<n.length;i++)if(_n.get(n[i].priority)<t){n.splice(i,0,e);return}n.push(e)}var vle="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html",_=class n extends Error{context;data;constructor(e,t,i){super(yle(e,i)),this.name="CKEditorError",this.context=t,this.data=i}is(e){return e==="CKEditorError"}static rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError"))throw e;let i=new n(e.message,t);throw i.stack=e.stack,i}};function Ve(n,e){console.warn(..._le(n,e))}function r7(n){return`
Read more: ${vle}#error-${n}`}function yle(n,e){let t=new WeakSet,o=e?` ${JSON.stringify(e,(s,a)=>{if(typeof a=="object"&&a!==null){if(t.has(a))return`[object ${a.constructor.name}]`;t.add(a)}return a})}`:"",r=r7(n);return n+o+r}function _le(n,e){let t=r7(n);return e?[n,e,t]:[n,t]}var Cle="43.3.1",Ele=new Date(2024,10,6);if(globalThis.CKEDITOR_VERSION)throw new _("ckeditor-duplicated-modules",null);globalThis.CKEDITOR_VERSION=Cle;var jh=Symbol("listeningTo"),DT=Symbol("emitterId"),xs=Symbol("delegations"),s7=tt(Object);function tt(n){if(!n)return s7;class e extends n{on(i,o,r){this.listenTo(this,i,o,r)}once(i,o,r){let s=!1,a=(l,...c)=>{s||(s=!0,l.off(),o.call(this,l,...c))};this.listenTo(this,i,a,r)}off(i,o){this.stopListening(this,i,o)}listenTo(i,o,r,s={}){let a,l;this[jh]||(this[jh]={});let c=this[jh];AT(i)||a7(i);let d=AT(i);(a=c[d])||(a=c[d]={emitter:i,callbacks:{}}),(l=a.callbacks[o])||(l=a.callbacks[o]=[]),l.push(r),Tle(this,i,o,r,s)}stopListening(i,o,r){let s=this[jh],a=i&&AT(i),l=s&&a?s[a]:void 0,c=l&&o?l.callbacks[o]:void 0;if(!(!s||i&&!l||o&&!c))if(r)TT(this,i,o,r),c.indexOf(r)!==-1&&(c.length===1?delete l.callbacks[o]:TT(this,i,o,r));else if(c){for(;r=c.pop();)TT(this,i,o,r);delete l.callbacks[o]}else if(l){for(o in l.callbacks)this.stopListening(i,o);delete s[a]}else{for(a in s)this.stopListening(s[a].emitter);delete this[jh]}}fire(i,...o){try{let r=i instanceof yi?i:new yi(this,i),s=r.name,a=c7(this,s);if(r.path.push(this),a){let c=[r,...o];a=Array.from(a);for(let d=0;d<a.length&&(a[d].callback.apply(this,c),r.off.called&&(delete r.off.called,this._removeEventListener(s,a[d].callback)),!r.stop.called);d++);}let l=this[xs];if(l){let c=l.get(s),d=l.get("*");c&&W6(c,r,o),d&&W6(d,r,o)}return r.return}catch(r){_.rethrowUnexpectedError(r,this)}}delegate(...i){return{to:(o,r)=>{this[xs]||(this[xs]=new Map),i.forEach(s=>{let a=this[xs].get(s);a?a.set(o,r):this[xs].set(s,new Map([[o,r]]))})}}}stopDelegating(i,o){if(this[xs])if(!i)this[xs].clear();else if(!o)this[xs].delete(i);else{let r=this[xs].get(i);r&&r.delete(o)}}_addEventListener(i,o,r){Ale(this,i);let s=PT(this,i),a=_n.get(r.priority),l={callback:o,priority:a};for(let c of s)FT(c,l)}_removeEventListener(i,o){let r=PT(this,i);for(let s of r)for(let a=0;a<s.length;a++)s[a].callback==o&&(s.splice(a,1),a--)}}return e}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{tt[n]=s7.prototype[n]});function Sle(n,e){let t=n[jh];return t&&t[e]?t[e].emitter:null}function a7(n,e){n[DT]||(n[DT]=e||an())}function AT(n){return n[DT]}function l7(n){return n._events||Object.defineProperty(n,"_events",{value:{}}),n._events}function xle(){return{callbacks:[],childEvents:[]}}function Ale(n,e){let t=l7(n);if(t[e])return;let i=e,o=null,r=[];for(;i!==""&&!t[i];)t[i]=xle(),r.push(t[i]),o&&t[i].childEvents.push(o),o=i,i=i.substr(0,i.lastIndexOf(":"));if(i!==""){for(let s of r)s.callbacks=t[i].callbacks.slice();t[i].childEvents.push(o)}}function PT(n,e){let t=l7(n)[e];if(!t)return[];let i=[t.callbacks];for(let o=0;o<t.childEvents.length;o++){let r=PT(n,t.childEvents[o]);i=i.concat(r)}return i}function c7(n,e){let t;return!n._events||!(t=n._events[e])||!t.callbacks.length?e.indexOf(":")>-1?c7(n,e.substr(0,e.lastIndexOf(":"))):null:t.callbacks}function W6(n,e,t){for(let[i,o]of n){o?typeof o=="function"&&(o=o(e.name)):o=e.name;let r=new yi(e.source,o);r.path=[...e.path],i.fire(r,...t)}}function Tle(n,e,t,i,o){e._addEventListener?e._addEventListener(t,i,o):n._addEventListener.call(e,t,i,o)}function TT(n,e,t,i){e._removeEventListener?e._removeEventListener(t,i):n._removeEventListener.call(e,t,i)}var mg=Symbol("observableProperties"),pg=Symbol("boundObservables"),fg=Symbol("boundProperties"),qc=Symbol("decoratedMethods"),q6=Symbol("decoratedOriginal"),d7=Ze(tt());function Ze(n){if(!n)return d7;class e extends n{set(i,o){if(De(i)){Object.keys(i).forEach(s=>{this.set(s,i[s])},this);return}IT(this);let r=this[mg];if(i in this&&!r.has(i))throw new _("observable-set-cannot-override",this);Object.defineProperty(this,i,{enumerable:!0,configurable:!0,get(){return r.get(i)},set(s){let a=r.get(i),l=this.fire(`set:${i}`,i,s,a);l===void 0&&(l=s),(a!==l||!r.has(i))&&(r.set(i,l),this.fire(`change:${i}`,i,l,a))}}),this[i]=o}bind(...i){if(!i.length||!G6(i))throw new _("observable-bind-wrong-properties",this);if(new Set(i).size!==i.length)throw new _("observable-bind-duplicate-properties",this);IT(this);let o=this[fg];i.forEach(s=>{if(o.has(s))throw new _("observable-bind-rebind",this)});let r=new Map;return i.forEach(s=>{let a={property:s,to:[]};o.set(s,a),r.set(s,a)}),{to:Ile,toMany:Mle,_observable:this,_bindProperties:i,_to:[],_bindings:r}}unbind(...i){if(!this[mg])return;let o=this[fg],r=this[pg];if(i.length){if(!G6(i))throw new _("observable-unbind-wrong-properties",this);i.forEach(s=>{let a=o.get(s);a&&(a.to.forEach(([l,c])=>{let d=r.get(l),f=d[c];f.delete(a),f.size||delete d[c],Object.keys(d).length||(r.delete(l),this.stopListening(l,"change"))}),o.delete(s))})}else r.forEach((s,a)=>{this.stopListening(a,"change")}),r.clear(),o.clear()}decorate(i){IT(this);let o=this[i];if(!o)throw new _("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:i});this.on(i,(r,s)=>{r.return=o.apply(this,s)}),this[i]=function(...r){return this.fire(i,r)},this[i][q6]=o,this[qc]||(this[qc]=[]),this[qc].push(i)}stopListening(i,o,r){if(!i&&this[qc]){for(let s of this[qc])this[s]=this[s][q6];delete this[qc]}super.stopListening(i,o,r)}[mg];[qc];[fg];[pg]}return e}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{Ze[n]=d7.prototype[n]});function IT(n){n[mg]||(Object.defineProperty(n,mg,{value:new Map}),Object.defineProperty(n,pg,{value:new Map}),Object.defineProperty(n,fg,{value:new Map}))}function Ile(...n){let e=Ple(...n),t=Array.from(this._bindings.keys()),i=t.length;if(!e.callback&&e.to.length>1)throw new _("observable-bind-to-no-callback",this);if(i>1&&e.callback)throw new _("observable-bind-to-extra-callback",this);e.to.forEach(o=>{if(o.properties.length&&o.properties.length!==i)throw new _("observable-bind-to-properties-length",this);o.properties.length||(o.properties=this._bindProperties)}),this._to=e.to,e.callback&&(this._bindings.get(t[0]).callback=e.callback),Ole(this._observable,this._to),Nle(this),this._bindProperties.forEach(o=>{u7(this._observable,o)})}function Mle(n,e,t){if(this._bindings.size>1)throw new _("observable-bind-to-many-not-one-binding",this);this.to(...Dle(n,e),t)}function Dle(n,e){let t=n.map(i=>[i,e]);return Array.prototype.concat.apply([],t)}function G6(n){return n.every(e=>typeof e=="string")}function Ple(...n){if(!n.length)throw new _("observable-bind-to-parse-error",null);let e={to:[]},t;return typeof n[n.length-1]=="function"&&(e.callback=n.pop()),n.forEach(i=>{if(typeof i=="string")t.properties.push(i);else if(typeof i=="object")t={observable:i,properties:[]},e.to.push(t);else throw new _("observable-bind-to-parse-error",null)}),e}function Rle(n,e,t,i){let o=n[pg],r=o.get(t),s=r||{};s[i]||(s[i]=new Set),s[i].add(e),r||o.set(t,s)}function Nle(n){let e;n._bindings.forEach((t,i)=>{n._to.forEach(o=>{e=o.properties[t.callback?0:n._bindProperties.indexOf(i)],t.to.push([o.observable,e]),Rle(n._observable,t,o.observable,e)})})}function u7(n,e){let i=n[fg].get(e),o;i.callback?o=i.callback.apply(n,i.to.map(r=>r[0][r[1]])):(o=i.to[0],o=o[0][o[1]]),Object.prototype.hasOwnProperty.call(n,e)?n[e]=o:n.set(e,o)}function Ole(n,e){e.forEach(t=>{let i=n[pg],o;i.get(t.observable)||n.listenTo(t.observable,"change",(r,s)=>{o=i.get(t.observable)[s],o&&o.forEach(a=>{u7(n,a.property)})})})}var $h=class{_replacedElements;constructor(){this._replacedElements=[]}replace(e,t){this._replacedElements.push({element:e,newElement:t}),e.style.display="none",t&&e.parentNode.insertBefore(t,e.nextSibling)}restore(){this._replacedElements.forEach(({element:e,newElement:t})=>{e.style.display="",t&&t.remove()}),this._replacedElements=[]}};function bg(n){let e=0;for(let t of n)e++;return e}function Cn(n,e){let t=Math.min(n.length,e.length);for(let i=0;i<t;i++)if(n[i]!=e[i])return i;return n.length==e.length?"same":n.length<e.length?"prefix":"extension"}function ei(n){return!!(n&&n[Symbol.iterator])}function Dt(n,e,t={},i=[]){let o=t&&t.xmlns,r=o?n.createElementNS(o,e):n.createElement(e);for(let s in t)r.setAttribute(s,t[s]);(uy(i)||!ei(i))&&(i=[i]);for(let s of i)uy(s)&&(s=n.createTextNode(s)),r.appendChild(s);return r}var gg=class{_config;constructor(e,t){this._config=Object.create(null),t&&this.define(K6(t)),e&&this._setObjectToTarget(this._config,e)}set(e,t){this._setToTarget(this._config,e,t)}define(e,t){this._setToTarget(this._config,e,t,!0)}get(e){return this._getFromSource(this._config,e)}*names(){for(let e of Object.keys(this._config))yield e}_setToTarget(e,t,i,o=!1){if(Gt(t)){this._setObjectToTarget(e,t,o);return}let r=t.split(".");t=r.pop();for(let s of r)Gt(e[s])||(e[s]=Object.create(null)),e=e[s];if(Gt(i)){Gt(e[t])||(e[t]=Object.create(null)),e=e[t],this._setObjectToTarget(e,i,o);return}o&&typeof e[t]<"u"||(e[t]=i)}_getFromSource(e,t){let i=t.split(".");t=i.pop();for(let o of i){if(!Gt(e[o])){e=null;break}e=e[o]}return e?K6(e[t]):void 0}_setObjectToTarget(e,t,i){Object.keys(t).forEach(o=>{this._setToTarget(e,o,t[o],i)})}};function K6(n){return jc(n,Lle)}function Lle(n){return Vi(n)||typeof n=="function"?n:void 0}function yr(n){if(n){if(n.defaultView)return n instanceof n.defaultView.Document;if(n.ownerDocument&&n.ownerDocument.defaultView)return n instanceof n.ownerDocument.defaultView.Node}return!1}function my(n){let e=Object.prototype.toString.apply(n);return e=="[object Window]"||e=="[object global]"}var h7=mn(tt());function mn(n){if(!n)return h7;class e extends n{listenTo(i,o,r,s={}){if(yr(i)||my(i)){let a={capture:!!s.useCapture,passive:!!s.usePassive},l=this._getProxyEmitter(i,a)||new RT(i,a);this.listenTo(l,o,r,s)}else super.listenTo(i,o,r,s)}stopListening(i,o,r){if(yr(i)||my(i)){let s=this._getAllProxyEmitters(i);for(let a of s)this.stopListening(a,o,r)}else super.stopListening(i,o,r)}_getProxyEmitter(i,o){return Sle(this,m7(i,o))}_getAllProxyEmitters(i){return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map(o=>this._getProxyEmitter(i,o)).filter(o=>!!o)}}return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach(n=>{mn[n]=h7.prototype[n]});var RT=class extends tt(){_domNode;_options;constructor(e,t){super(),a7(this,m7(e,t)),this._domNode=e,this._options=t}_domListeners;attach(e){if(this._domListeners&&this._domListeners[e])return;let t=this._createDomListener(e);this._domNode.addEventListener(e,t,this._options),this._domListeners||(this._domListeners={}),this._domListeners[e]=t}detach(e){let t;this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)&&this._domListeners[e].removeListener()}_addEventListener(e,t,i){this.attach(e),tt().prototype._addEventListener.call(this,e,t,i)}_removeEventListener(e,t){tt().prototype._removeEventListener.call(this,e,t),this.detach(e)}_createDomListener(e){let t=i=>{this.fire(e,i)};return t.removeListener=()=>{this._domNode.removeEventListener(e,t,this._options),delete this._domListeners[e]},t}};function Fle(n){return n["data-ck-expando"]||(n["data-ck-expando"]=an())}function m7(n,e){let t=Fle(n);for(let i of Object.keys(e).sort())e[i]&&(t+="-"+i);return t}function VT(n){let e=[],t=n;for(;t&&t.nodeType!=Node.DOCUMENT_NODE;)e.unshift(t),t=t.parentNode;return e}function qh(n){return n instanceof HTMLTextAreaElement?n.value:n.innerHTML}function BT(n){let e=n.ownerDocument.defaultView.getComputedStyle(n);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function gy(n){if(!n.target)return null;let e=n.target.ownerDocument,t=n.clientX,i=n.clientY,o=null;return e.caretRangeFromPoint&&e.caretRangeFromPoint(t,i)?o=e.caretRangeFromPoint(t,i):n.rangeParent&&(o=e.createRange(),o.setStart(n.rangeParent,n.rangeOffset),o.collapse(!0)),o}function St(n){return Object.prototype.toString.call(n)=="[object Text]"}function wg(n){return Object.prototype.toString.apply(n)=="[object Range]"}function f7(n){return!n||!n.parentNode||n.offsetParent===U.document.body?null:n.offsetParent}var p7=["top","right","bottom","left","width","height"],Ae=class n{top;right;bottom;left;width;height;_source;constructor(e){let t=wg(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),NT(e)||t)if(t){let i=n.getDomRangeRects(e);hy(this,n.getBoundingRect(i))}else hy(this,e.getBoundingClientRect());else if(my(e)){let{innerWidth:i,innerHeight:o}=e;hy(this,{top:0,right:i,bottom:o,left:0,width:i,height:o})}else hy(this,e)}clone(){return new n(this)}moveTo(e,t){return this.top=t,this.right=e+this.width,this.bottom=t+this.height,this.left=e,this}moveBy(e,t){return this.top+=t,this.right+=e,this.left+=e,this.bottom+=t,this}getIntersection(e){let t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(t.width=t.right-t.left,t.height=t.bottom-t.top,t.width<0||t.height<0)return null;{let i=new n(t);return i._source=this._source,i}}getIntersectionArea(e){let t=this.getIntersection(e);return t?t.getArea():0}getArea(){return this.width*this.height}getVisible(){let e=this._source,t=this.clone();if(Q6(e))return t;let i=e,o=e.parentNode||e.commonAncestorContainer,r;for(;o&&!Q6(o);){let s=Vle(o)==="visible";i instanceof HTMLElement&&Y6(i)==="absolute"&&(r=i);let a=Y6(o);if(s||r&&(a==="relative"&&s||a!=="relative")){i=o,o=o.parentNode;continue}let l=new n(o),c=t.getIntersection(l);if(c)c.getArea()<t.getArea()&&(t=c);else return null;i=o,o=o.parentNode}return t}isEqual(e){for(let t of p7)if(this[t]!==e[t])return!1;return!0}contains(e){let t=this.getIntersection(e);return!!(t&&t.isEqual(e))}toAbsoluteRect(){let{scrollX:e,scrollY:t}=U.window,i=this.clone().moveBy(e,t);if(NT(i._source)){let o=f7(i._source);o&&Ble(i,o)}return i}excludeScrollbarsAndBorders(){let e=this._source,t,i,o;if(my(e))t=e.innerWidth-e.document.documentElement.clientWidth,i=e.innerHeight-e.document.documentElement.clientHeight,o=e.getComputedStyle(e.document.documentElement).direction;else{let r=BT(e);t=e.offsetWidth-e.clientWidth-r.left-r.right,i=e.offsetHeight-e.clientHeight-r.top-r.bottom,o=e.ownerDocument.defaultView.getComputedStyle(e).direction,this.left+=r.left,this.top+=r.top,this.right-=r.right,this.bottom-=r.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,o==="ltr"?this.right-=t:this.left+=t,this.height-=i,this.bottom-=i,this}static getDomRangeRects(e){let t=[],i=Array.from(e.getClientRects());if(i.length)for(let o of i)t.push(new n(o));else{let o=e.startContainer;St(o)&&(o=o.parentNode);let r=new n(o.getBoundingClientRect());r.right=r.left,r.width=0,t.push(r)}return t}static getBoundingRect(e){let t={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0},i=0;for(let o of e)i++,t.left=Math.min(t.left,o.left),t.top=Math.min(t.top,o.top),t.right=Math.max(t.right,o.right),t.bottom=Math.max(t.bottom,o.bottom);return i==0?null:(t.width=t.right-t.left,t.height=t.bottom-t.top,new n(t))}};function hy(n,e){for(let t of p7)n[t]=e[t]}function Q6(n){return NT(n)?n===n.ownerDocument.body:!1}function NT(n){return n!==null&&typeof n=="object"&&n.nodeType===1&&typeof n.getBoundingClientRect=="function"}function Y6(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).position:"static"}function Vle(n){return n instanceof HTMLElement?n.ownerDocument.defaultView.getComputedStyle(n).overflow:"visible"}function Ble(n,e){let t=new Ae(e),i=BT(e),o=0,r=0;o-=t.left,r-=t.top,o+=e.scrollLeft,r+=e.scrollTop,o-=i.left,r-=i.top,n.moveBy(o,r)}var Gh=(()=>{class n{_element;_callback;static _observerInstance=null;static _elementCallbacks=null;constructor(t,i){n._observerInstance||n._createObserver(),this._element=t,this._callback=i,n._addElementCallback(t,i),n._observerInstance.observe(t)}get element(){return this._element}destroy(){n._deleteElementCallback(this._element,this._callback)}static _addElementCallback(t,i){n._elementCallbacks||(n._elementCallbacks=new Map);let o=n._elementCallbacks.get(t);o||(o=new Set,n._elementCallbacks.set(t,o)),o.add(i)}static _deleteElementCallback(t,i){let o=n._getElementCallbacks(t);o&&(o.delete(i),o.size||(n._elementCallbacks.delete(t),n._observerInstance.unobserve(t))),n._elementCallbacks&&!n._elementCallbacks.size&&(n._observerInstance=null,n._elementCallbacks=null)}static _getElementCallbacks(t){return n._elementCallbacks?n._elementCallbacks.get(t):null}static _createObserver(){n._observerInstance=new U.window.ResizeObserver(t=>{for(let i of t){let o=n._getElementCallbacks(i.target);if(o)for(let r of o)r(i)}})}}return n})();function by(n,e){n instanceof HTMLTextAreaElement&&(n.value=e),n.innerHTML=e}function Ts(n){return e=>e+n}function Kh(n){let e=0;for(;n.previousSibling;)n=n.previousSibling,e++;return e}function zT(n,e,t){n.insertBefore(t,n.childNodes[e]||null)}function Qh(n){return n&&n.nodeType===Node.COMMENT_NODE}function wy(n){try{U.document.createAttribute(n)}catch{return!1}return!0}function Vo(n){return n?St(n)?Vo(n.parentElement):n.getClientRects?!!n.getClientRects().length:!1:!1}function ky({element:n,target:e,positions:t,limiter:i,fitInViewport:o,viewportOffsetConfig:r}){Fi(e)&&(e=e()),Fi(i)&&(i=i());let s=f7(n),a=zle(r),l=new Ae(n),c=Z6(e,a),d;if(!c||!a.getIntersection(c))return null;let f={targetRect:c,elementRect:l,positionedElementAncestor:s,viewportRect:a};if(!i&&!o)d=new fy(t[0],f);else{if(i){let p=Z6(i,a);p&&(f.limiterRect=p)}d=Hle(t,f)}return d}function Z6(n,e){let t=new Ae(n).getVisible();return t?t.getIntersection(e):null}function zle(n){n=Object.assign({top:0,bottom:0,left:0,right:0},n);let e=new Ae(U.window);return e.top+=n.top,e.height-=n.top,e.bottom-=n.bottom,e.height-=n.bottom,e}function Hle(n,e){let{elementRect:t}=e,i=t.getArea(),o=n.map(a=>new fy(a,e)).filter(a=>!!a.name),r=0,s=null;for(let a of o){let{limiterIntersectionArea:l,viewportIntersectionArea:c}=a;if(l===i)return a;let d=c**2+l**2;d>r&&(r=d,s=a)}return s}var fy=class{name;config;_positioningFunctionCoordinates;_options;_cachedRect;_cachedAbsoluteRect;constructor(e,t){let i=e(t.targetRect,t.elementRect,t.viewportRect,t.limiterRect);if(!i)return;let{left:o,top:r,name:s,config:a}=i;this.name=s,this.config=a,this._positioningFunctionCoordinates={left:o,top:r},this._options=t}get left(){return this._absoluteRect.left}get top(){return this._absoluteRect.top}get limiterIntersectionArea(){let e=this._options.limiterRect;return e?e.getIntersectionArea(this._rect):0}get viewportIntersectionArea(){return this._options.viewportRect.getIntersectionArea(this._rect)}get _rect(){return this._cachedRect?this._cachedRect:(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top),this._cachedRect)}get _absoluteRect(){return this._cachedAbsoluteRect?this._cachedAbsoluteRect:(this._cachedAbsoluteRect=this._rect.toAbsoluteRect(),this._cachedAbsoluteRect)}};function HT(n){let e=n.parentNode;e&&e.removeChild(n)}function UT({target:n,viewportOffset:e=0,ancestorOffset:t=0,alignToTop:i,forceScroll:o}){let r=jT(n),s=r,a=null;for(e=$le(e);s;){let l;s==r?l=J6(n):l=J6(a),jle({parent:l,getRect:()=>X6(n,s),alignToTop:i,ancestorOffset:t,forceScroll:o});let c=X6(n,s);if(Ule({window:s,rect:c,viewportOffset:e,alignToTop:i,forceScroll:o}),s.parent!=s){if(a=s.frameElement,s=s.parent,!a)return}else s=null}}function Ule({window:n,rect:e,alignToTop:t,forceScroll:i,viewportOffset:o}){let r=e.clone().moveBy(0,o.bottom),s=e.clone().moveBy(0,-o.top),a=new Ae(n).excludeScrollbarsAndBorders(),l=[s,r],c=t&&i,d=l.every(k=>a.contains(k)),{scrollX:f,scrollY:p}=n,g=f,w=p;c?p-=a.top-e.top+o.top:d||(b7(s,a)?p-=a.top-e.top+o.top:g7(r,a)&&(t?p+=e.top-a.top-o.top:p+=e.bottom-a.bottom+o.bottom)),d||(w7(e,a)?f-=a.left-e.left+o.left:k7(e,a)&&(f+=e.right-a.right+o.right)),(f!=g||p!==w)&&n.scrollTo(f,p)}function jle({parent:n,getRect:e,alignToTop:t,forceScroll:i,ancestorOffset:o=0,limiterElement:r}){let s=jT(n),a=t&&i,l,c,d,f=r||s.document.body;for(;n!=f;)c=e(),l=new Ae(n).excludeScrollbarsAndBorders(),d=l.contains(c),a?n.scrollTop-=l.top-c.top+o:d||(b7(c,l)?n.scrollTop-=l.top-c.top+o:g7(c,l)&&(t?n.scrollTop+=c.top-l.top-o:n.scrollTop+=c.bottom-l.bottom+o)),d||(w7(c,l)?n.scrollLeft-=l.left-c.left+o:k7(c,l)&&(n.scrollLeft+=c.right-l.right+o)),n=n.parentNode}function g7(n,e){return n.bottom>e.bottom}function b7(n,e){return n.top<e.top}function w7(n,e){return n.left<e.left}function k7(n,e){return n.right>e.right}function jT(n){return wg(n)?n.startContainer.ownerDocument.defaultView:n.ownerDocument.defaultView}function J6(n){if(wg(n)){let e=n.commonAncestorContainer;return St(e)&&(e=e.parentNode),e}else return n.parentNode}function X6(n,e){let t=jT(n),i=new Ae(n);if(t===e)return i;{let o=t;for(;o!=e;){let r=o.frameElement,s=new Ae(r).excludeScrollbarsAndBorders();i.moveBy(s.left,s.top),o=o.parent}}return i}function $le(n){return typeof n=="number"?{top:n,bottom:n,left:n,right:n}:n}var Wle={ctrl:"\u2303",cmd:"\u2318",alt:"\u2325",shift:"\u21E7"},qle={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},e7={37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",9:"\u21E5",33:"Page Up",34:"Page Down"},_e=Qle(),Gle=Object.fromEntries(Object.entries(_e).map(([n,e])=>{let t;return e in e7?t=e7[e]:t=n.charAt(0).toUpperCase()+n.slice(1),[e,t]}));function As(n){let e;if(typeof n=="string"){if(e=_e[n.toLowerCase()],!e)throw new _("keyboard-unknown-key",null,{key:n})}else e=n.keyCode+(n.altKey?_e.alt:0)+(n.ctrlKey?_e.ctrl:0)+(n.shiftKey?_e.shift:0)+(n.metaKey?_e.cmd:0);return e}function kg(n){return typeof n=="string"&&(n=Yle(n)),n.map(e=>typeof e=="string"?Kle(e):e).reduce((e,t)=>t+e,0)}function vg(n){let e=kg(n);return Object.entries(ie.isMac||ie.isiOS?Wle:qle).reduce((o,[r,s])=>(e&_e[r]&&(e&=~_e[r],o+=s),o),"")+(e?Gle[e]:"")}function v7(n){return n==_e.arrowright||n==_e.arrowleft||n==_e.arrowup||n==_e.arrowdown}function yg(n,e){let t=e==="ltr";switch(n){case _e.arrowleft:return t?"left":"right";case _e.arrowright:return t?"right":"left";case _e.arrowup:return"up";case _e.arrowdown:return"down"}}function Kle(n){if(n.endsWith("!"))return As(n.slice(0,-1));let e=As(n);return(ie.isMac||ie.isiOS)&&e==_e.ctrl?_e.cmd:e}function y7(n,e){let t=yg(n,e);return t==="down"||t==="right"}function Qle(){let n={pageup:33,pagedown:34,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896};for(let e=65;e<=90;e++){let t=String.fromCharCode(e);n[t.toLowerCase()]=e}for(let e=48;e<=57;e++)n[e-48]=e;for(let e=112;e<=123;e++)n["f"+(e-111)]=e;return Object.assign(n,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),n}function Yle(n){return n.split("+").map(e=>e.trim())}var Zle=["ar","ara","dv","div","fa","per","fas","he","heb","ku","kur","ug","uig"];function OT(n){return Zle.includes(n)?"rtl":"ltr"}function $e(n){return Array.isArray(n)?n:[n]}U.window.CKEDITOR_TRANSLATIONS||(U.window.CKEDITOR_TRANSLATIONS={});function Jle(n,e,t=1,i){if(typeof t!="number")throw new _("translation-service-quantity-not-a-number",null,{quantity:t});let o=i||U.window.CKEDITOR_TRANSLATIONS,r=tce(o);r===1&&(n=Object.keys(o)[0]);let s=e.id||e.string;if(r===0||!ece(n,s,o))return t!==1?e.plural:e.string;let a=o[n].dictionary,l=o[n].getPluralForm||(f=>f===1?0:1),c=a[s];if(typeof c=="string")return c;let d=Number(l(t));return c[d]}function Xle(n){return Array.isArray(n)?n.reduce((e,t)=>Uh(e,t)):n}function ece(n,e,t){return!!t[n]&&!!t[n].dictionary[e]}function tce(n){return Object.keys(n).length}var py=class{uiLanguage;uiLanguageDirection;contentLanguage;contentLanguageDirection;t;translations;constructor({uiLanguage:e="en",contentLanguage:t,translations:i}={}){this.uiLanguage=e,this.contentLanguage=t||this.uiLanguage,this.uiLanguageDirection=OT(this.uiLanguage),this.contentLanguageDirection=OT(this.contentLanguage),this.translations=Xle(i),this.t=(o,r)=>this._t(o,r)}get language(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}_t(e,t=[]){t=$e(t),typeof e=="string"&&(e={string:e});let o=!!e.plural?t[0]:1,r=Jle(this.uiLanguage,e,o,this.translations);return nce(r,t)}};function nce(n,e){return n.replace(/%(\d+)/g,(t,i)=>i<e.length?e[i]:t)}var ft=class extends tt(){_items;_itemMap;_idProperty;_bindToCollection;_bindToExternalToInternalMap;_bindToInternalToExternalMap;_skippedIndexesFromExternal;constructor(e={},t={}){super();let i=ei(e);if(i||(t=e),this._items=[],this._itemMap=new Map,this._idProperty=t.idProperty||"id",this._bindToExternalToInternalMap=new WeakMap,this._bindToInternalToExternalMap=new WeakMap,this._skippedIndexesFromExternal=[],i)for(let o of e)this._items.push(o),this._itemMap.set(this._getItemIdBeforeAdding(o),o)}get length(){return this._items.length}get first(){return this._items[0]||null}get last(){return this._items[this.length-1]||null}add(e,t){return this.addMany([e],t)}addMany(e,t){if(t===void 0)t=this._items.length;else if(t>this._items.length||t<0)throw new _("collection-add-item-invalid-index",this);let i=0;for(let o of e){let r=this._getItemIdBeforeAdding(o),s=t+i;this._items.splice(s,0,o),this._itemMap.set(r,o),this.fire("add",o,s),i++}return this.fire("change",{added:e,removed:[],index:t}),this}get(e){let t;if(typeof e=="string")t=this._itemMap.get(e);else if(typeof e=="number")t=this._items[e];else throw new _("collection-get-invalid-arg",this);return t||null}has(e){if(typeof e=="string")return this._itemMap.has(e);{let t=this._idProperty,i=e[t];return i&&this._itemMap.has(i)}}getIndex(e){let t;return typeof e=="string"?t=this._itemMap.get(e):t=e,t?this._items.indexOf(t):-1}remove(e){let[t,i]=this._remove(e);return this.fire("change",{added:[],removed:[t],index:i}),t}map(e,t){return this._items.map(e,t)}forEach(e,t){this._items.forEach(e,t)}find(e,t){return this._items.find(e,t)}filter(e,t){return this._items.filter(e,t)}clear(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);let e=Array.from(this._items);for(;this.length;)this._remove(0);this.fire("change",{added:[],removed:e,index:0})}bindTo(e){if(this._bindToCollection)throw new _("collection-bind-to-rebind",this);return this._bindToCollection=e,{as:t=>{this._setUpBindToBinding(i=>new t(i))},using:t=>{typeof t=="function"?this._setUpBindToBinding(t):this._setUpBindToBinding(i=>i[t])}}}_setUpBindToBinding(e){let t=this._bindToCollection,i=(o,r,s)=>{let a=t._bindToCollection==this,l=t._bindToInternalToExternalMap.get(r);if(a&&l)this._bindToExternalToInternalMap.set(r,l),this._bindToInternalToExternalMap.set(l,r);else{let c=e(r);if(!c){this._skippedIndexesFromExternal.push(s);return}let d=s;for(let f of this._skippedIndexesFromExternal)s>f&&d--;for(let f of t._skippedIndexesFromExternal)d>=f&&d++;this._bindToExternalToInternalMap.set(r,c),this._bindToInternalToExternalMap.set(c,r),this.add(c,d);for(let f=0;f<t._skippedIndexesFromExternal.length;f++)d<=t._skippedIndexesFromExternal[f]&&t._skippedIndexesFromExternal[f]++}};for(let o of t)i(null,o,t.getIndex(o));this.listenTo(t,"add",i),this.listenTo(t,"remove",(o,r,s)=>{let a=this._bindToExternalToInternalMap.get(r);a&&this.remove(a),this._skippedIndexesFromExternal=this._skippedIndexesFromExternal.reduce((l,c)=>(s<c&&l.push(c-1),s>c&&l.push(c),l),[])})}_getItemIdBeforeAdding(e){let t=this._idProperty,i;if(t in e){if(i=e[t],typeof i!="string")throw new _("collection-add-invalid-id",this);if(this.get(i))throw new _("collection-add-item-already-exists",this)}else e[t]=i=an();return i}_remove(e){let t,i,o,r=!1,s=this._idProperty;if(typeof e=="string"?(i=e,o=this._itemMap.get(i),r=!o,o&&(t=this._items.indexOf(o))):typeof e=="number"?(t=e,o=this._items[t],r=!o,o&&(i=o[s])):(o=e,i=o[s],t=this._items.indexOf(o),r=t==-1||!this._itemMap.get(i)),r)throw new _("collection-remove-404",this);this._items.splice(t,1),this._itemMap.delete(i);let a=this._bindToInternalToExternalMap.get(o);return this._bindToInternalToExternalMap.delete(o),this._bindToExternalToInternalMap.delete(a),this.fire("remove",o,t),[o,t]}[Symbol.iterator](){return this._items[Symbol.iterator]()}};function lt(n){let e=n.next();return e.done?null:e.value}var Et=class extends mn(Ze()){_elements=new Set;_externalViews=new Set;_blurTimeout=null;constructor(){super(),this.set("isFocused",!1),this.set("focusedElement",null)}get elements(){return Array.from(this._elements.values())}get externalViews(){return Array.from(this._externalViews.values())}add(e){if(n7(e))this._addElement(e);else if(t7(e))this._addView(e);else{if(!e.element)throw new _("focustracker-add-view-missing-element",{focusTracker:this,view:e});this._addElement(e.element)}}remove(e){n7(e)?this._removeElement(e):t7(e)?this._removeView(e):this._removeElement(e.element)}_addElement(e){if(this._elements.has(e))throw new _("focustracker-add-element-already-exist",this);this.listenTo(e,"focus",()=>{let t=this.externalViews.find(i=>ice(e,i));t?this._focus(t.element):this._focus(e)},{useCapture:!0}),this.listenTo(e,"blur",()=>{this._blur()},{useCapture:!0}),this._elements.add(e)}_removeElement(e){this._elements.has(e)&&(this.stopListening(e),this._elements.delete(e)),e===this.focusedElement&&this._blur()}_addView(e){e.element&&this._addElement(e.element),this.listenTo(e.focusTracker,"change:focusedElement",()=>{e.focusTracker.focusedElement?e.element&&this._focus(e.element):this._blur()}),this._externalViews.add(e)}_removeView(e){e.element&&this._removeElement(e.element),this.stopListening(e.focusTracker),this._externalViews.delete(e)}destroy(){this.stopListening(),this._elements.clear(),this._externalViews.clear(),this.isFocused=!1,this.focusedElement=null}_focus(e){this._clearBlurTimeout(),this.focusedElement=e,this.isFocused=!0}_blur(){this.elements.find(i=>i.contains(document.activeElement))||this.externalViews.find(i=>i.focusTracker.isFocused&&!i.focusTracker._blurTimeout)||(this._clearBlurTimeout(),this._blurTimeout=setTimeout(()=>{this.focusedElement=null,this.isFocused=!1},0))}_clearBlurTimeout(){clearTimeout(this._blurTimeout),this._blurTimeout=null}};function t7(n){return"focusTracker"in n&&n.focusTracker instanceof Et}function n7(n){return Vi(n)}function ice(n,e){return i7(n,e)?!0:!!e.focusTracker.externalViews.find(t=>i7(n,t))}function i7(n,e){return!!e.element&&e.element.contains(document.activeElement)&&n.contains(e.element)}var Ft=class{_listener;constructor(){this._listener=new(mn())}listenTo(e){this._listener.listenTo(e,"keydown",(t,i)=>{this._listener.fire("_keydown:"+As(i),i)})}set(e,t,i={}){let o=kg(e),r=i.priority;this._listener.listenTo(this._listener,"_keydown:"+o,(s,a)=>{i.filter&&!i.filter(a)||(t(a,()=>{a.preventDefault(),a.stopPropagation(),s.stop()}),s.return=!0)},{priority:r})}press(e){return!!this._listener.fire("_keydown:"+As(e),e)}stopListening(e){this._listener.stopListening(e)}destroy(){this.stopListening()}};function oce(n){let e=new Map;for(let t in n)e.set(t,n[t]);return e}function _i(n){return ei(n)?new Map(n):oce(n)}var rce=1e4;function $T(n,e,t,i){if(Math.max(e.length,n.length)>rce)return n.slice(0,t).concat(e).concat(n.slice(t+i,n.length));{let o=Array.from(n);return o.splice(t,i,...e),o}}function Yh(n,e){let t;function i(...o){i.cancel(),t=setTimeout(()=>n(...o),e)}return i.cancel=()=>{clearTimeout(t)},i}function _7(n){function e(f){return f.length>=40&&f.length<=255?"VALID":"INVALID"}if(!n)return"INVALID";let t="";try{t=atob(n)}catch{return"INVALID"}let i=t.split("-"),o=i[0],r=i[1];if(!r)return e(n);try{atob(r)}catch{try{if(atob(o),!atob(o).length)return e(n)}catch{return e(n)}}if(o.length<40||o.length>255)return"INVALID";let s="";try{atob(o),s=atob(r)}catch{return"INVALID"}if(s.length!==8)return"INVALID";let a=Number(s.substring(0,4)),l=Number(s.substring(4,6))-1,c=Number(s.substring(6,8)),d=new Date(a,l,c);return d<Ele||isNaN(Number(d))?"INVALID":"VALID"}function sce(n){return!!n&&n.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(n)}function ace(n){return!!n&&n.length==1&&/[\ud800-\udbff]/.test(n)}function lce(n){return!!n&&n.length==1&&/[\udc00-\udfff]/.test(n)}function _g(n,e){return ace(n.charAt(e-1))&&lce(n.charAt(e))}function Cg(n,e){return sce(n.charAt(e))}var cce=dce();function vy(n,e){let t=String(n).matchAll(cce);return Array.from(t).some(i=>i.index<e&&e<i.index+i[0].length)}function dce(){let n=[new RegExp("\\p{Emoji}[\\u{E0020}-\\u{E007E}]+\\u{E007F}","u"),new RegExp("\\p{Emoji}\\u{FE0F}?\\u{20E3}","u"),new RegExp("\\p{Emoji}\\u{FE0F}","u"),new RegExp("(?=\\p{General_Category=Other_Symbol})\\p{Emoji}\\p{Emoji_Modifier}*","u")],e=new RegExp("\\p{Regional_Indicator}{2}","u").source,t="(?:"+n.map(o=>o.source).join("|")+")",i=`${e}|${t}(?:\u200D${t})*`;return new RegExp(i,"ug")}var Sy=new WeakMap,C7=!1;function Ps({view:n,element:e,text:t,isDirectHost:i=!0,keepOnFocus:o=!1}){let r=n.document;Sy.has(r)||(Sy.set(r,new Map),r.registerPostFixer(a=>WT(r,a)),r.on("change:isComposing",()=>{n.change(a=>WT(r,a))},{priority:"high"})),e.is("editableElement")&&e.on("change:placeholder",(a,l,c)=>{s(c)}),e.placeholder?s(e.placeholder):t&&s(t),t&&hce();function s(a){Sy.get(r).set(e,{text:a,isDirectHost:i,keepOnFocus:o,hostElement:i?e:null}),n.change(l=>WT(r,l))}}function d8(n,e){return e.hasClass("ck-placeholder")?!1:(n.addClass("ck-placeholder",e),!0)}function u8(n,e){return e.hasClass("ck-placeholder")?(n.removeClass("ck-placeholder",e),!0):!1}function h8(n,e){if(!n.isAttached()||Array.from(n.getChildren()).some(s=>!s.is("uiElement")))return!1;let i=n.document,r=i.selection.anchor;return i.isComposing&&r&&r.parent===n?!1:e||!i.isFocused?!0:!!r&&r.parent!==n}function WT(n,e){let t=Sy.get(n),i=[],o=!1;for(let[r,s]of t)s.isDirectHost&&(i.push(r),E7(e,r,s)&&(o=!0));for(let[r,s]of t){if(s.isDirectHost)continue;let a=uce(r);a&&(i.includes(a)||(s.hostElement=a,E7(e,r,s)&&(o=!0)))}return o}function E7(n,e,t){let{text:i,isDirectHost:o,hostElement:r}=t,s=!1;return r.getAttribute("data-placeholder")!==i&&(n.setAttribute("data-placeholder",i,r),s=!0),(o||e.childCount==1)&&h8(r,t.keepOnFocus)?d8(n,r)&&(s=!0):u8(n,r)&&(s=!0),s}function uce(n){if(n.childCount){let e=n.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function hce(){C7||Ve("enableplaceholder-deprecated-text-option"),C7=!0}var id=class{is(){throw new Error("is() method is abstract")}},od=class extends tt(id){document;parent;constructor(e){super(),this.document=e,this.parent=null}get index(){let e;if(!this.parent)return null;if((e=this.parent.getChildIndex(this))==-1)throw new _("view-node-not-found-in-parent",this);return e}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.root.is("rootElement")}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.index),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),o=e.getAncestors(t),r=0;for(;i[r]==o[r]&&i[r];)r++;return r===0?null:i[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),o=Cn(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}_remove(){this.parent._removeChildren(this.index)}_fireChange(e,t){this.fire(`change:${e}`,t),this.parent&&this.parent._fireChange(e,t)}toJSON(){let e=ny(this);return delete e.parent,e}};od.prototype.is=function(n){return n==="node"||n==="view:node"};var xt=class XT extends od{_textData;constructor(e,t){super(e),this._textData=t}get data(){return this._textData}get _data(){return this.data}set _data(e){this._fireChange("text",this),this._textData=e}isSimilar(e){return e instanceof XT?this===e||this.data===e.data:!1}_clone(){return new XT(this.document,this.data)}};xt.prototype.is=function(n){return n==="$text"||n==="view:$text"||n==="text"||n==="view:text"||n==="node"||n==="view:node"};var Cr=class extends id{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.data.length)throw new _("view-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.data.length)throw new _("view-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get offsetSize(){return this.data.length}get isPartial(){return this.data.length!==this.textNode.data.length}get parent(){return this.textNode.parent}get root(){return this.textNode.root}get document(){return this.textNode.document}getAncestors(e={}){let t=[],i=e.includeSelf?this.textNode:this.parent;for(;i!==null;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}};Cr.prototype.is=function(n){return n==="$textProxy"||n==="view:$textProxy"||n==="textProxy"||n==="view:textProxy"};var Ci=class{_patterns=[];constructor(...e){this.add(...e)}add(...e){for(let t of e)(typeof t=="string"||t instanceof RegExp)&&(t={name:t}),this._patterns.push(t)}match(...e){for(let t of e)for(let i of this._patterns){let o=S7(t,i);if(o)return{element:t,pattern:i,match:o}}return null}matchAll(...e){let t=[];for(let i of e)for(let o of this._patterns){let r=S7(i,o);r&&t.push({element:i,pattern:o,match:r})}return t.length>0?t:null}getElementName(){if(this._patterns.length!==1)return null;let e=this._patterns[0],t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null}};function S7(n,e){if(typeof e=="function")return e(n);let t={};return e.name&&(t.name=mce(e.name,n.name),!t.name)||e.attributes&&(t.attributes=bce(e.attributes,n),!t.attributes)||e.classes&&(t.classes=wce(e.classes,n),!t.classes)||e.styles&&(t.styles=kce(e.styles,n),!t.styles)?null:t}function mce(n,e){return n instanceof RegExp?!!e.match(n):n===e}function N2(n,e,t){let i=fce(n),o=Array.from(e),r=[];if(i.forEach(([s,a])=>{o.forEach(l=>{pce(s,l)&&gce(a,l,t)&&r.push(l)})}),!(!i.length||r.length<i.length))return r}function fce(n){return Array.isArray(n)?n.map(e=>Gt(e)?((e.key===void 0||e.value===void 0)&&Ve("matcher-pattern-missing-key-or-value",e),[e.key,e.value]):[e,!0]):Gt(n)?Object.entries(n):[[n,!0]]}function pce(n,e){return n===!0||n===e||n instanceof RegExp&&e.match(n)}function gce(n,e,t){if(n===!0)return!0;let i=t(e);return n===i||n instanceof RegExp&&!!String(i).match(n)}function bce(n,e){let t=new Set(e.getAttributeKeys());return Gt(n)?(n.style!==void 0&&Ve("matcher-pattern-deprecated-attributes-style-key",n),n.class!==void 0&&Ve("matcher-pattern-deprecated-attributes-class-key",n)):(t.delete("style"),t.delete("class")),N2(n,t,i=>e.getAttribute(i))}function wce(n,e){return N2(n,e.getClassNames(),()=>{})}function kce(n,e){return N2(n,e.getStyleNames(!0),t=>e.getStyle(t))}var Zc=class{_styles;_styleProcessor;constructor(e){this._styles={},this._styleProcessor=e}get isEmpty(){return!Object.entries(this._styles).length}get size(){return this.isEmpty?0:this.getStyleNames().length}setTo(e){this.clear();let t=vce(e);for(let[i,o]of t)this._styleProcessor.toNormalizedForm(i,o,this._styles)}has(e){if(this.isEmpty)return!1;let i=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);return Array.isArray(i)}set(e,t){if(De(e))for(let[i,o]of Object.entries(e))this._styleProcessor.toNormalizedForm(i,o,this._styles);else this._styleProcessor.toNormalizedForm(e,t,this._styles)}remove(e){let t=e2(e);xT(this._styles,t),delete this._styles[e],this._cleanEmptyObjectsOnPath(t)}getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles)}toString(){return this.isEmpty?"":this.getStylesEntries().map(e=>e.join(":")).sort().join(";")+";"}getAsString(e){if(this.isEmpty)return;if(this._styles[e]&&!De(this._styles[e]))return this._styles[e];let i=this._styleProcessor.getReducedForm(e,this._styles).find(([o])=>o===e);if(Array.isArray(i))return i[1]}getStyleNames(e=!1){return this.isEmpty?[]:e?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map(([i])=>i)}clear(){this._styles={}}getStylesEntries(){let e=[],t=Object.keys(this._styles);for(let i of t)e.push(...this._styleProcessor.getReducedForm(i,this._styles));return e}_cleanEmptyObjectsOnPath(e){let t=e.split(".");if(!(t.length>1))return;let o=t.splice(0,t.length-1).join("."),r=Wa(this._styles,o);if(!r)return;!Object.keys(r).length&&this.remove(o)}},im=class{_normalizers;_extractors;_reducers;_consumables;constructor(){this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}toNormalizedForm(e,t,i){if(De(t)){qT(i,e2(e),t);return}if(this._normalizers.has(e)){let o=this._normalizers.get(e),{path:r,value:s}=o(t);qT(i,r,s)}else qT(i,e,t)}getNormalized(e,t){if(!e)return Uh({},t);if(t[e]!==void 0)return t[e];if(this._extractors.has(e)){let i=this._extractors.get(e);if(typeof i=="string")return Wa(t,i);let o=i(e,t);if(o)return o}return Wa(t,e2(e))}getReducedForm(e,t){let i=this.getNormalized(e,t);return i===void 0?[]:this._reducers.has(e)?this._reducers.get(e)(i):[[e,i]]}getStyleNames(e){let t=new Set;for(let i of this._consumables.keys()){let o=this.getNormalized(i,e);o&&(typeof o!="object"||Object.keys(o).length)&&t.add(i)}for(let i of Object.keys(e))t.add(i);return Array.from(t)}getRelatedStyles(e){return this._consumables.get(e)||[]}setNormalizer(e,t){this._normalizers.set(e,t)}setExtractor(e,t){this._extractors.set(e,t)}setReducer(e,t){this._reducers.set(e,t)}setStyleRelation(e,t){this._mapStyleNames(e,t);for(let i of t)this._mapStyleNames(i,[e])}_mapStyleNames(e,t){this._consumables.has(e)||this._consumables.set(e,[]),this._consumables.get(e).push(...t)}};function vce(n){let e=null,t=0,i=0,o=null,r=new Map;if(n==="")return r;n.charAt(n.length-1)!=";"&&(n=n+";");for(let s=0;s<n.length;s++){let a=n.charAt(s);if(e===null)switch(a){case":":o||(o=n.substr(t,s-t),i=s+1);break;case'"':case"'":e=a;break;case";":{let l=n.substr(i,s-i);o&&r.set(o.trim(),l.trim()),o=null,t=s+1;break}}else a===e&&(e=null)}return r}function e2(n){return n.replace("-",".")}function qT(n,e,t){let i=t;De(t)&&(i=Uh({},Wa(n,e),t)),ET(n,e,i)}var co=class m8 extends od{name;_unsafeAttributesToRender=[];_attrs;_children;_classes;_styles;_customProperties=new Map;constructor(e,t,i,o){if(super(e),this.name=t,this._attrs=yce(i),this._children=[],o&&this._insertChild(0,o),this._classes=new Set,this._attrs.has("class")){let r=this._attrs.get("class");x7(this._classes,r),this._attrs.delete("class")}this._styles=new Zc(this.document.stylesProcessor),this._attrs.has("style")&&(this._styles.setTo(this._attrs.get("style")),this._attrs.delete("style"))}get childCount(){return this._children.length}get isEmpty(){return this._children.length===0}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}*getAttributeKeys(){this._classes.size>0&&(yield"class"),this._styles.isEmpty||(yield"style"),yield*it(this._attrs.keys())}*getAttributes(){yield*it(this._attrs.entries()),this._classes.size>0&&(yield["class",this.getAttribute("class")]),this._styles.isEmpty||(yield["style",this.getAttribute("style")])}getAttribute(e){if(e=="class")return this._classes.size>0?[...this._classes].join(" "):void 0;if(e=="style"){let t=this._styles.toString();return t==""?void 0:t}return this._attrs.get(e)}hasAttribute(e){return e=="class"?this._classes.size>0:e=="style"?!this._styles.isEmpty:this._attrs.has(e)}isSimilar(e){if(!(e instanceof m8))return!1;if(this===e)return!0;if(this.name!=e.name||this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size)return!1;for(let[t,i]of this._attrs)if(!e._attrs.has(t)||e._attrs.get(t)!==i)return!1;for(let t of this._classes)if(!e._classes.has(t))return!1;for(let t of this._styles.getStyleNames())if(!e._styles.has(t)||e._styles.getAsString(t)!==this._styles.getAsString(t))return!1;return!0}hasClass(...e){for(let t of e)if(!this._classes.has(t))return!1;return!0}getClassNames(){return this._classes.keys()}getStyle(e){return this._styles.getAsString(e)}getNormalizedStyle(e){return this._styles.getNormalized(e)}getStyleNames(e){return this._styles.getStyleNames(e)}hasStyle(...e){for(let t of e)if(!this._styles.has(t))return!1;return!0}findAncestor(...e){let t=new Ci(...e),i=this.parent;for(;i&&!i.is("documentFragment");){if(t.match(i))return i;i=i.parent}return null}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*it(this._customProperties.entries())}getIdentity(){let e=Array.from(this._classes).sort().join(","),t=this._styles.toString(),i=Array.from(this._attrs).map(o=>`${o[0]}="${o[1]}"`).sort().join(" ");return this.name+(e==""?"":` class="${e}"`)+(t?` style="${t}"`:"")+(i==""?"":` ${i}`)}shouldRenderUnsafeAttribute(e){return this._unsafeAttributesToRender.includes(e)}_clone(e=!1){let t=[];if(e)for(let o of this.getChildren())t.push(o._clone(e));let i=new this.constructor(this.document,this.name,this._attrs,t);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}_appendChild(e){return this._insertChild(this.childCount,e)}_insertChild(e,t){this._fireChange("children",this);let i=0,o=_ce(this.document,t);for(let r of o)r.parent!==null&&r._remove(),r.parent=this,r.document=this.document,this._children.splice(e,0,r),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_setAttribute(e,t){let i=String(t);this._fireChange("attributes",this),e=="class"?x7(this._classes,i):e=="style"?this._styles.setTo(i):this._attrs.set(e,i)}_removeAttribute(e){return this._fireChange("attributes",this),e=="class"?this._classes.size>0?(this._classes.clear(),!0):!1:e=="style"?this._styles.isEmpty?!1:(this._styles.clear(),!0):this._attrs.delete(e)}_addClass(e){this._fireChange("attributes",this);for(let t of $e(e))this._classes.add(t)}_removeClass(e){this._fireChange("attributes",this);for(let t of $e(e))this._classes.delete(t)}_setStyle(e,t){this._fireChange("attributes",this),typeof e!="string"?this._styles.set(e):this._styles.set(e,t)}_removeStyle(e){this._fireChange("attributes",this);for(let t of $e(e))this._styles.remove(t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};co.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="view:element"):n==="element"||n==="view:element"||n==="node"||n==="view:node"};function yce(n){let e=_i(n);for(let[t,i]of e)i===null?e.delete(t):typeof i!="string"&&e.set(t,String(i));return e}function x7(n,e){let t=e.split(/\s+/);n.clear(),t.forEach(i=>n.add(i))}function _ce(n,e){return typeof e=="string"?[new xt(n,e)]:(ei(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new xt(n,t):t instanceof Cr?new xt(n,t.data):t))}var Ds=class extends co{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=f8}};Ds.prototype.is=function(n,e){return e?e===this.name&&(n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function f8(){let n=[...this.getChildren()],e=n[this.childCount-1];if(e&&e.is("element","br"))return this.childCount;for(let t of n)if(!t.is("uiElement"))return null;return this.childCount}var om=class extends Ze(Ds){constructor(e,t,i,o){super(e,t,i,o),this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("placeholder",void 0),this.bind("isReadOnly").to(e),this.bind("isFocused").to(e,"isFocused",r=>r&&e.selection.editableElement==this),this.listenTo(e.selection,"change",()=>{this.isFocused=e.isFocused&&e.selection.editableElement==this})}destroy(){this.stopListening()}};om.prototype.is=function(n,e){return e?e===this.name&&(n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};var A7=Symbol("rootName"),Dg=class extends om{constructor(e,t){super(e,t),this.rootName="main"}get rootName(){return this.getCustomProperty(A7)}set rootName(e){this._setCustomProperty(A7,e)}set _name(e){this.name=e}};Dg.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"):n==="rootElement"||n==="view:rootElement"||n==="editableElement"||n==="view:editableElement"||n==="containerElement"||n==="view:containerElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};var Kc=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;constructor(e={}){if(!e.boundaries&&!e.startPosition)throw new _("view-tree-walker-no-start-position",null);if(e.direction&&e.direction!="forward"&&e.direction!="backward")throw new _("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=H._createAt(e.startPosition):this._position=H._createAt(e.boundaries[e.direction=="backward"?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i;do i=this.position,t=this.next();while(!t.done&&e(t.value));t.done||(this._position=i)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===i.childCount)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o;if(i instanceof xt){if(e.isAtEnd)return this._position=H._createAfter(i),this._next();o=i.data[e.offset]}else o=i.getChild(e.offset);if(o instanceof co){if(!this.shallow)e=new H(o,0);else{if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}return this._position=e,this._formatReturnValue("elementStart",o,t,e,1)}if(o instanceof xt){if(this.singleCharacters)return e=new H(o,0),this._position=e,this._next();let r=o.data.length,s;return o==this._boundaryEndParent?(r=this.boundaries.end.offset,s=new Cr(o,0,r),e=H._createAfter(s)):(s=new Cr(o,0,o.data.length),e.offset++),this._position=e,this._formatReturnValue("text",s,t,e,r)}if(typeof o=="string"){let r;this.singleCharacters?r=1:r=(i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length)-e.offset;let s=new Cr(i,e.offset,r);return e.offset+=r,this._position=e,this._formatReturnValue("text",s,t,e,r)}return e=H._createAfter(i),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",i,t,e)}_previous(){let e=this.position.clone(),t=this.position,i=e.parent;if(i.parent===null&&e.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o;if(i instanceof xt){if(e.isAtStart)return this._position=H._createBefore(i),this._previous();o=i.data[e.offset-1]}else o=i.getChild(e.offset-1);if(o instanceof co)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",o,t,e,1)):(e=new H(o,o.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",o,t,e));if(o instanceof xt){if(this.singleCharacters)return e=new H(o,o.data.length),this._position=e,this._previous();let r=o.data.length,s;if(o==this._boundaryStartParent){let a=this.boundaries.start.offset;s=new Cr(o,a,o.data.length-a),r=s.data.length,e=H._createBefore(s)}else s=new Cr(o,0,o.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",s,t,e,r)}if(typeof o=="string"){let r;if(this.singleCharacters)r=1;else{let a=i===this._boundaryStartParent?this.boundaries.start.offset:0;r=e.offset-a}e.offset-=r;let s=new Cr(i,e.offset,r);return this._position=e,this._formatReturnValue("text",s,t,e,r)}return e=H._createBefore(i),this._position=e,this._formatReturnValue("elementStart",i,t,e,1)}_formatReturnValue(e,t,i,o,r){return t instanceof Cr&&(t.offsetInText+t.data.length==t.textNode.data.length&&(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))?(o=H._createAfter(t.textNode),this._position=o):i=H._createAfter(t.textNode)),t.offsetInText===0&&(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))?(o=H._createBefore(t.textNode),this._position=o):i=H._createBefore(t.textNode))),{done:!1,value:{type:e,item:t,previousPosition:i,nextPosition:o,length:r}}}},H=class Is extends id{parent;offset;constructor(e,t){super(),this.parent=e,this.offset=t}get nodeAfter(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}get nodeBefore(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}get isAtStart(){return this.offset===0}get isAtEnd(){let e=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===e}get root(){return this.parent.root}get editableElement(){let e=this.parent;for(;!(e instanceof om);)if(e.parent)e=e.parent;else return null;return e}getShiftedBy(e){let t=Is._createAt(this),i=t.offset+e;return t.offset=i<0?0:i,t}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new Kc(t);return i.skip(e),i.position}getAncestors(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}isEqual(e){return this.parent==e.parent&&this.offset==e.offset}isBefore(e){return this.compareWith(e)=="before"}isAfter(e){return this.compareWith(e)=="after"}compareWith(e){if(this.root!==e.root)return"different";if(this.isEqual(e))return"same";let t=this.parent.is("node")?this.parent.getPath():[],i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset),i.push(e.offset);let o=Cn(t,i);switch(o){case"prefix":return"before";case"extension":return"after";default:return t[o]<i[o]?"before":"after"}}getWalker(e={}){return e.startPosition=this,new Kc(e)}clone(){return new Is(this.parent,this.offset)}static _createAt(e,t){if(e instanceof Is)return new this(e.parent,e.offset);{let i=e;if(t=="end")t=i.is("$text")?i.data.length:i.childCount;else{if(t=="before")return this._createBefore(i);if(t=="after")return this._createAfter(i);if(t!==0&&!t)throw new _("view-createpositionat-offset-required",i)}return new Is(i,t)}}static _createAfter(e){if(e.is("$textProxy"))return new Is(e.textNode,e.offsetInText+e.data.length);if(!e.parent)throw new _("view-position-after-root",e,{root:e});return new Is(e.parent,e.index+1)}static _createBefore(e){if(e.is("$textProxy"))return new Is(e.textNode,e.offsetInText);if(!e.parent)throw new _("view-position-before-root",e,{root:e});return new Is(e.parent,e.index)}};H.prototype.is=function(n){return n==="position"||n==="view:position"};var Se=class Ka extends id{start;end;constructor(e,t=null){super(),this.start=e.clone(),this.end=t?t.clone():e.clone()}*[Symbol.iterator](){yield*it(new Kc({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){return this.start.parent===this.end.parent}get root(){return this.start.root}getEnlarged(){let e=this.start.getLastMatchingPosition(yy,{direction:"backward"}),t=this.end.getLastMatchingPosition(yy);return e.parent.is("$text")&&e.isAtStart&&(e=H._createBefore(e.parent)),t.parent.is("$text")&&t.isAtEnd&&(t=H._createAfter(t.parent)),new Ka(e,t)}getTrimmed(){let e=this.start.getLastMatchingPosition(yy);if(e.isAfter(this.end)||e.isEqual(this.end))return new Ka(e,e);let t=this.end.getLastMatchingPosition(yy,{direction:"backward"}),i=e.nodeAfter,o=t.nodeBefore;return i&&i.is("$text")&&(e=new H(i,0)),o&&o.is("$text")&&(t=new H(o,o.data.length)),new Ka(e,t)}isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end)}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new Ka(this.start,e.start)),this.containsPosition(e.end)&&t.push(new Ka(e.end,this.end))):t.push(this.clone()),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new Ka(t,i)}return null}getWalker(e={}){return e.boundaries=this,new Kc(e)}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(e=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(t=this.end.parent.previousSibling),e&&e.is("element")&&e===t?e:null}clone(){return new Ka(this.start,this.end)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new Kc(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new Kc(e);yield t.position;for(let i of t)yield i.nextPosition}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}static _createFromParentsAndOffsets(e,t,i,o){return new this(new H(e,t),new H(i,o))}static _createFromPositionAndShift(e,t){let i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount)}static _createOn(e){let t=e.is("$textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(H._createBefore(e),t)}};Se.prototype.is=function(n){return n==="range"||n==="view:range"};function yy(n){return!!(n.item.is("attributeElement")||n.item.is("uiElement"))}var Ms=class p8 extends tt(id){_ranges;_lastRangeBackward;_isFake;_fakeSelectionLabel;constructor(...e){super(),this._ranges=[],this._lastRangeBackward=!1,this._isFake=!1,this._fakeSelectionLabel="",e.length&&this.setTo(...e)}get isFake(){return this._isFake}get fakeSelectionLabel(){return this._fakeSelectionLabel}get anchor(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.end:e.start).clone()}get focus(){if(!this._ranges.length)return null;let e=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?e.start:e.end).clone()}get isCollapsed(){return this.rangeCount===1&&this._ranges[0].isCollapsed}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}get editableElement(){return this.anchor?this.anchor.editableElement:null}*getRanges(){for(let e of this._ranges)yield e.clone()}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?e.clone():null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?e.clone():null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}isEqual(e){if(this.isFake!=e.isFake||this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel||this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}isSimilar(e){if(this.isBackward!=e.isBackward)return!1;let t=bg(this.getRanges()),i=bg(e.getRanges());if(t!=i)return!1;if(t==0)return!0;for(let o of this.getRanges()){o=o.getTrimmed();let r=!1;for(let s of e.getRanges())if(s=s.getTrimmed(),o.start.isEqual(s.start)&&o.end.isEqual(s.end)){r=!0;break}if(!r)return!1}return!0}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]),this._setFakeOptions(o);else if(t instanceof p8||t instanceof jg)this._setRanges(t.getRanges(),t.isBackward),this._setFakeOptions({fake:t.isFake,label:t.fakeSelectionLabel});else if(t instanceof Se)this._setRanges([t],o&&o.backward),this._setFakeOptions(o);else if(t instanceof H)this._setRanges([new Se(t)]),this._setFakeOptions(o);else if(t instanceof od){let r=!!o&&!!o.backward,s;if(i===void 0)throw new _("view-selection-setto-required-second-parameter",this);i=="in"?s=Se._createIn(t):i=="on"?s=Se._createOn(t):s=new Se(H._createAt(t,i)),this._setRanges([s],r),this._setFakeOptions(o)}else if(ei(t))this._setRanges(t,o&&o.backward),this._setFakeOptions(o);else throw new _("view-selection-setto-not-selectable",this);this.fire("change")}setFocus(e,t){if(this.anchor===null)throw new _("view-selection-setfocus-no-ranges",this);let i=H._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let o=this.anchor;this._ranges.pop(),i.compareWith(o)=="before"?this._addRange(new Se(i,o),!0):this._addRange(new Se(o,i)),this.fire("change")}_setRanges(e,t=!1){e=Array.from(e),this._ranges=[];for(let i of e)this._addRange(i);this._lastRangeBackward=!!t}_setFakeOptions(e={}){this._isFake=!!e.fake,this._fakeSelectionLabel=e.fake&&e.label||""}_addRange(e,t=!1){if(!(e instanceof Se))throw new _("view-selection-add-range-not-range",this);this._pushRange(e),this._lastRangeBackward=!!t}_pushRange(e){for(let t of this._ranges)if(e.isIntersecting(t))throw new _("view-selection-range-intersects",this,{addedRange:e,intersectingRange:t});this._ranges.push(new Se(e.start,e.end))}};Ms.prototype.is=function(n){return n==="selection"||n==="view:selection"};var jg=class extends tt(id){_selection;constructor(...e){super(),this._selection=new Ms,this._selection.delegate("change").to(this),e.length&&this._selection.setTo(...e)}get isFake(){return this._selection.isFake}get fakeSelectionLabel(){return this._selection.fakeSelectionLabel}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get isCollapsed(){return this._selection.isCollapsed}get rangeCount(){return this._selection.rangeCount}get isBackward(){return this._selection.isBackward}get editableElement(){return this._selection.editableElement}get _ranges(){return this._selection._ranges}*getRanges(){yield*it(this._selection.getRanges())}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getSelectedElement(){return this._selection.getSelectedElement()}isEqual(e){return this._selection.isEqual(e)}isSimilar(e){return this._selection.isSimilar(e)}_setTo(...e){this._selection.setTo(...e)}_setFocus(e,t){this._selection.setFocus(e,t)}};jg.prototype.is=function(n){return n==="selection"||n=="documentSelection"||n=="view:selection"||n=="view:documentSelection"};var Er=class extends yi{startRange;_eventPhase;_currentTarget;constructor(e,t,i){super(e,t),this.startRange=i,this._eventPhase="none",this._currentTarget=null}get eventPhase(){return this._eventPhase}get currentTarget(){return this._currentTarget}},GT=Symbol("bubbling contexts");function t2(n){class e extends n{fire(i,...o){try{let r=i instanceof yi?i:new yi(this,i),s=KT(this);if(!s.size)return;if(Eg(r,"capturing",this),Zh(s,"$capture",r,...o))return r.return;let a=r.startRange||this.selection.getFirstRange(),l=a?a.getContainedElement():null,c=l?!!g8(s,l):!1,d=l||Cce(a);if(Eg(r,"atTarget",d),!c){if(Zh(s,"$text",r,...o))return r.return;Eg(r,"bubbling",d)}for(;d;){if(d.is("rootElement")){if(Zh(s,"$root",r,...o))return r.return}else if(d.is("element")&&Zh(s,d.name,r,...o))return r.return;if(Zh(s,d,r,...o))return r.return;d=d.parent,Eg(r,"bubbling",d)}return Eg(r,"bubbling",this),Zh(s,"$document",r,...o),r.return}catch(r){_.rethrowUnexpectedError(r,this)}}_addEventListener(i,o,r){let s=$e(r.context||"$document"),a=KT(this);for(let l of s){let c=a.get(l);c||(c=new(tt()),a.set(l,c)),this.listenTo(c,i,o,r)}}_removeEventListener(i,o){let r=KT(this);for(let s of r.values())this.stopListening(s,i,o)}}return e}{let n=t2(Object);["fire","_addEventListener","_removeEventListener"].forEach(e=>{t2[e]=n.prototype[e]})}function Eg(n,e,t){n instanceof Er&&(n._eventPhase=e,n._currentTarget=t)}function Zh(n,e,t,...i){let o=typeof e=="string"?n.get(e):g8(n,e);return o?(o.fire(t,...i),t.stop.called):!1}function g8(n,e){for(let[t,i]of n)if(typeof t=="function"&&t(e))return i;return null}function KT(n){return n[GT]||(n[GT]=new Map),n[GT]}function Cce(n){if(!n)return null;let e=n.start.parent,t=n.end.parent,i=e.getPath(),o=t.getPath();return i.length>o.length?e:t}var Oy=class extends t2(Ze()){selection;roots;stylesProcessor;_postFixers=new Set;constructor(e){super(),this.selection=new jg,this.roots=new ft({idProperty:"rootName"}),this.stylesProcessor=e,this.set("isReadOnly",!1),this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1)}getRoot(e="main"){return this.roots.get(e)}registerPostFixer(e){this._postFixers.add(e)}destroy(){this.roots.forEach(e=>e.destroy()),this.stopListening()}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(t=i(e),t)break;while(t)}},T7=10,Qc=(()=>{class n extends co{static DEFAULT_PRIORITY=T7;_priority=T7;_id=null;_clonesGroup=null;constructor(t,i,o,r){super(t,i,o,r),this.getFillerOffset=Ece}get priority(){return this._priority}get id(){return this._id}getElementsWithSameId(){if(this.id===null)throw new _("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}isSimilar(t){return this.id!==null||t.id!==null?this.id===t.id:super.isSimilar(t)&&this.priority==t.priority}_clone(t=!1){let i=super._clone(t);return i._priority=this._priority,i._id=this._id,i}}return n})();Qc.prototype.is=function(n,e){return e?e===this.name&&(n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"):n==="attributeElement"||n==="view:attributeElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Ece(){if(QT(this))return null;let n=this.parent;for(;n&&n.is("attributeElement");){if(QT(n)>1)return null;n=n.parent}return!n||QT(n)>1?null:this.childCount}function QT(n){return Array.from(n.getChildren()).filter(e=>!e.is("uiElement")).length}var rm=class extends co{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=Sce}_insertChild(e,t){if(t&&(t instanceof od||Array.from(t).length>0))throw new _("view-emptyelement-cannot-add",[this,t]);return 0}};rm.prototype.is=function(n,e){return e?e===this.name&&(n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"):n==="emptyElement"||n==="view:emptyElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Sce(){return null}var Jc=class extends co{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=Ace}_insertChild(e,t){if(t&&(t instanceof od||Array.from(t).length>0))throw new _("view-uielement-cannot-add",[this,t]);return 0}render(e,t){return this.toDomElement(e)}toDomElement(e){let t=e.createElement(this.name);for(let i of this.getAttributeKeys())t.setAttribute(i,this.getAttribute(i));return t}};Jc.prototype.is=function(n,e){return e?e===this.name&&(n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"):n==="uiElement"||n==="view:uiElement"||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function xce(n){n.document.on("arrowKey",(e,t)=>Tce(e,t,n.domConverter),{priority:"low"})}function Ace(){return null}function Tce(n,e,t){if(e.keyCode==_e.arrowright){let i=e.domTarget.ownerDocument.defaultView.getSelection(),o=i.rangeCount==1&&i.getRangeAt(0).collapsed;if(o||e.shiftKey){let r=i.focusNode,s=i.focusOffset,a=t.domPositionToView(r,s);if(a===null)return;let l=!1,c=a.getLastMatchingPosition(d=>(d.item.is("uiElement")&&(l=!0),!!(d.item.is("uiElement")||d.item.is("attributeElement"))));if(l){let d=t.viewPositionToDom(c);o?i.collapse(d.parent,d.offset):i.extend(d.parent,d.offset)}}}}var sm=class extends co{constructor(e,t,i,o){super(e,t,i,o),this.getFillerOffset=Ice}_insertChild(e,t){if(t&&(t instanceof od||Array.from(t).length>0))throw new _("view-rawelement-cannot-add",[this,t]);return 0}render(e,t){}};sm.prototype.is=function(n,e){return e?e===this.name&&(n==="rawElement"||n==="view:rawElement"||n==="element"||n==="view:element"):n==="rawElement"||n==="view:rawElement"||n===this.name||n==="view:"+this.name||n==="element"||n==="view:element"||n==="node"||n==="view:node"};function Ice(){return null}var Za=class extends tt(id){document;_children=[];_customProperties=new Map;constructor(e,t){super(),this.document=e,t&&this._insertChild(0,t)}[Symbol.iterator](){return this._children[Symbol.iterator]()}get childCount(){return this._children.length}get isEmpty(){return this.childCount===0}get root(){return this}get parent(){return null}get name(){}get getFillerOffset(){}getCustomProperty(e){return this._customProperties.get(e)}*getCustomProperties(){yield*it(this._customProperties.entries())}_appendChild(e){return this._insertChild(this.childCount,e)}getChild(e){return this._children[e]}getChildIndex(e){return this._children.indexOf(e)}getChildren(){return this._children[Symbol.iterator]()}_insertChild(e,t){this._fireChange("children",this);let i=0,o=Mce(this.document,t);for(let r of o)r.parent!==null&&r._remove(),r.parent=this,this._children.splice(e,0,r),e++,i++;return i}_removeChildren(e,t=1){this._fireChange("children",this);for(let i=e;i<e+t;i++)this._children[i].parent=null;return this._children.splice(e,t)}_fireChange(e,t){this.fire("change:"+e,t)}_setCustomProperty(e,t){this._customProperties.set(e,t)}_removeCustomProperty(e){return this._customProperties.delete(e)}};Za.prototype.is=function(n){return n==="documentFragment"||n==="view:documentFragment"};function Mce(n,e){return typeof e=="string"?[new xt(n,e)]:(ei(e)||(e=[e]),Array.from(e).map(t=>typeof t=="string"?new xt(n,t):t instanceof Cr?new xt(n,t.data):t))}var Pg=class{document;_cloneGroups=new Map;_slotFactory=null;constructor(e){this.document=e}setSelection(...e){this.document.selection._setTo(...e)}setSelectionFocus(e,t){this.document.selection._setFocus(e,t)}createDocumentFragment(e){return new Za(this.document,e)}createText(e){return new xt(this.document,e)}createAttributeElement(e,t,i={}){let o=new Qc(this.document,e,t);return typeof i.priority=="number"&&(o._priority=i.priority),i.id&&(o._id=i.id),i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createContainerElement(e,t,i={},o={}){let r=null;Gt(i)?o=i:r=i;let s=new Ds(this.document,e,t,r);return o.renderUnsafeAttributes&&s._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),s}createEditableElement(e,t,i={}){let o=new om(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createEmptyElement(e,t,i={}){let o=new rm(this.document,e,t);return i.renderUnsafeAttributes&&o._unsafeAttributesToRender.push(...i.renderUnsafeAttributes),o}createUIElement(e,t,i){let o=new Jc(this.document,e,t);return i&&(o.render=i),o}createRawElement(e,t,i,o={}){let r=new sm(this.document,e,t);return i&&(r.render=i),o.renderUnsafeAttributes&&r._unsafeAttributesToRender.push(...o.renderUnsafeAttributes),r}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Gt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}breakAttributes(e){return e instanceof H?this._breakAttributes(e):this._breakAttributesRange(e)}breakContainer(e){let t=e.parent;if(!t.is("containerElement"))throw new _("view-writer-break-non-container-element",this.document);if(!t.parent)throw new _("view-writer-break-root",this.document);if(e.isAtStart)return H._createBefore(t);if(!e.isAtEnd){let i=t._clone(!1);this.insert(H._createAfter(t),i);let o=new Se(e,H._createAt(t,"end")),r=new H(i,0);this.move(o,r)}return H._createAfter(t)}mergeAttributes(e){let t=e.offset,i=e.parent;if(i.is("$text"))return e;if(i.is("attributeElement")&&i.childCount===0){let s=i.parent,a=i.index;return i._remove(),this._removeFromClonedElementsGroup(i),this.mergeAttributes(new H(s,a))}let o=i.getChild(t-1),r=i.getChild(t);if(!o||!r)return e;if(o.is("$text")&&r.is("$text"))return M7(o,r);if(o.is("attributeElement")&&r.is("attributeElement")&&o.isSimilar(r)){let s=o.childCount;return o._appendChild(r.getChildren()),r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new H(o,s))}return e}mergeContainers(e){let t=e.nodeBefore,i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement"))throw new _("view-writer-merge-containers-invalid-position",this.document);let o=t.getChild(t.childCount-1),r=o instanceof xt?H._createAt(o,"end"):H._createAt(t,"end");return this.move(Se._createIn(i),H._createAt(t,"end")),this.remove(Se._createOn(i)),r}insert(e,t){t=ei(t)?[...t]:[t],b8(t,this.document);let i=t.reduce((s,a)=>{let l=s[s.length-1],c=!a.is("uiElement");return!l||l.breakAttributes!=c?s.push({breakAttributes:c,nodes:[a]}):l.nodes.push(a),s},[]),o=null,r=e;for(let{nodes:s,breakAttributes:a}of i){let l=this._insertNodes(r,s,a);o||(o=l.start),r=l.end}return o?new Se(o,r):new Se(e)}remove(e){let t=e instanceof Se?e:Se._createOn(e);if(Sg(t,this.document),t.isCollapsed)return new Za(this.document);let{start:i,end:o}=this._breakAttributesRange(t,!0),r=i.parent,s=o.offset-i.offset,a=r._removeChildren(i.offset,s);for(let c of a)this._removeFromClonedElementsGroup(c);let l=this.mergeAttributes(i);return t.start=l,t.end=l.clone(),new Za(this.document,a)}clear(e,t){Sg(e,this.document);let i=e.getWalker({direction:"backward",ignoreElementEnd:!0});for(let o of i){let r=o.item,s;if(r.is("element")&&t.isSimilar(r))s=Se._createOn(r);else if(!o.nextPosition.isAfter(e.start)&&r.is("$textProxy")){let a=r.getAncestors().find(l=>l.is("element")&&t.isSimilar(l));a&&(s=Se._createIn(a))}s&&(s.end.isAfter(e.end)&&(s.end=e.end),s.start.isBefore(e.start)&&(s.start=e.start),this.remove(s))}}move(e,t){let i;if(t.isAfter(e.end)){t=this._breakAttributes(t,!0);let o=t.parent,r=o.childCount;e=this._breakAttributesRange(e,!0),i=this.remove(e),t.offset+=o.childCount-r}else i=this.remove(e);return this.insert(t,i)}wrap(e,t){if(!(t instanceof Qc))throw new _("view-writer-wrap-invalid-attribute",this.document);if(Sg(e,this.document),e.isCollapsed){let i=e.start;i.parent.is("element")&&!Dce(i.parent)&&(i=i.getLastMatchingPosition(r=>r.item.is("uiElement"))),i=this._wrapPosition(i,t);let o=this.document.selection;return o.isCollapsed&&o.getFirstPosition().isEqual(e.start)&&this.setSelection(i),new Se(i)}else return this._wrapRange(e,t)}unwrap(e,t){if(!(t instanceof Qc))throw new _("view-writer-unwrap-invalid-attribute",this.document);if(Sg(e,this.document),e.isCollapsed)return e;let{start:i,end:o}=this._breakAttributesRange(e,!0),r=i.parent,s=this._unwrapChildren(r,i.offset,o.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;let l=this.mergeAttributes(s.end);return new Se(a,l)}rename(e,t){let i=new Ds(this.document,e,t.getAttributes());return this.insert(H._createAfter(t),i),this.move(Se._createIn(t),H._createAt(i,0)),this.remove(Se._createOn(t)),i}clearClonedElementsGroup(e){this._cloneGroups.delete(e)}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new Se(e,t)}createRangeOn(e){return Se._createOn(e)}createRangeIn(e){return Se._createIn(e)}createSelection(...e){return new Ms(...e)}createSlot(e="children"){if(!this._slotFactory)throw new _("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,e)}_registerSlotFactory(e){this._slotFactory=e}_clearSlotFactory(){this._slotFactory=null}_insertNodes(e,t,i){let o;if(i?o=n2(e):o=e.parent.is("$text")?e.parent.parent:e.parent,!o)throw new _("view-writer-invalid-position-container",this.document);let r;i?r=this._breakAttributes(e,!0):r=e.parent.is("$text")?YT(e):e;let s=o._insertChild(r.offset,t);for(let d of t)this._addToClonedElementsGroup(d);let a=r.getShiftedBy(s),l=this.mergeAttributes(r);l.isEqual(r)||a.offset--;let c=this.mergeAttributes(a);return new Se(l,c)}_wrapChildren(e,t,i,o){let r=t,s=[];for(;r<i;){let l=e.getChild(r),c=l.is("$text"),d=l.is("attributeElement");if(d&&this._wrapAttributeElement(o,l))s.push(new H(e,r));else if(c||!d||Pce(o,l)){let f=o._clone();l._remove(),f._appendChild(l),e._insertChild(r,f),this._addToClonedElementsGroup(f),s.push(new H(e,r))}else this._wrapChildren(l,0,l.childCount,o);r++}let a=0;for(let l of s){if(l.offset-=a,l.offset==t)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Se._createFromParentsAndOffsets(e,t,e,i)}_unwrapChildren(e,t,i,o){let r=t,s=[];for(;r<i;){let l=e.getChild(r);if(!l.is("attributeElement")){r++;continue}if(l.isSimilar(o)){let c=l.getChildren(),d=l.childCount;l._remove(),e._insertChild(r,c),this._removeFromClonedElementsGroup(l),s.push(new H(e,r),new H(e,r+d)),r+=d,i+=d-1;continue}if(this._unwrapAttributeElement(o,l)){s.push(new H(e,r),new H(e,r+1)),r++;continue}this._unwrapChildren(l,0,l.childCount,o),r++}let a=0;for(let l of s){if(l.offset-=a,l.offset==t||l.offset==i)continue;this.mergeAttributes(l).isEqual(l)||(a++,i--)}return Se._createFromParentsAndOffsets(e,t,e,i)}_wrapRange(e,t){let{start:i,end:o}=this._breakAttributesRange(e,!0),r=i.parent,s=this._wrapChildren(r,i.offset,o.offset,t),a=this.mergeAttributes(s.start);a.isEqual(s.start)||s.end.offset--;let l=this.mergeAttributes(s.end);return new Se(a,l)}_wrapPosition(e,t){if(t.isSimilar(e.parent))return I7(e.clone());e.parent.is("$text")&&(e=YT(e));let i=this.createAttributeElement("_wrapPosition-fake-element");i._priority=Number.POSITIVE_INFINITY,i.isSimilar=()=>!1,e.parent._insertChild(e.offset,i);let o=new Se(e,e.getShiftedBy(1));this.wrap(o,t);let r=new H(i.parent,i.index);i._remove();let s=r.nodeBefore,a=r.nodeAfter;return s instanceof xt&&a instanceof xt?M7(s,a):I7(r)}_wrapAttributeElement(e,t){if(!D7(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&t.hasAttribute(i)&&t.getAttribute(i)!==e.getAttribute(i))return!1;for(let i of e.getStyleNames())if(t.hasStyle(i)&&t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||t.hasAttribute(i)||this.setAttribute(i,e.getAttribute(i),t);for(let i of e.getStyleNames())t.hasStyle(i)||this.setStyle(i,e.getStyle(i),t);for(let i of e.getClassNames())t.hasClass(i)||this.addClass(i,t);return!0}_unwrapAttributeElement(e,t){if(!D7(e,t)||e.name!==t.name||e.priority!==t.priority)return!1;for(let i of e.getAttributeKeys())if(!(i==="class"||i==="style")&&(!t.hasAttribute(i)||t.getAttribute(i)!==e.getAttribute(i)))return!1;if(!t.hasClass(...e.getClassNames()))return!1;for(let i of e.getStyleNames())if(!t.hasStyle(i)||t.getStyle(i)!==e.getStyle(i))return!1;for(let i of e.getAttributeKeys())i==="class"||i==="style"||this.removeAttribute(i,t);return this.removeClass(Array.from(e.getClassNames()),t),this.removeStyle(Array.from(e.getStyleNames()),t),!0}_breakAttributesRange(e,t=!1){let i=e.start,o=e.end;if(Sg(e,this.document),e.isCollapsed){let l=this._breakAttributes(e.start,t);return new Se(l,l)}let r=this._breakAttributes(o,t),s=r.parent.childCount,a=this._breakAttributes(i,t);return r.offset+=r.parent.childCount-s,new Se(a,r)}_breakAttributes(e,t=!1){let i=e.offset,o=e.parent;if(e.parent.is("emptyElement"))throw new _("view-writer-cannot-break-empty-element",this.document);if(e.parent.is("uiElement"))throw new _("view-writer-cannot-break-ui-element",this.document);if(e.parent.is("rawElement"))throw new _("view-writer-cannot-break-raw-element",this.document);if(!t&&o.is("$text")&&i2(o.parent)||i2(o))return e.clone();if(o.is("$text"))return this._breakAttributes(YT(e),t);let r=o.childCount;if(i==r){let s=new H(o.parent,o.index+1);return this._breakAttributes(s,t)}else if(i===0){let s=new H(o.parent,o.index);return this._breakAttributes(s,t)}else{let s=o.index+1,a=o._clone();o.parent._insertChild(s,a),this._addToClonedElementsGroup(a);let l=o.childCount-i,c=o._removeChildren(i,l);a._appendChild(c);let d=new H(o.parent,s);return this._breakAttributes(d,t)}}_addToClonedElementsGroup(e){if(!e.root.is("rootElement"))return;if(e.is("element"))for(let o of e.getChildren())this._addToClonedElementsGroup(o);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i||(i=new Set,this._cloneGroups.set(t,i)),i.add(e),e._clonesGroup=i}_removeFromClonedElementsGroup(e){if(e.is("element"))for(let o of e.getChildren())this._removeFromClonedElementsGroup(o);let t=e.id;if(!t)return;let i=this._cloneGroups.get(t);i&&i.delete(e)}};function Dce(n){return Array.from(n.getChildren()).some(e=>!e.is("uiElement"))}function n2(n){let e=n.parent;for(;!i2(e);){if(!e)return;e=e.parent}return e}function Pce(n,e){return n.priority<e.priority?!0:n.priority>e.priority?!1:n.getIdentity()<e.getIdentity()}function I7(n){let e=n.nodeBefore;if(e&&e.is("$text"))return new H(e,e.data.length);let t=n.nodeAfter;return t&&t.is("$text")?new H(t,0):n}function YT(n){if(n.offset==n.parent.data.length)return new H(n.parent.parent,n.parent.index+1);if(n.offset===0)return new H(n.parent.parent,n.parent.index);let e=n.parent.data.slice(n.offset);return n.parent._data=n.parent.data.slice(0,n.offset),n.parent.parent._insertChild(n.parent.index+1,new xt(n.root.document,e)),new H(n.parent.parent,n.parent.index+1)}function M7(n,e){let t=n.data.length;return n._data+=e.data,e._remove(),new H(n,t)}var Rce=[xt,Qc,Ds,rm,sm,Jc];function b8(n,e){for(let t of n){if(!Rce.some(i=>t instanceof i))throw new _("view-writer-insert-invalid-node-type",e);t.is("$text")||b8(t.getChildren(),e)}}function i2(n){return n&&(n.is("containerElement")||n.is("documentFragment"))}function Sg(n,e){let t=n2(n.start),i=n2(n.end);if(!t||!i||t!==i)throw new _("view-writer-invalid-range-container",e)}function D7(n,e){return n.id===null&&e.id===null}var w8=n=>n.createTextNode("\xA0"),k8=n=>{let e=n.createElement("span");return e.dataset.ckeFiller="true",e.innerText="\xA0",e},v8=n=>{let e=n.createElement("br");return e.dataset.ckeFiller="true",e},zo=7,Rg="\u2060".repeat(zo);function Bi(n){return typeof n=="string"?n.substr(0,zo)===Rg:St(n)&&n.data.substr(0,zo)===Rg}function Xh(n){return n.data.length==zo&&Bi(n)}function P7(n){let e=typeof n=="string"?n:n.data;return Bi(n)?e.slice(zo):e}function Nce(n){n.document.on("arrowKey",Oce,{priority:"low"})}function Oce(n,e){if(e.keyCode==_e.arrowleft){let t=e.domTarget.ownerDocument.defaultView.getSelection();if(t.rangeCount==1&&t.getRangeAt(0).collapsed){let i=t.getRangeAt(0).startContainer,o=t.getRangeAt(0).startOffset;Bi(i)&&o<=zo&&t.collapse(i,0)}}}var xy=class extends Ze(){domDocuments=new Set;domConverter;markedAttributes=new Set;markedChildren=new Set;markedTexts=new Set;selection;_inlineFiller=null;_fakeSelectionContainer=null;constructor(e,t){super(),this.domConverter=e,this.selection=t,this.set("isFocused",!1),this.set("isSelecting",!1),this.set("isComposing",!1),ie.isBlink&&!ie.isAndroid&&this.on("change:isSelecting",()=>{this.isSelecting||this.render()})}markToSync(e,t){if(e==="text")this.domConverter.mapViewToDom(t.parent)&&this.markedTexts.add(t);else{if(!this.domConverter.mapViewToDom(t))return;if(e==="attributes")this.markedAttributes.add(t);else if(e==="children")this.markedChildren.add(t);else throw new _("view-renderer-unknown-type",this)}}render(){if(this.isComposing&&!ie.isAndroid)return;let e=null,t=ie.isBlink&&!ie.isAndroid?!this.isSelecting:!0;for(let i of this.markedChildren)this._updateChildrenMappings(i);t?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller),e&&e.parent.is("$text")&&(e=H._createBefore(e.parent)));for(let i of this.markedAttributes)this._updateAttrs(i);for(let i of this.markedChildren)this._updateChildren(i,{inlineFillerPosition:e});for(let i of this.markedTexts)!this.markedChildren.has(i.parent)&&this.domConverter.mapViewToDom(i.parent)&&this._updateText(i,{inlineFillerPosition:e});if(t)if(e){let i=this.domConverter.viewPositionToDom(e),o=i.parent.ownerDocument;Bi(i.parent)?this._inlineFiller=i.parent:this._inlineFiller=R7(o,i.parent,i.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}_updateChildrenMappings(e){let t=this.domConverter.mapViewToDom(e);if(!t)return;let i=Array.from(t.childNodes),o=Array.from(this.domConverter.viewChildrenToDom(e,{withChildren:!1})),r=this._diffNodeLists(i,o),s=this._findUpdateActions(r,i,o,Fce);if(s.indexOf("update")!==-1){let a={equal:0,insert:0,delete:0};for(let l of s)if(l==="update"){let c=a.equal+a.insert,d=a.equal+a.delete,f=e.getChild(c);f&&!f.is("uiElement")&&!f.is("rawElement")&&this._updateElementMappings(f,i[d]),HT(o[c]),a.equal++}else a[l]++}}_updateElementMappings(e,t){this.domConverter.unbindDomElement(t),this.domConverter.bindElements(t,e),this.markedChildren.add(e),this.markedAttributes.add(e)}_getInlineFillerPosition(){let e=this.selection.getFirstPosition();return e.parent.is("$text")?H._createBefore(e.parent):e}_isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=this.domConverter.viewPositionToDom(e);return!!(t&&St(t.parent)&&Bi(t.parent))}_removeInlineFiller(){let e=this._inlineFiller;if(!Bi(e))throw new _("view-renderer-filler-was-lost",this);Xh(e)?e.remove():e.data=e.data.substr(zo),this._inlineFiller=null}_needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed)return!1;let e=this.selection.getFirstPosition(),t=e.parent,i=e.offset;if(!this.domConverter.mapViewToDom(t.root)||!t.is("element")||!Lce(t))return!1;let o=e.nodeBefore,r=e.nodeAfter;return!(o instanceof xt||r instanceof xt||i===t.getFillerOffset()&&(!o||!o.is("element","br"))||ie.isAndroid&&(o||r))}_updateText(e,t){let i=this.domConverter.findCorrespondingDomText(e),r=this.domConverter.viewToDom(e).data,s=t.inlineFillerPosition;s&&s.parent==e.parent&&s.offset==e.index&&(r=Rg+r),this._updateTextNode(i,r)}_updateAttrs(e){let t=this.domConverter.mapViewToDom(e);if(t){for(let i of t.attributes){let o=i.name;e.hasAttribute(o)||this.domConverter.removeDomElementAttribute(t,o)}for(let i of e.getAttributeKeys())this.domConverter.setDomElementAttribute(t,i,e.getAttribute(i),e)}}_updateChildren(e,t){let i=this.domConverter.mapViewToDom(e);if(!i)return;if(ie.isAndroid){let f=null;for(let p of Array.from(i.childNodes)){if(f&&St(f)&&St(p)){i.normalize();break}f=p}}let o=t.inlineFillerPosition,r=i.childNodes,s=Array.from(this.domConverter.viewChildrenToDom(e,{bind:!0}));o&&o.parent===e&&R7(i.ownerDocument,s,o.offset);let a=this._diffNodeLists(r,s),l=this._findUpdateActions(a,r,s,Vce),c=0,d=new Set;for(let f of l)f==="delete"?(d.add(r[c]),HT(r[c])):(f==="equal"||f==="update")&&c++;c=0;for(let f of l)f==="insert"?(zT(i,c,s[c]),c++):f==="update"?(this._updateTextNode(r[c],s[c].data),c++):f==="equal"&&(this._markDescendantTextToSync(this.domConverter.domToView(s[c])),c++);for(let f of d)f.parentNode||this.domConverter.unbindDomElement(f)}_diffNodeLists(e,t){return e=Hce(e,this._fakeSelectionContainer),Wh(e,t,Bce.bind(null,this.domConverter))}_findUpdateActions(e,t,i,o){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1)return e;let r=[],s=[],a=[],l={equal:0,insert:0,delete:0};for(let c of e)c==="insert"?a.push(i[l.equal+l.insert]):c==="delete"?s.push(t[l.equal+l.delete]):(r=r.concat(Wh(s,a,o).map(d=>d==="equal"?"update":d)),r.push("equal"),s=[],a=[]),l[c]++;return r.concat(Wh(s,a,o).map(c=>c==="equal"?"update":c))}_updateTextNode(e,t){let i=e.data;i!=t&&(ie.isAndroid&&this.isComposing&&i.replace(/\u00A0/g," ")==t.replace(/\u00A0/g," ")||this._updateTextNodeInternal(e,t))}_updateTextNodeInternal(e,t){let i=LT(e.data,t);for(let o of i)o.type==="insert"?e.insertData(o.index,o.values.join("")):e.deleteData(o.index,o.howMany)}_markDescendantTextToSync(e){if(e){if(e.is("$text"))this.markedTexts.add(e);else if(e.is("element"))for(let t of e.getChildren())this._markDescendantTextToSync(t)}}_updateSelection(){if(ie.isBlink&&!ie.isAndroid&&this.isSelecting&&!this.markedChildren.size)return;if(this.selection.rangeCount===0){this._removeDomSelection(),this._removeFakeSelection();return}let e=this.domConverter.mapViewToDom(this.selection.editableElement);!this.isFocused||!e||(this.selection.isFake?this._updateFakeSelection(e):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(e)):this.isComposing&&ie.isAndroid||this._updateDomSelection(e))}_updateFakeSelection(e){let t=e.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=Uce(t));let i=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(i,this.selection),!this._fakeSelectionNeedsUpdate(e))return;(!i.parentElement||i.parentElement!=e)&&e.appendChild(i),i.textContent=this.selection.fakeSelectionLabel||"\xA0";let o=t.getSelection(),r=t.createRange();o.removeAllRanges(),r.selectNodeContents(i),o.addRange(r)}_updateDomSelection(e){let t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t))return;let i=this.domConverter.viewPositionToDom(this.selection.anchor),o=this.domConverter.viewPositionToDom(this.selection.focus);t.setBaseAndExtent(i.parent,i.offset,o.parent,o.offset),ie.isGecko&&zce(o,t)}_domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e))return!0;let t=e&&this.domConverter.domSelectionToView(e);return!(t&&this.selection.isEqual(t)||!this.selection.isCollapsed&&this.selection.isSimilar(t))}_fakeSelectionNeedsUpdate(e){let t=this._fakeSelectionContainer,i=e.ownerDocument.getSelection();return!t||t.parentElement!==e||i.anchorNode!==t&&!t.contains(i.anchorNode)?!0:t.textContent!==this.selection.fakeSelectionLabel}_removeDomSelection(){for(let e of this.domDocuments){let t=e.getSelection();if(t.rangeCount){let i=e.activeElement,o=this.domConverter.mapDomToView(i);i&&o&&t.removeAllRanges()}}}_removeFakeSelection(){let e=this._fakeSelectionContainer;e&&e.remove()}_updateFocus(){if(this.isFocused){let e=this.selection.editableElement;e&&this.domConverter.focus(e)}}};function Lce(n){if(n.getAttribute("contenteditable")=="false")return!1;let e=n.findAncestor(t=>t.hasAttribute("contenteditable"));return!e||e.getAttribute("contenteditable")=="true"}function R7(n,e,t){let i=e instanceof Array?e:e.childNodes,o=i[t];if(St(o))return o.data=Rg+o.data,o;{let r=n.createTextNode(Rg);return Array.isArray(e)?i.splice(t,0,r):zT(e,t,r),r}}function Fce(n,e){return yr(n)&&yr(e)&&!St(n)&&!St(e)&&!Qh(n)&&!Qh(e)&&n.tagName.toLowerCase()===e.tagName.toLowerCase()}function Vce(n,e){return yr(n)&&yr(e)&&St(n)&&St(e)}function Bce(n,e,t){return e===t?!0:St(e)&&St(t)?e.data===t.data:!!(n.isBlockFiller(e)&&n.isBlockFiller(t))}function zce(n,e){let t=n.parent,i=n.offset;if(St(t)&&Xh(t)&&(i=Kh(t)+1,t=t.parentNode),t.nodeType!=Node.ELEMENT_NODE||i!=t.childNodes.length-1)return;let o=t.childNodes[i];o&&o.tagName=="BR"&&e.addRange(e.getRangeAt(0))}function Hce(n,e){let t=Array.from(n);return t.length==0||!e||t[t.length-1]==e&&t.pop(),t}function Uce(n){let e=n.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent="\xA0",e}var jce=v8(U.document),$ce=w8(U.document),Wce=k8(U.document),_y="data-ck-unsafe-attribute-",N7="data-ck-unsafe-element",Xc=class{document;renderingMode;blockFillerMode;preElements;blockElements;inlineObjectElements;unsafeElements;_domDocument;_domToViewMapping=new WeakMap;_viewToDomMapping=new WeakMap;_fakeSelectionMapping=new WeakMap;_rawContentElementMatcher=new Ci;_inlineObjectElementMatcher=new Ci;_elementsWithTemporaryCustomProperties=new Set;constructor(e,{blockFillerMode:t,renderingMode:i="editing"}={}){this.document=e,this.renderingMode=i,this.blockFillerMode=t||(i==="editing"?"br":"nbsp"),this.preElements=["pre","textarea"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument=this.renderingMode==="editing"?U.document:U.document.implementation.createHTMLDocument("")}bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new Ms(t))}fakeSelectionToView(e){return this._fakeSelectionMapping.get(e)}bindElements(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}unbindDomElement(e){let t=this._domToViewMapping.get(e);if(t){this._domToViewMapping.delete(e),this._viewToDomMapping.delete(t);for(let i of e.children)this.unbindDomElement(i)}}bindDocumentFragments(e,t){this._domToViewMapping.set(e,t),this._viewToDomMapping.set(t,e)}shouldRenderAttribute(e,t,i){return this.renderingMode==="data"?!0:(e=e.toLowerCase(),e.startsWith("on")||e==="srcdoc"&&t.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i)?!1:i==="img"&&(e==="src"||e==="srcset")||i==="source"&&e==="srcset"?!0:!t.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}setContentOf(e,t){if(this.renderingMode==="data"){e.innerHTML=t;return}let i=new DOMParser().parseFromString(t,"text/html"),o=i.createDocumentFragment(),r=i.body.childNodes;for(;r.length>0;)o.appendChild(r[0]);let s=i.createTreeWalker(o,NodeFilter.SHOW_ELEMENT),a=[],l;for(;l=s.nextNode();)a.push(l);for(let c of a){for(let f of c.getAttributeNames())this.setDomElementAttribute(c,f,c.getAttribute(f));let d=c.tagName.toLowerCase();this._shouldRenameElement(d)&&(L7(d),c.replaceWith(this._createReplacementDomElement(d,c)))}for(;e.firstChild;)e.firstChild.remove();e.append(o)}viewToDom(e,t={}){if(e.is("$text")){let i=this._processDataFromViewText(e);return this._domDocument.createTextNode(i)}else{let i=e;if(this.mapViewToDom(i))if(i.getCustomProperty("editingPipeline:doNotReuseOnce"))this._elementsWithTemporaryCustomProperties.add(i);else return this.mapViewToDom(i);let o;if(i.is("documentFragment"))o=this._domDocument.createDocumentFragment(),t.bind&&this.bindDocumentFragments(o,i);else{if(i.is("uiElement"))return i.name==="$comment"?o=this._domDocument.createComment(i.getCustomProperty("$rawContent")):o=i.render(this._domDocument,this),t.bind&&this.bindElements(o,i),o;this._shouldRenameElement(i.name)?(L7(i.name),o=this._createReplacementDomElement(i.name)):i.hasAttribute("xmlns")?o=this._domDocument.createElementNS(i.getAttribute("xmlns"),i.name):o=this._domDocument.createElement(i.name),i.is("rawElement")&&i.render(o,this),t.bind&&this.bindElements(o,i);for(let r of i.getAttributeKeys())this.setDomElementAttribute(o,r,i.getAttribute(r),i)}if(t.withChildren!==!1)for(let r of this.viewChildrenToDom(i,t))o instanceof HTMLTemplateElement?o.content.appendChild(r):o.appendChild(r);return o}}setDomElementAttribute(e,t,i,o){let r=this.shouldRenderAttribute(t,i,e.tagName.toLowerCase())||o&&o.shouldRenderUnsafeAttribute(t);if(r||Ve("domconverter-unsafe-attribute-detected",{domElement:e,key:t,value:i}),!wy(t)){Ve("domconverter-invalid-attribute-detected",{domElement:e,key:t,value:i});return}e.hasAttribute(t)&&!r?e.removeAttribute(t):e.hasAttribute(_y+t)&&r&&e.removeAttribute(_y+t),e.setAttribute(r?t:_y+t,i)}removeDomElementAttribute(e,t){t!=N7&&(e.removeAttribute(t),e.removeAttribute(_y+t))}*viewChildrenToDom(e,t={}){let i=e.getFillerOffset&&e.getFillerOffset(),o=0;for(let r of e.getChildren()){i===o&&(yield this._getBlockFiller());let s=r.is("element")&&!!r.getCustomProperty("dataPipeline:transparentRendering")&&!lt(r.getAttributes());if(s&&this.renderingMode=="data")if(r.is("rawElement")){let a=this._domDocument.createElement(r.name);r.render(a,this),yield*it([...a.childNodes])}else yield*it(this.viewChildrenToDom(r,t));else s&&Ve("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:r}),yield this.viewToDom(r,t);o++}i===o&&(yield this._getBlockFiller())}viewRangeToDom(e){let t=this.viewPositionToDom(e.start),i=this.viewPositionToDom(e.end),o=this._domDocument.createRange();return o.setStart(t.parent,t.offset),o.setEnd(i.parent,i.offset),o}viewPositionToDom(e){let t=e.parent;if(t.is("$text")){let i=this.findCorrespondingDomText(t);if(!i)return null;let o=e.offset;return Bi(i)&&(o+=zo),{parent:i,offset:o}}else{let i,o,r;if(e.offset===0){if(i=this.mapViewToDom(t),!i)return null;r=i.childNodes[0]}else{let a=e.nodeBefore;if(o=a.is("$text")?this.findCorrespondingDomText(a):this.mapViewToDom(a),!o)return null;i=o.parentNode,r=o.nextSibling}if(St(r)&&Bi(r))return{parent:r,offset:zo};let s=o?Kh(o)+1:0;return{parent:i,offset:s}}}domToView(e,t={}){let i=[],o=this._domToView(e,t,i),r=o.next().value;return!r||(o.next(),this._processDomInlineNodes(null,i,t),r.is("$text")&&r.data.length==0)?null:r}*domChildrenToView(e,t={},i=[]){let o=[];e instanceof HTMLTemplateElement?o=[...e.content.childNodes]:o=[...e.childNodes];for(let r=0;r<o.length;r++){let s=o[r],a=this._domToView(s,t,i),l=a.next().value;l!==null&&(this._isBlockViewElement(l)&&this._processDomInlineNodes(e,i,t),yield l,a.next())}this._processDomInlineNodes(e,i,t)}domSelectionToView(e){if(Kce(e))return new Ms([]);if(e.rangeCount===1){let o=e.getRangeAt(0).startContainer;St(o)&&(o=o.parentNode);let r=this.fakeSelectionToView(o);if(r)return r}let t=this.isDomSelectionBackward(e),i=[];for(let o=0;o<e.rangeCount;o++){let r=e.getRangeAt(o),s=this.domRangeToView(r);s&&i.push(s)}return new Ms(i,{backward:t})}domRangeToView(e){let t=this.domPositionToView(e.startContainer,e.startOffset),i=this.domPositionToView(e.endContainer,e.endOffset);return t&&i?new Se(t,i):null}domPositionToView(e,t=0){if(this.isBlockFiller(e))return this.domPositionToView(e.parentNode,Kh(e));let i=this.mapDomToView(e);if(i&&(i.is("uiElement")||i.is("rawElement")))return H._createBefore(i);if(St(e)){if(Xh(e))return this.domPositionToView(e.parentNode,Kh(e));let o=this.findCorrespondingViewText(e),r=t;return o?(Bi(e)&&(r-=zo,r=r<0?0:r),new H(o,r)):null}else{if(t===0){let o=this.mapDomToView(e);if(o)return new H(o,0)}else{let o=e.childNodes[t-1];if(St(o)&&Xh(o)||o&&this.isBlockFiller(o))return this.domPositionToView(o.parentNode,Kh(o));let r=St(o)?this.findCorrespondingViewText(o):this.mapDomToView(o);if(r&&r.parent)return new H(r.parent,r.index+1)}return null}}mapDomToView(e){return this.getHostViewElement(e)||this._domToViewMapping.get(e)}findCorrespondingViewText(e){if(Xh(e))return null;let t=this.getHostViewElement(e);if(t)return t;let i=e.previousSibling;if(i){if(!this.isElement(i))return null;let o=this.mapDomToView(i);if(o){let r=o.nextSibling;return r instanceof xt?r:null}}else{let o=this.mapDomToView(e.parentNode);if(o){let r=o.getChild(0);return r instanceof xt?r:null}}return null}mapViewToDom(e){return this._viewToDomMapping.get(e)}findCorrespondingDomText(e){let t=e.previousSibling;return t&&this.mapViewToDom(t)?this.mapViewToDom(t).nextSibling:!t&&e.parent&&this.mapViewToDom(e.parent)?this.mapViewToDom(e.parent).childNodes[0]:null}focus(e){let t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){let{scrollX:i,scrollY:o}=U.window,r=[];O7(t,s=>{let{scrollLeft:a,scrollTop:l}=s;r.push([a,l])}),t.focus(),O7(t,s=>{let[a,l]=r.shift();s.scrollLeft=a,s.scrollTop=l}),U.window.scrollTo(i,o)}}_clearDomSelection(){let e=this.mapViewToDom(this.document.selection.editableElement);if(!e)return;let t=e.ownerDocument.defaultView.getSelection(),i=this.domSelectionToView(t);i&&i.rangeCount>0&&t.removeAllRanges()}isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE}isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE}isBlockFiller(e){return this.blockFillerMode=="br"?e.isEqualNode(jce):e.tagName==="BR"&&y8(e,this.blockElements)&&e.parentNode.childNodes.length===1?!0:e.isEqualNode(Wce)||Gce(e,this.blockElements)}isDomSelectionBackward(e){if(e.isCollapsed)return!1;let t=this._domDocument.createRange();try{t.setStart(e.anchorNode,e.anchorOffset),t.setEnd(e.focusNode,e.focusOffset)}catch{return!1}let i=t.collapsed;return t.detach(),i}getHostViewElement(e){let t=VT(e);for(t.pop();t.length;){let i=t.pop(),o=this._domToViewMapping.get(i);if(o&&(o.is("uiElement")||o.is("rawElement")))return o}return null}isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset)}registerRawContentMatcher(e){this._rawContentElementMatcher.add(e)}registerInlineObjectMatcher(e){this._inlineObjectElementMatcher.add(e)}_clearTemporaryCustomProperties(){for(let e of this._elementsWithTemporaryCustomProperties)e._removeCustomProperty("editingPipeline:doNotReuseOnce");this._elementsWithTemporaryCustomProperties.clear()}_getBlockFiller(){switch(this.blockFillerMode){case"nbsp":return w8(this._domDocument);case"markedNbsp":return k8(this._domDocument);case"br":return v8(this._domDocument)}}_isDomSelectionPositionCorrect(e,t){if(St(e)&&Bi(e)&&t<zo||this.isElement(e)&&Bi(e.childNodes[t]))return!1;let i=this.mapDomToView(e);return!(i&&(i.is("uiElement")||i.is("rawElement")))}*_domToView(e,t,i){if(this.isBlockFiller(e))return null;let o=this.getHostViewElement(e);if(o)return o;if(Qh(e)&&t.skipComments)return null;if(St(e)){if(Xh(e))return null;{let r=e.data;if(r==="")return null;let s=new xt(this.document,r);return i.push(s),s}}else{let r=this.mapDomToView(e);if(r)return this._isInlineObjectElement(r)&&i.push(r),r;if(this.isDocumentFragment(e))r=new Za(this.document),t.bind&&this.bindDocumentFragments(e,r);else{r=this._createViewElement(e,t),t.bind&&this.bindElements(e,r);let a=e.attributes;if(a)for(let l=a.length,c=0;c<l;c++)r._setAttribute(a[c].name,a[c].value);if(this._isViewElementWithRawContent(r,t))return r._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(r)||i.push(r),r;if(Qh(e))return r._setCustomProperty("$rawContent",e.data),r}yield r;let s=[];if(t.withChildren!==!1)for(let a of this.domChildrenToView(e,t,s))r._appendChild(a);if(this._isInlineObjectElement(r))i.push(r),this._processDomInlineNodes(null,s,t);else for(let a of s)i.push(a)}}_processDomInlineNodes(e,t,i){if(!t.length||e&&!this.isDocumentFragment(e)&&!this._isBlockDomElement(e))return;let o=!1;for(let r=0;r<t.length;r++){let s=t[r];if(!s.is("$text")){o=!1;continue}let a,l=!1;if(this._isPreFormatted(s))a=P7(s.data);else{a=s.data.replace(/[ \n\t\r]{1,}/g," "),l=/[^\S\u00A0]/.test(a.charAt(a.length-1));let c=r>0?t[r-1]:null,d=r+1<t.length?t[r+1]:null,f=!c||c.is("element")&&c.name=="br"||o,p=d?!1:!Bi(s.data);i.withChildren!==!1&&(f&&(a=a.replace(/^ /,"")),p&&(a=a.replace(/ $/,""))),a=P7(a),a=a.replace(/ \u00A0/g,"  ");let g=d&&d.is("element")&&d.name!="br",w=d&&d.is("$text")&&d.data.charAt(0)==" ";(/[ \u00A0]\u00A0$/.test(a)||!d||g||w)&&(a=a.replace(/\u00A0$/," ")),(f||c&&c.is("element")&&c.name!="br")&&(a=a.replace(/^\u00A0/," "))}a.length==0&&s.parent?(s._remove(),t.splice(r,1),r--):(s._data=a,o=l)}t.length=0}_processDataFromViewText(e){let t=e.data;if(this._isPreFormatted(e))return t;if(t.charAt(0)==" "){let i=this._getTouchingInlineViewNode(e,!1);(i&&i.is("$textProxy")&&this._nodeEndsWithSpace(i)||!i)&&(t="\xA0"+t.substr(1))}if(t.charAt(t.length-1)==" "){let i=this._getTouchingInlineViewNode(e,!0),o=i&&i.is("$textProxy")&&i.data.charAt(0)==" ";(t.charAt(t.length-2)==" "||!i||o)&&(t=t.substr(0,t.length-1)+"\xA0")}return t.replace(/ {2}/g," \xA0")}_nodeEndsWithSpace(e){if(this._isPreFormatted(e))return!1;let t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" "}_isPreFormatted(e){if(qce(e,this.preElements))return!0;for(let t of e.getAncestors({parentFirst:!0}))if(!(!t.is("element")||!t.hasStyle("white-space")||t.getStyle("white-space")==="inherit"))return["pre","pre-wrap","break-spaces"].includes(t.getStyle("white-space"));return!1}_getTouchingInlineViewNode(e,t){let i=new Kc({startPosition:t?H._createAfter(e):H._createBefore(e),direction:t?"forward":"backward"});for(let{item:o}of i){if(o.is("$textProxy"))return o;if(o.is("element")&&o.getCustomProperty("dataPipeline:transparentRendering"))continue;if(o.is("element","br"))return null;if(this._isInlineObjectElement(o))return o;if(o.is("containerElement"))return null}return null}_isBlockDomElement(e){return this.isElement(e)&&this.blockElements.includes(e.tagName.toLowerCase())}_isBlockViewElement(e){return e.is("element")&&this.blockElements.includes(e.name)}_isInlineObjectElement(e){return e.is("element")?e.name=="br"||this.inlineObjectElements.includes(e.name)||!!this._inlineObjectElementMatcher.match(e):!1}_createViewElement(e,t){if(Qh(e))return new Jc(this.document,"$comment");let i=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();return new co(this.document,i)}_isViewElementWithRawContent(e,t){return t.withChildren!==!1&&e.is("element")&&!!this._rawContentElementMatcher.match(e)}_shouldRenameElement(e){let t=e.toLowerCase();return this.renderingMode==="editing"&&this.unsafeElements.includes(t)}_createReplacementDomElement(e,t){let i=this._domDocument.createElement("span");if(i.setAttribute(N7,e),t){for(;t.firstChild;)i.appendChild(t.firstChild);for(let o of t.getAttributeNames())i.setAttribute(o,t.getAttribute(o))}return i}};function qce(n,e){return n.getAncestors().some(t=>t.is("element")&&e.includes(t.name))}function O7(n,e){let t=n;for(;t;)e(t),t=t.parentElement}function Gce(n,e){return n.isEqualNode($ce)&&y8(n,e)&&n.parentNode.childNodes.length===1}function y8(n,e){let t=n.parentNode;return!!t&&!!t.tagName&&e.includes(t.tagName.toLowerCase())}function L7(n){n==="script"&&Ve("domconverter-unsafe-script-element-detected"),n==="style"&&Ve("domconverter-unsafe-style-element-detected")}function Kce(n){if(!ie.isGecko||!n.rangeCount)return!1;let e=n.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch{return!0}return!1}var ti=class extends mn(){view;document;_isEnabled=!1;constructor(e){super(),this.view=e,this.document=e.document}get isEnabled(){return this._isEnabled}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}destroy(){this.disable(),this.stopListening()}checkShouldIgnoreEventFromTarget(e){return e&&e.nodeType===3&&(e=e.parentNode),!e||e.nodeType!==1?!1:e.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}},Sr=class{view;document;domEvent;domTarget;constructor(e,t,i){this.view=e,this.document=e.document,this.domEvent=t,this.domTarget=t.target,Ih(this,i)}get target(){return this.view.domConverter.mapDomToView(this.domTarget)}preventDefault(){this.domEvent.preventDefault()}stopPropagation(){this.domEvent.stopPropagation()}},uo=class extends ti{useCapture=!1;usePassive=!1;observe(e){(typeof this.domEventType=="string"?[this.domEventType]:this.domEventType).forEach(i=>{this.listenTo(e,i,(o,r)=>{this.isEnabled&&!this.checkShouldIgnoreEventFromTarget(r.target)&&this.onDomEvent(r)},{useCapture:this.useCapture,usePassive:this.usePassive})})}stopObserving(e){this.stopListening(e)}fire(e,t,i){this.isEnabled&&this.document.fire(e,new Sr(this.view,t,i))}},o2=class extends uo{domEventType=["keydown","keyup"];onDomEvent(e){let t={keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,get keystroke(){return As(this)}};this.fire(e.type,e,t)}},r2=class extends ti{_fireSelectionChangeDoneDebounced;constructor(e){super(e),this._fireSelectionChangeDoneDebounced=lo(t=>{this.document.fire("selectionChangeDone",t)},200)}observe(){let e=this.document;e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&i.preventDefault()},{context:"$capture"}),e.on("arrowKey",(t,i)=>{e.selection.isFake&&this.isEnabled&&this._handleSelectionMove(i.keyCode)},{priority:"lowest"})}stopObserving(){}destroy(){super.destroy(),this._fireSelectionChangeDoneDebounced.cancel()}_handleSelectionMove(e){let t=this.document.selection,i=new Ms(t.getRanges(),{backward:t.isBackward,fake:!1});(e==_e.arrowleft||e==_e.arrowup)&&i.setTo(i.getFirstPosition()),(e==_e.arrowright||e==_e.arrowdown)&&i.setTo(i.getLastPosition());let o={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}},Ay=class extends ti{domConverter;_config;_domElements;_mutationObserver;constructor(e){super(e),this._config={childList:!0,characterData:!0,subtree:!0},this.domConverter=e.domConverter,this._domElements=new Set,this._mutationObserver=new window.MutationObserver(this._onMutations.bind(this))}flush(){this._onMutations(this._mutationObserver.takeRecords())}observe(e){this._domElements.add(e),this.isEnabled&&this._mutationObserver.observe(e,this._config)}stopObserving(e){if(this._domElements.delete(e),this.isEnabled){this._mutationObserver.disconnect();for(let t of this._domElements)this._mutationObserver.observe(t,this._config)}}enable(){super.enable();for(let e of this._domElements)this._mutationObserver.observe(e,this._config)}disable(){super.disable(),this._mutationObserver.disconnect()}destroy(){super.destroy(),this._mutationObserver.disconnect()}_onMutations(e){if(e.length===0)return;let t=this.domConverter,i=new Set,o=new Set;for(let s of e){let a=t.mapDomToView(s.target);a&&(a.is("uiElement")||a.is("rawElement")||s.type==="childList"&&!this._isBogusBrMutation(s)&&o.add(a))}for(let s of e){let a=t.mapDomToView(s.target);if(!(a&&(a.is("uiElement")||a.is("rawElement")))&&s.type==="characterData"){let l=t.findCorrespondingViewText(s.target);l&&!o.has(l.parent)?i.add(l):!l&&Bi(s.target)&&o.add(t.mapDomToView(s.target.parentNode))}}let r=[];for(let s of i)r.push({type:"text",node:s});for(let s of o){let a=t.mapViewToDom(s),l=Array.from(s.getChildren()),c=Array.from(t.domChildrenToView(a,{withChildren:!1}));_T(l,c,Qce)||r.push({type:"children",node:s})}r.length&&this.document.fire("mutations",{mutations:r})}_isBogusBrMutation(e){let t=null;return e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1&&(t=this.domConverter.domToView(e.addedNodes[0],{withChildren:!1})),t&&t.is("element","br")}};function Qce(n,e){if(!Array.isArray(n))return n===e?!0:n.is("$text")&&e.is("$text")?n.data===e.data:!1}var ed=class extends uo{_renderTimeoutId=null;_isFocusChanging=!1;domEventType=["focus","blur"];constructor(e){super(e),this.useCapture=!0;let t=this.document;t.on("focus",()=>this._handleFocus()),t.on("blur",(i,o)=>this._handleBlur(o)),t.on("beforeinput",()=>{t.isFocused||this._handleFocus()},{priority:"highest"})}flush(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}onDomEvent(e){this.fire(e.type,e)}destroy(){this._clearTimeout(),super.destroy()}_handleFocus(){this._clearTimeout(),this._isFocusChanging=!0,this._renderTimeoutId=setTimeout(()=>{this._renderTimeoutId=null,this.flush(),this.view.change(()=>{})},50)}_handleBlur(e){let t=this.document.selection.editableElement;(t===null||t===e.target)&&(this.document.isFocused=!1,this._isFocusChanging=!1,this.view.change(()=>{}))}_clearTimeout(){this._renderTimeoutId&&(clearTimeout(this._renderTimeoutId),this._renderTimeoutId=null)}},s2=class extends ti{mutationObserver;focusObserver;selection;domConverter;_documents;_fireSelectionChangeDoneDebounced;_clearInfiniteLoopInterval;_documentIsSelectingInactivityTimeoutDebounced;_loopbackCounter;constructor(e){super(e),this.mutationObserver=e.getObserver(Ay),this.focusObserver=e.getObserver(ed),this.selection=this.document.selection,this.domConverter=e.domConverter,this._documents=new WeakSet,this._fireSelectionChangeDoneDebounced=lo(t=>{this.document.fire("selectionChangeDone",t)},200),this._clearInfiniteLoopInterval=setInterval(()=>this._clearInfiniteLoop(),1e3),this._documentIsSelectingInactivityTimeoutDebounced=lo(()=>this.document.isSelecting=!1,5e3),this._loopbackCounter=0}observe(e){let t=e.ownerDocument,i=()=>{this.document.isSelecting=!0,this._documentIsSelectingInactivityTimeoutDebounced()},o=()=>{this.document.isSelecting&&(this._handleSelectionChange(t),this.document.isSelecting=!1,this._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(e,"selectstart",i,{priority:"highest"}),this.listenTo(e,"keydown",o,{priority:"highest",useCapture:!0}),this.listenTo(e,"keyup",o,{priority:"highest",useCapture:!0}),!this._documents.has(t)&&(this.listenTo(t,"mouseup",o,{priority:"highest",useCapture:!0}),this.listenTo(t,"selectionchange",()=>{this.document.isComposing&&!ie.isAndroid||(this._handleSelectionChange(t),this._documentIsSelectingInactivityTimeoutDebounced())}),this.listenTo(this.view.document,"compositionstart",()=>{this._handleSelectionChange(t)},{priority:"lowest"}),this._documents.add(t))}stopObserving(e){this.stopListening(e)}destroy(){super.destroy(),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}_reportInfiniteLoop(){}_handleSelectionChange(e){if(!this.isEnabled)return;let t=e.defaultView.getSelection();if(this.checkShouldIgnoreEventFromTarget(t.anchorNode))return;this.mutationObserver.flush();let i=this.domConverter.domSelectionToView(t);if(i.rangeCount==0){this.view.hasDomSelection=!1;return}if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t))){if(++this._loopbackCounter>60){this._reportInfiniteLoop();return}if(this.selection.isSimilar(i))this.view.forceRender();else{let o={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}}_clearInfiniteLoop(){this._loopbackCounter=0}},a2=class extends uo{domEventType=["compositionstart","compositionupdate","compositionend"];constructor(e){super(e);let t=this.document;t.on("compositionstart",()=>{t.isComposing=!0},{priority:"low"}),t.on("compositionend",()=>{t.isComposing=!1},{priority:"low"})}onDomEvent(e){this.fire(e.type,e,{data:e.data})}};var Ng=class{_files;_native;constructor(e,t={}){this._files=t.cacheFiles?F7(e):null,this._native=e}get files(){return this._files||(this._files=F7(this._native)),this._files}get types(){return this._native.types}getData(e){return this._native.getData(e)}setData(e,t){this._native.setData(e,t)}set effectAllowed(e){this._native.effectAllowed=e}get effectAllowed(){return this._native.effectAllowed}set dropEffect(e){this._native.dropEffect=e}get dropEffect(){return this._native.dropEffect}setDragImage(e,t,i){this._native.setDragImage(e,t,i)}get isCanceled(){return this._native.dropEffect=="none"||!!this._native.mozUserCancelled}};function F7(n){let e=Array.from(n.files||[]),t=Array.from(n.items||[]);return e.length?e:t.filter(i=>i.kind==="file").map(i=>i.getAsFile())}var l2=class extends uo{domEventType="beforeinput";onDomEvent(e){let t=e.getTargetRanges(),i=this.view,o=i.document,r=null,s=null,a=[];if(e.dataTransfer&&(r=new Ng(e.dataTransfer)),e.data!==null?s=e.data:r&&(s=r.getData("text/plain")),o.selection.isFake)a=Array.from(o.selection.getRanges());else if(t.length)a=t.map(l=>{let c=i.domConverter.domPositionToView(l.startContainer,l.startOffset),d=i.domConverter.domPositionToView(l.endContainer,l.endOffset);if(c)return i.createRange(c,d);if(d)return i.createRange(d)}).filter(l=>!!l);else if(ie.isAndroid){let l=e.target.ownerDocument.defaultView.getSelection();a=Array.from(i.domConverter.domSelectionToView(l).getRanges())}if(ie.isAndroid&&e.inputType=="insertCompositionText"&&s&&s.endsWith(`
`)){this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:[i.createRange(a[0].end)]});return}if(e.inputType=="insertText"&&s&&s.includes(`
`)){let l=s.split(/\n{1,2}/g),c=a;for(let d=0;d<l.length;d++){let f=l[d];f!=""&&(this.fire(e.type,e,{data:f,dataTransfer:r,targetRanges:c,inputType:e.inputType,isComposing:e.isComposing}),c=[o.selection.getFirstRange()]),d+1<l.length&&(this.fire(e.type,e,{inputType:"insertParagraph",targetRanges:c}),c=[o.selection.getFirstRange()])}return}this.fire(e.type,e,{data:s,dataTransfer:r,targetRanges:a,inputType:e.inputType,isComposing:e.isComposing})}},c2=class extends ti{constructor(e){super(e),this.document.on("keydown",(t,i)=>{if(this.isEnabled&&v7(i.keyCode)){let o=new Er(this.document,"arrowKey",this.document.selection.getFirstRange());this.document.fire(o,i),o.stop.called&&t.stop()}})}observe(){}stopObserving(){}},d2=class extends ti{constructor(e){super(e);let t=this.document;t.on("keydown",(i,o)=>{if(!this.isEnabled||o.keyCode!=_e.tab||o.ctrlKey)return;let r=new Er(t,"tab",t.selection.getFirstRange());t.fire(r,o),r.stop.called&&i.stop()})}observe(){}stopObserving(){}},am=class extends Ze(){document;domConverter;domRoots=new Map;_renderer;_initialDomRootAttributes=new WeakMap;_observers=new Map;_writer;_ongoingChange=!1;_postFixersInProgress=!1;_renderingDisabled=!1;_hasChangedSinceTheLastRendering=!1;constructor(e){super(),this.document=new Oy(e),this.domConverter=new Xc(this.document),this.set("isRenderingInProgress",!1),this.set("hasDomSelection",!1),this._renderer=new xy(this.domConverter,this.document.selection),this._renderer.bind("isFocused","isSelecting","isComposing").to(this.document,"isFocused","isSelecting","isComposing"),this._writer=new Pg(this.document),this.addObserver(Ay),this.addObserver(ed),this.addObserver(s2),this.addObserver(o2),this.addObserver(r2),this.addObserver(a2),this.addObserver(c2),this.addObserver(l2),this.addObserver(d2),Nce(this),xce(this),this.on("render",()=>{this._render(),this.document.fire("layoutChanged"),this._hasChangedSinceTheLastRendering=!1}),this.listenTo(this.document.selection,"change",()=>{this._hasChangedSinceTheLastRendering=!0}),this.listenTo(this.document,"change:isFocused",()=>{this._hasChangedSinceTheLastRendering=!0}),ie.isiOS&&this.listenTo(this.document,"blur",(t,i)=>{this.domConverter.mapDomToView(i.domEvent.relatedTarget)||this.domConverter._clearDomSelection()}),this.listenTo(this.document,"mutations",(t,{mutations:i})=>{i.forEach(o=>this._renderer.markToSync(o.type,o.node))},{priority:"low"}),this.listenTo(this.document,"mutations",()=>{this.forceRender()},{priority:"lowest"})}attachDomRoot(e,t="main"){let i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();let o={};for(let{name:s,value:a}of Array.from(e.attributes))o[s]=a,s==="class"?this._writer.addClass(a.split(" "),i):i.hasAttribute(s)||this._writer.setAttribute(s,a,i);this._initialDomRootAttributes.set(e,o);let r=()=>{this._writer.setAttribute("contenteditable",(!i.isReadOnly).toString(),i),i.isReadOnly?this._writer.addClass("ck-read-only",i):this._writer.removeClass("ck-read-only",i)};r(),this.domRoots.set(t,e),this.domConverter.bindElements(e,i),this._renderer.markToSync("children",i),this._renderer.markToSync("attributes",i),this._renderer.domDocuments.add(e.ownerDocument),i.on("change:children",(s,a)=>this._renderer.markToSync("children",a)),i.on("change:attributes",(s,a)=>this._renderer.markToSync("attributes",a)),i.on("change:text",(s,a)=>this._renderer.markToSync("text",a)),i.on("change:isReadOnly",()=>this.change(r)),i.on("change",()=>{this._hasChangedSinceTheLastRendering=!0});for(let s of this._observers.values())s.observe(e,t)}detachDomRoot(e){let t=this.domRoots.get(e);Array.from(t.attributes).forEach(({name:o})=>t.removeAttribute(o));let i=this._initialDomRootAttributes.get(t);for(let o in i)t.setAttribute(o,i[o]);this.domRoots.delete(e),this.domConverter.unbindDomElement(t);for(let o of this._observers.values())o.stopObserving(t)}getDomRoot(e="main"){return this.domRoots.get(e)}addObserver(e){let t=this._observers.get(e);if(t)return t;t=new e(this),this._observers.set(e,t);for(let[i,o]of this.domRoots)t.observe(o,i);return t.enable(),t}getObserver(e){return this._observers.get(e)}disableObservers(){for(let e of this._observers.values())e.disable()}enableObservers(){for(let e of this._observers.values())e.enable()}scrollToTheSelection({alignToTop:e,forceScroll:t,viewportOffset:i=20,ancestorOffset:o=20}={}){let r=this.document.selection.getFirstRange();if(!r)return;let s=Nn({alignToTop:e,forceScroll:t,viewportOffset:i,ancestorOffset:o});typeof i=="number"&&(i={top:i,bottom:i,left:i,right:i});let a={target:this.domConverter.viewRangeToDom(r),viewportOffset:i,ancestorOffset:o,alignToTop:e,forceScroll:t};this.fire("scrollToTheSelection",a,s),UT(a)}focus(){if(!this.document.isFocused){let e=this.document.selection.editableElement;e&&(this.domConverter.focus(e),this.forceRender())}}change(e){if(this.isRenderingInProgress||this._postFixersInProgress)throw new _("cannot-change-view-tree",this);try{if(this._ongoingChange)return e(this._writer);this._ongoingChange=!0;let t=e(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),t}catch(t){_.rethrowUnexpectedError(t,this)}}forceRender(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(ed).flush(),this.change(()=>{})}destroy(){for(let e of this._observers.values())e.destroy();this.document.destroy(),this.stopListening()}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new Se(e,t)}createRangeOn(e){return Se._createOn(e)}createRangeIn(e){return Se._createIn(e)}createSelection(...e){return new Ms(...e)}_disableRendering(e){this._renderingDisabled=e,e==!1&&this.change(()=>{})}_render(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}};var xr=class{is(){throw new Error("is() method is abstract")}},rd=class extends xr{parent=null;_attrs;_index=null;_startOffset=null;constructor(e){super(),this._attrs=_i(e)}get document(){return null}get index(){return this._index}get startOffset(){return this._startOffset}get offsetSize(){return 1}get endOffset(){return this.startOffset===null?null:this.startOffset+this.offsetSize}get nextSibling(){let e=this.index;return e!==null&&this.parent.getChild(e+1)||null}get previousSibling(){let e=this.index;return e!==null&&this.parent.getChild(e-1)||null}get root(){let e=this;for(;e.parent;)e=e.parent;return e}isAttached(){return this.parent===null?!1:this.root.isAttached()}getPath(){let e=[],t=this;for(;t.parent;)e.unshift(t.startOffset),t=t.parent;return e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}getCommonAncestor(e,t={}){let i=this.getAncestors(t),o=e.getAncestors(t),r=0;for(;i[r]==o[r]&&i[r];)r++;return r===0?null:i[r-1]}isBefore(e){if(this==e||this.root!==e.root)return!1;let t=this.getPath(),i=e.getPath(),o=Cn(t,i);switch(o){case"prefix":return!0;case"extension":return!1;default:return t[o]<i[o]}}isAfter(e){return this==e||this.root!==e.root?!1:!this.isBefore(e)}hasAttribute(e){return this._attrs.has(e)}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}toJSON(){let e={};return this._attrs.size&&(e.attributes=Array.from(this._attrs).reduce((t,i)=>(t[i[0]]=i[1],t),{})),e}_clone(e){return new this.constructor(this._attrs)}_remove(){this.parent._removeChildren(this.index)}_setAttribute(e,t){this._attrs.set(e,t)}_setAttributesTo(e){this._attrs=_i(e)}_removeAttribute(e){return this._attrs.delete(e)}_clearAttributes(){this._attrs.clear()}};rd.prototype.is=function(n){return n==="node"||n==="model:node"};var Yc=class{_nodes=[];_offsetToNode=[];constructor(e){e&&this._insertNodes(0,e)}[Symbol.iterator](){return this._nodes[Symbol.iterator]()}get length(){return this._nodes.length}get maxOffset(){return this._offsetToNode.length}getNode(e){return this._nodes[e]||null}getNodeAtOffset(e){return this._offsetToNode[e]||null}getNodeIndex(e){return e.index}getNodeStartOffset(e){return e.startOffset}indexToOffset(e){if(e==this._nodes.length)return this.maxOffset;let t=this._nodes[e];if(!t)throw new _("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(t)}offsetToIndex(e){if(e==this._offsetToNode.length)return this._nodes.length;let t=this._offsetToNode[e];if(!t)throw new _("model-nodelist-offset-out-of-bounds",this,{offset:e,nodeList:this});return this.getNodeIndex(t)}_insertNodes(e,t){for(let s of t)if(!(s instanceof rd))throw new _("model-nodelist-insertnodes-not-node",this);let i=Array.from(t),o=Yce(i),r=this.indexToOffset(e);this._nodes=$T(this._nodes,i,e,0),this._offsetToNode=$T(this._offsetToNode,o,r,0);for(let s=e;s<this._nodes.length;s++)this._nodes[s]._index=s,this._nodes[s]._startOffset=r,r+=this._nodes[s].offsetSize}_removeNodes(e,t=1){if(t==0)return[];let i=this.indexToOffset(e),o=this._nodes.splice(e,t),r=o[o.length-1],s=r.startOffset+r.offsetSize-i;this._offsetToNode.splice(i,s);for(let a of o)a._index=null,a._startOffset=null;for(let a=e;a<this._nodes.length;a++)this._nodes[a]._index=a,this._nodes[a]._startOffset=i,i+=this._nodes[a].offsetSize;return o}toJSON(){return this._nodes.map(e=>e.toJSON())}};function Yce(n){let e=[];for(let t of n){let i=e.length;e.length+=t.offsetSize,e.fill(t,i)}return e}var pt=class n extends rd{_data;constructor(e,t){super(t),this._data=e||""}get offsetSize(){return this.data.length}get data(){return this._data}toJSON(){let e=super.toJSON();return e.data=this.data,e}_clone(){return new n(this.data,this.getAttributes())}static fromJSON(e){return new n(e.data,e.attributes)}};pt.prototype.is=function(n){return n==="$text"||n==="model:$text"||n==="text"||n==="model:text"||n==="node"||n==="model:node"};var zi=class extends xr{textNode;data;offsetInText;constructor(e,t,i){if(super(),this.textNode=e,t<0||t>e.offsetSize)throw new _("model-textproxy-wrong-offsetintext",this);if(i<0||t+i>e.offsetSize)throw new _("model-textproxy-wrong-length",this);this.data=e.data.substring(t,t+i),this.offsetInText=t}get startOffset(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null}get offsetSize(){return this.data.length}get endOffset(){return this.startOffset!==null?this.startOffset+this.offsetSize:null}get isPartial(){return this.offsetSize!==this.textNode.offsetSize}get parent(){return this.textNode.parent}get root(){return this.textNode.root}getPath(){let e=this.textNode.getPath();return e.length>0&&(e[e.length-1]+=this.offsetInText),e}getAncestors(e={}){let t=[],i=e.includeSelf?this:this.parent;for(;i;)t[e.parentFirst?"push":"unshift"](i),i=i.parent;return t}hasAttribute(e){return this.textNode.hasAttribute(e)}getAttribute(e){return this.textNode.getAttribute(e)}getAttributes(){return this.textNode.getAttributes()}getAttributeKeys(){return this.textNode.getAttributeKeys()}};zi.prototype.is=function(n){return n==="$textProxy"||n==="model:$textProxy"||n==="textProxy"||n==="model:textProxy"};var dt=class n extends rd{name;_children=new Yc;constructor(e,t,i){super(t),this.name=e,i&&this._insertChild(0,i)}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}offsetToIndex(e){return this._children.offsetToIndex(e)}getNodeByPath(e){let t=this;for(let i of e)t=t.getChildAtOffset(i);return t}findAncestor(e,t={}){let i=t.includeSelf?this:this.parent;for(;i;){if(i.name===e)return i;i=i.parent}return null}toJSON(){let e=super.toJSON();if(e.name=this.name,this._children.length>0){e.children=[];for(let t of this._children)e.children.push(t.toJSON())}return e}_clone(e=!1){let t=e?Array.from(this._children).map(i=>i._clone(!0)):void 0;return new n(this.name,this.getAttributes(),t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=Zce(t);for(let o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let o of i)o.parent=null;return i}static fromJSON(e){let t;if(e.children){t=[];for(let i of e.children)i.name?t.push(n.fromJSON(i)):t.push(pt.fromJSON(i))}return new n(e.name,e.attributes,t)}};dt.prototype.is=function(n,e){return e?e===this.name&&(n==="element"||n==="model:element"):n==="element"||n==="model:element"||n==="node"||n==="model:node"};function Zce(n){return typeof n=="string"?[new pt(n)]:(ei(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new pt(e):e instanceof zi?new pt(e.data,e.getAttributes()):e))}var Hi=class{direction;boundaries;singleCharacters;shallow;ignoreElementEnd;_position;_boundaryStartParent;_boundaryEndParent;_visitedParent;constructor(e){if(!e||!e.boundaries&&!e.startPosition)throw new _("model-tree-walker-no-start-position",null);let t=e.direction||"forward";if(t!="forward"&&t!="backward")throw new _("model-tree-walker-unknown-direction",e,{direction:t});this.direction=t,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=N._createAt(this.boundaries[this.direction=="backward"?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent}[Symbol.iterator](){return this}get position(){return this._position}skip(e){let t,i,o,r;do o=this.position,r=this._visitedParent,{done:t,value:i}=this.next();while(!t&&e(i));t||(this._position=o,this._visitedParent=r)}next(){return this.direction=="forward"?this._next():this._previous()}_next(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset)return{done:!0,value:void 0};if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset)return{done:!0,value:void 0};let o=Ig(t,i),r=o||_8(t,i,o);if(r instanceof dt){if(!this.shallow)t.path.push(0),this._visitedParent=r;else{if(this.boundaries&&this.boundaries.end.isBefore(t))return{done:!0,value:void 0};t.offset++}return this._position=t,Gc("elementStart",r,e,t,1)}if(r instanceof pt){let s;if(this.singleCharacters)s=1;else{let c=r.endOffset;this._boundaryEndParent==i&&this.boundaries.end.offset<c&&(c=this.boundaries.end.offset),s=c-t.offset}let a=t.offset-r.startOffset,l=new zi(r,a,s);return t.offset+=s,this._position=t,Gc("text",l,e,t,s)}return t.path.pop(),t.offset++,this._position=t,this._visitedParent=i.parent,this.ignoreElementEnd?this._next():Gc("elementEnd",i,e,t)}_previous(){let e=this.position,t=this.position.clone(),i=this._visitedParent;if(i.parent===null&&t.offset===0)return{done:!0,value:void 0};if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset)return{done:!0,value:void 0};let o=t.parent,r=Ig(t,o),s=r||C8(t,o,r);if(s instanceof dt)return t.offset--,this.shallow?(this._position=t,Gc("elementStart",s,e,t,1)):(t.path.push(s.maxOffset),this._position=t,this._visitedParent=s,this.ignoreElementEnd?this._previous():Gc("elementEnd",s,e,t));if(s instanceof pt){let a;if(this.singleCharacters)a=1;else{let d=s.startOffset;this._boundaryStartParent==i&&this.boundaries.start.offset>d&&(d=this.boundaries.start.offset),a=t.offset-d}let l=t.offset-s.startOffset,c=new zi(s,l-a,a);return t.offset-=a,this._position=t,Gc("text",c,e,t,a)}return t.path.pop(),this._position=t,this._visitedParent=i.parent,Gc("elementStart",i,e,t,1)}};function Gc(n,e,t,i,o){return{done:!1,value:{type:n,item:e,previousPosition:t,nextPosition:i,length:o}}}var N=class n extends xr{root;path;stickiness;constructor(e,t,i="toNone"){if(super(),!e.is("element")&&!e.is("documentFragment"))throw new _("model-position-root-invalid",e);if(!(t instanceof Array)||t.length===0)throw new _("model-position-path-incorrect-format",e,{path:t});e.is("rootElement")?t=t.slice():(t=[...e.getPath(),...t],e=e.root),this.root=e,this.path=t,this.stickiness=i}get offset(){return this.path[this.path.length-1]}set offset(e){this.path[this.path.length-1]=e}get parent(){let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)throw new _("model-position-path-incorrect",this,{position:this});if(e.is("$text"))throw new _("model-position-path-incorrect",this,{position:this});return e}get index(){return this.parent.offsetToIndex(this.offset)}get textNode(){return Ig(this,this.parent)}get nodeAfter(){let e=this.parent;return _8(this,e,Ig(this,e))}get nodeBefore(){let e=this.parent;return C8(this,e,Ig(this,e))}get isAtStart(){return this.offset===0}get isAtEnd(){return this.offset==this.parent.maxOffset}isValid(){if(this.offset<0)return!1;let e=this.root;for(let t=0;t<this.path.length-1;t++)if(e=e.getChildAtOffset(this.path[t]),!e)return!1;return this.offset<=e.maxOffset}compareWith(e){if(this.root!=e.root)return"different";let t=Cn(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after"}}getLastMatchingPosition(e,t={}){t.startPosition=this;let i=new Hi(t);return i.skip(e),i.position}getParentPath(){return this.path.slice(0,-1)}getAncestors(){let e=this.parent;return e.is("documentFragment")?[e]:e.getAncestors({includeSelf:!0})}findAncestor(e){let t=this.parent;return t.is("element")?t.findAncestor(e,{includeSelf:!0}):null}getCommonPath(e){if(this.root!=e.root)return[];let t=Cn(this.path,e.path),i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i)}getCommonAncestor(e){let t=this.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]==i[o]&&t[o];)o++;return o===0?null:t[o-1]}getShiftedBy(e){let t=this.clone(),i=t.offset+e;return t.offset=i<0?0:i,t}isAfter(e){return this.compareWith(e)=="after"}isBefore(e){return this.compareWith(e)=="before"}isEqual(e){return this.compareWith(e)=="same"}isTouching(e){if(this.root!==e.root)return!1;let t=Math.min(this.path.length,e.path.length);for(let i=0;i<t;i++){let o=this.path[i]-e.path[i];if(o<-1||o>1)return!1;if(o===1)return V7(e,this,i);if(o===-1)return V7(this,e,i)}return this.path.length===e.path.length?!0:this.path.length>e.path.length?u2(this.path,t):u2(e.path,t)}hasSameParentAs(e){if(this.root!==e.root)return!1;let t=this.getParentPath(),i=e.getParentPath();return Cn(t,i)=="same"}getTransformedByOperation(e){let t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=n._createAt(this);break}return t}_getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany)}_getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany)}_getTransformedBySplitOperation(e){let t=e.movedRange;return t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext"?this._getCombined(e.splitPosition,e.moveTargetPosition):e.graveyardPosition?this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1):this._getTransformedByInsertion(e.insertionPosition,1)}_getTransformedByMergeOperation(e){let t=e.movedRange,i=t.containsPosition(this)||t.start.isEqual(this),o;return i?(o=this._getCombined(e.sourcePosition,e.targetPosition),e.sourcePosition.isBefore(e.targetPosition)&&(o=o._getTransformedByDeletion(e.deletionPosition,1))):this.isEqual(e.deletionPosition)?o=n._createAt(e.deletionPosition):o=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1),o}_getTransformedByDeletion(e,t){let i=n._createAt(this);if(this.root!=e.root)return i;if(Cn(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset)return null;i.offset-=t}}else if(Cn(e.getParentPath(),this.getParentPath())=="prefix"){let o=e.path.length-1;if(e.offset<=this.path[o]){if(e.offset+t>this.path[o])return null;i.path[o]-=t}}return i}_getTransformedByInsertion(e,t){let i=n._createAt(this);if(this.root!=e.root)return i;if(Cn(e.getParentPath(),this.getParentPath())=="same")(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious")&&(i.offset+=t);else if(Cn(e.getParentPath(),this.getParentPath())=="prefix"){let o=e.path.length-1;e.offset<=this.path[o]&&(i.path[o]+=t)}return i}_getTransformedByMove(e,t,i){if(t=t._getTransformedByDeletion(e,i),e.isEqual(t))return n._createAt(this);let o=this._getTransformedByDeletion(e,i);return o===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious"?this._getCombined(e,t):o._getTransformedByInsertion(t,i)}_getCombined(e,t){let i=e.path.length-1,o=n._createAt(t);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[i]-e.offset,o.path=[...o.path,...this.path.slice(i+1)],o}toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}clone(){return new this.constructor(this.root,this.path,this.stickiness)}static _createAt(e,t,i="toNone"){if(e instanceof n)return new n(e.root,e.path,e.stickiness);{let o=e;if(t=="end")t=o.maxOffset;else{if(t=="before")return this._createBefore(o,i);if(t=="after")return this._createAfter(o,i);if(t!==0&&!t)throw new _("model-createpositionat-offset-required",[this,e])}if(!o.is("element")&&!o.is("documentFragment"))throw new _("model-position-parent-incorrect",[this,e]);let r=o.getPath();return r.push(t),new this(o.root,r,i)}}static _createAfter(e,t){if(!e.parent)throw new _("model-position-after-root",[this,e],{root:e});return this._createAt(e.parent,e.endOffset,t)}static _createBefore(e,t){if(!e.parent)throw new _("model-position-before-root",e,{root:e});return this._createAt(e.parent,e.startOffset,t)}static fromJSON(e,t){if(e.root==="$graveyard"){let i=new n(t.graveyard,e.path);return i.stickiness=e.stickiness,i}if(!t.getRoot(e.root))throw new _("model-position-fromjson-no-root",t,{rootName:e.root});return new n(t.getRoot(e.root),e.path,e.stickiness)}};N.prototype.is=function(n){return n==="position"||n==="model:position"};function Ig(n,e){let t=e.getChildAtOffset(n.offset);return t&&t.is("$text")&&t.startOffset<n.offset?t:null}function _8(n,e,t){return t!==null?null:e.getChildAtOffset(n.offset)}function C8(n,e,t){return t!==null?null:e.getChild(e.offsetToIndex(n.offset)-1)}function V7(n,e,t){return!(t+1===n.path.length||!u2(e.path,t+1)||!Jce(n,t+1))}function u2(n,e){for(;e<n.length;){if(n[e]!==0)return!1;e++}return!0}function Jce(n,e){let t=n.parent,i=n.path.length-1,o=0;for(;i>=e;){if(n.path[i]+o!==t.maxOffset)return!1;o=1,i--,t=t.parent}return!0}var A=class n extends xr{start;end;constructor(e,t){super(),this.start=N._createAt(e),this.end=t?N._createAt(t):N._createAt(e),this.start.stickiness=this.isCollapsed?"toNone":"toNext",this.end.stickiness=this.isCollapsed?"toNone":"toPrevious"}*[Symbol.iterator](){yield*it(new Hi({boundaries:this,ignoreElementEnd:!0}))}get isCollapsed(){return this.start.isEqual(this.end)}get isFlat(){let e=this.start.getParentPath(),t=this.end.getParentPath();return Cn(e,t)=="same"}get root(){return this.start.root}containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end)}containsRange(e,t=!1){e.isCollapsed&&(t=!1);let i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start),o=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&o}containsItem(e){let t=N._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t)}isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end)}isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start)}getDifference(e){let t=[];return this.isIntersecting(e)?(this.containsPosition(e.start)&&t.push(new n(this.start,e.start)),this.containsPosition(e.end)&&t.push(new n(e.end,this.end))):t.push(new n(this.start,this.end)),t}getIntersection(e){if(this.isIntersecting(e)){let t=this.start,i=this.end;return this.containsPosition(e.start)&&(t=e.start),this.containsPosition(e.end)&&(i=e.end),new n(t,i)}return null}getJoined(e,t=!1){let i=this.isIntersecting(e);if(i||(this.start.isBefore(e.start)?i=t?this.end.isTouching(e.start):this.end.isEqual(e.start):i=t?e.end.isTouching(this.start):e.end.isEqual(this.start)),!i)return null;let o=this.start,r=this.end;return e.start.isBefore(o)&&(o=e.start),e.end.isAfter(r)&&(r=e.end),new n(o,r)}getMinimalFlatRanges(){let e=[],t=this.start.getCommonPath(this.end).length,i=N._createAt(this.start),o=i.parent;for(;i.path.length>t+1;){let r=o.maxOffset-i.offset;r!==0&&e.push(new n(i,i.getShiftedBy(r))),i.path=i.path.slice(0,-1),i.offset++,o=o.parent}for(;i.path.length<=this.end.path.length;){let r=this.end.path[i.path.length-1],s=r-i.offset;s!==0&&e.push(new n(i,i.getShiftedBy(s))),i.offset=r,i.path.push(0)}return e}getWalker(e={}){return e.boundaries=this,new Hi(e)}*getItems(e={}){e.boundaries=this,e.ignoreElementEnd=!0;let t=new Hi(e);for(let i of t)yield i.item}*getPositions(e={}){e.boundaries=this;let t=new Hi(e);yield t.position;for(let i of t)yield i.nextPosition}getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)]}return[new n(this.start,this.end)]}getTransformedByOperations(e){let t=[new n(this.start,this.end)];for(let i of e)for(let o=0;o<t.length;o++){let r=t[o].getTransformedByOperation(i);t.splice(o,1,...r),o+=r.length-1}for(let i=0;i<t.length;i++){let o=t[i];for(let r=i+1;r<t.length;r++){let s=t[r];(o.containsRange(s)||s.containsRange(o)||o.isEqual(s))&&t.splice(r,1)}}return t}getCommonAncestor(){return this.start.getCommonAncestor(this.end)}getContainedElement(){if(this.isCollapsed)return null;let e=this.start.nodeAfter,t=this.end.nodeBefore;return e&&e.is("element")&&e===t?e:null}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}clone(){return new this.constructor(this.start,this.end)}_getTransformedByInsertOperation(e,t=!1){return this._getTransformedByInsertion(e.position,e.howMany,t)}_getTransformedByMoveOperation(e,t=!1){let i=e.sourcePosition,o=e.howMany,r=e.targetPosition;return this._getTransformedByMove(i,r,o,t)}_getTransformedBySplitOperation(e){let t=this.start._getTransformedBySplitOperation(e),i=this.end._getTransformedBySplitOperation(e);return this.end.isEqual(e.insertionPosition)&&(i=this.end.getShiftedBy(1)),t.root!=i.root&&(i=this.end.getShiftedBy(-1)),new n(t,i)}_getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition))return new n(this.start);let t=this.start._getTransformedByMergeOperation(e),i=this.end._getTransformedByMergeOperation(e);return t.root!=i.root&&(i=this.end.getShiftedBy(-1)),t.isAfter(i)?(e.sourcePosition.isBefore(e.targetPosition)?(t=N._createAt(i),t.offset=0):(e.deletionPosition.isEqual(t)||(i=e.deletionPosition),t=e.targetPosition),new n(t,i)):new n(t,i)}_getTransformedByInsertion(e,t,i=!1){if(i&&this.containsPosition(e))return[new n(this.start,e),new n(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];{let o=new n(this.start,this.end);return o.start=o.start._getTransformedByInsertion(e,t),o.end=o.end._getTransformedByInsertion(e,t),[o]}}_getTransformedByMove(e,t,i,o=!1){if(this.isCollapsed){let f=this.start._getTransformedByMove(e,t,i);return[new n(f)]}let r=n._createFromPositionAndShift(e,i),s=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!o&&(r.containsPosition(this.start)||r.containsPosition(this.end))){let f=this.start._getTransformedByMove(e,t,i),p=this.end._getTransformedByMove(e,t,i);return[new n(f,p)]}let a,l=this.getDifference(r),c=null,d=this.getIntersection(r);if(l.length==1?c=new n(l[0].start._getTransformedByDeletion(e,i),l[0].end._getTransformedByDeletion(e,i)):l.length==2&&(c=new n(this.start,this.end._getTransformedByDeletion(e,i))),c?a=c._getTransformedByInsertion(s,i,d!==null||o):a=[],d){let f=new n(d.start._getCombined(r.start,s),d.end._getCombined(r.start,s));a.length==2?a.splice(1,0,f):a.push(f)}return a}_getTransformedByDeletion(e,t){let i=this.start._getTransformedByDeletion(e,t),o=this.end._getTransformedByDeletion(e,t);return i==null&&o==null?null:(i==null&&(i=e),o==null&&(o=e),new n(i,o))}static _createFromPositionAndShift(e,t){let i=e,o=e.getShiftedBy(t);return t>0?new this(i,o):new this(o,i)}static _createIn(e){return new this(N._createAt(e,0),N._createAt(e,e.maxOffset))}static _createOn(e){return this._createFromPositionAndShift(N._createBefore(e),e.offsetSize)}static _createFromRanges(e){if(e.length===0)throw new _("range-create-from-ranges-empty-array",null);if(e.length==1)return e[0].clone();let t=e[0];e.sort((r,s)=>r.start.isAfter(s.start)?1:-1);let i=e.indexOf(t),o=new this(t.start,t.end);for(let r=i-1;r>=0&&e[r].end.isEqual(o.start);r--)o.start=N._createAt(e[r].start);for(let r=i+1;r<e.length&&e[r].start.isEqual(o.end);r++)o.end=N._createAt(e[r].end);return o}static fromJSON(e,t){return new this(N.fromJSON(e.start,t),N.fromJSON(e.end,t))}};A.prototype.is=function(n){return n==="range"||n==="model:range"};var lm=class extends tt(){_modelToViewMapping=new WeakMap;_viewToModelMapping=new WeakMap;_viewToModelLengthCallbacks=new Map;_markerNameToElements=new Map;_elementToMarkerNames=new Map;_deferredBindingRemovals=new Map;_unboundMarkerNames=new Set;constructor(){super(),this.on("modelToViewPosition",(e,t)=>{if(t.viewPosition)return;let i=this._modelToViewMapping.get(t.modelPosition.parent);if(!i)throw new _("mapping-model-position-view-parent-not-found",this,{modelPosition:t.modelPosition});t.viewPosition=this.findPositionIn(i,t.modelPosition.offset)},{priority:"low"}),this.on("viewToModelPosition",(e,t)=>{if(t.modelPosition)return;let i=this.findMappedViewAncestor(t.viewPosition),o=this._viewToModelMapping.get(i),r=this._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=N._createAt(o,r)},{priority:"low"})}bindElements(e,t){this._modelToViewMapping.set(e,t),this._viewToModelMapping.set(t,e)}unbindViewElement(e,t={}){let i=this.toModelElement(e);if(this._elementToMarkerNames.has(e))for(let o of this._elementToMarkerNames.get(e))this._unboundMarkerNames.add(o);t.defer?this._deferredBindingRemovals.set(e,e.root):(this._viewToModelMapping.delete(e),this._modelToViewMapping.get(i)==e&&this._modelToViewMapping.delete(i))}unbindModelElement(e){let t=this.toViewElement(e);this._modelToViewMapping.delete(e),this._viewToModelMapping.get(t)==e&&this._viewToModelMapping.delete(t)}bindElementToMarker(e,t){let i=this._markerNameToElements.get(t)||new Set;i.add(e);let o=this._elementToMarkerNames.get(e)||new Set;o.add(t),this._markerNameToElements.set(t,i),this._elementToMarkerNames.set(e,o)}unbindElementFromMarkerName(e,t){let i=this._markerNameToElements.get(t);i&&(i.delete(e),i.size==0&&this._markerNameToElements.delete(t));let o=this._elementToMarkerNames.get(e);o&&(o.delete(t),o.size==0&&this._elementToMarkerNames.delete(e))}flushUnboundMarkerNames(){let e=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),e}flushDeferredBindings(){for(let[e,t]of this._deferredBindingRemovals)e.root==t&&this.unbindViewElement(e);this._deferredBindingRemovals=new Map}clearBindings(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}toModelElement(e){return this._viewToModelMapping.get(e)}toViewElement(e){return this._modelToViewMapping.get(e)}toModelRange(e){return new A(this.toModelPosition(e.start),this.toModelPosition(e.end))}toViewRange(e){return new Se(this.toViewPosition(e.start),this.toViewPosition(e.end))}toModelPosition(e){let t={viewPosition:e,mapper:this};return this.fire("viewToModelPosition",t),t.modelPosition}toViewPosition(e,t={}){let i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};return this.fire("modelToViewPosition",i),i.viewPosition}markerNameToElements(e){let t=this._markerNameToElements.get(e);if(!t)return null;let i=new Set;for(let o of t)if(o.is("attributeElement"))for(let r of o.getElementsWithSameId())i.add(r);else i.add(o);return i}registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t)}findMappedViewAncestor(e){let t=e.parent;for(;!this._viewToModelMapping.has(t);)t=t.parent;return t}_toModelOffset(e,t,i){if(i!=e){let r=this._toModelOffset(e.parent,e.index,i),s=this._toModelOffset(e,t,e);return r+s}if(e.is("$text"))return t;let o=0;for(let r=0;r<t;r++)o+=this.getModelLength(e.getChild(r));return o}getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name))return this._viewToModelLengthCallbacks.get(e.name)(e);if(this._viewToModelMapping.has(e))return 1;if(e.is("$text"))return e.data.length;if(e.is("uiElement"))return 0;{let t=0;for(let i of e.getChildren())t+=this.getModelLength(i);return t}}findPositionIn(e,t){let i,o=0,r=0,s=0;if(e.is("$text"))return new H(e,t);for(;r<t;)i=e.getChild(s),o=this.getModelLength(i),r+=o,s++;return r==t?this._moveViewPositionToTextNode(new H(e,s)):this.findPositionIn(i,t-(r-o))}_moveViewPositionToTextNode(e){let t=e.nodeBefore,i=e.nodeAfter;return t instanceof xt?new H(t,t.data.length):i instanceof xt?new H(i,0):e}},h2=class{_consumable=new Map;_textProxyRegistry=new Map;add(e,t){t=Cy(t),e instanceof zi&&(e=this._getSymbolForTextProxy(e)),this._consumable.has(e)||this._consumable.set(e,new Map),this._consumable.get(e).set(t,!0)}consume(e,t){return t=Cy(t),e instanceof zi&&(e=this._getSymbolForTextProxy(e)),this.test(e,t)?(this._consumable.get(e).set(t,!1),!0):!1}test(e,t){t=Cy(t),e instanceof zi&&(e=this._getSymbolForTextProxy(e));let i=this._consumable.get(e);if(i===void 0)return null;let o=i.get(t);return o===void 0?null:o}revert(e,t){t=Cy(t),e instanceof zi&&(e=this._getSymbolForTextProxy(e));let i=this.test(e,t);return i===!1?(this._consumable.get(e).set(t,!0),!0):i===!0?!1:null}verifyAllConsumed(e){let t=[];for(let[i,o]of this._consumable)for(let[r,s]of o){let a=r.split(":")[0];s&&e==a&&t.push({event:r,item:i.name||i.description})}if(t.length)throw new _("conversion-model-consumable-not-consumed",null,{items:t})}_getSymbolForTextProxy(e){let t=null,i=this._textProxyRegistry.get(e.startOffset);if(i){let o=i.get(e.endOffset);o&&(t=o.get(e.parent))}return t||(t=this._addSymbolForTextProxy(e)),t}_addSymbolForTextProxy(e){let t=e.startOffset,i=e.endOffset,o=e.parent,r=Symbol("$textProxy:"+e.data),s,a;return s=this._textProxyRegistry.get(t),s||(s=new Map,this._textProxyRegistry.set(t,s)),a=s.get(i),a||(a=new Map,s.set(i,a)),a.set(o,r),r}};function Cy(n){let e=n.split(":");return e[0]=="insert"?e[0]:e[0]=="addMarker"||e[0]=="removeMarker"?n:e.length>1?e[0]+":"+e[1]:e[0]}var Og=class extends tt(){_conversionApi;_firedEventsMap;constructor(e){super(),this._conversionApi=v({dispatcher:this},e),this._firedEventsMap=new WeakMap}convertChanges(e,t,i){let o=this._createConversionApi(i,e.getRefreshedItems());for(let s of e.getMarkersToRemove())this._convertMarkerRemove(s.name,s.range,o);let r=this._reduceChanges(e.getChanges());for(let s of r)s.type==="insert"?this._convertInsert(A._createFromPositionAndShift(s.position,s.length),o):s.type==="reinsert"?this._convertReinsert(A._createFromPositionAndShift(s.position,s.length),o):s.type==="remove"?this._convertRemove(s.position,s.length,s.name,o):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,o);o.mapper.flushDeferredBindings();for(let s of o.mapper.flushUnboundMarkerNames()){let a=t.get(s).getRange();this._convertMarkerRemove(s,a,o),this._convertMarkerAdd(s,a,o)}for(let s of e.getMarkersToAdd())this._convertMarkerAdd(s.name,s.range,o);o.consumable.verifyAllConsumed("insert")}convert(e,t,i,o={}){let r=this._createConversionApi(i,void 0,o);this._convertInsert(e,r);for(let[s,a]of t)this._convertMarkerAdd(s,a,r);r.consumable.verifyAllConsumed("insert")}convertSelection(e,t,i){let o=this._createConversionApi(i);this.fire("cleanSelection",{selection:e},o);let r=e.getFirstPosition().root;if(!o.mapper.toViewElement(r))return;let s=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));if(this._addConsumablesForSelection(o.consumable,e,s),this.fire("selection",{selection:e},o),!!e.isCollapsed){for(let a of s)if(o.consumable.test(e,"addMarker:"+a.name)){let l=a.getRange();if(!Xce(e.getFirstPosition(),a,o.mapper))continue;let c={item:e,markerName:a.name,markerRange:l};this.fire(`addMarker:${a.name}`,c,o)}for(let a of e.getAttributeKeys())if(o.consumable.test(e,"attribute:"+a)){let l={item:e,range:e.getFirstRange(),attributeKey:a,attributeOldValue:null,attributeNewValue:e.getAttribute(a)};this.fire(`attribute:${a}:$text`,l,o)}}}_convertInsert(e,t,i={}){i.doNotAddConsumables||this._addConsumablesForInsert(t.consumable,e);for(let o of Array.from(e.getWalker({shallow:!0})).map(B7))this._testAndFire("insert",o,t)}_convertRemove(e,t,i,o){this.fire(`remove:${i}`,{position:e,length:t},o)}_convertAttribute(e,t,i,o,r){this._addConsumablesForRange(r.consumable,e,`attribute:${t}`);for(let s of e){let a={item:s.item,range:A._createFromPositionAndShift(s.previousPosition,s.length),attributeKey:t,attributeOldValue:i,attributeNewValue:o};this._testAndFire(`attribute:${t}`,a,r)}}_convertReinsert(e,t){let i=Array.from(e.getWalker({shallow:!0}));this._addConsumablesForInsert(t.consumable,i);for(let o of i.map(B7))this._testAndFire("insert",I(v({},o),{reconversion:!0}),t)}_convertMarkerAdd(e,t,i){if(t.root.rootName=="$graveyard")return;let o=`addMarker:${e}`;if(i.consumable.add(t,o),this.fire(o,{markerName:e,markerRange:t},i),!!i.consumable.consume(t,o)){this._addConsumablesForRange(i.consumable,t,o);for(let r of t.getItems()){if(!i.consumable.test(r,o))continue;let s={item:r,range:A._createOn(r),markerName:e,markerRange:t};this.fire(o,s,i)}}}_convertMarkerRemove(e,t,i){t.root.rootName!="$graveyard"&&this.fire(`removeMarker:${e}`,{markerName:e,markerRange:t},i)}_reduceChanges(e){let t={changes:e};return this.fire("reduceChanges",t),t.changes}_addConsumablesForInsert(e,t){for(let i of t){let o=i.item;if(e.test(o,"insert")===null){e.add(o,"insert");for(let r of o.getAttributeKeys())e.add(o,"attribute:"+r)}}return e}_addConsumablesForRange(e,t,i){for(let o of t.getItems())e.add(o,i);return e}_addConsumablesForSelection(e,t,i){e.add(t,"selection");for(let o of i)e.add(t,"addMarker:"+o.name);for(let o of t.getAttributeKeys())e.add(t,"attribute:"+o);return e}_testAndFire(e,t,i){let o=ede(e,t),r=t.item.is("$textProxy")?i.consumable._getSymbolForTextProxy(t.item):t.item,s=this._firedEventsMap.get(i),a=s.get(r);if(!a)s.set(r,new Set([o]));else if(!a.has(o))a.add(o);else return;this.fire(o,t,i)}_testAndFireAddAttributes(e,t){let i={item:e,range:A._createOn(e)};for(let o of i.item.getAttributeKeys())i.attributeKey=o,i.attributeOldValue=null,i.attributeNewValue=i.item.getAttribute(o),this._testAndFire(`attribute:${o}`,i,t)}_createConversionApi(e,t=new Set,i={}){let o=I(v({},this._conversionApi),{consumable:new h2,writer:e,options:i,convertItem:r=>this._convertInsert(A._createOn(r),o),convertChildren:r=>this._convertInsert(A._createIn(r),o,{doNotAddConsumables:!0}),convertAttributes:r=>this._testAndFireAddAttributes(r,o),canReuseView:r=>!t.has(o.mapper.toModelElement(r))});return this._firedEventsMap.set(o,new Map),o}};function Xce(n,e,t){let i=e.getRange(),o=Array.from(n.getAncestors());return o.shift(),o.reverse(),!o.some(s=>{if(i.containsItem(s))return!!t.toViewElement(s).getCustomProperty("addHighlight")})}function ede(n,e){let t=e.item.is("element")?e.item.name:"$text";return`${n}:${t}`}function B7(n){let e=n.item,t=A._createFromPositionAndShift(n.previousPosition,n.length);return{item:e,range:t}}var fn=class n extends tt(xr){_lastRangeBackward=!1;_attrs=new Map;_ranges=[];constructor(...e){super(),e.length&&this.setTo(...e)}get anchor(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.end:e.start}return null}get focus(){if(this._ranges.length>0){let e=this._ranges[this._ranges.length-1];return this._lastRangeBackward?e.start:e.end}return null}get isCollapsed(){return this._ranges.length===1?this._ranges[0].isCollapsed:!1}get rangeCount(){return this._ranges.length}get isBackward(){return!this.isCollapsed&&this._lastRangeBackward}isEqual(e){if(this.rangeCount!=e.rangeCount)return!1;if(this.rangeCount===0)return!0;if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus))return!1;for(let t of this._ranges){let i=!1;for(let o of e._ranges)if(t.isEqual(o)){i=!0;break}if(!i)return!1}return!0}*getRanges(){for(let e of this._ranges)yield new A(e.start,e.end)}getFirstRange(){let e=null;for(let t of this._ranges)(!e||t.start.isBefore(e.start))&&(e=t);return e?new A(e.start,e.end):null}getLastRange(){let e=null;for(let t of this._ranges)(!e||t.end.isAfter(e.end))&&(e=t);return e?new A(e.start,e.end):null}getFirstPosition(){let e=this.getFirstRange();return e?e.start.clone():null}getLastPosition(){let e=this.getLastRange();return e?e.end.clone():null}setTo(...e){let[t,i,o]=e;if(typeof i=="object"&&(o=i,i=void 0),t===null)this._setRanges([]);else if(t instanceof n)this._setRanges(t.getRanges(),t.isBackward);else if(t&&typeof t.getRanges=="function")this._setRanges(t.getRanges(),t.isBackward);else if(t instanceof A)this._setRanges([t],!!o&&!!o.backward);else if(t instanceof N)this._setRanges([new A(t)]);else if(t instanceof rd){let r=!!o&&!!o.backward,s;if(i=="in")s=A._createIn(t);else if(i=="on")s=A._createOn(t);else if(i!==void 0)s=new A(N._createAt(t,i));else throw new _("model-selection-setto-required-second-parameter",[this,t]);this._setRanges([s],r)}else if(ei(t))this._setRanges(t,o&&!!o.backward);else throw new _("model-selection-setto-not-selectable",[this,t])}_setRanges(e,t=!1){let i=Array.from(e),o=i.some(r=>{if(!(r instanceof A))throw new _("model-selection-set-ranges-not-range",[this,e]);return this._ranges.every(s=>!s.isEqual(r))});i.length===this._ranges.length&&!o||(this._replaceAllRanges(i),this._lastRangeBackward=!!t,this.fire("change:range",{directChange:!0}))}setFocus(e,t){if(this.anchor===null)throw new _("model-selection-setfocus-no-ranges",[this,e]);let i=N._createAt(e,t);if(i.compareWith(this.focus)=="same")return;let o=this.anchor;this._ranges.length&&this._popRange(),i.compareWith(o)=="before"?(this._pushRange(new A(i,o)),this._lastRangeBackward=!0):(this._pushRange(new A(o,i)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}getAttribute(e){return this._attrs.get(e)}getAttributes(){return this._attrs.entries()}getAttributeKeys(){return this._attrs.keys()}hasAttribute(e){return this._attrs.has(e)}removeAttribute(e){this.hasAttribute(e)&&(this._attrs.delete(e),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}setAttribute(e,t){this.getAttribute(e)!==t&&(this._attrs.set(e,t),this.fire("change:attribute",{attributeKeys:[e],directChange:!0}))}getSelectedElement(){return this.rangeCount!==1?null:this.getFirstRange().getContainedElement()}*getSelectedBlocks(){let e=new WeakSet;for(let t of this.getRanges()){let i=z7(t.start,e);nde(i,t)&&(yield i);for(let r of t.getWalker()){let s=r.item;r.type=="elementEnd"&&tde(s,e,t)&&(yield s)}let o=z7(t.end,e);ide(o,t)&&(yield o)}}containsEntireContent(e=this.anchor.root){let t=N._createAt(e,0),i=N._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition())}_pushRange(e){this._checkRange(e),this._ranges.push(new A(e.start,e.end))}_checkRange(e){for(let t=0;t<this._ranges.length;t++)if(e.isIntersecting(this._ranges[t]))throw new _("model-selection-range-intersects",[this,e],{addedRange:e,intersectingRange:this._ranges[t]})}_replaceAllRanges(e){this._removeAllRanges();for(let t of e)this._pushRange(t)}_removeAllRanges(){for(;this._ranges.length>0;)this._popRange()}_popRange(){this._ranges.pop()}};fn.prototype.is=function(n){return n==="selection"||n==="model:selection"};function E8(n,e){return e.has(n)?!1:(e.add(n),n.root.document.model.schema.isBlock(n)&&!!n.parent)}function tde(n,e,t){return E8(n,e)&&O2(n,t)}function z7(n,e){let i=n.parent.root.document.model.schema,o=n.parent.getAncestors({parentFirst:!0,includeSelf:!0}),r=!1,s=o.find(a=>r?!1:(r=i.isLimit(a),!r&&E8(a,e)));return o.forEach(a=>e.add(a)),s}function O2(n,e){let t=ode(n);return t?!e.containsRange(A._createOn(t),!0):!0}function nde(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.start.isTouching(N._createAt(n,n.maxOffset))?!1:O2(n,e):!1}function ide(n,e){return n?e.isCollapsed||n.isEmpty?!0:e.end.isTouching(N._createAt(n,0))?!1:O2(n,e):!1}function ode(n){let e=n.root.document.model.schema,t=n.parent;for(;t;){if(e.isBlock(t))return t;t=t.parent}}var pn=class n extends tt(A){constructor(e,t){super(e,t),rde.call(this)}detach(){this.stopListening()}toRange(){return new A(this.start,this.end)}static fromRange(e){return new n(e.start,e.end)}};pn.prototype.is=function(n){return n==="liveRange"||n==="model:liveRange"||n=="range"||n==="model:range"};function rde(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{let t=e[0];t.isDocumentOperation&&sde.call(this,t)},{priority:"low"})}function sde(n){let e=this.getTransformedByOperation(n),t=A._createFromRanges(e),i=!t.isEqual(this),o=ade(this,n),r=null;if(i){t.root.rootName=="$graveyard"&&(n.type=="remove"?r=n.sourcePosition:r=n.deletionPosition);let s=this.toRange();this.start=t.start,this.end=t.end,this.fire("change:range",s,{deletionPosition:r})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:r})}function ade(n,e){switch(e.type){case"insert":return n.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return n.containsPosition(e.sourcePosition)||n.start.isEqual(e.sourcePosition)||n.containsPosition(e.targetPosition);case"split":return n.containsPosition(e.splitPosition)||n.containsPosition(e.insertionPosition)}return!1}var Lg="selection:",ni=class extends tt(xr){_selection;constructor(e){super(),this._selection=new m2(e),this._selection.delegate("change:range").to(this),this._selection.delegate("change:attribute").to(this),this._selection.delegate("change:marker").to(this)}get isCollapsed(){return this._selection.isCollapsed}get anchor(){return this._selection.anchor}get focus(){return this._selection.focus}get rangeCount(){return this._selection.rangeCount}get hasOwnRange(){return this._selection.hasOwnRange}get isBackward(){return this._selection.isBackward}get isGravityOverridden(){return this._selection.isGravityOverridden}get markers(){return this._selection.markers}get _ranges(){return this._selection._ranges}getRanges(){return this._selection.getRanges()}getFirstPosition(){return this._selection.getFirstPosition()}getLastPosition(){return this._selection.getLastPosition()}getFirstRange(){return this._selection.getFirstRange()}getLastRange(){return this._selection.getLastRange()}getSelectedBlocks(){return this._selection.getSelectedBlocks()}getSelectedElement(){return this._selection.getSelectedElement()}containsEntireContent(e){return this._selection.containsEntireContent(e)}destroy(){this._selection.destroy()}getAttributeKeys(){return this._selection.getAttributeKeys()}getAttributes(){return this._selection.getAttributes()}getAttribute(e){return this._selection.getAttribute(e)}hasAttribute(e){return this._selection.hasAttribute(e)}refresh(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}observeMarkers(e){this._selection.observeMarkers(e)}_setFocus(e,t){this._selection.setFocus(e,t)}_setTo(...e){this._selection.setTo(...e)}_setAttribute(e,t){this._selection.setAttribute(e,t)}_removeAttribute(e){this._selection.removeAttribute(e)}_getStoredAttributes(){return this._selection.getStoredAttributes()}_overrideGravity(){return this._selection.overrideGravity()}_restoreGravity(e){this._selection.restoreGravity(e)}static _getStoreAttributeKey(e){return Lg+e}static _isStoreAttributeKey(e){return e.startsWith(Lg)}};ni.prototype.is=function(n){return n==="selection"||n=="model:selection"||n=="documentSelection"||n=="model:documentSelection"};var m2=class extends fn{markers=new ft({idProperty:"name"});_model;_document;_attributePriority=new Map;_selectionRestorePosition=null;_hasChangedRange=!1;_overriddenGravityRegister=new Set;_observedMarkers=new Set;constructor(e){super(),this._model=e.model,this._document=e,this.listenTo(this._model,"applyOperation",(t,i)=>{let o=i[0];!o.isDocumentOperation||o.type=="marker"||o.type=="rename"||o.type=="noop"||(this._ranges.length==0&&this._selectionRestorePosition&&this._fixGraveyardSelection(this._selectionRestorePosition),this._selectionRestorePosition=null,this._hasChangedRange&&(this._hasChangedRange=!1,this.fire("change:range",{directChange:!1})))},{priority:"lowest"}),this.on("change:range",()=>{this._validateSelectionRanges(this.getRanges())}),this.listenTo(this._model.markers,"update",(t,i,o,r)=>{this._updateMarker(i,r)}),this.listenTo(this._document,"change",(t,i)=>{lde(this._model,i)})}get isCollapsed(){return this._ranges.length===0?this._document._getDefaultRange().isCollapsed:super.isCollapsed}get anchor(){return super.anchor||this._document._getDefaultRange().start}get focus(){return super.focus||this._document._getDefaultRange().end}get rangeCount(){return this._ranges.length?this._ranges.length:1}get hasOwnRange(){return this._ranges.length>0}get isGravityOverridden(){return!!this._overriddenGravityRegister.size}destroy(){for(let e=0;e<this._ranges.length;e++)this._ranges[e].detach();this.stopListening()}*getRanges(){this._ranges.length?yield*it(super.getRanges()):yield this._document._getDefaultRange()}getFirstRange(){return super.getFirstRange()||this._document._getDefaultRange()}getLastRange(){return super.getLastRange()||this._document._getDefaultRange()}setTo(...e){super.setTo(...e),this._updateAttributes(!0),this.updateMarkers()}setFocus(e,t){super.setFocus(e,t),this._updateAttributes(!0),this.updateMarkers()}setAttribute(e,t){if(this._setAttribute(e,t)){let i=[e];this.fire("change:attribute",{attributeKeys:i,directChange:!0})}}removeAttribute(e){if(this._removeAttribute(e)){let t=[e];this.fire("change:attribute",{attributeKeys:t,directChange:!0})}}overrideGravity(){let e=an();return this._overriddenGravityRegister.add(e),this._overriddenGravityRegister.size===1&&this._updateAttributes(!0),e}restoreGravity(e){if(!this._overriddenGravityRegister.has(e))throw new _("document-selection-gravity-wrong-restore",this,{uid:e});this._overriddenGravityRegister.delete(e),this.isGravityOverridden||this._updateAttributes(!0)}observeMarkers(e){this._observedMarkers.add(e),this.updateMarkers()}_replaceAllRanges(e){this._validateSelectionRanges(e),super._replaceAllRanges(e)}_popRange(){this._ranges.pop().detach()}_pushRange(e){let t=this._prepareRange(e);t&&this._ranges.push(t)}_validateSelectionRanges(e){for(let t of e)if(!this._document._validateSelectionRange(t))throw new _("document-selection-wrong-position",this,{range:t})}_prepareRange(e){if(this._checkRange(e),e.root==this._document.graveyard)return;let t=pn.fromRange(e);return t.on("change:range",(i,o,r)=>{if(this._hasChangedRange=!0,t.root==this._document.graveyard){this._selectionRestorePosition=r.deletionPosition;let s=this._ranges.indexOf(t);this._ranges.splice(s,1),t.detach()}}),t}updateMarkers(){if(!this._observedMarkers.size)return;let e=[],t=!1;for(let o of this._model.markers){let r=o.name.split(":",1)[0];if(!this._observedMarkers.has(r))continue;let s=o.getRange();for(let a of this.getRanges())s.containsRange(a,!a.isCollapsed)&&e.push(o)}let i=Array.from(this.markers);for(let o of e)this.markers.has(o)||(this.markers.add(o),t=!0);for(let o of Array.from(this.markers))e.includes(o)||(this.markers.remove(o),t=!0);t&&this.fire("change:marker",{oldMarkers:i,directChange:!1})}_updateMarker(e,t){let i=e.name.split(":",1)[0];if(!this._observedMarkers.has(i))return;let o=!1,r=Array.from(this.markers),s=this.markers.has(e);if(!t)s&&(this.markers.remove(e),o=!0);else{let a=!1;for(let l of this.getRanges())if(t.containsRange(l,!l.isCollapsed)){a=!0;break}a&&!s?(this.markers.add(e),o=!0):!a&&s&&(this.markers.remove(e),o=!0)}o&&this.fire("change:marker",{oldMarkers:r,directChange:!1})}_updateAttributes(e){let t=_i(this._getSurroundingAttributes()),i=_i(this.getAttributes());if(e)this._attributePriority=new Map,this._attrs=new Map;else for(let[r,s]of this._attributePriority)s=="low"&&(this._attrs.delete(r),this._attributePriority.delete(r));this._setAttributesTo(t);let o=[];for(let[r,s]of this.getAttributes())(!i.has(r)||i.get(r)!==s)&&o.push(r);for(let[r]of i)this.hasAttribute(r)||o.push(r);o.length>0&&this.fire("change:attribute",{attributeKeys:o,directChange:!1})}_setAttribute(e,t,i=!0){let o=i?"normal":"low";return o=="low"&&this._attributePriority.get(e)=="normal"||super.getAttribute(e)===t?!1:(this._attrs.set(e,t),this._attributePriority.set(e,o),!0)}_removeAttribute(e,t=!0){let i=t?"normal":"low";return i=="low"&&this._attributePriority.get(e)=="normal"||(this._attributePriority.set(e,i),!super.hasAttribute(e))?!1:(this._attrs.delete(e),!0)}_setAttributesTo(e){let t=new Set;for(let[i,o]of this.getAttributes())e.get(i)!==o&&this._removeAttribute(i,!1);for(let[i,o]of e)this._setAttribute(i,o,!1)&&t.add(i);return t}*getStoredAttributes(){let e=this.getFirstPosition().parent;if(this.isCollapsed&&e.isEmpty)for(let t of e.getAttributeKeys())t.startsWith(Lg)&&(yield[t.substr(Lg.length),e.getAttribute(t)])}_getSurroundingAttributes(){let e=this.getFirstPosition(),t=this._model.schema;if(e.root.rootName=="$graveyard")return null;let i=null;if(this.isCollapsed){let o=e.textNode?e.textNode:e.nodeBefore,r=e.textNode?e.textNode:e.nodeAfter;if(this.isGravityOverridden||(i=xg(o,t)),i||(i=xg(r,t)),!this.isGravityOverridden&&!i){let s=o;for(;s&&!i;)s=s.previousSibling,i=xg(s,t)}if(!i){let s=r;for(;s&&!i;)s=s.nextSibling,i=xg(s,t)}i||(i=this.getStoredAttributes())}else{let o=this.getFirstRange();for(let r of o){if(r.item.is("element")&&t.isObject(r.item)){i=xg(r.item,t);break}if(r.type=="text"){i=r.item.getAttributes();break}}}return i}_fixGraveyardSelection(e){let t=this._model.schema.getNearestSelectionRange(e);t&&this._pushRange(t)}};function xg(n,e){if(!n)return null;if(n instanceof zi||n instanceof pt)return n.getAttributes();if(!e.isInline(n))return null;if(!e.isObject(n))return[];let t=[];for(let[i,o]of n.getAttributes())e.checkAttribute("$text",i)&&e.getAttributeProperties(i).copyFromObject!==!1&&t.push([i,o]);return t}function lde(n,e){let t=n.document.differ;for(let i of t.getChanges()){if(i.type!="insert")continue;let o=i.position.parent;i.length===o.maxOffset&&n.enqueueChange(e,s=>{let a=Array.from(o.getAttributeKeys()).filter(l=>l.startsWith(Lg));for(let l of a)s.removeAttribute(l,o)})}}var Ty=class{_dispatchers;constructor(e){this._dispatchers=e}add(e){for(let t of this._dispatchers)e(t);return this}},f2=class extends Ty{elementToElement(e){return this.add(yde(e))}elementToStructure(e){return this.add(_de(e))}attributeToElement(e){return this.add(Cde(e))}attributeToAttribute(e){return this.add(Ede(e))}markerToElement(e){return this.add(Sde(e))}markerToHighlight(e){return this.add(Ade(e))}markerToData(e){return this.add(xde(e))}};function L2(){return(n,e,t)=>{if(!t.consumable.consume(e.item,n.name))return;let i=t.writer,o=t.mapper.toViewPosition(e.range.start),r=i.createText(e.item.data);i.insert(o,r)}}function F2(){return(n,e,t)=>{t.convertAttributes(e.item),!e.reconversion&&e.item.is("element")&&!e.item.isEmpty&&t.convertChildren(e.item)}}function cde(){return(n,e,t)=>{let i=t.mapper.toViewPosition(e.position),o=e.position.getShiftedBy(e.length),r=t.mapper.toViewPosition(o,{isPhantom:!0}),s=t.writer.createRange(i,r),a=t.writer.remove(s.getTrimmed());for(let l of t.writer.createRangeIn(a).getItems())t.mapper.unbindViewElement(l,{defer:!0})}}function S8(n,e){let t=n.createAttributeElement("span",e.attributes);return e.classes&&t._addClass(e.classes),typeof e.priority=="number"&&(t._priority=e.priority),t._id=e.id,t}function x8(){return(n,e,t)=>{let i=e.selection;if(i.isCollapsed||!t.consumable.consume(i,"selection"))return;let o=[];for(let r of i.getRanges())o.push(t.mapper.toViewRange(r));t.writer.setSelection(o,{backward:i.isBackward})}}function A8(){return(n,e,t)=>{let i=e.selection;if(!i.isCollapsed||!t.consumable.consume(i,"selection"))return;let o=t.writer,r=i.getFirstPosition(),s=t.mapper.toViewPosition(r),a=o.breakAttributes(s);o.setSelection(a)}}function dde(){return(n,e,t)=>{let i=t.writer,o=i.document.selection;for(let r of o.getRanges())r.isCollapsed&&r.end.parent.isAttached()&&t.writer.mergeAttributes(r.start);i.setSelection(null)}}function T8(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let o=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!o&&!r)return;i.consumable.consume(t.item,e.name);let s=i.writer,a=s.document.selection;if(t.item instanceof fn||t.item instanceof ni)s.wrap(a.getFirstRange(),r);else{let l=i.mapper.toViewRange(t.range);t.attributeOldValue!==null&&o&&(l=s.unwrap(l,o)),t.attributeNewValue!==null&&r&&s.wrap(l,r)}}}function I8(n,e=Nde){return(t,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;let r=n(i.item,o,i);if(!r)return;e(i.item,o.consumable);let s=o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,r),o.writer.insert(s,r),o.convertAttributes(i.item),O8(r,i.item.getChildren(),o,{reconversion:i.reconversion})}}function ude(n,e){return(t,i,o)=>{if(!e(i.item,o.consumable,{preflight:!0}))return;let r=new Map;o.writer._registerSlotFactory(Mde(i.item,r,o));let s=n(i.item,o,i);if(o.writer._clearSlotFactory(),!s)return;Dde(i.item,r,o),e(i.item,o.consumable);let a=o.mapper.toViewPosition(i.range.start);o.mapper.bindElements(i.item,s),o.writer.insert(a,s),o.convertAttributes(i.item),Pde(s,r,o,{reconversion:i.reconversion})}}function M8(n){return(e,t,i)=>{t.isOpening=!0;let o=n(t,i);t.isOpening=!1;let r=n(t,i);if(!o||!r)return;let s=t.markerRange;if(s.isCollapsed&&!i.consumable.consume(s,e.name))return;for(let c of s)if(!i.consumable.consume(c.item,e.name))return;let a=i.mapper,l=i.writer;l.insert(a.toViewPosition(s.start),o),i.mapper.bindElementToMarker(o,t.markerName),s.isCollapsed||(l.insert(a.toViewPosition(s.end),r),i.mapper.bindElementToMarker(r,t.markerName)),e.stop()}}function hde(){return(n,e,t)=>{let i=t.mapper.markerNameToElements(e.markerName);if(i){for(let o of i)t.mapper.unbindElementFromMarkerName(o,e.markerName),t.writer.clear(t.writer.createRangeOn(o),o);t.writer.clearClonedElementsGroup(e.markerName),n.stop()}}}function mde(n){return(e,t,i)=>{let o=n(t.markerName,i);if(!o)return;let r=t.markerRange;i.consumable.consume(r,e.name)&&(H7(r,!1,i,t,o),H7(r,!0,i,t,o),e.stop())}}function H7(n,e,t,i,o){let r=e?n.start:n.end,s=r.nodeAfter&&r.nodeAfter.is("element")?r.nodeAfter:null,a=r.nodeBefore&&r.nodeBefore.is("element")?r.nodeBefore:null;if(s||a){let c,d;e&&s||!e&&!a?(c=s,d=!0):(c=a,d=!1);let f=t.mapper.toViewElement(c);if(f){fde(f,e,d,t,i,o);return}}let l=t.mapper.toViewPosition(r);pde(l,e,t,i,o)}function fde(n,e,t,i,o,r){let s=`data-${r.group}-${e?"start":"end"}-${t?"before":"after"}`,a=n.hasAttribute(s)?n.getAttribute(s).split(","):[];a.unshift(r.name),i.writer.setAttribute(s,a.join(","),n),i.mapper.bindElementToMarker(n,o.markerName)}function pde(n,e,t,i,o){let r=`${o.group}-${e?"start":"end"}`,s=o.name?{name:o.name}:null,a=t.writer.createUIElement(r,s);t.writer.insert(n,a),t.mapper.bindElementToMarker(a,i.markerName)}function gde(n){return(e,t,i)=>{let o=n(t.markerName,i);if(!o)return;let r=i.mapper.markerNameToElements(t.markerName);if(!r)return;for(let a of r)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("containerElement")?(s(`data-${o.group}-start-before`,a),s(`data-${o.group}-start-after`,a),s(`data-${o.group}-end-before`,a),s(`data-${o.group}-end-after`,a)):i.writer.clear(i.writer.createRangeOn(a),a);i.writer.clearClonedElementsGroup(t.markerName),e.stop();function s(a,l){if(l.hasAttribute(a)){let c=new Set(l.getAttribute(a).split(","));c.delete(o.name),c.size==0?i.writer.removeAttribute(a,l):i.writer.setAttribute(a,Array.from(c).join(","),l)}}}}function bde(n){return(e,t,i)=>{if(!i.consumable.test(t.item,e.name))return;let o=n(t.attributeOldValue,i,t),r=n(t.attributeNewValue,i,t);if(!o&&!r)return;i.consumable.consume(t.item,e.name);let s=i.mapper.toViewElement(t.item),a=i.writer;if(!s)throw new _("conversion-attribute-to-attribute-on-text",i.dispatcher,t);if(t.attributeOldValue!==null&&o)if(o.key=="class"){let l=typeof o.value=="string"?o.value.split(/\s+/):o.value;for(let c of l)a.removeClass(c,s)}else if(o.key=="style")if(typeof o.value=="string"){let l=new Zc(a.document.stylesProcessor);l.setTo(o.value);for(let[c]of l.getStylesEntries())a.removeStyle(c,s)}else{let l=Object.keys(o.value);for(let c of l)a.removeStyle(c,s)}else a.removeAttribute(o.key,s);if(t.attributeNewValue!==null&&r)if(r.key=="class"){let l=typeof r.value=="string"?r.value.split(/\s+/):r.value;for(let c of l)a.addClass(c,s)}else if(r.key=="style")if(typeof r.value=="string"){let l=new Zc(a.document.stylesProcessor);l.setTo(r.value);for(let[c,d]of l.getStylesEntries())a.setStyle(c,d,s)}else{let l=Object.keys(r.value);for(let c of l)a.setStyle(c,r.value[c],s)}else a.setAttribute(r.key,r.value,s)}}function wde(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof fn||t.item instanceof ni)&&!t.item.is("$textProxy"))return;let o=V2(n,t,i);if(!o||!i.consumable.consume(t.item,e.name))return;let r=i.writer,s=S8(r,o),a=r.document.selection;if(t.item instanceof fn||t.item instanceof ni)r.wrap(a.getFirstRange(),s);else{let l=i.mapper.toViewRange(t.range),c=r.wrap(l,s);for(let d of c.getItems())if(d.is("attributeElement")&&d.isSimilar(s)){i.mapper.bindElementToMarker(d,t.markerName);break}}}}function kde(n){return(e,t,i)=>{if(!t.item||!(t.item instanceof dt))return;let o=V2(n,t,i);if(!o||!i.consumable.test(t.item,e.name))return;let r=i.mapper.toViewElement(t.item);if(r&&r.getCustomProperty("addHighlight")){i.consumable.consume(t.item,e.name);for(let a of A._createIn(t.item))i.consumable.consume(a.item,e.name);r.getCustomProperty("addHighlight")(r,o,i.writer),i.mapper.bindElementToMarker(r,t.markerName)}}}function vde(n){return(e,t,i)=>{if(t.markerRange.isCollapsed)return;let o=V2(n,t,i);if(!o)return;let r=S8(i.writer,o),s=i.mapper.markerNameToElements(t.markerName);if(s){for(let a of s)i.mapper.unbindElementFromMarkerName(a,t.markerName),a.is("attributeElement")?i.writer.unwrap(i.writer.createRangeOn(a),r):a.getCustomProperty("removeHighlight")(a,o.id,i.writer);i.writer.clearClonedElementsGroup(t.markerName),e.stop()}}}function yde(n){let e=D8(n.model),t=Fg(n.view,"container");return e.attributes.length&&(e.children=!0),i=>{i.on(`insert:${e.name}`,I8(t,N8(e)),{priority:n.converterPriority||"normal"}),(e.children||e.attributes.length)&&i.on("reduceChanges",R8(e),{priority:"low"})}}function _de(n){let e=D8(n.model),t=Fg(n.view,"container");return e.children=!0,i=>{if(i._conversionApi.schema.checkChild(e.name,"$text"))throw new _("conversion-element-to-structure-disallowed-text",i,{elementName:e.name});i.on(`insert:${e.name}`,ude(t,N8(e)),{priority:n.converterPriority||"normal"}),i.on("reduceChanges",R8(e),{priority:"low"})}}function Cde(n){n=Nn(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let o of e.values)n.view[o]=Fg(n.view[o],"attribute");else n.view=Fg(n.view,"attribute");let i=P8(n);return o=>{o.on(t,T8(i),{priority:n.converterPriority||"normal"})}}function Ede(n){n=Nn(n);let e=n.model;typeof e=="string"&&(e={key:e});let t=`attribute:${e.key}`;if(e.name&&(t+=":"+e.name),e.values)for(let o of e.values)n.view[o]=U7(n.view[o]);else n.view=U7(n.view);let i=P8(n);return o=>{o.on(t,bde(i),{priority:n.converterPriority||"normal"})}}function Sde(n){let e=Fg(n.view,"ui");return t=>{t.on(`addMarker:${n.model}`,M8(e),{priority:n.converterPriority||"normal"}),t.on(`removeMarker:${n.model}`,hde(),{priority:n.converterPriority||"normal"})}}function xde(n){n=Nn(n);let e=n.model,t=n.view;return t||(t=i=>({group:e,name:i.substr(n.model.length+1)})),i=>{i.on(`addMarker:${e}`,mde(t),{priority:n.converterPriority||"normal"}),i.on(`removeMarker:${e}`,gde(t),{priority:n.converterPriority||"normal"})}}function Ade(n){return e=>{e.on(`addMarker:${n.model}`,wde(n.view),{priority:n.converterPriority||"normal"}),e.on(`addMarker:${n.model}`,kde(n.view),{priority:n.converterPriority||"normal"}),e.on(`removeMarker:${n.model}`,vde(n.view),{priority:n.converterPriority||"normal"})}}function D8(n){return typeof n=="string"&&(n={name:n}),{name:n.name,attributes:n.attributes?$e(n.attributes):[],children:!!n.children}}function Fg(n,e){return typeof n=="function"?n:(t,i)=>Tde(n,i,e)}function Tde(n,e,t){typeof n=="string"&&(n={name:n});let i,o=e.writer,r=Object.assign({},n.attributes);if(t=="container")i=o.createContainerElement(n.name,r);else if(t=="attribute"){let s={priority:n.priority||Qc.DEFAULT_PRIORITY};i=o.createAttributeElement(n.name,r,s)}else i=o.createUIElement(n.name,r);if(n.styles){let s=Object.keys(n.styles);for(let a of s)o.setStyle(a,n.styles[a],i)}if(n.classes){let s=n.classes;if(typeof s=="string")o.addClass(s,i);else for(let a of s)o.addClass(a,i)}return i}function P8(n){return n.model.values?(e,t,i)=>{let o=n.view[e];return o?o(e,t,i):null}:n.view}function U7(n){return typeof n=="string"?e=>({key:n,value:e}):typeof n=="object"?n.value?()=>n:e=>({key:n.key,value:e}):n}function V2(n,e,t){let i=typeof n=="function"?n(e,t):n;return i?(i.priority||(i.priority=10),i.id||(i.id=e.markerName),i):null}function Ide(n){return(e,t)=>{if(!e.is("element",n.name))return!1;if(t.type=="attribute"){if(n.attributes.includes(t.attributeKey))return!0}else{if(n.children)return!0}return!1}}function R8(n){let e=Ide(n);return(t,i)=>{let o=[];i.reconvertedElements||(i.reconvertedElements=new Set);for(let r of i.changes){let s=r.type=="attribute"?r.range.start.nodeAfter:r.position.parent;if(!s||!e(s,r)){o.push(r);continue}if(!i.reconvertedElements.has(s)){i.reconvertedElements.add(s);let a=N._createBefore(s),l=o.length;for(let c=o.length-1;c>=0;c--){let d=o[c],p=(d.type=="attribute"?d.range.start:d.position).compareWith(a);if(p=="before"||d.type=="remove"&&p=="same")break;l=c}o.splice(l,0,{type:"remove",name:s.name,position:a,length:1},{type:"reinsert",name:s.name,position:a,length:1})}}i.changes=o}}function N8(n){return(e,t,i={})=>{let o=["insert"];for(let r of n.attributes)e.hasAttribute(r)&&o.push(`attribute:${r}`);return o.every(r=>t.test(e,r))?(i.preflight||o.forEach(r=>t.consume(e,r)),!0):!1}}function Mde(n,e,t){return(i,o)=>{let r=i.createContainerElement("$slot"),s=null;if(o==="children")s=Array.from(n.getChildren());else if(typeof o=="function")s=Array.from(n.getChildren()).filter(a=>o(a));else throw new _("conversion-slot-mode-unknown",t.dispatcher,{modeOrFilter:o});return e.set(r,s),r}}function Dde(n,e,t){let i=Array.from(e.values()).flat(),o=new Set(i);if(o.size!=i.length)throw new _("conversion-slot-filter-overlap",t.dispatcher,{element:n});if(o.size!=n.childCount)throw new _("conversion-slot-filter-incomplete",t.dispatcher,{element:n})}function Pde(n,e,t,i){t.mapper.on("modelToViewPosition",s,{priority:"highest"});let o=null,r=null;for([o,r]of e)O8(n,r,t,i),t.writer.move(t.writer.createRangeIn(o),t.writer.createPositionBefore(o)),t.writer.remove(o);t.mapper.off("modelToViewPosition",s);function s(a,l){let c=l.modelPosition.nodeAfter,d=r.indexOf(c);d<0||(l.viewPosition=l.mapper.findPositionIn(o,d))}}function O8(n,e,t,i){for(let o of e)Rde(n.root,o,t,i)||t.convertItem(o)}function Rde(n,e,t,i){let{writer:o,mapper:r}=t;if(!i.reconversion)return!1;let s=r.toViewElement(e);return!s||s.root==n||!t.canReuseView(s)?!1:(o.move(o.createRangeOn(s),r.toViewPosition(N._createBefore(e))),!0)}function Nde(n,e,{preflight:t}={}){return t?e.test(n,"insert"):e.consume(n,"insert")}function L8(n){let{schema:e,document:t}=n.model;for(let i of t.getRoots())if(i.isEmpty&&!e.checkChild(i,"$text")&&e.checkChild(i,"paragraph"))return n.insertElement("paragraph",i),!0;return!1}function F8(n,e,t){let i=t.createContext(n);return!(!t.checkChild(i,"paragraph")||!t.checkChild(i.push("paragraph"),e))}function V8(n,e){let t=e.createElement("paragraph");return e.insert(t,n),e.createPositionAt(t,0)}var p2=class extends Ty{elementToElement(e){return this.add(B8(e))}elementToAttribute(e){return this.add(Fde(e))}attributeToAttribute(e){return this.add(Vde(e))}elementToMarker(e){return this.add(Bde(e))}dataToMarker(e){return this.add(zde(e))}};function j7(){return(n,e,t)=>{if(!e.modelRange&&t.consumable.consume(e.viewItem,{name:!0})){let{modelRange:i,modelCursor:o}=t.convertChildren(e.viewItem,e.modelCursor);e.modelRange=i,e.modelCursor=o}}}function Ode(){return(n,e,{schema:t,consumable:i,writer:o})=>{let r=e.modelCursor;if(!i.test(e.viewItem))return;if(!t.checkChild(r,"$text")){if(!F8(r,"$text",t)||e.viewItem.data.trim().length==0)return;r=V8(r,o)}i.consume(e.viewItem);let s=o.createText(e.viewItem.data);o.insert(s,r),e.modelRange=o.createRange(r,r.getShiftedBy(s.offsetSize)),e.modelCursor=e.modelRange.end}}function Lde(n,e){return(t,i)=>{let o=i.newSelection,r=[];for(let a of o.getRanges())r.push(e.toModelRange(a));let s=n.createSelection(r,{backward:o.isBackward});s.isEqual(n.document.selection)||n.change(a=>{a.setSelection(s)})}}function B8(n){n=Nn(n);let e=g2(n),t=B2(n.view),i=t?`element:${t}`:"element";return o=>{o.on(i,e,{priority:n.converterPriority||"normal"})}}function Fde(n){n=Nn(n),z8(n);let e=H8(n,!1),t=B2(n.view),i=t?`element:${t}`:"element";return o=>{o.on(i,e,{priority:n.converterPriority||"low"})}}function Vde(n){n=Nn(n);let e=null;(typeof n.view=="string"||n.view.key)&&(e=jde(n)),z8(n,e);let t=H8(n,!0);return i=>{i.on("element",t,{priority:n.converterPriority||"low"})}}function Bde(n){let e=qde(n.model);return B8(I(v({},n),{model:e}))}function zde(n){n=Nn(n),n.model||(n.model=o=>o?n.view+":"+o:n.view);let e={view:n.view,model:n.model},t=g2($7(e,"start")),i=g2($7(e,"end"));return o=>{o.on(`element:${n.view}-start`,t,{priority:n.converterPriority||"normal"}),o.on(`element:${n.view}-end`,i,{priority:n.converterPriority||"normal"});let r=_n.low,s=_n.highest,a=_n.get(n.converterPriority)/s;o.on("element",Hde(e),{priority:r+a})}}function Hde(n){return(e,t,i)=>{let o=`data-${n.view}`;if(!i.consumable.test(t.viewItem,{attributes:o+"-end-after"})&&!i.consumable.test(t.viewItem,{attributes:o+"-start-after"})&&!i.consumable.test(t.viewItem,{attributes:o+"-end-before"})&&!i.consumable.test(t.viewItem,{attributes:o+"-start-before"}))return;t.modelRange||Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor)),i.consumable.consume(t.viewItem,{attributes:o+"-end-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(o+"-end-after").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-start-after"})&&r(t.modelRange.end,t.viewItem.getAttribute(o+"-start-after").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-end-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(o+"-end-before").split(",")),i.consumable.consume(t.viewItem,{attributes:o+"-start-before"})&&r(t.modelRange.start,t.viewItem.getAttribute(o+"-start-before").split(","));function r(s,a){for(let l of a){let c=n.model(l,i),d=i.writer.createElement("$marker",{"data-name":c});i.writer.insert(d,s),t.modelCursor.isEqual(s)?t.modelCursor=t.modelCursor.getShiftedBy(1):t.modelCursor=t.modelCursor._getTransformedByInsertion(s,1),t.modelRange=t.modelRange._getTransformedByInsertion(s,1)[0]}}}}function B2(n){return typeof n=="string"?n:typeof n=="object"&&typeof n.name=="string"?n.name:null}function g2(n){let e=new Ci(n.view);return(t,i,o)=>{let r=e.match(i.viewItem);if(!r)return;let s=r.match;if(s.name=!0,!o.consumable.test(i.viewItem,s))return;let a=Ude(n.model,i.viewItem,o);a&&o.safeInsert(a,i.modelCursor)&&(o.consumable.consume(i.viewItem,s),o.convertChildren(i.viewItem,a),o.updateConversionResult(a,i))}}function Ude(n,e,t){return n instanceof Function?n(e,t):t.writer.createElement(n)}function jde(n){typeof n.view=="string"&&(n.view={key:n.view});let e=n.view.key,t=typeof n.view.value>"u"?/[\s\S]*/:n.view.value,i;return e=="class"||e=="style"?i={[e=="class"?"classes":"styles"]:t}:i={attributes:{[e]:t}},n.view.name&&(i.name=n.view.name),n.view=i,e}function z8(n,e=null){let t=e===null?!0:r=>r.getAttribute(e),i=typeof n.model!="object"?n.model:n.model.key,o=typeof n.model!="object"||typeof n.model.value>"u"?t:n.model.value;n.model={key:i,value:o}}function H8(n,e){let t=new Ci(n.view);return(i,o,r)=>{if(!o.modelRange&&e)return;let s=t.match(o.viewItem);if(!s||($de(n.view,o.viewItem)?s.match.name=!0:delete s.match.name,!r.consumable.test(o.viewItem,s.match)))return;let a=n.model.key,l=typeof n.model.value=="function"?n.model.value(o.viewItem,r):n.model.value;if(l===null)return;o.modelRange||Object.assign(o,r.convertChildren(o.viewItem,o.modelCursor)),Wde(o.modelRange,{key:a,value:l},e,r)&&(r.consumable.test(o.viewItem,{name:!0})&&(s.match.name=!0),r.consumable.consume(o.viewItem,s.match))}}function $de(n,e){let t=typeof n=="function"?n(e):n;return typeof t=="object"&&!B2(t)?!1:!t.classes&&!t.attributes&&!t.styles}function Wde(n,e,t,i){let o=!1;for(let r of Array.from(n.getItems({shallow:t})))i.schema.checkAttribute(r,e.key)&&(o=!0,!r.hasAttribute(e.key)&&i.writer.setAttribute(e.key,e.value,r));return o}function qde(n){return(e,t)=>{let i=typeof n=="string"?n:n(e,t);return t.writer.createElement("$marker",{"data-name":i})}}function $7(n,e){let t=(i,o)=>{let r=i.getAttribute("name"),s=n.model(r,o);return o.writer.createElement("$marker",{"data-name":s})};return{view:`${n.view}-${e}`,model:t}}function Gde(n){n.document.registerPostFixer(e=>Kde(e,n))}function Kde(n,e){let t=e.document.selection,i=e.schema,o=[],r=!1;for(let s of t.getRanges()){let a=U8(s,i);a&&!a.isEqual(s)?(o.push(a),r=!0):o.push(s)}return r&&n.setSelection(Jde(o),{backward:t.isBackward}),!1}function U8(n,e){return n.isCollapsed?Qde(n,e):Yde(n,e)}function Qde(n,e){let t=n.start,i=e.getNearestSelectionRange(t);if(!i){let r=t.getAncestors().reverse().find(s=>e.isObject(s));return r?A._createOn(r):null}if(!i.isCollapsed)return i;let o=i.start;return t.isEqual(o)?null:new A(o)}function Yde(n,e){let{start:t,end:i}=n,o=e.checkChild(t,"$text"),r=e.checkChild(i,"$text"),s=e.getLimitElement(t),a=e.getLimitElement(i);if(s===a){if(o&&r)return null;if(Zde(t,i,e)){let f=t.nodeAfter&&e.isSelectable(t.nodeAfter)?null:e.getNearestSelectionRange(t,"forward"),g=i.nodeBefore&&e.isSelectable(i.nodeBefore)?null:e.getNearestSelectionRange(i,"backward"),w=f?f.start:t,k=g?g.end:i;return new A(w,k)}}let l=s&&!s.is("rootElement"),c=a&&!a.is("rootElement");if(l||c){let d=t.nodeAfter&&i.nodeBefore&&t.nodeAfter.parent===i.nodeBefore.parent,f=l&&(!d||!q7(t.nodeAfter,e)),p=c&&(!d||!q7(i.nodeBefore,e)),g=t,w=i;return f&&(g=N._createBefore(W7(s,e))),p&&(w=N._createAfter(W7(a,e))),new A(g,w)}return null}function W7(n,e){let t=n,i=t;for(;e.isLimit(i)&&i.parent;)t=i,i=i.parent;return t}function Zde(n,e,t){let i=n.nodeAfter&&!t.isLimit(n.nodeAfter)||t.checkChild(n,"$text"),o=e.nodeBefore&&!t.isLimit(e.nodeBefore)||t.checkChild(e,"$text");return i||o}function Jde(n){let e=[...n],t=new Set,i=1;for(;i<e.length;){let r=e[i],s=e.slice(0,i);for(let[a,l]of s.entries())if(!t.has(a)){if(r.isEqual(l))t.add(a);else if(r.isIntersecting(l)){t.add(a),t.add(i);let c=r.getJoined(l);e.push(c)}}i++}return e.filter((r,s)=>!t.has(s))}function q7(n,e){return n&&e.isSelectable(n)}var Iy=class extends Ze(){model;view;mapper;downcastDispatcher;constructor(e,t){super(),this.model=e,this.view=new am(t),this.mapper=new lm,this.downcastDispatcher=new Og({mapper:this.mapper,schema:e.schema});let i=this.model.document,o=i.selection,r=this.model.markers;this.listenTo(this.model,"_beforeChanges",()=>{this.view._disableRendering(!0)},{priority:"highest"}),this.listenTo(this.model,"_afterChanges",()=>{this.view._disableRendering(!1)},{priority:"lowest"}),this.listenTo(i,"change",()=>{this.view.change(s=>{this.downcastDispatcher.convertChanges(i.differ,r,s),this.downcastDispatcher.convertSelection(o,r,s)})},{priority:"low"}),this.listenTo(this.view.document,"selectionChange",Lde(this.model,this.mapper)),this.listenTo(this.view.document,"beforeinput",Xde(this.mapper,this.model.schema,this.view),{priority:"high"}),this.downcastDispatcher.on("insert:$text",L2(),{priority:"lowest"}),this.downcastDispatcher.on("insert",F2(),{priority:"lowest"}),this.downcastDispatcher.on("remove",cde(),{priority:"low"}),this.downcastDispatcher.on("cleanSelection",dde()),this.downcastDispatcher.on("selection",x8(),{priority:"low"}),this.downcastDispatcher.on("selection",A8(),{priority:"low"}),this.view.document.roots.bindTo(this.model.document.roots).using(s=>{if(s.rootName=="$graveyard")return null;let a=new Dg(this.view.document,s.name);return a.rootName=s.rootName,this.mapper.bindElements(s,a),a})}destroy(){this.view.destroy(),this.stopListening()}reconvertMarker(e){let t=typeof e=="string"?e:e.name,i=this.model.markers.get(t);if(!i)throw new _("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:t});this.model.change(()=>{this.model.markers._refresh(i)})}reconvertItem(e){this.model.change(()=>{this.model.document.differ._refreshItem(e)})}};function Xde(n,e,t){return(i,o)=>{if(!(t.document.isComposing&&!ie.isAndroid))for(let r=0;r<o.targetRanges.length;r++){let s=o.targetRanges[r],a=n.toModelRange(s),l=U8(a,e);!l||l.isEqual(a)||(o.targetRanges[r]=n.toViewRange(l))}}}var b2=class n{_consumables=new Map;add(e,t){let i;if(e.is("$text")||e.is("documentFragment")){this._consumables.set(e,!0);return}this._consumables.has(e)?i=this._consumables.get(e):(i=new w2(e),this._consumables.set(e,i)),i.add(t)}test(e,t){let i=this._consumables.get(e);return i===void 0?null:e.is("$text")||e.is("documentFragment")?i:i.test(t)}consume(e,t){return this.test(e,t)?(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!1):this._consumables.get(e).consume(t),!0):!1}revert(e,t){let i=this._consumables.get(e);i!==void 0&&(e.is("$text")||e.is("documentFragment")?this._consumables.set(e,!0):i.revert(t))}static consumablesFromElement(e){let t={element:e,name:!0,attributes:[],classes:[],styles:[]},i=e.getAttributeKeys();for(let s of i)s=="style"||s=="class"||t.attributes.push(s);let o=e.getClassNames();for(let s of o)t.classes.push(s);let r=e.getStyleNames();for(let s of r)t.styles.push(s);return t}static createFrom(e,t){if(t||(t=new n),e.is("$text"))return t.add(e),t;e.is("element")&&t.add(e,n.consumablesFromElement(e)),e.is("documentFragment")&&t.add(e);for(let i of e.getChildren())t=n.createFrom(i,t);return t}},Ey=["attributes","classes","styles"],w2=class{element;_canConsumeName;_consumables;constructor(e){this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}add(e){e.name&&(this._canConsumeName=!0);for(let t of Ey)t in e&&this._add(t,e[t])}test(e){if(e.name&&!this._canConsumeName)return this._canConsumeName;for(let t of Ey)if(t in e){let i=this._test(t,e[t]);if(i!==!0)return i}return!0}consume(e){e.name&&(this._canConsumeName=!1);for(let t of Ey)t in e&&this._consume(t,e[t])}revert(e){e.name&&(this._canConsumeName=!0);for(let t of Ey)t in e&&this._revert(t,e[t])}_add(e,t){let i=$e(t),o=this._consumables[e];for(let r of i){if(e==="attributes"&&(r==="class"||r==="style"))throw new _("viewconsumable-invalid-attribute",this);if(o.set(r,!0),e==="styles")for(let s of this.element.document.stylesProcessor.getRelatedStyles(r))o.set(s,!0)}}_test(e,t){let i=$e(t),o=this._consumables[e];for(let r of i)if(e==="attributes"&&(r==="class"||r==="style")){let s=r=="class"?"classes":"styles",a=this._test(s,[...this._consumables[s].keys()]);if(a!==!0)return a}else{let s=o.get(r);if(s===void 0)return null;if(!s)return!1}return!0}_consume(e,t){let i=$e(t),o=this._consumables[e];for(let r of i)if(e==="attributes"&&(r==="class"||r==="style")){let s=r=="class"?"classes":"styles";this._consume(s,[...this._consumables[s].keys()])}else if(o.set(r,!1),e=="styles")for(let s of this.element.document.stylesProcessor.getRelatedStyles(r))o.set(s,!1)}_revert(e,t){let i=$e(t),o=this._consumables[e];for(let r of i)if(e==="attributes"&&(r==="class"||r==="style")){let s=r=="class"?"classes":"styles";this._revert(s,[...this._consumables[s].keys()])}else o.get(r)===!1&&o.set(r,!0)}},k2=class extends Ze(){_sourceDefinitions={};_attributeProperties=Object.create(null);_customChildChecks=new Map;_customAttributeChecks=new Map;_genericCheckSymbol=Symbol("$generic");_compiledDefinitions;constructor(){super(),this.decorate("checkChild"),this.decorate("checkAttribute"),this.on("checkAttribute",(e,t)=>{t[0]=new tm(t[0])},{priority:"highest"}),this.on("checkChild",(e,t)=>{t[0]=new tm(t[0]),t[1]=this.getDefinition(t[1])},{priority:"highest"})}register(e,t){if(this._sourceDefinitions[e])throw new _("schema-cannot-register-item-twice",this,{itemName:e});this._sourceDefinitions[e]=[Object.assign({},t)],this._clearCache()}extend(e,t){if(!this._sourceDefinitions[e])throw new _("schema-cannot-extend-missing-item",this,{itemName:e});this._sourceDefinitions[e].push(Object.assign({},t)),this._clearCache()}getDefinitions(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}getDefinition(e){let t;return typeof e=="string"?t=e:"is"in e&&(e.is("$text")||e.is("$textProxy"))?t="$text":t=e.name,this.getDefinitions()[t]}isRegistered(e){return!!this.getDefinition(e)}isBlock(e){let t=this.getDefinition(e);return!!(t&&t.isBlock)}isLimit(e){let t=this.getDefinition(e);return t?!!(t.isLimit||t.isObject):!1}isObject(e){let t=this.getDefinition(e);return t?!!(t.isObject||t.isLimit&&t.isSelectable&&t.isContent):!1}isInline(e){let t=this.getDefinition(e);return!!(t&&t.isInline)}isSelectable(e){let t=this.getDefinition(e);return t?!!(t.isSelectable||t.isObject):!1}isContent(e){let t=this.getDefinition(e);return t?!!(t.isContent||t.isObject):!1}checkChild(e,t){return t?this._checkContextMatch(e,t):!1}checkAttribute(e,t){let i=this.getDefinition(e.last);if(!i)return!1;let o=this._evaluateAttributeChecks(e,t);return o!==void 0?o:i.allowAttributes.includes(t)}checkMerge(e,t){if(e instanceof N){let i=e.nodeBefore,o=e.nodeAfter;if(!(i instanceof dt))throw new _("schema-check-merge-no-element-before",this);if(!(o instanceof dt))throw new _("schema-check-merge-no-element-after",this);return this.checkMerge(i,o)}if(this.isLimit(e)||this.isLimit(t))return!1;for(let i of t.getChildren())if(!this.checkChild(e,i))return!1;return!0}addChildCheck(e,t){let i=t!==void 0?t:this._genericCheckSymbol,o=this._customChildChecks.get(i)||[];o.push(e),this._customChildChecks.set(i,o)}addAttributeCheck(e,t){let i=t!==void 0?t:this._genericCheckSymbol,o=this._customAttributeChecks.get(i)||[];o.push(e),this._customAttributeChecks.set(i,o)}setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t)}getAttributeProperties(e){return this._attributeProperties[e]||Object.create(null)}getLimitElement(e){let t;for(e instanceof N?t=e.parent:t=(e instanceof A?[e]:Array.from(e.getRanges())).reduce((o,r)=>{let s=r.getCommonAncestor();return o?o.getCommonAncestor(s,{includeSelf:!0}):s},null);!this.isLimit(t)&&t.parent;)t=t.parent;return t}checkAttributeInSelection(e,t){if(e.isCollapsed){let o=[...e.getFirstPosition().getAncestors(),new pt("",e.getAttributes())];return this.checkAttribute(o,t)}else{let i=e.getRanges();for(let o of i)for(let r of o)if(this.checkAttribute(r.item,t))return!0}return!1}*getValidRanges(e,t){e=pue(e);for(let i of e)yield*it(this._getValidRangesForRange(i,t))}getNearestSelectionRange(e,t="both"){if(e.root.rootName=="$graveyard")return null;if(this.checkChild(e,"$text"))return new A(e);let i,o,r=e.getAncestors().reverse().find(s=>this.isLimit(s))||e.root;(t=="both"||t=="backward")&&(i=new Hi({boundaries:A._createIn(r),startPosition:e,direction:"backward"})),(t=="both"||t=="forward")&&(o=new Hi({boundaries:A._createIn(r),startPosition:e}));for(let s of fue(i,o)){let a=s.walker==i?"elementEnd":"elementStart",l=s.value;if(l.type==a&&this.isObject(l.item))return A._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new A(l.nextPosition)}return null}findAllowedParent(e,t){let i=e.parent;for(;i;){if(this.checkChild(i,t))return i;if(this.isLimit(i))return null;i=i.parent}return null}setAllowedAttributes(e,t,i){let o=i.model;for(let[r,s]of Object.entries(t))o.schema.checkAttribute(e,r)&&i.setAttribute(r,s,e)}removeDisallowedAttributes(e,t){for(let i of e)if(i.is("$text"))G7(this,i,t);else{let r=A._createIn(i).getPositions();for(let s of r){let a=s.nodeBefore||s.parent;G7(this,a,t)}}}getAttributesWithProperty(e,t,i){let o={};for(let[r,s]of e.getAttributes()){let a=this.getAttributeProperties(r);a[t]!==void 0&&(i===void 0||i===a[t])&&(o[r]=s)}return o}createContext(e){return new tm(e)}_clearCache(){this._compiledDefinitions=null}_compile(){let e={},t=this._sourceDefinitions,i=Object.keys(t);for(let r of i)e[r]=eue(t[r],r);let o=Object.values(e);for(let r of o)tue(e,r),nue(e,r),iue(e,r),oue(e,r);for(let r of o)rue(e,r);for(let r of o)sue(e,r);for(let r of o)aue(e,r);for(let r of o)cue(e,r);for(let r of o)due(e,r);this._compiledDefinitions=lue(e)}_checkContextMatch(e,t){let i=e.last,o=this._evaluateChildChecks(e,t);if(o=o!==void 0?o:t.allowIn.includes(i.name),!o)return!1;let r=this.getDefinition(i),s=e.trimLast();return r?s.length==0?!0:this._checkContextMatch(s,r):!1}_evaluateChildChecks(e,t){let i=this._customChildChecks.get(this._genericCheckSymbol)||[],o=this._customChildChecks.get(t.name)||[];for(let r of[...i,...o]){let s=r(e,t);if(s!==void 0)return s}}_evaluateAttributeChecks(e,t){let i=this._customAttributeChecks.get(this._genericCheckSymbol)||[],o=this._customAttributeChecks.get(t)||[];for(let r of[...i,...o]){let s=r(e,t);if(s!==void 0)return s}}*_getValidRangesForRange(e,t){let i=e.start,o=e.start;for(let r of e.getItems({shallow:!0}))r.is("element")&&(yield*it(this._getValidRangesForRange(A._createIn(r),t))),this.checkAttribute(r,t)||(i.isEqual(o)||(yield new A(i,o)),i=N._createAfter(r)),o=N._createAfter(r);i.isEqual(o)||(yield new A(i,o))}findOptimalInsertionRange(e,t){let i=e.getSelectedElement();if(i&&this.isObject(i)&&!this.isInline(i))return t=="before"||t=="after"?new A(N._createAt(i,t)):A._createOn(i);let o=lt(e.getSelectedBlocks());if(!o)return new A(e.focus);if(o.isEmpty)return new A(N._createAt(o,0));let r=N._createAfter(o);return e.focus.isTouching(r)?new A(r):new A(N._createBefore(o))}},tm=class n{_items;constructor(e){if(e instanceof n)return e;let t;typeof e=="string"?t=[e]:Array.isArray(e)?t=e:t=e.getAncestors({includeSelf:!0}),this._items=t.map(mue)}get length(){return this._items.length}get last(){return this._items[this._items.length-1]}[Symbol.iterator](){return this._items[Symbol.iterator]()}push(e){let t=new n([e]);return t._items=[...this._items,...t._items],t}trimLast(){let e=new n([]);return e._items=this._items.slice(0,-1),e}getItem(e){return this._items[e]}*getNames(){yield*it(this._items.map(e=>e.name))}endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e)}startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e)}};function eue(n,e){let t={name:e,allowIn:new Set,allowChildren:new Set,disallowIn:new Set,disallowChildren:new Set,allowContentOf:new Set,allowWhere:new Set,allowAttributes:new Set,disallowAttributes:new Set,allowAttributesOf:new Set,inheritTypesFrom:new Set};return uue(n,t),_r(n,t,"allowIn"),_r(n,t,"allowChildren"),_r(n,t,"disallowIn"),_r(n,t,"disallowChildren"),_r(n,t,"allowContentOf"),_r(n,t,"allowWhere"),_r(n,t,"allowAttributes"),_r(n,t,"disallowAttributes"),_r(n,t,"allowAttributesOf"),_r(n,t,"inheritTypesFrom"),hue(n,t),t}function tue(n,e){for(let t of e.allowIn){let i=n[t];i?i.allowChildren.add(e.name):e.allowIn.delete(t)}}function nue(n,e){for(let t of e.allowChildren){let i=n[t];i?i.allowIn.add(e.name):e.allowChildren.delete(t)}}function iue(n,e){for(let t of e.disallowIn){let i=n[t];i?i.disallowChildren.add(e.name):e.disallowIn.delete(t)}}function oue(n,e){for(let t of e.disallowChildren){let i=n[t];i?i.disallowIn.add(e.name):e.disallowChildren.delete(t)}}function rue(n,e){for(let t of e.disallowChildren)e.allowChildren.delete(t);for(let t of e.disallowIn)e.allowIn.delete(t);for(let t of e.disallowAttributes)e.allowAttributes.delete(t)}function sue(n,e){for(let t of e.allowContentOf){let i=n[t];i&&(i.disallowChildren.forEach(o=>{e.allowChildren.has(o)||(e.disallowChildren.add(o),n[o].disallowIn.add(e.name))}),i.allowChildren.forEach(o=>{e.disallowChildren.has(o)||(e.allowChildren.add(o),n[o].allowIn.add(e.name))}))}}function aue(n,e){for(let t of e.allowWhere){let i=n[t];i&&(i.disallowIn.forEach(o=>{e.allowIn.has(o)||(e.disallowIn.add(o),n[o].disallowChildren.add(e.name))}),i.allowIn.forEach(o=>{e.disallowIn.has(o)||(e.allowIn.add(o),n[o].allowChildren.add(e.name))}))}}function lue(n){let e={};for(let t of Object.values(n))e[t.name]={name:t.name,isBlock:!!t.isBlock,isContent:!!t.isContent,isInline:!!t.isInline,isLimit:!!t.isLimit,isObject:!!t.isObject,isSelectable:!!t.isSelectable,allowIn:Array.from(t.allowIn).filter(i=>!!n[i]),allowChildren:Array.from(t.allowChildren).filter(i=>!!n[i]),allowAttributes:Array.from(t.allowAttributes)};return e}function cue(n,e){for(let t of e.allowAttributesOf){let i=n[t];if(!i)return;i.allowAttributes.forEach(o=>{e.disallowAttributes.has(o)||e.allowAttributes.add(o)})}}function due(n,e){for(let t of e.inheritTypesFrom){let i=n[t];if(i){let o=Object.keys(i).filter(r=>r.startsWith("is"));for(let r of o)r in e||(e[r]=i[r])}}}function uue(n,e){for(let t of n){let i=Object.keys(t).filter(o=>o.startsWith("is"));for(let o of i)e[o]=!!t[o]}}function _r(n,e,t){for(let i of n){let o=i[t];typeof o=="string"&&(o=[o]),Array.isArray(o)&&o.forEach(r=>e[t].add(r))}}function hue(n,e){for(let t of n){let i=t.inheritAllFrom;i&&(e.allowContentOf.add(i),e.allowWhere.add(i),e.allowAttributesOf.add(i),e.inheritTypesFrom.add(i))}}function mue(n){return typeof n=="string"||n.is("documentFragment")?{name:typeof n=="string"?n:"$documentFragment",*getAttributeKeys(){},getAttribute(){}}:{name:n.is("element")?n.name:"$text",*getAttributeKeys(){yield*it(n.getAttributeKeys())},getAttribute(e){return n.getAttribute(e)}}}function*fue(n,e){let t=!1;for(;!t;){if(t=!0,n){let i=n.next();i.done||(t=!1,yield{walker:n,value:i.value})}if(e){let i=e.next();i.done||(t=!1,yield{walker:e,value:i.value})}}}function*pue(n){for(let e of n)yield*it(e.getMinimalFlatRanges())}function G7(n,e,t){for(let i of e.getAttributeKeys())n.checkAttribute(e,i)||t.removeAttribute(i,e)}var My=class extends tt(){conversionApi;_splitParts=new Map;_cursorParents=new Map;_modelCursor=null;_emptyElementsToKeep=new Set;constructor(e){super(),this.conversionApi=I(v({},e),{consumable:null,writer:null,store:null,convertItem:(t,i)=>this._convertItem(t,i),convertChildren:(t,i)=>this._convertChildren(t,i),safeInsert:(t,i)=>this._safeInsert(t,i),updateConversionResult:(t,i)=>this._updateConversionResult(t,i),splitToAllowedParent:(t,i)=>this._splitToAllowedParent(t,i),getSplitParts:t=>this._getSplitParts(t),keepEmptyElement:t=>this._keepEmptyElement(t)})}convert(e,t,i=["$root"]){this.fire("viewCleanup",e),this._modelCursor=bue(i,t),this.conversionApi.writer=t,this.conversionApi.consumable=b2.createFrom(e),this.conversionApi.store={};let{modelRange:o}=this._convertItem(e,this._modelCursor),r=t.createDocumentFragment();if(o){this._removeEmptyElements();for(let s of Array.from(this._modelCursor.parent.getChildren()))t.append(s,r);r.markers=gue(r,t)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,r}_convertItem(e,t){let i={viewItem:e,modelCursor:t,modelRange:null};if(e.is("element")?this.fire(`element:${e.name}`,i,this.conversionApi):e.is("$text")?this.fire("text",i,this.conversionApi):this.fire("documentFragment",i,this.conversionApi),i.modelRange&&!(i.modelRange instanceof A))throw new _("view-conversion-dispatcher-incorrect-result",this);return{modelRange:i.modelRange,modelCursor:i.modelCursor}}_convertChildren(e,t){let i=t.is("position")?t:N._createAt(t,0),o=new A(i);for(let r of Array.from(e.getChildren())){let s=this._convertItem(r,i);s.modelRange instanceof A&&(o.end=s.modelRange.end,i=s.modelCursor)}return{modelRange:o,modelCursor:i}}_safeInsert(e,t){let i=this._splitToAllowedParent(e,t);return i?(this.conversionApi.writer.insert(e,i.position),!0):!1}_updateConversionResult(e,t){let i=this._getSplitParts(e),o=this.conversionApi.writer;t.modelRange||(t.modelRange=o.createRange(o.createPositionBefore(e),o.createPositionAfter(i[i.length-1])));let r=this._cursorParents.get(e);r?t.modelCursor=o.createPositionAt(r,0):t.modelCursor=t.modelRange.end}_splitToAllowedParent(e,t){let{schema:i,writer:o}=this.conversionApi,r=i.findAllowedParent(t,e);if(r){if(r===t.parent)return{position:t};this._modelCursor.parent.getAncestors().includes(r)&&(r=null)}if(!r)return F8(t,e,i)?{position:V8(t,o)}:null;let s=this.conversionApi.writer.split(t,r),a=[];for(let c of s.range.getWalker())if(c.type=="elementEnd")a.push(c.item);else{let d=a.pop(),f=c.item;this._registerSplitPair(d,f)}let l=s.range.end.parent;return this._cursorParents.set(e,l),{position:s.position,cursorParent:l}}_registerSplitPair(e,t){this._splitParts.has(e)||this._splitParts.set(e,[e]);let i=this._splitParts.get(e);this._splitParts.set(t,i),i.push(t)}_getSplitParts(e){let t;return this._splitParts.has(e)?t=this._splitParts.get(e):t=[e],t}_keepEmptyElement(e){this._emptyElementsToKeep.add(e)}_removeEmptyElements(){let e=!1;for(let t of this._splitParts.keys())t.isEmpty&&!this._emptyElementsToKeep.has(t)&&(this.conversionApi.writer.remove(t),this._splitParts.delete(t),e=!0);e&&this._removeEmptyElements()}};function gue(n,e){let t=new Set,i=new Map,o=A._createIn(n).getItems();for(let r of o)r.is("element","$marker")&&t.add(r);for(let r of t){let s=r.getAttribute("data-name"),a=e.createPositionBefore(r);i.has(s)?i.get(s).end=a.clone():i.set(s,new A(a.clone())),e.remove(r)}return i}function bue(n,e){let t;for(let i of new tm(n)){let o={};for(let s of i.getAttributeKeys())o[s]=i.getAttribute(s);let r=e.createElement(i.name,o);t&&e.insert(r,t),t=N._createAt(r,0)}return t}var Dy=class{getHtml(e){let i=U.document.implementation.createHTMLDocument("").createElement("div");return i.appendChild(e),i.innerHTML}},Vg=class{domParser;domConverter;htmlWriter;skipComments=!0;constructor(e){this.domParser=new DOMParser,this.domConverter=new Xc(e,{renderingMode:"data"}),this.htmlWriter=new Dy}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){/<(?:html|body|head|meta)(?:\s[^>]*)?>/i.test(e.trim().slice(0,1e4))||(e=`<body>${e}</body>`);let t=this.domParser.parseFromString(e,"text/html"),i=t.createDocumentFragment(),o=t.body.childNodes;for(;o.length>0;)i.appendChild(o[0]);return i}},Py=class extends tt(){model;mapper;downcastDispatcher;upcastDispatcher;viewDocument;stylesProcessor;htmlProcessor;processor;_viewWriter;constructor(e,t){super(),this.model=e,this.mapper=new lm,this.downcastDispatcher=new Og({mapper:this.mapper,schema:e.schema}),this.downcastDispatcher.on("insert:$text",L2(),{priority:"lowest"}),this.downcastDispatcher.on("insert",F2(),{priority:"lowest"}),this.upcastDispatcher=new My({schema:e.schema}),this.viewDocument=new Oy(t),this.stylesProcessor=t,this.htmlProcessor=new Vg(this.viewDocument),this.processor=this.htmlProcessor,this._viewWriter=new Pg(this.viewDocument),this.upcastDispatcher.on("text",Ode(),{priority:"lowest"}),this.upcastDispatcher.on("element",j7(),{priority:"lowest"}),this.upcastDispatcher.on("documentFragment",j7(),{priority:"lowest"}),Ze().prototype.decorate.call(this,"init"),Ze().prototype.decorate.call(this,"set"),Ze().prototype.decorate.call(this,"get"),Ze().prototype.decorate.call(this,"toView"),Ze().prototype.decorate.call(this,"toModel"),this.on("init",()=>{this.fire("ready")},{priority:"lowest"}),this.on("ready",()=>{this.model.enqueueChange({isUndoable:!1},L8)},{priority:"lowest"})}get(e={}){let{rootName:t="main",trim:i="empty"}=e;if(!this._checkIfRootsExists([t]))throw new _("datacontroller-get-non-existent-root",this);let o=this.model.document.getRoot(t);return o.isAttached()||Ve("datacontroller-get-detached-root",this),i==="empty"&&!this.model.hasContent(o,{ignoreWhitespaces:!0})?"":this.stringify(o,e)}stringify(e,t={}){let i=this.toView(e,t);return this.processor.toData(i)}toView(e,t={}){let i=this.viewDocument,o=this._viewWriter;this.mapper.clearBindings();let r=A._createIn(e),s=new Za(i);this.mapper.bindElements(e,s);let a=e.is("documentFragment")?e.markers:wue(e);return this.downcastDispatcher.convert(r,a,o,t),s}init(e){if(this.model.document.version)throw new _("datacontroller-init-document-not-empty",this);let t={};if(typeof e=="string"?t.main=e:t=e,!this._checkIfRootsExists(Object.keys(t)))throw new _("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},i=>{for(let o of Object.keys(t)){let r=this.model.document.getRoot(o);i.insert(this.parse(t[o],r),r,0)}}),Promise.resolve()}set(e,t={}){let i={};if(typeof e=="string"?i.main=e:i=e,!this._checkIfRootsExists(Object.keys(i)))throw new _("datacontroller-set-non-existent-root",this);this.model.enqueueChange(t.batchType||{},o=>{o.setSelection(null),o.removeSelectionAttribute(this.model.document.selection.getAttributeKeys());for(let r of Object.keys(i)){let s=this.model.document.getRoot(r);o.remove(o.createRangeIn(s)),o.insert(this.parse(i[r],s),s,0)}})}parse(e,t="$root"){let i=this.processor.toView(e);return this.toModel(i,t)}toModel(e,t="$root"){return this.model.change(i=>this.upcastDispatcher.convert(e,i,t))}addStyleProcessorRules(e){e(this.stylesProcessor)}registerRawContentMatcher(e){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(e),this.htmlProcessor.registerRawContentMatcher(e)}destroy(){this.stopListening()}_checkIfRootsExists(e){for(let t of e)if(!this.model.document.getRoot(t))return!1;return!0}};function wue(n){let e=[],t=n.root.document;if(!t)return new Map;let i=A._createIn(n);for(let o of t.model.markers){let r=o.getRange(),s=r.isCollapsed,a=r.start.isEqual(i.start)||r.end.isEqual(i.end);if(s&&a)e.push([o.name,r]);else{let l=i.getIntersection(r);l&&e.push([o.name,l])}}return e.sort(([o,r],[s,a])=>{if(r.end.compareWith(a.start)!=="after")return 1;if(r.start.compareWith(a.end)!=="before")return-1;switch(r.start.compareWith(a.start)){case"before":return 1;case"after":return-1;default:switch(r.end.compareWith(a.end)){case"before":return 1;case"after":return-1;default:return s.localeCompare(o)}}}),new Map(e)}var Ry=class{_helpers=new Map;_downcast;_upcast;constructor(e,t){this._downcast=$e(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=$e(t),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})}addAlias(e,t){let i=this._downcast.includes(t);if(!this._upcast.includes(t)&&!i)throw new _("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i})}for(e){if(!this._helpers.has(e))throw new _("conversion-for-unknown-group",this);return this._helpers.get(e)}elementToElement(e){this.for("downcast").elementToElement(e);for(let{model:t,view:i}of ZT(e))this.for("upcast").elementToElement({model:t,view:i,converterPriority:e.converterPriority})}attributeToElement(e){this.for("downcast").attributeToElement(e);for(let{model:t,view:i}of ZT(e))this.for("upcast").elementToAttribute({view:i,model:t,converterPriority:e.converterPriority})}attributeToAttribute(e){this.for("downcast").attributeToAttribute(e);for(let{model:t,view:i}of ZT(e))this.for("upcast").attributeToAttribute({view:i,model:t})}_createConversionHelpers({name:e,dispatchers:t,isDowncast:i}){if(this._helpers.has(e))throw new _("conversion-group-exists",this);let o=i?new f2(t):new p2(t);this._helpers.set(e,o)}};function*ZT(n){if(n.model.values)for(let e of n.model.values){let t={key:n.model.key,value:e},i=n.view[e],o=n.upcastAlso?n.upcastAlso[e]:void 0;yield*it(K7(t,i,o))}else yield*it(K7(n.model,n.view,n.upcastAlso))}function*K7(n,e,t){if(yield{model:n,view:e},t)for(let i of $e(t))yield{model:n,view:i}}var v2=class{namespaces;domParser;domConverter;htmlWriter;skipComments=!0;constructor(e,t={}){this.namespaces=t.namespaces||[],this.domParser=new DOMParser,this.domConverter=new Xc(e,{renderingMode:"data"}),this.htmlWriter=new Dy}toData(e){let t=this.domConverter.viewToDom(e);return this.htmlWriter.getHtml(t)}toView(e){let t=this._toDom(e);return this.domConverter.domToView(t,{keepOriginalCase:!0,skipComments:this.skipComments})}registerRawContentMatcher(e){this.domConverter.registerRawContentMatcher(e)}useFillerType(e){this.domConverter.blockFillerMode=e=="marked"?"markedNbsp":"nbsp"}_toDom(e){e=`<xml ${this.namespaces.map(a=>`xmlns:${a}="nsp"`).join(" ")}>${e}</xml>`;let i=this.domParser.parseFromString(e,"text/xml"),o=i.querySelector("parsererror");if(o)throw new Error("Parse error - "+o.textContent);let r=i.createDocumentFragment(),s=i.documentElement.childNodes;for(;s.length>0;)r.appendChild(s[0]);return r}};var ii=class{baseVersion;isDocumentOperation;batch;constructor(e){this.baseVersion=e,this.isDocumentOperation=this.baseVersion!==null,this.batch=null}_validate(){}toJSON(){let e=Object.assign({},this);return e.__className=this.constructor.className,delete e.batch,delete e.isDocumentOperation,e}static get className(){return"Operation"}static fromJSON(e,t){return new this(e.baseVersion)}};function z2(n,e){let t=$8(e),i=t.reduce((s,a)=>s+a.offsetSize,0),o=n.parent;Hg(n);let r=n.index;return o._insertChild(r,t),zg(o,r+t.length),zg(o,r),new A(n,n.getShiftedBy(i))}function j8(n){if(!n.isFlat)throw new _("operation-utils-remove-range-not-flat",this);let e=n.start.parent;Hg(n.start),Hg(n.end);let t=e._removeChildren(n.start.index,n.end.index-n.start.index);return zg(e,n.start.index),t}function Bg(n,e){if(!n.isFlat)throw new _("operation-utils-move-range-not-flat",this);let t=j8(n);return e=e._getTransformedByDeletion(n.start,n.end.offset-n.start.offset),z2(e,t)}function kue(n,e,t){Hg(n.start),Hg(n.end);for(let i of n.getItems({shallow:!0})){let o=i.is("$textProxy")?i.textNode:i;t!==null?o._setAttribute(e,t):o._removeAttribute(e),zg(o.parent,o.index)}zg(n.end.parent,n.end.index)}function $8(n){let e=[];function t(i){if(typeof i=="string")e.push(new pt(i));else if(i instanceof zi)e.push(new pt(i.data,i.getAttributes()));else if(i instanceof rd)e.push(i);else if(ei(i))for(let o of i)t(o)}t(n);for(let i=1;i<e.length;i++){let o=e[i],r=e[i-1];o instanceof pt&&r instanceof pt&&W8(o,r)&&(e.splice(i-1,2,new pt(r.data+o.data,r.getAttributes())),i--)}return e}function zg(n,e){let t=n.getChild(e-1),i=n.getChild(e);if(t&&i&&t.is("$text")&&i.is("$text")&&W8(t,i)){let o=new pt(t.data+i.data,t.getAttributes());n._removeChildren(e-1,2),n._insertChild(e-1,o)}}function Hg(n){let e=n.textNode,t=n.parent;if(e){let i=n.offset-e.startOffset,o=e.index;t._removeChildren(o,1);let r=new pt(e.data.substr(0,i),e.getAttributes()),s=new pt(e.data.substr(i),e.getAttributes());t._insertChild(o,[r,s])}}function W8(n,e){let t=n.getAttributes(),i=e.getAttributes();for(let o of t){if(o[1]!==e.getAttribute(o[0]))return!1;i.next()}return i.next().done}var nt=class n extends ii{sourcePosition;howMany;targetPosition;constructor(e,t,i,o){super(o),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toNext",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNone"}get type(){return this.targetPosition.root.rootName=="$graveyard"?"remove":this.sourcePosition.root.rootName=="$graveyard"?"reinsert":"move"}get affectedSelectable(){return[A._createFromPositionAndShift(this.sourcePosition,this.howMany),A._createFromPositionAndShift(this.targetPosition,0)]}clone(){return new n(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}getReversed(){let e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new n(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent,i=this.sourcePosition.offset,o=this.targetPosition.offset;if(i+this.howMany>e.maxOffset)throw new _("move-operation-nodes-do-not-exist",this);if(e===t&&i<o&&o<i+this.howMany)throw new _("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&Cn(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){let r=this.sourcePosition.path.length-1;if(this.targetPosition.path[r]>=i&&this.targetPosition.path[r]<i+this.howMany)throw new _("move-operation-node-into-itself",this)}}_execute(){Bg(A._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e.targetPosition=this.targetPosition.toJSON(),e}static get className(){return"MoveOperation"}static fromJSON(e,t){let i=N.fromJSON(e.sourcePosition,t),o=N.fromJSON(e.targetPosition,t);return new this(i,e.howMany,o,e.baseVersion)}},En=class n extends ii{position;nodes;shouldReceiveAttributes;constructor(e,t,i){super(i),this.position=e.clone(),this.position.stickiness="toNone",this.nodes=new Yc($8(t)),this.shouldReceiveAttributes=!1}get type(){return"insert"}get howMany(){return this.nodes.maxOffset}get affectedSelectable(){return this.position.clone()}clone(){let e=new Yc([...this.nodes].map(i=>i._clone(!0))),t=new n(this.position,e,this.baseVersion);return t.shouldReceiveAttributes=this.shouldReceiveAttributes,t}getReversed(){let e=this.position.root.document.graveyard,t=new N(e,[0]);return new nt(this.position,this.nodes.maxOffset,t,this.baseVersion+1)}_validate(){let e=this.position.parent;if(!e||e.maxOffset<this.position.offset)throw new _("insert-operation-position-invalid",this)}_execute(){let e=this.nodes;this.nodes=new Yc([...e].map(t=>t._clone(!0))),z2(this.position,e)}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e.nodes=this.nodes.toJSON(),e}static get className(){return"InsertOperation"}static fromJSON(e,t){let i=[];for(let r of e.nodes)r.name?i.push(dt.fromJSON(r)):i.push(pt.fromJSON(r));let o=new n(N.fromJSON(e.position,t),i,e.baseVersion);return o.shouldReceiveAttributes=e.shouldReceiveAttributes,o}},ut=class n extends ii{splitPosition;howMany;insertionPosition;graveyardPosition;constructor(e,t,i,o,r){super(r),this.splitPosition=e.clone(),this.splitPosition.stickiness="toNext",this.howMany=t,this.insertionPosition=i,this.graveyardPosition=o?o.clone():null,this.graveyardPosition&&(this.graveyardPosition.stickiness="toNext")}get type(){return"split"}get moveTargetPosition(){let e=this.insertionPosition.path.slice();return e.push(0),new N(this.insertionPosition.root,e)}get movedRange(){let e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new A(this.splitPosition,e)}get affectedSelectable(){let e=[A._createFromPositionAndShift(this.splitPosition,0),A._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&e.push(A._createFromPositionAndShift(this.graveyardPosition,0)),e}clone(){return new n(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.splitPosition.root.document.graveyard,t=new N(e,[0]);return new jt(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1)}_validate(){let e=this.splitPosition.parent,t=this.splitPosition.offset;if(!e||e.maxOffset<t)throw new _("split-operation-position-invalid",this);if(e.parent){if(this.howMany!=e.maxOffset-this.splitPosition.offset)throw new _("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new _("split-operation-graveyard-position-invalid",this)}else throw new _("split-operation-split-in-root",this)}_execute(){let e=this.splitPosition.parent;if(this.graveyardPosition)Bg(A._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{let i=e._clone();z2(this.insertionPosition,i)}let t=new A(N._createAt(e,this.splitPosition.offset),N._createAt(e,e.maxOffset));Bg(t,this.moveTargetPosition)}toJSON(){let e=super.toJSON();return e.splitPosition=this.splitPosition.toJSON(),e.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(e.graveyardPosition=this.graveyardPosition.toJSON()),e}static get className(){return"SplitOperation"}static getInsertionPosition(e){let t=e.path.slice(0,-1);return t[t.length-1]++,new N(e.root,t,"toPrevious")}static fromJSON(e,t){let i=N.fromJSON(e.splitPosition,t),o=N.fromJSON(e.insertionPosition,t),r=e.graveyardPosition?N.fromJSON(e.graveyardPosition,t):null;return new this(i,e.howMany,o,r,e.baseVersion)}},jt=class n extends ii{sourcePosition;howMany;targetPosition;graveyardPosition;constructor(e,t,i,o,r){super(r),this.sourcePosition=e.clone(),this.sourcePosition.stickiness="toPrevious",this.howMany=t,this.targetPosition=i.clone(),this.targetPosition.stickiness="toNext",this.graveyardPosition=o.clone()}get type(){return"merge"}get deletionPosition(){return new N(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}get movedRange(){let e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new A(this.sourcePosition,e)}get affectedSelectable(){let e=this.sourcePosition.parent;return[A._createOn(e),A._createFromPositionAndShift(this.targetPosition,0),A._createFromPositionAndShift(this.graveyardPosition,0)]}clone(){return new n(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}getReversed(){let e=this.targetPosition._getTransformedByMergeOperation(this),t=this.sourcePosition.path.slice(0,-1),i=new N(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);return new ut(e,this.howMany,i,this.graveyardPosition,this.baseVersion+1)}_validate(){let e=this.sourcePosition.parent,t=this.targetPosition.parent;if(e.parent)if(t.parent){if(this.howMany!=e.maxOffset)throw new _("merge-operation-how-many-invalid",this)}else throw new _("merge-operation-target-position-invalid",this);else throw new _("merge-operation-source-position-invalid",this)}_execute(){let e=this.sourcePosition.parent,t=A._createIn(e);Bg(t,this.targetPosition),Bg(A._createOn(e),this.graveyardPosition)}toJSON(){let e=super.toJSON();return e.sourcePosition=e.sourcePosition.toJSON(),e.targetPosition=e.targetPosition.toJSON(),e.graveyardPosition=e.graveyardPosition.toJSON(),e}static get className(){return"MergeOperation"}static fromJSON(e,t){let i=N.fromJSON(e.sourcePosition,t),o=N.fromJSON(e.targetPosition,t),r=N.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,o,r,e.baseVersion)}},Ui=class n extends ii{name;oldRange;newRange;affectsData;_markers;constructor(e,t,i,o,r,s){super(s),this.name=e,this.oldRange=t?t.clone():null,this.newRange=i?i.clone():null,this.affectsData=r,this._markers=o}get type(){return"marker"}get affectedSelectable(){let e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push(...this.newRange.getDifference(this.oldRange)):e.push(this.newRange.clone())),e}clone(){return new n(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}getReversed(){return new n(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}_execute(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}toJSON(){let e=super.toJSON();return this.oldRange&&(e.oldRange=this.oldRange.toJSON()),this.newRange&&(e.newRange=this.newRange.toJSON()),delete e._markers,e}static get className(){return"MarkerOperation"}static fromJSON(e,t){return new n(e.name,e.oldRange?A.fromJSON(e.oldRange,t):null,e.newRange?A.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion)}},ln=class n extends ii{range;key;oldValue;newValue;constructor(e,t,i,o,r){super(r),this.range=e.clone(),this.key=t,this.oldValue=i===void 0?null:i,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addAttribute":this.newValue===null?"removeAttribute":"changeAttribute"}get affectedSelectable(){return this.range.clone()}clone(){return new n(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new n(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}toJSON(){let e=super.toJSON();return e.range=this.range.toJSON(),e}_validate(){if(!this.range.isFlat)throw new _("attribute-operation-range-not-flat",this);for(let e of this.range.getItems({shallow:!0})){if(this.oldValue!==null&&!$c(e.getAttribute(this.key),this.oldValue))throw new _("attribute-operation-wrong-old-value",this,{item:e,key:this.key,value:this.oldValue});if(this.oldValue===null&&this.newValue!==null&&e.hasAttribute(this.key))throw new _("attribute-operation-attribute-exists",this,{node:e,key:this.key})}}_execute(){$c(this.oldValue,this.newValue)||kue(this.range,this.key,this.newValue)}static get className(){return"AttributeOperation"}static fromJSON(e,t){return new n(A.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion)}},Jt=class n extends ii{get type(){return"noop"}get affectedSelectable(){return null}clone(){return new n(this.baseVersion)}getReversed(){return new n(this.baseVersion+1)}_execute(){}static get className(){return"NoOperation"}},ho=class n extends ii{position;oldName;newName;constructor(e,t,i,o){super(o),this.position=e,this.position.stickiness="toNext",this.oldName=t,this.newName=i}get type(){return"rename"}get affectedSelectable(){return this.position.nodeAfter}clone(){return new n(this.position.clone(),this.oldName,this.newName,this.baseVersion)}getReversed(){return new n(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}_validate(){let e=this.position.nodeAfter;if(e instanceof dt){if(e.name!==this.oldName)throw new _("rename-operation-wrong-name",this)}else throw new _("rename-operation-wrong-position",this)}_execute(){let e=this.position.nodeAfter;e.name=this.newName}toJSON(){let e=super.toJSON();return e.position=this.position.toJSON(),e}static get className(){return"RenameOperation"}static fromJSON(e,t){return new n(N.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion)}},td=class n extends ii{root;key;oldValue;newValue;constructor(e,t,i,o,r){super(r),this.root=e,this.key=t,this.oldValue=i===void 0?null:i,this.newValue=o===void 0?null:o}get type(){return this.oldValue===null?"addRootAttribute":this.newValue===null?"removeRootAttribute":"changeRootAttribute"}get affectedSelectable(){return this.root}clone(){return new n(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}getReversed(){return new n(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}_validate(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new _("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue)throw new _("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key))throw new _("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}_execute(){this.newValue!==null?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}toJSON(){let e=super.toJSON();return e.root=this.root.toJSON(),e}static get className(){return"RootAttributeOperation"}static fromJSON(e,t){if(!t.getRoot(e.root))throw new _("rootattribute-operation-fromjson-no-root",this,{rootName:e.root});return new n(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion)}},Ja=class n extends ii{rootName;elementName;isAdd;_document;constructor(e,t,i,o,r){if(super(r),this.rootName=e,this.elementName=t,this.isAdd=i,this._document=o,!this._document.getRoot(this.rootName)){let s=this._document.createRoot(this.elementName,this.rootName);s._isAttached=!1}}get type(){return this.isAdd?"addRoot":"detachRoot"}get affectedSelectable(){return this._document.getRoot(this.rootName)}clone(){return new n(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}getReversed(){return new n(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}_execute(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}toJSON(){let e=super.toJSON();return delete e._document,e}static get className(){return"RootOperation"}static fromJSON(e,t){return new n(e.rootName,e.elementName,e.isAdd,t,e.baseVersion)}},mo={};mo[ln.className]=ln;mo[En.className]=En;mo[Ui.className]=Ui;mo[nt.className]=nt;mo[Jt.className]=Jt;mo[ii.className]=ii;mo[ho.className]=ho;mo[td.className]=td;mo[Ja.className]=Ja;mo[ut.className]=ut;mo[jt.className]=jt;var y2=class{static fromJSON(e,t){return mo[e.__className].fromJSON(e,t)}},_2=new Map;function Je(n,e,t){let i=_2.get(n);i||(i=new Map,_2.set(n,i)),i.set(e,t)}function vue(n,e){let t=_2.get(n);return t&&t.has(e)?t.get(e):yue}function yue(n){return[n]}function Q7(n,e,t={}){let i=vue(n.constructor,e.constructor);try{return n=n.clone(),i(n,e,t)}catch(o){throw o}}function q8(n,e,t){n=n.slice(),e=e.slice();let i=new C2(t.document,t.useRelations,t.forceWeakRemove);i.setOriginalOperations(n),i.setOriginalOperations(e);let o=i.originalOperations;if(n.length==0||e.length==0)return{operationsA:n,operationsB:e,originalOperations:o};let r=new WeakMap;for(let l of n)r.set(l,0);let s={nextBaseVersionA:n[n.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:n.length,originalOperationsBCount:e.length},a=0;for(;a<n.length;){let l=n[a],c=r.get(l);if(c==e.length){a++;continue}let d=e[c],f=Q7(l,d,i.getContext(l,d,!0)),p=Q7(d,l,i.getContext(d,l,!1));i.updateRelation(l,d),i.setOriginalOperations(f,l),i.setOriginalOperations(p,d);for(let g of f)r.set(g,c+p.length);n.splice(a,1,...f),e.splice(c,1,...p)}if(J7(n),J7(e),t.padWithNoOps){let l=n.length-s.originalOperationsACount,c=e.length-s.originalOperationsBCount;Z7(n,c-l),Z7(e,l-c)}return Y7(n,s.nextBaseVersionB),Y7(e,s.nextBaseVersionA),{operationsA:n,operationsB:e,originalOperations:o}}var C2=class{originalOperations;_history;_useRelations;_forceWeakRemove;_relations;constructor(e,t,i=!1){this.originalOperations=new Map,this._history=e.history,this._useRelations=t,this._forceWeakRemove=!!i,this._relations=new Map}setOriginalOperations(e,t=null){let i=t?this.originalOperations.get(t):null;for(let o of e)this.originalOperations.set(o,i||o)}updateRelation(e,t){if(e instanceof nt)t instanceof jt?e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)?this._setRelation(e,t,"insertAtSource"):e.targetPosition.isEqual(t.deletionPosition)?this._setRelation(e,t,"insertBetween"):e.targetPosition.isAfter(t.sourcePosition)&&this._setRelation(e,t,"moveTargetAfter"):t instanceof nt&&(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)?this._setRelation(e,t,"insertBefore"):this._setRelation(e,t,"insertAfter"));else if(e instanceof ut){if(t instanceof jt)e.splitPosition.isBefore(t.sourcePosition)&&this._setRelation(e,t,"splitBefore");else if(t instanceof nt)if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition))this._setRelation(e,t,"splitBefore");else{let i=A._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&i.containsPosition(e.splitPosition)){let o=i.end.offset-e.splitPosition.offset,r=e.splitPosition.offset-i.start.offset;this._setRelation(e,t,{howMany:o,offset:r})}}}else if(e instanceof jt)t instanceof jt?(e.targetPosition.isEqual(t.sourcePosition)||this._setRelation(e,t,"mergeTargetNotMoved"),e.sourcePosition.isEqual(t.targetPosition)&&this._setRelation(e,t,"mergeSourceNotMoved"),e.sourcePosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeSameElement")):t instanceof ut?e.sourcePosition.isEqual(t.splitPosition)&&this._setRelation(e,t,"splitAtSource"):t instanceof nt&&t.howMany>0&&(e.sourcePosition.isEqual(t.sourcePosition.getShiftedBy(t.howMany))&&this._setRelation(e,t,"mergeSourceAffected"),e.targetPosition.isEqual(t.sourcePosition)&&this._setRelation(e,t,"mergeTargetWasBefore"));else if(e instanceof Ui){let i=e.newRange;if(!i)return;if(t instanceof jt){let o=i.start.isEqual(t.targetPosition),r=i.start.isEqual(t.deletionPosition),s=i.end.isEqual(t.deletionPosition),a=i.end.isEqual(t.sourcePosition);(o||r||s||a)&&this._setRelation(e,t,{wasInLeftElement:o,wasStartBeforeMergedElement:r,wasEndBeforeMergedElement:s,wasInRightElement:a})}}}getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove}}_wasUndone(e){let t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t)}_getRelation(e,t){let i=this.originalOperations.get(t),o=this._history.getUndoneOperation(i);if(!o)return null;let r=this.originalOperations.get(e),s=this._relations.get(r);return s&&s.get(o)||null}_setRelation(e,t,i){let o=this.originalOperations.get(e),r=this.originalOperations.get(t),s=this._relations.get(o);s||(s=new Map,this._relations.set(o,s)),s.set(r,i)}};function Y7(n,e){for(let t of n)t.baseVersion=e++}function Z7(n,e){for(let t=0;t<e;t++)n.push(new Jt(0))}function J7(n){let e=new Map;for(let t=0;t<n.length;t++){let i=n[t];i instanceof Ui&&(i.baseVersion!==-1?e.set(i.name,{op:i,ranges:i.newRange?[i.newRange]:[]}):(i.newRange&&e.get(i.name).ranges.push(i.newRange),n.splice(t,1),t--))}for(let{op:t,ranges:i}of e.values())i.length?t.newRange=A._createFromRanges(i):t.newRange=null}Je(ln,ln,(n,e,t)=>{if(n.key===e.key&&n.range.start.hasSameParentAs(e.range.start)){let i=n.range.getDifference(e.range).map(r=>new ln(r,n.key,n.oldValue,n.newValue,0)),o=n.range.getIntersection(e.range);return o&&t.aIsStrong&&i.push(new ln(o,e.key,e.newValue,n.newValue,0)),i.length==0?[new Jt(0)]:i}else return[n]});Je(ln,En,(n,e)=>{if(n.range.start.hasSameParentAs(e.position)&&n.range.containsPosition(e.position)){let i=n.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map(o=>new ln(o,n.key,n.oldValue,n.newValue,n.baseVersion));if(e.shouldReceiveAttributes){let o=G8(e,n.key,n.oldValue);o&&i.unshift(o)}return i}return n.range=n.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[n]});function G8(n,e,t){let o=n.nodes.getNode(0).getAttribute(e);if(o==t)return null;let r=new A(n.position,n.position.getShiftedBy(n.howMany));return new ln(r,e,o,t,0)}Je(ln,jt,(n,e)=>{let t=[];n.range.start.hasSameParentAs(e.deletionPosition)&&(n.range.containsPosition(e.deletionPosition)||n.range.start.isEqual(e.deletionPosition))&&t.push(A._createFromPositionAndShift(e.graveyardPosition,1));let i=n.range._getTransformedByMergeOperation(e);return i.isCollapsed||t.push(i),t.map(o=>new ln(o,n.key,n.oldValue,n.newValue,n.baseVersion))});Je(ln,nt,(n,e)=>_ue(n.range,e).map(i=>new ln(i,n.key,n.oldValue,n.newValue,n.baseVersion)));function _ue(n,e){let t=A._createFromPositionAndShift(e.sourcePosition,e.howMany),i=null,o=[];t.containsRange(n,!0)?i=n:n.start.hasSameParentAs(t.start)?(o=n.getDifference(t),i=n.getIntersection(t)):o=[n];let r=[];for(let s of o){s=s._getTransformedByDeletion(e.sourcePosition,e.howMany);let a=e.getMovedRangeStart(),l=s.start.hasSameParentAs(a),c=s._getTransformedByInsertion(a,e.howMany,l);r.push(...c)}return i&&r.push(i._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),r}Je(ln,ut,(n,e)=>{if(n.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.range.end.offset++,[n];if(n.range.start.hasSameParentAs(e.splitPosition)&&n.range.containsPosition(e.splitPosition)){let t=n.clone();return t.range=new A(e.moveTargetPosition.clone(),n.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),n.range.end=e.splitPosition.clone(),n.range.end.stickiness="toPrevious",[n,t]}return n.range=n.range._getTransformedBySplitOperation(e),[n]});Je(En,ln,(n,e)=>{let t=[n];if(n.shouldReceiveAttributes&&n.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(n.position)){let i=G8(n,e.key,e.newValue);i&&t.push(i)}return t});Je(En,En,(n,e,t)=>n.position.isEqual(e.position)&&t.aIsStrong?[n]:(n.position=n.position._getTransformedByInsertOperation(e),[n]));Je(En,nt,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Je(En,ut,(n,e)=>(n.position=n.position._getTransformedBySplitOperation(e),[n]));Je(En,jt,(n,e)=>(n.position=n.position._getTransformedByMergeOperation(e),[n]));Je(Ui,En,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByInsertOperation(e)[0]),n.newRange&&(n.newRange=n.newRange._getTransformedByInsertOperation(e)[0]),[n]));Je(Ui,Ui,(n,e,t)=>{if(n.name==e.name)if(t.aIsStrong)n.oldRange=e.newRange?e.newRange.clone():null;else return[new Jt(0)];return[n]});Je(Ui,jt,(n,e)=>(n.oldRange&&(n.oldRange=n.oldRange._getTransformedByMergeOperation(e)),n.newRange&&(n.newRange=n.newRange._getTransformedByMergeOperation(e)),[n]));Je(Ui,nt,(n,e)=>{let t=[n];if(n.oldRange&&(n.oldRange=A._createFromRanges(n.oldRange._getTransformedByMoveOperation(e))),n.newRange){let i=n.newRange._getTransformedByMoveOperation(e);n.newRange=i[0];for(let o=1;o<i.length;o++){let r=n.clone();r.oldRange=null,r.newRange=i[o],r.baseVersion=-1,t.push(r)}}return t});Je(Ui,ut,(n,e,t)=>{if(n.oldRange&&(n.oldRange=n.oldRange._getTransformedBySplitOperation(e)),n.newRange){if(t.abRelation){let i=n.newRange._getTransformedBySplitOperation(e);return n.newRange.start.isEqual(e.splitPosition)&&t.abRelation.wasStartBeforeMergedElement?n.newRange.start=N._createAt(e.insertionPosition):n.newRange.start.isEqual(e.splitPosition)&&!t.abRelation.wasInLeftElement?n.newRange.start=N._createAt(e.moveTargetPosition):n.newRange.start=i.start,n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasInRightElement?n.newRange.end=N._createAt(e.moveTargetPosition):n.newRange.end.isEqual(e.splitPosition)&&t.abRelation.wasEndBeforeMergedElement?n.newRange.end=N._createAt(e.insertionPosition):n.newRange.end=i.end,[n]}n.newRange=n.newRange._getTransformedBySplitOperation(e)}return[n]});Je(jt,En,(n,e)=>(n.sourcePosition.hasSameParentAs(e.position)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByInsertOperation(e),n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e),[n]));Je(jt,jt,(n,e,t)=>{if(n.sourcePosition.isEqual(e.sourcePosition)&&n.targetPosition.isEqual(e.targetPosition))if(t.bWasUndone){let i=e.graveyardPosition.path.slice();return i.push(0),n.sourcePosition=new N(e.graveyardPosition.root,i),n.howMany=0,[n]}else return[new Jt(0)];if(n.sourcePosition.isEqual(e.sourcePosition)&&!n.targetPosition.isEqual(e.targetPosition)&&!t.bWasUndone&&t.abRelation!="splitAtSource"){let i=n.targetPosition.root.rootName=="$graveyard",o=e.targetPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){let l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition._getTransformedByMergeOperation(e);return[new nt(l,n.howMany,c,0)]}else return[new Jt(0)]}return n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition=n.sourcePosition._getTransformedByMergeOperation(e),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),(!n.graveyardPosition.isEqual(e.graveyardPosition)||!t.aIsStrong)&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Je(jt,nt,(n,e,t)=>{let i=A._createFromPositionAndShift(e.sourcePosition,e.howMany);return e.type=="remove"&&!t.bWasUndone&&n.deletionPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.sourcePosition)?[new Jt(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(n.sourcePosition)?n.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(n.sourcePosition)&&t.abRelation=="mergeSourceAffected"?n.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(n.targetPosition)?(n.targetPosition.stickiness="toNone",n.howMany-=e.howMany):e.targetPosition.isEqual(n.targetPosition)&&t.abRelation=="mergeTargetWasBefore"?(n.targetPosition.stickiness="toPrevious",n.howMany+=e.howMany):(n.sourcePosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.sourcePosition.hasSameParentAs(e.sourcePosition)&&(n.howMany-=e.howMany)),n.sourcePosition=n.sourcePosition._getTransformedByMoveOperation(e),n.targetPosition=n.targetPosition._getTransformedByMoveOperation(e),n.sourcePosition.stickiness="toPrevious",n.targetPosition.stickiness="toNext",n.graveyardPosition.isEqual(e.targetPosition)||(n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)),[n])});Je(jt,ut,(n,e,t)=>{if(e.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),n.deletionPosition.isEqual(e.graveyardPosition)&&(n.howMany=e.howMany)),n.targetPosition.isEqual(e.splitPosition)&&(e.graveyardPosition&&n.deletionPosition.isEqual(e.graveyardPosition)||t.abRelation=="mergeTargetNotMoved"))return n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),[n];if(n.sourcePosition.isEqual(e.splitPosition)){if(t.abRelation=="mergeSourceNotMoved")return n.howMany=0,n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n];if(t.abRelation=="mergeSameElement"||n.sourcePosition.offset>0)return n.sourcePosition=e.moveTargetPosition.clone(),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]}return n.sourcePosition.hasSameParentAs(e.splitPosition)&&(n.howMany=e.splitPosition.offset),n.sourcePosition=n.sourcePosition._getTransformedBySplitOperation(e),n.targetPosition=n.targetPosition._getTransformedBySplitOperation(e),[n]});Je(nt,En,(n,e)=>{let i=A._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByInsertOperation(e,!1)[0];return n.sourcePosition=i.start,n.howMany=i.end.offset-i.start.offset,n.targetPosition.isEqual(e.position)||(n.targetPosition=n.targetPosition._getTransformedByInsertOperation(e)),[n]});Je(nt,nt,(n,e,t)=>{let i=A._createFromPositionAndShift(n.sourcePosition,n.howMany),o=A._createFromPositionAndShift(e.sourcePosition,e.howMany),r=t.aIsStrong,s=!t.aIsStrong;t.abRelation=="insertBefore"||t.baRelation=="insertAfter"?s=!0:(t.abRelation=="insertAfter"||t.baRelation=="insertBefore")&&(s=!1);let a;if(n.targetPosition.isEqual(e.targetPosition)&&s?a=n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):a=n.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),X7(n,e)&&X7(e,n))return[e.getReversed()];if(i.containsPosition(e.targetPosition)&&i.containsRange(o,!0))return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),em([i],a);if(o.containsPosition(n.targetPosition)&&o.containsRange(i,!0))return i.start=i.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),i.end=i.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),em([i],a);let d=Cn(n.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if(d=="prefix"||d=="extension")return i.start=i.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),i.end=i.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),em([i],a);n.type=="remove"&&e.type!="remove"&&!t.aWasUndone&&!t.forceWeakRemove?r=!0:n.type!="remove"&&e.type=="remove"&&!t.bWasUndone&&!t.forceWeakRemove&&(r=!1);let f=[],p=i.getDifference(o);for(let w of p){w.start=w.start._getTransformedByDeletion(e.sourcePosition,e.howMany),w.end=w.end._getTransformedByDeletion(e.sourcePosition,e.howMany);let k=Cn(w.start.getParentPath(),e.getMovedRangeStart().getParentPath())=="same",C=w._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,k);f.push(...C)}let g=i.getIntersection(o);return g!==null&&r&&(g.start=g.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),g.end=g.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),f.length===0?f.push(g):f.length==1?o.start.isBefore(i.start)||o.start.isEqual(i.start)?f.unshift(g):f.push(g):f.splice(1,0,g)),f.length===0?[new Jt(n.baseVersion)]:em(f,a)});Je(nt,ut,(n,e,t)=>{let i=n.targetPosition.clone();(!n.targetPosition.isEqual(e.insertionPosition)||!e.graveyardPosition||t.abRelation=="moveTargetAfter")&&(i=n.targetPosition._getTransformedBySplitOperation(e));let o=A._createFromPositionAndShift(n.sourcePosition,n.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||n.howMany++,n.targetPosition=i,[n];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){let a=new A(e.splitPosition,o.end);a=a._getTransformedBySplitOperation(e);let l=[new A(o.start,e.splitPosition),a];return em(l,i)}n.targetPosition.isEqual(e.splitPosition)&&t.abRelation=="insertAtSource"&&(i=e.moveTargetPosition),n.targetPosition.isEqual(e.insertionPosition)&&t.abRelation=="insertBetween"&&(i=n.targetPosition);let s=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){let a=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);n.howMany>1&&a&&!t.aWasUndone&&s.push(A._createFromPositionAndShift(e.insertionPosition,1))}return em(s,i)});Je(nt,jt,(n,e,t)=>{let i=A._createFromPositionAndShift(n.sourcePosition,n.howMany);if(e.deletionPosition.hasSameParentAs(n.sourcePosition)&&i.containsPosition(e.sourcePosition)){if(n.type=="remove"&&!t.forceWeakRemove){if(!t.aWasUndone){let s=[],a=e.graveyardPosition.clone(),l=e.targetPosition._getTransformedByMergeOperation(e),c=n.targetPosition.getTransformedByOperation(e);n.howMany>1&&(s.push(new nt(n.sourcePosition,n.howMany-1,c,0)),a=a._getTransformedByMove(n.sourcePosition,c,n.howMany-1),l=l._getTransformedByMove(n.sourcePosition,c,n.howMany-1));let d=e.deletionPosition._getCombined(n.sourcePosition,c),f=new nt(a,1,d,0),p=f.getMovedRangeStart().path.slice();p.push(0);let g=new N(f.targetPosition.root,p);l=l._getTransformedByMove(a,d,1);let w=new nt(l,e.howMany,g,0);return s.push(f),s.push(w),s}}else if(n.howMany==1)return t.bWasUndone?(n.sourcePosition=e.graveyardPosition.clone(),n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]):[new Jt(0)]}let r=A._createFromPositionAndShift(n.sourcePosition,n.howMany)._getTransformedByMergeOperation(e);return n.sourcePosition=r.start,n.howMany=r.end.offset-r.start.offset,n.targetPosition=n.targetPosition._getTransformedByMergeOperation(e),[n]});Je(ho,En,(n,e)=>(n.position=n.position._getTransformedByInsertOperation(e),[n]));Je(ho,jt,(n,e)=>n.position.isEqual(e.deletionPosition)?(n.position=e.graveyardPosition.clone(),n.position.stickiness="toNext",[n]):(n.position=n.position._getTransformedByMergeOperation(e),[n]));Je(ho,nt,(n,e)=>(n.position=n.position._getTransformedByMoveOperation(e),[n]));Je(ho,ho,(n,e,t)=>{if(n.position.isEqual(e.position))if(t.aIsStrong)n.oldName=e.newName;else return[new Jt(0)];return[n]});Je(ho,ut,(n,e)=>{let t=n.position.path,i=e.splitPosition.getParentPath();if(Cn(t,i)=="same"&&!e.graveyardPosition){let o=new ho(n.position.getShiftedBy(1),n.oldName,n.newName,0);return[n,o]}return n.position=n.position._getTransformedBySplitOperation(e),[n]});Je(td,td,(n,e,t)=>{if(n.root===e.root&&n.key===e.key){if(!t.aIsStrong||n.newValue===e.newValue)return[new Jt(0)];n.oldValue=e.newValue}return[n]});Je(Ja,Ja,(n,e)=>n.rootName===e.rootName&&n.isAdd===e.isAdd?[new Jt(0)]:[n]);Je(ut,En,(n,e)=>(n.splitPosition.hasSameParentAs(e.position)&&n.splitPosition.offset<e.position.offset&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByInsertOperation(e),n.insertionPosition=n.insertionPosition._getTransformedByInsertOperation(e),[n]));Je(ut,jt,(n,e,t)=>{if(!n.graveyardPosition&&!t.bWasUndone&&n.splitPosition.hasSameParentAs(e.sourcePosition)){let i=e.graveyardPosition.path.slice();i.push(0);let o=new N(e.graveyardPosition.root,i),r=ut.getInsertionPosition(new N(e.graveyardPosition.root,i)),s=new ut(o,0,r,null,0);return n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=ut.getInsertionPosition(n.splitPosition),n.graveyardPosition=s.insertionPosition.clone(),n.graveyardPosition.stickiness="toNext",[s,n]}return n.splitPosition.hasSameParentAs(e.deletionPosition)&&!n.splitPosition.isAfter(e.deletionPosition)&&n.howMany--,n.splitPosition.hasSameParentAs(e.targetPosition)&&(n.howMany+=e.howMany),n.splitPosition=n.splitPosition._getTransformedByMergeOperation(e),n.insertionPosition=ut.getInsertionPosition(n.splitPosition),n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedByMergeOperation(e)),[n]});Je(ut,nt,(n,e,t)=>{let i=A._createFromPositionAndShift(e.sourcePosition,e.howMany);if(n.graveyardPosition){let r=i.start.isEqual(n.graveyardPosition)||i.containsPosition(n.graveyardPosition);if(!t.bWasUndone&&r){let s=n.splitPosition._getTransformedByMoveOperation(e),a=n.graveyardPosition._getTransformedByMoveOperation(e),l=a.path.slice();l.push(0);let c=new N(a.root,l);return[new nt(s,n.howMany,c,0)]}n.graveyardPosition=n.graveyardPosition._getTransformedByMoveOperation(e)}let o=n.splitPosition.isEqual(e.targetPosition);if(o&&(t.baRelation=="insertAtSource"||t.abRelation=="splitBefore"))return n.howMany+=e.howMany,n.splitPosition=n.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),n.insertionPosition=ut.getInsertionPosition(n.splitPosition),[n];if(o&&t.abRelation&&t.abRelation.howMany){let{howMany:r,offset:s}=t.abRelation;return n.howMany+=r,n.splitPosition=n.splitPosition.getShiftedBy(s),[n]}if(n.splitPosition.hasSameParentAs(e.sourcePosition)&&i.containsPosition(n.splitPosition)){let r=e.howMany-(n.splitPosition.offset-e.sourcePosition.offset);return n.howMany-=r,n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany),n.splitPosition=e.sourcePosition.clone(),n.insertionPosition=ut.getInsertionPosition(n.splitPosition),[n]}return e.sourcePosition.isEqual(e.targetPosition)||(n.splitPosition.hasSameParentAs(e.sourcePosition)&&n.splitPosition.offset<=e.sourcePosition.offset&&(n.howMany-=e.howMany),n.splitPosition.hasSameParentAs(e.targetPosition)&&n.splitPosition.offset<e.targetPosition.offset&&(n.howMany+=e.howMany)),n.splitPosition.stickiness="toNone",n.splitPosition=n.splitPosition._getTransformedByMoveOperation(e),n.splitPosition.stickiness="toNext",n.graveyardPosition?n.insertionPosition=n.insertionPosition._getTransformedByMoveOperation(e):n.insertionPosition=ut.getInsertionPosition(n.splitPosition),[n]});Je(ut,ut,(n,e,t)=>{if(n.splitPosition.isEqual(e.splitPosition)){if(!n.graveyardPosition&&!e.graveyardPosition)return[new Jt(0)];if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition))return[new Jt(0)];if(t.abRelation=="splitBefore")return n.howMany=0,n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e),[n]}if(n.graveyardPosition&&e.graveyardPosition&&n.graveyardPosition.isEqual(e.graveyardPosition)){let i=n.splitPosition.root.rootName=="$graveyard",o=e.splitPosition.root.rootName=="$graveyard";if(o&&!i||!(i&&!o)&&t.aIsStrong){let l=[];return e.howMany&&l.push(new nt(e.moveTargetPosition,e.howMany,e.splitPosition,0)),n.howMany&&l.push(new nt(n.splitPosition,n.howMany,n.moveTargetPosition,0)),l}else return[new Jt(0)]}if(n.graveyardPosition&&(n.graveyardPosition=n.graveyardPosition._getTransformedBySplitOperation(e)),n.splitPosition.isEqual(e.insertionPosition)&&t.abRelation=="splitBefore")return n.howMany++,[n];if(e.splitPosition.isEqual(n.insertionPosition)&&t.baRelation=="splitBefore"){let i=e.insertionPosition.path.slice();i.push(0);let o=new N(e.insertionPosition.root,i),r=new nt(n.insertionPosition,1,o,0);return[n,r]}return n.splitPosition.hasSameParentAs(e.splitPosition)&&n.splitPosition.offset<e.splitPosition.offset&&(n.howMany-=e.howMany),n.splitPosition=n.splitPosition._getTransformedBySplitOperation(e),n.insertionPosition=ut.getInsertionPosition(n.splitPosition),[n]});function X7(n,e){return n.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)===null}function em(n,e){let t=[];for(let i=0;i<n.length;i++){let o=n[i],r=new nt(o.start,o.end.offset-o.start.offset,e,0);t.push(r);for(let s=i+1;s<n.length;s++)n[s]=n[s]._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)[0];e=e._getTransformedByMove(r.sourcePosition,r.targetPosition,r.howMany)}return t}var Kt=class extends tt(N){constructor(e,t,i="toNone"){if(super(e,t,i),!this.root.is("rootElement"))throw new _("model-liveposition-root-not-rootelement",e);Cue.call(this)}detach(){this.stopListening()}toPosition(){return new N(this.root,this.path.slice(),this.stickiness)}static fromPosition(e,t){return new this(e.root,e.path.slice(),t||e.stickiness)}};Kt.prototype.is=function(n){return n==="livePosition"||n==="model:livePosition"||n=="position"||n==="model:position"};function Cue(){this.listenTo(this.root.document.model,"applyOperation",(n,e)=>{let t=e[0];t.isDocumentOperation&&Eue.call(this,t)},{priority:"low"})}function Eue(n){let e=this.getTransformedByOperation(n);if(!this.isEqual(e)){let t=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",t)}}var Qa=class{operations;isUndoable;isLocal;isUndo;isTyping;constructor(e={}){typeof e=="string"&&(e=e==="transparent"?{isUndoable:!1}:{},Ve("batch-constructor-deprecated-string-type"));let{isUndoable:t=!0,isLocal:i=!0,isUndo:o=!1,isTyping:r=!1}=e;this.operations=[],this.isUndoable=t,this.isLocal=i,this.isUndo=o,this.isTyping=r}get type(){return Ve("batch-type-deprecated"),"default"}get baseVersion(){for(let e of this.operations)if(e.baseVersion!==null)return e.baseVersion;return null}addOperation(e){return e.batch=this,this.operations.push(e),e}},E2=class n{static _statesPriority=[void 0,"refresh","rename","move"];_markerCollection;_changesInElement=new Map;_elementsSnapshots=new Map;_elementChildrenSnapshots=new Map;_elementState=new Map;_changedMarkers=new Map;_changedRoots=new Map;_changeCount=0;_cachedChanges=null;_cachedChangesWithGraveyard=null;_refreshedItems=new Set;constructor(e){this._markerCollection=e}get isEmpty(){return this._changesInElement.size==0&&this._changedMarkers.size==0&&this._changedRoots.size==0}bufferOperation(e){let t=e;switch(t.type){case"insert":{if(this._isInInsertedElement(t.position.parent))return;this._markInsert(t.position.parent,t.position.offset,t.nodes.maxOffset);break}case"addAttribute":case"removeAttribute":case"changeAttribute":{for(let i of t.range.getItems({shallow:!0}))this._isInInsertedElement(i.parent)||this._markAttribute(i);break}case"remove":case"move":case"reinsert":{if(t.sourcePosition.isEqual(t.targetPosition)||t.sourcePosition.getShiftedBy(t.howMany).isEqual(t.targetPosition))return;let i=this._isInInsertedElement(t.sourcePosition.parent),o=this._isInInsertedElement(t.targetPosition.parent);i||this._markRemove(t.sourcePosition.parent,t.sourcePosition.offset,t.howMany),o||this._markInsert(t.targetPosition.parent,t.getMovedRangeStart().offset,t.howMany);let r=A._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let s of r.getItems({shallow:!0}))this._setElementState(s,"move");break}case"rename":{if(this._isInInsertedElement(t.position.parent))return;this._markRemove(t.position.parent,t.position.offset,1),this._markInsert(t.position.parent,t.position.offset,1);let i=A._createFromPositionAndShift(t.position,1);for(let o of this._markerCollection.getMarkersIntersectingRange(i)){let r=o.getData();this.bufferMarkerChange(o.name,r,r)}this._setElementState(t.position.nodeAfter,"rename");break}case"split":{let i=t.splitPosition.parent;if(!this._isInInsertedElement(i)){this._markRemove(i,t.splitPosition.offset,t.howMany);let o=A._createFromPositionAndShift(t.splitPosition,t.howMany);for(let r of o.getItems({shallow:!0}))this._setElementState(r,"move")}this._isInInsertedElement(t.insertionPosition.parent)||this._markInsert(t.insertionPosition.parent,t.insertionPosition.offset,1),t.graveyardPosition&&(this._markRemove(t.graveyardPosition.parent,t.graveyardPosition.offset,1),this._setElementState(t.graveyardPosition.nodeAfter,"move"));break}case"merge":{let i=t.sourcePosition.parent;this._isInInsertedElement(i.parent)||this._markRemove(i.parent,i.startOffset,1);let o=t.graveyardPosition.parent;this._markInsert(o,t.graveyardPosition.offset,1),this._setElementState(i,"move");let r=t.targetPosition.parent;if(!this._isInInsertedElement(r)){this._markInsert(r,t.targetPosition.offset,i.maxOffset);let s=A._createFromPositionAndShift(t.sourcePosition,t.howMany);for(let a of s.getItems({shallow:!0}))this._setElementState(a,"move")}break}case"detachRoot":case"addRoot":{let i=t.affectedSelectable;if(!i._isLoaded||i.isAttached()==t.isAdd)return;this._bufferRootStateChange(t.rootName,t.isAdd);break}case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":{if(!t.root._isLoaded)return;let i=t.root.rootName;this._bufferRootAttributeChange(i,t.key,t.oldValue,t.newValue);break}}this._cachedChanges=null}bufferMarkerChange(e,t,i){t.range&&t.range.root.is("rootElement")&&!t.range.root._isLoaded&&(t.range=null),i.range&&i.range.root.is("rootElement")&&!i.range.root._isLoaded&&(i.range=null);let o=this._changedMarkers.get(e);o?o.newMarkerData=i:(o={newMarkerData:i,oldMarkerData:t},this._changedMarkers.set(e,o)),o.oldMarkerData.range==null&&i.range==null&&this._changedMarkers.delete(e)}getMarkersToRemove(){let e=[];for(let[t,i]of this._changedMarkers)i.oldMarkerData.range!=null&&e.push({name:t,range:i.oldMarkerData.range});return e}getMarkersToAdd(){let e=[];for(let[t,i]of this._changedMarkers)i.newMarkerData.range!=null&&e.push({name:t,range:i.newMarkerData.range});return e}getChangedMarkers(){return Array.from(this._changedMarkers).map(([e,t])=>({name:e,data:{oldRange:t.oldMarkerData.range,newRange:t.newMarkerData.range}}))}hasDataChanges(){if(this.getChanges().length||this._changedRoots.size>0)return!0;for(let{newMarkerData:e,oldMarkerData:t}of this._changedMarkers.values()){if(e.affectsData!==t.affectsData)return!0;if(e.affectsData){let i=e.range&&!t.range,o=!e.range&&t.range,r=e.range&&t.range&&!e.range.isEqual(t.range);if(i||o||r)return!0}}return!1}getChanges(e={}){if(this._cachedChanges)return e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();let t=[];for(let i of this._changesInElement.keys()){let o=this._changesInElement.get(i).sort((d,f)=>d.offset===f.offset?d.type!=f.type?d.type=="remove"?-1:1:0:d.offset<f.offset?-1:1),r=this._elementChildrenSnapshots.get(i),s=t8(i.getChildren()),a=Sue(r.length,o),l=0,c=0;for(let d of a)if(d==="i"){let f=this._getDiffActionForNode(s[l].node,"insert"),p=this._elementsSnapshots.get(s[l].node),g=this._getInsertDiff(i,l,f,s[l],p);t.push(g),l++}else if(d==="r"){let f=this._getDiffActionForNode(r[c].node,"remove"),p=this._getRemoveDiff(i,l,f,r[c]);t.push(p),c++}else if(d==="a"){let f=r[c].attributes,p=s[l].attributes,g;if(s[l].name=="$text")g=new A(N._createAt(i,l),N._createAt(i,l+1));else{let k=i.offsetToIndex(l);g=new A(N._createAt(i,l),N._createAt(i.getChild(k),0))}let w=this._getAttributesDiff(g,f,p);t.push(...w),l++,c++}else l++,c++}t.sort((i,o)=>i.position.root!=o.position.root?i.position.root.rootName<o.position.root.rootName?-1:1:i.position.isEqual(o.position)?i.changeCount-o.changeCount:i.position.isBefore(o.position)?-1:1);for(let i=1,o=0;i<t.length;i++){let r=t[o],s=t[i],a=r.type=="remove"&&s.type=="remove"&&r.name=="$text"&&s.name=="$text"&&r.position.isEqual(s.position),l=r.type=="insert"&&s.type=="insert"&&r.name=="$text"&&s.name=="$text"&&r.position.parent==s.position.parent&&r.position.offset+r.length==s.position.offset,c=r.type=="attribute"&&s.type=="attribute"&&r.position.parent==s.position.parent&&r.range.isFlat&&s.range.isFlat&&r.position.offset+r.length==s.position.offset&&r.attributeKey==s.attributeKey&&r.attributeOldValue==s.attributeOldValue&&r.attributeNewValue==s.attributeNewValue;a||l||c?(r.length++,c&&(r.range.end=r.range.end.getShiftedBy(1)),t[i]=null):o=i}t=t.filter(i=>i);for(let i of t)delete i.changeCount,i.type=="attribute"&&(delete i.position,delete i.length);return this._changeCount=0,this._cachedChangesWithGraveyard=t,this._cachedChanges=t.filter(xue),e.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}getChangedRoots(){return Array.from(this._changedRoots.values()).map(e=>{let t=v({},e);return t.state!==void 0&&delete t.attributes,t})}getRefreshedItems(){return new Set(this._refreshedItems)}reset(){this._changesInElement.clear(),this._elementChildrenSnapshots.clear(),this._elementsSnapshots.clear(),this._elementState.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems.clear(),this._cachedChanges=null}_refreshItem(e){if(this._isInInsertedElement(e.parent))return;this._markRemove(e.parent,e.startOffset,e.offsetSize),this._markInsert(e.parent,e.startOffset,e.offsetSize),this._refreshedItems.add(e),this._setElementState(e,"refresh");let t=A._createOn(e);for(let i of this._markerCollection.getMarkersIntersectingRange(t)){let o=i.getData();this.bufferMarkerChange(i.name,o,o)}this._cachedChanges=null}_bufferRootLoad(e){if(e.isAttached()){this._bufferRootStateChange(e.rootName,!0),this._markInsert(e,0,e.maxOffset);for(let t of e.getAttributeKeys())this._bufferRootAttributeChange(e.rootName,t,null,e.getAttribute(t));for(let t of this._markerCollection)if(t.getRange().root==e){let i=t.getData();this.bufferMarkerChange(t.name,I(v({},i),{range:null}),i)}}}_bufferRootStateChange(e,t){if(!this._changedRoots.has(e)){this._changedRoots.set(e,{name:e,state:t?"attached":"detached"});return}let i=this._changedRoots.get(e);i.state!==void 0?(delete i.state,i.attributes===void 0&&this._changedRoots.delete(e)):i.state=t?"attached":"detached"}_bufferRootAttributeChange(e,t,i,o){let r=this._changedRoots.get(e)||{name:e},s=r.attributes||{};if(s[t]){let a=s[t];o===a.oldValue?delete s[t]:a.newValue=o}else s[t]={oldValue:i,newValue:o};Object.entries(s).length===0?(delete r.attributes,r.state===void 0&&this._changedRoots.delete(e)):(r.attributes=s,this._changedRoots.set(e,r))}_markInsert(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let o={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o)}_markRemove(e,t,i){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let o={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,o),this._removeAllNestedChanges(e,t,i)}_markAttribute(e){if(e.root.is("rootElement")&&!e.root._isLoaded)return;let t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t)}_markChange(e,t){this._makeSnapshots(e);let i=this._getChangesForElement(e);this._handleChange(t,i),i.push(t);for(let o=0;o<i.length;o++)i[o].howMany<1&&(i.splice(o,1),o--)}_setElementState(e,t){if(!e.is("element"))return;let i=n._statesPriority.indexOf(this._elementState.get(e));n._statesPriority.indexOf(t)>i&&this._elementState.set(e,t)}_getDiffActionForNode(e,t){if(!e.is("element")||!this._elementsSnapshots.has(e))return t;let i=this._elementState.get(e);return!i||i=="move"?t:i}_getChangesForElement(e){let t;return this._changesInElement.has(e)?t=this._changesInElement.get(e):(t=[],this._changesInElement.set(e,t)),t}_makeSnapshots(e){if(this._elementChildrenSnapshots.has(e))return;let t=t8(e.getChildren());this._elementChildrenSnapshots.set(e,t);for(let i of t)this._elementsSnapshots.set(i.node,i)}_handleChange(e,t){e.nodesToHandle=e.howMany;for(let i of t){let o=e.offset+e.howMany,r=i.offset+i.howMany;if(e.type=="insert"&&(i.type=="insert"&&(e.offset<=i.offset?i.offset+=e.howMany:e.offset<r&&(i.howMany+=e.nodesToHandle,e.nodesToHandle=0)),i.type=="remove"&&e.offset<i.offset&&(i.offset+=e.howMany),i.type=="attribute")){if(e.offset<=i.offset)i.offset+=e.howMany;else if(e.offset<r){let s=i.howMany;i.howMany=e.offset-i.offset,t.unshift({type:"attribute",offset:o,howMany:s-i.howMany,count:this._changeCount++})}}if(e.type=="remove"){if(i.type=="insert"){if(o<=i.offset)i.offset-=e.howMany;else if(o<=r)if(e.offset<i.offset){let s=o-i.offset;i.offset=e.offset,i.howMany-=s,e.nodesToHandle-=s}else i.howMany-=e.nodesToHandle,e.nodesToHandle=0;else if(e.offset<=i.offset)e.nodesToHandle-=i.howMany,i.howMany=0;else if(e.offset<r){let s=r-e.offset;i.howMany-=s,e.nodesToHandle-=s}}if(i.type=="remove"&&(o<=i.offset?i.offset-=e.howMany:e.offset<i.offset&&(e.nodesToHandle+=i.howMany,i.howMany=0)),i.type=="attribute"){if(o<=i.offset)i.offset-=e.howMany;else if(e.offset<i.offset){let s=o-i.offset;i.offset=e.offset,i.howMany-=s}else if(e.offset<r)if(o<=r){let s=i.howMany;i.howMany=e.offset-i.offset;let a=s-i.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:a,count:this._changeCount++})}else i.howMany-=r-e.offset}}if(e.type=="attribute"){if(i.type=="insert")if(e.offset<i.offset&&o>i.offset){if(o>r){let s={type:"attribute",offset:r,howMany:o-r,count:this._changeCount++};this._handleChange(s,t),t.push(s)}e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}else e.offset>=i.offset&&e.offset<r&&(o>r?(e.nodesToHandle=o-r,e.offset=r):e.nodesToHandle=0);if(i.type=="remove"&&e.offset<i.offset&&o>i.offset){let s={type:"attribute",offset:i.offset,howMany:o-i.offset,count:this._changeCount++};this._handleChange(s,t),t.push(s),e.nodesToHandle=i.offset-e.offset,e.howMany=e.nodesToHandle}i.type=="attribute"&&(e.offset>=i.offset&&o<=r?(e.nodesToHandle=0,e.howMany=0,e.offset=0):e.offset<=i.offset&&o>=r&&(i.howMany=0))}}e.howMany=e.nodesToHandle,delete e.nodesToHandle}_getInsertDiff(e,t,i,o,r){let s={type:"insert",position:N._createAt(e,t),name:o.name,attributes:new Map(o.attributes),length:1,changeCount:this._changeCount++,action:i};return i!="insert"&&r&&(s.before={name:r.name,attributes:new Map(r.attributes)}),s}_getRemoveDiff(e,t,i,o){return{type:"remove",action:i,position:N._createAt(e,t),name:o.name,attributes:new Map(o.attributes),length:1,changeCount:this._changeCount++}}_getAttributesDiff(e,t,i){let o=[];i=new Map(i);for(let[r,s]of t){let a=i.has(r)?i.get(r):null;a!==s&&o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:s,attributeNewValue:a,changeCount:this._changeCount++}),i.delete(r)}for(let[r,s]of i)o.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:r,attributeOldValue:null,attributeNewValue:s,changeCount:this._changeCount++});return o}_isInInsertedElement(e){let t=e.parent;if(!t)return!1;let i=this._changesInElement.get(t),o=e.startOffset;if(i){for(let r of i)if(r.type=="insert"&&o>=r.offset&&o<r.offset+r.howMany)return!0}return this._isInInsertedElement(t)}_removeAllNestedChanges(e,t,i){let o=new A(N._createAt(e,t),N._createAt(e,t+i));for(let r of o.getItems({shallow:!0}))r.is("element")&&(this._changesInElement.delete(r),this._removeAllNestedChanges(r,0,r.maxOffset))}};function e8(n){return{node:n,name:n.is("$text")?"$text":n.name,attributes:new Map(n.getAttributes())}}function t8(n){let e=[];for(let t of n)if(t.is("$text"))for(let i=0;i<t.data.length;++i)e.push(e8(t));else e.push(e8(t));return e}function Sue(n,e){let t=[],i=0,o=0;for(let r of e){if(r.offset>i){for(let s=0;s<r.offset-i;s++)t.push("e");o+=r.offset-i}if(r.type=="insert"){for(let s=0;s<r.howMany;s++)t.push("i");i=r.offset+r.howMany}else if(r.type=="remove"){for(let s=0;s<r.howMany;s++)t.push("r");i=r.offset,o+=r.howMany}else{if(r.howMany>1500)for(let s=0;s<r.howMany;s++)t.push("a");else t.push(..."a".repeat(r.howMany).split(""));i=r.offset+r.howMany,o+=r.howMany}}if(o<n)for(let r=0;r<n-o-i;r++)t.push("e");return t}function xue(n){let e="position"in n&&n.position.root.rootName=="$graveyard",t="range"in n&&n.range.root.rootName=="$graveyard";return!e&&!t}var S2=class{_operations=[];_undoPairs=new Map;_undoneOperations=new Set;_baseVersionToOperationIndex=new Map;_version=0;_gaps=new Map;get version(){return this._version}set version(e){this._operations.length&&e>this._version+1&&this._gaps.set(this._version,e),this._version=e}get lastOperation(){return this._operations[this._operations.length-1]}addOperation(e){if(e.baseVersion!==this.version)throw new _("model-document-history-addoperation-incorrect-version",this,{operation:e,historyVersion:this.version});this._operations.push(e),this._version++,this._baseVersionToOperationIndex.set(e.baseVersion,this._operations.length-1)}getOperations(e,t=this.version){if(!this._operations.length)return[];let i=this._operations[0];e===void 0&&(e=i.baseVersion);let o=t-1;for(let[a,l]of this._gaps)e>a&&e<l&&(e=l),o>a&&o<l&&(o=a-1);if(o<i.baseVersion||e>this.lastOperation.baseVersion)return[];let r=this._baseVersionToOperationIndex.get(e);r===void 0&&(r=0);let s=this._baseVersionToOperationIndex.get(o);return s===void 0&&(s=this._operations.length-1),this._operations.slice(r,s+1)}getOperation(e){let t=this._baseVersionToOperationIndex.get(e);if(t!==void 0)return this._operations[t]}setOperationAsUndone(e,t){this._undoPairs.set(t,e),this._undoneOperations.add(e)}isUndoingOperation(e){return this._undoPairs.has(e)}isUndoneOperation(e){return this._undoneOperations.has(e)}getUndoneOperation(e){return this._undoPairs.get(e)}reset(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}},nd=class extends dt{rootName;_document;_isAttached=!0;_isLoaded=!0;constructor(e,t,i="main"){super(t),this._document=e,this.rootName=i}get document(){return this._document}isAttached(){return this._isAttached}toJSON(){return this.rootName}};nd.prototype.is=function(n,e){return e?e===this.name&&(n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"):n==="rootElement"||n==="model:rootElement"||n==="element"||n==="model:element"||n==="node"||n==="model:node"};var n8="$graveyard",x2=class extends tt(){model;history;selection;roots;differ;isReadOnly;_postFixers;_hasSelectionChangedFromTheLastChangeBlock;constructor(e){super(),this.model=e,this.history=new S2,this.selection=new ni(this),this.roots=new ft({idProperty:"rootName"}),this.differ=new E2(e.markers),this.isReadOnly=!1,this._postFixers=new Set,this._hasSelectionChangedFromTheLastChangeBlock=!1,this.createRoot("$root",n8),this.listenTo(e,"applyOperation",(t,i)=>{let o=i[0];o.isDocumentOperation&&this.differ.bufferOperation(o)},{priority:"high"}),this.listenTo(e,"applyOperation",(t,i)=>{let o=i[0];o.isDocumentOperation&&this.history.addOperation(o)},{priority:"low"}),this.listenTo(this.selection,"change",()=>{this._hasSelectionChangedFromTheLastChangeBlock=!0}),this.listenTo(e.markers,"update",(t,i,o,r,s)=>{let a=I(v({},i.getData()),{range:r});this.differ.bufferMarkerChange(i.name,s,a),o===null&&i.on("change",(l,c)=>{let d=i.getData();this.differ.bufferMarkerChange(i.name,I(v({},d),{range:c}),d)})}),this.registerPostFixer(t=>{let i=!1;for(let o of this.roots)!o.isAttached()&&!o.isEmpty&&(t.remove(t.createRangeIn(o)),i=!0);for(let o of this.model.markers)o.getRange().root.isAttached()||(t.removeMarker(o),i=!0);return i})}get version(){return this.history.version}set version(e){this.history.version=e}get graveyard(){return this.getRoot(n8)}createRoot(e="$root",t="main"){if(this.roots.get(t))throw new _("model-document-createroot-name-exists",this,{name:t});let i=new nd(this,e,t);return this.roots.add(i),i}destroy(){this.selection.destroy(),this.stopListening()}getRoot(e="main"){return this.roots.get(e)}getRootNames(e=!1){return this.getRoots(e).map(t=>t.rootName)}getRoots(e=!1){return this.roots.filter(t=>t!=this.graveyard&&(e||t.isAttached())&&t._isLoaded)}registerPostFixer(e){this._postFixers.add(e)}toJSON(){let e=ny(this);return e.selection="[engine.model.DocumentSelection]",e.model="[engine.model.Model]",e}_handleChangeBlock(e){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(e),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",e.batch):this.fire("change",e.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}_hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}_getDefaultRoot(){let e=this.getRoots();return e.length?e[0]:this.graveyard}_getDefaultRange(){let e=this._getDefaultRoot(),t=this.model,i=t.schema,o=t.createPositionFromPath(e,[0]);return i.getNearestSelectionRange(o)||t.createRange(o)}_validateSelectionRange(e){return e.start.isValid()&&e.end.isValid()&&i8(e.start)&&i8(e.end)}_callPostFixers(e){let t=!1;do for(let i of this._postFixers)if(this.selection.refresh(),t=i(e),t)break;while(t)}};function i8(n){let e=n.textNode;if(e){let t=e.data,i=n.offset-e.startOffset;return!_g(t,i)&&!Cg(t,i)}return!0}var A2=class extends tt(){_markers=new Map;[Symbol.iterator](){return this._markers.values()}has(e){let t=e instanceof Ya?e.name:e;return this._markers.has(t)}get(e){return this._markers.get(e)||null}_set(e,t,i=!1,o=!1){let r=e instanceof Ya?e.name:e;if(r.includes(","))throw new _("markercollection-incorrect-marker-name",this);let s=this._markers.get(r);if(s){let c=s.getData(),d=s.getRange(),f=!1;return d.isEqual(t)||(s._attachLiveRange(pn.fromRange(t)),f=!0),i!=s.managedUsingOperations&&(s._managedUsingOperations=i,f=!0),typeof o=="boolean"&&o!=s.affectsData&&(s._affectsData=o,f=!0),f&&this.fire(`update:${r}`,s,d,t,c),s}let a=pn.fromRange(t),l=new Ya(r,a,i,o);return this._markers.set(r,l),this.fire(`update:${r}`,l,null,t,I(v({},l.getData()),{range:null})),l}_remove(e){let t=e instanceof Ya?e.name:e,i=this._markers.get(t);return i?(this._markers.delete(t),this.fire(`update:${t}`,i,i.getRange(),null,i.getData()),this._destroyMarker(i),!0):!1}_refresh(e){let t=e instanceof Ya?e.name:e,i=this._markers.get(t);if(!i)throw new _("markercollection-refresh-marker-not-exists",this);let o=i.getRange();this.fire(`update:${t}`,i,o,o,i.getData())}*getMarkersAtPosition(e){for(let t of this)t.getRange().containsPosition(e)&&(yield t)}*getMarkersIntersectingRange(e){for(let t of this)t.getRange().getIntersection(e)!==null&&(yield t)}destroy(){for(let e of this._markers.values())this._destroyMarker(e);this._markers=null,this.stopListening()}*getMarkersGroup(e){for(let t of this._markers.values())t.name.startsWith(e+":")&&(yield t)}_destroyMarker(e){e.stopListening(),e._detachLiveRange()}},Ya=class extends tt(xr){name;_managedUsingOperations;_affectsData;_liveRange;constructor(e,t,i,o){super(),this.name=e,this._liveRange=this._attachLiveRange(t),this._managedUsingOperations=i,this._affectsData=o}get managedUsingOperations(){if(!this._liveRange)throw new _("marker-destroyed",this);return this._managedUsingOperations}get affectsData(){if(!this._liveRange)throw new _("marker-destroyed",this);return this._affectsData}getData(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}getStart(){if(!this._liveRange)throw new _("marker-destroyed",this);return this._liveRange.start.clone()}getEnd(){if(!this._liveRange)throw new _("marker-destroyed",this);return this._liveRange.end.clone()}getRange(){if(!this._liveRange)throw new _("marker-destroyed",this);return this._liveRange.toRange()}_attachLiveRange(e){return this._liveRange&&this._detachLiveRange(),e.delegate("change:range").to(this),e.delegate("change:content").to(this),this._liveRange=e,e}_detachLiveRange(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}};Ya.prototype.is=function(n){return n==="marker"||n==="model:marker"};var T2=class extends ii{sourcePosition;howMany;constructor(e,t){super(null),this.sourcePosition=e.clone(),this.howMany=t}get type(){return"detach"}get affectedSelectable(){return null}toJSON(){let e=super.toJSON();return e.sourcePosition=this.sourcePosition.toJSON(),e}_validate(){if(this.sourcePosition.root.document)throw new _("detach-operation-on-document-node",this)}_execute(){j8(A._createFromPositionAndShift(this.sourcePosition,this.howMany))}static get className(){return"DetachOperation"}},Bo=class n extends xr{markers=new Map;_children=new Yc;constructor(e){super(),e&&this._insertChild(0,e)}[Symbol.iterator](){return this.getChildren()}get childCount(){return this._children.length}get maxOffset(){return this._children.maxOffset}get isEmpty(){return this.childCount===0}get nextSibling(){return null}get previousSibling(){return null}get root(){return this}get parent(){return null}get document(){return null}isAttached(){return!1}getAncestors(){return[]}getChild(e){return this._children.getNode(e)}getChildAtOffset(e){return this._children.getNodeAtOffset(e)}getChildren(){return this._children[Symbol.iterator]()}getChildIndex(e){return this._children.getNodeIndex(e)}getChildStartOffset(e){return this._children.getNodeStartOffset(e)}getPath(){return[]}getNodeByPath(e){let t=this;for(let i of e)t=t.getChildAtOffset(i);return t}offsetToIndex(e){return this._children.offsetToIndex(e)}toJSON(){let e=[];for(let t of this._children)e.push(t.toJSON());return e}static fromJSON(e){let t=[];for(let i of e)i.name?t.push(dt.fromJSON(i)):t.push(pt.fromJSON(i));return new n(t)}_appendChild(e){this._insertChild(this.childCount,e)}_insertChild(e,t){let i=Aue(t);for(let o of i)o.parent!==null&&o._remove(),o.parent=this;this._children._insertNodes(e,i)}_removeChildren(e,t=1){let i=this._children._removeNodes(e,t);for(let o of i)o.parent=null;return i}};Bo.prototype.is=function(n){return n==="documentFragment"||n==="model:documentFragment"};function Aue(n){return typeof n=="string"?[new pt(n)]:(ei(n)||(n=[n]),Array.from(n).map(e=>typeof e=="string"?new pt(e):e instanceof zi?new pt(e.data,e.getAttributes()):e))}var I2=class{model;batch;constructor(e,t){this.model=e,this.batch=t}createText(e,t){return new pt(e,t)}createElement(e,t){return new dt(e,t)}createDocumentFragment(){return new Bo}cloneElement(e,t=!0){return e._clone(t)}insert(e,t,i=0){if(this._assertWriterUsedCorrectly(),e instanceof pt&&e.data=="")return;let o=N._createAt(t,i);if(e.parent)if(s8(e.root,o.root)){this.move(A._createOn(e),o);return}else{if(e.root.document)throw new _("model-writer-insert-forbidden-move",this);this.remove(e)}let r=o.root.document?o.root.document.version:null,s=new En(o,e,r);if(e instanceof pt&&(s.shouldReceiveAttributes=!0),this.batch.addOperation(s),this.model.applyOperation(s),e instanceof Bo)for(let[a,l]of e.markers){let c=N._createAt(l.root,0),f={range:new A(l.start._getCombined(c,o),l.end._getCombined(c,o)),usingOperation:!0,affectsData:!0};this.model.markers.has(a)?this.updateMarker(a,f):this.addMarker(a,f)}}insertText(e,t,i,o){t instanceof Bo||t instanceof dt||t instanceof N?this.insert(this.createText(e),t,i):this.insert(this.createText(e,t),i,o)}insertElement(e,t,i,o){t instanceof Bo||t instanceof dt||t instanceof N?this.insert(this.createElement(e),t,i):this.insert(this.createElement(e,t),i,o)}append(e,t){this.insert(e,t,"end")}appendText(e,t,i){t instanceof Bo||t instanceof dt?this.insert(this.createText(e),t,"end"):this.insert(this.createText(e,t),i,"end")}appendElement(e,t,i){t instanceof Bo||t instanceof dt?this.insert(this.createElement(e),t,"end"):this.insert(this.createElement(e,t),i,"end")}setAttribute(e,t,i){if(this._assertWriterUsedCorrectly(),i instanceof A){let o=i.getMinimalFlatRanges();for(let r of o)o8(this,e,t,r)}else r8(this,e,t,i)}setAttributes(e,t){for(let[i,o]of _i(e))this.setAttribute(i,o,t)}removeAttribute(e,t){if(this._assertWriterUsedCorrectly(),t instanceof A){let i=t.getMinimalFlatRanges();for(let o of i)o8(this,e,null,o)}else r8(this,e,null,t)}clearAttributes(e){this._assertWriterUsedCorrectly();let t=i=>{for(let o of i.getAttributeKeys())this.removeAttribute(o,i)};if(!(e instanceof A))t(e);else for(let i of e.getItems())t(i)}move(e,t,i){if(this._assertWriterUsedCorrectly(),!(e instanceof A))throw new _("writer-move-invalid-range",this);if(!e.isFlat)throw new _("writer-move-range-not-flat",this);let o=N._createAt(t,i);if(o.isEqual(e.start))return;if(this._addOperationForAffectedMarkers("move",e),!s8(e.root,o.root))throw new _("writer-move-different-document",this);let r=e.root.document?e.root.document.version:null,s=new nt(e.start,e.end.offset-e.start.offset,o,r);this.batch.addOperation(s),this.model.applyOperation(s)}remove(e){this._assertWriterUsedCorrectly();let i=(e instanceof A?e:A._createOn(e)).getMinimalFlatRanges().reverse();for(let o of i)this._addOperationForAffectedMarkers("move",o),Tue(o.start,o.end.offset-o.start.offset,this.batch,this.model)}merge(e){this._assertWriterUsedCorrectly();let t=e.nodeBefore,i=e.nodeAfter;if(this._addOperationForAffectedMarkers("merge",e),!(t instanceof dt))throw new _("writer-merge-no-element-before",this);if(!(i instanceof dt))throw new _("writer-merge-no-element-after",this);e.root.document?this._merge(e):this._mergeDetached(e)}createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i)}createPositionAt(e,t){return this.model.createPositionAt(e,t)}createPositionAfter(e){return this.model.createPositionAfter(e)}createPositionBefore(e){return this.model.createPositionBefore(e)}createRange(e,t){return this.model.createRange(e,t)}createRangeIn(e){return this.model.createRangeIn(e)}createRangeOn(e){return this.model.createRangeOn(e)}createSelection(...e){return this.model.createSelection(...e)}_mergeDetached(e){let t=e.nodeBefore,i=e.nodeAfter;this.move(A._createIn(i),N._createAt(t,"end")),this.remove(i)}_merge(e){let t=N._createAt(e.nodeBefore,"end"),i=N._createAt(e.nodeAfter,0),o=e.root.document.graveyard,r=new N(o,[0]),s=e.root.document.version,a=new jt(i,e.nodeAfter.maxOffset,t,r,s);this.batch.addOperation(a),this.model.applyOperation(a)}rename(e,t){if(this._assertWriterUsedCorrectly(),!(e instanceof dt))throw new _("writer-rename-not-element-instance",this);let i=e.root.document?e.root.document.version:null,o=new ho(N._createBefore(e),e.name,t,i);this.batch.addOperation(o),this.model.applyOperation(o)}split(e,t){this._assertWriterUsedCorrectly();let i=e.parent;if(!i.parent)throw new _("writer-split-element-no-parent",this);if(t||(t=i.parent),!e.parent.getAncestors({includeSelf:!0}).includes(t))throw new _("writer-split-invalid-limit-element",this);let o,r;do{let s=i.root.document?i.root.document.version:null,a=i.maxOffset-e.offset,l=ut.getInsertionPosition(e),c=new ut(e,a,l,null,s);this.batch.addOperation(c),this.model.applyOperation(c),!o&&!r&&(o=i,r=e.parent.nextSibling),e=this.createPositionAfter(e.parent),i=e.parent}while(i!==t);return{position:e,range:new A(N._createAt(o,"end"),N._createAt(r,0))}}wrap(e,t){if(this._assertWriterUsedCorrectly(),!e.isFlat)throw new _("writer-wrap-range-not-flat",this);let i=t instanceof dt?t:new dt(t);if(i.childCount>0)throw new _("writer-wrap-element-not-empty",this);if(i.parent!==null)throw new _("writer-wrap-element-attached",this);this.insert(i,e.start);let o=new A(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(o,N._createAt(i,0))}unwrap(e){if(this._assertWriterUsedCorrectly(),e.parent===null)throw new _("writer-unwrap-element-no-parent",this);this.move(A._createIn(e),this.createPositionAfter(e)),this.remove(e)}addMarker(e,t){if(this._assertWriterUsedCorrectly(),!t||typeof t.usingOperation!="boolean")throw new _("writer-addmarker-no-usingoperation",this);let i=t.usingOperation,o=t.range,r=t.affectsData===void 0?!1:t.affectsData;if(this.model.markers.has(e))throw new _("writer-addmarker-marker-exists",this);if(!o)throw new _("writer-addmarker-no-range",this);return i?(Ag(this,e,null,o,r),this.model.markers.get(e)):this.model.markers._set(e,o,i,r)}updateMarker(e,t){this._assertWriterUsedCorrectly();let i=typeof e=="string"?e:e.name,o=this.model.markers.get(i);if(!o)throw new _("writer-updatemarker-marker-not-exists",this);if(!t){Ve("writer-updatemarker-reconvert-using-editingcontroller",{markerName:i}),this.model.markers._refresh(o);return}let r=typeof t.usingOperation=="boolean",s=typeof t.affectsData=="boolean",a=s?t.affectsData:o.affectsData;if(!r&&!t.range&&!s)throw new _("writer-updatemarker-wrong-options",this);let l=o.getRange(),c=t.range?t.range:l;if(r&&t.usingOperation!==o.managedUsingOperations){t.usingOperation?Ag(this,i,null,c,a):(Ag(this,i,l,null,a),this.model.markers._set(i,c,void 0,a));return}o.managedUsingOperations?Ag(this,i,l,c,a):this.model.markers._set(i,c,void 0,a)}removeMarker(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t))throw new _("writer-removemarker-no-marker",this);let i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return}let o=i.getRange();Ag(this,t,o,null,i.affectsData)}addRoot(e,t="$root"){this._assertWriterUsedCorrectly();let i=this.model.document.getRoot(e);if(i&&i.isAttached())throw new _("writer-addroot-root-exists",this);let o=this.model.document,r=new Ja(e,t,!0,o,o.version);return this.batch.addOperation(r),this.model.applyOperation(r),this.model.document.getRoot(e)}detachRoot(e){this._assertWriterUsedCorrectly();let t=typeof e=="string"?this.model.document.getRoot(e):e;if(!t||!t.isAttached())throw new _("writer-detachroot-no-root",this);for(let r of this.model.markers)r.getRange().root===t&&this.removeMarker(r);for(let r of t.getAttributeKeys())this.removeAttribute(r,t);this.remove(this.createRangeIn(t));let i=this.model.document,o=new Ja(t.rootName,t.name,!1,i,i.version);this.batch.addOperation(o),this.model.applyOperation(o)}setSelection(...e){this._assertWriterUsedCorrectly(),this.model.document.selection._setTo(...e)}setSelectionFocus(e,t){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(e,t)}setSelectionAttribute(e,t){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._setSelectionAttribute(e,t);else for(let[i,o]of _i(e))this._setSelectionAttribute(i,o)}removeSelectionAttribute(e){if(this._assertWriterUsedCorrectly(),typeof e=="string")this._removeSelectionAttribute(e);else for(let t of e)this._removeSelectionAttribute(t)}overrideSelectionGravity(){return this.model.document.selection._overrideGravity()}restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e)}_setSelectionAttribute(e,t){let i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){let o=ni._getStoreAttributeKey(e);this.setAttribute(o,t,i.anchor.parent)}i._setAttribute(e,t)}_removeSelectionAttribute(e){let t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){let i=ni._getStoreAttributeKey(e);this.removeAttribute(i,t.anchor.parent)}t._removeAttribute(e)}_assertWriterUsedCorrectly(){if(this.model._currentWriter!==this)throw new _("writer-incorrect-use",this)}_addOperationForAffectedMarkers(e,t){for(let i of this.model.markers){if(!i.managedUsingOperations)continue;let o=i.getRange(),r=!1;if(e==="move"){let s=t;r=s.containsPosition(o.start)||s.start.isEqual(o.start)||s.containsPosition(o.end)||s.end.isEqual(o.end)}else{let s=t,a=s.nodeBefore,l=s.nodeAfter,c=o.start.parent==a&&o.start.isAtEnd,d=o.end.parent==l&&o.end.offset==0,f=o.end.nodeAfter==l,p=o.start.nodeAfter==l;r=c||d||f||p}r&&this.updateMarker(i.name,{range:o})}}};function o8(n,e,t,i){let o=n.model,r=o.document,s=i.start,a,l,c;for(let f of i.getWalker({shallow:!0}))c=f.item.getAttribute(e),a&&l!=c&&(l!=t&&d(),s=a),a=f.nextPosition,l=c;a instanceof N&&a!=s&&l!=t&&d();function d(){let f=new A(s,a),p=f.root.document?r.version:null,g=new ln(f,e,l,t,p);n.batch.addOperation(g),o.applyOperation(g)}}function r8(n,e,t,i){let o=n.model,r=o.document,s=i.getAttribute(e),a,l;if(s!=t){if(i.root===i){let d=i.document?r.version:null;l=new td(i,e,s,t,d)}else{a=new A(N._createBefore(i),n.createPositionAfter(i));let d=a.root.document?r.version:null;l=new ln(a,e,s,t,d)}n.batch.addOperation(l),o.applyOperation(l)}}function Ag(n,e,t,i,o){let r=n.model,s=r.document,a=new Ui(e,t,i,r.markers,!!o,s.version);n.batch.addOperation(a),r.applyOperation(a)}function Tue(n,e,t,i){let o;if(n.root.document){let r=i.document,s=new N(r.graveyard,[0]);o=new nt(n,e,s,r.version)}else o=new T2(n,e);t.addOperation(o),i.applyOperation(o)}function s8(n,e){return n===e||n instanceof nd&&e instanceof nd}function Iue(n,e,t={}){if(e.isCollapsed)return;let i=e.getFirstRange();if(i.root.rootName=="$graveyard")return;let o=n.schema;n.change(r=>{if(!t.doNotResetEntireContent&&Vue(o,e)){Fue(r,e);return}let s={};if(!t.doNotAutoparagraph){let c=e.getSelectedElement();c&&Object.assign(s,o.getAttributesWithProperty(c,"copyOnReplace",!0))}let[a,l]=Mue(i);a.isTouching(l)||r.remove(r.createRange(a,l)),t.leaveUnmerged||(Pue(r,a,l),o.removeDisallowedAttributes(a.parent.getChildren(),r)),Z8(r,e,a),!t.doNotAutoparagraph&&Oue(o,a)&&Y8(r,a,e,s),a.detach(),l.detach()})}function Mue(n){let e=n.root.document.model,t=n.start,i=n.end;if(e.hasContent(n,{ignoreMarkers:!0})){let o=Due(i);if(o&&i.isTouching(e.createPositionAt(o,0))){let r=e.createSelection(n);e.modifySelection(r,{direction:"backward"});let s=r.getLastPosition(),a=e.createRange(s,i);e.hasContent(a,{ignoreMarkers:!0})||(i=s)}}return[Kt.fromPosition(t,"toPrevious"),Kt.fromPosition(i,"toNext")]}function Due(n){let e=n.parent,t=e.root.document.model.schema,i=e.getAncestors({parentFirst:!0,includeSelf:!0});for(let o of i){if(t.isLimit(o))return null;if(t.isBlock(o))return o}}function Pue(n,e,t){let i=n.model;if(!H2(n.model.schema,e,t))return;let[o,r]=Nue(e,t);!o||!r||(!i.hasContent(o,{ignoreMarkers:!0})&&i.hasContent(r,{ignoreMarkers:!0})?Q8(n,e,t,o.parent):K8(n,e,t,o.parent))}function K8(n,e,t,i){let o=e.parent,r=t.parent;if(!(o==i||r==i)){for(e=n.createPositionAfter(o),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(r,e),n.merge(e);t.parent.isEmpty;){let s=t.parent;t=n.createPositionBefore(s),n.remove(s)}H2(n.model.schema,e,t)&&K8(n,e,t,i)}}function Q8(n,e,t,i){let o=e.parent,r=t.parent;if(!(o==i||r==i)){for(e=n.createPositionAfter(o),t=n.createPositionBefore(r),t.isEqual(e)||n.insert(o,t);e.parent.isEmpty;){let s=e.parent;e=n.createPositionBefore(s),n.remove(s)}t=n.createPositionBefore(r),Rue(n,t),H2(n.model.schema,e,t)&&Q8(n,e,t,i)}}function Rue(n,e){let t=e.nodeBefore,i=e.nodeAfter;t.name!=i.name&&n.rename(t,i.name),n.clearAttributes(t),n.setAttributes(Object.fromEntries(i.getAttributes()),t),n.merge(e)}function H2(n,e,t){let i=e.parent,o=t.parent;return i==o||n.isLimit(i)||n.isLimit(o)?!1:Lue(e,t,n)}function Nue(n,e){let t=n.getAncestors(),i=e.getAncestors(),o=0;for(;t[o]&&t[o]==i[o];)o++;return[t[o],i[o]]}function Oue(n,e){let t=n.checkChild(e,"$text"),i=n.checkChild(e,"paragraph");return!t&&i}function Lue(n,e,t){let i=new A(n,e);for(let o of i.getWalker())if(t.isLimit(o.item))return!1;return!0}function Y8(n,e,t,i={}){let o=n.createElement("paragraph");n.model.schema.setAllowedAttributes(o,i,n),n.insert(o,e),Z8(n,t,n.createPositionAt(o,0))}function Fue(n,e){let t=n.model.schema.getLimitElement(e);n.remove(n.createRangeIn(t)),Y8(n,n.createPositionAt(t,0),e)}function Vue(n,e){let t=n.getLimitElement(e);if(!e.containsEntireContent(t))return!1;let i=e.getFirstRange();return i.start.parent==i.end.parent?!1:n.checkChild(t,"paragraph")}function Z8(n,e,t){e instanceof ni?n.setSelection(t):e.setTo(t)}function Bue(n,e){return n.change(t=>{let i=t.createDocumentFragment(),o=e.getFirstRange();if(!o||o.isCollapsed)return i;let r=o.start.root,s=o.start.getCommonPath(o.end),a=r.getNodeByPath(s),l;o.start.parent==o.end.parent?l=o:l=t.createRange(t.createPositionAt(a,o.start.path[s.length]),t.createPositionAt(a,o.end.path[s.length]+1));let c=l.end.offset-l.start.offset;for(let d of l.getItems({shallow:!0}))d.is("$textProxy")?t.appendText(d.data,d.getAttributes(),i):t.append(t.cloneElement(d,!0),i);if(l!=o){let d=o._getTransformedByMove(l.start,t.createPositionAt(i,0),c)[0],f=t.createRange(t.createPositionAt(i,0),d.start),p=t.createRange(d.end,t.createPositionAt(i,"end"));a8(p,t),a8(f,t)}return i})}function a8(n,e){let t=[];Array.from(n.getItems({direction:"backward"})).map(i=>e.createRangeOn(i)).filter(i=>(i.start.isAfter(n.start)||i.start.isEqual(n.start))&&(i.end.isBefore(n.end)||i.end.isEqual(n.end))).forEach(i=>{t.push(i.start.parent),e.remove(i)}),t.forEach(i=>{let o=i;for(;o.parent&&o.isEmpty;){let r=e.createRangeOn(o);o=o.parent,e.remove(r)}})}function zue(n,e,t){return n.change(i=>{let o=t||n.document.selection;o.isCollapsed||n.deleteContent(o,{doNotAutoparagraph:!0});let r=new M2(n,i,o.anchor),s=[],a;if(e.is("documentFragment")){if(e.markers.size){let d=[];for(let[f,p]of e.markers){let{start:g,end:w}=p,k=g.isEqual(w);d.push({position:g,name:f,isCollapsed:k},{position:w,name:f,isCollapsed:k})}d.sort(({position:f},{position:p})=>f.isBefore(p)?1:-1);for(let{position:f,name:p,isCollapsed:g}of d){let w=null,k=null,C=f.parent===e&&f.isAtStart,S=f.parent===e&&f.isAtEnd;!C&&!S?(w=i.createElement("$marker"),i.insert(w,f)):g&&(k=C?"start":"end"),s.push({name:p,element:w,collapsed:k})}}a=e.getChildren()}else a=[e];r.handleNodes(a);let l=r.getSelectionRange();if(e.is("documentFragment")&&s.length){let d=l?pn.fromRange(l):null,f={};for(let p=s.length-1;p>=0;p--){let{name:g,element:w,collapsed:k}=s[p],C=!f[g];if(C&&(f[g]=[]),w){let S=i.createPositionAt(w,"before");f[g].push(S),i.remove(w)}else{let S=r.getAffectedRange();if(!S){k&&f[g].push(r.position);continue}k?f[g].push(S[k]):f[g].push(C?S.start:S.end)}}for(let[p,[g,w]]of Object.entries(f))g&&w&&g.root===w.root&&g.root.document&&!i.model.markers.has(p)&&i.addMarker(p,{usingOperation:!0,affectsData:!0,range:new A(g,w)});d&&(l=d.toRange(),d.detach())}l&&(o instanceof ni?i.setSelection(l):o.setTo(l));let c=r.getAffectedRange()||n.createRange(o.anchor);return r.destroy(),c})}var M2=class{model;writer;position;canMergeWith;schema;_documentFragment;_documentFragmentPosition;_firstNode=null;_lastNode=null;_lastAutoParagraph=null;_filterAttributesOf=[];_affectedStart=null;_affectedEnd=null;_nodeToSelect=null;constructor(e,t,i){this.model=e,this.writer=t,this.position=i,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=t.createDocumentFragment(),this._documentFragmentPosition=t.createPositionAt(this._documentFragment,0)}handleNodes(e){for(let t of Array.from(e))this._handleNode(t);this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}_updateLastNodeFromAutoParagraph(e){let t=this.writer.createPositionAfter(this._lastNode),i=this.writer.createPositionAfter(e);if(i.isAfter(t)){this._lastNode=e;if(this.position.parent!=e||!this.position.isAtEnd)throw new _("insertcontent-invalid-insertion-position",this);this.position=i,this._setAffectedBoundaries(this.position)}}getSelectionRange(){return this._nodeToSelect?A._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}getAffectedRange(){return this._affectedStart?new A(this._affectedStart,this._affectedEnd):null}destroy(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}_handleNode(e){if(!this._checkAndSplitToAllowedPosition(e)){this.schema.isObject(e)||this._handleDisallowedNode(e);return}this._appendToFragment(e),this._firstNode||(this._firstNode=e),this._lastNode=e}_insertPartialFragment(){if(this._documentFragment.isEmpty)return;let e=Kt.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=e.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=e.toPosition(),e.detach()}_handleDisallowedNode(e){e.is("element")&&this.handleNodes(e.getChildren())}_appendToFragment(e){if(!this.schema.checkChild(this.position,e))throw new _("insertcontent-wrong-position",this,{node:e,position:this.position});this.writer.insert(e,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(e.offsetSize),this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=e:this._nodeToSelect=null,this._filterAttributesOf.push(e)}_setAffectedBoundaries(e){this._affectedStart||(this._affectedStart=Kt.fromPosition(e,"toPrevious")),(!this._affectedEnd||this._affectedEnd.isBefore(e))&&(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=Kt.fromPosition(e,"toNext"))}_mergeOnLeft(){let e=this._firstNode;if(!(e instanceof dt)||!this._canMergeLeft(e))return;let t=Kt._createBefore(e);t.stickiness="toNext";let i=Kt.fromPosition(this.position,"toNext");this._affectedStart.isEqual(t)&&(this._affectedStart.detach(),this._affectedStart=Kt._createAt(t.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=Kt._createAt(t.nodeBefore,"end","toNext")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_mergeOnRight(){let e=this._lastNode;if(!(e instanceof dt)||!this._canMergeRight(e))return;let t=Kt._createAfter(e);t.stickiness="toNext";if(!this.position.isEqual(t))throw new _("insertcontent-invalid-insertion-position",this);this.position=N._createAt(t.nodeBefore,"end");let i=Kt.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(t)&&(this._affectedEnd.detach(),this._affectedEnd=Kt._createAt(t.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=t.nodeBefore,this._lastNode=t.nodeBefore),this.writer.merge(t),t.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=Kt._createAt(t.nodeBefore,0,"toPrevious")),this.position=i.toPosition(),i.detach(),this._filterAttributesOf.push(this.position.parent),t.detach()}_canMergeLeft(e){let t=e.previousSibling;return t instanceof dt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(t,e)}_canMergeRight(e){let t=e.nextSibling;return t instanceof dt&&this.canMergeWith.has(t)&&this.model.schema.checkMerge(e,t)}_insertAutoParagraph(){this._insertPartialFragment();let e=this.writer.createElement("paragraph");this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0)}_checkAndSplitToAllowedPosition(e){let t=this._getAllowedIn(this.position.parent,e);if(!t)return!1;for(t!=this.position.parent&&this._insertPartialFragment();t!=this.position.parent;)if(this.position.isAtStart){let i=this.position.parent;this.position=this.writer.createPositionBefore(i),i.isEmpty&&i.parent===t&&this.writer.remove(i)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{let i=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=i,this.canMergeWith.add(this.position.nodeAfter)}return this.schema.checkChild(this.position.parent,e)||this._insertAutoParagraph(),!0}_getAllowedIn(e,t){return this.schema.checkChild(e,t)||this.schema.checkChild(e,"paragraph")&&this.schema.checkChild("paragraph",t)?e:this.schema.isLimit(e)?null:this._getAllowedIn(e.parent,t)}};function Hue(n,e,t,i={}){if(!n.schema.isObject(e))throw new _("insertobject-element-not-an-object",n,{object:e});let o=t||n.document.selection,r=o;i.findOptimalPosition&&n.schema.isBlock(e)&&(r=n.createSelection(n.schema.findOptimalInsertionRange(o,i.findOptimalPosition)));let s=lt(o.getSelectedBlocks()),a={};return s&&Object.assign(a,n.schema.getAttributesWithProperty(s,"copyOnReplace",!0)),n.change(l=>{r.isCollapsed||n.deleteContent(r,{doNotAutoparagraph:!0});let c=e,d=r.anchor.parent;!n.schema.checkChild(d,e)&&n.schema.checkChild(d,"paragraph")&&n.schema.checkChild("paragraph",e)&&(c=l.createElement("paragraph"),l.insert(e,c)),n.schema.setAllowedAttributes(c,a,l);let f=n.insertContent(c,r);return f.isCollapsed||i.setSelection&&Uue(l,e,i.setSelection,a),f})}function Uue(n,e,t,i){let o=n.model;if(t=="on"){n.setSelection(e,"on");return}if(t!="after")throw new _("insertobject-invalid-place-parameter-value",o);let r=e.nextSibling;if(o.schema.isInline(e)){n.setSelection(e,"after");return}!(r&&o.schema.checkChild(r,"$text"))&&o.schema.checkChild(e.parent,"paragraph")&&(r=n.createElement("paragraph"),o.schema.setAllowedAttributes(r,i,n),o.insertContent(r,n.createPositionAfter(e))),r&&n.setSelection(r,0)}var jue=' ,.?!:;"-()';function $ue(n,e,t={}){let i=n.schema,o=t.direction!="backward",r=t.unit?t.unit:"character",s=!!t.treatEmojiAsSingleUnit,a=e.focus,l=new Hi({boundaries:Kue(a,o),singleCharacters:!0,direction:o?"forward":"backward"}),c={walker:l,schema:i,isForward:o,unit:r,treatEmojiAsSingleUnit:s},d;for(;d=l.next();){if(d.done)return;let f=Wue(c,d.value);if(f){e instanceof ni?n.change(p=>{p.setSelectionFocus(f)}):e.setFocus(f);return}}}function Wue(n,e){let{isForward:t,walker:i,unit:o,schema:r,treatEmojiAsSingleUnit:s}=n,{type:a,item:l,nextPosition:c}=e;if(a=="text")return n.unit==="word"?Gue(i,t):que(i,o,s);if(a==(t?"elementStart":"elementEnd")){if(r.isSelectable(l))return N._createAt(l,t?"after":"before");if(r.checkChild(c,"$text"))return c}else{if(r.isLimit(l)){i.skip(()=>!0);return}if(r.checkChild(c,"$text"))return c}}function que(n,e,t){let i=n.position.textNode;if(i){let o=i.data,r=n.position.offset-i.startOffset;for(;_g(o,r)||e=="character"&&Cg(o,r)||t&&vy(o,r);)n.next(),r=n.position.offset-i.startOffset}return n.position}function Gue(n,e){let t=n.position.textNode;for(t||(t=e?n.position.nodeAfter:n.position.nodeBefore);t&&t.is("$text");){let i=n.position.offset-t.startOffset;if(Yue(t,i,e))t=e?n.position.nodeAfter:n.position.nodeBefore;else{if(Que(t.data,i,e))break;n.next()}}return n.position}function Kue(n,e){let t=n.root,i=N._createAt(t,e?"end":0);return e?new A(n,i):new A(i,n)}function Que(n,e,t){let i=e+(t?0:-1);return jue.includes(n.charAt(i))}function Yue(n,e,t){return e===(t?n.offsetSize:0)}var Xa=class extends Ze(){markers;document;schema;_pendingChanges;_currentWriter;constructor(){super(),this.markers=new A2,this.document=new x2(this),this.schema=new k2,this._pendingChanges=[],this._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(e=>this.decorate(e)),this.on("applyOperation",(e,t)=>{t[0]._validate()},{priority:"highest"}),this.schema.register("$root",{isLimit:!0}),this.schema.register("$container",{allowIn:["$root","$container"]}),this.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),this.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),this.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),this.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),this.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),this.schema.register("$marker"),this.schema.addChildCheck(()=>!0,"$marker"),Gde(this),this.document.registerPostFixer(L8),this.on("insertContent",(e,[t,i])=>{e.return=zue(this,t,i)}),this.on("insertObject",(e,[t,i,o])=>{e.return=Hue(this,t,i,o)}),this.on("canEditAt",e=>{let t=!this.document.isReadOnly;e.return=t,t||e.stop()})}change(e){try{return this._pendingChanges.length===0?(this._pendingChanges.push({batch:new Qa,callback:e}),this._runPendingChanges()[0]):e(this._currentWriter)}catch(t){_.rethrowUnexpectedError(t,this)}}enqueueChange(e,t){try{e?typeof e=="function"?(t=e,e=new Qa):e instanceof Qa||(e=new Qa(e)):e=new Qa,this._pendingChanges.push({batch:e,callback:t}),this._pendingChanges.length==1&&this._runPendingChanges()}catch(i){_.rethrowUnexpectedError(i,this)}}applyOperation(e){e._execute()}insertContent(e,t,i,...o){let r=JT(t,i);return this.fire("insertContent",[e,r,i,...o])}insertObject(e,t,i,o,...r){let s=JT(t,i);return this.fire("insertObject",[e,s,o,o,...r])}deleteContent(e,t){Iue(this,e,t)}modifySelection(e,t){$ue(this,e,t)}getSelectedContent(e){return Bue(this,e)}hasContent(e,t={}){let i=e instanceof A?e:A._createIn(e);if(i.isCollapsed)return!1;let{ignoreWhitespaces:o=!1,ignoreMarkers:r=!1}=t;if(!r){for(let s of this.markers.getMarkersIntersectingRange(i))if(s.affectsData)return!0}for(let s of i.getItems())if(this.schema.isContent(s))if(s.is("$textProxy"))if(o){if(s.data.search(/\S/)!==-1)return!0}else return!0;else return!0;return!1}canEditAt(e){let t=JT(e);return this.fire("canEditAt",[t])}createPositionFromPath(e,t,i){return new N(e,t,i)}createPositionAt(e,t){return N._createAt(e,t)}createPositionAfter(e){return N._createAfter(e)}createPositionBefore(e){return N._createBefore(e)}createRange(e,t){return new A(e,t)}createRangeIn(e){return A._createIn(e)}createRangeOn(e){return A._createOn(e)}createSelection(...e){return new fn(...e)}createBatch(e){return new Qa(e)}createOperationFromJSON(e){return y2.fromJSON(e,this.document)}destroy(){this.document.destroy(),this.stopListening()}_runPendingChanges(){let e=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){let t=this._pendingChanges[0].batch;this._currentWriter=new I2(this,t);let i=this._pendingChanges[0].callback(this._currentWriter);e.push(i),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return e}};function JT(n,e){if(n)return n instanceof fn||n instanceof ni?n:n instanceof rd?e||e===0?new fn(n,e):n.is("rootElement")?new fn(n,"in"):new fn(n,"on"):new fn(n)}var Ny=class extends uo{domEventType="click";onDomEvent(e){this.fire(e.type,e)}},el=class extends uo{domEventType=["mousedown","mouseup","mouseover","mouseout"];onDomEvent(e){this.fire(e.type,e)}},tl=class{document;constructor(e){this.document=e}createDocumentFragment(e){return new Za(this.document,e)}createElement(e,t,i){return new co(this.document,e,t,i)}createText(e){return new xt(this.document,e)}clone(e,t=!1){return e._clone(t)}appendChild(e,t){return t._appendChild(e)}insertChild(e,t,i){return i._insertChild(e,t)}removeChildren(e,t,i){return i._removeChildren(e,t)}remove(e){let t=e.parent;return t?this.removeChildren(t.getChildIndex(e),1,t):[]}replace(e,t){let i=e.parent;if(i){let o=i.getChildIndex(e);return this.removeChildren(o,1,i),this.insertChild(o,t,i),!0}return!1}unwrapElement(e){let t=e.parent;if(t){let i=t.getChildIndex(e);this.remove(e),this.insertChild(i,e.getChildren(),t)}}rename(e,t){let i=new co(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null}setAttribute(e,t,i){i._setAttribute(e,t)}removeAttribute(e,t){t._removeAttribute(e)}addClass(e,t){t._addClass(e)}removeClass(e,t){t._removeClass(e)}setStyle(e,t,i){Gt(e)&&i===void 0?t._setStyle(e):i._setStyle(e,t)}removeStyle(e,t){t._removeStyle(e)}setCustomProperty(e,t,i){i._setCustomProperty(e,t)}removeCustomProperty(e,t){return t._removeCustomProperty(e)}createPositionAt(e,t){return H._createAt(e,t)}createPositionAfter(e){return H._createAfter(e)}createPositionBefore(e){return H._createBefore(e)}createRange(e,t){return new Se(e,t)}createRangeOn(e){return Se._createOn(e)}createRangeIn(e){return Se._createIn(e)}createSelection(...e){return new Ms(...e)}};var Zue=/\w+\((?:[^()]|\([^()]*\))*\)|\S+/gi;function Jue(n=""){if(n==="")return{top:void 0,right:void 0,bottom:void 0,left:void 0};let e=nhe(n),t=e[0],i=e[2]||t,o=e[1]||t,r=e[3]||o;return{top:t,bottom:i,right:o,left:r}}function Xue(n){return e=>{let{top:t,right:i,bottom:o,left:r}=e,s=[];return[t,i,r,o].every(a=>!!a)?s.push([n,ehe(e)]):(t&&s.push([n+"-top",t]),i&&s.push([n+"-right",i]),o&&s.push([n+"-bottom",o]),r&&s.push([n+"-left",r])),s}}function ehe({top:n,right:e,bottom:t,left:i}){let o=[];return i!==e?o.push(n,e,t,i):t!==n?o.push(n,e,t):e!==n?o.push(n,e):o.push(n),o.join(" ")}function the(n){return e=>({path:n,value:Jue(e)})}function nhe(n){let e=n.trim().slice(0,1500).matchAll(Zue);return Array.from(e).map(t=>t[0])}function J8(n){n.setNormalizer("margin",the("margin")),n.setNormalizer("margin-top",e=>({path:"margin.top",value:e})),n.setNormalizer("margin-right",e=>({path:"margin.right",value:e})),n.setNormalizer("margin-bottom",e=>({path:"margin.bottom",value:e})),n.setNormalizer("margin-left",e=>({path:"margin.left",value:e})),n.setReducer("margin",Xue("margin")),n.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"])}var nm="[",Mg="]",Jh="{",Tg="}",Ug={container:Ds,attribute:Qc,empty:rm,ui:Jc,raw:sm},ihe={setContentOf:(n,e)=>{n.innerHTML=e}};function D2(n,e={}){if(!(n instanceof am))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let t=n.document,i=!!e.withoutSelection,o=e.rootName||"main",r=t.getRoot(o),s={showType:e.showType,showPriority:e.showPriority,renderUIElements:e.renderUIElements,renderRawElements:e.renderRawElements,ignoreRoot:!0,domConverter:e.domConverter};return i?D2._stringify(r,null,s):D2._stringify(r,t.selection,s)}D2._stringify=ez;function X8(n,e,t={}){if(!(n instanceof am))throw new TypeError("View needs to be an instance of module:engine/view/view~View.");let i=n.document,o=t.rootName||"main",r=i.getRoot(o);n.change(s=>{let a=X8._parse(e,{rootElement:r});a.view&&a.selection&&s.setSelection(a.selection)})}X8._parse=tz;function ez(n,e=null,t={}){let i;return e instanceof H||e instanceof Se?i=new jg(e):i=e,new R2(n,i,t).stringify()}function tz(n,e={}){let t=new Oy(new im);e.order=e.order||[];let i=new P2({sameSelectionCharacters:e.sameSelectionCharacters}),o=new v2(t,{namespaces:Object.keys(Ug)});e.inlineObjectElements&&o.domConverter.inlineObjectElements.push(...e.inlineObjectElements);let r=o.toView(n);if(r=nz(r),e.rootElement){let a=e.rootElement,l=r._removeChildren(0,r.childCount);a._removeChildren(0,a.childCount),a._appendChild(l),r=a}let s=i.parse(r,e.order);if(r.is("documentFragment")&&r.childCount===1&&(r=r.getChild(0)),s.length){let a=new jg(s,{backward:!!e.lastRangeBackward});return{view:r,selection:a}}return r.parent&&r._remove(),r}var P2=class{sameSelectionCharacters;_positions;constructor(e){this.sameSelectionCharacters=!!e.sameSelectionCharacters}parse(e,t){this._positions=[],this._getPositions(e);let i=this._createRanges();if(t.length){if(t.length!=i.length)throw new Error(`Parse error - there are ${i.length} ranges found, but ranges order array contains ${t.length} elements.`);i=this._sortRanges(i,t)}return i}_getPositions(e){if(e.is("documentFragment")||e.is("element")){let t=[...e.getChildren()];for(let i of t)this._getPositions(i)}if(e.is("$text")){let t=new RegExp(`[${Jh}${Tg}\\${Mg}\\${nm}]`,"g"),i=e.data,o,r=0,s=[];for(;o=t.exec(i);){let c=o.index,d=o[0];s.push({bracket:d,textOffset:c-r}),r++}i=i.replace(t,""),e._data=i;let a=e.index,l=e.parent;i||e._remove();for(let c of s)if(i)if(this.sameSelectionCharacters||!this.sameSelectionCharacters&&(c.bracket==Jh||c.bracket==Tg))this._positions.push({bracket:c.bracket,position:new H(e,c.textOffset)});else{if(!this.sameSelectionCharacters&&c.textOffset!==0&&c.textOffset!==i.length)throw new Error(`Parse error - range delimiter '${c.bracket}' is placed inside text node.`);let d=c.textOffset===0?a:a+1;this._positions.push({bracket:c.bracket,position:new H(l,d)})}else{if(!this.sameSelectionCharacters&&c.bracket==Jh||c.bracket==Tg)throw new Error(`Parse error - text range delimiter '${c.bracket}' is placed inside empty text node. `);this._positions.push({bracket:c.bracket,position:new H(l,a)})}}}_sortRanges(e,t){let i=[],o=0;for(let r of t){if(e[r-1]===void 0)throw new Error("Parse error - provided ranges order is invalid.");i[r-1]=e[o],o++}return i}_createRanges(){let e=[],t=null;for(let i of this._positions){if(!t&&(i.bracket==Mg||i.bracket==Tg))throw new Error(`Parse error - end of range was found '${i.bracket}' but range was not started before.`);if(t&&(i.bracket==nm||i.bracket==Jh))throw new Error(`Parse error - start of range was found '${i.bracket}' but one range is already started.`);i.bracket==nm||i.bracket==Jh?t=new Se(i.position,i.position):(t.end=i.position,e.push(t),t=null)}if(t!==null)throw new Error("Parse error - range was started but no end delimiter was found.");return e}},R2=class{root;selection;ranges;showType;showPriority;showAttributeElementId;ignoreRoot;sameSelectionCharacters;renderUIElements;renderRawElements;domConverter;constructor(e,t,i){this.root=e,this.selection=t,this.ranges=[],t&&(this.ranges=[...t.getRanges()]),this.showType=!!i.showType,this.showPriority=!!i.showPriority,this.showAttributeElementId=!!i.showAttributeElementId,this.ignoreRoot=!!i.ignoreRoot,this.sameSelectionCharacters=!!i.sameSelectionCharacters,this.renderUIElements=!!i.renderUIElements,this.renderRawElements=!!i.renderRawElements,this.domConverter=i.domConverter||ihe}stringify(){let e="";return this._walkView(this.root,t=>{e+=t}),e}_walkView(e,t){let i=this.ignoreRoot&&this.root===e;if(e.is("element")||e.is("documentFragment")){if(e.is("element")&&!i&&t(this._stringifyElementOpen(e)),this.renderUIElements&&e.is("uiElement"))t(e.render(document,this.domConverter).innerHTML);else if(this.renderRawElements&&e.is("rawElement")){let o=document.createElement("div");e.render(o,this.domConverter),t(o.innerHTML)}else{let o=0;t(this._stringifyElementRanges(e,o));for(let r of e.getChildren())this._walkView(r,t),o++,t(this._stringifyElementRanges(e,o))}e.is("element")&&!i&&t(this._stringifyElementClose(e))}e.is("$text")&&t(this._stringifyTextRanges(e))}_stringifyElementRanges(e,t){let i="",o="",r="";for(let s of this.ranges)s.start.parent==e&&s.start.offset===t&&(s.isCollapsed?r+=nm+Mg:i+=nm),s.end.parent===e&&s.end.offset===t&&!s.isCollapsed&&(o+=Mg);return o+r+i}_stringifyTextRanges(e){let t=e.data.length,i=e.data.split(""),o,r;this.sameSelectionCharacters?(o=nm,r=Mg):(o=Jh,r=Tg),i[t]="";let s=i.map(a=>({letter:a,start:"",end:"",collapsed:""}));for(let a of this.ranges){let l=a.start,c=a.end;l.parent==e&&l.offset>=0&&l.offset<=t&&(a.isCollapsed?s[c.offset].collapsed+=o+r:s[l.offset].start+=o),c.parent==e&&c.offset>=0&&c.offset<=t&&!a.isCollapsed&&(s[c.offset].end+=r)}return s.map(a=>a.end+a.collapsed+a.start+a.letter).join("")}_stringifyElementOpen(e){let t=this._stringifyElementPriority(e),i=this._stringifyElementId(e),r=[this._stringifyElementType(e),e.name].filter(l=>l!=="").join(":"),s=this._stringifyElementAttributes(e);return`<${[r,t,i,s].filter(l=>l!=="").join(" ")}>`}_stringifyElementClose(e){return`</${[this._stringifyElementType(e),e.name].filter(o=>o!=="").join(":")}>`}_stringifyElementType(e){if(this.showType){for(let t in Ug)if(e instanceof Ug[t])return t}return""}_stringifyElementPriority(e){return this.showPriority&&e.is("attributeElement")?`view-priority="${e.priority}"`:""}_stringifyElementId(e){return this.showAttributeElementId&&e.is("attributeElement")&&e.id?`view-id="${e.id}"`:""}_stringifyElementAttributes(e){let t=[],i=[...e.getAttributeKeys()].sort();for(let o of i){let r;o==="class"?r=[...e.getClassNames()].sort().join(" "):o==="style"?r=[...e.getStyleNames()].sort().map(s=>`${s}:${e.getStyle(s).replace(/"/g,"&quot;")}`).join(";"):r=e.getAttribute(o),t.push(`${o}="${r}"`)}return t.join(" ")}};function nz(n){if(n.is("element")||n.is("documentFragment")){let e=n.is("documentFragment")?new Za(n.document):ohe(n.document,n);for(let t of[...n.getChildren()]){if(e.is("emptyElement"))throw new Error("Parse error - cannot parse inside EmptyElement.");if(e.is("uiElement"))throw new Error("Parse error - cannot parse inside UIElement.");if(e.is("rawElement"))throw new Error("Parse error - cannot parse inside RawElement.");e._appendChild(nz(t))}return e}return n}function ohe(n,e){let t=rhe(e),i=Ug[t.type],o=i?new i(n,t.name):new co(n,t.name);o.is("attributeElement")&&(t.priority!==null&&(o._priority=t.priority),t.id!==null&&(o._id=t.id));for(let r of e.getAttributeKeys())o._setAttribute(r,e.getAttribute(r));return o}function rhe(n){let e=n.name.split(":"),t=ahe(n.getAttribute("view-priority")),i=n.hasAttribute("view-id")?n.getAttribute("view-id"):null;if(n._removeAttribute("view-priority"),n._removeAttribute("view-id"),e.length==1)return{name:e[0],type:t!==null?"attribute":null,priority:t,id:i};let o=she(e[0]);if(o)return{name:e[1],type:o,priority:t,id:i};throw new Error(`Parse error - cannot parse element's name: ${n.name}.`)}function she(n){return n in Ug?n:null}function ahe(n){let e=parseInt(n,10);return isNaN(e)?null:e}function iz(n,e={}){if(!(n instanceof Xa))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let t=e.rootName||"main",i=n.document.getRoot(t);return iz._stringify(i,e.withoutSelection?null:n.document.selection,e.convertMarkers?n.markers:null)}iz._stringify=lhe;function oz(n,e,t={}){if(!(n instanceof Xa))throw new TypeError("Model needs to be an instance of module:engine/model/model~Model.");let i,o=null,r=n.document.getRoot(t.rootName||"main"),s=oz._parse(e,n.schema,{lastRangeBackward:t.lastRangeBackward,selectionAttributes:t.selectionAttributes,context:[r.name],inlineObjectElements:t.inlineObjectElements});"model"in s?(i=s.model,o=s.selection):i=s,t.batchType!==void 0?n.enqueueChange(t.batchType,a):n.change(a);function a(l){if(l.remove(l.createRangeIn(r)),l.insert(i,r),l.setSelection(null),l.removeSelectionAttribute(n.document.selection.getAttributeKeys()),o){let c=[];for(let d of o.getRanges()){let f=new N(r,d.start.path),p=new N(r,d.end.path);c.push(new A(f,p))}l.setSelection(c,{backward:o.isBackward}),t.selectionAttributes&&l.setSelectionAttribute(o.getAttributes())}}}oz._parse=che;function lhe(n,e=null,t=null){let i=new Xa,o=new lm,r=null,s;if(n instanceof nd||n instanceof Bo)s=i.createRangeIn(n);else if(n.parent)s=new A(i.createPositionBefore(n),i.createPositionAfter(n));else{let k=new Bo(n);s=i.createRangeIn(k)}e instanceof fn||e instanceof ni?r=e:e instanceof A?r=new fn(e):e instanceof N&&(r=new fn(e));let a=new im,l=new am(a),c=l.document,d=new Dg(c,"div");d.rootName="main",c.roots.add(d);let f=new Og({mapper:o,schema:i.schema});o.bindElements(n.root,d),f.on("insert:$text",L2()),f.on("insert",F2(),{priority:"lowest"}),f.on("attribute",(k,C,S)=>{(C.item instanceof fn||C.item instanceof ni||C.item.is("$textProxy"))&&T8((V,{writer:K})=>K.createAttributeElement("model-text-with-attributes",{[C.attributeKey]:c8(V)}))(k,C,S)}),f.on("insert",I8(k=>{let C=U2(k.getAttributes(),c8);return new Ds(c,k.name,C)})),f.on("selection",x8()),f.on("selection",A8()),f.on("addMarker",M8((k,{writer:C})=>{let S=k.markerName+":"+(k.isOpening?"start":"end");return C.createUIElement(S)}));let p=new Map;if(t)for(let k of Array.from(t).sort((C,S)=>C.name<S.name?1:-1))p.set(k.name,k.getRange());let g=l._writer;f.convert(s,p,g),r&&f.convertSelection(r,t||i.markers,g);let w=ez(d,c.selection,{sameSelectionCharacters:!0});return w=w.substr(5,w.length-11),l.destroy(),w.replace(new RegExp("model-text-with-attributes","g"),"$text")}function che(n,e,t={}){let i=new lm;n=n.replace(new RegExp("\\$text","g"),"model-text-with-attributes");let o=tz(n,{sameSelectionCharacters:!0,lastRangeBackward:!!t.lastRangeBackward,inlineObjectElements:t.inlineObjectElements}),r,s=null,a=null;"view"in o&&"selection"in o?(r=o.view,s=o.selection):r=o;let l=new Xa,c=new My({schema:e});c.on("documentFragment",dhe(i)),c.on("element:model-text-with-attributes",l8()),c.on("element",uhe(i)),c.on("text",l8());let d=l.change(f=>c.convert(r.root,f,t.context||"$root"));if(i.bindElements(d,r.root),d.childCount==1&&(d=d.getChild(0)),s){let f=[];for(let p of s.getRanges())f.push(i.toModelRange(p));a=new fn(f,{backward:s.isBackward});for(let[p,g]of _i(t.selectionAttributes||[]))a.setAttribute(p,g)}return a?{model:d,selection:a}:d}function dhe(n){return(e,t,i)=>{let o=i.convertChildren(t.viewItem,t.modelCursor);n.bindElements(t.modelCursor.parent,t.viewItem),t=Object.assign(t,o),e.stop()}}function uhe(n){return(e,t,i)=>{let o=t.viewItem.name;if(!i.schema.checkChild(t.modelCursor,o))throw new Error(`Element '${o}' was not allowed in given position.`);let r=U2(t.viewItem.getAttributes(),rz),s=i.writer.createElement(t.viewItem.name,r);i.writer.insert(s,t.modelCursor),n.bindElements(s,t.viewItem),i.convertChildren(t.viewItem,s),t.modelRange=A._createOn(s),t.modelCursor=t.modelRange.end,e.stop()}}function l8(){return(n,e,t)=>{if(!t.schema.checkChild(e.modelCursor,"$text"))throw new Error("Text was not allowed in given position.");let i;if(e.viewItem.is("element")){let o=U2(e.viewItem.getAttributes(),rz),r=e.viewItem.getChild(0);i=t.writer.createText(r.data,o)}else i=t.writer.createText(e.viewItem.data);t.writer.insert(i,e.modelCursor),e.modelRange=A._createFromPositionAndShift(e.modelCursor,i.offsetSize),e.modelCursor=e.modelRange.end,n.stop()}}function rz(n){try{return JSON.parse(n)}catch{return n}}function c8(n){return Gt(n)?JSON.stringify(n):n}function*U2(n,e){for(let[t,i]of n)yield[t,e(i)]}var Ly=class{crashes=[];state="initializing";_crashNumberLimit;_now=Date.now;_minimumNonErrorTimePeriod;_boundErrorHandler;_listeners;constructor(e){if(this.crashes=[],this._crashNumberLimit=typeof e.crashNumberLimit=="number"?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod=typeof e.minimumNonErrorTimePeriod=="number"?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=t=>{let i="error"in t?t.error:t.reason;i instanceof Error&&this._handleError(i,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")}destroy(){this._stopErrorHandling(),this._listeners={}}on(e,t){this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t)}off(e,t){this._listeners[e]=this._listeners[e].filter(i=>i!==t)}_fire(e,...t){let i=this._listeners[e]||[];for(let o of i)o.apply(this,[null,...t])}_startErrorHandling(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}_stopErrorHandling(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}_handleError(e,t){if(this._shouldReactToError(e)){this.crashes.push({message:e.message,stack:e.stack,filename:t instanceof ErrorEvent?t.filename:void 0,lineno:t instanceof ErrorEvent?t.lineno:void 0,colno:t instanceof ErrorEvent?t.colno:void 0,date:this._now()});let i=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:e,causesRestart:i}),i?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}_shouldReactToError(e){return e.is&&e.is("CKEditorError")&&e.context!==void 0&&e.context!==null&&this.state==="ready"&&this._isErrorComingFromThisItem(e)}_shouldRestart(){if(this.crashes.length<=this._crashNumberLimit)return!0;let e=this.crashes[this.crashes.length-1].date,t=this.crashes[this.crashes.length-1-this._crashNumberLimit].date;return(e-t)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}};function j2(n,e=new Set){let t=[n],i=new Set,o=0;for(;t.length>o;){let r=t[o++];if(!(i.has(r)||!hhe(r)||e.has(r)))if(i.add(r),Symbol.iterator in r)try{for(let s of r)t.push(s)}catch{}else for(let s in r)s!=="defaultValue"&&t.push(r[s])}return i}function hhe(n){let e=Object.prototype.toString.call(n),t=typeof n;return!(t==="number"||t==="boolean"||t==="string"||t==="symbol"||t==="function"||e==="[object Date]"||e==="[object RegExp]"||e==="[object Module]"||n===void 0||n===null||n._watchdogExcluded||n instanceof EventTarget||n instanceof Event)}function az(n,e,t=new Set){if(n===e&&mhe(n))return!0;let i=j2(n,t),o=j2(e,t);for(let r of i)if(o.has(r))return!0;return!1}function mhe(n){return typeof n=="object"&&n!==null}var Wg=class extends Ly{_editor=null;_lifecyclePromise=null;_throttledSave;_data;_lastDocumentVersion;_elementOrData;_initUsingData=!0;_editables={};_config;_excludedProps;constructor(e,t={}){super(t),this._throttledSave=Ga(this._save.bind(this),typeof t.saveInterval=="number"?t.saveInterval:5e3),e&&(this._creator=(i,o)=>e.create(i,o)),this._destructor=i=>i.destroy()}get editor(){return this._editor}get _item(){return this._editor}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}_restart(){return Promise.resolve().then(()=>(this.state="initializing",this._fire("stateChange"),this._destroy())).catch(e=>{console.error("An error happened during the editor destroying.",e)}).then(()=>{let e={},t=[],i=this._config.rootsAttributes||{},o={};for(let[s,a]of Object.entries(this._data.roots))a.isLoaded?(e[s]="",o[s]=i[s]||{}):t.push(s);let r=I(v({},this._config),{extraPlugins:this._config.extraPlugins||[],lazyRoots:t,rootsAttributes:o,_watchdogInitialData:this._data});return delete r.initialData,r.extraPlugins.push($2),this._initUsingData?this.create(e,r,r.context):Vi(this._elementOrData)?this.create(this._elementOrData,r,r.context):this.create(this._editables,r,r.context)}).then(()=>{this._fire("restart")})}create(e=this._elementOrData,t=this._config,i){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(super._startErrorHandling(),this._elementOrData=e,this._initUsingData=typeof e=="string"||Object.keys(e).length>0&&typeof Object.values(e)[0]=="string",this._config=this._cloneEditorConfiguration(t)||{},this._config.context=i,this._creator(e,this._config))).then(o=>{this._editor=o,o.model.document.on("change:data",this._throttledSave),this._lastDocumentVersion=o.model.document.version,this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this.state="ready",this._fire("stateChange")}).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}destroy(){return this._lifecyclePromise=Promise.resolve(this._lifecyclePromise).then(()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy())).finally(()=>{this._lifecyclePromise=null}),this._lifecyclePromise}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling(),this._throttledSave.cancel();let e=this._editor;return this._editor=null,e.model.document.off("change:data",this._throttledSave),this._destructor(e)})}_save(){let e=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=e}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}_setExcludedProperties(e){this._excludedProps=e}_getData(){let e=this._editor,t=e.model.document.roots.filter(a=>a.isAttached()&&a.rootName!="$graveyard"),{plugins:i}=e,o=i.has("CommentsRepository")&&i.get("CommentsRepository"),r=i.has("TrackChanges")&&i.get("TrackChanges"),s={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};t.forEach(a=>{s.roots[a.rootName]={content:JSON.stringify(Array.from(a.getChildren())),attributes:JSON.stringify(Array.from(a.getAttributes())),isLoaded:a._isLoaded}});for(let a of e.model.markers)a._affectsData&&(s.markers[a.name]={rangeJSON:a.getRange().toJSON(),usingOperation:a._managedUsingOperations,affectsData:a._affectsData});return o&&(s.commentThreads=JSON.stringify(o.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),r&&(s.suggestions=JSON.stringify(r.getSuggestions({toJSON:!0,skipNotAttached:!0}))),s}_getEditables(){let e={};for(let t of this.editor.model.document.getRootNames()){let i=this.editor.ui.getEditableElement(t);i&&(e[t]=i)}return e}_isErrorComingFromThisItem(e){return az(this._editor,e.context,this._excludedProps)}_cloneEditorConfiguration(e){return jc(e,(t,i)=>{if(Vi(t)||i==="context")return t})}},$2=class{editor;_data;constructor(e){this.editor=e,this._data=e.config.get("_watchdogInitialData")}init(){this.editor.data.on("init",e=>{e.stop(),this.editor.model.enqueueChange({isUndoable:!1},t=>{this._restoreCollaborationData(),this._restoreEditorData(t)}),this.editor.data.fire("ready")},{priority:999})}_createNode(e,t){if("name"in t){let i=e.createElement(t.name,t.attributes);if(t.children)for(let o of t.children)i._appendChild(this._createNode(e,o));return i}else return e.createText(t.data,t.attributes)}_restoreEditorData(e){let t=this.editor;Object.entries(this._data.roots).forEach(([i,{content:o,attributes:r}])=>{let s=JSON.parse(o),a=JSON.parse(r),l=t.model.document.getRoot(i);for(let[c,d]of a)e.setAttribute(c,d,l);for(let c of s){let d=this._createNode(e,c);e.insert(d,l,"end")}}),Object.entries(this._data.markers).forEach(([i,o])=>{let{document:r}=t.model,g=o,{rangeJSON:{start:s,end:a}}=g,l=Bt(g,["rangeJSON"]),c=r.getRoot(s.root),d=e.createPositionFromPath(c,s.path,s.stickiness),f=e.createPositionFromPath(c,a.path,a.stickiness),p=e.createRange(d,f);e.addMarker(i,v({range:p},l))})}_restoreCollaborationData(){let e=JSON.parse(this._data.commentThreads),t=JSON.parse(this._data.suggestions);e.forEach(i=>{let o=this.editor.config.get("collaboration.channelId"),r=this.editor.plugins.get("CommentsRepository");r.hasCommentThread(i.threadId)&&r.getCommentThread(i.threadId).remove(),r.addCommentThread(v({channelId:o},i))}),t.forEach(i=>{let o=this.editor.plugins.get("TrackChangesEditing");if(o.hasSuggestion(i.id)){let r=o.getSuggestion(i.id);r.attributes=i.attributes}else o.addSuggestionData(i)})}};var $g=Symbol("MainQueueId"),Fy=class extends Ly{_watchdogs=new Map;_watchdogConfig;_context=null;_contextProps=new Set;_actionQueues=new W2;_contextConfig;_item;constructor(e,t={}){super(t),this._watchdogConfig=t,this._creator=i=>e.create(i),this._destructor=i=>i.destroy(),this._actionQueues.onEmpty(()=>{this.state==="initializing"&&(this.state="ready",this._fire("stateChange"))})}setCreator(e){this._creator=e}setDestructor(e){this._destructor=e}get context(){return this._context}create(e={}){return this._actionQueues.enqueue($g,()=>(this._contextConfig=e,this._create()))}getItem(e){return this._getWatchdog(e)._item}getItemState(e){return this._getWatchdog(e).state}add(e){let t=sz(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i.id,()=>{if(this.state==="destroyed")throw new Error("Cannot add items to destroyed watchdog.");if(!this._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");let o;if(this._watchdogs.has(i.id))throw new Error(`Item with the given id is already added: '${i.id}'.`);if(i.type==="editor")return o=new Wg(null,this._watchdogConfig),o.setCreator(i.creator),o._setExcludedProperties(this._contextProps),i.destructor&&o.setDestructor(i.destructor),this._watchdogs.set(i.id,o),o.on("error",(r,{error:s,causesRestart:a})=>{this._fire("itemError",{itemId:i.id,error:s}),a&&this._actionQueues.enqueue(i.id,()=>new Promise(l=>{let c=()=>{o.off("restart",c),this._fire("itemRestart",{itemId:i.id}),l()};o.on("restart",c)}))}),o.create(i.sourceElementOrData,i.config,this._context);throw new Error(`Not supported item type: '${i.type}'.`)})))}remove(e){let t=sz(e);return Promise.all(t.map(i=>this._actionQueues.enqueue(i,()=>{let o=this._getWatchdog(i);return this._watchdogs.delete(i),o.destroy()})))}destroy(){return this._actionQueues.enqueue($g,()=>(this.state="destroyed",this._fire("stateChange"),super.destroy(),this._destroy()))}_restart(){return this._actionQueues.enqueue($g,()=>(this.state="initializing",this._fire("stateChange"),this._destroy().catch(e=>{console.error("An error happened during destroying the context or items.",e)}).then(()=>this._create()).then(()=>this._fire("restart"))))}_create(){return Promise.resolve().then(()=>(this._startErrorHandling(),this._creator(this._contextConfig))).then(e=>(this._context=e,this._contextProps=j2(this._context),Promise.all(Array.from(this._watchdogs.values()).map(t=>(t._setExcludedProperties(this._contextProps),t.create(void 0,void 0,this._context))))))}_destroy(){return Promise.resolve().then(()=>{this._stopErrorHandling();let e=this._context;return this._context=null,this._contextProps=new Set,Promise.all(Array.from(this._watchdogs.values()).map(t=>t.destroy())).then(()=>this._destructor(e))})}_getWatchdog(e){let t=this._watchdogs.get(e);if(!t)throw new Error(`Item with the given id was not registered: ${e}.`);return t}_isErrorComingFromThisItem(e){for(let t of this._watchdogs.values())if(t._isErrorComingFromThisItem(e))return!1;return az(this._context,e.context)}},W2=class{_onEmptyCallbacks=[];_queues=new Map;_activeActions=0;onEmpty(e){this._onEmptyCallbacks.push(e)}enqueue(e,t){let i=e===$g;this._activeActions++,this._queues.get(e)||this._queues.set(e,Promise.resolve());let r=(i?Promise.all(this._queues.values()):Promise.all([this._queues.get($g),this._queues.get(e)])).then(t),s=r.catch(()=>{});return this._queues.set(e,s),r.finally(()=>{this._activeActions--,this._queues.get(e)===s&&this._activeActions===0&&this._onEmptyCallbacks.forEach(a=>a())})}};function sz(n){return Array.isArray(n)?n:[n]}var M=class extends Ze(){editor;_disableStack=new Set;constructor(e){super(),this.editor=e,this.set("isEnabled",!0)}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",lz,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",lz),this.isEnabled=!0)}destroy(){this.stopListening()}static get isContextPlugin(){return!1}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}};function lz(n){n.return=!1,n.stop()}var te=class extends Ze(){editor;_isEnabledBasedOnSelection;_affectsData;_disableStack;constructor(e){super(),this.editor=e,this.set("value",void 0),this.set("isEnabled",!1),this._affectsData=!0,this._isEnabledBasedOnSelection=!0,this._disableStack=new Set,this.decorate("execute"),this.listenTo(this.editor.model.document,"change",()=>{this.refresh()}),this.listenTo(e,"change:isReadOnly",()=>{this.refresh()}),this.on("set:isEnabled",t=>{if(!this.affectsData)return;let i=e.model.document.selection,r=!(i.getFirstPosition().root.rootName=="$graveyard")&&e.model.canEditAt(i);(e.isReadOnly||this._isEnabledBasedOnSelection&&!r)&&(t.return=!1,t.stop())},{priority:"highest"}),this.on("execute",t=>{this.isEnabled||t.stop()},{priority:"high"})}get affectsData(){return this._affectsData}set affectsData(e){this._affectsData=e}refresh(){this.isEnabled=!0}forceDisabled(e){this._disableStack.add(e),this._disableStack.size==1&&(this.on("set:isEnabled",cz,{priority:"highest"}),this.isEnabled=!1)}clearForceDisabled(e){this._disableStack.delete(e),this._disableStack.size==0&&(this.off("set:isEnabled",cz),this.refresh())}execute(...e){}destroy(){this.stopListening()}};function cz(n){n.return=!1,n.stop()}var qg=class extends te{_childCommandsDefinitions=[];refresh(){}execute(...e){let t=this._getFirstEnabledCommand();return!!t&&t.execute(e)}registerChildCommand(e,t={}){FT(this._childCommandsDefinitions,{command:e,priority:t.priority||"normal"}),e.on("change:isEnabled",()=>this._checkEnabled()),this._checkEnabled()}_checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand()}_getFirstEnabledCommand(){let e=this._childCommandsDefinitions.find(({command:t})=>t.isEnabled);return e&&e.command}},Vy=class extends tt(){_context;_plugins=new Map;_availablePlugins;_contextPlugins;constructor(e,t=[],i=[]){super(),this._context=e,this._availablePlugins=new Map;for(let o of t)o.pluginName&&this._availablePlugins.set(o.pluginName,o);this._contextPlugins=new Map;for(let[o,r]of i)this._contextPlugins.set(o,r),this._contextPlugins.set(r,o),o.pluginName&&this._availablePlugins.set(o.pluginName,o)}*[Symbol.iterator](){for(let e of this._plugins)typeof e[0]=="function"&&(yield e)}get(e){let t=this._plugins.get(e);if(!t){let i=e;throw typeof e=="function"&&(i=e.pluginName||e.name),new _("plugincollection-plugin-not-loaded",this._context,{plugin:i})}return t}has(e){return this._plugins.has(e)}init(e,t=[],i=[]){let o=this,r=this._context;g(e),k(e);let s=e.filter(O=>!f(O,t)),a=[...w(s)];de(a,i);let l=V(a);return K(l,"init").then(()=>K(l,"afterInit")).then(()=>l);function c(O){return typeof O=="function"}function d(O){return c(O)&&!!O.isContextPlugin}function f(O,j){return j.some(z=>z===O||p(O)===z||p(z)===O)}function p(O){return c(O)?O.pluginName||O.name:O}function g(O,j=new Set){O.forEach(z=>{c(z)&&(j.has(z)||(j.add(z),z.pluginName&&!o._availablePlugins.has(z.pluginName)&&o._availablePlugins.set(z.pluginName,z),z.requires&&g(z.requires,j)))})}function w(O,j=new Set){return O.map(z=>c(z)?z:o._availablePlugins.get(z)).reduce((z,Ue)=>j.has(Ue)?z:(j.add(Ue),Ue.requires&&(k(Ue.requires,Ue),w(Ue.requires,j).forEach(ri=>z.add(ri))),z.add(Ue)),new Set)}function k(O,j=null){O.map(z=>c(z)?z:o._availablePlugins.get(z)||z).forEach(z=>{C(z,j),S(z,j),T(z,j)})}function C(O,j){if(!c(O))throw j?new _("plugincollection-soft-required",r,{missingPlugin:O,requiredBy:p(j)}):new _("plugincollection-plugin-not-found",r,{plugin:O})}function S(O,j){if(d(j)&&!d(O))throw new _("plugincollection-context-required",r,{plugin:p(O),requiredBy:p(j)})}function T(O,j){if(j&&f(O,t))throw new _("plugincollection-required",r,{plugin:p(O),requiredBy:p(j)})}function V(O){return O.map(j=>{let z=o._contextPlugins.get(j);return z=z||new j(r),o._add(j,z),z})}function K(O,j){return O.reduce((z,Ue)=>!Ue[j]||o._contextPlugins.has(Ue)?z:z.then(Ue[j].bind(Ue)),Promise.resolve())}function de(O,j){for(let z of j){if(typeof z!="function")throw new _("plugincollection-replace-plugin-invalid-type",null,{pluginItem:z});let Ue=z.pluginName;if(!Ue)throw new _("plugincollection-replace-plugin-missing-name",null,{pluginItem:z});if(z.requires&&z.requires.length)throw new _("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:Ue});let ri=o._availablePlugins.get(Ue);if(!ri)throw new _("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:Ue});let Vm=O.indexOf(ri);if(Vm===-1){if(o._contextPlugins.has(ri))return;throw new _("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:Ue})}if(ri.requires&&ri.requires.length)throw new _("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:Ue});O.splice(Vm,1,z),o._availablePlugins.set(Ue,z)}}}destroy(){let e=[];for(let[,t]of this)typeof t.destroy=="function"&&!this._contextPlugins.has(t)&&e.push(t.destroy());return Promise.all(e)}_add(e,t){this._plugins.set(e,t);let i=e.pluginName;if(i){if(this._plugins.has(i))throw new _("plugincollection-plugin-name-conflict",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});this._plugins.set(i,t)}}},dz=(()=>{class n{config;plugins;locale;t;editors;static defaultConfig;static builtinPlugins;_contextOwner=null;constructor(t){let a=t||{},{translations:i}=a,o=Bt(a,["translations"]);this.config=new gg(o,this.constructor.defaultConfig);let r=this.constructor.builtinPlugins;this.config.define("plugins",r),this.plugins=new Vy(this,r);let s=this.config.get("language")||{};this.locale=new py({uiLanguage:typeof s=="string"?s:s.ui,contentLanguage:this.config.get("language.content"),translations:i}),this.t=this.locale.t,this.editors=new ft}initPlugins(){let t=this.config.get("plugins")||[],i=this.config.get("substitutePlugins")||[];for(let o of t.concat(i)){if(typeof o!="function")throw new _("context-initplugins-constructor-only",null,{Plugin:o});if(o.isContextPlugin!==!0)throw new _("context-initplugins-invalid-plugin",null,{Plugin:o})}return this.plugins.init(t,[],i)}destroy(){return Promise.all(Array.from(this.editors,t=>t.destroy())).then(()=>this.plugins.destroy())}_addEditor(t,i){if(this._contextOwner)throw new _("context-addeditor-private-context");this.editors.add(t),i&&(this._contextOwner=t)}_removeEditor(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}_getEditorConfig(){let t={};for(let i of this.config.names())["plugins","removePlugins","extraPlugins"].includes(i)||(t[i]=this.config.get(i));return t}static create(t){return new Promise(i=>{let o=new this(t);i(o.initPlugins().then(()=>o))})}}return n})(),Gg=class extends Ze(){context;constructor(e){super(),this.context=e}destroy(){this.stopListening()}static get isContextPlugin(){return!0}static get isOfficialPlugin(){return!1}static get isPremiumPlugin(){return!1}},G2=class{_commands;constructor(){this._commands=new Map}add(e,t){this._commands.set(e,t)}get(e){return this._commands.get(e)}execute(e,...t){let i=this.get(e);if(!i)throw new _("commandcollection-command-not-found",this,{commandName:e});return i.execute(...t)}*names(){yield*it(this._commands.keys())}*commands(){yield*it(this._commands.values())}[Symbol.iterator](){return this._commands[Symbol.iterator]()}destroy(){for(let e of this.commands())e.destroy()}},K2=class extends Ft{editor;constructor(e){super(),this.editor=e}set(e,t,i={}){if(typeof t=="string"){let o=t;t=(r,s)=>{this.editor.execute(o),s()}}super.set(e,t,i)}},q2="contentEditing",uz="common",Q2=class{keystrokeInfos=new Map;_editor;constructor(e){this._editor=e;let t=e.config.get("menuBar.isVisible"),i=e.locale.t;this.addKeystrokeInfoCategory({id:q2,label:i("Content editing keystrokes"),description:i("These keyboard shortcuts allow for quick access to content editing features.")});let o=[{label:i("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:i("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:i("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:i("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:i("Navigate through the toolbar or menu bar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:i("Execute the currently focused button. Executing buttons that interact with the editor content moves the focus back to the content."),keystroke:[["Enter"],["Space"]]}];t&&o.push({label:i("Move focus to the menu bar, navigate between menu bars"),keystroke:"Alt+F9",mayRequireFn:!0}),this.addKeystrokeInfoCategory({id:"navigation",label:i("User interface and content navigation keystrokes"),description:i("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:o}]})}addKeystrokeInfoCategory({id:e,label:t,description:i,groups:o}){this.keystrokeInfos.set(e,{id:e,label:t,description:i,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:e,id:uz}),o&&o.forEach(r=>{this.addKeystrokeInfoGroup(v({categoryId:e},r))})}addKeystrokeInfoGroup({categoryId:e=q2,id:t,label:i,keystrokes:o}){let r=this.keystrokeInfos.get(e);if(!r)throw new _("accessibility-unknown-keystroke-info-category",this._editor,{groupId:t,categoryId:e});r.groups.set(t,{id:t,label:i,keystrokes:o||[]})}addKeystrokeInfos({categoryId:e=q2,groupId:t=uz,keystrokes:i}){if(!this.keystrokeInfos.has(e))throw new _("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:e,keystrokes:i});let o=this.keystrokeInfos.get(e);if(!o.groups.has(t))throw new _("accessibility-unknown-keystroke-info-group",this._editor,{groupId:t,categoryId:e,keystrokes:i});o.groups.get(t).keystrokes.push(...i)}},cm=(()=>{class n extends Ze(){accessibility;commands;config;conversion;data;editing;locale;model;plugins;keystrokes;t;static defaultConfig;static builtinPlugins;_context;_readOnlyLocks;constructor(t={}){if(super(),"sanitizeHtml"in t)throw new _("editor-config-sanitizehtml-not-supported");let i=this.constructor,f=i.defaultConfig||{},{translations:o}=f,r=Bt(f,["translations"]),p=t,{translations:s=o}=p,a=Bt(p,["translations"]),l=t.language||r.language;this._context=t.context||new dz({language:l,translations:s}),this._context._addEditor(this,!t.context);let c=Array.from(i.builtinPlugins||[]);this.config=new gg(a,r),this.config.define("plugins",c),this.config.define(this._context._getEditorConfig()),this.plugins=new Vy(this,c,this._context.plugins),this.locale=this._context.locale,this.t=this.locale.t,this._readOnlyLocks=new Set,this.commands=new G2,this.set("state","initializing"),this.once("ready",()=>this.state="ready",{priority:"high"}),this.once("destroy",()=>this.state="destroyed",{priority:"high"}),this.model=new Xa,this.on("change:isReadOnly",()=>{this.model.document.isReadOnly=this.isReadOnly});let d=new im;this.data=new Py(this.model,d),this.editing=new Iy(this.model,d),this.editing.view.document.bind("isReadOnly").to(this),this.conversion=new Ry([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher),this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher),this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher),this.keystrokes=new K2(this),this.keystrokes.listenTo(this.editing.view.document),this.accessibility=new Q2(this)}get isReadOnly(){return this._readOnlyLocks.size>0}set isReadOnly(t){throw new _("editor-isreadonly-has-no-setter")}enableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),this._readOnlyLocks.size===1&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}disableReadOnlyMode(t){if(typeof t!="string"&&typeof t!="symbol")throw new _("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),this._readOnlyLocks.size===0&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}setData(t){this.data.set(t)}getData(t){return this.data.get(t)}initPlugins(){let t=this.config,i=t.get("plugins"),o=t.get("removePlugins")||[],r=t.get("extraPlugins")||[],s=t.get("substitutePlugins")||[];return this.plugins.init(i.concat(r),o,s)}destroy(){let t=Promise.resolve();return this.state=="initializing"&&(t=new Promise(i=>this.once("ready",i))),t.then(()=>{this.fire("destroy"),this.stopListening(),this.commands.destroy()}).then(()=>this.plugins.destroy()).then(()=>{this.model.destroy(),this.data.destroy(),this.editing.destroy(),this.keystrokes.destroy()}).then(()=>this._context._removeEditor(this))}execute(t,...i){try{return this.commands.execute(t,...i)}catch(o){_.rethrowUnexpectedError(o,this)}}focus(){this.editing.view.focus()}static create(...t){throw new Error("This is an abstract method.")}static Context=dz;static EditorWatchdog=Wg;static ContextWatchdog=Fy}return n})();function By(n){if(!Fi(n.updateSourceElement))throw new _("attachtoform-missing-elementapi-interface",n);let e=n.sourceElement;if(fhe(e)&&e.form){let t,i=e.form,o=()=>n.updateSourceElement();Fi(i.submit)&&(t=i.submit,i.submit=()=>{o(),t.apply(i)}),i.addEventListener("submit",o),n.on("destroy",()=>{i.removeEventListener("submit",o),t&&(i.submit=t)})}}function fhe(n){return!!n&&n.tagName.toLowerCase()==="textarea"}function sd(n){class e extends n{sourceElement;updateSourceElement(i){if(!this.sourceElement)throw new _("editor-missing-sourceelement",this);let o=this.config.get("updateSourceElementOnDestroy"),r=this.sourceElement instanceof HTMLTextAreaElement;if(!o&&!r){by(this.sourceElement,"");return}let s=typeof i=="string"?i:this.data.get();by(this.sourceElement,s)}}return e}sd.updateSourceElement=sd(Object).prototype.updateSourceElement;var nl=class extends Gg{_actions;static get pluginName(){return"PendingActions"}static get isOfficialPlugin(){return!0}init(){this.set("hasAny",!1),this._actions=new ft({idProperty:"_id"}),this._actions.delegate("add","remove").to(this)}add(e){if(typeof e!="string")throw new _("pendingactions-add-invalid-message",this);let t=new(Ze());return t.set("message",e),this._actions.add(t),this.hasAny=!0,t}remove(e){this._actions.remove(e),this.hasAny=!!this._actions.length}get first(){return this._actions.get(0)}[Symbol.iterator](){return this._actions[Symbol.iterator]()}},phe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',ghe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 16h9a1 1 0 0 1 0 2H2a1 1 0 0 1 0-2z"/><path d="M17 1a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14zm0 1.5H3a.5.5 0 0 0-.492.41L2.5 3v9a.5.5 0 0 0 .41.492L3 12.5h14a.5.5 0 0 0 .492-.41L17.5 12V3a.5.5 0 0 0-.41-.492L17 2.5z" fill-opacity=".6"/></svg>',bhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>',whe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.333 2 .19 2.263a5.899 5.899 0 0 1 1.458.604L14.714 3.4 16.6 5.286l-1.467 1.733c.263.452.468.942.605 1.46L18 8.666v2.666l-2.263.19a5.899 5.899 0 0 1-.604 1.458l1.467 1.733-1.886 1.886-1.733-1.467a5.899 5.899 0 0 1-1.46.605L11.334 18H8.667l-.19-2.263a5.899 5.899 0 0 1-1.458-.604L5.286 16.6 3.4 14.714l1.467-1.733a5.899 5.899 0 0 1-.604-1.458L2 11.333V8.667l2.262-.189a5.899 5.899 0 0 1 .605-1.459L3.4 5.286 5.286 3.4l1.733 1.467a5.899 5.899 0 0 1 1.46-.605L8.666 2h2.666zM10 6.267a3.733 3.733 0 1 0 0 7.466 3.733 3.733 0 0 0 0-7.466z"/></svg>',khe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.209 18.717A8.5 8.5 0 1 1 18.686 9.6h-.008l.002.12a3 3 0 0 1-2.866 2.997h-.268l-.046-.002v.002h-4.791a2 2 0 1 0 0 4 1 1 0 1 1-.128 1.992 8.665 8.665 0 0 1-.372.008Zm-3.918-7.01a1.25 1.25 0 1 0-2.415-.648 1.25 1.25 0 0 0 2.415.647ZM5.723 8.18a1.25 1.25 0 1 0 .647-2.414 1.25 1.25 0 0 0-.647 2.414ZM9.76 6.155a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Zm4.028 1.759a1.25 1.25 0 1 0 .647-2.415 1.25 1.25 0 0 0-.647 2.415Z"/></svg>',vhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m8.636 9.531-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>',yhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11 1a9 9 0 1 1-8.027 13.075l1.128-1.129A7.502 7.502 0 0 0 18.5 10a7.5 7.5 0 1 0-14.962.759l-.745-.746-.76.76A9 9 0 0 1 11 1z"/><path d="M.475 8.17a.75.75 0 0 1 .978.047l.075.082 1.284 1.643 1.681-1.284a.75.75 0 0 1 .978.057l.073.083a.75.75 0 0 1-.057.978l-.083.073-2.27 1.737a.75.75 0 0 1-.973-.052l-.074-.082-1.741-2.23a.75.75 0 0 1 .13-1.052z"/><path d="M11.5 5v4.999l3.196 3.196-1.06 1.06L10.1 10.72l-.1-.113V5z"/></svg>',_he='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22 2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>',Che='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.035 1C2.446 1 2 1.54 2 2.098V10.5h1.5v-8h13v8H18V2.098C18 1.539 17.48 1 16.9 1H3.035Zm10.453 2.61a1.885 1.885 0 0 0-1.442.736 1.89 1.89 0 0 0 1.011 2.976 1.903 1.903 0 0 0 2.253-1.114 1.887 1.887 0 0 0-1.822-2.598ZM7.463 8.163a.611.611 0 0 0-.432.154L5.071 10.5h5.119L7.88 8.348a.628.628 0 0 0-.417-.185Zm6.236 1.059a.62.62 0 0 0-.42.164L12.07 10.5h2.969l-.92-1.113a.618.618 0 0 0-.42-.165ZM.91 11.5a.91.91 0 0 0-.91.912v6.877c0 .505.405.91.91.91h18.178a.91.91 0 0 0 .912-.91v-6.877a.908.908 0 0 0-.912-.912H.91ZM3.668 13h1.947l2.135 5.7H5.898l-.28-.946H3.601l-.278.945H1.516L3.668 13Zm4.947 0h1.801v4.3h2.7v1.4h-4.5V13h-.001Zm4.5 0h5.4v1.4h-1.798v4.3h-1.701v-4.3h-1.9V13h-.001Zm-8.517 1.457-.614 2.059h1.262l-.648-2.059Z"/></svg>',Ehe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',She='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>',xhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>',Ahe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.66 9.118a.693.693 0 0 1 .956.032l3.65 3.411 2.422-2.238a.695.695 0 0 1 .945 0L17.5 13.6V2.5h-15v11.1l4.16-4.482ZM17.8 1c.652 0 1.2.47 1.2 1.1v14.362c0 .64-.532 1.038-1.184 1.038H2.184C1.532 17.5 1 17.103 1 16.462V2.1C1 1.47 1.537 1 2.2 1h15.6Zm-5.655 6a2.128 2.128 0 0 1 .157-2.364A2.133 2.133 0 1 1 12.145 7Z"/></svg>',The='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h9.494a2.97 2.97 0 0 1-.414-.287 2.998 2.998 0 0 1-1.055-2.03 3.003 3.003 0 0 1 .693-2.185l.383-.455-.02.018-3.65-3.41a.695.695 0 0 0-.957-.034L1.5 13.6V2.5h15v5.535a2.97 2.97 0 0 1 1.412.932l.088.105V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.146 2.146 0 0 0-2.049 1.992 2.14 2.14 0 0 0 1.28 2.096 2.13 2.13 0 0 0 2.644-3.11 2.134 2.134 0 0 0-1.875-.978Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/><path d="M15.522 19.1a.79.79 0 0 0 .79-.79v-5.373l2.059 2.455a.79.79 0 1 0 1.211-1.015l-3.352-3.995a.79.79 0 0 0-.995-.179.784.784 0 0 0-.299.221l-3.35 3.99a.79.79 0 1 0 1.21 1.017l1.936-2.306v5.185c0 .436.353.79.79.79Z"/></svg>',Ihe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1c-.662 0-1.2.47-1.2 1.1v14.248c0 .64.533 1.152 1.185 1.152h6.623v-7.236L6.617 9.15a.694.694 0 0 0-.957-.033L1.602 13.55V2.553l14.798.003V9.7H18V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.723 2.805a2.094 2.094 0 0 0-1.621.832 2.127 2.127 0 0 0 1.136 3.357 2.13 2.13 0 0 0 2.611-1.506 2.133 2.133 0 0 0-.76-2.244 2.13 2.13 0 0 0-1.366-.44Z"/><path clip-rule="evenodd" d="M19.898 12.369v6.187a.844.844 0 0 1-.844.844h-8.719a.844.844 0 0 1-.843-.844v-7.312a.844.844 0 0 1 .843-.844h2.531a.843.843 0 0 1 .597.248l.838.852h4.75c.223 0 .441.114.6.272a.844.844 0 0 1 .247.597Zm-1.52.654-4.377.02-1.1-1.143H11v6h7.4l-.023-4.877Z"/></svg>',Mhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.201 1C.538 1 0 1.47 0 2.1v14.363c0 .64.534 1.037 1.186 1.037h7.029a5.401 5.401 0 0 1 .615-4.338l.762-1.232-2.975-2.78a.696.696 0 0 0-.957-.033L1.5 13.6V2.5h15v6.023c.449.131.887.32 1.307.573l.058.033c.046.028.09.057.135.086V2.1c0-.63-.547-1.1-1.2-1.1H1.202Zm11.713 2.803a2.15 2.15 0 0 0-1.611.834 2.118 2.118 0 0 0-.438 1.158 2.14 2.14 0 0 0 1.277 2.096 2.132 2.132 0 0 0 2.645-3.11 2.13 2.13 0 0 0-1.873-.978Z"/><path d="M16.63 10.294a3.003 3.003 0 0 0-4.142.887l-.117.177a.647.647 0 0 0-.096.492.664.664 0 0 0 .278.418.7.7 0 0 0 .944-.234 1.741 1.741 0 0 1 2.478-.463 1.869 1.869 0 0 1 .476 2.55.637.637 0 0 0-.071.5.646.646 0 0 0 .309.396.627.627 0 0 0 .869-.19l.027-.041a3.226 3.226 0 0 0-.956-4.492Zm-6.061 3.78-.044.066a3.228 3.228 0 0 0 .82 4.403 3.005 3.005 0 0 0 4.275-.798l.13-.197a.626.626 0 0 0 .092-.475.638.638 0 0 0-.268-.402.713.713 0 0 0-.99.26l-.018.029a1.741 1.741 0 0 1-2.477.461 1.87 1.87 0 0 1-.475-2.55l.029-.047a.647.647 0 0 0 .086-.485.66.66 0 0 0-.275-.408l-.04-.027a.609.609 0 0 0-.845.17Z"/><path d="M15.312 13.925c.24-.36.154-.838-.19-1.067-.346-.23-.82-.124-1.059.236l-1.268 1.907c-.239.36-.153.838.192 1.067.345.23.818.123 1.057-.236l1.268-1.907Z"/></svg>',Dhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.239 13.938-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>',Phe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>',Rhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m10.261 7.062 2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>',Nhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Ohe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>',Lhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>',Fhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',Vhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',Bhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M15.003 7v5.5a1 1 0 0 1-1 1H5.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H6.5V12h6.997V7.5z"/></svg>',zhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',Hhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2z"/><path d="M18 7v5.5a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1zm-1.505.5H3.504V12h12.991V7.5z"/></svg>',Uhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',jhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm11.5 9H18v1.5h-4.5zm0-3H18v1.5h-4.5zm0-3H18v1.5h-4.5zM2 15h16v1.5H2z"/><path d="M12.003 7v5.5a1 1 0 0 1-1 1H2.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H3.5V12h6.997V7.5z"/></svg>',$he='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path opacity=".5" d="M2 3h16v1.5H2zm0 12h16v1.5H2zm0-9h5v1.5H2zm0 3h5v1.5H2zm0 3h5v1.5H2z"/><path d="M18.003 7v5.5a1 1 0 0 1-1 1H8.996a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h8.007a1 1 0 0 1 1 1zm-1.506.5H9.5V12h6.997V7.5z"/></svg>',Whe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M2.5 17v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zm2 0v1h-1v-1h1zM1 15.5v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm-19-2v1H0v-1h1zm19 0v1h-1v-1h1zm0-2v1h-1v-1h1zm-19 0v1H0v-1h1zM14.5 2v1h-1V2h1zm2 0v1h-1V2h1zm2 0v1h-1V2h1zm-8 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm-2 0v1h-1V2h1zm8 0v1h-1V2h1zm-10 0v1h-1V2h1z"/><path d="M18.095 2H1.905C.853 2 0 2.895 0 4v12c0 1.105.853 2 1.905 2h16.19C19.147 18 20 17.105 20 16V4c0-1.105-.853-2-1.905-2zm0 1.5c.263 0 .476.224.476.5v12c0 .276-.213.5-.476.5H1.905a.489.489 0 0 1-.476-.5V4c0-.276.213-.5.476-.5h16.19z"/></svg>',qhe='<svg xmlns="http://www.w3.org/2000/svg" xmlns:v="https://vecta.io/nano" viewBox="0 0 20 20"><path d="M.95 1.43a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h.75v6.3H.95a.95.95 0 0 0-.95.95v3.1a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-.65h1.932l1.539-1.5H5v-.95a.95.95 0 0 0-.95-.95H3.2v-6.3h.85A.95.95 0 0 0 5 5.48v-.55h10v.55a.95.95 0 0 0 .95.95h3.1a.95.95 0 0 0 .95-.95v-3.1a.95.95 0 0 0-.95-.95h-3.1a.95.95 0 0 0-.95.95v1.05H5V2.38a.95.95 0 0 0-.95-.95H.95zm.55 3.5v-2h2v2h-2zm0 9.3v2h2v-2h-2zm15-11.3v2h2v-2h-2z"/><path d="M8.139 20.004v-2.388l7.045-7.048 2.391 2.391-7.046 7.046h-2.39zm11.421-9.101a.64.64 0 0 1-.138.206l-1.165 1.168-2.391-2.391 1.167-1.163a.63.63 0 0 1 .206-.138.635.635 0 0 1 .243-.049.63.63 0 0 1 .449.187l1.491 1.488c.059.059.108.129.138.206s.049.16.049.243a.6.6 0 0 1-.049.243z"/></svg>',Ghe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M13 5.5H2a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2ZM13 7a.5.5 0 0 1 .5.5v8a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-8A.5.5 0 0 1 2 7h11Z"/></svg>',Khe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M7 9.5H2a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h5a2 2 0 0 0 2-2v-4a2 2 0 0 0-2-2ZM7 11a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-4A.5.5 0 0 1 2 11h5Z"/></svg>',Qhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 16.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1ZM1 15v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 13v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 11v1H0v-1h1Zm19 0v1h-1v-1h1ZM1 9v1H0V9h1Zm19 0v1h-1V9h1ZM1 7v1H0V7h1Zm19 0v1h-1V7h1ZM1 5v1H0V5h1Zm19 0v1h-1V5h1Zm0-2v1h-1V3h1ZM1 3v1H0V3h1Zm13.5-1.5v1h-1v-1h1Zm2 0v1h-1v-1h1Zm2 0v1h-1v-1h1Zm-8 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm-2 0v1h-1v-1h1Zm8 0v1h-1v-1h1Zm-10 0v1h-1v-1h1Z"/><path d="M10 7.5H2a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2ZM10 9a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-6A.5.5 0 0 1 2 9h8Z"/></svg>',Yhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m7.3 17.37-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506 13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5 9.375 17H19v1.5H8z"/></svg>',Zhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',Jhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>',Xhe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',eme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>',tme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',nme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',ime='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',ome='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',rme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',sme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',ame='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>',lme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>',cme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',dme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>',ume='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>',hme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z"/><path d="M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z"/></svg>',mme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 9v10h-2v-8h-2V9h4zM4 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H10a1 1 0 0 1-1-1V11H4v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H3a1 1 0 0 1 1 1v4.5z"/></svg>',fme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm16.076 8.343V18.5h-6.252c.067-.626.27-1.22.61-1.78.338-.561 1.006-1.305 2.005-2.232.804-.749 1.297-1.257 1.479-1.523.245-.368.368-.732.368-1.092 0-.398-.107-.703-.32-.917-.214-.214-.51-.32-.886-.32-.372 0-.669.111-.889.336-.22.224-.347.596-.38 1.117l-1.778-.178c.106-.982.438-1.686.997-2.114.558-.427 1.257-.64 2.095-.64.918 0 1.64.247 2.164.742.525.495.787 1.11.787 1.847 0 .419-.075.818-.225 1.197-.15.378-.388.775-.714 1.19-.216.275-.605.67-1.168 1.187-.563.516-.92.859-1.07 1.028a3.11 3.11 0 0 0-.365.495h3.542z"/></svg>',pme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V11H3v4.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1H2a1 1 0 0 1 1 1v4.5zm9.989 7.53 1.726-.209c.055.44.203.777.445 1.01.24.232.533.349.876.349.368 0 .678-.14.93-.42.251-.279.377-.655.377-1.13 0-.448-.12-.803-.362-1.066a1.153 1.153 0 0 0-.882-.393c-.228 0-.501.044-.819.133l.197-1.453c.482.012.85-.092 1.105-.315.253-.222.38-.517.38-.885 0-.313-.093-.563-.279-.75-.186-.185-.434-.278-.743-.278a1.07 1.07 0 0 0-.78.317c-.216.212-.347.52-.394.927l-1.644-.28c.114-.562.287-1.012.517-1.348.231-.337.553-.601.965-.794a3.24 3.24 0 0 1 1.387-.289c.876 0 1.579.28 2.108.838.436.457.653.973.653 1.549 0 .817-.446 1.468-1.339 1.955.533.114.96.37 1.28.768.319.398.478.878.478 1.441 0 .817-.298 1.513-.895 2.088-.596.576-1.339.864-2.228.864-.842 0-1.54-.243-2.094-.727-.555-.485-.876-1.118-.965-1.901z"/></svg>',gme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm13.55 10v-1.873h-3.81v-1.561l4.037-5.91h1.498v5.904h1.156v1.567h-1.156V18.5H17.05zm0-3.44v-3.18l-2.14 3.18h2.14z"/></svg>',bme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm9.578 7.607 1.777-.184c.05.402.201.72.45.955a1.223 1.223 0 0 0 1.81-.101c.258-.303.387-.759.387-1.368 0-.572-.128-1-.384-1.286-.256-.285-.59-.428-1-.428-.512 0-.971.226-1.377.679l-1.448-.21.915-4.843h4.716v1.67H15.56l-.28 1.58a2.697 2.697 0 0 1 1.219-.298 2.68 2.68 0 0 1 2.012.863c.55.576.825 1.323.825 2.241a3.36 3.36 0 0 1-.666 2.05c-.605.821-1.445 1.232-2.52 1.232-.86 0-1.56-.23-2.101-.692-.542-.461-.866-1.081-.971-1.86z"/></svg>',wme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3.5 8.5h5V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v11.5a1 1 0 0 1-1 1h-.5a1 1 0 0 1-1-1V11h-5v4.5a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h.5a1 1 0 0 1 1 1v4.5zm15.595 2.973-1.726.19c-.043-.355-.153-.617-.33-.787-.178-.169-.409-.253-.692-.253-.377 0-.695.169-.956.507-.26.339-.424 1.043-.492 2.114.445-.525.997-.787 1.657-.787.745 0 1.383.284 1.914.85.531.568.797 1.3.797 2.197 0 .952-.28 1.716-.838 2.291-.559.576-1.276.864-2.152.864-.94 0-1.712-.365-2.317-1.095-.605-.73-.908-1.927-.908-3.59 0-1.705.316-2.935.946-3.688.63-.753 1.45-1.13 2.457-1.13.706 0 1.291.198 1.755.594.463.395.758.97.885 1.723zm-4.043 3.891c0 .58.133 1.028.4 1.343.266.315.57.473.914.473.33 0 .605-.13.825-.388.22-.258.33-.68.33-1.27 0-.604-.118-1.047-.355-1.329a1.115 1.115 0 0 0-.89-.422c-.342 0-.632.134-.869.403s-.355.666-.355 1.19z"/></svg>',kme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>',vme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z"/></svg>',yme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>',_me='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>',Cme='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 5.5v3h4v-3H3Zm0 4v3h4v-3H3Zm0 4v3h4v-3H3Zm5 3h4v-3H8v3Zm5 0h4v-3h-4v3Zm4-4v-3h-4v3h4Zm0-4v-3h-4v3h4Zm1.5 8A1.5 1.5 0 0 1 17 18H3a1.5 1.5 0 0 1-1.5-1.5V3c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13.5Zm-6.5-4v-3H8v3h4Zm0-4v-3H8v3h4Z"/></svg>',ee={bold:tme,cancel:phe,caption:ghe,check:bhe,cog:whe,colorPalette:khe,eraser:vhe,history:yhe,image:Ahe,imageUpload:The,imageAssetManager:Ihe,imageUrl:Mhe,lowVision:_he,textAlternative:Che,loupe:Ehe,previousArrow:She,nextArrow:xhe,importExport:rme,paragraph:nme,plus:ime,text:ome,alignBottom:Dhe,alignMiddle:Phe,alignTop:Rhe,alignLeft:Nhe,alignCenter:Ohe,alignRight:Lhe,alignJustify:Fhe,objectLeft:jhe,objectCenter:Bhe,objectRight:$he,objectFullWidth:Hhe,objectInline:Uhe,objectBlockLeft:Vhe,objectBlockRight:zhe,objectSizeCustom:qhe,objectSizeFull:Whe,objectSizeLarge:Ghe,objectSizeSmall:Khe,objectSizeMedium:Qhe,pencil:Yhe,pilcrow:Zhe,quote:Jhe,threeVerticalDots:Xhe,dragIndicator:eme,redo:sme,undo:ame,bulletedList:lme,numberedList:cme,todoList:dme,codeBlock:ume,browseFiles:hme,heading1:mme,heading2:fme,heading3:pme,heading4:gme,heading5:bme,heading6:wme,horizontalLine:kme,html:vme,indent:yme,outdent:_me,table:Cme};var Eme=C1(Z2(),1);var hGe=C1(wz(),1);var Sn=class extends ft{_parentElement;constructor(e=[]){super(e,{idProperty:"viewUid"}),this.on("add",(t,i,o)=>{this._renderViewIntoCollectionParent(i,o)}),this.on("remove",(t,i)=>{i.element&&this._parentElement&&i.element.remove()}),this._parentElement=null}destroy(){this.map(e=>e.destroy())}setParent(e){this._parentElement=e;for(let t of this)this._renderViewIntoCollectionParent(t)}delegate(...e){if(!e.length||!Ome(e))throw new _("ui-viewcollection-delegate-wrong-events",this);return{to:t=>{for(let i of this)for(let o of e)i.delegate(o).to(t);this.on("add",(i,o)=>{for(let r of e)o.delegate(r).to(t)}),this.on("remove",(i,o)=>{for(let r of e)o.stopDelegating(r,t)})}}}_renderViewIntoCollectionParent(e,t){e.isRendered||e.render(),e.element&&this._parentElement&&this._parentElement.insertBefore(e.element,this._parentElement.children[t])}remove(e){return super.remove(e)}};function Ome(n){return n.every(e=>typeof e=="string")}var Lme="http://www.w3.org/1999/xhtml",Ln=class extends tt(){ns;tag;text;attributes;children;eventListeners;_isRendered;_revertData;constructor(e){super(),Object.assign(this,vz(kz(e))),this._isRendered=!1,this._revertData=null}render(){let e=this._renderNode({intoFragment:!0});return this._isRendered=!0,e}apply(e){return this._revertData=Cz(),this._renderNode({node:e,intoFragment:!1,isApplying:!0,revertData:this._revertData}),e}revert(e){if(!this._revertData)throw new _("ui-template-revert-not-applied",[this,e]);this._revertTemplateFromNode(e,this._revertData)}*getViews(){function*e(t){if(t.children)for(let i of t.children)qy(i)?yield i:PI(i)&&(yield*it(e(i)))}yield*it(e(this))}static bind(e,t){return{to(i,o){return new rI({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:o})},if(i,o,r){return new Wy({observable:e,emitter:t,attribute:i,valueIfTrue:o,callback:r})}}}static extend(e,t){if(e._isRendered)throw new _("template-extend-render",[this,e]);Hz(e,vz(kz(t)))}_renderNode(e){let t;if(e.node?t=this.tag&&this.text:t=this.tag?this.text:!this.text,t)throw new _("ui-template-wrong-syntax",this);return this.text?this._renderText(e):this._renderElement(e)}_renderElement(e){let t=e.node;return t||(t=e.node=document.createElementNS(this.ns||Lme,this.tag)),this._renderAttributes(e),this._renderElementChildren(e),this._setUpListeners(e),t}_renderText(e){let t=e.node;return t?e.revertData.text=t.textContent:t=e.node=document.createTextNode(""),jy(this.text)?this._bindToObservable({schema:this.text,updater:Vme(t),data:e}):t.textContent=this.text.join(""),t}_renderAttributes(e){if(!this.attributes)return;let t=e.node,i=e.revertData;for(let o in this.attributes){let r=t.getAttribute(o),s=this.attributes[o];i&&(i.attributes[o]=r);let a=_z(s)?s[0].ns:null;if(jy(s)){let l=_z(s)?s[0].value:s;i&&Ez(o)&&l.unshift(r),this._bindToObservable({schema:l,updater:Bme(t,o,a),data:e})}else if(o=="style"&&typeof s[0]!="string")this._renderStyleAttribute(s[0],e);else{i&&r&&Ez(o)&&s.unshift(r);let l=s.map(c=>c&&(c.value||c)).reduce((c,d)=>c.concat(d),[]).reduce(zz,"");fm(l)||t.setAttributeNS(a,o,l)}}}_renderStyleAttribute(e,t){let i=t.node;for(let o in e){let r=e[o];jy(r)?this._bindToObservable({schema:[r],updater:zme(i,o),data:t}):i.style[o]=r}}_renderElementChildren(e){let t=e.node,i=e.intoFragment?document.createDocumentFragment():t,o=e.isApplying,r=0;for(let s of this.children)if(RI(s)){if(!o){s.setParent(t);for(let a of s)i.appendChild(a.element)}}else if(qy(s))o||(s.isRendered||s.render(),i.appendChild(s.element));else if(yr(s))i.appendChild(s);else if(o){let a=e.revertData,l=Cz();a.children.push(l),s._renderNode({intoFragment:!1,node:i.childNodes[r++],isApplying:!0,revertData:l})}else i.appendChild(s.render());e.intoFragment&&t.appendChild(i)}_setUpListeners(e){if(this.eventListeners)for(let t in this.eventListeners){let i=this.eventListeners[t].map(o=>{let[r,s]=t.split("@");return o.activateDomEventListener(r,s,e)});e.revertData&&e.revertData.bindings.push(i)}}_bindToObservable({schema:e,updater:t,data:i}){let o=i.revertData;Vz(e,t,i);let r=e.filter(s=>!fm(s)).filter(s=>s.observable).map(s=>s.activateAttributeListener(e,t,i));o&&o.bindings.push(r)}_revertTemplateFromNode(e,t){for(let o of t.bindings)for(let r of o)r();if(t.text){e.textContent=t.text;return}let i=e;for(let o in t.attributes){let r=t.attributes[o];r===null?i.removeAttribute(o):i.setAttribute(o,r)}for(let o=0;o<t.children.length;++o)this._revertTemplateFromNode(i.childNodes[o],t.children[o])}},ad=class{attribute;observable;emitter;callback;constructor(e){this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}getValue(e){let t=this.observable[this.attribute];return this.callback?this.callback(t,e):t}activateAttributeListener(e,t,i){let o=()=>Vz(e,t,i);return this.emitter.listenTo(this.observable,`change:${this.attribute}`,o),()=>{this.emitter.stopListening(this.observable,`change:${this.attribute}`,o)}}},rI=class extends ad{eventNameOrFunction;constructor(e){super(e),this.eventNameOrFunction=e.eventNameOrFunction}activateDomEventListener(e,t,i){let o=(r,s)=>{(!t||s.target.matches(t))&&(typeof this.eventNameOrFunction=="function"?this.eventNameOrFunction(s):this.observable.fire(this.eventNameOrFunction,s))};return this.emitter.listenTo(i.node,e,o),()=>{this.emitter.stopListening(i.node,e,o)}}},Wy=class extends ad{valueIfTrue;constructor(e){super(e),this.valueIfTrue=e.valueIfTrue}getValue(e){let t=super.getValue(e);return fm(t)?!1:this.valueIfTrue||!0}};function jy(n){return n?(n.value&&(n=n.value),Array.isArray(n)?n.some(jy):n instanceof ad):!1}function Fme(n,e){return n.map(t=>t instanceof ad?t.getValue(e):t)}function Vz(n,e,{node:t}){let i=Fme(n,t),o;n.length==1&&n[0]instanceof Wy?o=i[0]:o=i.reduce(zz,""),fm(o)?e.remove():e.set(o)}function Vme(n){return{set(e){n.textContent=e},remove(){n.textContent=""}}}function Bme(n,e,t){return{set(i){n.setAttributeNS(t,e,i)},remove(){n.removeAttributeNS(t,e)}}}function zme(n,e){return{set(t){n.style[e]=t},remove(){n.style[e]=null}}}function kz(n){return jc(n,t=>{if(t&&(t instanceof ad||PI(t)||qy(t)||RI(t)))return t})}function vz(n){if(typeof n=="string"?n=jme(n):n.text&&$me(n),n.on&&(n.eventListeners=Ume(n.on),delete n.on),!n.text){n.attributes&&Hme(n.attributes);let e=[];if(n.children)if(RI(n.children))e.push(n.children);else for(let t of n.children)PI(t)||qy(t)||yr(t)?e.push(t):e.push(new Ln(t));n.children=e}return n}function Hme(n){for(let e in n)n[e].value&&(n[e].value=$e(n[e].value)),Bz(n,e)}function Ume(n){for(let e in n)Bz(n,e);return n}function jme(n){return{text:[n]}}function $me(n){n.text=$e(n.text)}function Bz(n,e){n[e]=$e(n[e])}function zz(n,e){return fm(e)?n:fm(n)?e:`${n} ${e}`}function yz(n,e){for(let t in e)n[t]?n[t].push(...e[t]):n[t]=e[t]}function Hz(n,e){if(e.attributes&&(n.attributes||(n.attributes={}),yz(n.attributes,e.attributes)),e.eventListeners&&(n.eventListeners||(n.eventListeners={}),yz(n.eventListeners,e.eventListeners)),e.text&&n.text.push(...e.text),e.children&&e.children.length){if(n.children.length!=e.children.length)throw new _("ui-template-extend-children-mismatch",n);let t=0;for(let i of e.children)Hz(n.children[t++],i)}}function fm(n){return!n&&n!==0}function qy(n){return n instanceof Y}function PI(n){return n instanceof Ln}function RI(n){return n instanceof Sn}function _z(n){return De(n[0])&&n[0].ns}function Cz(){return{children:[],bindings:[],attributes:{}}}function Ez(n){return n=="class"||n=="style"}var Y=class extends mn(Ze()){element;isRendered;locale;t;template;_viewCollections;_unboundChildren;_bindTemplate;constructor(e){super(),this.element=null,this.isRendered=!1,this.locale=e,this.t=e&&e.t,this._viewCollections=new ft,this._unboundChildren=this.createCollection(),this._viewCollections.on("add",(t,i)=>{i.locale=e,i.t=e&&e.t}),this.decorate("render")}get bindTemplate(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=Ln.bind(this,this)}createCollection(e){let t=new Sn(e);return this._viewCollections.add(t),t}registerChild(e){ei(e)||(e=[e]);for(let t of e)this._unboundChildren.add(t)}deregisterChild(e){ei(e)||(e=[e]);for(let t of e)this._unboundChildren.remove(t)}setTemplate(e){this.template=new Ln(e)}extendTemplate(e){Ln.extend(this.template,e)}render(){if(this.isRendered)throw new _("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}destroy(){this.stopListening(),this._viewCollections.map(e=>e.destroy()),this.template&&this.template._revertData&&this.template.revert(this.element)}};function cd({emitter:n,activator:e,callback:t,contextElements:i,listenerOptions:o}){n.listenTo(document,"mousedown",(r,s)=>{if(!e())return;let a=typeof s.composedPath=="function"?s.composedPath():[],l=typeof i=="function"?i():i;for(let c of l)if(c.contains(s.target)||a.includes(c))return;t()},o)}function bm(n){class e extends n{disableCssTransitions(){this._isCssTransitionsDisabled=!0}enableCssTransitions(){this._isCssTransitionsDisabled=!1}constructor(...i){super(...i),this.set("_isCssTransitionsDisabled",!1),this.initializeCssTransitionDisablerMixin()}initializeCssTransitionDisablerMixin(){this.extendTemplate({attributes:{class:[this.bindTemplate.if("_isCssTransitionsDisabled","ck-transitions-disabled")]}})}}return e}function dd({view:n}){n.listenTo(n.element,"submit",(e,t)=>{t.preventDefault(),n.fire("submit")},{useCapture:!0})}var Ir=(()=>{class n extends Y{static presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];constructor(){super();let t=this.bindTemplate;this.set("content",""),this.set("viewBox","0 0 20 20"),this.set("fillColor",""),this.set("isColorInherited",!0),this.set("isVisible",!0),this.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",t.if("isVisible","ck-hidden",i=>!i),"ck-reset_all-excluded",t.if("isColorInherited","ck-icon_inherit-color")],viewBox:t.to("viewBox")}})}render(){super.render(),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",()=>{this._updateXMLContent(),this._colorFillPaths()}),this.on("change:fillColor",()=>{this._colorFillPaths()})}_updateXMLContent(){if(this.content){let i=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),o=i.getAttribute("viewBox");o&&(this.viewBox=o);for(let{name:r,value:s}of Array.from(i.attributes))n.presentationalAttributeNames.includes(r)&&this.element.setAttribute(r,s);for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;i.childNodes.length>0;)this.element.appendChild(i.childNodes[0])}}_colorFillPaths(){this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach(t=>{t.style.fill=this.fillColor})}}return n})(),Gy=class extends Y{constructor(){super(),this.set({style:void 0,text:void 0,id:void 0});let e=this.bindTemplate;this.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:e.to("style"),id:e.to("id")},children:[{text:e.to("text")}]})}},oe=class extends Y{children;labelView;iconView;keystrokeView;_focusDelayed=null;constructor(e,t=new Gy){super(e);let i=this.bindTemplate,o=an();this.set("_ariaPressed",!1),this.set("_ariaChecked",!1),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",`ck-editor__aria-label_${o}`),this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isVisible",!0),this.set("isToggleable",!1),this.set("keystroke",void 0),this.set("label",void 0),this.set("role",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.set("withKeystroke",!1),this.children=this.createCollection(),this.labelView=this._setupLabelView(t),this.iconView=new Ir,this.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),this.keystrokeView=this._createKeystrokeView(),this.bind("_tooltipString").to(this,"tooltip",this,"label",this,"keystroke",this._getTooltipString.bind(this));let r={tag:"button",attributes:{class:["ck","ck-button",i.to("class"),i.if("isEnabled","ck-disabled",s=>!s),i.if("isVisible","ck-hidden",s=>!s),i.to("isOn",s=>s?"ck-on":"ck-off"),i.if("withText","ck-button_with-text"),i.if("withKeystroke","ck-button_with-keystroke")],role:i.to("role"),type:i.to("type",s=>s||"button"),tabindex:i.to("tabindex"),"aria-checked":i.to("_ariaChecked"),"aria-pressed":i.to("_ariaPressed"),"aria-label":i.to("ariaLabel"),"aria-labelledby":i.to("ariaLabelledBy"),"aria-disabled":i.if("isEnabled",!0,s=>!s),"data-cke-tooltip-text":i.to("_tooltipString"),"data-cke-tooltip-position":i.to("tooltipPosition")},children:this.children,on:{click:i.to(s=>{this.isEnabled?this.fire("execute"):s.preventDefault()})}};this.bind("_ariaPressed").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!a||Sz(l)?!1:String(!!s)),this.bind("_ariaChecked").to(this,"isOn",this,"isToggleable",this,"role",(s,a,l)=>!a||!Sz(l)?!1:String(!!s)),ie.isSafari&&(this._focusDelayed||(this._focusDelayed=Yh(()=>this.focus(),0)),r.on.mousedown=i.to(()=>{this._focusDelayed()}),r.on.mouseup=i.to(()=>{this._focusDelayed.cancel()})),this.setTemplate(r)}render(){super.render(),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}focus(){this.element.focus()}destroy(){this._focusDelayed&&this._focusDelayed.cancel(),super.destroy()}_setupLabelView(e){return e.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),e}_createKeystrokeView(){let e=new Y;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",t=>vg(t))}]}),e}_getTooltipString(e,t,i){return e?typeof e=="string"?e:(i&&(i=vg(i)),e instanceof Function?e(t,i):`${t}${i?` (${i})`:""}`):""}};function Sz(n){switch(n){case"radio":case"checkbox":case"option":case"switch":case"menuitemcheckbox":case"menuitemradio":return!0;default:return!1}}var Qg=class extends Y{children;iconView;constructor(e,t={}){super(e);let i=this.bindTemplate;this.set("label",t.label||""),this.set("class",t.class||null),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",i.to("class")]},children:this.children}),t.icon&&(this.iconView=new Ir,this.iconView.content=t.icon,this.children.add(this.iconView));let o=new Y(e);o.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:i.to("label")}]}),this.children.add(o)}},Vn=class extends tt(){focusables;focusTracker;keystrokeHandler;actions;constructor(e){if(super(),this.focusables=e.focusables,this.focusTracker=e.focusTracker,this.keystrokeHandler=e.keystrokeHandler,this.actions=e.actions,e.actions&&e.keystrokeHandler)for(let t in e.actions){let i=e.actions[t];typeof i=="string"&&(i=[i]);for(let o of i)e.keystrokeHandler.set(o,(r,s)=>{this[t](),s()},e.keystrokeHandlerOptions)}this.on("forwardCycle",()=>this.focusFirst(),{priority:"low"}),this.on("backwardCycle",()=>this.focusLast(),{priority:"low"})}get first(){return this.focusables.find(eI)||null}get last(){return this.focusables.filter(eI).slice(-1)[0]||null}get next(){return this._getDomFocusableItem(1)}get previous(){return this._getDomFocusableItem(-1)}get current(){let e=null;return this.focusTracker.focusedElement===null?null:(this.focusables.find((t,i)=>{let o=t.element===this.focusTracker.focusedElement;return o&&(e=i),o}),e)}focusFirst(){this._focus(this.first,1)}focusLast(){this._focus(this.last,-1)}focusNext(){let e=this.next;if(e&&this.focusables.getIndex(e)===this.current){this.fire("forwardCycle");return}e===this.first?this.fire("forwardCycle"):this._focus(e,1)}focusPrevious(){let e=this.previous;if(e&&this.focusables.getIndex(e)===this.current){this.fire("backwardCycle");return}e===this.last?this.fire("backwardCycle"):this._focus(e,-1)}chain(e){let t=()=>this.current===null?null:this.focusables.get(this.current);this.listenTo(e,"forwardCycle",i=>{let o=t();this.focusNext(),o!==t()&&i.stop()},{priority:"low"}),this.listenTo(e,"backwardCycle",i=>{let o=t();this.focusPrevious(),o!==t()&&i.stop()},{priority:"low"})}unchain(e){this.stopListening(e)}_focus(e,t){e&&this.focusTracker.focusedElement!==e.element&&e.focus(t)}_getDomFocusableItem(e){let t=this.focusables.length;if(!t)return null;let i=this.current;if(i===null)return this[e===1?"first":"last"];let o=this.focusables.get(i),r=(i+t+e)%t;do{let s=this.focusables.get(r);if(eI(s)){o=s;break}r=(r+t+e)%t}while(r!==i);return o}};function eI(n){return Yg(n)&&Vo(n.element)}function Yg(n){return"focus"in n&&typeof n.focus=="function"}function Wme(n){return Yg(n)&&"focusCycler"in n&&n.focusCycler instanceof Vn}function qme(n){class e extends n{_onDragBound=this._onDrag.bind(this);_onDragEndBound=this._onDragEnd.bind(this);_lastDraggingCoordinates={x:0,y:0};constructor(...i){super(...i),this.on("render",()=>{this._attachListeners()}),this.set("isDragging",!1)}_attachListeners(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}_attachDragListeners(){this.listenTo(U.document,"mouseup",this._onDragEndBound),this.listenTo(U.document,"touchend",this._onDragEndBound),this.listenTo(U.document,"mousemove",this._onDragBound),this.listenTo(U.document,"touchmove",this._onDragBound)}_detachDragListeners(){this.stopListening(U.document,"mouseup",this._onDragEndBound),this.stopListening(U.document,"touchend",this._onDragEndBound),this.stopListening(U.document,"mousemove",this._onDragBound),this.stopListening(U.document,"touchmove",this._onDragBound)}_onDragStart(i,o){if(!this._isHandleElementPressed(o))return;this._attachDragListeners();let r=0,s=0;o instanceof MouseEvent?(r=o.clientX,s=o.clientY):(r=o.touches[0].clientX,s=o.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:s},this.isDragging=!0}_onDrag(i,o){if(!this.isDragging){this._detachDragListeners();return}let r=0,s=0;o instanceof MouseEvent?(r=o.clientX,s=o.clientY):(r=o.touches[0].clientX,s=o.touches[0].clientY),o.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(s-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:s}}_onDragEnd(){this._detachDragListeners(),this.isDragging=!1}_isHandleElementPressed(i){return this.dragHandleElement?this.dragHandleElement===i.target||i.target instanceof HTMLElement&&this.dragHandleElement.contains(i.target):!1}}return e}var sI=class extends Y{children;keystrokes;focusCycler;_focusTracker;_focusables;constructor(e){super(e),this.children=this.createCollection(),this.keystrokes=new Ft,this._focusTracker=new Et,this._focusables=new Sn,this.focusCycler=new Vn({focusables:this._focusables,focusTracker:this._focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:this.children})}render(){super.render(),this.keystrokes.listenTo(this.element)}setButtons(e){for(let t of e){let i=new oe(this.locale),o;i.on("execute",()=>t.onExecute()),t.onCreate&&t.onCreate(i);for(o in t)o!="onExecute"&&o!="onCreate"&&i.set(o,t[o]);this.children.add(i)}this._updateFocusCyclableItems()}focus(e){e===-1?this.focusCycler.focusLast():this.focusCycler.focusFirst()}_updateFocusCyclableItems(){Array.from(this.children).forEach(e=>{this._focusables.add(e),this._focusTracker.add(e.element)})}},aI=class extends Y{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:this.children})}reset(){for(;this.children.length;)this.children.remove(0)}},ji={SCREEN_CENTER:"screen-center",EDITOR_CENTER:"editor-center",EDITOR_TOP_SIDE:"editor-top-side",EDITOR_TOP_CENTER:"editor-top-center",EDITOR_BOTTOM_CENTER:"editor-bottom-center",EDITOR_ABOVE_CENTER:"editor-above-center",EDITOR_BELOW_CENTER:"editor-below-center"},xz=Ts("px"),e_=(()=>{class n extends qme(Y){parts;headerView;closeButtonView;actionsView;static defaultOffset=15;contentView;keystrokes;focusTracker;wasMoved=!1;_getCurrentDomRoot;_getViewportOffset;_focusables;_focusCycler;constructor(t,{getCurrentDomRoot:i,getViewportOffset:o}){super(t);let r=this.bindTemplate,s=t.t;this.set("className",""),this.set("ariaLabel",s("Editor dialog")),this.set("isModal",!1),this.set("position",ji.SCREEN_CENTER),this.set("_isVisible",!1),this.set("_isTransparent",!1),this.set("_top",0),this.set("_left",0),this._getCurrentDomRoot=i,this._getViewportOffset=o,this.decorate("moveTo"),this.parts=this.createCollection(),this.keystrokes=new Ft,this.focusTracker=new Et,this._focusables=new Sn,this._focusCycler=new Vn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",r.if("isModal","ck-dialog-overlay__transparent",a=>!a),r.if("_isVisible","ck-hidden",a=>!a)],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",r.if("isModal","ck-dialog_modal"),r.to("className")],role:"dialog","aria-label":r.to("ariaLabel"),style:{top:r.to("_top",a=>xz(a)),left:r.to("_left",a=>xz(a)),visibility:r.if("_isTransparent","hidden")}},children:this.parts}]})}render(){super.render(),this.keystrokes.set("Esc",(t,i)=>{this.fire("close",{source:"escKeyPress"}),i()}),this.on("drag",(t,{deltaX:i,deltaY:o})=>{this.wasMoved=!0,this.moveBy(i,o)}),this.listenTo(U.window,"resize",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.listenTo(U.document,"scroll",()=>{this._isVisible&&!this.wasMoved&&this.updatePosition()}),this.on("change:_isVisible",(t,i,o)=>{o&&(this._isTransparent=!0,setTimeout(()=>{this.updatePosition(),this._isTransparent=!1,this.focus()},10))}),this.keystrokes.listenTo(this.element)}get dragHandleElement(){return this.headerView&&!this.isModal?this.headerView.element:null}setupParts({icon:t,title:i,hasCloseButton:o=!0,content:r,actionButtons:s}){i&&(this.headerView=new Qg(this.locale,{icon:t}),o&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=i,this.ariaLabel=i,this.parts.add(this.headerView,0)),r&&(r instanceof Y&&(r=[r]),this.contentView=new aI(this.locale),this.contentView.children.addMany(r),this.parts.add(this.contentView)),s&&(this.actionsView=new sI(this.locale),this.actionsView.setButtons(s),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}focus(){this._focusCycler.focusFirst()}moveTo(t,i){let o=this._getViewportRect(),r=this._getDialogRect();t+r.width>o.right&&(t=o.right-r.width),t<o.left&&(t=o.left),i<o.top&&(i=o.top),this._moveTo(t,i)}_moveTo(t,i){this._left=t,this._top=i}moveBy(t,i){this.moveTo(this._left+t,this._top+i)}_moveOffScreen(){this._moveTo(-9999,-9999)}updatePosition(){if(!this.element||!this.element.parentNode)return;let t=this._getViewportRect(),i=this.position,o;this._getCurrentDomRoot()?o=this._getVisibleDomRootRect(t):i=ji.SCREEN_CENTER;let r=n.defaultOffset,s=this._getDialogRect();switch(i){case ji.EDITOR_TOP_SIDE:{if(o){let a=this.locale.contentLanguageDirection==="ltr"?o.right-s.width-r:o.left+r;this.moveTo(a,o.top+r)}else this._moveOffScreen();break}case ji.EDITOR_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-s.width/2),Math.round(o.top+o.height/2-s.height/2)):this._moveOffScreen();break}case ji.SCREEN_CENTER:{this.moveTo(Math.round((t.width-s.width)/2),Math.round((t.height-s.height)/2));break}case ji.EDITOR_TOP_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-s.width/2),o.top+r):this._moveOffScreen();break}case ji.EDITOR_BOTTOM_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-s.width/2),o.bottom-s.height-r):this._moveOffScreen();break}case ji.EDITOR_ABOVE_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-s.width/2),o.top-s.height-r):this._moveOffScreen();break}case ji.EDITOR_BELOW_CENTER:{o?this.moveTo(Math.round(o.left+o.width/2-s.width/2),o.bottom+r):this._moveOffScreen();break}}}_getVisibleDomRootRect(t){let i=new Ae(this._getCurrentDomRoot()).getVisible();if(i){if(i=t.getIntersection(i),!i)return null}else return null;return i}_getDialogRect(){return new Ae(this.element.firstElementChild)}_getViewportRect(){let t=new Ae(U.window);if(this.isModal)return t;let i=v({top:0,bottom:0,left:0,right:0},this._getViewportOffset());return t.top+=i.top,t.height-=i.top,t.bottom-=i.bottom,t.height-=i.bottom,t.left+=i.left,t.right-=i.right,t.width-=i.left+i.right,t}_updateFocusCyclableItems(){let t=[];if(this.contentView)for(let i of this.contentView.children)Yg(i)&&t.push(i);this.actionsView&&t.push(this.actionsView),this.closeButtonView&&t.push(this.closeButtonView),t.forEach(i=>{this._focusables.add(i),this.focusTracker.add(i.element),Wme(i)&&this._focusCycler.chain(i.focusCycler)})}_createCloseButton(){let t=new oe(this.locale),i=this.locale.t;return t.set({label:i("Close"),tooltip:!0,icon:ee.cancel}),t.on("execute",()=>this.fire("close",{source:"closeButton"})),t}}return n})(),wm=(()=>{class n extends M{view;static _visibleDialogPlugin;_onHide;static get pluginName(){return"Dialog"}static get isOfficialPlugin(){return!0}constructor(t){super(t);let i=t.t;this._initShowHideListeners(),this._initFocusToggler(),this._initMultiRootIntegration(),this.set({id:null,isOpen:!1}),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:i("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]})}destroy(){super.destroy(),this._unlockBodyScroll()}_initShowHideListeners(){this.on("show",(t,i)=>{this._show(i)}),this.on("show",(t,i)=>{i.onShow&&i.onShow(this)},{priority:"low"}),this.on("hide",()=>{n._visibleDialogPlugin&&n._visibleDialogPlugin._hide()}),this.on("hide",()=>{this._onHide&&(this._onHide(this),this._onHide=void 0)},{priority:"low"})}_initFocusToggler(){let t=this.editor;t.keystrokes.set("Ctrl+F6",(i,o)=>{!this.isOpen||this.view.isModal||(this.view.focusTracker.isFocused?t.editing.view.focus():this.view.focus(),o())})}_initMultiRootIntegration(){let t=this.editor.model;t.document.on("change:data",()=>{if(!this.view)return;let i=t.document.differ.getChangedRoots();for(let o of i)o.state&&this.view.updatePosition()})}show(t){this.hide(),this.fire(`show:${t.id}`,t)}_show({id:t,icon:i,title:o,hasCloseButton:r=!0,content:s,actionButtons:a,className:l,isModal:c,position:d,onHide:f}){let p=this.editor;this.view=new e_(p.locale,{getCurrentDomRoot:()=>p.editing.view.getDomRoot(p.model.document.selection.anchor.root.rootName),getViewportOffset:()=>p.ui.viewportOffset});let g=this.view;g.on("close",()=>{this.hide()}),p.ui.view.body.add(g),p.keystrokes.listenTo(g.element),d||(d=c?ji.SCREEN_CENTER:ji.EDITOR_CENTER),c&&this._lockBodyScroll(),g.set({position:d,_isVisible:!0,className:l,isModal:c}),g.setupParts({icon:i,title:o,hasCloseButton:r,content:s,actionButtons:a}),this.id=t,f&&(this._onHide=f),this.isOpen=!0,n._visibleDialogPlugin=this}hide(){n._visibleDialogPlugin&&n._visibleDialogPlugin.fire(`hide:${n._visibleDialogPlugin.id}`)}_hide(){if(!this.view)return;let t=this.editor,i=this.view;i.isModal&&this._unlockBodyScroll(),i.contentView&&i.contentView.reset(),t.ui.view.body.remove(i),t.ui.focusTracker.remove(i.element),t.keystrokes.stopListening(i.element),i.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,n._visibleDialogPlugin=null}_lockBodyScroll(){document.documentElement.classList.add("ck-dialog-scroll-locked")}_unlockBodyScroll(){document.documentElement.classList.remove("ck-dialog-scroll-locked")}}return n})(),ol=class extends oe{_checkIconHolderView=new lI;constructor(e,t=new Gy){super(e,t),this.set({hasCheckSpace:!1,_hasCheck:this.isToggleable});let i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-list-item-button",i.if("isToggleable","ck-list-item-button_toggleable")]}}),this.bind("_hasCheck").to(this,"hasCheckSpace",this,"isToggleable",(o,r)=>o||r)}render(){super.render(),this._hasCheck&&this.children.add(this._checkIconHolderView,0),this._watchCheckIconHolderMount()}_watchCheckIconHolderMount(){this._checkIconHolderView.bind("isOn").to(this,"isOn",e=>this.isToggleable&&e),this.on("change:_hasCheck",(e,t,i)=>{let{children:o,_checkIconHolderView:r}=this;i?o.add(r,0):o.remove(r)})}},lI=class extends Y{children;_checkIconView=this._createCheckIconView();constructor(){super();let e=this.bindTemplate;this.children=this.createCollection(),this.set("isOn",!1),this.setTemplate({tag:"span",children:this.children,attributes:{class:["ck","ck-list-item-button__check-holder",e.to("isOn",t=>t?"ck-on":"ck-off")]}})}render(){super.render(),this.isOn&&this.children.add(this._checkIconView,0),this._watchCheckIconMount()}_watchCheckIconMount(){this.on("change:isOn",(e,t,i)=>{let{children:o,_checkIconView:r}=this;i&&!o.has(r)?o.add(r):!i&&o.has(r)&&o.remove(r)})}_createCheckIconView(){let e=new Ir;return e.content=ee.check,e.extendTemplate({attributes:{class:"ck-list-item-button__check-icon"}}),e}},be=class extends ol{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},rl=class extends Y{id;constructor(e){super(e),this.set("text",void 0),this.set("for",void 0),this.id=`ck-editor__label_${an()}`;let t=this.bindTemplate;this.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:this.id,for:t.to("for")},children:[{text:t.to("text")}]})}},cI=class extends Y{constructor(e,t){super(e);let i=e.t,o=new rl;o.text=i("Help Contents. To close this dialog press ESC."),this.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":o.id,role:"document",tabindex:-1},children:[Dt(document,"p",{},i("Below, you can find a list of keyboard shortcuts that can be used in the editor.")),...this._createCategories(Array.from(t.values())),o]})}focus(){this.element.focus()}_createCategories(e){return e.map(t=>{let i=[Dt(document,"h3",{},t.label),...Array.from(t.groups.values()).map(o=>this._createGroup(o)).flat()];return t.description&&i.splice(1,0,Dt(document,"p",{},t.description)),Dt(document,"section",{},i)})}_createGroup(e){let t=e.keystrokes.sort((o,r)=>o.label.localeCompare(r.label)).map(o=>this._createGroupRow(o)).flat(),i=[Dt(document,"dl",{},t)];return e.label&&i.unshift(Dt(document,"h4",{},e.label)),i}_createGroupRow(e){let t=this.locale.t,i=Dt(document,"dt"),o=Dt(document,"dd"),r=Kme(e.keystroke),s=[];for(let a of r)s.push(a.map(Gme).join(""));return i.innerHTML=e.label,o.innerHTML=s.join(", ")+(e.mayRequireFn&&ie.isMac?` ${t("(may require <kbd>Fn</kbd>)")}`:""),[i,o]}};function Gme(n){return vg(n).split("+").map(e=>`<kbd>${e}</kbd>`).join("+")}function Kme(n){return typeof n=="string"?[[n]]:typeof n[0]=="string"?[n]:n}var Az='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>',Ky=class extends M{contentView=null;static get requires(){return[wm]}static get pluginName(){return"AccessibilityHelp"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",()=>{let i=this._createButton(oe);return i.set({tooltip:!0,withText:!1,label:t("Accessibility help")}),i}),e.ui.componentFactory.add("menuBar:accessibilityHelp",()=>{let i=this._createButton(be);return i.label=t("Accessibility"),i}),e.keystrokes.set("Alt+0",(i,o)=>{this._toggleDialog(),o()}),this._setupRootLabels()}_createButton(e){let t=this.editor,i=t.plugins.get("Dialog"),o=t.locale,r=new e(o);return r.set({keystroke:"Alt+0",icon:Az,isToggleable:!0}),r.on("execute",()=>this._toggleDialog()),r.bind("isOn").to(i,"id",s=>s==="accessibilityHelp"),r}_setupRootLabels(){let e=this.editor,t=e.editing.view,i=e.t;e.ui.on("ready",()=>{t.change(r=>{for(let s of t.document.roots)o(r,s)}),e.on("addRoot",(r,s)=>{let a=e.editing.view.document.getRoot(s.rootName);t.change(l=>o(l,a))},{priority:"low"})});function o(r,s){let l=[s.getAttribute("aria-label"),i("Press %0 for help.",[vg("Alt+0")])].filter(c=>c).join(". ");r.setAttribute("aria-label",l,s)}}_toggleDialog(){let e=this.editor,t=e.plugins.get("Dialog"),i=e.locale.t;this.contentView||(this.contentView=new cI(e.locale,e.accessibility.keystrokeInfos)),t.id==="accessibilityHelp"?t.hide():t.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:i("Accessibility help"),icon:Az,hasCloseButton:!0,content:this.contentView})}},dI=class extends Sn{locale;_bodyCollectionContainer;constructor(e,t=[]){super(t),this.locale=e}get bodyCollectionContainer(){return this._bodyCollectionContainer}attachToDom(){this._bodyCollectionContainer=new Ln({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection,role:"application"},children:this}).render();let e=document.querySelector(".ck-body-wrapper");e||(e=Dt(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(e)),e.appendChild(this._bodyCollectionContainer)}detachFromDom(){super.destroy(),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();let e=document.querySelector(".ck-body-wrapper");e&&e.childElementCount==0&&e.remove()}},Rs=class extends oe{toggleSwitchView;constructor(e){super(e),this.isToggleable=!0,this.toggleSwitchView=this._createToggleView(),this.extendTemplate({attributes:{class:"ck-switchbutton"}})}render(){super.render(),this.children.add(this.toggleSwitchView)}_createToggleView(){let e=new Y;return e.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),e}};var uI=class extends Qme(ol){};function Qme(n){class e extends n{buttonView;_fileInputView;constructor(...i){super(...i),this.buttonView=this,this._fileInputView=new hI(this.locale),this._fileInputView.bind("acceptedType").to(this),this._fileInputView.bind("allowMultipleFiles").to(this),this._fileInputView.delegate("done").to(this),this.on("execute",()=>{this._fileInputView.open()}),this.extendTemplate({attributes:{class:"ck-file-dialog-button"}})}render(){super.render(),this.children.add(this._fileInputView)}}return e}var hI=class extends Y{constructor(e){super(e),this.set("acceptedType",void 0),this.set("allowMultipleFiles",!1);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(()=>{this.element&&this.element.files&&this.element.files.length&&this.fire("done",this.element.files),this.element.value=""})}})}open(){this.element.click()}},NI='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var Ho=class extends Y{fieldView;labelView;statusView;fieldWrapperChildren;constructor(e,t){super(e);let i=`ck-labeled-field-view-${an()}`,o=`ck-labeled-field-view-status-${an()}`;this.fieldView=t(this,i,o),this.set("label",void 0),this.set("isEnabled",!0),this.set("isEmpty",!0),this.set("isFocused",!1),this.set("errorText",null),this.set("infoText",null),this.set("class",void 0),this.set("placeholder",void 0),this.labelView=this._createLabelView(i),this.statusView=this._createStatusView(o),this.fieldWrapperChildren=this.createCollection([this.fieldView,this.labelView]),this.bind("_statusText").to(this,"errorText",this,"infoText",(s,a)=>s||a);let r=this.bindTemplate;this.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",r.to("class"),r.if("isEnabled","ck-disabled",s=>!s),r.if("isEmpty","ck-labeled-field-view_empty"),r.if("isFocused","ck-labeled-field-view_focused"),r.if("placeholder","ck-labeled-field-view_placeholder"),r.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:this.fieldWrapperChildren},this.statusView]})}_createLabelView(e){let t=new rl(this.locale);return t.for=e,t.bind("text").to(this,"label"),t}_createStatusView(e){let t=new Y(this.locale),i=this.bindTemplate;return t.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",i.if("errorText","ck-labeled-field-view__status_error"),i.if("_statusText","ck-hidden",o=>!o)],id:e,role:i.if("errorText","alert")},children:[{text:i.to("_statusText")}]}),t}focus(e){this.fieldView.focus(e)}},mI=class extends Y{focusTracker;constructor(e){super(e),this.set("value",void 0),this.set("id",void 0),this.set("placeholder",void 0),this.set("tabIndex",void 0),this.set("isReadOnly",!1),this.set("hasError",!1),this.set("ariaDescribedById",void 0),this.set("ariaLabel",void 0),this.focusTracker=new Et,this.bind("isFocused").to(this.focusTracker),this.set("isEmpty",!0);let t=this.bindTemplate;this.setTemplate({tag:"input",attributes:{class:["ck","ck-input",t.if("isFocused","ck-input_focused"),t.if("isEmpty","ck-input-text_empty"),t.if("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),tabindex:t.to("tabIndex"),readonly:t.to("isReadOnly"),"aria-invalid":t.if("hasError",!0),"aria-describedby":t.to("ariaDescribedById"),"aria-label":t.to("ariaLabel")},on:{input:t.to((...i)=>{this.fire("input",...i),this._updateIsEmpty()}),change:t.to(this._updateIsEmpty.bind(this))}})}render(){super.render(),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(e,t,i)=>{this._setDomElementValue(i),this._updateIsEmpty()})}destroy(){super.destroy(),this.focusTracker.destroy()}select(){this.element.select()}focus(){this.element.focus()}reset(){this.value=this.element.value="",this._updateIsEmpty()}_updateIsEmpty(){this.isEmpty=Yme(this.element)}_setDomElementValue(e){this.element.value=!e&&e!==0?"":e}};function Yme(n){return!n.value}var fI=class extends mI{constructor(e){super(e),this.set("inputMode","text");let t=this.bindTemplate;this.extendTemplate({attributes:{inputmode:t.to("inputMode")}})}},Qy=class extends fI{constructor(e){super(e),this.extendTemplate({attributes:{type:"text",class:["ck-input-text"]}})}};var pI=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",t.to("position",i=>`ck-dropdown__panel_${i}`),t.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(){if(this.children.length){let e=this.children.first;typeof e.focus=="function"?e.focus():Ve("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}focusLast(){if(this.children.length){let e=this.children.last;typeof e.focusLast=="function"?e.focusLast():e.focus()}}},Uz=(()=>{class n extends Y{buttonView;panelView;focusTracker;keystrokes;listView;toolbarView;menuView;constructor(t,i,o){super(t);let r=this.bindTemplate;this.buttonView=i,this.panelView=o,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("class",void 0),this.set("id",void 0),this.set("panelPosition","auto"),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ft,this.focusTracker=new Et,this.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",r.to("class"),r.if("isEnabled","ck-disabled",s=>!s)],id:r.to("id"),"aria-describedby":r.to("ariaDescribedById")},children:[i,o]}),i.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":r.to("isOpen")}})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",()=>{this.isOpen=!this.isOpen}),this.on("change:isOpen",(i,o,r)=>{if(r)if(this.panelPosition==="auto"){let s=n._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=s?s.name:this._panelPositions[0].name}else this.panelView.position=this.panelPosition}),this.keystrokes.listenTo(this.element);let t=(i,o)=>{this.isOpen&&(this.isOpen=!1,o())};this.keystrokes.set("arrowdown",(i,o)=>{this.buttonView.isEnabled&&!this.isOpen&&(this.isOpen=!0,o())}),this.keystrokes.set("arrowright",(i,o)=>{this.isOpen&&o()}),this.keystrokes.set("arrowleft",t),this.keystrokes.set("esc",t)}focus(){this.buttonView.focus()}get _panelPositions(){let{south:t,north:i,southEast:o,southWest:r,northEast:s,northWest:a,southMiddleEast:l,southMiddleWest:c,northMiddleEast:d,northMiddleWest:f}=n.defaultPanelPositions;return this.locale.uiLanguageDirection!=="rtl"?[o,r,l,c,t,s,a,d,f,i]:[r,o,c,l,t,a,s,f,d,i]}static defaultPanelPositions={south:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/2,name:"s"}),southEast:t=>({top:t.bottom,left:t.left,name:"se"}),southWest:(t,i)=>({top:t.bottom,left:t.left-i.width+t.width,name:"sw"}),southMiddleEast:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)/4,name:"sme"}),southMiddleWest:(t,i)=>({top:t.bottom,left:t.left-(i.width-t.width)*3/4,name:"smw"}),north:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/2,name:"n"}),northEast:(t,i)=>({top:t.top-i.height,left:t.left,name:"ne"}),northWest:(t,i)=>({top:t.top-i.height,left:t.left-i.width+t.width,name:"nw"}),northMiddleEast:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)/4,name:"nme"}),northMiddleWest:(t,i)=>({top:t.top-i.height,left:t.left-(i.width-t.width)*3/4,name:"nmw"})};static _getOptimalPosition=ky}return n})(),Yy=class extends oe{arrowView;constructor(e){super(e),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",t=>String(t))}}),this.delegate("execute").to(this,"open")}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new Ir;return e.content=NI,e.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),e}};var Uo=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!0),this.children=this.createCollection(),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",t.if("isVisible","ck-hidden",i=>!i)],role:"presentation"},children:this.children})}focus(){this.children.first&&this.children.first.focus()}},sl=class extends Y{constructor(e){super(e),this.setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}})}},mm=class extends Y{labelView;items;children;constructor(e,t=new rl){super(e);let i=this.bindTemplate,o=new pm(e);this.set({label:"",isVisible:!0}),this.labelView=t,this.labelView.bind("text").to(this,"label"),this.children=this.createCollection(),this.children.addMany([this.labelView,o]),o.set({role:"group",ariaLabelledBy:t.id}),o.focusTracker.destroy(),o.keystrokes.destroy(),this.items=o.items,this.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",i.if("isVisible","ck-hidden",r=>!r)]},children:this.children})}focus(){if(this.items){let e=this.items.find(t=>!(t instanceof sl));e&&e.focus()}}},pm=class extends Y{focusables;items;focusTracker;keystrokes;_focusCycler;_listItemGroupToChangeListeners=new WeakMap;constructor(e){super(e);let t=this.bindTemplate;this.focusables=new Sn,this.items=this.createCollection(),this.focusTracker=new Et,this.keystrokes=new Ft,this._focusCycler=new Vn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),this.set("ariaLabel",void 0),this.set("ariaLabelledBy",void 0),this.set("role",void 0),this.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:t.to("role"),"aria-label":t.to("ariaLabel"),"aria-labelledby":t.to("ariaLabelledBy")},children:this.items})}render(){super.render();for(let e of this.items)e instanceof mm?this._registerFocusableItemsGroup(e):e instanceof Uo&&this._registerFocusableListItem(e);this.items.on("change",(e,t)=>{for(let i of t.removed)i instanceof mm?this._deregisterFocusableItemsGroup(i):i instanceof Uo&&this._deregisterFocusableListItem(i);for(let i of Array.from(t.added).reverse())i instanceof mm?this._registerFocusableItemsGroup(i,t.index):this._registerFocusableListItem(i,t.index)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}focusFirst(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}_registerFocusableListItem(e,t){this.focusTracker.add(e.element),this.focusables.add(e,t)}_deregisterFocusableListItem(e){this.focusTracker.remove(e.element),this.focusables.remove(e)}_getOnGroupItemsChangeCallback(e){return(t,i)=>{for(let o of i.removed)this._deregisterFocusableListItem(o);for(let o of Array.from(i.added).reverse())this._registerFocusableListItem(o,this.items.getIndex(e)+i.index)}}_registerFocusableItemsGroup(e,t){Array.from(e.items).forEach((o,r)=>{let s=typeof t<"u"?t+r:void 0;this._registerFocusableListItem(o,s)});let i=this._getOnGroupItemsChangeCallback(e);this._listItemGroupToChangeListeners.set(e,i),e.items.on("change",i)}_deregisterFocusableItemsGroup(e){for(let t of e.items)this._deregisterFocusableListItem(t);e.items.off("change",this._listItemGroupToChangeListeners.get(e)),this._listItemGroupToChangeListeners.delete(e)}};var Tz=Ts("px"),Zme={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},al=(()=>{class n extends Y{content;_pinWhenIsVisibleCallback;_resizeObserver;constructor(t){super(t);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("position","arrow_nw"),this.set("isVisible",!1),this.set("withArrow",!0),this.set("class",void 0),this._pinWhenIsVisibleCallback=null,this._resizeObserver=null,this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",i.to("position",o=>`ck-balloon-panel_${o}`),i.if("isVisible","ck-balloon-panel_visible"),i.if("withArrow","ck-balloon-panel_with-arrow"),i.to("class")],style:{top:i.to("top",Tz),left:i.to("left",Tz)}},children:this.content})}destroy(){this.hide(),super.destroy()}show(){this.isVisible=!0}hide(){this.isVisible=!1}attachTo(t){let i=$y(t.target);if(i&&!Vo(i))return!1;this.show();let o=n.defaultPositions,r=Object.assign({},{element:this.element,positions:[o.southArrowNorth,o.southArrowNorthMiddleWest,o.southArrowNorthMiddleEast,o.southArrowNorthWest,o.southArrowNorthEast,o.northArrowSouth,o.northArrowSouthMiddleWest,o.northArrowSouthMiddleEast,o.northArrowSouthWest,o.northArrowSouthEast,o.viewportStickyNorth],limiter:U.document.body,fitInViewport:!0},t),s=n._getOptimalPosition(r)||Zme,a=parseInt(s.left),l=parseInt(s.top),c=s.name,d=s.config||{},{withArrow:f=!0}=d;return this.top=l,this.left=a,this.position=c,this.withArrow=f,!0}pin(t){this.unpin(),this._startPinning(t)&&(this._pinWhenIsVisibleCallback=()=>{this.isVisible?this._startPinning(t):this._stopPinning()},this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback))}unpin(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}_startPinning(t){if(!this.attachTo(t))return!1;let i=$y(t.target),o=t.limiter?$y(t.limiter):U.document.body;if(this.listenTo(U.document,"scroll",(r,s)=>{let a=s.target,l=i&&a.contains(i),c=o&&a.contains(o);(l||c||!i||!o)&&this.attachTo(t)},{useCapture:!0}),this.listenTo(U.window,"resize",()=>{this.attachTo(t)}),!this._resizeObserver&&(i&&St(i)&&(i=i.parentElement),i)){let r=()=>{Vo(i)||this.unpin()};this._resizeObserver=new Gh(i,r)}return!0}_stopPinning(){this.stopListening(U.document,"scroll"),this.stopListening(U.window,"resize"),this._resizeObserver&&(this._resizeObserver.destroy(),this._resizeObserver=null)}static generatePositions(t={}){let{sideOffset:i=n.arrowSideOffset,heightOffset:o=n.arrowHeightOffset,stickyVerticalOffset:r=n.stickyVerticalOffset,config:s}=t;return{northWestArrowSouthWest:(c,d)=>v({top:a(c,d),left:c.left-i,name:"arrow_sw"},s&&{config:s}),northWestArrowSouthMiddleWest:(c,d)=>v({top:a(c,d),left:c.left-d.width*.25-i,name:"arrow_smw"},s&&{config:s}),northWestArrowSouth:(c,d)=>v({top:a(c,d),left:c.left-d.width/2,name:"arrow_s"},s&&{config:s}),northWestArrowSouthMiddleEast:(c,d)=>v({top:a(c,d),left:c.left-d.width*.75+i,name:"arrow_sme"},s&&{config:s}),northWestArrowSouthEast:(c,d)=>v({top:a(c,d),left:c.left-d.width+i,name:"arrow_se"},s&&{config:s}),northArrowSouthWest:(c,d)=>v({top:a(c,d),left:c.left+c.width/2-i,name:"arrow_sw"},s&&{config:s}),northArrowSouthMiddleWest:(c,d)=>v({top:a(c,d),left:c.left+c.width/2-d.width*.25-i,name:"arrow_smw"},s&&{config:s}),northArrowSouth:(c,d)=>v({top:a(c,d),left:c.left+c.width/2-d.width/2,name:"arrow_s"},s&&{config:s}),northArrowSouthMiddleEast:(c,d)=>v({top:a(c,d),left:c.left+c.width/2-d.width*.75+i,name:"arrow_sme"},s&&{config:s}),northArrowSouthEast:(c,d)=>v({top:a(c,d),left:c.left+c.width/2-d.width+i,name:"arrow_se"},s&&{config:s}),northEastArrowSouthWest:(c,d)=>v({top:a(c,d),left:c.right-i,name:"arrow_sw"},s&&{config:s}),northEastArrowSouthMiddleWest:(c,d)=>v({top:a(c,d),left:c.right-d.width*.25-i,name:"arrow_smw"},s&&{config:s}),northEastArrowSouth:(c,d)=>v({top:a(c,d),left:c.right-d.width/2,name:"arrow_s"},s&&{config:s}),northEastArrowSouthMiddleEast:(c,d)=>v({top:a(c,d),left:c.right-d.width*.75+i,name:"arrow_sme"},s&&{config:s}),northEastArrowSouthEast:(c,d)=>v({top:a(c,d),left:c.right-d.width+i,name:"arrow_se"},s&&{config:s}),southWestArrowNorthWest:c=>v({top:l(c),left:c.left-i,name:"arrow_nw"},s&&{config:s}),southWestArrowNorthMiddleWest:(c,d)=>v({top:l(c),left:c.left-d.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southWestArrowNorth:(c,d)=>v({top:l(c),left:c.left-d.width/2,name:"arrow_n"},s&&{config:s}),southWestArrowNorthMiddleEast:(c,d)=>v({top:l(c),left:c.left-d.width*.75+i,name:"arrow_nme"},s&&{config:s}),southWestArrowNorthEast:(c,d)=>v({top:l(c),left:c.left-d.width+i,name:"arrow_ne"},s&&{config:s}),southArrowNorthWest:c=>v({top:l(c),left:c.left+c.width/2-i,name:"arrow_nw"},s&&{config:s}),southArrowNorthMiddleWest:(c,d)=>v({top:l(c),left:c.left+c.width/2-d.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southArrowNorth:(c,d)=>v({top:l(c),left:c.left+c.width/2-d.width/2,name:"arrow_n"},s&&{config:s}),southArrowNorthMiddleEast:(c,d)=>v({top:l(c),left:c.left+c.width/2-d.width*.75+i,name:"arrow_nme"},s&&{config:s}),southArrowNorthEast:(c,d)=>v({top:l(c),left:c.left+c.width/2-d.width+i,name:"arrow_ne"},s&&{config:s}),southEastArrowNorthWest:c=>v({top:l(c),left:c.right-i,name:"arrow_nw"},s&&{config:s}),southEastArrowNorthMiddleWest:(c,d)=>v({top:l(c),left:c.right-d.width*.25-i,name:"arrow_nmw"},s&&{config:s}),southEastArrowNorth:(c,d)=>v({top:l(c),left:c.right-d.width/2,name:"arrow_n"},s&&{config:s}),southEastArrowNorthMiddleEast:(c,d)=>v({top:l(c),left:c.right-d.width*.75+i,name:"arrow_nme"},s&&{config:s}),southEastArrowNorthEast:(c,d)=>v({top:l(c),left:c.right-d.width+i,name:"arrow_ne"},s&&{config:s}),westArrowEast:(c,d)=>v({top:c.top+c.height/2-d.height/2,left:c.left-d.width-o,name:"arrow_e"},s&&{config:s}),eastArrowWest:(c,d)=>v({top:c.top+c.height/2-d.height/2,left:c.right+o,name:"arrow_w"},s&&{config:s}),viewportStickyNorth:(c,d,f,p)=>{let g=p||f;return!c.getIntersection(g)||g.height-c.height>r?null:{top:g.top+r,left:c.left+c.width/2-d.width/2,name:"arrowless",config:v({withArrow:!1},s)}}};function a(c,d){return c.top-d.height-o}function l(c){return c.bottom+o}}static arrowSideOffset=25;static arrowHeightOffset=10;static stickyVerticalOffset=20;static _getOptimalPosition=ky;static defaultPositions=n.generatePositions()}return n})();function $y(n){return Vi(n)?n:wg(n)?n.commonAncestorContainer:typeof n=="function"?$y(n()):null}var gm=class extends Y{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}})}},gI=class extends Y{constructor(e){super(e),this.setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}})}};function Jme(n){return n.bindTemplate.to(e=>{e.target===n.element&&e.preventDefault()})}function t_(n){if(Array.isArray(n))return{items:n,removeItems:[]};let e={items:[],removeItems:[]};return n?v(v({},e),n):e}var Xme={alignLeft:ee.alignLeft,bold:ee.bold,importExport:ee.importExport,paragraph:ee.paragraph,plus:ee.plus,text:ee.text,threeVerticalDots:ee.threeVerticalDots,pilcrow:ee.pilcrow,dragIndicator:ee.dragIndicator},Ar=class extends Y{options;items;focusTracker;keystrokes;itemsView;children;focusables;_focusCycler;_behavior;constructor(e,t){super(e);let i=this.bindTemplate,o=this.t;this.options=t||{},this.set("ariaLabel",o("Editor toolbar")),this.set("maxWidth","auto"),this.items=this.createCollection(),this.focusTracker=new Et,this.keystrokes=new Ft,this.set("class",void 0),this.set("isCompact",!1),this.itemsView=new bI(e),this.children=this.createCollection(),this.children.add(this.itemsView),this.focusables=this.createCollection();let r=e.uiLanguageDirection==="rtl";this._focusCycler=new Vn({focusables:this.focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:[r?"arrowright":"arrowleft","arrowup"],focusNext:[r?"arrowleft":"arrowright","arrowdown"]}});let s=["ck","ck-toolbar",i.to("class"),i.if("isCompact","ck-toolbar_compact")];this.options.shouldGroupWhenFull&&this.options.isFloating&&s.push("ck-toolbar_floating"),this.setTemplate({tag:"div",attributes:{class:s,role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")},tabindex:-1},children:this.children,on:{mousedown:Jme(this)}}),this._behavior=this.options.shouldGroupWhenFull?new kI(this):new wI(this)}render(){super.render(),this.focusTracker.add(this.element);for(let e of this.items)this.focusTracker.add(e);this.items.on("add",(e,t)=>{this.focusTracker.add(t)}),this.items.on("remove",(e,t)=>{this.focusTracker.remove(t)}),this.keystrokes.listenTo(this.element),this._behavior.render(this)}destroy(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),super.destroy()}focus(){this._focusCycler.focusFirst()}focusLast(){this._focusCycler.focusLast()}fillFromConfig(e,t,i){this.items.addMany(this._buildItemsFromConfig(e,t,i))}_buildItemsFromConfig(e,t,i){let o=t_(e),r=i||o.removeItems;return this._cleanItemsConfiguration(o.items,t,r).map(a=>De(a)?this._createNestedToolbarDropdown(a,t,r):a==="|"?new gm:a==="-"?new gI:t.create(a)).filter(a=>!!a)}_cleanItemsConfiguration(e,t,i){let o=e.filter((r,s,a)=>r==="|"?!0:i.indexOf(r)!==-1?!1:r==="-"?this.options.shouldGroupWhenFull?(Ve("toolbarview-line-break-ignored-when-grouping-items",a),!1):!0:!De(r)&&!t.has(r)?(Ve("toolbarview-item-unavailable",{item:r}),!1):!0);return this._cleanSeparatorsAndLineBreaks(o)}_cleanSeparatorsAndLineBreaks(e){let t=s=>s!=="-"&&s!=="|",i=e.length,o=e.findIndex(t);if(o===-1)return[];let r=i-e.slice().reverse().findIndex(t);return e.slice(o,r).filter((s,a,l)=>t(s)?!0:!(a>0&&l[a-1]===s))}_createNestedToolbarDropdown(e,t,i){let{label:o,icon:r,items:s,tooltip:a=!0,withText:l=!1}=e;if(s=this._cleanItemsConfiguration(s,t,i),!s.length)return null;let c=this.locale,d=xn(c);return o||Ve("toolbarview-nested-toolbar-dropdown-missing-label",e),d.class="ck-toolbar__nested-toolbar-dropdown",d.buttonView.set({label:o,tooltip:a,withText:!!l}),r!==!1?d.buttonView.icon=Xme[r]||r||ee.threeVerticalDots:d.buttonView.withText=!0,km(d,()=>d.toolbarView._buildItemsFromConfig(s,t,i)),d}},bI=class extends Y{children;constructor(e){super(e),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:this.children})}},wI=class{constructor(e){let t=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using(i=>i),e.focusables.bindTo(e.items).using(i=>Yg(i)?i:null),e.extendTemplate({attributes:{class:[t.if("isVertical","ck-toolbar_vertical")]}})}render(){}destroy(){}},kI=class{view;viewChildren;viewFocusables;viewItemsView;viewFocusTracker;viewLocale;ungroupedItems;groupedItems;groupedItemsDropdown;resizeObserver=null;cachedPadding=null;shouldUpdateGroupingOnNextResize=!1;viewElement;constructor(e){this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using(t=>t),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(t,i)=>{let o=i.index,r=Array.from(i.added);for(let s of i.removed)o>=this.ungroupedItems.length?this.groupedItems.remove(s):this.ungroupedItems.remove(s);for(let s=o;s<o+r.length;s++){let a=r[s-o];s>this.ungroupedItems.length?this.groupedItems.add(a,s-this.ungroupedItems.length):this.ungroupedItems.add(a,s)}this._updateGrouping()}),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}render(e){this.viewElement=e.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(e)}destroy(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}_updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement))return;if(!Vo(this.viewElement)){this.shouldUpdateGroupingOnNextResize=!0;return}let e=this.groupedItems.length,t;for(;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}get _areItemsOverflowing(){if(!this.ungroupedItems.length)return!1;let e=this.viewElement,t=this.viewLocale.uiLanguageDirection,i=new Ae(e.lastChild),o=new Ae(e);if(!this.cachedPadding){let r=U.window.getComputedStyle(e),s=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(r[s])}return t==="ltr"?i.right>o.right-this.cachedPadding:i.left<o.left+this.cachedPadding}_enableGroupingOnResize(){let e;this.resizeObserver=new Gh(this.viewElement,t=>{(!e||e!==t.contentRect.width||this.shouldUpdateGroupingOnNextResize)&&(this.shouldUpdateGroupingOnNextResize=!1,this._updateGrouping(),e=t.contentRect.width)}),this._updateGrouping()}_enableGroupingOnMaxWidthChange(e){e.on("change:maxWidth",()=>{this._updateGrouping()})}_groupLastItem(){this.groupedItems.length||(this.viewChildren.add(new gm),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}_ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}_createGroupedItemsDropdown(){let e=this.viewLocale,t=e.t,i=xn(e);return i.class="ck-toolbar__grouped-dropdown",i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se",km(i,this.groupedItems),i.buttonView.set({label:t("Show more items"),tooltip:!0,tooltipPosition:e.uiLanguageDirection==="rtl"?"se":"sw",icon:ee.threeVerticalDots}),i}_updateFocusCyclableItems(){this.viewFocusables.clear(),this.ungroupedItems.map(e=>{Yg(e)&&this.viewFocusables.add(e)}),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}},Tr=class extends Y{children;actionView;arrowView;keystrokes;focusTracker;constructor(e,t){super(e);let i=this.bindTemplate;this.set("class",void 0),this.set("labelStyle",void 0),this.set("icon",void 0),this.set("isEnabled",!0),this.set("isOn",!1),this.set("isToggleable",!1),this.set("isVisible",!0),this.set("keystroke",void 0),this.set("withKeystroke",!1),this.set("label",void 0),this.set("tabindex",-1),this.set("tooltip",!1),this.set("tooltipPosition","s"),this.set("type","button"),this.set("withText",!1),this.children=this.createCollection(),this.actionView=this._createActionView(t),this.arrowView=this._createArrowView(),this.keystrokes=new Ft,this.focusTracker=new Et,this.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",i.to("class"),i.if("isVisible","ck-hidden",o=>!o),this.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:this.children})}render(){super.render(),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(e,t)=>{this.focusTracker.focusedElement===this.actionView.element&&(this.arrowView.focus(),t())}),this.keystrokes.set("arrowleft",(e,t)=>{this.focusTracker.focusedElement===this.arrowView.element&&(this.actionView.focus(),t())})}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.actionView.focus()}_createActionView(e){let t=e||new oe;return e||t.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),t.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),t.delegate("execute").to(this),t}_createArrowView(){let e=new oe,t=e.bindTemplate;return e.icon=NI,e.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":t.to("isOn"),"aria-haspopup":!0,"aria-expanded":t.to("isOn",i=>String(i))}}),e.bind("isEnabled").to(this),e.bind("label").to(this),e.bind("tooltip").to(this),e.delegate("execute").to(this,"open"),e}};function xn(n,e=Yy){let t=typeof e=="function"?new e(n):e,i=new pI(n),o=new Uz(n,t,i);return t.bind("isEnabled").to(o),t instanceof Tr?t.arrowView.bind("isOn").to(o,"isOpen"):t.bind("isOn").to(o,"isOpen"),efe(o),o}function km(n,e,t={}){n.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),n.isOpen?Iz(n,e,t):n.once("change:isOpen",()=>Iz(n,e,t),{priority:"highest"}),t.enableActiveItemFocusOnDropdownOpen&&n_(n,()=>n.toolbarView.items.find(i=>i.isOn))}function Iz(n,e,t){let i=n.locale,o=i.t,r=n.toolbarView=new Ar(i),s=typeof e=="function"?e():e;r.ariaLabel=t.ariaLabel||o("Dropdown toolbar"),t.maxWidth&&(r.maxWidth=t.maxWidth),t.class&&(r.class=t.class),t.isCompact&&(r.isCompact=t.isCompact),t.isVertical&&(r.isVertical=!0),s instanceof Sn?r.items.bindTo(s).using(a=>a):r.items.addMany(s),n.panelView.children.add(r),n.focusTracker.add(r),r.items.delegate("execute").to(n)}function Mr(n,e,t={}){n.isOpen?Mz(n,e,t):n.once("change:isOpen",()=>Mz(n,e,t),{priority:"highest"}),n_(n,()=>n.listView.items.find(i=>i instanceof Uo?i.children.first.isOn:!1))}function Mz(n,e,t){let i=n.locale,o=n.listView=new pm(i),r=typeof e=="function"?e():e;o.ariaLabel=t.ariaLabel,o.role=t.role,$z(n,o.items,r,i),n.panelView.children.add(o),o.items.delegate("execute").to(n)}function n_(n,e){n.on("change:isOpen",()=>{if(!n.isOpen)return;let t=e();t&&(typeof t.focus=="function"?t.focus():Ve("ui-dropdown-focus-child-on-open-child-missing-focus",{view:t}))},{priority:_n.low-10})}function efe(n){tfe(n),nfe(n),ife(n),ofe(n),rfe(n),sfe(n)}function tfe(n){cd({emitter:n,activator:()=>n.isRendered&&n.isOpen,callback:()=>{n.isOpen=!1},contextElements:()=>[n.element,...jz(n.focusTracker).filter(e=>!n.element.contains(e))]})}function jz(n){return[...n.elements,...n.externalViews.flatMap(e=>jz(e.focusTracker))]}function nfe(n){n.on("execute",e=>{e.source instanceof Rs||(n.isOpen=!1)})}function ife(n){n.focusTracker.on("change:isFocused",(e,t,i)=>{i||!n.isOpen||(n.isOpen=!1)})}function ofe(n){n.keystrokes.set("arrowdown",(e,t)=>{n.isOpen&&(n.panelView.focus(),t())}),n.keystrokes.set("arrowup",(e,t)=>{n.isOpen&&(n.panelView.focusLast(),t())})}function rfe(n){n.on("change:isOpen",(e,t,i)=>{if(i)return;n.focusTracker.elements.some(r=>r.contains(U.document.activeElement))&&n.buttonView.focus()})}function sfe(n){n.on("change:isOpen",(e,t,i)=>{i&&n.panelView.focus()},{priority:"low"})}function $z(n,e,t,i){e.on("change",()=>{let o=[...e].reduce((s,a)=>(a instanceof Uo&&a.children.first instanceof ol&&s.push(a.children.first),s),[]),r=o.some(s=>s.isToggleable);o.forEach(s=>{s.hasCheckSpace=r})}),e.bindTo(t).using(o=>{if(o.type==="separator")return new sl(i);if(o.type==="group"){let r=new mm(i);return r.set({label:o.label}),$z(n,r.items,o.items,i),r.items.delegate("execute").to(n),r}else if(o.type==="button"||o.type==="switchbutton"){let r=o.model.role==="menuitemcheckbox"||o.model.role==="menuitemradio",s=new Uo(i),a;return o.type==="button"?(a=new ol(i),a.set({isToggleable:r})):a=new Rs(i),a.bind(...Object.keys(o.model)).to(o.model),a.delegate("execute").to(s),s.children.add(a),s}return null})}var ud=(n,e,t)=>{let i=new Qy(n.locale);return i.set({id:e,ariaDescribedById:t}),i.bind("isReadOnly").to(n,"isEnabled",o=>!o),i.bind("hasError").to(n,"errorText",o=>!!o),i.on("input",()=>{n.errorText=null}),n.bind("isEmpty","isFocused","placeholder").to(i),i};var vI=class{editor;_components=new Map;constructor(e){this.editor=e}*names(){for(let e of this._components.values())yield e.originalName}add(e,t){this._components.set(tI(e),{callback:t,originalName:e})}create(e){if(!this.has(e))throw new _("componentfactory-item-missing",this,{name:e});return this._components.get(tI(e)).callback(this.editor.locale)}has(e){return this._components.has(tI(e))}};function tI(n){return String(n).toLowerCase()}var Dz="ck-tooltip",yI=class n extends mn(){tooltipTextView;balloonPanelView;static defaultBalloonPositions=al.generatePositions({heightOffset:5,sideOffset:13});_currentElementWithTooltip=null;_currentTooltipPosition=null;_mutationObserver=null;_pinTooltipDebounced;_unpinTooltipDebounced;_watchdogExcluded;static _editors=new Set;static _instance=null;constructor(e){if(super(),n._editors.add(e),n._instance)return n._instance;n._instance=this,this.tooltipTextView=new Y(e.locale),this.tooltipTextView.set("text",""),this.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:this.tooltipTextView.bindTemplate.to("text")}]}),this.balloonPanelView=new al(e.locale),this.balloonPanelView.class=Dz,this.balloonPanelView.content.add(this.tooltipTextView),this._mutationObserver=afe(()=>{this._updateTooltipPosition()}),this._pinTooltipDebounced=lo(this._pinTooltip,600),this._unpinTooltipDebounced=lo(this._unpinTooltip,400),this.listenTo(U.document,"keydown",this._onKeyDown.bind(this),{useCapture:!0}),this.listenTo(U.document,"mouseenter",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(U.document,"mouseleave",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(U.document,"focus",this._onEnterOrFocus.bind(this),{useCapture:!0}),this.listenTo(U.document,"blur",this._onLeaveOrBlur.bind(this),{useCapture:!0}),this.listenTo(U.document,"scroll",this._onScroll.bind(this),{useCapture:!0}),this._watchdogExcluded=!0}destroy(e){let t=e.ui.view&&e.ui.view.body;n._editors.delete(e),this.stopListening(e.ui),t&&t.has(this.balloonPanelView)&&t.remove(this.balloonPanelView),n._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),n._instance=null)}static getPositioningFunctions(e){let t=n.defaultBalloonPositions;return{s:[t.southArrowNorth,t.southArrowNorthEast,t.southArrowNorthWest],n:[t.northArrowSouth],e:[t.eastArrowWest],w:[t.westArrowEast],sw:[t.southArrowNorthEast],se:[t.southArrowNorthWest]}[e]}_onKeyDown(e,t){t.key==="Escape"&&this._currentElementWithTooltip&&(this._unpinTooltip(),t.stopPropagation())}_onEnterOrFocus(e,{target:t}){let i=nI(t);if(!i){e.name==="focus"&&this._unpinTooltip();return}i!==this._currentElementWithTooltip&&(this._unpinTooltip(),e.name==="focus"&&!i.matches(":hover")?this._pinTooltip(i,iI(i)):this._pinTooltipDebounced(i,iI(i)))}_onLeaveOrBlur(e,{target:t,relatedTarget:i}){if(e.name==="mouseleave"){if(!Vi(t))return;let o=this.balloonPanelView.element,r=o&&(o===i||o.contains(i)),s=!r&&t===o;if(r){this._unpinTooltipDebounced.cancel();return}if(!s&&this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;let a=nI(t),l=nI(i);(s||a&&a!==l)&&this._unpinTooltipDebounced()}else{if(this._currentElementWithTooltip&&t!==this._currentElementWithTooltip)return;this._unpinTooltipDebounced()}}_onScroll(e,{target:t}){this._currentElementWithTooltip&&(t.contains(this.balloonPanelView.element)&&t.contains(this._currentElementWithTooltip)||this._unpinTooltip())}_pinTooltip(e,{text:t,position:i,cssClass:o}){this._unpinTooltip();let r=lt(n._editors.values()).ui.view.body;r.has(this.balloonPanelView)||r.add(this.balloonPanelView),this.tooltipTextView.text=t,this.balloonPanelView.class=[Dz,o].filter(s=>s).join(" "),this.balloonPanelView.pin({target:e,positions:n.getPositioningFunctions(i)}),this._mutationObserver.attach(e);for(let s of n._editors)this.listenTo(s.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"});this._currentElementWithTooltip=e,this._currentTooltipPosition=i}_unpinTooltip(){this._unpinTooltipDebounced.cancel(),this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();for(let e of n._editors)this.stopListening(e.ui,"update");this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this.tooltipTextView.text="",this._mutationObserver.detach()}_updateTooltipPosition(){if(!this._currentElementWithTooltip)return;let e=iI(this._currentElementWithTooltip);if(!Vo(this._currentElementWithTooltip)||!e.text){this._unpinTooltip();return}this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:n.getPositioningFunctions(e.position)})}};function nI(n){return Vi(n)?n.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function iI(n){return{text:n.dataset.ckeTooltipText,position:n.dataset.ckeTooltipPosition||"s",cssClass:n.dataset.ckeTooltipClass||""}}function afe(n){let e=new MutationObserver(()=>{n()});return{attach(t){e.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach(){e.disconnect()}}}var lfe=`<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>
`,cfe=53,dfe=10,ufe=50,hfe=350,mfe="Powered by",_I=class extends mn(){editor;_balloonView;_showBalloonThrottled;_lastFocusedEditableElement;constructor(e){super(),this.editor=e,this._balloonView=null,this._lastFocusedEditableElement=null,this._showBalloonThrottled=Ga(this._showBalloon.bind(this),50,{leading:!0}),e.on("ready",this._handleEditorReady.bind(this))}destroy(){let e=this._balloonView;e&&(e.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}_handleEditorReady(){let e=this.editor,t=!!e.config.get("ui.poweredBy.forceVisible");!t&&_7(e.config.get("licenseKey"))==="VALID"||e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(i,o,r)=>{this._updateLastFocusedEditableElement(),r?this._showBalloon():this._hideBalloon()}),e.ui.focusTracker.on("change:focusedElement",(i,o,r)=>{this._updateLastFocusedEditableElement(),r&&this._showBalloon()}),e.ui.on("update",()=>{this._showBalloonThrottled()}))}_createBalloonView(){let e=this.editor,t=this._balloonView=new al,i=qz(e),o=new CI(e.locale,i.label);t.content.add(o),t.set({class:"ck-powered-by-balloon"}),e.ui.view.body.add(t),this._balloonView=t}_showBalloon(){if(!this._lastFocusedEditableElement)return;let e=ffe(this.editor,this._lastFocusedEditableElement);e&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(e))}_hideBalloon(){this._balloonView&&this._balloonView.unpin()}_updateLastFocusedEditableElement(){let e=this.editor,t=e.ui.focusTracker.isFocused,i=e.ui.focusTracker.focusedElement;if(!t||!i){this._lastFocusedEditableElement=null;return}let o=Array.from(e.ui.getEditableElementsNames()).map(r=>e.ui.getEditableElement(r));o.includes(i)?this._lastFocusedEditableElement=i:this._lastFocusedEditableElement=o[0]}},CI=class extends Y{constructor(e,t){super(e);let i=new Ir,o=this.bindTemplate;i.set({content:lfe,isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:cfe+"px",height:dfe+"px"}}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/powered-by-ckeditor/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[...t?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[t]}]:[],i],on:{dragstart:o.to(r=>r.preventDefault())}}]})}};function ffe(n,e){let t=qz(n),i=t.side==="right"?pfe(e,t):gfe(e,t);return{target:e,positions:[i]}}function pfe(n,e){return Wz(n,e,(t,i)=>t.left+t.width-i.width-e.horizontalOffset)}function gfe(n,e){return Wz(n,e,t=>t.left+e.horizontalOffset)}function Wz(n,e,t){return(i,o)=>{let r=new Ae(n);if(r.width<hfe||r.height<ufe)return null;let s;e.position==="inside"?s=r.bottom-o.height:s=r.bottom-o.height/2,s-=e.verticalOffset;let a=t(r,o),c=i.clone().moveTo(a,s).getIntersection(o.clone().moveTo(a,s)).getVisible();return!c||c.getArea()<o.getArea()?null:{top:s,left:a,name:`position_${e.position}-side_${e.side}`,config:{withArrow:!1}}}}function qz(n){let e=n.config.get("ui.poweredBy"),t=e&&e.position||"border";return v({position:t,label:mfe,verticalOffset:t==="inside"?5:0,horizontalOffset:5,side:n.locale.contentLanguageDirection==="ltr"?"right":"left"},e)}var Pz={POLITE:"polite",ASSERTIVE:"assertive"},EI=class{editor;view;constructor(e){this.editor=e,e.once("ready",()=>{for(let t of Object.values(Pz))this.announce("",t)})}announce(e,t=Pz.POLITE){let i=this.editor;if(!i.ui.view)return;this.view||(this.view=new SI(i.locale),i.ui.view.body.add(this.view));let{politeness:o,isUnsafeHTML:r}=typeof t=="string"?{politeness:t}:t,s=this.view.regionViews.find(a=>a.politeness===o);s||(s=new xI(i,o),this.view.regionViews.add(s)),s.announce({announcement:e,isUnsafeHTML:r})}},SI=class extends Y{regionViews;constructor(e){super(e),this.regionViews=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:this.regionViews})}},xI=class extends Y{politeness;_domConverter;_pruneAnnouncementsInterval;constructor(e,t){super(e.locale),this.setTemplate({tag:"div",attributes:{"aria-live":t,"aria-relevant":"additions"},children:[{tag:"ul",attributes:{class:["ck","ck-aria-live-region-list"]}}]}),e.on("destroy",()=>{this._pruneAnnouncementsInterval!==null&&(clearInterval(this._pruneAnnouncementsInterval),this._pruneAnnouncementsInterval=null)}),this.politeness=t,this._domConverter=e.data.htmlProcessor.domConverter,this._pruneAnnouncementsInterval=setInterval(()=>{this.element&&this._listElement.firstChild&&this._listElement.firstChild.remove()},5e3)}announce({announcement:e,isUnsafeHTML:t}){if(!e.trim().length)return;let i=document.createElement("li");t?this._domConverter.setContentOf(i,e):i.innerText=e,this._listElement.appendChild(i)}get _listElement(){return this.element.querySelector("ul")}},Bn=class extends Uo{constructor(e,t){super(e);let i=this.bindTemplate;this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item"]},on:{mouseenter:i.to("mouseenter")}}),this.delegate("mouseenter").to(t)}},Hy=5,um={toggleMenusAndFocusItemsOnHover(n){n.on("menu:mouseenter",e=>{if(!(!n.isFocusBorderEnabled&&!n.isOpen)){if(n.isOpen)for(let t of n.menus){let i=e.path[0],o=i instanceof Bn&&i.children.first===t;t.isOpen=(e.path.includes(t)||o)&&t.isEnabled}e.source.focus()}})},focusCycleMenusOnArrows(n){let e=n.locale.uiLanguageDirection==="rtl";n.on("menu:arrowright",i=>{t(i.source,e?-1:1)}),n.on("menu:arrowleft",i=>{t(i.source,e?1:-1)});function t(i,o){let r=n.children.getIndex(i),s=i.isOpen,a=n.children.length,l=n.children.get((r+a+o)%a);i.isOpen=!1,s&&(l.isOpen=!0),l.buttonView.focus()}},closeMenusWhenTheBarCloses(n){n.on("change:isOpen",()=>{n.isOpen||n.menus.forEach(e=>{e.isOpen=!1})})},closeMenuWhenAnotherOnTheSameLevelOpens(n){n.on("menu:change:isOpen",(e,t,i)=>{i&&n.menus.filter(o=>e.source.parentMenuView===o.parentMenuView&&e.source!==o&&o.isOpen).forEach(o=>{o.isOpen=!1})})},closeOnClickOutside(n){cd({emitter:n,activator:()=>n.isOpen,callback:()=>n.close(),contextElements:()=>n.children.map(e=>e.element)})},enableFocusHighlightOnInteraction(n){let e=!1;n.on("change:isOpen",(t,i,o)=>{o||(e||(n.isFocusBorderEnabled=!1),e=!1)}),n.listenTo(n.element,"keydown",()=>{e=!0},{useCapture:!0}),n.listenTo(n.element,"keyup",()=>{e=!1},{useCapture:!0}),n.listenTo(n.element,"focus",()=>{e&&(n.isFocusBorderEnabled=!0)},{useCapture:!0})}},il={openAndFocusPanelOnArrowDownKey(n){n.keystrokes.set("arrowdown",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen||(n.isOpen=!0),n.panelView.focus(),t())})},openOnArrowRightKey(n){let e=n.locale.uiLanguageDirection==="rtl"?"arrowleft":"arrowright";n.keystrokes.set(e,(t,i)=>{n.focusTracker.focusedElement!==n.buttonView.element||!n.isEnabled||(n.isOpen||(n.isOpen=!0),n.panelView.focus(),i())})},openOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!0})},toggleOnButtonClick(n){n.buttonView.on("execute",()=>{n.isOpen=!n.isOpen})},openAndFocusOnEnterKeyPress(n){n.keystrokes.set("enter",(e,t)=>{n.focusTracker.focusedElement===n.buttonView.element&&(n.isOpen=!0,n.panelView.focus(),t())})},closeOnArrowLeftKey(n){let e=n.locale.uiLanguageDirection==="rtl"?"arrowright":"arrowleft";n.keystrokes.set(e,(t,i)=>{n.isOpen&&(n.isOpen=!1,n.focus(),i())})},closeOnEscKey(n){n.keystrokes.set("esc",(e,t)=>{n.isOpen&&(n.isOpen=!1,n.focus(),t())})},closeOnParentClose(n){n.parentMenuView.on("change:isOpen",(e,t,i)=>{!i&&e.source===n.parentMenuView&&(n.isOpen=!1)})}},bfe={southEast:n=>({top:n.bottom,left:n.left,name:"se"}),southWest:(n,e)=>({top:n.bottom,left:n.left-e.width+n.width,name:"sw"}),northEast:(n,e)=>({top:n.top-e.height,left:n.left,name:"ne"}),northWest:(n,e)=>({top:n.top-e.height,left:n.left-e.width+n.width,name:"nw"}),eastSouth:n=>({top:n.top,left:n.right-Hy,name:"es"}),eastNorth:(n,e)=>({top:n.top-e.height,left:n.right-Hy,name:"en"}),westSouth:(n,e)=>({top:n.top,left:n.left-e.width+Hy,name:"ws"}),westNorth:(n,e)=>({top:n.top-e.height,left:n.left-e.width+Hy,name:"wn"})},wfe=[{menuId:"file",label:"File",groups:[{groupId:"export",items:["menuBar:exportPdf","menuBar:exportWord"]},{groupId:"import",items:["menuBar:importWord"]},{groupId:"revisionHistory",items:["menuBar:revisionHistory"]}]},{menuId:"edit",label:"Edit",groups:[{groupId:"undo",items:["menuBar:undo","menuBar:redo"]},{groupId:"selectAll",items:["menuBar:selectAll"]},{groupId:"findAndReplace",items:["menuBar:findAndReplace"]}]},{menuId:"view",label:"View",groups:[{groupId:"sourceEditing",items:["menuBar:sourceEditing"]},{groupId:"showBlocks",items:["menuBar:showBlocks"]},{groupId:"previewMergeFields",items:["menuBar:previewMergeFields"]},{groupId:"restrictedEditing",items:["menuBar:restrictedEditing"]}]},{menuId:"insert",label:"Insert",groups:[{groupId:"insertMainWidgets",items:["menuBar:insertImage","menuBar:ckbox","menuBar:ckfinder","menuBar:insertTable"]},{groupId:"insertInline",items:["menuBar:link","menuBar:comment","menuBar:insertMergeField"]},{groupId:"insertMinorWidgets",items:["menuBar:mediaEmbed","menuBar:insertTemplate","menuBar:specialCharacters","menuBar:blockQuote","menuBar:codeBlock","menuBar:htmlEmbed"]},{groupId:"insertStructureWidgets",items:["menuBar:horizontalLine","menuBar:pageBreak","menuBar:tableOfContents"]},{groupId:"restrictedEditingException",items:["menuBar:restrictedEditingException"]}]},{menuId:"format",label:"Format",groups:[{groupId:"textAndFont",items:[{menuId:"text",label:"Text",groups:[{groupId:"basicStyles",items:["menuBar:bold","menuBar:italic","menuBar:underline","menuBar:strikethrough","menuBar:superscript","menuBar:subscript","menuBar:code"]},{groupId:"textPartLanguage",items:["menuBar:textPartLanguage"]}]},{menuId:"font",label:"Font",groups:[{groupId:"fontProperties",items:["menuBar:fontSize","menuBar:fontFamily"]},{groupId:"fontColors",items:["menuBar:fontColor","menuBar:fontBackgroundColor"]},{groupId:"highlight",items:["menuBar:highlight"]}]},"menuBar:heading"]},{groupId:"list",items:["menuBar:bulletedList","menuBar:numberedList","menuBar:multiLevelList","menuBar:todoList"]},{groupId:"indent",items:["menuBar:alignment","menuBar:indent","menuBar:outdent"]},{groupId:"caseChange",items:["menuBar:caseChange"]},{groupId:"removeFormat",items:["menuBar:removeFormat"]}]},{menuId:"tools",label:"Tools",groups:[{groupId:"aiTools",items:["menuBar:aiAssistant","menuBar:aiCommands"]},{groupId:"tools",items:["menuBar:trackChanges","menuBar:commentsArchive"]}]},{menuId:"help",label:"Help",groups:[{groupId:"help",items:["menuBar:accessibilityHelp"]}]}];function kfe(n){let e;return!("items"in n)||!n.items?e=v({items:Nn(wfe),addItems:[],removeItems:[],isVisible:!0,isUsingDefaultConfig:!0},n):e=v({items:n.items,removeItems:[],addItems:[],isVisible:!0,isUsingDefaultConfig:!1},n),e}function vfe({normalizedConfig:n,locale:e,componentFactory:t,extraItems:i}){let o=Nn(n);return Rz(n,o,i),yfe(n,o),Rz(n,o,o.addItems),_fe(n,o,t),Gz(n,o),Cfe(o,e),o}function yfe(n,e){let t=e.removeItems,i=[];e.items=e.items.filter(({menuId:o})=>t.includes(o)?(i.push(o),!1):!0),vm(e.items,o=>{o.groups=o.groups.filter(({groupId:r})=>t.includes(r)?(i.push(r),!1):!0);for(let r of o.groups)r.items=r.items.filter(s=>{let a=Kz(s);return t.includes(a)?(i.push(a),!1):!0})});for(let o of t)i.includes(o)||Ve("menu-bar-item-could-not-be-removed",{menuBarConfig:n,itemName:o})}function Rz(n,e,t){let i=[];if(t.length!=0){for(let o of t){let r=xfe(o.position),s=Afe(o.position);if(Efe(o))if(!s)r==="start"?(e.items.unshift(o.menu),i.push(o)):r==="end"&&(e.items.push(o.menu),i.push(o));else{let a=e.items.findIndex(l=>l.menuId===s);a!=-1?r==="before"?(e.items.splice(a,0,o.menu),i.push(o)):r==="after"&&(e.items.splice(a+1,0,o.menu),i.push(o)):Nz(e,o.menu,s,r)&&i.push(o)}else Sfe(o)?vm(e.items,a=>{if(a.menuId===s)r==="start"?(a.groups.unshift(o.group),i.push(o)):r==="end"&&(a.groups.push(o.group),i.push(o));else{let l=a.groups.findIndex(c=>c.groupId===s);l!==-1&&(r==="before"?(a.groups.splice(l,0,o.group),i.push(o)):r==="after"&&(a.groups.splice(l+1,0,o.group),i.push(o)))}}):Nz(e,o.item,s,r)&&i.push(o)}for(let o of t)i.includes(o)||Ve("menu-bar-item-could-not-be-added",{menuBarConfig:n,addedItemConfig:o})}}function Nz(n,e,t,i){let o=!1;return vm(n.items,r=>{for(let{groupId:s,items:a}of r.groups){if(o)return;if(s===t)i==="start"?(a.unshift(e),o=!0):i==="end"&&(a.push(e),o=!0);else{let l=a.findIndex(c=>Kz(c)===t);l!==-1&&(i==="before"?(a.splice(l,0,e),o=!0):i==="after"&&(a.splice(l+1,0,e),o=!0))}}}),o}function _fe(n,e,t){vm(e.items,i=>{for(let o of i.groups)o.items=o.items.filter(r=>{let s=typeof r=="string"&&!t.has(r);return s&&!e.isUsingDefaultConfig&&Ve("menu-bar-item-unavailable",{menuBarConfig:n,parentMenuConfig:Nn(i),componentName:r}),!s})})}function Gz(n,e){let t=e.isUsingDefaultConfig,i=!1;if(e.items=e.items.filter(o=>o.groups.length?!0:(oI(n,o,t),!1)),!e.items.length){oI(n,n,t);return}vm(e.items,o=>{o.groups=o.groups.filter(r=>r.items.length?!0:(i=!0,!1));for(let r of o.groups)r.items=r.items.filter(s=>Qz(s)&&!s.groups.length?(oI(n,s,t),i=!0,!1):!0)}),i&&Gz(n,e)}function oI(n,e,t){t||Ve("menu-bar-menu-empty",{menuBarConfig:n,emptyMenuConfig:e})}function Cfe(n,e){let t=e.t,i={File:t({string:"File",id:"MENU_BAR_MENU_FILE"}),Edit:t({string:"Edit",id:"MENU_BAR_MENU_EDIT"}),View:t({string:"View",id:"MENU_BAR_MENU_VIEW"}),Insert:t({string:"Insert",id:"MENU_BAR_MENU_INSERT"}),Format:t({string:"Format",id:"MENU_BAR_MENU_FORMAT"}),Tools:t({string:"Tools",id:"MENU_BAR_MENU_TOOLS"}),Help:t({string:"Help",id:"MENU_BAR_MENU_HELP"}),Text:t({string:"Text",id:"MENU_BAR_MENU_TEXT"}),Font:t({string:"Font",id:"MENU_BAR_MENU_FONT"})};vm(n.items,o=>{o.label in i&&(o.label=i[o.label])})}function vm(n,e){if(Array.isArray(n))for(let i of n)t(i);function t(i){e(i);for(let o of i.groups)for(let r of o.items)Qz(r)&&t(r)}}function Efe(n){return typeof n=="object"&&"menu"in n}function Sfe(n){return typeof n=="object"&&"group"in n}function xfe(n){return n.startsWith("start")?"start":n.startsWith("end")?"end":n.startsWith("after")?"after":"before"}function Afe(n){let e=n.match(/^[^:]+:(.+)/);return e?e[1]:null}function Kz(n){return typeof n=="string"?n:n.menuId}function Qz(n){return typeof n=="object"&&"menuId"in n}var ll=class extends Ze(){editor;componentFactory;focusTracker;tooltipManager;poweredBy;ariaLiveAnnouncer;isReady=!1;_editableElementsMap=new Map;_focusableToolbarDefinitions=[];_extraMenuBarElements=[];_lastFocusedForeignElement=null;constructor(e){super();let t=e.editing.view;this.editor=e,this.componentFactory=new vI(e),this.focusTracker=new Et,this.tooltipManager=new yI(e),this.poweredBy=new _I(e),this.ariaLiveAnnouncer=new EI(e),this.set("viewportOffset",this._readViewportOffsetFromConfig()),this.once("ready",()=>{this._bindBodyCollectionWithFocusTracker(),this.isReady=!0}),this.listenTo(t.document,"layoutChanged",this.update.bind(this)),this.listenTo(t,"scrollToTheSelection",this._handleScrollToTheSelection.bind(this)),this._initFocusTracking()}get element(){return null}update(){this.fire("update")}destroy(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();for(let e of this._editableElementsMap.values())e.ckeditorInstance=null,this.editor.keystrokes.stopListening(e);this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}setEditableElement(e,t){this._editableElementsMap.set(e,t),t.ckeditorInstance||(t.ckeditorInstance=this.editor),this.focusTracker.add(t);let i=()=>{this.editor.editing.view.getDomRoot(e)||this.editor.keystrokes.listenTo(t)};this.isReady?i():this.once("ready",i)}removeEditableElement(e){let t=this._editableElementsMap.get(e);t&&(this._editableElementsMap.delete(e),this.editor.keystrokes.stopListening(t),this.focusTracker.remove(t),t.ckeditorInstance=null)}getEditableElement(e="main"){return this._editableElementsMap.get(e)}getEditableElementsNames(){return this._editableElementsMap.keys()}addToolbar(e,t={}){e.isRendered?(this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)):e.once("render",()=>{this.focusTracker.add(e),this.editor.keystrokes.listenTo(e.element)}),this._focusableToolbarDefinitions.push({toolbarView:e,options:t})}extendMenuBar(e){this._extraMenuBarElements.push(e)}get _editableElements(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}_initMenuBar(e){let t=e.element;this.focusTracker.add(t),this.editor.keystrokes.listenTo(t);let i=kfe(this.editor.config.get("menuBar")||{});e.fillFromConfig(i,this.componentFactory,this._extraMenuBarElements),this.editor.keystrokes.set("Esc",(o,r)=>{t.contains(this.editor.ui.focusTracker.focusedElement)&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):this.editor.editing.view.focus(),r())}),this.editor.keystrokes.set("Alt+F9",(o,r)=>{t.contains(this.editor.ui.focusTracker.focusedElement)||(this._saveLastFocusedForeignElement(),e.isFocusBorderEnabled=!0,e.focus(),r())})}_readViewportOffsetFromConfig(){let e=this.editor,t=e.config.get("ui.viewportOffset");if(t)return t;let i=e.config.get("toolbar.viewportTopOffset");return i?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:i}):{top:0}}_initFocusTracking(){let e=this.editor,t;e.keystrokes.set("Alt+F10",(i,o)=>{this._saveLastFocusedForeignElement();let r=this._getCurrentFocusedToolbarDefinition();(!r||!t)&&(t=this._getFocusableCandidateToolbarDefinitions());for(let s=0;s<t.length;s++){let a=t.shift();if(t.push(a),a!==r&&this._focusFocusableCandidateToolbar(a)){r&&r.options.afterBlur&&r.options.afterBlur();break}}o()}),e.keystrokes.set("Esc",(i,o)=>{let r=this._getCurrentFocusedToolbarDefinition();r&&(this._lastFocusedForeignElement?(this._lastFocusedForeignElement.focus(),this._lastFocusedForeignElement=null):e.editing.view.focus(),r.options.afterBlur&&r.options.afterBlur(),o())})}_saveLastFocusedForeignElement(){let e=this.focusTracker.focusedElement;Array.from(this._editableElementsMap.values()).includes(e)&&!Array.from(this.editor.editing.view.domRoots.values()).includes(e)&&(this._lastFocusedForeignElement=e)}_getFocusableCandidateToolbarDefinitions(){let e=[];for(let t of this._focusableToolbarDefinitions){let{toolbarView:i,options:o}=t;(Vo(i.element)||o.beforeFocus)&&e.push(t)}return e.sort((t,i)=>Oz(t)-Oz(i)),e}_getCurrentFocusedToolbarDefinition(){for(let e of this._focusableToolbarDefinitions)if(e.toolbarView.element&&e.toolbarView.element.contains(this.focusTracker.focusedElement))return e;return null}_focusFocusableCandidateToolbar(e){let{toolbarView:t,options:{beforeFocus:i}}=e;return i&&i(),Vo(t.element)?(t.focus(),!0):!1}_handleScrollToTheSelection(e,t){let i=v({top:0,bottom:0,left:0,right:0},this.viewportOffset);t.viewportOffset.top+=i.top,t.viewportOffset.bottom+=i.bottom,t.viewportOffset.left+=i.left,t.viewportOffset.right+=i.right}_bindBodyCollectionWithFocusTracker(){let e=this.view.body;for(let t of e)this.focusTracker.add(t.element);e.on("add",(t,i)=>{this.focusTracker.add(i.element)}),e.on("remove",(t,i)=>{this.focusTracker.remove(i.element)})}};function Oz(n){let{toolbarView:e,options:t}=n,i=10;return Vo(e.element)&&i--,t.isContextual&&i--,i}var ld=class extends Y{body;menuBarView;constructor(e){super(e),this.body=new dI(e)}render(){super.render(),this.body.attachToDom()}destroy(){return this.body.detachFromDom(),super.destroy()}},Zy=class extends ld{top;main;_voiceLabelView;constructor(e){super(e),this.top=this.createCollection(),this.main=this.createCollection(),this._voiceLabelView=this._createVoiceLabel(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:e.uiLanguageDirection,lang:e.uiLanguage,"aria-labelledby":this._voiceLabelView.id},children:[this._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:this.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:this.main}]})}_createVoiceLabel(){let e=this.t,t=new rl;return t.text=e("Rich Text Editor"),t.extendTemplate({attributes:{class:"ck-voice-label"}}),t}},AI=class extends Y{name=null;_editingView;_editableElement;_hasExternalElement;constructor(e,t,i){super(e),this.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}}),this.set("isFocused",!1),this._editableElement=i,this._hasExternalElement=!!this._editableElement,this._editingView=t}render(){super.render(),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",()=>this._updateIsFocusedClasses()),this._updateIsFocusedClasses()}destroy(){this._hasExternalElement&&this.template.revert(this._editableElement),super.destroy()}get hasExternalElement(){return this._hasExternalElement}_updateIsFocusedClasses(){let e=this._editingView;e.isRenderingInProgress?i(this):t(this);function t(o){e.change(r=>{let s=e.document.getRoot(o.name);r.addClass(o.isFocused?"ck-focused":"ck-blurred",s),r.removeClass(o.isFocused?"ck-blurred":"ck-focused",s)})}function i(o){e.once("change:isRenderingInProgress",(r,s,a)=>{a?i(o):t(o)})}}},cl=class extends AI{_options;constructor(e,t,i,o={}){super(e,t,i),this._options=o,this.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}})}render(){super.render();let e=this._editingView;e.change(t=>{let i=e.document.getRoot(this.name);t.setAttribute("aria-label",this.getEditableAriaLabel(),i)})}getEditableAriaLabel(){let e=this.locale.t,t=this._options.label,i=this._editableElement,o=this.name;if(typeof t=="string")return t;if(typeof t=="object")return t[o];if(typeof t=="function")return t(this);if(i){let r=i.getAttribute("aria-label");if(r)return r}return e("Rich Text Editor. Editing area: %0",o)}};var fo=class extends Ze(){constructor(e,t){super(),t&&Ih(this,t),e&&this.set(e)}},Uy=Ts("px"),Ns=class extends M{positionLimiter;visibleStack;_viewToStack=new Map;_idToStack=new Map;_view=null;_rotatorView=null;_fakePanelsView=null;static get pluginName(){return"ContextualBalloon"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.positionLimiter=()=>{let t=this.editor.editing.view,o=t.document.selection.editableElement;return o?t.domConverter.mapViewToDom(o.root):null},this.decorate("getPositionOptions"),this.set("visibleView",null),this.set("_numberOfStacks",0),this.set("_singleViewMode",!1)}destroy(){super.destroy(),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}get view(){return this._view||this._createPanelView(),this._view}hasView(e){return Array.from(this._viewToStack.keys()).includes(e)}add(e){if(this._view||this._createPanelView(),this.hasView(e.view))throw new _("contextualballoon-add-view-exist",[this,e]);let t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]])),this._viewToStack.set(e.view,this._idToStack.get(t)),this._numberOfStacks=this._idToStack.size,(!this._visibleStack||e.singleViewMode)&&this.showStack(t);return}let i=this._idToStack.get(t);e.singleViewMode&&this.showStack(t),i.set(e.view,e),this._viewToStack.set(e.view,i),i===this._visibleStack&&this._showView(e)}remove(e){if(!this.hasView(e))throw new _("contextualballoon-remove-view-not-exist",[this,e]);let t=this._viewToStack.get(e);this._singleViewMode&&this.visibleView===e&&(this._singleViewMode=!1),this.visibleView===e&&(t.size===1?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(t.values())[t.size-2])),t.size===1?(this._idToStack.delete(this._getStackId(t)),this._numberOfStacks=this._idToStack.size):t.delete(e),this._viewToStack.delete(e)}updatePosition(e){e&&(this._visibleStack.get(this.visibleView).position=e),this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition()}getPositionOptions(){let e=Array.from(this._visibleStack.values()).pop().position;return e&&(e.limiter||(e=Object.assign({},e,{limiter:this.positionLimiter})),e=Object.assign({},e,{viewportOffsetConfig:this.editor.ui.viewportOffset})),e}showStack(e){this.visibleStack=e;let t=this._idToStack.get(e);if(!t)throw new _("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==t&&this._showView(Array.from(t.values()).pop())}_createPanelView(){this._view=new al(this.editor.locale),this.editor.ui.view.body.add(this._view),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}get _visibleStack(){return this._viewToStack.get(this.visibleView)}_getStackId(e){return Array.from(this._idToStack.entries()).find(i=>i[1]===e)[0]}_showNextStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)+1;e[t]||(t=0),this.showStack(this._getStackId(e[t]))}_showPrevStack(){let e=Array.from(this._idToStack.values()),t=e.indexOf(this._visibleStack)-1;e[t]||(t=e.length-1),this.showStack(this._getStackId(e[t]))}_createRotatorView(){let e=new TI(this.editor.locale),t=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(i,o)=>!o&&i>1),e.on("change:isNavigationVisible",()=>this.updatePosition(),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(i,o)=>{if(o<2)return"";let r=Array.from(this._idToStack.values()).indexOf(this._visibleStack)+1;return t("%0 of %1",[r,o])}),e.buttonNextView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showNextStack()}),e.buttonPrevView.on("execute",()=>{e.focusTracker.isFocused&&this.editor.editing.view.focus(),this._showPrevStack()}),e}_createFakePanelsView(){let e=new II(this.editor.locale,this.view);return e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(t,i)=>!i&&t>=2?Math.min(t-1,2):0),e.listenTo(this.view,"change:top",()=>e.updatePosition()),e.listenTo(this.view,"change:left",()=>e.updatePosition()),this.editor.ui.view.body.add(e),e}_showView({view:e,balloonClassName:t="",withArrow:i=!0,singleViewMode:o=!1}){this.view.class=t,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this.getPositionOptions()),this._fakePanelsView.updatePosition(),o&&(this._singleViewMode=!0)}},TI=class extends Y{focusTracker;buttonPrevView;buttonNextView;content;constructor(e){super(e);let t=e.t,i=this.bindTemplate;this.set("isNavigationVisible",!0),this.focusTracker=new Et,this.buttonPrevView=this._createButtonView(t("Previous"),ee.previousArrow),this.buttonNextView=this._createButtonView(t("Next"),ee.nextArrow),this.content=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",i.to("isNavigationVisible",o=>o?"":"ck-hidden")]},children:[this.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},this.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:this.content}]})}render(){super.render(),this.focusTracker.add(this.element)}destroy(){super.destroy(),this.focusTracker.destroy()}showView(e){this.hideView(),this.content.add(e)}hideView(){this.content.clear()}_createButtonView(e,t){let i=new oe(this.locale);return i.set({label:e,icon:t,tooltip:!0}),i}},II=class extends Y{content;_balloonPanelView;constructor(e,t){super(e);let i=this.bindTemplate;this.set("top",0),this.set("left",0),this.set("height",0),this.set("width",0),this.set("numberOfPanels",0),this.content=this.createCollection(),this._balloonPanelView=t,this.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",i.to("numberOfPanels",o=>o?"":"ck-hidden")],style:{top:i.to("top",Uy),left:i.to("left",Uy),width:i.to("width",Uy),height:i.to("height",Uy)}},children:this.content}),this.on("change:numberOfPanels",(o,r,s,a)=>{s>a?this._addPanels(s-a):this._removePanels(a-s),this.updatePosition()})}_addPanels(e){for(;e--;){let t=new Y;t.setTemplate({tag:"div"}),this.content.add(t),this.registerChild(t)}}_removePanels(e){for(;e--;){let t=this.content.last;this.content.remove(t),this.deregisterChild(t),t.destroy()}}updatePosition(){if(this.numberOfPanels){let{top:e,left:t}=this._balloonPanelView,{width:i,height:o}=new Ae(this._balloonPanelView.element);Object.assign(this,{top:e,left:t,width:i,height:o})}}},hm=Ts("px"),Jy=class extends Y{content;contentPanelElement;_contentPanelPlaceholder;constructor(e){super(e);let t=this.bindTemplate;this.set("isActive",!1),this.set("isSticky",!1),this.set("limiterElement",null),this.set("limiterBottomOffset",50),this.set("viewportTopOffset",0),this.set("_marginLeft",null),this.set("_isStickyToTheBottomOfLimiter",!1),this.set("_stickyTopOffset",null),this.set("_stickyBottomOffset",null),this.content=this.createCollection(),this._contentPanelPlaceholder=new Ln({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:t.to("isSticky",i=>i?"block":"none"),height:t.to("isSticky",i=>i?hm(this._contentPanelRect.height):null)}}}).render(),this.contentPanelElement=new Ln({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",t.if("isSticky","ck-sticky-panel__content_sticky"),t.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:t.to("isSticky",i=>i?hm(this._contentPanelPlaceholder.getBoundingClientRect().width):null),top:t.to("_stickyTopOffset",i=>i&&hm(i)),bottom:t.to("_stickyBottomOffset",i=>i&&hm(i)),marginLeft:t.to("_marginLeft")}},children:this.content}).render(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[this._contentPanelPlaceholder,this.contentPanelElement]})}render(){super.render(),this.checkIfShouldBeSticky(),this.listenTo(U.document,"scroll",()=>{this.checkIfShouldBeSticky()},{useCapture:!0}),this.listenTo(this,"change:isActive",()=>{this.checkIfShouldBeSticky()})}checkIfShouldBeSticky(){if(!this.limiterElement||!this.isActive){this._unstick();return}let e=new Ae(this.limiterElement),t=e.getVisible();if(t){let i=new Ae(U.window);i.top+=this.viewportTopOffset,i.height-=this.viewportTopOffset,t=t.getIntersection(i)}if(t&&e.top<t.top){let i=t.top;if(i+this._contentPanelRect.height+this.limiterBottomOffset>t.bottom){let o=Math.max(e.bottom-t.bottom,0)+this.limiterBottomOffset;e.bottom-o>e.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<e.height?this._stickToTopOfAncestors(i):this._unstick()}else this._unstick()}_stickToTopOfAncestors(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=e,this._stickyBottomOffset=null,this._marginLeft=hm(-U.window.scrollX)}_stickToBottomOfLimiter(e){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=e,this._marginLeft=hm(-U.window.scrollX)}_unstick(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}get _contentPanelRect(){return new Ae(this.contentPanelElement)}};var MI=class extends ol{arrowView;constructor(e){super(e);let t=this.bindTemplate;this.set({withText:!0,role:"menuitem"}),this.arrowView=this._createArrowView(),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__button"],"aria-haspopup":!0,"aria-expanded":this.bindTemplate.to("isOn",i=>String(i)),"data-cke-tooltip-disabled":t.to("isOn")},on:{mouseenter:t.to("mouseenter")}})}render(){super.render(),this.children.add(this.arrowView)}_createArrowView(){let e=new Ir;return e.content=NI,e.extendTemplate({attributes:{class:"ck-menu-bar__menu__button__arrow"}}),e}},DI=class extends Y{children;constructor(e){super(e);let t=this.bindTemplate;this.set("isVisible",!1),this.set("position","se"),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-menu-bar__menu__panel",t.to("position",i=>`ck-menu-bar__menu__panel_position_${i}`),t.if("isVisible","ck-hidden",i=>!i)],tabindex:"-1"},children:this.children,on:{selectstart:t.to(i=>{i.target.tagName.toLocaleLowerCase()!=="input"&&i.preventDefault()})}})}focus(e=1){this.children.length&&(e===1?this.children.first.focus():this.children.last.focus())}},Fn=(()=>{class n extends Y{buttonView;panelView;focusTracker;keystrokes;constructor(t){super(t);let i=this.bindTemplate;this.buttonView=new MI(t),this.buttonView.delegate("mouseenter").to(this),this.buttonView.bind("isOn","isEnabled").to(this,"isOpen","isEnabled"),this.panelView=new DI(t),this.panelView.bind("isVisible").to(this,"isOpen"),this.keystrokes=new Ft,this.focusTracker=new Et,this.set("isOpen",!1),this.set("isEnabled",!0),this.set("panelPosition","w"),this.set("class",void 0),this.set("parentMenuView",null),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar__menu",i.to("class"),i.if("isEnabled","ck-disabled",o=>!o),i.if("parentMenuView","ck-menu-bar__menu_top-level",o=>!o)]},children:[this.buttonView,this.panelView]})}render(){super.render(),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.keystrokes.listenTo(this.element),il.closeOnEscKey(this),this._repositionPanelOnOpen()}_attachBehaviors(){this.parentMenuView?(il.openOnButtonClick(this),il.openOnArrowRightKey(this),il.closeOnArrowLeftKey(this),il.openAndFocusOnEnterKeyPress(this),il.closeOnParentClose(this)):(this._propagateArrowKeystrokeEvents(),il.openAndFocusPanelOnArrowDownKey(this),il.toggleOnButtonClick(this))}_propagateArrowKeystrokeEvents(){this.keystrokes.set("arrowright",(t,i)=>{this.fire("arrowright"),i()}),this.keystrokes.set("arrowleft",(t,i)=>{this.fire("arrowleft"),i()})}_repositionPanelOnOpen(){this.on("change:isOpen",(t,i,o)=>{if(!o)return;let r=n._getOptimalPosition({element:this.panelView.element,target:this.buttonView.element,fitInViewport:!0,positions:this._panelPositions});this.panelView.position=r?r.name:this._panelPositions[0].name})}focus(){this.buttonView.focus()}get _panelPositions(){let{southEast:t,southWest:i,northEast:o,northWest:r,westSouth:s,eastSouth:a,westNorth:l,eastNorth:c}=bfe;return this.locale.uiLanguageDirection==="ltr"?this.parentMenuView?[a,c,s,l]:[t,i,o,r]:this.parentMenuView?[s,l,a,c]:[i,t,r,o]}static _getOptimalPosition=ky}return n})(),oi=class extends pm{constructor(e){super(e),this.role="menu",this.items.on("change",this._setItemsCheckSpace.bind(this))}_setItemsCheckSpace(){let e=Array.from(this.items).some(t=>{let i=Lz(t);return i&&i.isToggleable});this.items.forEach(t=>{let i=Lz(t);i&&(i.hasCheckSpace=e)})}};function Lz(n){return n instanceof Uo?n.children.map(e=>Tfe(e)?e.buttonView:e).find(e=>e instanceof ol):null}function Tfe(n){return typeof n=="object"&&"buttonView"in n&&n.buttonView instanceof oe}var Xy=class extends uI{constructor(e){super(e),this.set({withText:!0,withKeystroke:!0,tooltip:!1,role:"menuitem"}),this.extendTemplate({attributes:{class:["ck-menu-bar__menu__item__button"]}})}},Fz=["mouseenter","arrowleft","arrowright","change:isOpen"],dl=class extends Y{children;menus=[];constructor(e){super(e);let t=e.t,i=this.bindTemplate;this.set({isOpen:!1,isFocusBorderEnabled:!1}),this._setupIsOpenUpdater(),this.children=this.createCollection(),this.setTemplate({tag:"div",attributes:{class:["ck","ck-menu-bar",i.if("isFocusBorderEnabled","ck-menu-bar_focus-border-enabled")],"aria-label":t("Editor menu bar"),role:"menubar"},children:this.children})}fillFromConfig(e,t,i=[]){let o=this.locale,s=vfe({normalizedConfig:e,locale:o,componentFactory:t,extraItems:i}).items.map(a=>this._createMenu({componentFactory:t,menuDefinition:a}));this.children.addMany(s)}render(){super.render(),um.toggleMenusAndFocusItemsOnHover(this),um.closeMenusWhenTheBarCloses(this),um.closeMenuWhenAnotherOnTheSameLevelOpens(this),um.focusCycleMenusOnArrows(this),um.closeOnClickOutside(this),um.enableFocusHighlightOnInteraction(this)}focus(){this.children.first&&this.children.first.focus()}close(){for(let e of this.children)e.isOpen=!1}registerMenu(e,t=null){t?(e.delegate(...Fz).to(t),e.parentMenuView=t):e.delegate(...Fz).to(this,i=>"menu:"+i),e._attachBehaviors(),this.menus.push(e)}_createMenu({componentFactory:e,menuDefinition:t,parentMenuView:i}){let o=this.locale,r=new Fn(o);return this.registerMenu(r,i),r.buttonView.set({label:t.label}),r.once("change:isOpen",()=>{let s=new oi(o);s.ariaLabel=t.label,r.panelView.children.add(s),s.items.addMany(this._createMenuItems({menuDefinition:t,parentMenuView:r,componentFactory:e}))}),r}_createMenuItems({menuDefinition:e,parentMenuView:t,componentFactory:i}){let o=this.locale,r=[];for(let s of e.groups){for(let a of s.items){let l=new Bn(o,t);if(De(a))l.children.add(this._createMenu({componentFactory:i,menuDefinition:a,parentMenuView:t}));else{let c=this._createMenuItemContentFromFactory({componentName:a,componentFactory:i,parentMenuView:t});if(!c)continue;l.children.add(c)}r.push(l)}s!==e.groups[e.groups.length-1]&&r.push(new sl(o))}return r}_createMenuItemContentFromFactory({componentName:e,parentMenuView:t,componentFactory:i}){let o=i.create(e);return o instanceof Fn||o instanceof be||o instanceof Xy?(this._registerMenuTree(o,t),o.on("execute",()=>{this.close()}),o):(Ve("menu-bar-component-unsupported",{componentName:e,componentView:o}),null)}_registerMenuTree(e,t){if(!(e instanceof Fn)){e.delegate("mouseenter").to(t);return}this.registerMenu(e,t);let i=e.panelView.children.filter(r=>r instanceof oi)[0];if(!i){e.delegate("mouseenter").to(t);return}let o=i.items.filter(r=>r instanceof Uo);for(let r of o)this._registerMenuTree(r.children.get(0),e)}_setupIsOpenUpdater(){let e;this.on("menu:change:isOpen",(t,i,o)=>{clearTimeout(e),o?this.isOpen=!0:e=setTimeout(()=>{this.isOpen=Array.from(this.children).some(r=>r.isOpen)},0)})}};var o_=class{model;limit;_isLocked;_size;_batch=null;_changeCallback;_selectionChangeCallback;constructor(e,t=20){this.model=e,this._size=0,this.limit=t,this._isLocked=!1,this._changeCallback=(i,o)=>{o.isLocal&&o.isUndoable&&o!==this._batch&&this._reset(!0)},this._selectionChangeCallback=()=>{this._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)}get batch(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}get size(){return this._size}input(e){this._size+=e,this._size>=this.limit&&this._reset(!0)}get isLocked(){return this._isLocked}lock(){this._isLocked=!0}unlock(){this._isLocked=!1}destroy(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}_reset(e=!1){(!this.isLocked||e)&&(this._batch=null,this._size=0)}},OI=class extends te{_buffer;constructor(e,t){super(e),this._buffer=new o_(e.model,t),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}destroy(){super.destroy(),this._buffer.destroy()}execute(e={}){let t=this.editor.model,i=t.document,o=e.text||"",r=o.length,s=i.selection;if(e.selection?s=e.selection:e.range&&(s=t.createSelection(e.range)),!t.canEditAt(s))return;let a=e.resultRange;t.enqueueChange(this._buffer.batch,l=>{this._buffer.lock();let c=Array.from(i.selection.getAttributes());t.deleteContent(s),o&&t.insertContent(l.createText(o,c),s),a?l.setSelection(a):s.is("documentSelection")||l.setSelection(s),this._buffer.unlock(),this._buffer.input(r)})}},Xz=["insertText","insertReplacementText"],Ife=[...Xz,"insertCompositionText"],LI=class extends ti{focusObserver;constructor(e){super(e),this.focusObserver=e.getObserver(ed);let t=ie.isAndroid?Ife:Xz,i=e.document;i.on("beforeinput",(o,r)=>{if(!this.isEnabled)return;let{data:s,targetRanges:a,inputType:l,domEvent:c}=r;if(!t.includes(l))return;this.focusObserver.flush();let d=new yi(i,"insertText");i.fire(d,new Sr(e,c,{text:s,selection:e.createSelection(a)})),d.stop.called&&o.stop()}),ie.isAndroid||i.on("compositionend",(o,{data:r,domEvent:s})=>{this.isEnabled&&r&&i.fire("insertText",new Sr(e,s,{text:r}))},{priority:"lowest"})}observe(){}stopObserving(){}},eb=class extends M{_compositionQueue;static get pluginName(){return"Input"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model,i=e.editing.view,o=e.editing.mapper,r=t.document.selection;this._compositionQueue=new FI(e),i.addObserver(LI);let s=new OI(e,e.config.get("typing.undoStep")||20);e.commands.add("insertText",s),e.commands.add("input",s),this.listenTo(i.document,"insertText",(a,l)=>{i.document.isComposing||l.preventDefault(),ie.isAndroid&&i.document.isComposing&&this._compositionQueue.flush("next beforeinput");let{text:c,selection:d}=l,f;d?f=Array.from(d.getRanges()).map(w=>o.toModelRange(w)):f=Array.from(r.getRanges());let p=c;if(ie.isAndroid){let w=Array.from(f[0].getItems()).reduce((k,C)=>k+(C.is("$textProxy")?C.data:""),"");if(w&&(w.length<=p.length?p.startsWith(w)&&(p=p.substring(w.length),f[0].start=f[0].start.getShiftedBy(w.length)):w.startsWith(p)&&(f[0].start=f[0].start.getShiftedBy(p.length),p="")),p.length==0&&f[0].isCollapsed)return}let g={text:p,selection:t.createSelection(f)};ie.isAndroid&&i.document.isComposing?this._compositionQueue.push(g):(e.execute("insertText",g),i.scrollToTheSelection())}),ie.isAndroid?this.listenTo(i.document,"keydown",(a,l)=>{r.isCollapsed||l.keyCode!=229||!i.document.isComposing||Yz(t,s)}):this.listenTo(i.document,"compositionstart",()=>{r.isCollapsed||Yz(t,s)}),ie.isAndroid?(this.listenTo(i.document,"mutations",(a,{mutations:l})=>{if(i.document.isComposing)for(let{node:c}of l){let d=Dfe(c,o),f=o.toModelElement(d);if(this._compositionQueue.isComposedElement(f)){this._compositionQueue.flush("mutations");return}}}),this.listenTo(i.document,"compositionend",()=>{this._compositionQueue.flush("composition end")}),this.listenTo(i.document,"compositionend",()=>{let a=[];for(let l of this._compositionQueue.flushComposedElements()){let c=o.toViewElement(l);c&&a.push({type:"children",node:c})}a.length&&i.document.fire("mutations",{mutations:a})},{priority:"lowest"})):this.listenTo(i.document,"compositionend",()=>{i.document.fire("mutations",{mutations:[]})},{priority:"lowest"})}destroy(){super.destroy(),this._compositionQueue.destroy()}},FI=class{editor;flushDebounced=lo(()=>this.flush("timeout"),50);_queue=[];_compositionElements=new Set;constructor(e){this.editor=e}destroy(){for(this.flushDebounced.cancel(),this._compositionElements.clear();this._queue.length;)this.shift()}get length(){return this._queue.length}push(e){let t={text:e.text};if(e.selection){t.selectionRanges=[];for(let i of e.selection.getRanges())t.selectionRanges.push(pn.fromRange(i)),this._compositionElements.add(i.start.parent)}this._queue.push(t),this.flushDebounced()}shift(){let e=this._queue.shift(),t={text:e.text};if(e.selectionRanges){let i=e.selectionRanges.map(o=>Mfe(o)).filter(o=>!!o);i.length&&(t.selection=this.editor.model.createSelection(i))}return t}flush(e){let t=this.editor,i=t.model,o=t.editing.view;if(this.flushDebounced.cancel(),!this._queue.length)return;let s=t.commands.get("insertText").buffer;i.enqueueChange(s.batch,()=>{for(s.lock();this._queue.length;){let a=this.shift();t.execute("insertText",a)}s.unlock()}),o.scrollToTheSelection()}isComposedElement(e){return this._compositionElements.has(e)}flushComposedElements(){let e=Array.from(this._compositionElements);return this._compositionElements.clear(),e}};function Yz(n,e){if(!e.isEnabled)return;let t=e.buffer;t.lock(),n.enqueueChange(t.batch,()=>{n.deleteContent(n.document.selection)}),t.unlock()}function Mfe(n){let e=n.toRange();return n.detach(),e.root.rootName=="$graveyard"?null:e}function Dfe(n,e){let t=n.is("$text")?n.parent:n;for(;!e.toModelElement(t);)t=t.parent;return t}var r_=class extends te{direction;_buffer;constructor(e,t){super(e),this.direction=t,this._buffer=new o_(e.model,e.config.get("typing.undoStep")),this._isEnabledBasedOnSelection=!1}get buffer(){return this._buffer}execute(e={}){let t=this.editor.model,i=t.document;t.enqueueChange(this._buffer.batch,o=>{this._buffer.lock();let r=o.createSelection(e.selection||i.selection);if(!t.canEditAt(r))return;let s=e.sequence||1,a=r.isCollapsed;if(r.isCollapsed&&t.modifySelection(r,{direction:this.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),this._shouldEntireContentBeReplacedWithParagraph(s)){this._replaceEntireContentWithParagraph(o);return}if(this._shouldReplaceFirstBlockWithParagraph(r,s)){this.editor.execute("paragraph",{selection:r});return}if(r.isCollapsed)return;let l=0;r.getFirstRange().getMinimalFlatRanges().forEach(c=>{l+=bg(c.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))}),t.deleteContent(r,{doNotResetEntireContent:a,direction:this.direction}),this._buffer.input(l),o.setSelection(r),this._buffer.unlock()})}_shouldEntireContentBeReplacedWithParagraph(e){if(e>1)return!1;let t=this.editor.model,o=t.document.selection,r=t.schema.getLimitElement(o);if(!(o.isCollapsed&&o.containsEntireContent(r))||!t.schema.checkChild(r,"paragraph"))return!1;let a=r.getChild(0);return!(a&&a.is("element","paragraph"))}_replaceEntireContentWithParagraph(e){let t=this.editor.model,o=t.document.selection,r=t.schema.getLimitElement(o),s=e.createElement("paragraph");e.remove(e.createRangeIn(r)),e.insert(s,r),e.setSelection(s,0)}_shouldReplaceFirstBlockWithParagraph(e,t){let i=this.editor.model;if(t>1||this.direction!="backward"||!e.isCollapsed)return!1;let o=e.getFirstPosition(),r=i.schema.getLimitElement(o),s=r.getChild(0);return!(o.parent!=s||!e.containsEntireContent(s)||!i.schema.checkChild(r,"paragraph")||s.name=="paragraph")}},Pfe="character",Zz="word",Rfe="codePoint",ul="selection",_m="backward",Xg="forward",e9={deleteContent:{unit:ul,direction:_m},deleteContentBackward:{unit:Rfe,direction:_m},deleteWordBackward:{unit:Zz,direction:_m},deleteHardLineBackward:{unit:ul,direction:_m},deleteSoftLineBackward:{unit:ul,direction:_m},deleteContentForward:{unit:Pfe,direction:Xg},deleteWordForward:{unit:Zz,direction:Xg},deleteHardLineForward:{unit:ul,direction:Xg},deleteSoftLineForward:{unit:ul,direction:Xg}},VI=class extends ti{constructor(e){super(e);let t=e.document,i=0;t.on("keydown",()=>{i++}),t.on("keyup",()=>{i=0}),t.on("beforeinput",(o,r)=>{if(!this.isEnabled)return;let{targetRanges:s,domEvent:a,inputType:l}=r,c=e9[l];if(!c)return;let d={direction:c.direction,unit:c.unit,sequence:i};d.unit==ul&&(d.selectionToRemove=e.createSelection(s[0])),l==="deleteContentBackward"&&(ie.isAndroid&&(d.sequence=1),Ofe(s)&&(d.unit=ul,d.selectionToRemove=e.createSelection(s)));let f=new Er(t,"delete",s[0]);t.fire(f,new Sr(e,a,d)),f.stop.called&&o.stop()}),ie.isBlink&&Nfe(this)}observe(){}stopObserving(){}};function Nfe(n){let e=n.view,t=e.document,i=null,o=!1;t.on("keydown",(a,{keyCode:l})=>{i=l,o=!1}),t.on("keyup",(a,{keyCode:l,domEvent:c})=>{let d=t.selection,f=n.isEnabled&&l==i&&r(l)&&!d.isCollapsed&&!o;if(i=null,f){let p=d.getFirstRange(),g=new Er(t,"delete",p),w={unit:ul,direction:s(l),selectionToRemove:d};t.fire(g,new Sr(e,c,w))}}),t.on("beforeinput",(a,{inputType:l})=>{let c=e9[l];r(i)&&c&&c.direction==s(i)&&(o=!0)},{priority:"high"}),t.on("beforeinput",(a,{inputType:l,data:c})=>{i==_e.delete&&l=="insertText"&&c=="\x7F"&&a.stop()},{priority:"high"});function r(a){return a==_e.backspace||a==_e.delete}function s(a){return a==_e.backspace?_m:Xg}}function Ofe(n){if(n.length!=1||n[0].isCollapsed)return!1;let e=n[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0}),t=0;for(let{nextPosition:i,item:o}of e){if(i.parent.is("$text")){let r=i.parent.data,s=i.offset;if(_g(r,s)||Cg(r,s)||vy(r,s))continue;t++}else(o.is("containerElement")||o.is("emptyElement"))&&t++;if(t>1)return!0}return!1}var zn=class extends M{_undoOnBackspace;static get pluginName(){return"Delete"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,i=t.document,o=e.model.document;t.addObserver(VI),this._undoOnBackspace=!1;let r=new r_(e,"forward");e.commands.add("deleteForward",r),e.commands.add("forwardDelete",r),e.commands.add("delete",new r_(e,"backward")),this.listenTo(i,"delete",(s,a)=>{i.isComposing||a.preventDefault();let{direction:l,sequence:c,selectionToRemove:d,unit:f}=a,p=l==="forward"?"deleteForward":"delete",g={sequence:c};if(f=="selection"){let w=Array.from(d.getRanges()).map(k=>e.editing.mapper.toModelRange(k));g.selection=e.model.createSelection(w)}else g.unit=f;e.execute(p,g),t.scrollToTheSelection()},{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(i,"delete",(s,a)=>{this._undoOnBackspace&&a.direction=="backward"&&a.sequence==1&&a.unit=="codePoint"&&(this._undoOnBackspace=!1,e.execute("undo"),a.preventDefault(),s.stop())},{context:"$capture"}),this.listenTo(o,"change",()=>{this._undoOnBackspace=!1}))}requestUndoOnBackspace(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}},tb=class extends M{static get requires(){return[eb,zn]}static get pluginName(){return"Typing"}static get isOfficialPlugin(){return!0}};function zI(n,e){let t=n.start;return{text:Array.from(n.getWalker({ignoreElementEnd:!1})).reduce((o,{item:r})=>r.is("$text")||r.is("$textProxy")?o+r.data:(t=e.createPositionAfter(r),""),""),range:e.createRange(t,n.end)}}var nb=class extends Ze(){model;testCallback;_hasMatch;constructor(e,t){super(),this.model=e,this.testCallback=t,this._hasMatch=!1,this.set("isEnabled",!0),this.on("change:isEnabled",()=>{this.isEnabled?this._startListening():(this.stopListening(e.document.selection),this.stopListening(e.document))}),this._startListening()}get hasMatch(){return this._hasMatch}_startListening(){let t=this.model.document;this.listenTo(t.selection,"change:range",(i,{directChange:o})=>{if(o){if(!t.selection.isCollapsed){this.hasMatch&&(this.fire("unmatched"),this._hasMatch=!1);return}this._evaluateTextBeforeSelection("selection")}}),this.listenTo(t,"change:data",(i,o)=>{o.isUndo||!o.isLocal||this._evaluateTextBeforeSelection("data",{batch:o})})}_evaluateTextBeforeSelection(e,t={}){let i=this.model,r=i.document.selection,s=i.createRange(i.createPositionAt(r.focus.parent,0),r.focus),{text:a,range:l}=zI(s,i),c=this.testCallback(a);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){let d=Object.assign(t,{text:a,range:l});typeof c=="object"&&Object.assign(d,c),this.fire(`matched:${e}`,d)}}},Cm=class extends M{attributes;_overrideUid;_isNextGravityRestorationSkipped=!1;static get pluginName(){return"TwoStepCaretMovement"}static get isOfficialPlugin(){return!0}constructor(e){super(e),this.attributes=new Set,this._overrideUid=null}init(){let e=this.editor,t=e.model,i=e.editing.view,o=e.locale,r=t.document.selection;this.listenTo(i.document,"arrowKey",(s,a)=>{if(!r.isCollapsed||a.shiftKey||a.altKey||a.ctrlKey)return;let l=a.keyCode==_e.arrowright,c=a.keyCode==_e.arrowleft;if(!l&&!c)return;let d=o.contentLanguageDirection,f=!1;d==="ltr"&&l||d==="rtl"&&c?f=this._handleForwardMovement(a):f=this._handleBackwardMovement(a),f===!0&&s.stop()},{context:"$text",priority:"highest"}),this.listenTo(r,"change:range",(s,a)=>{if(this._isNextGravityRestorationSkipped){this._isNextGravityRestorationSkipped=!1;return}this._isGravityOverridden&&(!a.directChange&&po(r.getFirstPosition(),this.attributes)||this._restoreGravity())}),this._enableClickingAfterNode(),this._enableInsertContentSelectionAttributesFixer(),this._handleDeleteContentAfterNode()}registerAttribute(e){this.attributes.add(e)}_handleForwardMovement(e){let t=this.attributes,i=this.editor.model,o=i.document.selection,r=o.getFirstPosition();return this._isGravityOverridden||r.isAtStart&&Os(o,t)?!1:po(r,t)?(Jg(e),Os(o,t)&&po(r,t,!0)?Zg(i,t):this._overrideGravity(),!0):!1}_handleBackwardMovement(e){let t=this.attributes,i=this.editor.model,o=i.document.selection,r=o.getFirstPosition();return this._isGravityOverridden?(Jg(e),this._restoreGravity(),po(r,t,!0)?Zg(i,t):i_(i,t,r),!0):r.isAtStart?Os(o,t)?(Jg(e),i_(i,t,r),!0):!1:!Os(o,t)&&po(r,t,!0)?(Jg(e),i_(i,t,r),!0):Jz(r,t)?r.isAtEnd&&!Os(o,t)&&po(r,t)?(Jg(e),i_(i,t,r),!0):(this._isNextGravityRestorationSkipped=!0,this._overrideGravity(),!1):!1}_enableClickingAfterNode(){let e=this.editor,t=e.model,i=t.document.selection,o=e.editing.view.document;e.editing.view.addObserver(el);let r=!1;this.listenTo(o,"mousedown",()=>{r=!0}),this.listenTo(o,"selectionChange",()=>{let s=this.attributes;if(!r||(r=!1,!i.isCollapsed)||!Os(i,s))return;let a=i.getFirstPosition();po(a,s)&&(a.isAtStart||po(a,s,!0)?Zg(t,s):this._isGravityOverridden||this._overrideGravity())})}_enableInsertContentSelectionAttributesFixer(){let t=this.editor.model,i=t.document.selection,o=this.attributes;this.listenTo(t,"insertContent",()=>{let r=i.getFirstPosition();Os(i,o)&&po(r,o)&&Zg(t,o)},{priority:"low"})}_handleDeleteContentAfterNode(){let e=this.editor,t=e.model,i=t.document.selection,o=e.editing.view,r=!1,s=!1;this.listenTo(o.document,"delete",(a,l)=>{r=l.direction==="backward"},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{if(!r)return;let a=i.getFirstPosition();s=Os(i,this.attributes)&&!Jz(a,this.attributes)},{priority:"high"}),this.listenTo(t,"deleteContent",()=>{r&&(r=!1,!s&&e.model.enqueueChange(()=>{let a=i.getFirstPosition();Os(i,this.attributes)&&po(a,this.attributes)&&(a.isAtStart||po(a,this.attributes,!0)?Zg(t,this.attributes):this._isGravityOverridden||this._overrideGravity())}))},{priority:"low"})}get _isGravityOverridden(){return!!this._overrideUid}_overrideGravity(){this._overrideUid=this.editor.model.change(e=>e.overrideSelectionGravity())}_restoreGravity(){this.editor.model.change(e=>{e.restoreSelectionGravity(this._overrideUid),this._overrideUid=null})}};function Os(n,e){for(let t of e)if(n.hasAttribute(t))return!0;return!1}function i_(n,e,t){let i=t.nodeBefore;n.change(o=>{if(i){let r=[],s=n.schema.isObject(i)&&n.schema.isInline(i);for(let[a,l]of i.getAttributes())n.schema.checkAttribute("$text",a)&&(!s||n.schema.getAttributeProperties(a).copyFromObject!==!1)&&r.push([a,l]);o.setSelectionAttribute(r)}else o.removeSelectionAttribute(e)})}function Zg(n,e){n.change(t=>{t.removeSelectionAttribute(e)})}function Jg(n){n.preventDefault()}function Jz(n,e){let t=n.getShiftedBy(-1);return po(t,e)}function po(n,e,t=!1){let{nodeBefore:i,nodeAfter:o}=n;for(let r of e){let s=i?i.getAttribute(r):void 0,a=o?o.getAttribute(r):void 0;if(!(t&&(s===void 0||a===void 0))&&a!==s)return!0}return!1}var SGe={copyright:{from:"(c)",to:"\xA9"},registeredTrademark:{from:"(r)",to:"\xAE"},trademark:{from:"(tm)",to:"\u2122"},oneHalf:{from:/(^|[^/a-z0-9])(1\/2)([^/a-z0-9])$/i,to:[null,"\xBD",null]},oneThird:{from:/(^|[^/a-z0-9])(1\/3)([^/a-z0-9])$/i,to:[null,"\u2153",null]},twoThirds:{from:/(^|[^/a-z0-9])(2\/3)([^/a-z0-9])$/i,to:[null,"\u2154",null]},oneForth:{from:/(^|[^/a-z0-9])(1\/4)([^/a-z0-9])$/i,to:[null,"\xBC",null]},threeQuarters:{from:/(^|[^/a-z0-9])(3\/4)([^/a-z0-9])$/i,to:[null,"\xBE",null]},lessThanOrEqual:{from:"<=",to:"\u2264"},greaterThanOrEqual:{from:">=",to:"\u2265"},notEqual:{from:"!=",to:"\u2260"},arrowLeft:{from:"<-",to:"\u2190"},arrowRight:{from:"->",to:"\u2192"},horizontalEllipsis:{from:"...",to:"\u2026"},enDash:{from:/(^| )(--)( )$/,to:[null,"\u2013",null]},emDash:{from:/(^| )(---)( )$/,to:[null,"\u2014",null]},quotesPrimary:{from:ym('"'),to:[null,"\u201C",null,"\u201D"]},quotesSecondary:{from:ym("'"),to:[null,"\u2018",null,"\u2019"]},quotesPrimaryEnGb:{from:ym("'"),to:[null,"\u2018",null,"\u2019"]},quotesSecondaryEnGb:{from:ym('"'),to:[null,"\u201C",null,"\u201D"]},quotesPrimaryPl:{from:ym('"'),to:[null,"\u201E",null,"\u201D"]},quotesSecondaryPl:{from:ym("'"),to:[null,"\u201A",null,"\u2019"]}};function ym(n){return new RegExp(`(^|\\s)(${n})([^${n}]*)(${n})$`)}function Em(n,e,t,i){return i.createRange(BI(n,e,t,!0,i),BI(n,e,t,!1,i))}function BI(n,e,t,i,o){let r=n.textNode||(i?n.nodeBefore:n.nodeAfter),s=null;for(;r&&r.getAttribute(e)==t;)s=r,r=i?r.previousSibling:r.nextSibling;return s?o.createPositionAt(s,i?"before":"after"):n}function HI(n,e,t,i){let o=n.editing.view,r=new Set;o.document.registerPostFixer(s=>{let a=n.model.document.selection,l=!1;if(a.hasAttribute(e)){let c=Em(a.getFirstPosition(),e,a.getAttribute(e),n.model),d=n.editing.mapper.toViewRange(c);for(let f of d.getItems())f.is("element",t)&&!f.hasClass(i)&&(s.addClass(i,f),r.add(f),l=!0)}return l}),n.conversion.for("editingDowncast").add(s=>{s.on("insert",a,{priority:"highest"}),s.on("remove",a,{priority:"highest"}),s.on("attribute",a,{priority:"highest"}),s.on("selection",a,{priority:"highest"});function a(){o.change(l=>{for(let c of r.values())l.removeClass(i,c),r.delete(c)})}})}var ob=class extends te{attributeKey;constructor(e,t){super(e),this.attributeKey=t}refresh(){let e=this.editor.model,t=e.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey)}execute(e={}){let t=this.editor.model,o=t.document.selection,r=e.forceValue===void 0?!this.value:e.forceValue;t.change(s=>{if(o.isCollapsed)r?s.setSelectionAttribute(this.attributeKey,!0):s.removeSelectionAttribute(this.attributeKey);else{let a=t.schema.getValidRanges(o.getRanges(),this.attributeKey);for(let l of a)r?s.setAttribute(this.attributeKey,r,l):s.removeAttribute(this.attributeKey,l)}})}_getValueFromFirstAllowedNode(){let e=this.editor.model,t=e.schema,i=e.document.selection;if(i.isCollapsed)return i.hasAttribute(this.attributeKey);for(let o of i.getRanges())for(let r of o.getItems())if(t.checkAttribute(r,this.attributeKey))return r.hasAttribute(this.attributeKey);return!1}},Sm="bold",WI=class extends M{static get pluginName(){return"BoldEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:Sm}),e.model.schema.setAttributeProperties(Sm,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:Sm,view:"strong",upcastAlso:["b",i=>{let o=i.getStyle("font-weight");return o&&(o=="bold"||Number(o)>=600)?{name:!0,styles:["font-weight"]}:null}]}),e.commands.add(Sm,new ob(e,Sm)),e.keystrokes.set("CTRL+B",Sm),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Bold text"),keystroke:"CTRL+B"}]})}};function ZI({editor:n,commandName:e,plugin:t,icon:i,label:o,keystroke:r}){return s=>{let a=n.commands.get(e),l=new s(n.locale);return l.set({label:o,icon:i,keystroke:r,isToggleable:!0}),l.bind("isEnabled").to(a,"isEnabled"),l.bind("isOn").to(a,"value"),l instanceof be?l.set({role:"menuitemcheckbox"}):l.set({tooltip:!0}),t.listenTo(l,"execute",()=>{n.execute(e),n.editing.view.focus()}),l}}var UI="bold",qI=class extends M{static get pluginName(){return"BoldUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=ZI({editor:e,commandName:UI,plugin:this,icon:ee.bold,label:t("Bold"),keystroke:"CTRL+B"});e.ui.componentFactory.add(UI,()=>i(oe)),e.ui.componentFactory.add("menuBar:"+UI,()=>i(be))}},s_=class extends M{static get requires(){return[WI,qI]}static get pluginName(){return"Bold"}static get isOfficialPlugin(){return!0}};var xm="italic",GI=class extends M{static get pluginName(){return"ItalicEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:xm}),e.model.schema.setAttributeProperties(xm,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:xm,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]}),e.commands.add(xm,new ob(e,xm)),e.keystrokes.set("CTRL+I",xm),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Italic text"),keystroke:"CTRL+I"}]})}},Lfe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>',jI="italic",KI=class extends M{static get pluginName(){return"ItalicUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=ZI({editor:e,commandName:jI,plugin:this,icon:Lfe,keystroke:"CTRL+I",label:t("Italic")});e.ui.componentFactory.add(jI,()=>i(oe)),e.ui.componentFactory.add("menuBar:"+jI,()=>i(be))}},a_=class extends M{static get requires(){return[GI,KI]}static get pluginName(){return"Italic"}static get isOfficialPlugin(){return!0}};var ib="underline",QI=class extends M{static get pluginName(){return"UnderlineEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.model.schema.extend("$text",{allowAttributes:ib}),e.model.schema.setAttributeProperties(ib,{isFormatting:!0,copyOnEnter:!0}),e.conversion.attributeToElement({model:ib,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}}),e.commands.add(ib,new ob(e,ib)),e.keystrokes.set("CTRL+U","underline"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Underline text"),keystroke:"CTRL+U"}]})}},Ffe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>',$I="underline",YI=class extends M{static get pluginName(){return"UnderlineUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale.t,i=ZI({editor:e,commandName:$I,plugin:this,icon:Ffe,label:t("Underline"),keystroke:"CTRL+U"});e.ui.componentFactory.add($I,()=>i(oe)),e.ui.componentFactory.add("menuBar:"+$I,()=>i(be))}},l_=class extends M{static get requires(){return[QI,YI]}static get pluginName(){return"Underline"}static get isOfficialPlugin(){return!0}};function*i9(n,e){for(let t of e)t&&n.getAttributeProperties(t[0]).copyOnEnter&&(yield t)}var JI=class extends te{execute(){this.editor.model.change(e=>{this.enterBlock(e),this.fire("afterExecute",{writer:e})})}enterBlock(e){let t=this.editor.model,i=t.document.selection,o=t.schema,r=i.isCollapsed,s=i.getFirstRange(),a=s.start.parent,l=s.end.parent;if(o.isLimit(a)||o.isLimit(l))return!r&&a==l&&t.deleteContent(i),!1;if(r){let c=i9(e.model.schema,i.getAttributes());return t9(e,s.start),e.setSelectionAttribute(c),!0}else{let c=!(s.start.isAtStart&&s.end.isAtEnd),d=a==l;if(t.deleteContent(i,{leaveUnmerged:c}),c){if(d)return t9(e,i.focus),!0;e.setSelection(l,0)}}return!1}};function t9(n,e){n.split(e),n.setSelection(e.parent.nextSibling,0)}var Vfe={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}},c_=class extends ti{constructor(e){super(e);let t=this.document,i=!1;t.on("keydown",(o,r)=>{i=r.shiftKey}),t.on("beforeinput",(o,r)=>{if(!this.isEnabled)return;let s=r.inputType;ie.isSafari&&i&&s=="insertParagraph"&&(s="insertLineBreak");let a=r.domEvent,l=Vfe[s];if(!l)return;let c=new Er(t,"enter",r.targetRanges[0]);t.fire(c,new Sr(e,a,{isSoft:l.isSoft})),c.stop.called&&o.stop()})}observe(){}stopObserving(){}},jo=class extends M{static get pluginName(){return"Enter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.editing.view,i=t.document,o=this.editor.t;t.addObserver(c_),e.commands.add("enter",new JI(e)),this.listenTo(i,"enter",(r,s)=>{i.isComposing||s.preventDefault(),!s.isSoft&&(e.execute("enter"),t.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:o("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}},XI=class extends te{execute(){let e=this.editor.model,t=e.document;e.change(i=>{zfe(e,i,t.selection),this.fire("afterExecute",{writer:i})})}refresh(){let e=this.editor.model,t=e.document;this.isEnabled=Bfe(e.schema,t.selection)}};function Bfe(n,e){if(e.rangeCount>1)return!1;let t=e.anchor;if(!t||!n.checkChild(t,"softBreak"))return!1;let i=e.getFirstRange(),o=i.start.parent,r=i.end.parent;return!((eM(o,n)||eM(r,n))&&o!==r)}function zfe(n,e,t){let i=t.isCollapsed,o=t.getFirstRange(),r=o.start.parent,s=o.end.parent,a=r==s;if(i){let l=i9(n.schema,t.getAttributes());n9(n,e,o.end),e.removeSelectionAttribute(t.getAttributeKeys()),e.setSelectionAttribute(l)}else{let l=!(o.start.isAtStart&&o.end.isAtEnd);n.deleteContent(t,{leaveUnmerged:l}),a?n9(n,e,t.focus):l&&e.setSelection(s,0)}}function n9(n,e,t){let i=e.createElement("softBreak");n.insertContent(i,t),e.setSelection(i,"after")}function eM(n,e){return n.is("rootElement")?!1:e.isLimit(n)||eM(n.parent,e)}var Am=class extends M{static get pluginName(){return"ShiftEnter"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model.schema,i=e.conversion,o=e.editing.view,r=o.document,s=this.editor.t;t.register("softBreak",{allowWhere:"$text",isInline:!0}),i.for("upcast").elementToElement({model:"softBreak",view:"br"}),i.for("downcast").elementToElement({model:"softBreak",view:(a,{writer:l})=>l.createEmptyElement("br")}),o.addObserver(c_),e.commands.add("shiftEnter",new XI(e)),this.listenTo(r,"enter",(a,l)=>{r.isComposing||l.preventDefault(),l.isSoft&&(e.execute("shiftEnter"),o.scrollToTheSelection())},{priority:"low"}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:s("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}};var nM=class extends tt(){_stack=[];add(e,t){let i=this._stack,o=i[0];this._insertDescriptor(e);let r=i[0];o!==r&&!tM(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:t})}remove(e,t){let i=this._stack,o=i[0];this._removeDescriptor(e);let r=i[0];o!==r&&!tM(o,r)&&this.fire("change:top",{oldDescriptor:o,newDescriptor:r,writer:t})}_insertDescriptor(e){let t=this._stack,i=t.findIndex(r=>r.id===e.id);if(tM(e,t[i]))return;i>-1&&t.splice(i,1);let o=0;for(;t[o]&&Hfe(t[o],e);)o++;t.splice(o,0,e)}_removeDescriptor(e){let t=this._stack,i=t.findIndex(o=>o.id===e);i>-1&&t.splice(i,1)}};function tM(n,e){return n&&e&&n.priority==e.priority&&d_(n.classes)==d_(e.classes)}function Hfe(n,e){return n.priority>e.priority?!0:n.priority<e.priority?!1:d_(n.classes)>d_(e.classes)}function d_(n){return Array.isArray(n)?n.sort().join(","):n}var Ufe='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>',jfe="ck-widget",r9="ck-widget_selected";function Pt(n){return n.is("element")?!!n.getCustomProperty("widget"):!1}function $o(n,e,t={}){if(!n.is("containerElement"))throw new _("widget-to-widget-wrong-element-type",null,{element:n});return e.setAttribute("contenteditable","false",n),e.addClass(jfe,n),e.setCustomProperty("widget",!0,n),n.getFillerOffset=Qfe,e.setCustomProperty("widgetLabel",[],n),t.label&&Gfe(n,t.label),t.hasSelectionHandle&&Yfe(n,e),qfe(n,e),n}function $fe(n,e,t){if(e.classes&&t.addClass($e(e.classes),n),e.attributes)for(let i in e.attributes)t.setAttribute(i,e.attributes[i],n)}function Wfe(n,e,t){if(e.classes&&t.removeClass($e(e.classes),n),e.attributes)for(let i in e.attributes)t.removeAttribute(i,n)}function qfe(n,e,t=$fe,i=Wfe){let o=new nM;o.on("change:top",(a,l)=>{l.oldDescriptor&&i(n,l.oldDescriptor,l.writer),l.newDescriptor&&t(n,l.newDescriptor,l.writer)});let r=(a,l,c)=>o.add(l,c),s=(a,l,c)=>o.remove(l,c);e.setCustomProperty("addHighlight",r,n),e.setCustomProperty("removeHighlight",s,n)}function Gfe(n,e){n.getCustomProperty("widgetLabel").push(e)}function Kfe(n){return n.getCustomProperty("widgetLabel").reduce((t,i)=>typeof i=="function"?t?t+". "+i():i():t?t+". "+i:i,"")}function md(n,e){let t=n.getSelectedElement();if(t){let i=hl(n);if(i)return e.createRange(e.createPositionAt(t,i))}return e.schema.findOptimalInsertionRange(n)}function Qfe(){return null}function Yfe(n,e){let t=e.createUIElement("div",{class:"ck ck-widget__selection-handle"},function(i){let o=this.toDomElement(i),r=new Ir;return r.set("content",Ufe),r.render(),o.appendChild(r.element),o});e.insert(e.createPositionAt(n,0),t),e.addClass(["ck-widget_with-selection-handle"],n)}var Ls="widget-type-around";function hd(n,e,t){return!!n&&Pt(n)&&!t.isInline(e)}function Zfe(n){return n.closest(".ck-widget__type-around__button")}function Jfe(n){return n.classList.contains("ck-widget__type-around__button_before")?"before":"after"}function Xfe(n,e){let t=n.closest(".ck-widget");return e.mapDomToView(t)}function hl(n){return n.getAttribute(Ls)}var epe='<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',c9=["before","after"],tpe=new DOMParser().parseFromString(epe,"image/svg+xml").firstChild,s9="ck-widget__type-around_disabled",iM=class extends M{_currentFakeCaretModelElement=null;static get pluginName(){return"WidgetTypeAround"}static get isOfficialPlugin(){return!0}static get requires(){return[jo,zn]}init(){let e=this.editor,t=e.editing.view;this.on("change:isEnabled",(i,o,r)=>{t.change(s=>{for(let a of t.document.roots)r?s.removeClass(s9,a):s.addClass(s9,a)}),r||e.model.change(s=>{s.removeSelectionAttribute(Ls)})}),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}destroy(){super.destroy(),this._currentFakeCaretModelElement=null}_insertParagraph(e,t){let i=this.editor,o=i.editing.view,r=i.model.schema.getAttributesWithProperty(e,"copyOnReplace",!0);i.execute("insertParagraph",{position:i.model.createPositionAt(e,t),attributes:r}),o.focus(),o.scrollToTheSelection()}_listenToIfEnabled(e,t,i,o){this.listenTo(e,t,(...r)=>{this.isEnabled&&i(...r)},o)}_insertParagraphAccordingToFakeCaretPosition(){let i=this.editor.model.document.selection,o=hl(i);if(!o)return!1;let r=i.getSelectedElement();return this._insertParagraph(r,o),!0}_enableTypeAroundUIInjection(){let e=this.editor,t=e.model.schema,i=e.locale.t,o={before:i("Insert paragraph before block"),after:i("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(r,s,a)=>{let l=a.mapper.toViewElement(s.item);l&&hd(l,s.item,t)&&(npe(a.writer,o,l),l.getCustomProperty("widgetLabel").push(()=>this.isEnabled?i("Press Enter to type after or press Shift + Enter to type before the widget"):""))},{priority:"low"})}_enableTypeAroundFakeCaretActivationUsingKeyboardArrows(){let e=this.editor,t=e.model,i=t.document.selection,o=t.schema,r=e.editing.view;this._listenToIfEnabled(r.document,"arrowKey",(a,l)=>{this._handleArrowKeyPress(a,l)},{context:[Pt,"$text"],priority:"high"}),this._listenToIfEnabled(i,"change:range",(a,l)=>{l.directChange&&e.model.change(c=>{c.removeSelectionAttribute(Ls)})}),this._listenToIfEnabled(t.document,"change:data",()=>{let a=i.getSelectedElement();if(a){let l=e.editing.mapper.toViewElement(a);if(hd(l,a,o))return}e.model.change(l=>{l.removeSelectionAttribute(Ls)})}),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(a,l,c)=>{let d=c.writer;if(this._currentFakeCaretModelElement){let w=c.mapper.toViewElement(this._currentFakeCaretModelElement);w&&(d.removeClass(c9.map(s),w),this._currentFakeCaretModelElement=null)}let f=l.selection.getSelectedElement();if(!f)return;let p=c.mapper.toViewElement(f);if(!hd(p,f,o))return;let g=hl(l.selection);g&&(d.addClass(s(g),p),this._currentFakeCaretModelElement=f)}),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(a,l,c)=>{c||e.model.change(d=>{d.removeSelectionAttribute(Ls)})});function s(a){return`ck-widget_type-around_show-fake-caret_${a}`}}_handleArrowKeyPress(e,t){let i=this.editor,o=i.model,r=o.document.selection,s=o.schema,a=i.editing.view,l=t.keyCode,c=y7(l,i.locale.contentLanguageDirection),d=a.document.selection.getSelectedElement(),f=i.editing.mapper.toModelElement(d),p;hd(d,f,s)?p=this._handleArrowKeyPressOnSelectedWidget(c):r.isCollapsed?p=this._handleArrowKeyPressWhenSelectionNextToAWidget(c):t.shiftKey||(p=this._handleArrowKeyPressWhenNonCollapsedSelection(c)),p&&(t.preventDefault(),e.stop())}_handleArrowKeyPressOnSelectedWidget(e){let i=this.editor.model,o=i.document.selection,r=hl(o);return i.change(s=>{if(r){if(!(r===(e?"after":"before")))return s.removeSelectionAttribute(Ls),!0}else return s.setSelectionAttribute(Ls,e?"after":"before"),!0;return!1})}_handleArrowKeyPressWhenSelectionNextToAWidget(e){let t=this.editor,i=t.model,o=i.schema,r=t.plugins.get("Widget"),s=r._getObjectElementNextToSelection(e),a=t.editing.mapper.toViewElement(s);return hd(a,s,o)?(i.change(l=>{r._setSelectionOverElement(s),l.setSelectionAttribute(Ls,e?"before":"after")}),!0):!1}_handleArrowKeyPressWhenNonCollapsedSelection(e){let t=this.editor,i=t.model,o=i.schema,r=t.editing.mapper,s=i.document.selection,a=e?s.getLastPosition().nodeBefore:s.getFirstPosition().nodeAfter,l=r.toViewElement(a);return hd(l,a,o)?(i.change(c=>{c.setSelection(a,"on"),c.setSelectionAttribute(Ls,e?"after":"before")}),!0):!1}_enableInsertingParagraphsOnButtonClick(){let e=this.editor,t=e.editing.view;this._listenToIfEnabled(t.document,"mousedown",(i,o)=>{let r=Zfe(o.domTarget);if(!r)return;let s=Jfe(r),a=Xfe(r,t.domConverter),l=e.editing.mapper.toModelElement(a);this._insertParagraph(l,s),o.preventDefault(),i.stop()})}_enableInsertingParagraphsOnEnterKeypress(){let e=this.editor,t=e.model.document.selection,i=e.editing.view;this._listenToIfEnabled(i.document,"enter",(o,r)=>{if(o.eventPhase!="atTarget")return;let s=t.getSelectedElement(),a=e.editing.mapper.toViewElement(s),l=e.model.schema,c;this._insertParagraphAccordingToFakeCaretPosition()?c=!0:hd(a,s,l)&&(this._insertParagraph(s,r.isSoft?"before":"after"),c=!0),c&&(r.preventDefault(),o.stop())},{context:Pt})}_enableInsertingParagraphsOnTypingKeystroke(){let t=this.editor.editing.view.document;this._listenToIfEnabled(t,"insertText",(i,o)=>{this._insertParagraphAccordingToFakeCaretPosition()&&(o.selection=t.selection)},{priority:"high"}),ie.isAndroid?this._listenToIfEnabled(t,"keydown",(i,o)=>{o.keyCode==229&&this._insertParagraphAccordingToFakeCaretPosition()}):this._listenToIfEnabled(t,"compositionstart",()=>{this._insertParagraphAccordingToFakeCaretPosition()},{priority:"high"})}_enableDeleteIntegration(){let e=this.editor,t=e.editing.view,i=e.model,o=i.schema;this._listenToIfEnabled(t.document,"delete",(r,s)=>{if(r.eventPhase!="atTarget")return;let a=hl(i.document.selection);if(!a)return;let l=s.direction,c=i.document.selection.getSelectedElement(),d=a==="before",f=l=="forward";if(d===f)e.execute("delete",{selection:i.createSelection(c,"on")});else{let g=o.getNearestSelectionRange(i.createPositionAt(c,a),l);if(g)if(!g.isCollapsed)i.change(w=>{w.setSelection(g),e.execute(f?"deleteForward":"delete")});else{let w=i.createSelection(g.start);if(i.modifySelection(w,{direction:l}),!w.focus.isEqual(g.start))i.change(k=>{k.setSelection(g),e.execute(f?"deleteForward":"delete")});else{let k=rpe(o,g.start.parent);i.deleteContent(i.createSelection(k,"on"),{doNotAutoparagraph:!0})}}}s.preventDefault(),r.stop()},{context:Pt})}_enableInsertContentIntegration(){let e=this.editor,t=this.editor.model,i=t.document.selection;this._listenToIfEnabled(e.model,"insertContent",(o,[r,s])=>{if(s&&!s.is("documentSelection"))return;let a=hl(i);if(a)return o.stop(),t.change(l=>{let c=i.getSelectedElement(),d=t.createPositionAt(c,a),f=l.createSelection(d),p=t.insertContent(r,f);return l.setSelection(f),p})},{priority:"high"})}_enableInsertObjectIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"insertObject",(o,r)=>{let[,s,a={}]=r;if(s&&!s.is("documentSelection"))return;let l=hl(i);l&&(a.findOptimalPosition=l,r[3]=a)},{priority:"high"})}_enableDeleteContentIntegration(){let e=this.editor,i=this.editor.model.document.selection;this._listenToIfEnabled(e.model,"deleteContent",(o,[r])=>{if(r&&!r.is("documentSelection"))return;hl(i)&&o.stop()},{priority:"high"})}};function npe(n,e,t){let i=n.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},function(o){let r=this.toDomElement(o);return ipe(r,e),ope(r),r});n.insert(n.createPositionAt(t,"end"),i)}function ipe(n,e){for(let t of c9){let i=new Ln({tag:"div",attributes:{class:["ck","ck-widget__type-around__button",`ck-widget__type-around__button_${t}`],title:e[t],"aria-hidden":"true"},children:[n.ownerDocument.importNode(tpe,!0)]});n.appendChild(i.render())}}function ope(n){let e=new Ln({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});n.appendChild(e.render())}function rpe(n,e){let t=e;for(let i of e.getAncestors({parentFirst:!0})){if(i.childCount>1||n.isLimit(i))break;t=i}return t}function spe(n){let e=n.model;return(t,i)=>{let o=i.keyCode==_e.arrowup,r=i.keyCode==_e.arrowdown,s=i.shiftKey,a=e.document.selection;if(!o&&!r)return;let l=r;if(s&&cpe(a,l))return;let c=ape(n,a,l);if(c){if(c.isCollapsed){if(a.isCollapsed)return;if(s)return}(c.isCollapsed||lpe(n,c,l))&&(e.change(d=>{let f=l?c.end:c.start;if(s){let p=e.createSelection(a.anchor);p.setFocus(f),d.setSelection(p)}else d.setSelection(f)}),t.stop(),i.preventDefault(),i.stopPropagation())}}}function ape(n,e,t){let i=n.model;if(t){let o=e.isCollapsed?e.focus:e.getLastPosition(),r=a9(i,o,"forward");if(!r)return null;let s=i.createRange(o,r),a=l9(i.schema,s,"backward");return a?i.createRange(o,a):null}else{let o=e.isCollapsed?e.focus:e.getFirstPosition(),r=a9(i,o,"backward");if(!r)return null;let s=i.createRange(r,o),a=l9(i.schema,s,"forward");return a?i.createRange(a,o):null}}function a9(n,e,t){let i=n.schema,o=n.createRangeIn(e.root),r=t=="forward"?"elementStart":"elementEnd";for(let{previousPosition:s,item:a,type:l}of o.getWalker({startPosition:e,direction:t})){if(i.isLimit(a)&&!i.isInline(a))return s;if(l==r&&i.isBlock(a))return null}return null}function l9(n,e,t){let i=t=="backward"?e.end:e.start;if(n.checkChild(i,"$text"))return i;for(let{nextPosition:o}of e.getWalker({direction:t}))if(n.checkChild(o,"$text"))return o;return null}function lpe(n,e,t){let i=n.model,o=n.view.domConverter;if(t){let c=i.createSelection(e.start);i.modifySelection(c),!c.focus.isAtEnd&&!e.start.isEqual(c.focus)&&(e=i.createRange(c.focus,e.end))}let r=n.mapper.toViewRange(e),s=o.viewRangeToDom(r),a=Ae.getDomRangeRects(s),l;for(let c of a){if(l===void 0){l=Math.round(c.bottom);continue}if(Math.round(c.top)>=l)return!1;l=Math.max(l,Math.round(c.bottom))}return!0}function cpe(n,e){return!n.isCollapsed&&n.isBackward==e}var Ei=class extends M{_previouslySelected=new Set;static get pluginName(){return"Widget"}static get isOfficialPlugin(){return!0}static get requires(){return[iM,zn]}init(){let e=this.editor,t=e.editing.view,i=t.document,o=e.t;this.editor.editing.downcastDispatcher.on("selection",(r,s,a)=>{let l=a.writer,c=s.selection;if(c.isCollapsed)return;let d=c.getSelectedElement();if(!d)return;let f=e.editing.mapper.toViewElement(d);Pt(f)&&a.consumable.consume(c,"selection")&&l.setSelection(l.createRangeOn(f),{fake:!0,label:Kfe(f)})}),this.editor.editing.downcastDispatcher.on("selection",(r,s,a)=>{this._clearPreviouslySelectedWidgets(a.writer);let l=a.writer,c=l.document.selection,d=null;for(let f of c.getRanges())for(let p of f){let g=p.item;Pt(g)&&!hpe(g,d)&&(l.addClass(r9,g),this._previouslySelected.add(g),d=g)}},{priority:"low"}),t.addObserver(el),this.listenTo(i,"mousedown",(...r)=>this._onMousedown(...r)),this.listenTo(i,"arrowKey",(...r)=>{this._handleSelectionChangeOnArrowKeyPress(...r)},{context:[Pt,"$text"]}),this.listenTo(i,"arrowKey",(...r)=>{this._preventDefaultOnArrowKeyPress(...r)},{context:"$root"}),this.listenTo(i,"arrowKey",spe(this.editor.editing),{context:"$text"}),this.listenTo(i,"delete",(r,s)=>{this._handleDelete(s.direction=="forward")&&(s.preventDefault(),r.stop())},{context:"$root"}),this.listenTo(i,"tab",(r,s)=>{r.eventPhase=="atTarget"&&(s.shiftKey||this._selectFirstNestedEditable()&&(s.preventDefault(),r.stop()))},{context:Pt,priority:"low"}),this.listenTo(i,"tab",(r,s)=>{s.shiftKey&&this._selectAncestorWidget()&&(s.preventDefault(),r.stop())},{priority:"low"}),this.listenTo(i,"keydown",(r,s)=>{s.keystroke==_e.esc&&this._selectAncestorWidget()&&(s.preventDefault(),r.stop())},{priority:"low"}),e.accessibility.addKeystrokeInfoGroup({id:"widget",label:o("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:o("Move focus from an editable area back to the parent widget"),keystroke:"Esc"},{label:o("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:o("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:o("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:o("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}_onMousedown(e,t){let i=this.editor,o=i.editing.view,r=o.document,s=t.target;if(!s)return;if(t.domEvent.detail>=3){this._selectBlockContent(s)&&t.preventDefault();return}if(!Pt(s)){let l=dpe(s);if(!l)return;if(Pt(l))s=l;else{let c=upe(o,t);if(c&&Pt(c))s=c;else return}}ie.isAndroid&&t.preventDefault(),r.isFocused||o.focus();let a=i.editing.mapper.toModelElement(s);this._setSelectionOverElement(a)}_selectBlockContent(e){let t=this.editor,i=t.model,o=t.editing.mapper,r=i.schema,s=o.findMappedViewAncestor(this.editor.editing.view.createPositionAt(e,0)),a=mpe(o.toModelElement(s),i.schema);return a?(i.change(l=>{let c=r.isLimit(a)?null:fpe(l.createPositionAfter(a),r),d=l.createPositionAt(a,0),f=c?l.createPositionAt(c,0):l.createPositionAt(a,"end");l.setSelection(l.createRange(d,f))}),!0):!1}_handleSelectionChangeOnArrowKeyPress(e,t){let i=t.keyCode,o=this.editor.model,r=o.schema,s=o.document.selection,a=s.getSelectedElement(),l=yg(i,this.editor.locale.contentLanguageDirection),c=l=="down"||l=="right",d=l=="up"||l=="down";if(a&&r.isObject(a)){let p=c?s.getLastPosition():s.getFirstPosition(),g=r.getNearestSelectionRange(p,c?"forward":"backward");g&&(o.change(w=>{w.setSelection(g)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed&&!t.shiftKey){let p=s.getFirstPosition(),g=s.getLastPosition(),w=p.nodeAfter,k=g.nodeBefore;(w&&r.isObject(w)||k&&r.isObject(k))&&(o.change(C=>{C.setSelection(c?g:p)}),t.preventDefault(),e.stop());return}if(!s.isCollapsed)return;let f=this._getObjectElementNextToSelection(c);if(f&&r.isObject(f)){if(r.isInline(f)&&d)return;this._setSelectionOverElement(f),t.preventDefault(),e.stop()}}_preventDefaultOnArrowKeyPress(e,t){let i=this.editor.model,o=i.schema,r=i.document.selection.getSelectedElement();r&&o.isObject(r)&&(t.preventDefault(),e.stop())}_handleDelete(e){let i=this.editor.model.document.selection;if(!this.editor.model.canEditAt(i)||!i.isCollapsed)return;let o=this._getObjectElementNextToSelection(e);if(o)return this.editor.model.change(r=>{let s=i.anchor.parent;for(;s.isEmpty;){let a=s;s=a.parent,r.remove(a)}this._setSelectionOverElement(o)}),!0}_setSelectionOverElement(e){this.editor.model.change(t=>{t.setSelection(t.createRangeOn(e))})}_getObjectElementNextToSelection(e){let t=this.editor.model,i=t.schema,o=t.document.selection,r=t.createSelection(o);if(t.modifySelection(r,{direction:e?"forward":"backward"}),r.isEqual(o))return null;let s=e?r.focus.nodeBefore:r.focus.nodeAfter;return s&&i.isObject(s)?s:null}_clearPreviouslySelectedWidgets(e){for(let t of this._previouslySelected)e.removeClass(r9,t);this._previouslySelected.clear()}_selectFirstNestedEditable(){let e=this.editor,i=this.editor.editing.view.document;for(let o of i.selection.getFirstRange().getItems())if(o.is("editableElement")){let r=e.editing.mapper.toModelElement(o);if(!r)continue;let s=e.model.createPositionAt(r,0),a=e.model.schema.getNearestSelectionRange(s,"forward");return e.model.change(l=>{l.setSelection(a)}),!0}return!1}_selectAncestorWidget(){let e=this.editor,t=e.editing.mapper,o=e.editing.view.document.selection.getFirstPosition().parent,s=(o.is("$text")?o.parent:o).findAncestor(Pt);if(!s)return!1;let a=t.toModelElement(s);return a?(e.model.change(l=>{l.setSelection(a,"on")}),!0):!1}};function dpe(n){let e=n;for(;e;){if(e.is("editableElement")||Pt(e))return e;e=e.parent}return null}function upe(n,e){let t=gy(e.domEvent),i=null;if(t?i=n.domConverter.domRangeToView(t):i=n.createRange(n.createPositionAt(e.target,0)),!i)return null;let o=i.start;if(!o.parent)return null;let r=o.parent;return o.parent.is("editableElement")&&(o.isAtEnd&&o.nodeBefore?r=o.nodeBefore:o.isAtStart&&o.nodeAfter&&(r=o.nodeAfter)),r.is("$text")?r.parent:r}function hpe(n,e){return e?Array.from(n.getAncestors()).includes(e):!1}function mpe(n,e){for(let t of n.getAncestors({includeSelf:!0,parentFirst:!0})){if(e.checkChild(t,"$text"))return t;if(e.isLimit(t)&&!e.isObject(t))break}return null}function fpe(n,e){let t=new Hi({startPosition:n});for(let{item:i}of t){if(e.isLimit(i)||!i.is("element"))return null;if(e.checkChild(i,"$text"))return i}return null}var fd=class extends uo{domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];constructor(e){super(e);let t=this.document;this.listenTo(t,"paste",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"drop",i("clipboardInput"),{priority:"low"}),this.listenTo(t,"dragover",i("dragging"),{priority:"low"});function i(o){return(r,s)=>{s.preventDefault();let a=s.dropRange?[s.dropRange]:null,l=new yi(t,o);t.fire(l,{dataTransfer:s.dataTransfer,method:r.name,targetRanges:a,target:s.target,domEvent:s.domEvent}),l.stop.called&&s.stopPropagation()}}}onDomEvent(e){let t="clipboardData"in e?e.clipboardData:e.dataTransfer,i=e.type=="drop"||e.type=="paste",o={dataTransfer:new Ng(t,{cacheFiles:i})};if(e.type=="drop"||e.type=="dragover"){let r=gy(e);o.dropRange=r&&this.view.domConverter.domRangeToView(r)}this.fire(e.type,e,o)}};function ppe(n){return n=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;"),(n.includes("</p><p>")||n.includes("<br>"))&&(n=`<p>${n}</p>`),n}function gpe(n){return n.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(e,t)=>t.length==1?" ":t).replace(/<!--[\s\S]*?-->/g,"")}var d9=["figcaption","li"],u9=["ol","ul"];function g9(n){if(n.is("$text")||n.is("$textProxy"))return n.data;if(n.is("element","img")&&n.hasAttribute("alt"))return n.getAttribute("alt");if(n.is("element","br"))return`
`;let e="",t=null;for(let i of n.getChildren())e+=bpe(i,t)+g9(i),t=i;return e}function bpe(n,e){return e?n.is("element","li")&&!n.isEmpty&&n.getChild(0).is("containerElement")||u9.includes(n.name)&&u9.includes(e.name)?`

`:!n.is("containerElement")&&!e.is("containerElement")?"":d9.includes(n.name)||d9.includes(e.name)?`
`:n.is("element")&&n.getCustomProperty("dataPipeline:transparentRendering")||e.is("element")&&e.getCustomProperty("dataPipeline:transparentRendering")?"":`

`:""}var rb=class extends M{_markersToCopy=new Map;static get pluginName(){return"ClipboardMarkersUtils"}static get isOfficialPlugin(){return!0}_registerMarkerToCopy(e,t){this._markersToCopy.set(e,t)}_copySelectedFragmentWithMarkers(e,t,i=o=>o.model.getSelectedContent(o.model.document.selection)){return this.editor.model.change(o=>{let r=o.model.document.selection;o.setSelection(t);let s=this._insertFakeMarkersIntoSelection(o,o.model.document.selection,e),a=i(o),l=this._removeFakeMarkersInsideElement(o,a);for(let[c,d]of Object.entries(s)){l[c]||=o.createRangeIn(a);for(let f of d)o.remove(f)}a.markers.clear();for(let[c,d]of Object.entries(l))a.markers.set(c,d);return o.setSelection(r),a})}_pasteMarkersIntoTransformedElement(e,t){let i=this._getPasteMarkersFromRangeMap(e);return this.editor.model.change(o=>{let r=this._insertFakeMarkersElements(o,i),s=t(o),a=this._removeFakeMarkersInsideElement(o,s);for(let l of Object.values(r).flat())o.remove(l);for(let[l,c]of Object.entries(a))o.model.markers.has(l)||o.addMarker(l,{usingOperation:!0,affectsData:!0,range:c});return s})}_pasteFragmentWithMarkers(e){let t=this._getPasteMarkersFromRangeMap(e.markers);e.markers.clear();for(let i of t)e.markers.set(i.name,i.range);return this.editor.model.insertContent(e)}_forceMarkersCopy(e,t,i={allowedActions:"all",copyPartiallySelected:!0,duplicateOnPaste:!0}){let o=this._markersToCopy.get(e);this._markersToCopy.set(e,i),t(),o?this._markersToCopy.set(e,o):this._markersToCopy.delete(e)}_isMarkerCopyable(e,t){let i=this._getMarkerClipboardConfig(e);if(!i)return!1;if(!t)return!0;let{allowedActions:o}=i;return o==="all"||o.includes(t)}_hasMarkerConfiguration(e){return!!this._getMarkerClipboardConfig(e)}_getMarkerClipboardConfig(e){let[t]=e.split(":");return this._markersToCopy.get(t)||null}_insertFakeMarkersIntoSelection(e,t,i){let o=this._getCopyableMarkersFromSelection(e,t,i);return this._insertFakeMarkersElements(e,o)}_getCopyableMarkersFromSelection(e,t,i){let o=Array.from(t.getRanges()),r=new Set(o.flatMap(a=>Array.from(e.model.markers.getMarkersIntersectingRange(a)))),s=a=>{if(!this._isMarkerCopyable(a.name,i))return!1;let{copyPartiallySelected:c}=this._getMarkerClipboardConfig(a.name);if(!c){let d=a.getRange();return o.some(f=>f.containsRange(d,!0))}return!0};return Array.from(r).filter(s).map(a=>({name:i==="dragstart"?this._getUniqueMarkerName(a.name):a.name,range:a.getRange()}))}_getPasteMarkersFromRangeMap(e,t=null){let{model:i}=this.editor;return(e instanceof Map?Array.from(e.entries()):Object.entries(e)).flatMap(([r,s])=>{if(!this._hasMarkerConfiguration(r))return[{name:r,range:s}];if(this._isMarkerCopyable(r,t)){let a=this._getMarkerClipboardConfig(r),l=i.markers.has(r)&&i.markers.get(r).getRange().root.rootName==="$graveyard";return(a.duplicateOnPaste||l)&&(r=this._getUniqueMarkerName(r)),[{name:r,range:s}]}return[]})}_insertFakeMarkersElements(e,t){let i={},o=t.flatMap(r=>{let{start:s,end:a}=r.range;return[{position:s,marker:r,type:"start"},{position:a,marker:r,type:"end"}]}).sort(({position:r},{position:s})=>r.isBefore(s)?1:-1);for(let{position:r,marker:s,type:a}of o){let l=e.createElement("$marker",{"data-name":s.name,"data-type":a});i[s.name]||(i[s.name]=[]),i[s.name].push(l),e.insert(l,r)}return i}_removeFakeMarkersInsideElement(e,t){let o=this._getAllFakeMarkersFromElement(e,t).reduce((r,s)=>{let a=s.markerElement&&e.createPositionBefore(s.markerElement),l=r[s.name],c=!1;return l&&l.start&&l.end&&(this._getMarkerClipboardConfig(s.name).duplicateOnPaste?r[this._getUniqueMarkerName(s.name)]=r[s.name]:c=!0,l=null),c||(r[s.name]=I(v({},l),{[s.type]:a})),s.markerElement&&e.remove(s.markerElement),r},{});return CT(o,r=>new A(r.start||e.createPositionFromPath(t,[0]),r.end||e.createPositionAt(t,"end")))}_getAllFakeMarkersFromElement(e,t){let i=Array.from(e.createRangeIn(t)).flatMap(({item:s})=>{if(!s.is("element","$marker"))return[];let a=s.getAttribute("data-name"),l=s.getAttribute("data-type");return[{markerElement:s,name:a,type:l}]}),o=[],r=[];for(let s of i)s.type==="end"&&(i.some(l=>l.name===s.name&&l.type==="start")||o.push({markerElement:null,name:s.name,type:"start"})),s.type==="start"&&(i.some(l=>l.name===s.name&&l.type==="end")||r.unshift({markerElement:null,name:s.name,type:"end"}));return[...o,...i,...r]}_getUniqueMarkerName(e){let t=e.split(":"),i=an().substring(1,6);return t.length===3?`${t.slice(0,2).join(":")}:${i}`:`${t.join(":")}:${i}`}},An=class extends M{static get pluginName(){return"ClipboardPipeline"}static get isOfficialPlugin(){return!0}static get requires(){return[rb]}init(){this.editor.editing.view.addObserver(fd),this._setupPasteDrop(),this._setupCopyCut()}_fireOutputTransformationEvent(e,t,i){let o=this.editor.plugins.get("ClipboardMarkersUtils");this.editor.model.enqueueChange({isUndoable:i==="cut"},()=>{let r=o._copySelectedFragmentWithMarkers(i,t);this.fire("outputTransformation",{dataTransfer:e,content:r,method:i})})}_setupPasteDrop(){let e=this.editor,t=e.model,i=e.editing.view,o=i.document,r=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(o,"clipboardInput",(s,a)=>{a.method=="paste"&&!e.model.canEditAt(e.model.document.selection)&&s.stop()},{priority:"highest"}),this.listenTo(o,"clipboardInput",(s,a)=>{let l=a.dataTransfer,c;if(a.content)c=a.content;else{let f="";l.getData("text/html")?f=gpe(l.getData("text/html")):l.getData("text/plain")&&(f=ppe(l.getData("text/plain"))),c=this.editor.data.htmlProcessor.toView(f)}let d=new yi(this,"inputTransformation");this.fire(d,{content:c,dataTransfer:l,targetRanges:a.targetRanges,method:a.method}),d.stop.called&&s.stop(),i.scrollToTheSelection()},{priority:"low"}),this.listenTo(this,"inputTransformation",(s,a)=>{if(a.content.isEmpty)return;let c=this.editor.data.toModel(a.content,"$clipboardHolder");c.childCount!=0&&(s.stop(),t.change(()=>{this.fire("contentInsertion",{content:c,method:a.method,dataTransfer:a.dataTransfer,targetRanges:a.targetRanges})}))},{priority:"low"}),this.listenTo(this,"contentInsertion",(s,a)=>{a.resultRange=r._pasteFragmentWithMarkers(a.content)},{priority:"low"})}_setupCopyCut(){let e=this.editor,t=e.model.document,o=e.editing.view.document,r=(s,a)=>{let l=a.dataTransfer;a.preventDefault(),this._fireOutputTransformationEvent(l,t.selection,s.name)};this.listenTo(o,"copy",r,{priority:"low"}),this.listenTo(o,"cut",(s,a)=>{e.model.canEditAt(e.model.document.selection)?r(s,a):a.preventDefault()},{priority:"low"}),this.listenTo(this,"outputTransformation",(s,a)=>{let l=e.data.toView(a.content);o.fire("clipboardOutput",{dataTransfer:a.dataTransfer,content:l,method:a.method})},{priority:"low"}),this.listenTo(o,"clipboardOutput",(s,a)=>{a.content.isEmpty||(a.dataTransfer.setData("text/html",this.editor.data.htmlProcessor.toData(a.content)),a.dataTransfer.setData("text/plain",g9(a.content))),a.method=="cut"&&e.model.deleteContent(t.selection)},{priority:"low"})}},oM=Ts("px"),rM=class extends Y{constructor(){super();let e=this.bindTemplate;this.set({isVisible:!1,left:null,top:null,width:null}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",e.if("isVisible","ck-hidden",t=>!t)],style:{left:e.to("left",t=>oM(t)),top:e.to("top",t=>oM(t)),width:e.to("width",t=>oM(t))}}})}},Tm=class extends M{removeDropMarkerDelayed=Yh(()=>this.removeDropMarker(),40);_updateDropMarkerThrottled=Ga(e=>this._updateDropMarker(e),40);_reconvertMarkerThrottled=Ga(()=>{this.editor.model.markers.has("drop-target")&&this.editor.editing.reconvertMarker("drop-target")},0);_dropTargetLineView=new rM;_domEmitter=new(mn());_scrollables=new Map;static get pluginName(){return"DragDropTarget"}static get isOfficialPlugin(){return!0}init(){this._setupDropMarker()}destroy(){this._domEmitter.stopListening();for(let{resizeObserver:e}of this._scrollables.values())e.destroy();return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),super.destroy()}updateDropMarker(e,t,i,o,r,s){this.removeDropMarkerDelayed.cancel();let a=h9(this.editor,e,t,i,o,r,s);if(a){if(s&&s.containsRange(a))return this.removeDropMarker();this._updateDropMarkerThrottled(a)}}getFinalDropRange(e,t,i,o,r,s){let a=h9(this.editor,e,t,i,o,r,s);return this.removeDropMarker(),a}removeDropMarker(){let e=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,e.markers.has("drop-target")&&e.change(t=>{t.removeMarker("drop-target")})}_setupDropMarker(){let e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:(t,{writer:i})=>{if(e.model.schema.checkChild(t.markerRange.start,"$text"))return this._dropTargetLineView.isVisible=!1,this._createDropTargetPosition(i);t.markerRange.isCollapsed?this._updateDropTargetLine(t.markerRange):this._dropTargetLineView.isVisible=!1}})}_updateDropMarker(e){let t=this.editor,i=t.model.markers;t.model.change(o=>{i.has("drop-target")?i.get("drop-target").getRange().isEqual(e)||o.updateMarker("drop-target",{range:e}):o.addMarker("drop-target",{range:e,usingOperation:!1,affectsData:!1})})}_createDropTargetPosition(e){return e.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},function(t){let i=this.toDomElement(t);return i.append("\u2060",t.createElement("span"),"\u2060"),i})}_updateDropTargetLine(e){let t=this.editor.editing,i=e.start.nodeBefore,o=e.start.nodeAfter,r=e.start.parent,s=i?t.mapper.toViewElement(i):null,a=s?t.view.domConverter.mapViewToDom(s):null,l=o?t.mapper.toViewElement(o):null,c=l?t.view.domConverter.mapViewToDom(l):null,d=t.mapper.toViewElement(r);if(!d)return;let f=t.view.domConverter.mapViewToDom(d),p=this._getScrollableRect(d),{scrollX:g,scrollY:w}=U.window,k=a?new Ae(a):null,C=c?new Ae(c):null,S=new Ae(f).excludeScrollbarsAndBorders(),T=k?k.bottom:S.top,V=C?C.top:S.bottom,K=U.window.getComputedStyle(f),de=T<=V?(T+V)/2:V;if(p.top<de&&de<p.bottom){let O=S.left+parseFloat(K.paddingLeft),j=S.right-parseFloat(K.paddingRight),z=Math.max(O+g,p.left),Ue=Math.min(j+g,p.right);this._dropTargetLineView.set({isVisible:!0,left:z,top:de+w,width:Ue-z})}else this._dropTargetLineView.isVisible=!1}_getScrollableRect(e){let t=e.root.rootName,i;if(this._scrollables.has(t))i=this._scrollables.get(t).domElement;else{let o=this.editor.editing.view.domConverter.mapViewToDom(e);i=kpe(o),this._domEmitter.listenTo(i,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});let r=new Gh(i,this._reconvertMarkerThrottled);this._scrollables.set(t,{domElement:i,resizeObserver:r})}return new Ae(i).excludeScrollbarsAndBorders()}};function h9(n,e,t,i,o,r,s){let a=n.model,l=n.editing.mapper,d=m9(n,e);for(;d;){if(!r){if(a.schema.checkChild(d,"$text")){if(t){let f=t[0].start,p=l.toModelPosition(f);if(!s||Array.from(s.getItems()).every(w=>a.schema.checkChild(p,w))){if(a.schema.checkChild(p,"$text"))return a.createRange(p);if(f)return u_(n,m9(n,f.parent),i,o)}}}else if(a.schema.isInline(d))return u_(n,d,i,o)}if(a.schema.isBlock(d))return u_(n,d,i,o);if(a.schema.checkChild(d,"$block")){let f=Array.from(d.getChildren()).filter(w=>w.is("element")&&!wpe(n,w)),p=0,g=f.length;if(g==0)return a.createRange(a.createPositionAt(d,"end"));for(;p<g-1;){let w=Math.floor((p+g)/2);b9(n,f[w],i,o)=="before"?g=w:p=w}return u_(n,f[p],i,o)}d=d.parent}return null}function wpe(n,e){let t=n.editing.mapper,i=n.editing.view.domConverter,o=t.toViewElement(e);if(!o)return!0;let r=i.mapViewToDom(o);return U.window.getComputedStyle(r).float!="none"}function u_(n,e,t,i){let o=n.model;return o.createRange(o.createPositionAt(e,b9(n,e,t,i)))}function b9(n,e,t,i){let o=n.editing.mapper,r=n.editing.view.domConverter,s=o.toViewElement(e),a=r.mapViewToDom(s),l=new Ae(a);return n.model.schema.isInline(e)?t<(l.left+l.right)/2?"before":"after":i<(l.top+l.bottom)/2?"before":"after"}function m9(n,e){let t=n.editing.mapper,i=n.editing.view,o=t.toModelElement(e);if(o)return o;let r=i.createPositionBefore(e),s=t.findMappedViewAncestor(r);return t.toModelElement(s)}function kpe(n){let e=n;do{e=e.parentElement;let t=U.window.getComputedStyle(e).overflowY;if(t=="auto"||t=="scroll")break}while(e.tagName!="BODY");return e}var sM=class extends M{_isBlockDragging=!1;_domEmitter=new(mn());static get pluginName(){return"DragDropBlockToolbar"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(this.listenTo(e,"change:isReadOnly",(t,i,o)=>{o?(this.forceDisabled("readOnlyMode"),this._isBlockDragging=!1):this.clearForceDisabled("readOnlyMode")}),ie.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){let i=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(i,"dragstart",(o,r)=>this._handleBlockDragStart(r)),this._domEmitter.listenTo(U.document,"dragover",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(U.document,"drop",(o,r)=>this._handleBlockDragging(r)),this._domEmitter.listenTo(U.document,"dragend",()=>this._handleBlockDragEnd(),{useCapture:!0}),this.isEnabled&&i.setAttribute("draggable","true"),this.on("change:isEnabled",(o,r,s)=>{i.setAttribute("draggable",s?"true":"false")})}}destroy(){return this._domEmitter.stopListening(),super.destroy()}_handleBlockDragStart(e){if(!this.isEnabled)return;let t=this.editor.model,i=t.document.selection,o=this.editor.editing.view,r=Array.from(i.getSelectedBlocks()),s=t.createRange(t.createPositionBefore(r[0]),t.createPositionAfter(r[r.length-1]));t.change(a=>a.setSelection(s)),this._isBlockDragging=!0,o.focus(),o.getObserver(fd).onDomEvent(e)}_handleBlockDragging(e){if(!this.isEnabled||!this._isBlockDragging)return;let t=e.clientX+(this.editor.locale.contentLanguageDirection=="ltr"?100:-100),i=e.clientY,o=document.elementFromPoint(t,i),r=this.editor.editing.view;!o||!o.closest(".ck-editor__editable")||r.getObserver(fd).onDomEvent(I(v({},e),{type:e.type,dataTransfer:e.dataTransfer,target:o,clientX:t,clientY:i,preventDefault:()=>e.preventDefault(),stopPropagation:()=>e.stopPropagation()}))}_handleBlockDragEnd(){this._isBlockDragging=!1}},aM=class extends M{_draggedRange;_draggingUid;_draggableElement;_clearDraggableAttributesDelayed=Yh(()=>this._clearDraggableAttributes(),40);_blockMode=!1;_domEmitter=new(mn());_previewContainer;static get pluginName(){return"DragDrop"}static get isOfficialPlugin(){return!0}static get requires(){return[An,Ei,Tm,sM]}init(){let e=this.editor,t=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,t.addObserver(fd),t.addObserver(el),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(i,o,r)=>{r?this.forceDisabled("readOnlyMode"):this.clearForceDisabled("readOnlyMode")}),this.on("change:isEnabled",(i,o,r)=>{r||this._finalizeDragging(!1)}),ie.isAndroid&&this.forceDisabled("noAndroidSupport")}destroy(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),super.destroy()}_setupDragging(){let e=this.editor,t=e.model,i=e.editing.view,o=i.document,r=e.plugins.get(Tm);this.listenTo(o,"dragstart",(s,a)=>{if(a.target&&a.target.is("editableElement")){a.preventDefault();return}if(this._prepareDraggedRange(a.target),!this._draggedRange){a.preventDefault();return}this._draggingUid=an(),a.dataTransfer.effectAllowed=this.isEnabled?"copyMove":"copy",a.dataTransfer.setData("application/ckeditor5-dragging-uid",this._draggingUid);let l=t.createSelection(this._draggedRange.toRange());this.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(a.dataTransfer,l,"dragstart");let{dataTransfer:d,domTarget:f,domEvent:p}=a,{clientX:g}=p;this._updatePreview({dataTransfer:d,domTarget:f,clientX:g}),a.stopPropagation(),this.isEnabled||(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid="")},{priority:"low"}),this.listenTo(o,"dragend",(s,a)=>{this._finalizeDragging(!a.dataTransfer.isCanceled&&a.dataTransfer.dropEffect=="move")},{priority:"low"}),this._domEmitter.listenTo(U.document,"dragend",()=>{this._blockMode=!1},{useCapture:!0}),this.listenTo(o,"dragenter",()=>{this.isEnabled&&i.focus()}),this.listenTo(o,"dragleave",()=>{r.removeDropMarkerDelayed()}),this.listenTo(o,"dragging",(s,a)=>{if(!this.isEnabled){a.dataTransfer.dropEffect="none";return}let{clientX:l,clientY:c}=a.domEvent;r.updateDropMarker(a.target,a.targetRanges,l,c,this._blockMode,this._draggedRange),this._draggedRange||(a.dataTransfer.dropEffect="copy"),ie.isGecko||(a.dataTransfer.effectAllowed=="copy"?a.dataTransfer.dropEffect="copy":["all","copyMove"].includes(a.dataTransfer.effectAllowed)&&(a.dataTransfer.dropEffect="move")),s.stop()},{priority:"low"})}_setupClipboardInputIntegration(){let e=this.editor,i=e.editing.view.document,o=e.plugins.get(Tm);this.listenTo(i,"clipboardInput",(r,s)=>{if(s.method!="drop")return;let{clientX:a,clientY:l}=s.domEvent,c=o.getFinalDropRange(s.target,s.targetRanges,a,l,this._blockMode,this._draggedRange);if(!c){this._finalizeDragging(!1),r.stop();return}if(this._draggedRange&&this._draggingUid!=s.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(this._draggedRange.detach(),this._draggedRange=null,this._draggingUid=""),f9(s.dataTransfer)=="move"&&this._draggedRange&&this._draggedRange.containsRange(c,!0)){this._finalizeDragging(!1),r.stop();return}s.targetRanges=[e.editing.mapper.toViewRange(c)]},{priority:"high"})}_setupContentInsertionIntegration(){let e=this.editor.plugins.get(An);e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let o=i.targetRanges.map(r=>this.editor.editing.mapper.toModelRange(r));this.editor.model.change(r=>r.setSelection(o))},{priority:"high"}),e.on("contentInsertion",(t,i)=>{if(!this.isEnabled||i.method!=="drop")return;let o=f9(i.dataTransfer)=="move",r=!i.resultRange||!i.resultRange.isCollapsed;this._finalizeDragging(r&&o)},{priority:"lowest"})}_setupDraggableAttributeHandling(){let e=this.editor,t=e.editing.view,i=t.document;this.listenTo(i,"mousedown",(o,r)=>{if(ie.isAndroid||!r)return;this._clearDraggableAttributesDelayed.cancel();let s=p9(r.target);if(ie.isBlink&&!e.isReadOnly&&!s&&!i.selection.isCollapsed){let a=i.selection.getSelectedElement();(!a||!Pt(a))&&(s=i.selection.editableElement)}s&&(t.change(a=>{a.setAttribute("draggable","true",s)}),this._draggableElement=e.editing.mapper.toModelElement(s))}),this.listenTo(i,"mouseup",()=>{ie.isAndroid||this._clearDraggableAttributesDelayed()})}_clearDraggableAttributes(){let e=this.editor.editing;e.view.change(t=>{this._draggableElement&&this._draggableElement.root.rootName!="$graveyard"&&t.removeAttribute("draggable",e.mapper.toViewElement(this._draggableElement)),this._draggableElement=null})}_finalizeDragging(e){let t=this.editor,i=t.model;t.plugins.get(Tm).removeDropMarker(),this._clearDraggableAttributes(),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(e&&this.isEnabled&&i.change(r=>{let s=i.createSelection(this._draggedRange);i.deleteContent(s,{doNotAutoparagraph:!0});let a=s.getFirstPosition().parent;a.isEmpty&&!i.schema.checkChild(a,"$text")&&i.schema.checkChild(a,"paragraph")&&r.insertElement("paragraph",a,0)}),this._draggedRange.detach(),this._draggedRange=null)}_prepareDraggedRange(e){let t=this.editor,i=t.model,o=i.document.selection,r=e?p9(e):null;if(r){let c=t.editing.mapper.toModelElement(r);this._draggedRange=pn.fromRange(i.createRangeOn(c)),this._blockMode=i.schema.isBlock(c),t.plugins.has("WidgetToolbarRepository")&&t.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop");return}if(o.isCollapsed&&!o.getFirstPosition().parent.isEmpty)return;let s=Array.from(o.getSelectedBlocks()),a=o.getFirstRange();if(s.length==0){this._draggedRange=pn.fromRange(a);return}let l=w9(i,s);if(s.length>1)this._draggedRange=pn.fromRange(l),this._blockMode=!0;else if(s.length==1){let c=a.start.isTouching(l.start)&&a.end.isTouching(l.end);this._draggedRange=pn.fromRange(c?l:a),this._blockMode=c}i.change(c=>c.setSelection(this._draggedRange.toRange()))}_updatePreview({dataTransfer:e,domTarget:t,clientX:i}){let o=this.editor.editing.view,r=o.document.selection.editableElement,s=o.domConverter.mapViewToDom(r),a=U.window.getComputedStyle(s);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Dt(U.document,"div",{style:"position: fixed; left: -999999px;"}),U.document.body.appendChild(this._previewContainer));let l=new Ae(s);if(s.contains(t))return;let c=parseFloat(a.paddingLeft),d=Dt(U.document,"div");d.className="ck ck-content",d.style.width=a.width,d.style.paddingLeft=`${l.left-i+c}px`,ie.isiOS&&(d.style.backgroundColor="white"),o.domConverter.setContentOf(d,e.getData("text/html")),e.setDragImage(d,0,0),this._previewContainer.appendChild(d)}};function f9(n){return ie.isGecko?n.dropEffect:["all","copyMove"].includes(n.effectAllowed)?"move":"copy"}function p9(n){if(n.is("editableElement"))return null;if(n.hasClass("ck-widget__selection-handle"))return n.findAncestor(Pt);if(Pt(n))return n;let e=n.findAncestor(t=>Pt(t)||t.is("editableElement"));return Pt(e)?e:null}function w9(n,e){let t=e[0],i=e[e.length-1],o=t.getCommonAncestor(i),r=n.createPositionBefore(t),s=n.createPositionAfter(i);if(o&&o.is("element")&&!n.schema.isLimit(o)){let a=n.createRangeOn(o),l=r.isTouching(a.start),c=s.isTouching(a.end);if(l&&c)return w9(n,[o])}return n.createRange(r,s)}var lM=class extends M{static get pluginName(){return"PastePlainText"}static get isOfficialPlugin(){return!0}static get requires(){return[An]}init(){let e=this.editor,t=e.model,i=e.editing.view,o=t.document.selection;i.addObserver(fd),e.plugins.get(An).on("contentInsertion",(r,s)=>{vpe(s.content,t)&&t.change(a=>{let l=Array.from(o.getAttributes()).filter(([d])=>t.schema.getAttributeProperties(d).isFormatting);o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0}),l.push(...o.getAttributes());let c=a.createRangeIn(s.content);for(let d of c.getItems())for(let f of l)t.schema.checkAttribute(d,f[0])&&a.setAttribute(f[0],f[1],d)})})}};function vpe(n,e){let t=e.createRangeIn(n);if(n.childCount==1){let i=n.getChild(0);i.is("element")&&e.schema.isBlock(i)&&!e.schema.isObject(i)&&!e.schema.isLimit(i)&&(t=e.createRangeIn(i))}for(let i of t.getItems())if(!e.schema.isInline(i)||Array.from(i.getAttributeKeys()).find(r=>e.schema.getAttributeProperties(r).isFormatting))return!1;return!0}var pd=class extends M{static get pluginName(){return"Clipboard"}static get isOfficialPlugin(){return!0}static get requires(){return[rb,An,aM,lM]}init(){let e=this.editor,t=this.editor.t;e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Copy selected content"),keystroke:"CTRL+C"},{label:t("Paste content"),keystroke:"CTRL+V"},{label:t("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}};function h_(n){let e=n.t,t=n.config.get("codeBlock.languages");for(let i of t)i.label==="Plain text"&&(i.label=e("Plain text")),i.class===void 0&&(i.class=`language-${i.language}`);return t}function m_(n,e,t){let i={};for(let o of n)if(e==="class"){let r=o[e].split(" ").shift();i[r]=o[t]}else i[o[e]]=o[t];return i}function gM(n){return n.data.match(/^(\s*)/)[0]}function ype(n,e){let t=n.createDocumentFragment(),i=e.split(`
`),o=i.reduce((r,s,a)=>(r.push(s),a<i.length-1&&r.push(n.createElement("br")),r),[]);return n.appendChild(o,t),t}function dM(n){let e=n.document.selection,t=[];if(e.isCollapsed)return[e.anchor];let i=e.getFirstRange().getWalker({ignoreElementEnd:!0,direction:"backward"});for(let{item:o}of i){let r=o.is("$textProxy")?o.textNode:o,s=r.parent;if(!s.is("element","codeBlock")||r.is("element","softBreak"))continue;for(;r.previousSibling&&!r.previousSibling.is("element","softBreak");)r=r.previousSibling;let a=r.is("$text")?r.startOffset+gM(r).length:r.startOffset,l=n.createPositionAt(s,a);t.every(c=>!c.isEqual(l))&&t.push(l)}return t}function C9(n){let e=lt(n.getSelectedBlocks());return!!e&&e.is("element","codeBlock")}function k9(n,e){return e.is("rootElement")||n.isLimit(e)?!1:n.checkChild(e.parent,"codeBlock")}function v9(n,e,t,i){let o=m_(e,"language","label"),r=t.getAttribute("language");if(r in o){let s=o[r];return n(i==="enter"?"Entering %0 code snippet":"Leaving %0 code snippet",s)}return n(i==="enter"?"Entering code snippet":"Leaving code snippet")}function E9(n,e){for(n.textNode&&(n=e.createPositionBefore(n.textNode));n.nodeBefore&&!n.nodeBefore.is("element","softBreak");)n=e.createPositionBefore(n.nodeBefore);let t=n.nodeAfter;return t&&t.is("$text")?t:null}var uM=class extends te{_lastLanguage;constructor(e){super(e),this._lastLanguage=null}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){let t=this.editor,i=t.model,o=i.document.selection,s=h_(t)[0],a=Array.from(o.getSelectedBlocks()),l=e.forceValue==null?!this.value:e.forceValue,c=_pe(e,this._lastLanguage,s.language);i.change(d=>{l?this._applyCodeBlock(d,a,c):this._removeCodeBlock(d,a)})}_getValue(){let e=this.editor.model.document.selection,t=lt(e.getSelectedBlocks());return!!(t&&t.is("element","codeBlock"))?t.getAttribute("language"):!1}_checkEnabled(){if(this.value)return!0;let e=this.editor.model.document.selection,t=this.editor.model.schema,i=lt(e.getSelectedBlocks());return i?k9(t,i):!1}_applyCodeBlock(e,t,i){this._lastLanguage=i;let o=this.editor.model.schema,r=t.filter(s=>k9(o,s));for(let s of r)e.rename(s,"codeBlock"),e.setAttribute("language",i,s),o.removeDisallowedAttributes([s],e),Array.from(s.getChildren()).filter(a=>!o.checkChild(s,a)).forEach(a=>e.remove(a));r.reverse().forEach((s,a)=>{let l=r[a+1];s.previousSibling===l&&(e.appendElement("softBreak",l),e.merge(e.createPositionBefore(s)))})}_removeCodeBlock(e,t){let i=t.filter(o=>o.is("element","codeBlock"));for(let o of i){let r=e.createRangeOn(o);for(let s of Array.from(r.getItems()).reverse())if(s.is("element","softBreak")&&s.parent.is("element","codeBlock")){let{position:a}=e.split(e.createPositionBefore(s)),l=a.nodeAfter;e.rename(l,"paragraph"),e.removeAttribute("language",l),e.remove(s)}e.rename(o,"paragraph"),e.removeAttribute("language",o)}}};function _pe(n,e,t){return n.language?n.language:n.usePreviousLanguageChoice&&e?e:t}var hM=class extends te{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){let t=this.editor.model;t.change(i=>{let o=dM(t);for(let r of o){let s=i.createText(this._indentSequence);t.insertContent(s,r)}})}_checkEnabled(){return this._indentSequence?C9(this.editor.model.document.selection):!1}},mM=class extends te{_indentSequence;constructor(e){super(e),this._indentSequence=e.config.get("codeBlock.indentSequence")}refresh(){this.isEnabled=this._checkEnabled()}execute(){let t=this.editor.model;t.change(()=>{let i=dM(t);for(let o of i){let r=y9(t,o,this._indentSequence);r&&t.deleteContent(t.createSelection(r))}})}_checkEnabled(){if(!this._indentSequence)return!1;let e=this.editor.model;return C9(e.document.selection)?dM(e).some(t=>y9(e,t,this._indentSequence)):!1}};function y9(n,e,t){let i=E9(e,n);if(!i)return null;let o=gM(i),r=o.lastIndexOf(t);if(r+t.length!==o.length||r===-1)return null;let{parent:s,startOffset:a}=i;return n.createRange(n.createPositionAt(s,a+r),n.createPositionAt(s,a+r+t.length))}function _9(n,e,t=!1){let i=m_(e,"language","class"),o=m_(e,"language","label");return(r,s,a)=>{let{writer:l,mapper:c,consumable:d}=a;if(!d.consume(s.item,"insert"))return;let f=s.item.getAttribute("language"),p=c.toViewPosition(n.createPositionBefore(s.item)),g={};t&&(g["data-language"]=o[f],g.spellcheck="false");let w=i[f]?{class:i[f]}:void 0,k=l.createContainerElement("code",w),C=l.createContainerElement("pre",g,k);l.insert(p,C),c.bindElements(s.item,k)}}function Cpe(n){return(e,t,i)=>{if(t.item.parent.name!=="codeBlock")return;let{writer:o,mapper:r,consumable:s}=i;if(!s.consume(t.item,"insert"))return;let a=r.toViewPosition(n.createPositionBefore(t.item));o.insert(a,o.createText(`
`))}}function Epe(n,e){let t=m_(e,"class","language"),i=e[0].language;return(o,r,s)=>{let a=r.viewItem,l=a.parent;if(!l||!l.is("element","pre")||r.modelCursor.findAncestor("codeBlock"))return;let{consumable:c,writer:d}=s;if(!c.test(a,{name:!0}))return;let f=d.createElement("codeBlock"),p=[...a.getClassNames()];p.length||p.push("");for(let g of p){let w=t[g];if(w){d.setAttribute("language",w,f);break}}f.hasAttribute("language")||d.setAttribute("language",i,f),s.convertChildren(a,f),s.safeInsert(f,r.modelCursor)&&(c.consume(a,{name:!0}),s.updateConversionResult(f,r))}}function Spe(){return(n,e,{consumable:t,writer:i})=>{let o=e.modelCursor;if(!t.test(e.viewItem)||!o.findAncestor("codeBlock"))return;t.consume(e.viewItem);let s=e.viewItem.data.split(`
`).map(l=>i.createText(l)),a=s[s.length-1];for(let l of s)if(i.insert(l,o),o=o.getShiftedBy(l.offsetSize),l!==a){let c=i.createElement("softBreak");i.insert(c,o),o=i.createPositionAfter(c)}e.modelRange=i.createRange(e.modelCursor,o),e.modelCursor=o}}function xpe(){return(n,e,{consumable:t})=>{let i=e.viewItem;if(i.findAncestor("pre"))return;let o=Array.from(i.getChildren()),r=o.find(s=>s.is("element","code"));if(r)for(let s of o)s===r||!s.is("$text")||t.consume(s,{name:!0})}}var S9="paragraph",fM=class extends M{static get pluginName(){return"CodeBlockEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Am]}constructor(e){super(e),e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"html",label:"HTML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"},{language:"xml",label:"XML"}],indentSequence:"	"})}init(){let e=this.editor,t=e.model.schema,i=e.model,o=e.editing.view,r=h_(e);e.commands.add("codeBlock",new uM(e)),e.commands.add("indentCodeBlock",new hM(e)),e.commands.add("outdentCodeBlock",new mM(e)),this.listenTo(o.document,"tab",(s,a)=>{let l=a.shiftKey?"outdentCodeBlock":"indentCodeBlock";e.commands.get(l).isEnabled&&(e.execute(l),a.stopPropagation(),a.preventDefault(),s.stop())},{context:"pre"}),t.register("codeBlock",{allowWhere:"$block",allowChildren:"$text",disallowChildren:"$inlineObject",allowAttributes:["language"],allowAttributesOf:"$listItem",isBlock:!0}),t.addAttributeCheck((s,a)=>{let l=s.getItem(s.length-2);if(t.getAttributeProperties(a).isFormatting&&l&&l.name=="codeBlock")return!1}),e.editing.downcastDispatcher.on("insert:codeBlock",_9(i,r,!0)),e.data.downcastDispatcher.on("insert:codeBlock",_9(i,r)),e.data.downcastDispatcher.on("insert:softBreak",Cpe(i),{priority:"high"}),e.data.upcastDispatcher.on("element:code",Epe(o,r)),e.data.upcastDispatcher.on("text",Spe()),e.data.upcastDispatcher.on("element:pre",xpe(),{priority:"high"}),this.listenTo(e.editing.view.document,"clipboardInput",(s,a)=>{let l=i.createRange(i.document.selection.anchor);if(a.targetRanges&&(l=e.editing.mapper.toModelRange(a.targetRanges[0])),!l.start.parent.is("element","codeBlock"))return;let c=a.dataTransfer.getData("text/plain"),d=new tl(e.editing.view.document);a.content=ype(d,c)}),e.plugins.has("ClipboardPipeline")&&e.plugins.get(An).on("contentInsertion",(s,a)=>{let l=e.model,c=l.document.selection;c.anchor.parent.is("element","codeBlock")&&l.change(d=>{let f=d.createRangeIn(a.content);for(let p of[...f.getItems()])p.is("node")&&!t.checkChild(c.anchor,p)&&d.remove(p)})}),this.listenTo(i,"getSelectedContent",(s,[a])=>{let l=a.anchor;a.isCollapsed||!l.parent.is("element","codeBlock")||!l.hasSameParentAs(a.focus)||i.change(c=>{let d=s.return;if(l.parent.is("element")&&(d.childCount>1||a.containsEntireContent(l.parent))){let p=c.createElement("codeBlock",l.parent.getAttributes());c.append(d,p);let g=c.createDocumentFragment();c.append(p,g),s.return=g;return}let f=d.getChild(0);t.checkAttribute(f,"code")&&c.setAttribute("code",!0,f)})})}afterInit(){let e=this.editor,t=e.commands,i=t.get("indent"),o=t.get("outdent");i&&i.registerChildCommand(t.get("indentCodeBlock"),{priority:"highest"}),o&&o.registerChildCommand(t.get("outdentCodeBlock")),this.listenTo(e.editing.view.document,"enter",(r,s)=>{e.model.document.selection.getLastPosition().parent.is("element","codeBlock")&&(!Tpe(e,s.isSoft)&&!Ipe(e,s.isSoft)&&Ape(e),s.preventDefault(),r.stop())},{context:"pre"}),this._initAriaAnnouncements()}_initAriaAnnouncements(){let{model:e,ui:t,t:i}=this.editor,o=h_(this.editor),r=null;e.document.selection.on("change:range",()=>{let s=e.document.selection.focus.parent;!t||r===s||!s.is("element")||(r&&r.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(v9(i,o,r,"leave")),s.is("element","codeBlock")&&t.ariaLiveAnnouncer.announce(v9(i,o,s,"enter")),r=s)})}};function Ape(n){let e=n.model,t=e.document,i=t.selection.getLastPosition(),o,r=E9(i,e);r&&r.is("$text")&&(o=gM(r)),n.model.change(s=>{n.execute("shiftEnter"),o&&s.insertText(o,t.selection.anchor)})}function Tpe(n,e){let i=n.model.document,o=n.editing.view,r=i.selection.getLastPosition(),s=r.nodeAfter;return e||!i.selection.isCollapsed||!r.isAtStart||!gd(s)?!1:(n.model.change(a=>{n.execute("enter");let l=i.selection.anchor.parent.previousSibling;a.rename(l,S9),a.setSelection(l,"in"),n.model.schema.removeDisallowedAttributes([l],a),a.remove(s)}),o.scrollToTheSelection(),!0)}function Ipe(n,e){let t=n.model,i=t.document,o=n.editing.view,r=i.selection.getLastPosition(),s=r.nodeBefore,a;if(e||!i.selection.isCollapsed||!r.isAtEnd||!s||!s.previousSibling)return!1;if(gd(s)&&gd(s.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling),t.createPositionAfter(s));else if(cM(s)&&gd(s.previousSibling)&&gd(s.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling.previousSibling),t.createPositionAfter(s));else if(cM(s)&&gd(s.previousSibling)&&cM(s.previousSibling.previousSibling)&&s.previousSibling.previousSibling&&gd(s.previousSibling.previousSibling.previousSibling))a=t.createRange(t.createPositionBefore(s.previousSibling.previousSibling.previousSibling),t.createPositionAfter(s));else return!1;return n.model.change(l=>{l.remove(a),n.execute("enter");let c=i.selection.anchor.parent;l.rename(c,S9),n.model.schema.removeDisallowedAttributes([c],l)}),o.scrollToTheSelection(),!0}function cM(n){return n&&n.is("$text")&&!n.data.match(/\S/)}function gd(n){return n&&n.is("element","softBreak")}var pM=class extends M{static get pluginName(){return"CodeBlockUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,i=e.ui.componentFactory,o=h_(e),r=this._getLanguageListItemDefinitions(o),s=e.commands.get("codeBlock");i.add("codeBlock",a=>{let l=xn(a,Tr),c=l.buttonView,d=t("Insert code block");return c.set({label:d,tooltip:!0,icon:ee.codeBlock,isToggleable:!0}),c.bind("isOn").to(s,"value",f=>!!f),c.on("execute",()=>{e.execute("codeBlock",{usePreviousLanguageChoice:!0}),e.editing.view.focus()}),l.on("execute",f=>{e.execute("codeBlock",{language:f.source._codeBlockLanguage,forceValue:!0}),e.editing.view.focus()}),l.class="ck-code-block-dropdown",l.bind("isEnabled").to(s),Mr(l,r,{role:"menu",ariaLabel:d}),l}),i.add("menuBar:codeBlock",a=>{let l=new Fn(a);l.buttonView.set({role:"menuitem",label:t("Code block"),icon:ee.codeBlock}),l.bind("isEnabled").to(s);let c=new oi(a);c.set({ariaLabel:t("Insert code block")});for(let d of r){let f=new Bn(a,l),p=new be(a);p.bind(...Object.keys(d.model)).to(d.model),p.set({isToggleable:!0,role:"menuitemcheckbox"}),p.delegate("execute").to(l),p.on("execute",()=>{e.execute("codeBlock",{language:d.model._codeBlockLanguage,forceValue:s.value!=d.model._codeBlockLanguage}),e.editing.view.focus()}),f.children.add(p),c.items.add(f)}return l.panelView.children.add(c),l})}_getLanguageListItemDefinitions(e){let i=this.editor.commands.get("codeBlock"),o=new ft;for(let r of e){let s={type:"button",model:new fo({_codeBlockLanguage:r.language,label:r.label,role:"menuitemradio",withText:!0})};s.model.bind("isOn").to(i,"value",a=>a===s.model._codeBlockLanguage),o.add(s)}return o}},f_=class extends M{static get requires(){return[fM,pM]}static get pluginName(){return"CodeBlock"}static get isOfficialPlugin(){return!0}};var wM=class extends ll{view;_toolbarConfig;_elementReplacer;constructor(e,t){super(e),this.view=t,this._toolbarConfig=t_(e.config.get("toolbar")),this._elementReplacer=new $h,this.listenTo(e.editing.view,"scrollToTheSelection",this._handleScrollToTheSelectionWithStickyPanel.bind(this))}get element(){return this.view.element}init(e){let t=this.editor,i=this.view,o=t.editing.view,r=i.editable,s=o.document.getRoot();r.name=s.rootName,i.render();let a=r.element;this.setEditableElement(r.name,a),i.editable.bind("isFocused").to(this.focusTracker),o.attachDomRoot(a),e&&this._elementReplacer.replace(e,this.element),this._initPlaceholder(),this._initToolbar(),i.menuBarView&&this._initMenuBar(i.menuBarView),this._initDialogPluginIntegration(),this._initContextualBalloonIntegration(),this.fire("ready")}destroy(){super.destroy();let e=this.view,t=this.editor.editing.view;this._elementReplacer.restore(),t.getDomRoot(e.editable.name)&&t.detachDomRoot(e.editable.name),e.destroy()}_initToolbar(){let e=this.view;e.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),e.stickyPanel.limiterElement=e.element,e.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",({top:t})=>t||0),e.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(e.toolbar)}_initPlaceholder(){let e=this.editor,t=e.editing.view,i=t.document.getRoot(),o=e.sourceElement,r,s=e.config.get("placeholder");s&&(r=typeof s=="string"?s:s[this.view.editable.name]),!r&&o&&o.tagName.toLowerCase()==="textarea"&&(r=o.getAttribute("placeholder")),r&&(i.placeholder=r),Ps({view:t,element:i,isDirectHost:!1,keepOnFocus:!0})}_initContextualBalloonIntegration(){if(!this.editor.plugins.has("ContextualBalloon"))return;let{stickyPanel:e}=this.view,t=this.editor.plugins.get("ContextualBalloon");t.on("getPositionOptions",o=>{let r=o.return;if(!r||!e.isSticky||!e.element)return;let s=new Ae(e.element).height,a=typeof r.target=="function"?r.target():r.target,l=typeof r.limiter=="function"?r.limiter():r.limiter;if(a&&l&&new Ae(a).height>=new Ae(l).height-s)return;let c=v({},r.viewportOffsetConfig),d=(c.top||0)+s;o.return=I(v({},r),{viewportOffsetConfig:I(v({},c),{top:d})})},{priority:"low"});let i=()=>{t.visibleView&&t.updatePosition()};this.listenTo(e,"change:isSticky",i),this.listenTo(this.editor.ui,"change:viewportOffset",i)}_handleScrollToTheSelectionWithStickyPanel(e,t,i){let o=this.view.stickyPanel;if(o.isSticky){let r=new Ae(o.element).height;t.viewportOffset.top+=r}else{let r=()=>{this.editor.editing.view.scrollToTheSelection(i)};this.listenTo(o,"change:isSticky",r),setTimeout(()=>{this.stopListening(o,"change:isSticky",r)},20)}}_initDialogPluginIntegration(){if(!this.editor.plugins.has("Dialog"))return;let e=this.view.stickyPanel,t=this.editor.plugins.get("Dialog");t.on("show",()=>{let i=t.view;i.on("moveTo",(o,r)=>{if(!e.isSticky||i.wasMoved)return;let s=new Ae(e.contentPanelElement);r[1]<s.bottom+e_.defaultOffset&&(r[1]=s.bottom+e_.defaultOffset)},{priority:"high"})},{priority:"low"})}},kM=class extends Zy{stickyPanel;toolbar;editable;constructor(e,t,i={}){super(e),this.stickyPanel=new Jy(e),this.toolbar=new Ar(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull}),i.useMenuBar&&(this.menuBarView=new dl(e)),this.editable=new cl(e,t,void 0,{label:i.label})}render(){super.render(),this.menuBarView?this.stickyPanel.content.addMany([this.menuBarView,this.toolbar]):this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}},g_=class extends sd(cm){ui;constructor(e,t={}){if(!p_(e)&&t.initialData!==void 0)throw new _("editor-create-initial-data",null);super(t),this.config.define("menuBar.isVisible",!1),this.config.get("initialData")===void 0&&this.config.set("initialData",Mpe(e)),p_(e)&&(this.sourceElement=e),this.model.document.createRoot();let i=!this.config.get("toolbar.shouldNotGroupWhenFull"),o=this.config.get("menuBar"),r=new kM(this.locale,this.editing.view,{shouldToolbarGroupWhenFull:i,useMenuBar:o.isVisible,label:this.config.get("label")});this.ui=new wM(this,r),By(this)}destroy(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),super.destroy()}static create(e,t={}){return new Promise(i=>{let o=new this(e,t);i(o.initPlugins().then(()=>o.ui.init(p_(e)?e:null)).then(()=>o.data.init(o.config.get("initialData"))).then(()=>o.fire("ready")).then(()=>o))})}};function Mpe(n){return p_(n)?qh(n):n}function p_(n){return Vi(n)}var vM=class extends te{constructor(e){super(e),this.affectsData=!1}execute(){let e=this.editor.model,t=e.document.selection,i=e.schema.getLimitElement(t);if(t.containsEntireContent(i)||!x9(e.schema,i))do if(i=i.parent,!i)return;while(!x9(e.schema,i));e.change(o=>{o.setSelection(i,"in")})}};function x9(n,e){return n.isLimit(e)&&(n.checkChild(e,"$text")||n.checkChild(e,"paragraph"))}var Dpe=kg("Ctrl+A"),yM=class extends M{static get pluginName(){return"SelectAllEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,o=e.editing.view.document;e.commands.add("selectAll",new vM(e)),this.listenTo(o,"keydown",(r,s)=>{As(s)===Dpe&&(e.execute("selectAll"),s.preventDefault())}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Select all"),keystroke:"CTRL+A"}]})}},Ppe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',_M=class extends M{static get pluginName(){return"SelectAllUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.ui.componentFactory.add("selectAll",()=>{let t=this._createButton(oe);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:selectAll",()=>this._createButton(be))}_createButton(e){let t=this.editor,i=t.locale,o=t.commands.get("selectAll"),r=new e(t.locale),s=i.t;return r.set({label:s("Select all"),icon:Ppe,keystroke:"Ctrl+A"}),r.bind("isEnabled").to(o,"isEnabled"),this.listenTo(r,"execute",()=>{t.execute("selectAll"),t.editing.view.focus()}),r}},b_=class extends M{static get requires(){return[yM,_M]}static get pluginName(){return"SelectAll"}static get isOfficialPlugin(){return!0}};var w_=class extends te{_stack=[];_createdBatches=new WeakSet;constructor(e){super(e),this.refresh(),this._isEnabledBasedOnSelection=!1,this.listenTo(e.data,"set",(t,i)=>{i[1]=v({},i[1]);let o=i[1];o.batchType||(o.batchType={isUndoable:!1})},{priority:"high"}),this.listenTo(e.data,"set",(t,i)=>{i[1].batchType.isUndoable||this.clearStack()})}refresh(){this.isEnabled=this._stack.length>0}get createdBatches(){return this._createdBatches}addBatch(e){let t=this.editor.model.document.selection,i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i}),this.refresh()}clearStack(){this._stack=[],this.refresh()}_restoreSelection(e,t,i){let o=this.editor.model,r=o.document,s=[],a=e.map(c=>c.getTransformedByOperations(i)),l=a.flat();for(let c of a){let d=c.filter(f=>f.root!=r.graveyard).filter(f=>!Npe(f,l));d.length&&(Rpe(d),s.push(d[0]))}s.length&&o.change(c=>{c.setSelection(s,{backward:t})})}_undo(e,t){let i=this.editor.model,o=i.document;this._createdBatches.add(t);let r=e.operations.slice().filter(s=>s.isDocumentOperation);r.reverse();for(let s of r){let a=s.baseVersion+1,l=Array.from(o.history.getOperations(a)),d=q8([s.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA;for(let f of d){let p=f.affectedSelectable;p&&!i.canEditAt(p)&&(f=new Jt(f.baseVersion)),t.addOperation(f),i.applyOperation(f),o.history.setOperationAsUndone(s,f)}}}};function Rpe(n){n.sort((e,t)=>e.start.isBefore(t.start)?-1:1);for(let e=1;e<n.length;e++){let i=n[e-1].getJoined(n[e],!0);i&&(e--,n.splice(e,2,i))}}function Npe(n,e){return e.some(t=>t!==n&&t.containsRange(n,!0))}var CM=class extends w_{execute(e=null){let t=e?this._stack.findIndex(r=>r.batch==e):this._stack.length-1,i=this._stack.splice(t,1)[0],o=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(o,()=>{this._undo(i.batch,o);let r=this.editor.model.document.history.getOperations(i.batch.baseVersion);this._restoreSelection(i.selection.ranges,i.selection.isBackward,r)}),this.fire("revert",i.batch,o),this.refresh()}},EM=class extends w_{execute(){let e=this._stack.pop(),t=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(t,()=>{let o=e.batch.operations[e.batch.operations.length-1].baseVersion+1,r=this.editor.model.document.history.getOperations(o);this._restoreSelection(e.selection.ranges,e.selection.isBackward,r),this._undo(e.batch,t)}),this.refresh()}},SM=class extends M{_undoCommand;_redoCommand;_batchRegistry=new WeakSet;static get pluginName(){return"UndoEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t;this._undoCommand=new CM(e),this._redoCommand=new EM(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(i,o)=>{let r=o[0];if(!r.isDocumentOperation)return;let s=r.batch,a=this._redoCommand.createdBatches.has(s),l=this._undoCommand.createdBatches.has(s);this._batchRegistry.has(s)||(this._batchRegistry.add(s),s.isUndoable&&(a?this._undoCommand.addBatch(s):l||(this._undoCommand.addBatch(s),this._redoCommand.clearStack())))},{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(i,o,r)=>{this._redoCommand.addBatch(r)}),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Undo"),keystroke:"CTRL+Z"},{label:t("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}},xM=class extends M{static get pluginName(){return"UndoUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale,i=e.t,o=t.uiLanguageDirection=="ltr"?ee.undo:ee.redo,r=t.uiLanguageDirection=="ltr"?ee.redo:ee.undo;this._addButtonsToFactory("undo",i("Undo"),"CTRL+Z",o),this._addButtonsToFactory("redo",i("Redo"),"CTRL+Y",r)}_addButtonsToFactory(e,t,i,o){let r=this.editor;r.ui.componentFactory.add(e,()=>{let s=this._createButton(oe,e,t,i,o);return s.set({tooltip:!0}),s}),r.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(be,e,t,i,o))}_createButton(e,t,i,o,r){let s=this.editor,a=s.locale,l=s.commands.get(t),c=new e(a);return c.set({label:i,icon:r,keystroke:o}),c.bind("isEnabled").to(l,"isEnabled"),this.listenTo(c,"execute",()=>{s.execute(t),s.editing.view.focus()}),c}},Fs=class extends M{static get requires(){return[SM,xM]}static get pluginName(){return"Undo"}static get isOfficialPlugin(){return!0}};var k_=class extends M{static get requires(){return[Ky,pd,jo,b_,Am,tb,Fs]}static get pluginName(){return"Essentials"}static get isOfficialPlugin(){return!0}};var AM=class extends te{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}refresh(){let e=this.editor.model,t=e.document,i=lt(t.selection.getSelectedBlocks());this.value=!!i&&i.is("element","paragraph"),this.isEnabled=!!i&&T9(i,e.schema)}execute(e={}){let t=this.editor.model,i=t.document,o=e.selection||i.selection;t.canEditAt(o)&&t.change(r=>{let s=o.getSelectedBlocks();for(let a of s)!a.is("element","paragraph")&&T9(a,t.schema)&&r.rename(a,"paragraph")})}};function T9(n,e){return e.checkChild(n.parent,"paragraph")&&!e.isObject(n)}var TM=class extends te{constructor(e){super(e),this._isEnabledBasedOnSelection=!1}execute(e){let t=this.editor.model,i=e.attributes,o=e.position;t.canEditAt(o)&&t.change(r=>{if(o=this._findPositionToInsertParagraph(o,r),!o)return;let s=r.createElement("paragraph");i&&t.schema.setAllowedAttributes(s,i,r),t.insertContent(s,o),r.setSelection(s,"in")})}_findPositionToInsertParagraph(e,t){let i=this.editor.model;if(i.schema.checkChild(e,"paragraph"))return e;let o=i.schema.findAllowedParent(e,"paragraph");if(!o)return null;let r=e.parent,s=i.schema.checkChild(r,"$text");return r.isEmpty||s&&e.isAtEnd?i.createPositionAfter(r):!r.isEmpty&&s&&e.isAtStart?i.createPositionBefore(r):t.split(e,o).position}},Im=class n extends M{static get pluginName(){return"Paragraph"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.model;e.commands.add("paragraph",new AM(e)),e.commands.add("insertParagraph",new TM(e)),t.schema.register("paragraph",{inheritAllFrom:"$block"}),e.conversion.elementToElement({model:"paragraph",view:"p"}),e.conversion.for("upcast").elementToElement({model:(i,{writer:o})=>!n.paragraphLikeElements.has(i.name)||i.isEmpty?null:o.createElement("paragraph"),view:/.+/,converterPriority:"low"})}static paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"])};var IM=class extends te{modelElements;constructor(e,t){super(e),this.modelElements=t}refresh(){let e=lt(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name,this.isEnabled=!!e&&this.modelElements.some(t=>I9(e,t,this.editor.model.schema))}execute(e){let t=this.editor.model,i=t.document,o=e.value;t.change(r=>{let s=Array.from(i.selection.getSelectedBlocks()).filter(a=>I9(a,o,t.schema));for(let a of s)a.is("element",o)||r.rename(a,o)})}};function I9(n,e,t){return t.checkChild(n.parent,e)&&!t.isObject(n)}var M9="paragraph",MM=class extends M{static get pluginName(){return"HeadingEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph",class:"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1",class:"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2",class:"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3",class:"ck-heading_heading3"}]})}static get requires(){return[Im]}init(){let e=this.editor,t=e.config.get("heading.options"),i=[];for(let o of t)o.model!=="paragraph"&&(e.model.schema.register(o.model,{inheritAllFrom:"$block"}),e.conversion.elementToElement(o),i.push(o.model));this._addDefaultH1Conversion(e),e.commands.add("heading",new IM(e,i))}afterInit(){let e=this.editor,t=e.commands.get("enter"),i=e.config.get("heading.options");t&&this.listenTo(t,"afterExecute",(o,r)=>{let s=e.model.document.selection.getFirstPosition().parent;i.some(l=>s.is("element",l.model))&&!s.is("element",M9)&&s.childCount===0&&r.writer.rename(s,M9)})}_addDefaultH1Conversion(e){e.conversion.for("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:_n.low+1})}};function Hpe(n){let e=n.t,t={Paragraph:e("Paragraph"),"Heading 1":e("Heading 1"),"Heading 2":e("Heading 2"),"Heading 3":e("Heading 3"),"Heading 4":e("Heading 4"),"Heading 5":e("Heading 5"),"Heading 6":e("Heading 6")};return n.config.get("heading.options").map(i=>{let o=t[i.title];return o&&o!=i.title&&(i.title=o),i})}var DM=class extends M{static get pluginName(){return"HeadingUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.t,i=Hpe(e),o=t("Choose heading"),r=t("Heading");e.ui.componentFactory.add("heading",s=>{let a={},l=new ft,c=e.commands.get("heading"),d=e.commands.get("paragraph"),f=[c];for(let g of i){let w={type:"button",model:new fo({label:g.title,class:g.class,role:"menuitemradio",withText:!0})};g.model==="paragraph"?(w.model.bind("isOn").to(d,"value"),w.model.set("commandName","paragraph"),f.push(d)):(w.model.bind("isOn").to(c,"value",k=>k===g.model),w.model.set({commandName:"heading",commandValue:g.model})),l.add(w),a[g.model]=g.title}let p=xn(s);return Mr(p,l,{ariaLabel:r,role:"menu"}),p.buttonView.set({ariaLabel:r,ariaLabelledBy:void 0,isOn:!1,withText:!0,tooltip:r}),p.extendTemplate({attributes:{class:["ck-heading-dropdown"]}}),p.bind("isEnabled").toMany(f,"isEnabled",(...g)=>g.some(w=>w)),p.buttonView.bind("label").to(c,"value",d,"value",(g,w)=>{let k=w?"paragraph":g;return typeof k=="boolean"||!a[k]?o:a[k]}),p.buttonView.bind("ariaLabel").to(c,"value",d,"value",(g,w)=>{let k=w?"paragraph":g;return typeof k=="boolean"||!a[k]?r:`${a[k]}, ${r}`}),this.listenTo(p,"execute",g=>{let{commandName:w,commandValue:k}=g.source;e.execute(w,k?{value:k}:void 0),e.editing.view.focus()}),p}),e.ui.componentFactory.add("menuBar:heading",s=>{let a=new Fn(s),l=e.commands.get("heading"),c=e.commands.get("paragraph"),d=[l],f=new oi(s);a.set({class:"ck-heading-dropdown"}),f.set({ariaLabel:t("Heading"),role:"menu"}),a.buttonView.set({label:t("Heading")}),a.panelView.children.add(f);for(let p of i){let g=new Bn(s,a),w=new be(s);g.children.add(w),f.items.add(g),w.set({isToggleable:!0,label:p.title,role:"menuitemradio",class:p.class}),w.delegate("execute").to(a),w.on("execute",()=>{let k=p.model==="paragraph"?"paragraph":"heading";e.execute(k,{value:p.model}),e.editing.view.focus()}),p.model==="paragraph"?(w.bind("isOn").to(c,"value"),d.push(c)):w.bind("isOn").to(l,"value",k=>k===p.model)}return a.bind("isEnabled").toMany(d,"isEnabled",(...p)=>p.some(g=>g)),a})}},v_=class extends M{static get requires(){return[MM,DM]}static get pluginName(){return"Heading"}static get isOfficialPlugin(){return!0}};var PM=class extends te{refresh(){let e=this.editor.model,t=e.document;this.value=t.selection.getAttribute("highlight"),this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight")}execute(e={}){let t=this.editor.model,o=t.document.selection,r=e.value;t.change(s=>{if(o.isCollapsed){let a=o.getFirstPosition();if(o.hasAttribute("highlight")){let l=p=>p.item.hasAttribute("highlight")&&p.item.getAttribute("highlight")===this.value,c=a.getLastMatchingPosition(l,{direction:"backward"}),d=a.getLastMatchingPosition(l),f=s.createRange(c,d);!r||this.value===r?(a.isEqual(d)||s.removeAttribute("highlight",f),s.removeSelectionAttribute("highlight")):(a.isEqual(d)||s.setAttribute("highlight",r,f),s.setSelectionAttribute("highlight",r))}else r&&s.setSelectionAttribute("highlight",r)}else{let a=t.schema.getValidRanges(o.getRanges(),"highlight");for(let l of a)r?s.setAttribute("highlight",r,l):s.removeAttribute("highlight",l)}})}},RM=class extends M{static get pluginName(){return"HighlightEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("highlight",{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]})}init(){let e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});let t=e.config.get("highlight.options");e.conversion.attributeToElement(Upe(t)),e.commands.add("highlight",new PM(e))}};function Upe(n){let e={model:{key:"highlight",values:[]},view:{}};for(let t of n)e.model.values.push(t.model),e.view[t.model]={name:"mark",classes:t.class};return e}var jpe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59 3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="m2.556 16.727.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415 1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',$pe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268 2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="m4.5 18.088-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5 9.59 17h9.406v1.5H8.245z"/></svg>',NM=class extends M{get localizedOptionTitles(){let e=this.editor.t;return{"Yellow marker":e("Yellow marker"),"Green marker":e("Green marker"),"Pink marker":e("Pink marker"),"Blue marker":e("Blue marker"),"Red pen":e("Red pen"),"Green pen":e("Green pen")}}static get pluginName(){return"HighlightUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.config.get("highlight.options");for(let t of e)this._addHighlighterButton(t);this._addRemoveHighlightButton(),this._addDropdown(e),this._addMenuBarButton(e)}_addRemoveHighlightButton(){let e=this.editor.t,t=this.editor.commands.get("highlight");this._addButton("removeHighlight",e("Remove highlight"),ee.eraser,null,i=>{i.bind("isEnabled").to(t,"isEnabled")})}_addHighlighterButton(e){let t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,y_(e.type),e.model,i);function i(o){o.bind("isEnabled").to(t,"isEnabled"),o.bind("isOn").to(t,"value",r=>r===e.model),o.iconView.fillColor=e.color,o.isToggleable=!0}}_addButton(e,t,i,o,r){let s=this.editor;s.ui.componentFactory.add(e,a=>{let l=new oe(a),c=this.localizedOptionTitles[t]?this.localizedOptionTitles[t]:t;return l.set({label:c,icon:i,tooltip:!0}),l.on("execute",()=>{s.execute("highlight",{value:o}),s.editing.view.focus()}),r(l),l})}_addDropdown(e){let t=this.editor,i=t.t,o=t.ui.componentFactory,r=e[0],s=e.reduce((a,l)=>(a[l.model]=l,a),{});o.add("highlight",a=>{let l=t.commands.get("highlight"),c=xn(a,Tr),d=c.buttonView;d.set({label:i("Highlight"),tooltip:!0,lastExecuted:r.model,commandValue:r.model,isToggleable:!0}),d.bind("icon").to(l,"value",g=>y_(p(g,"type"))),d.bind("color").to(l,"value",g=>p(g,"color")),d.bind("commandValue").to(l,"value",g=>p(g,"model")),d.bind("isOn").to(l,"value",g=>!!g),d.delegate("execute").to(c);let f=()=>{let g=e.map(w=>{let k=o.create("highlight:"+w.model);return this.listenTo(k,"execute",()=>{c.buttonView.set({lastExecuted:w.model})}),k});return g.push(new gm),g.push(o.create("removeHighlight")),g};c.bind("isEnabled").to(l,"isEnabled"),km(c,f,{enableActiveItemFocusOnDropdownOpen:!0,ariaLabel:i("Text highlight toolbar")}),Wpe(c),d.on("execute",()=>{t.execute("highlight",{value:d.commandValue})}),this.listenTo(c,"execute",()=>{t.editing.view.focus()});function p(g,w){let k=!g||g===d.lastExecuted?d.lastExecuted:g;return s[k][w]}return c})}_addMenuBarButton(e){let t=this.editor,i=t.t,o=t.commands.get("highlight");t.ui.componentFactory.add("menuBar:highlight",r=>{let s=new Fn(r);s.buttonView.set({label:i("Highlight"),icon:y_("marker")}),s.bind("isEnabled").to(o),s.buttonView.iconView.fillColor="transparent";let a=new oi(r);for(let d of e){let f=new Bn(r,s),p=new be(r);p.set({label:d.title,icon:y_(d.type),role:"menuitemradio",isToggleable:!0}),p.iconView.fillColor=d.color,p.delegate("execute").to(s),p.bind("isOn").to(o,"value",g=>g===d.model),p.on("execute",()=>{t.execute("highlight",{value:d.model}),t.editing.view.focus()}),f.children.add(p),a.items.add(f)}a.items.add(new sl(r));let l=new Bn(r,s),c=new be(r);return c.set({label:i("Remove highlight"),icon:ee.eraser}),c.delegate("execute").to(s),c.on("execute",()=>{t.execute("highlight",{value:null}),t.editing.view.focus()}),l.children.add(c),a.items.add(l),s.panelView.children.add(a),s})}};function Wpe(n){n.buttonView.actionView.iconView.bind("fillColor").to(n.buttonView,"color")}function y_(n){return n==="marker"?jpe:$pe}var __=class extends M{static get requires(){return[RM,NM]}static get pluginName(){return"Highlight"}static get isOfficialPlugin(){return!0}};var LM=class extends te{refresh(){let e=this.editor.model,t=e.schema,i=e.document.selection,o=D9(i);this.isEnabled=qpe(i,t,e),this.value=o?o.getAttribute("value")||"":null}execute(e){let t=this.editor.model,i=t.document.selection;t.change(o=>{let r;this.value!==null?r=D9(i):(r=o.createElement("rawHtml"),t.insertObject(r,null,null,{setSelection:"on"})),o.setAttribute("value",e,r)})}};function qpe(n,e,t){let i=Gpe(n,t);return e.checkChild(i,"rawHtml")}function Gpe(n,e){let i=md(n,e).start.parent;return i.isEmpty&&!i.is("rootElement")?i.parent:i}function D9(n){let e=n.getSelectedElement();return e&&e.is("element","rawHtml")?e:null}var FM=class extends M{_widgetButtonViewReferences=new Set;static get pluginName(){return"HtmlEmbedEditing"}static get isOfficialPlugin(){return!0}constructor(e){super(e),e.config.define("htmlEmbed",{showPreviews:!1,sanitizeHtml:t=>(Ve("html-embed-provide-sanitize-function"),{html:t,hasChanged:!1})})}init(){let e=this.editor;e.model.schema.register("rawHtml",{inheritAllFrom:"$blockObject",allowAttributes:["value"]}),e.commands.add("htmlEmbed",new LM(e)),this._setupConversion()}_setupConversion(){let e=this.editor,t=e.t,i=e.editing.view,o=this._widgetButtonViewReferences,r=e.config.get("htmlEmbed");this.editor.editing.view.on("render",()=>{for(let d of o){if(d.element&&d.element.isConnected)return;d.destroy(),o.delete(d)}},{priority:"lowest"}),e.data.registerRawContentMatcher({name:"div",classes:"raw-html-embed"}),e.conversion.for("upcast").elementToElement({view:{name:"div",classes:"raw-html-embed"},model:(d,{writer:f})=>f.createElement("rawHtml",{value:d.getCustomProperty("$rawContent")})}),e.conversion.for("dataDowncast").elementToElement({model:"rawHtml",view:(d,{writer:f})=>f.createRawElement("div",{class:"raw-html-embed"},function(p){p.innerHTML=d.getAttribute("value")||""})}),e.conversion.for("editingDowncast").elementToStructure({model:{name:"rawHtml",attributes:["value"]},view:(d,{writer:f})=>{let p,g,w,k=f.createRawElement("div",{class:"raw-html-embed__content-wrapper"},function(T){p=T,s({editor:e,domElement:T,state:g,props:w}),p.addEventListener("mousedown",()=>{if(g.isEditable){let V=e.model;V.document.selection.getSelectedElement()!==d&&V.change(de=>de.setSelection(d,"on"))}},!0)}),C={makeEditable(){g=Object.assign({},g,{isEditable:!0}),s({domElement:p,editor:e,state:g,props:w}),i.change(T=>{T.setAttribute("data-cke-ignore-events","true",k)}),p.querySelector("textarea").focus()},save(T){T!==g.getRawHtmlValue()?(e.execute("htmlEmbed",T),e.editing.view.focus()):this.cancel()},cancel(){g=Object.assign({},g,{isEditable:!1}),s({domElement:p,editor:e,state:g,props:w}),e.editing.view.focus(),i.change(T=>{T.removeAttribute("data-cke-ignore-events",k)})}};g={showPreviews:r.showPreviews,isEditable:!1,getRawHtmlValue:()=>d.getAttribute("value")||""},w={sanitizeHtml:r.sanitizeHtml,textareaPlaceholder:t("Paste raw HTML here..."),onEditClick(){C.makeEditable()},onSaveClick(T){C.save(T)},onCancelClick(){C.cancel()}};let S=f.createContainerElement("div",{class:"raw-html-embed","data-html-embed-label":t("HTML snippet"),dir:e.locale.uiLanguageDirection},k);return f.setCustomProperty("rawHtmlApi",C,S),f.setCustomProperty("rawHtml",!0,S),$o(S,f,{label:t("HTML snippet"),hasSelectionHandle:!0})}});function s({editor:d,domElement:f,state:p,props:g}){f.textContent="";let w=f.ownerDocument,k;if(p.isEditable){let S={isDisabled:!1,placeholder:g.textareaPlaceholder};k=l({domDocument:w,state:p,props:S}),f.append(k)}else if(p.showPreviews){let S={sanitizeHtml:g.sanitizeHtml};f.append(c({domDocument:w,state:p,props:S,editor:d}))}else{let S={isDisabled:!0,placeholder:g.textareaPlaceholder};f.append(l({domDocument:w,state:p,props:S}))}let C={onEditClick:g.onEditClick,onSaveClick:()=>{g.onSaveClick(k.value)},onCancelClick:g.onCancelClick};f.prepend(a({editor:d,domDocument:w,state:p,props:C}))}function a({editor:d,domDocument:f,state:p,props:g}){let w=Dt(f,"div",{class:"raw-html-embed__buttons-wrapper"});if(p.isEditable){let k=OM(d,"save",g.onSaveClick),C=OM(d,"cancel",g.onCancelClick);w.append(k.element,C.element),o.add(k).add(C)}else{let k=OM(d,"edit",g.onEditClick);w.append(k.element),o.add(k)}return w}function l({domDocument:d,state:f,props:p}){let g=Dt(d,"textarea",{placeholder:p.placeholder,class:"ck ck-reset ck-input ck-input-text raw-html-embed__source"});return g.disabled=p.isDisabled,g.value=f.getRawHtmlValue(),g}function c({editor:d,domDocument:f,state:p,props:g}){let w=g.sanitizeHtml(p.getRawHtmlValue()),k=p.getRawHtmlValue().length>0?t("No preview available"):t("Empty snippet content"),C=Dt(f,"div",{class:"ck ck-reset_all raw-html-embed__preview-placeholder"},k),S=Dt(f,"div",{class:"raw-html-embed__preview-content",dir:d.locale.contentLanguageDirection}),V=f.createRange().createContextualFragment(w.html);return S.appendChild(V),Dt(f,"div",{class:"raw-html-embed__preview"},[C,S])}}};function OM(n,e,t){let{t:i}=n.locale,o=new oe(n.locale),r=n.commands.get("htmlEmbed");return o.set({class:`raw-html-embed__${e}-button`,icon:ee.pencil,tooltip:!0,tooltipPosition:n.locale.uiLanguageDirection==="rtl"?"e":"w"}),o.render(),e==="edit"?(o.set({icon:ee.pencil,label:i("Edit source")}),o.bind("isEnabled").to(r)):e==="save"?(o.set({icon:ee.check,label:i("Save changes")}),o.bind("isEnabled").to(r)):o.set({icon:ee.cancel,label:i("Cancel")}),o.on("execute",t),o}var VM=class extends M{static get pluginName(){return"HtmlEmbedUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,i=e.locale.t;e.ui.componentFactory.add("htmlEmbed",()=>{let o=this._createButton(oe);return o.set({tooltip:!0,label:i("Insert HTML")}),o}),e.ui.componentFactory.add("menuBar:htmlEmbed",()=>{let o=this._createButton(be);return o.set({label:i("HTML snippet")}),o})}_createButton(e){let t=this.editor,i=t.commands.get("htmlEmbed"),o=new e(t.locale);return o.set({icon:ee.html}),o.bind("isEnabled").to(i,"isEnabled"),this.listenTo(o,"execute",()=>{t.execute("htmlEmbed"),t.editing.view.focus(),t.editing.view.document.selection.getSelectedElement().getCustomProperty("rawHtmlApi").makeEditable()}),o}},C_=class extends M{static get requires(){return[FM,VM,Ei]}static get pluginName(){return"HtmlEmbed"}static get isOfficialPlugin(){return!0}};function bd(n,e,t,i){e&&Kpe(n,e,i),t&&Dr(n,t,i)}function Dr(n,e,t){if(e.attributes)for(let[i,o]of Object.entries(e.attributes))n.setAttribute(i,o,t);e.styles&&n.setStyle(e.styles,t),e.classes&&n.addClass(e.classes,t)}function Kpe(n,e,t){if(e.attributes)for(let[i]of Object.entries(e.attributes))n.removeAttribute(i,t);if(e.styles)for(let i of Object.keys(e.styles))n.removeStyle(i,t);e.classes&&n.removeClass(e.classes,t)}function Qpe(n,e){let t=Nn(n),i="attributes";for(i in e)i=="classes"?t[i]=Array.from(new Set([...n[i]||[],...e[i]])):t[i]=v(v({},n[i]),e[i]);return t}function Mm(n,e,t,i,o){let r=e.getAttribute(t),s={};for(let a of["attributes","styles","classes"]){if(a!=i){r&&r[a]&&(s[a]=r[a]);continue}if(i=="classes"){let c=new Set(r&&r.classes||[]);o(c),c.size&&(s[a]=Array.from(c));continue}let l=new Map(Object.entries(r&&r[a]||{}));o(l),l.size&&(s[a]=Object.fromEntries(l))}Object.keys(s).length?e.is("documentSelection")?n.setSelectionAttribute(t,s):n.setAttribute(t,s,e):r&&(e.is("documentSelection")?n.removeSelectionAttribute(t):n.removeAttribute(t,e))}function Ype(n){return ST(n).replace(/ /g,"")}function go(n){return`html${Ype(n)}Attributes`}function ZM({model:n}){return(e,t)=>t.writer.createElement(n,{htmlContent:e.getCustomProperty("$rawContent")})}function Zpe(n,{view:e,isInline:t}){let i=n.t;return(o,{writer:r})=>{let s=i("HTML object"),a=x_(e,o,r),l=o.getAttribute(go(e));r.addClass("html-object-embed__content",a),l&&Dr(r,l,a);let c=r.createContainerElement(t?"span":"div",{class:"html-object-embed","data-html-object-embed-label":s},a);return $o(c,r,{label:s})}}function x_(n,e,t){return t.createRawElement(n,null,(i,o)=>{o.setContentOf(i,e.getAttribute("htmlContent"))})}function Jpe({view:n,model:e,allowEmpty:t},i){return r=>{r.on(`element:${n}`,(s,a,l)=>{let c=i.processViewAttributes(a.viewItem,l);if(!(!c&&!l.consumable.test(a.viewItem,{name:!0}))){if(c=c||{},l.consumable.consume(a.viewItem,{name:!0}),a.modelRange||(a=Object.assign(a,l.convertChildren(a.viewItem,a.modelCursor))),t&&a.modelRange.isCollapsed&&Object.keys(c).length){let d=l.writer.createElement("htmlEmptyElement");if(!l.safeInsert(d,a.modelCursor))return;let f=l.getSplitParts(d);a.modelRange=l.writer.createRange(a.modelRange.start,l.writer.createPositionAfter(f[f.length-1])),l.updateConversionResult(d,a),o(d,c,l);return}for(let d of a.modelRange.getItems())o(d,c,l)}},{priority:"low"})};function o(r,s,a){if(a.schema.checkAttribute(r,e)){let l=r.getAttribute(e),c=Qpe(s,l||{});a.writer.setAttribute(e,c,r)}}}function P9({model:n,view:e},t){return(i,{writer:o,consumable:r})=>{if(!i.hasAttribute(n))return null;let s=o.createContainerElement(e),a=i.getAttribute(n);return r.consume(i,`attribute:${n}`),Dr(o,a,s),s.getFillerOffset=()=>null,t?$o(s,o):s}}function Xpe({priority:n,view:e}){return(t,i)=>{if(!t)return;let{writer:o}=i,r=o.createAttributeElement(e,null,{priority:n});return Dr(o,t,r),r}}function sb({view:n},e){return t=>{t.on(`element:${n}`,(i,o,r)=>{if(!o.modelRange||o.modelRange.isCollapsed)return;let s=e.processViewAttributes(o.viewItem,r);s&&r.writer.setAttribute(go(o.viewItem.name),s,o.modelRange)},{priority:"low"})}}function ab({view:n,model:e}){return t=>{t.on(`attribute:${go(n)}:${e}`,(i,o,r)=>{if(!r.consumable.consume(o.item,i.name))return;let{attributeOldValue:s,attributeNewValue:a}=o,l=r.writer,c=r.mapper.toViewElement(o.item);bd(l,s,a,c)})}}var R9={block:[{model:"codeBlock",view:"pre"},{model:"paragraph",view:"p"},{model:"blockQuote",view:"blockquote"},{model:"listItem",view:"li"},{model:"pageBreak",view:"div"},{model:"rawHtml",view:"div"},{model:"table",view:"table"},{model:"tableRow",view:"tr"},{model:"tableCell",view:"td"},{model:"tableCell",view:"th"},{model:"tableColumnGroup",view:"colgroup"},{model:"tableColumn",view:"col"},{model:"caption",view:"caption"},{model:"caption",view:"figcaption"},{model:"imageBlock",view:"img"},{model:"imageInline",view:"img"},{model:"htmlP",view:"p",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlBlockquote",view:"blockquote",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlTable",view:"table",modelSchema:{allowWhere:"$block",isBlock:!0}},{model:"htmlTbody",view:"tbody",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlThead",view:"thead",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlTfoot",view:"tfoot",modelSchema:{allowIn:"htmlTable",isBlock:!1}},{model:"htmlCaption",view:"caption",modelSchema:{allowIn:"htmlTable",allowChildren:"$text",isBlock:!1}},{model:"htmlColgroup",view:"colgroup",modelSchema:{allowIn:"htmlTable",allowChildren:"col",isBlock:!1}},{model:"htmlCol",view:"col",modelSchema:{allowIn:"htmlColgroup",isBlock:!1}},{model:"htmlTr",view:"tr",modelSchema:{allowIn:["htmlTable","htmlThead","htmlTbody"],isLimit:!0}},{model:"htmlTd",view:"td",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlTh",view:"th",modelSchema:{allowIn:"htmlTr",allowContentOf:"$container",isLimit:!0,isBlock:!1}},{model:"htmlFigure",view:"figure",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFigcaption",view:"figcaption",modelSchema:{allowIn:"htmlFigure",allowChildren:"$text",isBlock:!1}},{model:"htmlAddress",view:"address",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlAside",view:"aside",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlMain",view:"main",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDetails",view:"details",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSummary",view:"summary",modelSchema:{allowChildren:["htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6","$text"],allowIn:"htmlDetails",isBlock:!1}},{model:"htmlDiv",view:"div",paragraphLikeModel:"htmlDivParagraph",modelSchema:{inheritAllFrom:"$container"}},{model:"htmlFieldset",view:"fieldset",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlLegend",view:"legend",modelSchema:{allowIn:"htmlFieldset",allowChildren:"$text"}},{model:"htmlHeader",view:"header",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlFooter",view:"footer",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlForm",view:"form",modelSchema:{inheritAllFrom:"$container",isBlock:!0}},{model:"htmlHgroup",view:"hgroup",modelSchema:{allowIn:["$root","$container"],allowChildren:["paragraph","htmlP","htmlH1","htmlH2","htmlH3","htmlH4","htmlH5","htmlH6"],isBlock:!1}},{model:"htmlH1",view:"h1",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH2",view:"h2",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH3",view:"h3",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH4",view:"h4",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH5",view:"h5",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlH6",view:"h6",modelSchema:{inheritAllFrom:"$block"}},{model:"$htmlList",modelSchema:{allowWhere:"$container",allowChildren:["$htmlList","htmlLi"],isBlock:!1}},{model:"htmlDir",view:"dir",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlMenu",view:"menu",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlUl",view:"ul",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlOl",view:"ol",modelSchema:{inheritAllFrom:"$htmlList"}},{model:"htmlLi",view:"li",modelSchema:{allowIn:"$htmlList",allowChildren:"$text",isBlock:!1}},{model:"htmlPre",view:"pre",modelSchema:{inheritAllFrom:"$block"}},{model:"htmlArticle",view:"article",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlSection",view:"section",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlNav",view:"nav",modelSchema:{inheritAllFrom:"$container",isBlock:!1}},{model:"htmlDivDl",view:"div",modelSchema:{allowChildren:["htmlDt","htmlDd"],allowIn:"htmlDl"}},{model:"htmlDl",view:"dl",modelSchema:{allowWhere:"$container",allowChildren:["htmlDt","htmlDd","htmlDivDl"],isBlock:!1}},{model:"htmlDt",view:"dt",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlDd",view:"dd",modelSchema:{allowChildren:"$block",isBlock:!1}},{model:"htmlCenter",view:"center",modelSchema:{inheritAllFrom:"$container",isBlock:!1}}],inline:[{model:"htmlLiAttributes",view:"li",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlOlAttributes",view:"ol",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlUlAttributes",view:"ul",appliesToBlock:!0,coupledAttribute:"listItemId"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"table"},{model:"htmlTheadAttributes",view:"thead",appliesToBlock:"table"},{model:"htmlTbodyAttributes",view:"tbody",appliesToBlock:"table"},{model:"htmlFigureAttributes",view:"figure",appliesToBlock:"imageBlock"},{model:"htmlAcronym",view:"acronym",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTt",view:"tt",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlFont",view:"font",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlTime",view:"time",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlVar",view:"var",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBig",view:"big",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSmall",view:"small",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSamp",view:"samp",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlQ",view:"q",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlOutput",view:"output",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlKbd",view:"kbd",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdi",view:"bdi",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlBdo",view:"bdo",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlAbbr",view:"abbr",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlA",view:"a",priority:5,coupledAttribute:"linkHref"},{model:"htmlStrong",view:"strong",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlB",view:"b",coupledAttribute:"bold",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlI",view:"i",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlEm",view:"em",coupledAttribute:"italic",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlS",view:"s",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDel",view:"del",coupledAttribute:"strikethrough",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlIns",view:"ins",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlU",view:"u",coupledAttribute:"underline",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSub",view:"sub",coupledAttribute:"subscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSup",view:"sup",coupledAttribute:"superscript",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCode",view:"code",coupledAttribute:"code",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlMark",view:"mark",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlSpan",view:"span",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlCite",view:"cite",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlLabel",view:"label",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlDfn",view:"dfn",attributeProperties:{copyOnEnter:!0,isFormatting:!0}},{model:"htmlObject",view:"object",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlIframe",view:"iframe",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlInput",view:"input",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlButton",view:"button",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlTextarea",view:"textarea",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlSelect",view:"select",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlVideo",view:"video",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlEmbed",view:"embed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlOembed",view:"oembed",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlAudio",view:"audio",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlImg",view:"img",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlCanvas",view:"canvas",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlMeter",view:"meter",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlProgress",view:"progress",isObject:!0,modelSchema:{inheritAllFrom:"$inlineObject"}},{model:"htmlScript",view:"script",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlStyle",view:"style",modelSchema:{allowWhere:["$text","$block"],isInline:!0}},{model:"htmlCustomElement",view:"$customElement",modelSchema:{allowWhere:["$text","$block"],allowAttributesOf:"$inlineObject",isInline:!0}}]},ml=class extends M{_definitions=[];static get pluginName(){return"DataSchema"}static get isOfficialPlugin(){return!0}init(){for(let e of R9.block)this.registerBlockElement(e);for(let e of R9.inline)this.registerInlineElement(e)}registerBlockElement(e){this._definitions.push(I(v({},e),{isBlock:!0}))}registerInlineElement(e){this._definitions.push(I(v({},e),{isInline:!0}))}extendBlockElement(e){this._extendDefinition(I(v({},e),{isBlock:!0}))}extendInlineElement(e){this._extendDefinition(I(v({},e),{isInline:!0}))}getDefinitionsForView(e,t=!1){let i=new Set;for(let o of this._getMatchingViewDefinitions(e)){if(t)for(let r of this._getReferences(o.model))i.add(r);i.add(o)}return i}getDefinitionsForModel(e){return this._definitions.filter(t=>t.model==e)}_getMatchingViewDefinitions(e){return this._definitions.filter(t=>t.view&&ege(e,t.view))}*_getReferences(e){let t=["inheritAllFrom","inheritTypesFrom","allowWhere","allowContentOf","allowAttributesOf"],i=this._definitions.filter(o=>o.model==e);for(let{modelSchema:o}of i)if(o)for(let r of t)for(let s of $e(o[r]||[])){let a=this._definitions.filter(l=>l.model==s);for(let l of a)s!==e&&(yield*it(this._getReferences(l.model)),yield l)}}_extendDefinition(e){let t=Array.from(this._definitions.entries()).filter(([,i])=>i.model==e.model);if(t.length==0){this._definitions.push(e);return}for(let[i,o]of t)this._definitions[i]=yT({},o,e,(r,s)=>Array.isArray(r)?r.concat(s):void 0)}};function ege(n,e){return typeof n=="string"?n===e:n instanceof RegExp?n.test(e):!1}var Vt=class extends M{_dataSchema;_allowedAttributes;_disallowedAttributes;_allowedElements;_disallowedElements;_dataInitialized;_coupledAttributes;constructor(e){super(e),this._dataSchema=e.plugins.get("DataSchema"),this._allowedAttributes=new Ci,this._disallowedAttributes=new Ci,this._allowedElements=new Set,this._disallowedElements=new Set,this._dataInitialized=!1,this._coupledAttributes=null,this._registerElementsAfterInit(),this._registerElementHandlers(),this._registerCoupledAttributesPostFixer(),this._registerAssociatedHtmlAttributesPostFixer()}static get pluginName(){return"DataFilter"}static get isOfficialPlugin(){return!0}static get requires(){return[ml,Ei]}loadAllowedConfig(e){for(let t of e){let i=t.name||/[\s\S]+/,o=O9(t);this.allowElement(i),o.forEach(r=>this.allowAttributes(r))}}loadDisallowedConfig(e){for(let t of e){let i=t.name||/[\s\S]+/,o=O9(t);o.length==0?this.disallowElement(i):o.forEach(r=>this.disallowAttributes(r))}}loadAllowedEmptyElementsConfig(e){for(let t of e)this.allowEmptyElement(t)}allowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))this._addAllowedElement(t),this._coupledAttributes=null}disallowElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!1))this._disallowedElements.add(t.view)}allowEmptyElement(e){for(let t of this._dataSchema.getDefinitionsForView(e,!0))t.isInline&&this._dataSchema.extendInlineElement(I(v({},t),{allowEmpty:!0}))}allowAttributes(e){this._allowedAttributes.add(e)}disallowAttributes(e){this._disallowedAttributes.add(e)}processViewAttributes(e,t){let{consumable:i}=t;return N9(e,this._disallowedAttributes,i),tge(e,N9(e,this._allowedAttributes,i))}_addAllowedElement(e){if(!this._allowedElements.has(e)){if(this._allowedElements.add(e),"appliesToBlock"in e&&typeof e.appliesToBlock=="string")for(let t of this._dataSchema.getDefinitionsForModel(e.appliesToBlock))t.isBlock&&this._addAllowedElement(t);this._dataInitialized&&this.editor.data.once("set",()=>{this._fireRegisterEvent(e)},{priority:_n.highest+1})}}_registerElementsAfterInit(){this.editor.data.on("init",()=>{this._dataInitialized=!0;for(let e of this._allowedElements)this._fireRegisterEvent(e)},{priority:_n.highest+1})}_registerElementHandlers(){this.on("register",(e,t)=>{let i=this.editor.model.schema;if(t.isObject&&!i.isRegistered(t.model))this._registerObjectElement(t);else if(t.isBlock)this._registerBlockElement(t);else if(t.isInline)this._registerInlineElement(t);else throw new _("data-filter-invalid-definition",null,t);e.stop()},{priority:"lowest"})}_registerCoupledAttributesPostFixer(){let e=this.editor.model,t=e.document.selection;e.document.registerPostFixer(i=>{let o=e.document.differ.getChanges(),r=!1,s=this._getCoupledAttributesMap();for(let a of o){if(a.type!="attribute"||a.attributeNewValue!==null)continue;let l=s.get(a.attributeKey);if(l)for(let{item:c}of a.range.getWalker())for(let d of l)c.hasAttribute(d)&&(i.removeAttribute(d,c),r=!0)}return r}),this.listenTo(t,"change:attribute",(i,{attributeKeys:o})=>{let r=new Set,s=this._getCoupledAttributesMap();for(let a of o){if(t.hasAttribute(a))continue;let l=s.get(a);if(l)for(let c of l)t.hasAttribute(c)&&r.add(c)}r.size!=0&&e.change(a=>{for(let l of r)a.removeSelectionAttribute(l)})})}_registerAssociatedHtmlAttributesPostFixer(){let e=this.editor.model;e.document.registerPostFixer(t=>{let i=e.document.differ.getChanges(),o=!1;for(let r of i)if(!(r.type!=="insert"||r.name==="$text"))for(let s of r.attributes.keys())!s.startsWith("html")||!s.endsWith("Attributes")||e.schema.checkAttribute(r.name,s)||(t.removeAttribute(s,r.position.nodeAfter),o=!0);return o})}_getCoupledAttributesMap(){if(this._coupledAttributes)return this._coupledAttributes;this._coupledAttributes=new Map;for(let e of this._allowedElements)if(e.coupledAttribute&&e.model){let t=this._coupledAttributes.get(e.coupledAttribute);t?t.push(e.model):this._coupledAttributes.set(e.coupledAttribute,[e.model])}return this._coupledAttributes}_fireRegisterEvent(e){e.view&&this._disallowedElements.has(e.view)||this.fire(e.view?`register:${e.view}`:"register",e)}_registerObjectElement(e){let t=this.editor,i=t.model.schema,o=t.conversion,{view:r,model:s}=e;i.register(s,e.modelSchema);r&&(i.extend(e.model,{allowAttributes:[go(r),"htmlContent"]}),t.data.registerRawContentMatcher({name:r}),o.for("upcast").elementToElement({view:r,model:ZM(e),converterPriority:_n.low+2}),o.for("upcast").add(sb(e,this)),o.for("editingDowncast").elementToStructure({model:{name:s,attributes:[go(r)]},view:Zpe(t,e)}),o.for("dataDowncast").elementToElement({model:s,view:(a,{writer:l})=>x_(r,a,l)}),o.for("dataDowncast").add(ab(e)))}_registerBlockElement(e){let t=this.editor,i=t.model.schema,o=t.conversion,{view:r,model:s}=e;if(!i.isRegistered(e.model)){if(i.register(e.model,e.modelSchema),!r)return;o.for("upcast").elementToElement({model:s,view:r,converterPriority:_n.low+2}),o.for("downcast").elementToElement({model:s,view:r})}r&&(i.extend(e.model,{allowAttributes:go(r)}),o.for("upcast").add(sb(e,this)),o.for("downcast").add(ab(e)))}_registerInlineElement(e){let t=this.editor,i=t.model.schema,o=t.conversion,r=e.model;e.appliesToBlock||(i.extend("$text",{allowAttributes:r}),e.attributeProperties&&i.setAttributeProperties(r,e.attributeProperties),o.for("upcast").add(Jpe(e,this)),o.for("downcast").attributeToElement({model:r,view:Xpe(e)}),e.allowEmpty&&(i.setAttributeProperties(r,{copyFromObject:!1}),i.isRegistered("htmlEmptyElement")||i.register("htmlEmptyElement",{inheritAllFrom:"$inlineObject"}),t.data.htmlProcessor.domConverter.registerInlineObjectMatcher(s=>s.name==e.view&&s.isEmpty&&Array.from(s.getAttributeKeys()).length?{name:!0}:null),o.for("editingDowncast").elementToElement({model:"htmlEmptyElement",view:P9(e,!0)}),o.for("dataDowncast").elementToElement({model:"htmlEmptyElement",view:P9(e)})))}};function N9(n,e,t){let i=e.matchAll(n)||[],o=n.document.stylesProcessor;return i.reduce((r,{match:s})=>{for(let a of s.styles||[]){let l=o.getRelatedStyles(a).filter(c=>c.split("-").length>a.split("-").length).sort((c,d)=>d.split("-").length-c.split("-").length);for(let c of l)t.consume(n,{styles:[c]})&&r.styles.push(c);t.consume(n,{styles:[a]})&&r.styles.push(a)}for(let a of s.classes||[])t.consume(n,{classes:[a]})&&r.classes.push(a);for(let a of s.attributes||[])t.consume(n,{attributes:[a]})&&r.attributes.push(a);return r},{attributes:[],classes:[],styles:[]})}function tge(n,{attributes:e,classes:t,styles:i}){return!e.length&&!t.length&&!i.length?null:v(v(v({},e.length&&{attributes:nge(n,e)}),i.length&&{styles:ige(n,i)}),t.length&&{classes:t})}function nge(n,e){let t={};for(let i of e){let o=n.getAttribute(i);o!==void 0&&wy(i)&&(t[i]=o)}return t}function ige(n,e){let t=new Zc(n.document.stylesProcessor);for(let i of e){let o=n.getStyle(i);o!==void 0&&t.set(i,o)}return Object.fromEntries(t.getStylesEntries())}function BM(n,e){let{name:t}=n,i=n[e];return Gt(i)?Object.entries(i).map(([o,r])=>({name:t,[e]:{[o]:r}})):Array.isArray(i)?i.map(o=>({name:t,[e]:[o]})):[n]}function O9(n){let{name:e,attributes:t,classes:i,styles:o}=n,r=[];return t&&r.push(...BM({name:e,attributes:t},"attributes")),i&&r.push(...BM({name:e,classes:i},"classes")),o&&r.push(...BM({name:e,styles:o},"styles")),r}var HM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"CodeBlockElementSupport"}static get isOfficialPlugin(){return!0}init(){if(!this.editor.plugins.has("CodeBlockEditing"))return;let e=this.editor.plugins.get(Vt);e.on("register:pre",(t,i)=>{if(i.model!=="codeBlock")return;let o=this.editor,r=o.model.schema,s=o.conversion;r.extend("codeBlock",{allowAttributes:["htmlPreAttributes","htmlContentAttributes"]}),s.for("upcast").add(oge(e)),s.for("downcast").add(rge()),t.stop()})}};function oge(n){return e=>{e.on("element:code",(t,i,o)=>{let r=i.viewItem,s=r.parent;if(!s||!s.is("element","pre"))return;a(s,"htmlPreAttributes"),a(r,"htmlContentAttributes");function a(l,c){let d=n.processViewAttributes(l,o);d&&o.writer.setAttribute(c,d,i.modelRange)}},{priority:"low"})}}function rge(){return n=>{n.on("attribute:htmlPreAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;let{attributeOldValue:o,attributeNewValue:r}=t,a=i.mapper.toViewElement(t.item).parent;bd(i.writer,o,r,a)}),n.on("attribute:htmlContentAttributes:codeBlock",(e,t,i)=>{if(!i.consumable.consume(t.item,e.name))return;let{attributeOldValue:o,attributeNewValue:r}=t,s=i.mapper.toViewElement(t.item);bd(i.writer,o,r,s)})}}var UM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"DualContentModelElementSupport"}static get isOfficialPlugin(){return!0}init(){this.editor.plugins.get(Vt).on("register",(t,i)=>{let o=i,r=this.editor,s=r.model.schema,a=r.conversion;if(!o.paragraphLikeModel||s.isRegistered(o.model)||s.isRegistered(o.paragraphLikeModel))return;let l={model:o.paragraphLikeModel,view:o.view};s.register(o.model,o.modelSchema),s.register(l.model,{inheritAllFrom:"$block"}),a.for("upcast").elementToElement({view:o.view,model:(c,{writer:d})=>this._hasBlockContent(c)?d.createElement(o.model):d.createElement(l.model),converterPriority:_n.low+.5}),a.for("downcast").elementToElement({view:o.view,model:o.model}),this._addAttributeConversion(o),a.for("downcast").elementToElement({view:l.view,model:l.model}),this._addAttributeConversion(l),t.stop()})}_hasBlockContent(e){let t=this.editor.editing.view,i=t.domConverter.blockElements;for(let o of t.createRangeIn(e).getItems())if(o.is("element")&&i.includes(o.name))return!0;return!1}_addAttributeConversion(e){let t=this.editor,i=t.conversion,o=t.plugins.get(Vt);t.model.schema.extend(e.model,{allowAttributes:go(e.view)}),i.for("upcast").add(sb(e,o)),i.for("downcast").add(ab(e))}},jM=class extends M{static get requires(){return[ml,jo]}static get pluginName(){return"HeadingElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("HeadingEditing"))return;let t=e.config.get("heading.options");this.registerHeadingElements(e,t)}registerHeadingElements(e,t){let i=e.plugins.get(ml),o=[];for(let r of t)"model"in r&&"view"in r&&(i.registerBlockElement({view:r.view,model:r.model}),o.push(r.model));i.extendBlockElement({model:"htmlHgroup",modelSchema:{allowChildren:o}}),i.extendBlockElement({model:"htmlSummary",modelSchema:{allowChildren:o}})}};function E_(n,e,t){let i=n.createRangeOn(e);for(let{item:o}of i.getWalker())if(o.is("element",t))return o}var $M=class extends M{static get requires(){return[Vt]}static get pluginName(){return"ImageElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ImageInlineEditing")&&!e.plugins.has("ImageBlockEditing"))return;let t=e.model.schema,i=e.conversion,o=e.plugins.get(Vt);o.on("register:figure",()=>{i.for("upcast").add(lge(o))}),o.on("register:img",(r,s)=>{s.model!=="imageBlock"&&s.model!=="imageInline"||(t.isRegistered("imageBlock")&&t.extend("imageBlock",{allowAttributes:["htmlImgAttributes","htmlFigureAttributes","htmlLinkAttributes"]}),t.isRegistered("imageInline")&&t.extend("imageInline",{allowAttributes:["htmlA","htmlImgAttributes"]}),i.for("upcast").add(sge(o)),i.for("downcast").add(cge()),e.plugins.has("LinkImage")&&i.for("upcast").add(age(o,e)),r.stop())})}};function sge(n){return e=>{e.on("element:img",(t,i,o)=>{if(!i.modelRange)return;let r=i.viewItem,s=n.processViewAttributes(r,o);s&&o.writer.setAttribute("htmlImgAttributes",s,i.modelRange)},{priority:"low"})}}function age(n,e){let t=e.plugins.get("ImageUtils");return i=>{i.on("element:a",(o,r,s)=>{let a=r.viewItem;if(!t.findViewImgElement(a))return;let c=r.modelCursor.parent;if(!c.is("element","imageBlock"))return;let d=n.processViewAttributes(a,s);d&&s.writer.setAttribute("htmlLinkAttributes",d,c)},{priority:"low"})}}function lge(n){return e=>{e.on("element:figure",(t,i,o)=>{let r=i.viewItem;if(!i.modelRange||!r.hasClass("image"))return;let s=n.processViewAttributes(r,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function cge(){return n=>{e("htmlImgAttributes"),t("img","htmlImgAttributes"),t("figure","htmlFigureAttributes"),t("a","htmlLinkAttributes");function e(i){n.on(`attribute:${i}:imageInline`,(o,r,s)=>{if(!s.consumable.consume(r.item,o.name))return;let{attributeOldValue:a,attributeNewValue:l}=r,c=s.mapper.toViewElement(r.item);bd(s.writer,a,l,c)},{priority:"low"})}function t(i,o){n.on(`attribute:${o}:imageBlock`,(r,s,a)=>{if(!a.consumable.test(s.item,r.name))return;let{attributeOldValue:l,attributeNewValue:c}=s,d=a.mapper.toViewElement(s.item),f=E_(a.writer,d,i);f&&(bd(a.writer,l,c,f),a.consumable.consume(s.item,r.name))},{priority:"low"}),i==="a"&&n.on("attribute:linkHref:imageBlock",(r,s,a)=>{if(!a.consumable.consume(s.item,"attribute:htmlLinkAttributes:imageBlock"))return;let l=a.mapper.toViewElement(s.item),c=E_(a.writer,l,"a");Dr(a.writer,s.item.getAttribute("htmlLinkAttributes"),c)},{priority:"low"})}}}var WM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"MediaEmbedElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("MediaEmbed")||e.config.get("mediaEmbed.previewsInData"))return;let t=e.model.schema,i=e.conversion,o=this.editor.plugins.get(Vt),r=this.editor.plugins.get(ml),s=e.config.get("mediaEmbed.elementName");r.registerBlockElement({model:"media",view:s}),o.on("register:figure",()=>{i.for("upcast").add(uge(o))}),o.on(`register:${s}`,(a,l)=>{l.model==="media"&&(t.extend("media",{allowAttributes:[go(s),"htmlFigureAttributes"]}),i.for("upcast").add(dge(o,s)),i.for("dataDowncast").add(hge(s)),a.stop())})}};function dge(n,e){let t=(i,o,r)=>{let s=o.viewItem;a(s,go(e));function a(l,c){let d=n.processViewAttributes(l,r);d&&r.writer.setAttribute(c,d,o.modelRange)}};return i=>{i.on(`element:${e}`,t,{priority:"low"})}}function uge(n){return e=>{e.on("element:figure",(t,i,o)=>{let r=i.viewItem;if(!i.modelRange||!r.hasClass("media"))return;let s=n.processViewAttributes(r,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function hge(n){return e=>{t(n,go(n)),t("figure","htmlFigureAttributes");function t(i,o){e.on(`attribute:${o}:media`,(r,s,a)=>{if(!a.consumable.consume(s.item,r.name))return;let{attributeOldValue:l,attributeNewValue:c}=s,d=a.mapper.toViewElement(s.item),f=E_(a.writer,d,i);bd(a.writer,l,c,f)})}}}var qM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"ScriptElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt);e.on("register:script",(t,i)=>{let o=this.editor,r=o.model.schema,s=o.conversion;r.register("htmlScript",i.modelSchema),r.extend("htmlScript",{allowAttributes:["htmlScriptAttributes","htmlContent"],isContent:!0}),o.data.registerRawContentMatcher({name:"script"}),s.for("upcast").elementToElement({view:"script",model:ZM(i)}),s.for("upcast").add(sb(i,e)),s.for("downcast").elementToElement({model:"htmlScript",view:(a,{writer:l})=>x_("script",a,l)}),s.for("downcast").add(ab(i)),t.stop()})}},GM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"TableElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("TableEditing"))return;let t=e.model.schema,i=e.conversion,o=e.plugins.get(Vt),r=e.plugins.get("TableUtils");o.on("register:figure",()=>{i.for("upcast").add(pge(o))}),o.on("register:table",(s,a)=>{a.model==="table"&&(t.extend("table",{allowAttributes:["htmlTableAttributes","htmlFigureAttributes","htmlTheadAttributes","htmlTbodyAttributes"]}),i.for("upcast").add(fge(o)),i.for("downcast").add(gge()),e.model.document.registerPostFixer(mge(e.model,r)),s.stop())})}};function mge(n,e){return t=>{let i=n.document.differ.getChanges(),o=!1;for(let r of i){if(r.type!="attribute"||r.attributeKey!="headingRows")continue;let s=r.range.start.nodeAfter,a=s.getAttribute("htmlTheadAttributes"),l=s.getAttribute("htmlTbodyAttributes");a&&!r.attributeNewValue?(t.removeAttribute("htmlTheadAttributes",s),o=!0):l&&r.attributeNewValue==e.getRows(s)&&(t.removeAttribute("htmlTbodyAttributes",s),o=!0)}return o}}function fge(n){return e=>{e.on("element:table",(t,i,o)=>{if(!i.modelRange)return;let r=i.viewItem;s(r,"htmlTableAttributes");for(let a of r.getChildren())a.is("element","thead")&&s(a,"htmlTheadAttributes"),a.is("element","tbody")&&s(a,"htmlTbodyAttributes");function s(a,l){let c=n.processViewAttributes(a,o);c&&o.writer.setAttribute(l,c,i.modelRange)}},{priority:"low"})}}function pge(n){return e=>{e.on("element:figure",(t,i,o)=>{let r=i.viewItem;if(!i.modelRange||!r.hasClass("table"))return;let s=n.processViewAttributes(r,o);s&&o.writer.setAttribute("htmlFigureAttributes",s,i.modelRange)},{priority:"low"})}}function gge(){return n=>{e("table","htmlTableAttributes"),e("figure","htmlFigureAttributes"),e("thead","htmlTheadAttributes"),e("tbody","htmlTbodyAttributes");function e(t,i){n.on(`attribute:${i}:table`,(o,r,s)=>{if(!s.consumable.test(r.item,o.name))return;let a=s.mapper.toViewElement(r.item),l=E_(s.writer,a,t);l&&(s.consumable.consume(r.item,o.name),bd(s.writer,r.attributeOldValue,r.attributeNewValue,l))})}}}var KM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"StyleElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt);e.on("register:style",(t,i)=>{let o=this.editor,r=o.model.schema,s=o.conversion;r.register("htmlStyle",i.modelSchema),r.extend("htmlStyle",{allowAttributes:["htmlStyleAttributes","htmlContent"],isContent:!0}),o.data.registerRawContentMatcher({name:"style"}),s.for("upcast").elementToElement({view:"style",model:ZM(i)}),s.for("upcast").add(sb(i,e)),s.for("downcast").elementToElement({model:"htmlStyle",view:(a,{writer:l})=>x_("style",a,l)}),s.for("downcast").add(ab(i)),t.stop()})}},QM=class extends M{static get requires(){return[Vt]}static get pluginName(){return"ListElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;if(!e.plugins.has("ListEditing"))return;let t=e.model.schema,i=e.conversion,o=e.plugins.get(Vt),r=e.plugins.get("ListEditing"),s=e.plugins.get("ListUtils"),a=["ul","ol","li"];r.registerDowncastStrategy({scope:"item",attributeName:"htmlLiAttributes",setAttributeOnDowncast:Dr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlUlAttributes",setAttributeOnDowncast:Dr}),r.registerDowncastStrategy({scope:"list",attributeName:"htmlOlAttributes",setAttributeOnDowncast:Dr}),o.on("register",(l,c)=>{if(!a.includes(c.view)||(l.stop(),t.checkAttribute("$block","htmlLiAttributes")))return;let d=a.map(f=>go(f));t.extend("$listItem",{allowAttributes:d}),i.for("upcast").add(f=>{f.on("element:ul",zM("htmlUlAttributes",o),{priority:"low"}),f.on("element:ol",zM("htmlOlAttributes",o),{priority:"low"}),f.on("element:li",zM("htmlLiAttributes",o),{priority:"low"})})}),r.on("postFixer",(l,{listNodes:c,writer:d})=>{for(let{node:f,previousNodeInList:p}of c)if(p){if(p.getAttribute("listType")==f.getAttribute("listType")){let g=L9(p.getAttribute("listType")),w=p.getAttribute(g);!$c(f.getAttribute(g),w)&&d.model.schema.checkAttribute(f,g)&&(d.setAttribute(g,w,f),l.return=!0)}if(p.getAttribute("listItemId")==f.getAttribute("listItemId")){let g=p.getAttribute("htmlLiAttributes");!$c(f.getAttribute("htmlLiAttributes"),g)&&d.model.schema.checkAttribute(f,"htmlLiAttributes")&&(d.setAttribute("htmlLiAttributes",g,f),l.return=!0)}}}),r.on("postFixer",(l,{listNodes:c,writer:d})=>{for(let{node:f}of c){let p=f.getAttribute("listType");!s.isNumberedListType(p)&&f.getAttribute("htmlOlAttributes")&&(d.removeAttribute("htmlOlAttributes",f),l.return=!0),s.isNumberedListType(p)&&f.getAttribute("htmlUlAttributes")&&(d.removeAttribute("htmlUlAttributes",f),l.return=!0)}})}afterInit(){let e=this.editor;if(!e.commands.get("indentList"))return;let t=e.commands.get("indentList");this.listenTo(t,"afterExecute",(i,o)=>{e.model.change(r=>{for(let s of o){let a=L9(s.getAttribute("listType"));e.model.schema.checkAttribute(s,a)&&r.setAttribute(a,{},s)}})})}};function zM(n,e){return(t,i,o)=>{let r=i.viewItem;i.modelRange||Object.assign(i,o.convertChildren(i.viewItem,i.modelCursor));let s=e.processViewAttributes(r,o);for(let a of i.modelRange.getItems({shallow:!0}))a.hasAttribute("listItemId")&&(a.hasAttribute("htmlUlAttributes")||a.hasAttribute("htmlOlAttributes")||o.writer.model.schema.checkAttribute(a,n)&&o.writer.setAttribute(n,s||{},a))}}function L9(n){return n==="numbered"||n=="customNumbered"?"htmlOlAttributes":"htmlUlAttributes"}var YM=class extends M{static get requires(){return[Vt,ml]}static get pluginName(){return"CustomElementSupport"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.plugins.get(Vt),t=this.editor.plugins.get(ml);e.on("register:$customElement",(i,o)=>{i.stop();let r=this.editor,s=r.model.schema,a=r.conversion,l=r.editing.view.domConverter.unsafeElements,c=r.data.htmlProcessor.domConverter.preElements;s.register(o.model,o.modelSchema),s.extend(o.model,{allowAttributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"],isContent:!0}),r.data.htmlProcessor.domConverter.registerRawContentMatcher({name:"template"}),a.for("upcast").elementToElement({view:/.*/,model:(d,f)=>{if(d.name=="$comment"||!bge(d.name)||t.getDefinitionsForView(d.name).size)return null;l.includes(d.name)||l.push(d.name),c.includes(d.name)||c.push(d.name);let p=f.writer.createElement(o.model,{htmlElementName:d.name}),g=e.processViewAttributes(d,f);g&&f.writer.setAttribute("htmlCustomElementAttributes",g,p);let w;if(d.is("element","template")&&d.getCustomProperty("$rawContent"))w=d.getCustomProperty("$rawContent");else{let C=new tl(d.document).createDocumentFragment(d),S=r.data.htmlProcessor.domConverter.viewToDom(C),T=S.firstChild;for(;T.firstChild;)S.appendChild(T.firstChild);T.remove(),w=r.data.htmlProcessor.htmlWriter.getHtml(S)}f.writer.setAttribute("htmlContent",w,p);for(let{item:k}of r.editing.view.createRangeIn(d))f.consumable.consume(k,{name:!0});return p},converterPriority:"low"}),a.for("editingDowncast").elementToElement({model:{name:o.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(d,{writer:f})=>{let p=d.getAttribute("htmlElementName"),g=f.createRawElement(p);return d.hasAttribute("htmlCustomElementAttributes")&&Dr(f,d.getAttribute("htmlCustomElementAttributes"),g),g}}),a.for("dataDowncast").elementToElement({model:{name:o.model,attributes:["htmlElementName","htmlCustomElementAttributes","htmlContent"]},view:(d,{writer:f})=>{let p=d.getAttribute("htmlElementName"),g=d.getAttribute("htmlContent"),w=f.createRawElement(p,null,(k,C)=>{C.setContentOf(k,g)});return d.hasAttribute("htmlCustomElementAttributes")&&Dr(f,d.getAttribute("htmlCustomElementAttributes"),w),w}})})}};function bge(n){try{document.createElement(n)}catch{return!1}return!0}var S_=class extends M{static get pluginName(){return"GeneralHtmlSupport"}static get isOfficialPlugin(){return!0}static get requires(){return[Vt,HM,UM,jM,$M,WM,qM,GM,KM,QM,YM]}init(){let e=this.editor,t=e.plugins.get(Vt);t.loadAllowedEmptyElementsConfig(e.config.get("htmlSupport.allowEmpty")||[]),t.loadAllowedConfig(e.config.get("htmlSupport.allow")||[]),t.loadDisallowedConfig(e.config.get("htmlSupport.disallow")||[])}getGhsAttributeNameForElement(e){let t=this.editor.plugins.get("DataSchema"),i=Array.from(t.getDefinitionsForView(e,!1)),o=i.find(r=>r.isInline&&!i[0].isObject);return o?o.model:go(e)}addModelHtmlClass(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"classes",l=>{for(let c of $e(t))l.add(c)})})}removeModelHtmlClass(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"classes",l=>{for(let c of $e(t))l.delete(c)})})}setModelHtmlAttributes(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"attributes",l=>{for(let[c,d]of Object.entries(t))l.set(c,d)})})}removeModelHtmlAttributes(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"attributes",l=>{for(let c of $e(t))l.delete(c)})})}setModelHtmlStyles(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"styles",l=>{for(let[c,d]of Object.entries(t))l.set(c,d)})})}removeModelHtmlStyles(e,t,i){let o=this.editor.model,r=this.getGhsAttributeNameForElement(e);o.change(s=>{for(let a of Dm(o,i,r))Mm(s,a,r,"styles",l=>{for(let c of $e(t))l.delete(c)})})}};function*Dm(n,e,t){if(e)if(!(Symbol.iterator in e)&&e.is("documentSelection")&&e.isCollapsed)n.schema.checkAttributeInSelection(e,t)&&(yield e);else for(let i of wge(n,e,t))yield*it(i.getItems({shallow:!0}))}function wge(n,e,t){return!(Symbol.iterator in e)&&(e.is("node")||e.is("$text")||e.is("$textProxy"))?n.schema.checkAttribute(e,t)?[n.createRangeOn(e)]:[]:n.schema.getValidRanges(n.createSelection(e).getRanges(),t)}var IYe=new RegExp(String(/^(http(s)?:\/\/)?[\w-]+\.[\w.~:/[\]@!$&'()*+,;=%-]+/.source+/\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source+/(\?[\w.~:/[\]@!$&'()*+,;=%-]*)?/.source+/(#[\w.~:/[\]@!$&'()*+,;=%-]*)?$/.source));var JM=class extends M{static get pluginName(){return"IndentEditing"}static get isOfficialPlugin(){return!0}init(){let e=this.editor;e.commands.add("indent",new qg(e)),e.commands.add("outdent",new qg(e))}},XM=class extends M{static get pluginName(){return"IndentUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.locale,i=e.t,o=t.uiLanguageDirection=="ltr"?ee.indent:ee.outdent,r=t.uiLanguageDirection=="ltr"?ee.outdent:ee.indent;this._defineButton("indent",i("Increase indent"),o),this._defineButton("outdent",i("Decrease indent"),r)}_defineButton(e,t,i){let o=this.editor;o.ui.componentFactory.add(e,()=>{let r=this._createButton(oe,e,t,i);return r.set({tooltip:!0}),r}),o.ui.componentFactory.add("menuBar:"+e,()=>this._createButton(be,e,t,i))}_createButton(e,t,i,o){let r=this.editor,s=r.commands.get(t),a=new e(r.locale);return a.set({label:i,icon:o}),a.bind("isEnabled").to(s,"isEnabled"),this.listenTo(a,"execute",()=>{r.execute(t),r.editing.view.focus()}),a}},A_=class extends M{static get pluginName(){return"Indent"}static get isOfficialPlugin(){return!0}static get requires(){return[JM,XM]}},Pm=class extends te{_indentBehavior;constructor(e,t){super(e),this._indentBehavior=t}refresh(){let t=this.editor.model,i=lt(t.document.selection.getSelectedBlocks());if(!i||!this._isIndentationChangeAllowed(i)){this.isEnabled=!1;return}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"))}execute(){let e=this.editor.model,t=this._getBlocksToChange();e.change(i=>{for(let o of t){let r=o.getAttribute("blockIndent"),s=this._indentBehavior.getNextIndent(r);s?i.setAttribute("blockIndent",s,o):i.removeAttribute("blockIndent",o)}})}_getBlocksToChange(){let t=this.editor.model.document.selection;return Array.from(t.getSelectedBlocks()).filter(o=>this._isIndentationChangeAllowed(o))}_isIndentationChangeAllowed(e){let t=this.editor;return t.model.schema.checkAttribute(e,"blockIndent")?!t.plugins.has("ListUtils")||!this._indentBehavior.isForward?!0:!t.plugins.get("ListUtils").isListItemBlock(e):!1}};var T_=class{isForward;offset;unit;constructor(e){this.isForward=e.direction==="forward",this.offset=e.offset,this.unit=e.unit}checkEnabled(e){let t=parseFloat(e||"0");return this.isForward||t>0}getNextIndent(e){let t=parseFloat(e||"0");if(!(!e||e.endsWith(this.unit)))return this.isForward?this.offset+this.unit:void 0;let o=this.isForward?this.offset:-this.offset,r=t+o;return r>0?r+this.unit:void 0}};var I_=class{isForward;classes;constructor(e){this.isForward=e.direction==="forward",this.classes=e.classes}checkEnabled(e){let t=this.classes.indexOf(e);return this.isForward?t<this.classes.length-1:t>=0}getNextIndent(e){let t=this.classes.indexOf(e),i=this.isForward?1:-1;return this.classes[t+i]}},yge=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"],M_=class extends M{constructor(e){super(e),e.config.define("indentBlock",{offset:40,unit:"px"})}static get pluginName(){return"IndentBlock"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=e.config.get("indentBlock");t.classes&&t.classes.length?(this._setupConversionUsingClasses(t.classes),e.commands.add("indentBlock",new Pm(e,new I_({direction:"forward",classes:t.classes}))),e.commands.add("outdentBlock",new Pm(e,new I_({direction:"backward",classes:t.classes})))):(e.data.addStyleProcessorRules(J8),this._setupConversionUsingOffset(),e.commands.add("indentBlock",new Pm(e,new T_({direction:"forward",offset:t.offset,unit:t.unit}))),e.commands.add("outdentBlock",new Pm(e,new T_({direction:"backward",offset:t.offset,unit:t.unit}))))}afterInit(){let e=this.editor,t=e.model.schema,i=e.commands.get("indent"),o=e.commands.get("outdent"),r=e.config.get("heading.options");(r&&r.map(l=>l.model)||yge).forEach(l=>{t.isRegistered(l)&&t.extend(l,{allowAttributes:"blockIndent"})}),t.setAttributeProperties("blockIndent",{isFormatting:!0}),i.registerChildCommand(e.commands.get("indentBlock")),o.registerChildCommand(e.commands.get("outdentBlock"))}_setupConversionUsingOffset(){let e=this.editor.conversion,i=this.editor.locale.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e.for("upcast").attributeToAttribute({view:{styles:{[i]:/[\s\S]+/}},model:{key:"blockIndent",value:o=>{if(!o.is("element","li"))return o.getStyle(i)}}}),e.for("downcast").attributeToAttribute({model:"blockIndent",view:o=>({key:"style",value:{[i]:o}})})}_setupConversionUsingClasses(e){let t={model:{key:"blockIndent",values:[]},view:{}};for(let i of e)t.model.values.push(i),t.view[i]={key:"class",value:[i]};this.editor.conversion.attributeToAttribute(t)}};var tD=class{_definitions=new Set;get length(){return this._definitions.size}add(e){Array.isArray(e)?e.forEach(t=>this._definitions.add(t)):this._definitions.add(e)}getDispatcher(){return e=>{e.on("attribute:linkHref",(t,i,o)=>{if(!o.consumable.test(i.item,"attribute:linkHref")||!(i.item.is("selection")||o.schema.isInline(i.item)))return;let r=o.writer,s=r.document.selection;for(let a of this._definitions){let l=r.createAttributeElement("a",a.attributes,{priority:5});a.classes&&r.addClass(a.classes,l);for(let c in a.styles)r.setStyle(c,a.styles[c],l);r.setCustomProperty("link",!0,l),a.callback(i.attributeNewValue)?i.item.is("selection")?r.wrap(s.getFirstRange(),l):r.wrap(o.mapper.toViewRange(i.range),l):r.unwrap(o.mapper.toViewRange(i.range),l)}},{priority:"high"})}}getDispatcherForLinkedImage(){return e=>{e.on("attribute:linkHref:imageBlock",(t,i,{writer:o,mapper:r})=>{let s=r.toViewElement(i.item),a=Array.from(s.getChildren()).find(l=>l.is("element","a"));if(a)for(let l of this._definitions){let c=_i(l.attributes);if(l.callback(i.attributeNewValue)){for(let[d,f]of c)d==="class"?o.addClass(f,a):o.setAttribute(d,f,a);l.classes&&o.addClass(l.classes,a);for(let d in l.styles)o.setStyle(d,l.styles[d],a)}else{for(let[d,f]of c)d==="class"?o.removeClass(f,a):o.removeAttribute(d,a);l.classes&&o.removeClass(l.classes,a);for(let d in l.styles)o.removeStyle(d,a)}}})}}},_ge=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Cge="^(?:(?:<protocols>):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))",Ege=/^[\S]+@((?![-_])(?:[-\w\u00a1-\uffff]{0,63}[^-_]\.))+(?:[a-z\u00a1-\uffff]{2,})$/i,Sge=/^((\w+:(\/{2,})?)|(\W))/i,xge=["https?","ftps?","mailto"],D_="Ctrl+K";function Age(n){return n.is("attributeElement")&&!!n.getCustomProperty("link")}function V9(n,{writer:e}){let t=e.createAttributeElement("a",{href:n},{priority:5});return e.setCustomProperty("link",!0,t),t}function j9(n,e=xge){let t=String(n),i=e.join("|"),o=new RegExp(`${Cge.replace("<protocols>",i)}`,"i");return Tge(t,o)?t:"#"}function Tge(n,e){return!!n.replace(_ge,"").match(e)}function Ige(n,e){let t={"Open in a new tab":n("Open in a new tab"),Downloadable:n("Downloadable")};return e.forEach(i=>("label"in i&&t[i.label]&&(i.label=t[i.label]),i)),e}function Mge(n){let e=[];if(n)for(let[t,i]of Object.entries(n)){let o=Object.assign({},i,{id:`link${cg(t)}`});e.push(o)}return e}function nD(n,e){return n?e.checkAttribute(n.name,"linkHref"):!1}function Dge(n){return Ege.test(n)}function dD(n,e){let t=Dge(n)?"mailto:":e,i=!!t&&!$9(n);return n&&i?t+n:n}function $9(n){return Sge.test(n)}function B9(n){window.open(n,"_blank","noopener")}var iD=class extends te{manualDecorators=new ft;automaticDecorators=new tD;restoreManualDecoratorStates(){for(let e of this.manualDecorators)e.value=this._getDecoratorStateFromModel(e.id)}refresh(){let e=this.editor.model,t=e.document.selection,i=t.getSelectedElement()||lt(t.getSelectedBlocks());nD(i,e.schema)?(this.value=i.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttribute(i,"linkHref")):(this.value=t.getAttribute("linkHref"),this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref"));for(let o of this.manualDecorators)o.value=this._getDecoratorStateFromModel(o.id)}execute(e,t={}){let i=this.editor.model,o=i.document.selection,r=[],s=[];for(let a in t)t[a]?r.push(a):s.push(a);i.change(a=>{if(o.isCollapsed){let l=o.getFirstPosition();if(o.hasAttribute("linkHref")){let c=z9(o),d=Em(l,"linkHref",o.getAttribute("linkHref"),i);o.getAttribute("linkHref")===c&&(d=this._updateLinkContent(i,a,d,e)),a.setAttribute("linkHref",e,d),r.forEach(f=>{a.setAttribute(f,!0,d)}),s.forEach(f=>{a.removeAttribute(f,d)}),a.setSelection(a.createPositionAfter(d.end.nodeBefore))}else if(e!==""){let c=_i(o.getAttributes());c.set("linkHref",e),r.forEach(f=>{c.set(f,!0)});let{end:d}=i.insertContent(a.createText(e,c),l);a.setSelection(d)}["linkHref",...r,...s].forEach(c=>{a.removeSelectionAttribute(c)})}else{let l=i.schema.getValidRanges(o.getRanges(),"linkHref"),c=[];for(let f of o.getSelectedBlocks())i.schema.checkAttribute(f,"linkHref")&&c.push(a.createRangeOn(f));let d=c.slice();for(let f of l)this._isRangeToUpdate(f,c)&&d.push(f);for(let f of d){let p=f;if(d.length===1){let g=z9(o);o.getAttribute("linkHref")===g&&(p=this._updateLinkContent(i,a,f,e),a.setSelection(a.createSelection(p)))}a.setAttribute("linkHref",e,p),r.forEach(g=>{a.setAttribute(g,!0,p)}),s.forEach(g=>{a.removeAttribute(g,p)})}}})}_getDecoratorStateFromModel(e){let t=this.editor.model,i=t.document.selection,o=i.getSelectedElement();return nD(o,t.schema)?o.getAttribute(e):i.getAttribute(e)}_isRangeToUpdate(e,t){for(let i of t)if(i.containsRange(e))return!1;return!0}_updateLinkContent(e,t,i,o){let r=t.createText(o,{linkHref:o});return e.insertContent(r,i)}};function z9(n){if(n.isCollapsed){let e=n.getFirstPosition();return e.textNode&&e.textNode.data}else{let e=Array.from(n.getFirstRange().getItems());if(e.length>1)return null;let t=e[0];return t.is("$text")||t.is("$textProxy")?t.data:null}}var oD=class extends te{refresh(){let e=this.editor.model,t=e.document.selection,i=t.getSelectedElement();nD(i,e.schema)?this.isEnabled=e.schema.checkAttribute(i,"linkHref"):this.isEnabled=e.schema.checkAttributeInSelection(t,"linkHref")}execute(){let e=this.editor,t=this.editor.model,i=t.document.selection,o=e.commands.get("link");t.change(r=>{let s=i.isCollapsed?[Em(i.getFirstPosition(),"linkHref",i.getAttribute("linkHref"),t)]:t.schema.getValidRanges(i.getRanges(),"linkHref");for(let a of s)if(r.removeAttribute("linkHref",a),o)for(let l of o.manualDecorators)r.removeAttribute(l.id,a)})}},rD=class extends Ze(){id;defaultValue;label;attributes;classes;styles;constructor({id:e,label:t,attributes:i,classes:o,styles:r,defaultValue:s}){super(),this.id=e,this.set("value",void 0),this.defaultValue=s,this.label=t,this.attributes=i,this.classes=o,this.styles=r}_createPattern(){return{attributes:this.attributes,classes:this.classes,styles:this.styles}}},Pge="ck-link_selected",H9="automatic",Rge="manual",Nge=/^(https?:)?\/\//,P_=class extends M{static get pluginName(){return"LinkEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[Cm,eb,An]}constructor(e){super(e),e.config.define("link",{allowCreatingEmptyLinks:!1,addTargetToExternalLinks:!1})}init(){let e=this.editor,t=this.editor.config.get("link.allowedProtocols");e.model.schema.extend("$text",{allowAttributes:"linkHref"}),e.conversion.for("dataDowncast").attributeToElement({model:"linkHref",view:V9}),e.conversion.for("editingDowncast").attributeToElement({model:"linkHref",view:(r,s)=>V9(j9(r,t),s)}),e.conversion.for("upcast").elementToAttribute({view:{name:"a",attributes:{href:!0}},model:{key:"linkHref",value:r=>r.getAttribute("href")}}),e.commands.add("link",new iD(e)),e.commands.add("unlink",new oD(e));let i=Ige(e.t,Mge(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(r=>r.mode===H9)),this._enableManualDecorators(i.filter(r=>r.mode===Rge)),e.plugins.get(Cm).registerAttribute("linkHref"),HI(e,"linkHref","a",Pge),this._enableLinkOpen(),this._enableSelectionAttributesFixer(),this._enableClipboardIntegration()}_enableAutomaticDecorators(e){let t=this.editor,o=t.commands.get("link").automaticDecorators;t.config.get("link.addTargetToExternalLinks")&&o.add({id:"linkIsExternal",mode:H9,callback:r=>!!r&&Nge.test(r),attributes:{target:"_blank",rel:"noopener noreferrer"}}),o.add(e),o.length&&t.conversion.for("downcast").add(o.getDispatcher())}_enableManualDecorators(e){if(!e.length)return;let t=this.editor,o=t.commands.get("link").manualDecorators;e.forEach(r=>{t.model.schema.extend("$text",{allowAttributes:r.id});let s=new rD(r);o.add(s),t.conversion.for("downcast").attributeToElement({model:s.id,view:(a,{writer:l,schema:c},{item:d})=>{if((d.is("selection")||c.isInline(d))&&a){let f=l.createAttributeElement("a",s.attributes,{priority:5});s.classes&&l.addClass(s.classes,f);for(let p in s.styles)l.setStyle(p,s.styles[p],f);return l.setCustomProperty("link",!0,f),f}}}),t.conversion.for("upcast").elementToAttribute({view:v({name:"a"},s._createPattern()),model:{key:s.id}})})}_enableLinkOpen(){let e=this.editor,i=e.editing.view.document;this.listenTo(i,"click",(o,r)=>{if(!(ie.isMac?r.domEvent.metaKey:r.domEvent.ctrlKey))return;let a=r.domTarget;if(a.tagName.toLowerCase()!="a"&&(a=a.closest("a")),!a)return;let l=a.getAttribute("href");l&&(o.stop(),r.preventDefault(),B9(l))},{context:"$capture"}),this.listenTo(i,"keydown",(o,r)=>{let a=e.commands.get("link").value;a&&r.keyCode===_e.enter&&r.altKey&&(o.stop(),B9(a))})}_enableSelectionAttributesFixer(){let t=this.editor.model,i=t.document.selection;this.listenTo(i,"change:attribute",(o,{attributeKeys:r})=>{!r.includes("linkHref")||i.hasAttribute("linkHref")||t.change(s=>{Oge(s,Lge(t.schema))})})}_enableClipboardIntegration(){let e=this.editor,t=e.model,i=this.editor.config.get("link.defaultProtocol");i&&this.listenTo(e.plugins.get("ClipboardPipeline"),"contentInsertion",(o,r)=>{t.change(s=>{let a=s.createRangeIn(r.content);for(let l of a.getItems())if(l.hasAttribute("linkHref")){let c=dD(l.getAttribute("linkHref"),i);s.setAttribute("linkHref",c,l)}})})}};function Oge(n,e){n.removeSelectionAttribute("linkHref");for(let t of e)n.removeSelectionAttribute(t)}function Lge(n){return n.getDefinition("$text").allowAttributes.filter(t=>t.startsWith("link"))}var sD=class extends Y{focusTracker=new Et;keystrokes=new Ft;urlInputView;saveButtonView;cancelButtonView;_manualDecoratorSwitches;children;_validators;_focusables=new Sn;_focusCycler;constructor(e,t,i){super(e);let o=e.t;this._validators=i,this.urlInputView=this._createUrlInput(),this.saveButtonView=this._createButton(o("Save"),ee.check,"ck-button-save"),this.saveButtonView.type="submit",this.cancelButtonView=this._createButton(o("Cancel"),ee.cancel,"ck-button-cancel","cancel"),this._manualDecoratorSwitches=this._createManualDecoratorSwitches(t),this.children=this._createFormChildren(t.manualDecorators),this._focusCycler=new Vn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});let r=["ck","ck-link-form","ck-responsive-form"];t.manualDecorators.length&&r.push("ck-link-form_layout-vertical","ck-vertical-form"),this.setTemplate({tag:"form",attributes:{class:r,tabindex:"-1"},children:this.children})}getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce((e,t)=>(e[t.name]=t.isOn,e),{})}render(){super.render(),dd({view:this}),[this.urlInputView,...this._manualDecoratorSwitches,this.saveButtonView,this.cancelButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null}_createUrlInput(){let e=this.locale.t,t=new Ho(this.locale,ud);return t.fieldView.inputMode="url",t.label=e("Link URL"),t}_createButton(e,t,i,o){let r=new oe(this.locale);return r.set({label:e,icon:t,tooltip:!0}),r.extendTemplate({attributes:{class:i}}),o&&r.delegate("execute").to(this,o),r}_createManualDecoratorSwitches(e){let t=this.createCollection();for(let i of e.manualDecorators){let o=new Rs(this.locale);o.set({name:i.id,label:i.label,withText:!0}),o.bind("isOn").toMany([i,e],"value",(r,s)=>s===void 0&&r===void 0?!!i.defaultValue:!!r),o.on("execute",()=>{i.set("value",!o.isOn)}),t.add(o)}return t}_createFormChildren(e){let t=this.createCollection();if(t.add(this.urlInputView),e.length){let i=new Y;i.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(o=>({tag:"li",children:[o],attributes:{class:["ck","ck-list__item"]}})),attributes:{class:["ck","ck-reset","ck-list"]}}),t.add(i)}return t.add(this.saveButtonView),t.add(this.cancelButtonView),t}get url(){let{element:e}=this.urlInputView.fieldView;return e?e.value.trim():null}},Fge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>',aD=class extends Y{focusTracker=new Et;keystrokes=new Ft;previewButtonView;unlinkButtonView;editButtonView;_focusables=new Sn;_focusCycler;_linkConfig;constructor(e,t={}){super(e);let i=e.t;this.previewButtonView=this._createPreviewButton(),this.unlinkButtonView=this._createButton(i("Unlink"),Fge,"unlink"),this.editButtonView=this._createButton(i("Edit link"),ee.pencil,"edit"),this.set("href",void 0),this._linkConfig=t,this._focusCycler=new Vn({focusables:this._focusables,focusTracker:this.focusTracker,keystrokeHandler:this.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),this.setTemplate({tag:"div",attributes:{class:["ck","ck-link-actions","ck-responsive-form"],tabindex:"-1"},children:[this.previewButtonView,this.editButtonView,this.unlinkButtonView]})}render(){super.render(),[this.previewButtonView,this.editButtonView,this.unlinkButtonView].forEach(t=>{this._focusables.add(t),this.focusTracker.add(t.element)}),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this._focusCycler.focusFirst()}_createButton(e,t,i){let o=new oe(this.locale);return o.set({label:e,icon:t,tooltip:!0}),o.delegate("execute").to(this,i),o}_createPreviewButton(){let e=new oe(this.locale),t=this.bindTemplate,i=this.t;return e.set({withText:!0,tooltip:i("Open link in new tab")}),e.extendTemplate({attributes:{class:["ck","ck-link-actions__preview"],href:t.to("href",o=>o&&j9(o,this._linkConfig.allowedProtocols)),target:"_blank",rel:"noopener noreferrer"}}),e.bind("label").to(this,"href",o=>o||i("This link has no URL")),e.bind("isEnabled").to(this,"href",o=>!!o),e.template.tag="a",e.template.eventListeners={},e}},Vge='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>',Pr="link-ui",lD=class extends M{actionsView=null;formView=null;_balloon;static get requires(){return[Ns]}static get pluginName(){return"LinkUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor,t=this.editor.t;e.editing.view.addObserver(Ny),this._balloon=e.plugins.get(Ns),this._createToolbarLinkButton(),this._enableBalloonActivators(),e.conversion.for("editingDowncast").markerToHighlight({model:Pr,view:{classes:["ck-fake-link-selection"]}}),e.conversion.for("editingDowncast").markerToElement({model:Pr,view:(i,{writer:o})=>{if(!i.markerRange.isCollapsed)return null;let r=o.createUIElement("span");return o.addClass(["ck-fake-link-selection","ck-fake-link-selection_collapsed"],r),r}}),e.accessibility.addKeystrokeInfos({keystrokes:[{label:t("Create link"),keystroke:D_},{label:t("Move out of a link"),keystroke:[["arrowleft","arrowleft"],["arrowright","arrowright"]]}]})}destroy(){super.destroy(),this.formView&&this.formView.destroy(),this.actionsView&&this.actionsView.destroy()}_createViews(){this.actionsView=this._createActionsView(),this.formView=this._createFormView(),this._enableUserBalloonInteractions()}_createActionsView(){let e=this.editor,t=new aD(e.locale,e.config.get("link")),i=e.commands.get("link"),o=e.commands.get("unlink");return t.bind("href").to(i,"value"),t.editButtonView.bind("isEnabled").to(i),t.unlinkButtonView.bind("isEnabled").to(o),this.listenTo(t,"edit",()=>{this._addFormView()}),this.listenTo(t,"unlink",()=>{e.execute("unlink"),this._hideUI()}),t.keystrokes.set("Esc",(r,s)=>{this._hideUI(),s()}),t.keystrokes.set(D_,(r,s)=>{this._addFormView(),s()}),t}_createFormView(){let e=this.editor,t=e.commands.get("link"),i=e.config.get("link.defaultProtocol"),o=new(bm(sD))(e.locale,t,Bge(e));return o.urlInputView.fieldView.bind("value").to(t,"value"),o.urlInputView.bind("isEnabled").to(t,"isEnabled"),o.saveButtonView.bind("isEnabled").to(t,"isEnabled"),this.listenTo(o,"submit",()=>{if(o.isValid()){let{value:r}=o.urlInputView.fieldView.element,s=dD(r,i);e.execute("link",s,o.getDecoratorSwitchesState()),this._closeFormView()}}),this.listenTo(o.urlInputView,"change:errorText",()=>{e.ui.update()}),this.listenTo(o,"cancel",()=>{this._closeFormView()}),o.keystrokes.set("Esc",(r,s)=>{this._closeFormView(),s()}),o}_createToolbarLinkButton(){let e=this.editor;e.ui.componentFactory.add("link",()=>{let t=this._createButton(oe);return t.set({tooltip:!0}),t}),e.ui.componentFactory.add("menuBar:link",()=>{let t=this._createButton(be);return t.set({role:"menuitemcheckbox"}),t})}_createButton(e){let t=this.editor,i=t.locale,o=t.commands.get("link"),r=new e(t.locale),s=i.t;return r.set({label:s("Link"),icon:Vge,keystroke:D_,isToggleable:!0}),r.bind("isEnabled").to(o,"isEnabled"),r.bind("isOn").to(o,"value",a=>!!a),this.listenTo(r,"execute",()=>this._showUI(!0)),r}_enableBalloonActivators(){let e=this.editor,t=e.editing.view.document;this.listenTo(t,"click",()=>{this._getSelectedLinkElement()&&this._showUI()}),e.keystrokes.set(D_,(i,o)=>{o(),e.commands.get("link").isEnabled&&this._showUI(!0)})}_enableUserBalloonInteractions(){this.editor.keystrokes.set("Tab",(e,t)=>{this._areActionsVisible&&!this.actionsView.focusTracker.isFocused&&(this.actionsView.focus(),t())},{priority:"high"}),this.editor.keystrokes.set("Esc",(e,t)=>{this._isUIVisible&&(this._hideUI(),t())}),cd({emitter:this.formView,activator:()=>this._isUIInPanel,contextElements:()=>[this._balloon.view.element],callback:()=>this._hideUI()})}_addActionsView(){this.actionsView||this._createViews(),!this._areActionsInPanel&&this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()})}_addFormView(){if(this.formView||this._createViews(),this._isFormInPanel)return;let t=this.editor.commands.get("link");this.formView.disableCssTransitions(),this.formView.resetFormStatus(),this._balloon.add({view:this.formView,position:this._getBalloonPositionData()}),this.formView.urlInputView.fieldView.value=t.value||"",this._balloon.visibleView===this.formView&&this.formView.urlInputView.fieldView.select(),this.formView.enableCssTransitions()}_closeFormView(){let e=this.editor.commands.get("link");e.restoreManualDecoratorStates(),e.value!==void 0?this._removeFormView():this._hideUI()}_removeFormView(){this._isFormInPanel&&(this.formView.saveButtonView.focus(),this.formView.urlInputView.fieldView.reset(),this._balloon.remove(this.formView),this.editor.editing.view.focus(),this._hideFakeVisualSelection())}_showUI(e=!1){this.formView||this._createViews(),this._getSelectedLinkElement()?(this._areActionsVisible?this._addFormView():this._addActionsView(),e&&this._balloon.showStack("main")):(this._showFakeVisualSelection(),this._addActionsView(),e&&this._balloon.showStack("main"),this._addFormView()),this._startUpdatingUI()}_hideUI(){if(!this._isUIInPanel)return;let e=this.editor;this.stopListening(e.ui,"update"),this.stopListening(this._balloon,"change:visibleView"),e.editing.view.focus(),this._removeFormView(),this._balloon.remove(this.actionsView),this._hideFakeVisualSelection()}_startUpdatingUI(){let e=this.editor,t=e.editing.view.document,i=this._getSelectedLinkElement(),o=s(),r=()=>{let a=this._getSelectedLinkElement(),l=s();i&&!a||!i&&l!==o?this._hideUI():this._isUIVisible&&this._balloon.updatePosition(this._getBalloonPositionData()),i=a,o=l};function s(){return t.selection.focus.getAncestors().reverse().find(a=>a.is("element"))}this.listenTo(e.ui,"update",r),this.listenTo(this._balloon,"change:visibleView",r)}get _isFormInPanel(){return!!this.formView&&this._balloon.hasView(this.formView)}get _areActionsInPanel(){return!!this.actionsView&&this._balloon.hasView(this.actionsView)}get _areActionsVisible(){return!!this.actionsView&&this._balloon.visibleView===this.actionsView}get _isUIInPanel(){return this._isFormInPanel||this._areActionsInPanel}get _isUIVisible(){let e=this._balloon.visibleView;return!!this.formView&&e==this.formView||this._areActionsVisible}_getBalloonPositionData(){let e=this.editor.editing.view,t=this.editor.model,i=e.document,o;if(t.markers.has(Pr)){let r=Array.from(this.editor.editing.mapper.markerNameToElements(Pr)),s=e.createRange(e.createPositionBefore(r[0]),e.createPositionAfter(r[r.length-1]));o=e.domConverter.viewRangeToDom(s)}else o=()=>{let r=this._getSelectedLinkElement();return r?e.domConverter.mapViewToDom(r):e.domConverter.viewRangeToDom(i.selection.getFirstRange())};return{target:o}}_getSelectedLinkElement(){let e=this.editor.editing.view,t=e.document.selection,i=t.getSelectedElement();if(t.isCollapsed||i&&Pt(i))return eD(t.getFirstPosition());{let o=t.getFirstRange().getTrimmed(),r=eD(o.start),s=eD(o.end);return!r||r!=s?null:e.createRangeIn(r).getTrimmed().isEqual(o)?r:null}}_showFakeVisualSelection(){let e=this.editor.model;e.change(t=>{let i=e.document.selection.getFirstRange();if(e.markers.has(Pr))t.updateMarker(Pr,{range:i});else if(i.start.isAtEnd){let o=i.start.getLastMatchingPosition(({item:r})=>!e.schema.isContent(r),{boundaries:i});t.addMarker(Pr,{usingOperation:!1,affectsData:!1,range:t.createRange(o,i.end)})}else t.addMarker(Pr,{usingOperation:!1,affectsData:!1,range:i})})}_hideFakeVisualSelection(){let e=this.editor.model;e.markers.has(Pr)&&e.change(t=>{t.removeMarker(Pr)})}};function eD(n){return n.getAncestors().find(e=>Age(e))||null}function Bge(n){let e=n.t,t=n.config.get("link.allowCreatingEmptyLinks");return[i=>{if(!t&&!i.url.length)return e("Link URL must not be empty.")}]}var zge=4,W9=new RegExp("(^|\\s)(((?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(((?!www\\.)|(www\\.))(?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.)+(?:[a-z\\u00a1-\\uffff]{2,63})))(?::\\d{2,5})?(?:[/?#]\\S*)?)|((www.|(\\S+@))((?![-_])(?:[-_a-z0-9\\u00a1-\\uffff]{1,63}\\.))+(?:[a-z\\u00a1-\\uffff]{2,63})))$","i"),Hge=2,cD=class extends M{static get requires(){return[zn,P_]}static get pluginName(){return"AutoLink"}static get isOfficialPlugin(){return!0}init(){let t=this.editor.model.document.selection;t.on("change:range",()=>{this.isEnabled=!t.anchor.parent.is("element","codeBlock")}),this._enableTypingHandling()}afterInit(){this._enableEnterHandling(),this._enableShiftEnterHandling(),this._enablePasteLinking()}_expandLinkRange(e,t){return t.textNode&&t.textNode.hasAttribute("linkHref")?Em(t,"linkHref",t.textNode.getAttribute("linkHref"),e):null}_selectEntireLinks(e,t){let o=this.editor.model,r=o.document.selection,s=r.getFirstPosition(),a=r.getLastPosition(),l=t.getJoined(this._expandLinkRange(o,s)||t);l&&(l=l.getJoined(this._expandLinkRange(o,a)||t)),l&&(l.start.isBefore(s)||l.end.isAfter(a))&&e.setSelection(l)}_enablePasteLinking(){let e=this.editor,t=e.model,i=t.document.selection,o=e.plugins.get("ClipboardPipeline"),r=e.commands.get("link");o.on("inputTransformation",(s,a)=>{if(!this.isEnabled||!r.isEnabled||i.isCollapsed||a.method!=="paste"||i.rangeCount>1)return;let l=i.getFirstRange(),c=a.dataTransfer.getData("text/plain");if(!c)return;let d=c.match(W9);d&&d[2]===c&&(t.change(f=>{this._selectEntireLinks(f,l),r.execute(c)}),s.stop())},{priority:"high"})}_enableTypingHandling(){let e=this.editor,t=new nb(e.model,i=>{if(!Uge(i))return;let o=U9(i.substr(0,i.length-1));if(o)return{url:o}});t.on("matched:data",(i,o)=>{let{batch:r,range:s,url:a}=o;if(!r.isTyping)return;let l=s.end.getShiftedBy(-1),c=l.getShiftedBy(-a.length),d=e.model.createRange(c,l);this._applyAutoLink(a,d)}),t.bind("isEnabled").to(this)}_enableEnterHandling(){let e=this.editor,t=e.model,i=e.commands.get("enter");i&&i.on("execute",()=>{let o=t.document.selection.getFirstPosition();if(!o.parent.previousSibling)return;let r=t.createRangeIn(o.parent.previousSibling);this._checkAndApplyAutoLinkOnRange(r)})}_enableShiftEnterHandling(){let e=this.editor,t=e.model,i=e.commands.get("shiftEnter");i&&i.on("execute",()=>{let o=t.document.selection.getFirstPosition(),r=t.createRange(t.createPositionAt(o.parent,0),o.getShiftedBy(-1));this._checkAndApplyAutoLinkOnRange(r)})}_checkAndApplyAutoLinkOnRange(e){let t=this.editor.model,{text:i,range:o}=zI(e,t),r=U9(i);if(r){let s=t.createRange(o.end.getShiftedBy(-r.length),o.end);this._applyAutoLink(r,s)}}_applyAutoLink(e,t){let i=this.editor.model,o=this.editor.config.get("link.defaultProtocol"),r=dD(e,o);!this.isEnabled||!jge(t,i)||!$9(r)||$ge(t)||this._persistAutoLink(r,t)}_persistAutoLink(e,t){let i=this.editor.model,o=this.editor.plugins.get("Delete");i.enqueueChange(r=>{r.setAttribute("linkHref",e,t),i.enqueueChange(()=>{o.requestUndoOnBackspace()})})}};function Uge(n){return n.length>zge&&n[n.length-1]===" "&&n[n.length-2]!==" "}function U9(n){let e=W9.exec(n);return e?e[Hge]:null}function jge(n,e){return e.schema.checkAttributeInSelection(e.createSelection(n),"linkHref")}function $ge(n){let e=n.start.nodeAfter;return!!e&&e.hasAttribute("linkHref")}var R_=class extends M{static get requires(){return[P_,lD,cD]}static get pluginName(){return"Link"}static get isOfficialPlugin(){return!0}};var Si=class{_startElement;_referenceIndent;_isForward;_includeSelf;_sameAttributes;_sameIndent;_lowerIndent;_higherIndent;constructor(e,t){this._startElement=e,this._referenceIndent=e.getAttribute("listIndent"),this._isForward=t.direction=="forward",this._includeSelf=!!t.includeSelf,this._sameAttributes=$e(t.sameAttributes||[]),this._sameIndent=!!t.sameIndent,this._lowerIndent=!!t.lowerIndent,this._higherIndent=!!t.higherIndent}static first(e,t){let o=new this(e,t)[Symbol.iterator]();return lt(o)}*[Symbol.iterator](){let e=[];for(let{node:t}of db(this._getStartNode(),this._isForward?"forward":"backward")){let i=t.getAttribute("listIndent");if(i<this._referenceIndent){if(!this._lowerIndent)break;this._referenceIndent=i}else if(i>this._referenceIndent){if(!this._higherIndent)continue;if(!this._isForward){e.push(t);continue}}else{if(!this._sameIndent){if(this._higherIndent){e.length&&(yield*it(e),e.length=0);break}continue}if(this._sameAttributes.some(o=>t.getAttribute(o)!==this._startElement.getAttribute(o)))break}e.length&&(yield*it(e),e.length=0),yield t}}_getStartNode(){return this._includeSelf?this._startElement:this._isForward?this._startElement.nextSibling:this._startElement.previousSibling}};function*db(n,e="forward"){let t=e=="forward",i=[],o=null;for(;cn(n);){let r=null;if(o){let s=n.getAttribute("listIndent"),a=o.getAttribute("listIndent");s>a?i[a]=o:s<a?(r=i[s],i.length=s):r=o}yield{node:n,previous:o,previousNodeInList:r},o=n,n=t?n.nextSibling:n.previousSibling}}var hD=class{_listHead;constructor(e){this._listHead=e}[Symbol.iterator](){return db(this._listHead,"forward")}},fl=class{static next(){return an()}};function cn(n){return!!n&&n.is("element")&&n.hasAttribute("listItemId")}function vD(n,e={}){return[...pl(n,I(v({},e),{direction:"backward"})),...pl(n,I(v({},e),{direction:"forward"}))]}function pl(n,e={}){let t=e.direction=="forward",i=Array.from(new Si(n,I(v({},e),{includeSelf:t,sameIndent:!0,sameAttributes:"listItemId"})));return t?i:i.reverse()}function Wge(n){return Array.from(new Si(n,{direction:"forward",higherIndent:!0}))}function X9(n,e){let t=new Si(n,v({sameIndent:!0,sameAttributes:"listType"},e)),i=new Si(n,v({sameIndent:!0,sameAttributes:"listType",includeSelf:!0,direction:"forward"},e));return[...Array.from(t).reverse(),...i]}function wd(n){return!Si.first(n,{sameIndent:!0,sameAttributes:"listItemId"})}function q9(n){return!Si.first(n,{direction:"forward",sameIndent:!0,sameAttributes:"listItemId"})}function ub(n,e={}){n=$e(n);let t=e.withNested!==!1,i=new Set;for(let o of n)for(let r of vD(o,{higherIndent:t}))i.add(r);return kd(i)}function qge(n){n=$e(n);let e=new Set;for(let t of n)for(let i of X9(t))e.add(i);return kd(e)}function yD(n,e){let t=pl(n,{direction:"forward"}),i=fl.next();for(let o of t)e.setAttribute("listItemId",i,o);return t}function mD(n,e,t){let i={};for(let[r,s]of e.getAttributes())r.startsWith("list")&&(i[r]=s);let o=pl(n,{direction:"forward"});for(let r of o)t.setAttributes(i,r);return o}function fD(n,e,{expand:t,indentBy:i=1}={}){n=$e(n);let o=t?ub(n):n;for(let r of o){let s=r.getAttribute("listIndent")+i;s<0?B_(r,e):e.setAttribute("listIndent",s,r)}return o}function Gge(n,e){n=$e(n);let t=ub(n),i=new Set,o=Math.min(...t.map(s=>s.getAttribute("listIndent"))),r=new Map;for(let s of t)r.set(s,Si.first(s,{lowerIndent:!0}));for(let s of t){if(i.has(s))continue;i.add(s);let a=s.getAttribute("listIndent")-1;if(a<0){B_(s,e);continue}if(s.getAttribute("listIndent")==o){let l=Yge(s,r.get(s),e);for(let c of l)i.add(c);if(l.length)continue}e.setAttribute("listIndent",a,s)}return kd(i)}function B_(n,e){n=$e(n);for(let t of n)t.is("element","listItem")&&e.rename(t,"paragraph");for(let t of n)for(let i of t.getAttributeKeys())i.startsWith("list")&&e.removeAttribute(i,t);return n}function lb(n){if(!n.length)return!1;let e=n[0].getAttribute("listItemId");return e?!n.some(t=>t.getAttribute("listItemId")!=e):!1}function Kge(n,e){let t=[],i=Number.POSITIVE_INFINITY;for(let{node:o}of db(n.nextSibling,"forward")){let r=o.getAttribute("listIndent");if(r==0)break;r<i&&(i=r);let s=r-i;e.setAttribute("listIndent",s,o),t.push(o)}return t}function kd(n){return Array.from(n).filter(e=>e.root.rootName!=="$graveyard").sort((e,t)=>e.index-t.index)}function cb(n){let e=n.document.selection.getSelectedElement();return e&&n.schema.isObject(e)&&n.schema.isBlock(e)?e:null}function uD(n,e){return e.checkChild(n.parent,"listItem")&&e.checkChild(n,"$text")&&!e.isObject(n)}function Qge(n){return n=="numbered"||n=="customNumbered"}function Yge(n,e,t){return pl(e,{direction:"forward"}).pop().index>n.index?mD(n,e,t):[]}var O_=class extends te{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){let e=this.editor.model,t=G9(e.document.selection);e.change(i=>{let o=[];lb(t)&&!wd(t[0])?(this._direction=="forward"&&o.push(...fD(t,i)),o.push(...yD(t[0],i))):this._direction=="forward"?o.push(...fD(t,i,{expand:!0})):o.push(...Gge(t,i));for(let r of o){if(!r.hasAttribute("listType"))continue;let s=Si.first(r,{sameIndent:!0});s&&i.setAttribute("listType",s.getAttribute("listType"),r)}this._fireAfterExecute(o)})}_fireAfterExecute(e){this.fire("afterExecute",kd(new Set(e)))}_checkEnabled(){let e=G9(this.editor.model.document.selection),t=e[0];if(!t)return!1;if(this._direction=="backward"||lb(e)&&!wd(e[0]))return!0;e=ub(e),t=e[0];let i=Si.first(t,{sameIndent:!0});return i?i.getAttribute("listType")==t.getAttribute("listType"):!1}};function G9(n){let e=Array.from(n.getSelectedBlocks()),t=e.findIndex(i=>!cn(i));return t!=-1&&(e.length=t),e}var Rm=class extends te{type;_listWalkerOptions;constructor(e,t,i={}){super(e),this.type=t,this._listWalkerOptions=i.multiLevel?{higherIndent:!0,lowerIndent:!0,sameAttributes:[]}:void 0}refresh(){this.value=this._getValue(),this.isEnabled=this._checkEnabled()}execute(e={}){let t=this.editor.model,i=t.document,o=cb(t),r=Array.from(i.selection.getSelectedBlocks()).filter(a=>t.schema.checkAttribute(a,"listType")||uD(a,t.schema)),s=e.forceValue!==void 0?!e.forceValue:this.value;t.change(a=>{if(s){let l=r[r.length-1],c=pl(l,{direction:"forward"}),d=[];c.length>1&&d.push(...yD(c[1],a)),d.push(...B_(r,a)),d.push(...Kge(l,a)),this._fireAfterExecute(d)}else if((o||i.selection.isCollapsed)&&cn(r[0])){let l=X9(o||r[0],this._listWalkerOptions);for(let c of l)a.setAttributes(I(v({},e.additionalAttributes),{listType:this.type}),c);this._fireAfterExecute(l)}else{let l=[];for(let c of r)if(!c.hasAttribute("listType"))!c.is("element","listItem")&&uD(c,t.schema)&&a.rename(c,"listItem"),a.setAttributes(I(v({},e.additionalAttributes),{listIndent:0,listItemId:fl.next(),listType:this.type}),c),l.push(c);else for(let d of ub(c,{withNested:!1}))d.getAttribute("listType")!=this.type&&(a.setAttributes(I(v({},e.additionalAttributes),{listType:this.type}),d),l.push(d));this._fireAfterExecute(l)}})}_fireAfterExecute(e){this.fire("afterExecute",kd(new Set(e)))}_getValue(){let e=this.editor.model.document.selection,t=Array.from(e.getSelectedBlocks());if(!t.length)return!1;for(let i of t)if(i.getAttribute("listType")!=this.type)return!1;return!0}_checkEnabled(){let e=this.editor.model,t=e.schema,i=e.document.selection,o=Array.from(i.getSelectedBlocks());if(!o.length)return!1;if(this.value)return!0;for(let r of o)if(t.checkAttribute(r,"listType")||uD(r,t))return!0;return!1}},L_=class extends te{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute({shouldMergeOnBlocksContentLevel:e=!1}={}){let t=this.editor.model,i=t.document.selection,o=[];t.change(r=>{let{firstElement:s,lastElement:a}=this._getMergeSubjectElements(i,e),l=s.getAttribute("listIndent")||0,c=a.getAttribute("listIndent"),d=a.getAttribute("listItemId");if(l!=c){let f=Wge(a);o.push(...fD([a,...f],r,{indentBy:l-c,expand:l<c}))}if(e){let f=i;i.isCollapsed&&(f=r.createSelection(r.createRange(r.createPositionAt(s,"end"),r.createPositionAt(a,0)))),t.deleteContent(f,{doNotResetEntireContent:i.isCollapsed});let p=f.getLastPosition().parent,g=p.nextSibling;o.push(p),g&&g!==a&&g.getAttribute("listItemId")==d&&o.push(...mD(g,p,r))}else o.push(...mD(a,s,r));this._fireAfterExecute(o)})}_fireAfterExecute(e){this.fire("afterExecute",kd(new Set(e)))}_checkEnabled(){let e=this.editor.model,t=e.document.selection,i=cb(e);if(t.isCollapsed||i){let o=i||t.getFirstPosition().parent;if(!cn(o))return!1;let r=this._direction=="backward"?o.previousSibling:o.nextSibling;if(!r||lb([o,r]))return!1}else{let o=t.getLastPosition(),r=t.getFirstPosition();if(o.parent===r.parent||!cn(o.parent))return!1}return!0}_getMergeSubjectElements(e,t){let i=this.editor.model,o=cb(i),r,s;if(e.isCollapsed||o){let a=o||e.getFirstPosition().parent,l=wd(a);this._direction=="backward"?(s=a,l&&!t?r=Si.first(a,{sameIndent:!0,lowerIndent:!0}):r=a.previousSibling):(r=a,s=a.nextSibling)}else r=e.getFirstPosition().parent,s=e.getLastPosition().parent;return{firstElement:r,lastElement:s}}},F_=class extends te{_direction;constructor(e,t){super(e),this._direction=t}refresh(){this.isEnabled=this._checkEnabled()}execute(){this.editor.model.change(t=>{let i=yD(this._getStartBlock(),t);this._fireAfterExecute(i)})}_fireAfterExecute(e){this.fire("afterExecute",kd(new Set(e)))}_checkEnabled(){let e=this.editor.model.document.selection,t=this._getStartBlock();return e.isCollapsed&&cn(t)&&!wd(t)}_getStartBlock(){let t=this.editor.model.document.selection.getFirstPosition().parent;return this._direction=="before"?t:t.nextSibling}},pD=class extends M{static get pluginName(){return"ListUtils"}static get isOfficialPlugin(){return!0}expandListBlocksToCompleteList(e){return qge(e)}isFirstBlockOfListItem(e){return wd(e)}isListItemBlock(e){return cn(e)}expandListBlocksToCompleteItems(e,t={}){return ub(e,t)}isNumberedListType(e){return Qge(e)}};function Zge(n){return n.is("element","ol")||n.is("element","ul")}function gD(n){return n.is("element","li")}function Jge(n){let e=0,t=n.parent;for(;t;){if(gD(t))e++;else{let i=t.previousSibling;i&&gD(i)&&e++}t=t.parent}return e}function Xge(n,e,t,i=tH(t,e)){return n.createAttributeElement(eH(t),null,{priority:2*e/100-100,id:i})}function ebe(n,e,t){return n.createAttributeElement("li",null,{priority:(2*e+1)/100-100,id:t})}function eH(n){return n=="numbered"||n=="customNumbered"?"ol":"ul"}function tH(n,e){return`list-${n}-${e}`}function Wo(n,e){let t=n.nodeBefore;if(cn(t)){let i=t;for(let{node:o}of db(i,"backward"))if(i=o,e.has(i))return;e.set(t,i)}else{let i=n.nodeAfter;cn(i)&&e.set(i,i)}}function tbe(n,e){let t=0,i=-1,o=null,r=!1;for(let{node:s}of n){let a=s.getAttribute("listIndent");if(a>t){let l;o===null?(o=a-t,l=t):(o>a&&(o=a),l=a-o),l>i+1&&(l=i+1),e.setAttribute("listIndent",l,s),r=!0,i=l}else o=null,t=a+1,i=a}return r}function nbe(n,e,t){let i=new Set,o=!1;for(let{node:r}of n){if(i.has(r))continue;let s=r.getAttribute("listType"),a=r.getAttribute("listItemId");if(e.has(a)&&(a=fl.next()),e.add(a),r.is("element","listItem")){r.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,r),o=!0);continue}for(let l of pl(r,{direction:"forward"}))i.add(l),l.getAttribute("listType")!=s&&(a=fl.next(),s=l.getAttribute("listType")),l.getAttribute("listItemId")!=a&&(t.setAttribute("listItemId",a,l),o=!0)}return o}function ibe(){return(n,e,t)=>{let{writer:i,schema:o}=t;if(!e.modelRange)return;let r=Array.from(e.modelRange.getItems({shallow:!0})).filter(f=>o.checkAttribute(f,"listItemId"));if(!r.length)return;let s=fl.next(),a=Jge(e.viewItem),l=e.viewItem.parent&&e.viewItem.parent.is("element","ol")?"numbered":"bulleted",c=r[0].getAttribute("listType");c&&(l=c);let d={listItemId:s,listIndent:a,listType:l};for(let f of r)f.hasAttribute("listItemId")||i.setAttributes(d,f);r.length>1&&r[1].getAttribute("listItemId")!=d.listItemId&&t.keepEmptyElement(r[0])}}function obe(n,e,t,i){return()=>{let a=n.document.differ.getChanges(),l=[],c=new Map,d=new Set;for(let f of a)if(f.type=="insert"&&f.name!="$text")Wo(f.position,c),f.attributes.has("listItemId")?d.add(f.position.nodeAfter):Wo(f.position.getShiftedBy(f.length),c);else if(f.type=="remove"&&f.attributes.has("listItemId"))Wo(f.position,c);else if(f.type=="attribute"){let p=f.range.start.nodeAfter;t.includes(f.attributeKey)?(Wo(f.range.start,c),f.attributeNewValue===null?(Wo(f.range.start.getShiftedBy(1),c),r(p)&&l.push(p)):d.add(p)):cn(p)&&r(p)&&l.push(p)}for(let f of c.values())l.push(...o(f,d));for(let f of new Set(l))e.reconvertItem(f)};function o(a,l){let c=[],d=new Set,f=[];for(let{node:p,previous:g}of db(a,"forward")){if(d.has(p))continue;let w=p.getAttribute("listIndent");g&&w<g.getAttribute("listIndent")&&(f.length=w+1),f[w]=Object.fromEntries(Array.from(p.getAttributes()).filter(([C])=>t.includes(C)));let k=pl(p,{direction:"forward"});for(let C of k)d.add(C),(r(C,k)||s(C,f,l))&&c.push(C)}return c}function r(a,l){let c=e.mapper.toViewElement(a);if(!c)return!1;if(i.fire("checkElement",{modelElement:a,viewElement:c}))return!0;if(!a.is("element","paragraph")&&!a.is("element","listItem"))return!1;let f=iH(a,t,l);return f&&c.is("element","p")?!0:!!(!f&&c.is("element","span"))}function s(a,l,c){if(c.has(a))return!1;let d=e.mapper.toViewElement(a),f=l.length-1;for(let p=d.parent;!p.is("editableElement");p=p.parent){let g=gD(p),w=Zge(p);if(!w&&!g)continue;let k=`checkAttributes:${g?"item":"list"}`;if(i.fire(k,{viewElement:p,modelAttributes:l[f]}))break;if(w&&(f--,f<0))return!1}return!0}}function K9(n,e,t,{dataPipeline:i}={}){let o=ube(n);return(r,s,a)=>{let{writer:l,mapper:c,consumable:d}=a,f=s.item;if(!n.includes(s.attributeKey)||!o(f,d))return;let p=sbe(f,c,t);nH(p,l,c),cbe(p,l);let g=lbe(f,p,e,l,{dataPipeline:i});dbe(f,g,e,l)}}function rbe(n){return(e,t,i)=>{let{writer:o,mapper:r}=i,s=e.name.split(":")[1];if(!n.checkAttribute(s,"listItemId"))return;let a=r.toViewPosition(t.position),l=t.position.getShiftedBy(t.length),c=r.toViewPosition(l,{isPhantom:!0}),f=o.createRange(a,c).getTrimmed().end.nodeBefore;f&&nH(f,o,r)}}function Q9(n,{dataPipeline:e}={}){return(t,{writer:i})=>{if(!iH(t,n))return null;if(!e)return i.createContainerElement("span",{class:"ck-list-bogus-paragraph"});let o=i.createContainerElement("p");return i.setCustomProperty("dataPipeline:transparentRendering",!0,o),o}}function sbe(n,e,t){let i=t.createRangeOn(n);return e.toViewRange(i).getTrimmed().end.nodeBefore}function abe(n,e){return(t,i)=>{if(i.modelPosition.offset>0)return;let o=i.modelPosition.parent;if(!cn(o)||!n.some(c=>c.scope=="itemMarker"&&c.canInjectMarkerIntoElement&&c.canInjectMarkerIntoElement(o)))return;let r=i.mapper.toViewElement(o),s=e.createRangeIn(r),a=s.getWalker(),l=s.start;for(let{item:c}of a){if(c.is("element")&&i.mapper.toModelElement(c)||c.is("$textProxy"))break;c.is("element")&&c.getCustomProperty("listItemMarker")&&(l=e.createPositionAfter(c),a.skip(({previousPosition:d})=>!d.isEqual(l)))}i.viewPosition=l}}function nH(n,e,t){for(;n.parent.is("attributeElement")&&n.parent.getCustomProperty("listItemWrapper");)e.unwrap(e.createRangeOn(n),n.parent);let i=[];o(e.createPositionBefore(n).getWalker({direction:"backward"})),o(e.createRangeIn(n).getWalker());for(let r of i)e.remove(r);function o(r){for(let{item:s}of r){if(s.is("element")&&t.toModelElement(s))break;s.is("element")&&s.getCustomProperty("listItemMarker")&&i.push(s)}}}function lbe(n,e,t,i,{dataPipeline:o}){let r=i.createRangeOn(e);if(!wd(n))return r;for(let s of t){if(s.scope!="itemMarker")continue;let a=s.createElement(i,n,{dataPipeline:o});if(!a||(i.setCustomProperty("listItemMarker",!0,a),s.canInjectMarkerIntoElement&&s.canInjectMarkerIntoElement(n)?i.insert(i.createPositionAt(e,0),a):(i.insert(r.start,a),r=i.createRange(i.createPositionBefore(a),i.createPositionAfter(e))),!s.createWrapperElement||!s.canWrapElement))continue;let l=s.createWrapperElement(i,n,{dataPipeline:o});i.setCustomProperty("listItemWrapper",!0,l),s.canWrapElement(n)?r=i.wrap(r,l):(r=i.wrap(i.createRangeOn(a),l),r=i.createRange(r.start,i.createPositionAfter(e)))}return r}function cbe(n,e){let t=n.parent;for(;t.is("attributeElement")&&["ul","ol","li"].includes(t.name);){let i=t.parent;e.unwrap(e.createRangeOn(n),t),t=i}}function dbe(n,e,t,i){if(!n.hasAttribute("listIndent"))return;let o=n.getAttribute("listIndent"),r=n;for(let s=o;s>=0;s--){let a=ebe(i,s,r.getAttribute("listItemId")),l=Xge(i,s,r.getAttribute("listType"));for(let c of t)(c.scope=="list"||c.scope=="item")&&r.hasAttribute(c.attributeName)&&c.setAttributeOnDowncast(i,r.getAttribute(c.attributeName),c.scope=="list"?l:a);if(e=i.wrap(e,a),e=i.wrap(e,l),s==0||(r=Si.first(r,{lowerIndent:!0}),!r))break}}function ube(n){return(e,t)=>{let i=[];for(let o of n)e.hasAttribute(o)&&i.push(`attribute:${o}`);return i.every(o=>t.test(e,o)!==!1)?(i.forEach(o=>t.consume(e,o)),!0):!1}}function iH(n,e,t=vD(n)){if(!cn(n))return!1;for(let i of n.getAttributeKeys())if(!i.startsWith("selection:")&&!e.includes(i))return!1;return t.length<2}var N_=["listType","listIndent","listItemId"],bD=class extends M{_downcastStrategies=[];static get pluginName(){return"ListEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[jo,zn,pD,An]}constructor(e){super(e),e.config.define("list.multiBlock",!0)}init(){let e=this.editor,t=e.model,i=e.config.get("list.multiBlock");if(e.plugins.has("LegacyListEditing"))throw new _("list-feature-conflict",this,{conflictPlugin:"LegacyListEditing"});t.schema.register("$listItem",{allowAttributes:N_}),i?(t.schema.extend("$container",{allowAttributesOf:"$listItem"}),t.schema.extend("$block",{allowAttributesOf:"$listItem"}),t.schema.extend("$blockObject",{allowAttributesOf:"$listItem"})):t.schema.register("listItem",{inheritAllFrom:"$block",allowAttributesOf:"$listItem"});for(let o of N_)t.schema.setAttributeProperties(o,{copyOnReplace:!0});e.commands.add("numberedList",new Rm(e,"numbered")),e.commands.add("bulletedList",new Rm(e,"bulleted")),e.commands.add("customNumberedList",new Rm(e,"customNumbered",{multiLevel:!0})),e.commands.add("customBulletedList",new Rm(e,"customBulleted",{multiLevel:!0})),e.commands.add("indentList",new O_(e,"forward")),e.commands.add("outdentList",new O_(e,"backward")),e.commands.add("splitListItemBefore",new F_(e,"before")),e.commands.add("splitListItemAfter",new F_(e,"after")),i&&(e.commands.add("mergeListItemBackward",new L_(e,"backward")),e.commands.add("mergeListItemForward",new L_(e,"forward"))),this._setupDeleteIntegration(),this._setupEnterIntegration(),this._setupTabIntegration(),this._setupClipboardIntegration(),this._setupAccessibilityIntegration()}afterInit(){let t=this.editor.commands,i=t.get("indent"),o=t.get("outdent");i&&i.registerChildCommand(t.get("indentList"),{priority:"high"}),o&&o.registerChildCommand(t.get("outdentList"),{priority:"lowest"}),this._setupModelPostFixing(),this._setupConversion()}registerDowncastStrategy(e){this._downcastStrategies.push(e)}getListAttributeNames(){return[...N_,...this._downcastStrategies.map(e=>e.attributeName)]}_setupDeleteIntegration(){let e=this.editor,t=e.commands.get("mergeListItemBackward"),i=e.commands.get("mergeListItemForward");this.listenTo(e.editing.view.document,"delete",(o,r)=>{let s=e.model.document.selection;cb(e.model)||e.model.change(()=>{let a=s.getFirstPosition();if(s.isCollapsed&&r.direction=="backward"){if(!a.isAtStart)return;let l=a.parent;if(!cn(l))return;if(!Si.first(l,{sameAttributes:"listType",sameIndent:!0})&&l.getAttribute("listIndent")===0)q9(l)||e.execute("splitListItemAfter"),e.execute("outdentList");else{if(!t||!t.isEnabled)return;t.execute({shouldMergeOnBlocksContentLevel:Y9(e.model,"backward")})}r.preventDefault(),o.stop()}else{if(s.isCollapsed&&!s.getLastPosition().isAtEnd||!i||!i.isEnabled)return;i.execute({shouldMergeOnBlocksContentLevel:Y9(e.model,"forward")}),r.preventDefault(),o.stop()}})},{context:"li"})}_setupEnterIntegration(){let e=this.editor,t=e.model,i=e.commands,o=i.get("enter");this.listenTo(e.editing.view.document,"enter",(r,s)=>{let a=t.document,l=a.selection.getFirstPosition().parent;if(a.selection.isCollapsed&&cn(l)&&l.isEmpty&&!s.isSoft){let c=wd(l),d=q9(l);c&&d?(e.execute("outdentList"),s.preventDefault(),r.stop()):c&&!d?(e.execute("splitListItemAfter"),s.preventDefault(),r.stop()):d&&(e.execute("splitListItemBefore"),s.preventDefault(),r.stop())}},{context:"li"}),this.listenTo(o,"afterExecute",()=>{let r=i.get("splitListItemBefore");if(r.refresh(),!r.isEnabled)return;let a=e.model.document.selection.getLastPosition().parent;vD(a).length===2&&r.execute()})}_setupTabIntegration(){let e=this.editor;this.listenTo(e.editing.view.document,"tab",(t,i)=>{let o=i.shiftKey?"outdentList":"indentList";this.editor.commands.get(o).isEnabled&&(e.execute(o),i.stopPropagation(),i.preventDefault(),t.stop())},{context:"li"})}_setupConversion(){let e=this.editor,t=e.model,i=this.getListAttributeNames(),o=e.config.get("list.multiBlock"),r=o?"paragraph":"listItem";e.conversion.for("upcast").elementToElement({view:"li",model:(a,{writer:l})=>l.createElement(r,{listType:""})}).elementToElement({view:"p",model:(a,{writer:l})=>a.parent&&a.parent.is("element","li")?l.createElement(r,{listType:""}):null,converterPriority:"high"}).add(a=>{a.on("element:li",ibe())}),o||e.conversion.for("downcast").elementToElement({model:"listItem",view:"p"}),e.conversion.for("editingDowncast").elementToElement({model:r,view:Q9(i),converterPriority:"high"}).add(a=>{a.on("attribute",K9(i,this._downcastStrategies,t)),a.on("remove",rbe(t.schema))}),e.conversion.for("dataDowncast").elementToElement({model:r,view:Q9(i,{dataPipeline:!0}),converterPriority:"high"}).add(a=>{a.on("attribute",K9(i,this._downcastStrategies,t,{dataPipeline:!0}))});let s=abe(this._downcastStrategies,e.editing.view);e.editing.mapper.on("modelToViewPosition",s),e.data.mapper.on("modelToViewPosition",s),this.listenTo(t.document,"change:data",obe(t,e.editing,i,this),{priority:"high"}),this.on("checkAttributes:item",(a,{viewElement:l,modelAttributes:c})=>{l.id!=c.listItemId&&(a.return=!0,a.stop())}),this.on("checkAttributes:list",(a,{viewElement:l,modelAttributes:c})=>{(l.name!=eH(c.listType)||l.id!=tH(c.listType,c.listIndent))&&(a.return=!0,a.stop())})}_setupModelPostFixing(){let e=this.editor.model,t=this.getListAttributeNames();e.document.registerPostFixer(i=>hbe(e,i,t,this)),this.on("postFixer",(i,{listNodes:o,writer:r})=>{i.return=tbe(o,r)||i.return},{priority:"high"}),this.on("postFixer",(i,{listNodes:o,writer:r,seenIds:s})=>{i.return=nbe(o,s,r)||i.return},{priority:"high"})}_setupClipboardIntegration(){let e=this.editor.model,t=this.editor.plugins.get("ClipboardPipeline");this.listenTo(e,"insertContent",mbe(e),{priority:"high"}),this.listenTo(t,"outputTransformation",(i,o)=>{e.change(r=>{let s=Array.from(o.content.getChildren()),a=s[s.length-1];if(s.length>1&&a.is("element")&&a.isEmpty&&s.slice(0,-1).every(cn)&&r.remove(a),o.method=="copy"||o.method=="cut"){let l=Array.from(o.content.getChildren());lb(l)&&B_(l,r)}})})}_setupAccessibilityIntegration(){let e=this.editor,t=e.t;e.accessibility.addKeystrokeInfoGroup({id:"list",label:t("Keystrokes that can be used in a list"),keystrokes:[{label:t("Increase list item indent"),keystroke:"Tab"},{label:t("Decrease list item indent"),keystroke:"Shift+Tab"}]})}};function hbe(n,e,t,i){let o=n.document.differ.getChanges(),r=new Map,s=i.editor.config.get("list.multiBlock"),a=!1;for(let c of o){if(c.type=="insert"&&c.name!="$text"){let d=c.position.nodeAfter;if(!n.schema.checkAttribute(d,"listItemId"))for(let f of Array.from(d.getAttributeKeys()))t.includes(f)&&(e.removeAttribute(f,d),a=!0);Wo(c.position,r),c.attributes.has("listItemId")||Wo(c.position.getShiftedBy(c.length),r);for(let{item:f,previousPosition:p}of n.createRangeIn(d))cn(f)&&Wo(p,r)}else c.type=="remove"?Wo(c.position,r):c.type=="attribute"&&t.includes(c.attributeKey)&&(Wo(c.range.start,r),c.attributeNewValue===null&&Wo(c.range.start.getShiftedBy(1),r));if(!s&&c.type=="attribute"&&N_.includes(c.attributeKey)){let d=c.range.start.nodeAfter;c.attributeNewValue===null&&d&&d.is("element","listItem")?(e.rename(d,"paragraph"),a=!0):c.attributeOldValue===null&&d&&d.is("element")&&d.name!="listItem"&&(e.rename(d,"listItem"),a=!0)}}let l=new Set;for(let c of r.values())a=i.fire("postFixer",{listNodes:new hD(c),listHead:c,writer:e,seenIds:l})||a;return a}function mbe(n){return(e,[t,i])=>{let o=t.is("documentFragment")?Array.from(t.getChildren()):[t];if(!o.length)return;let s=(i?n.createSelection(i):n.document.selection).getFirstPosition(),a;if(cn(s.parent))a=s.parent;else if(cn(s.nodeBefore))a=s.nodeBefore;else return;n.change(l=>{let c=a.getAttribute("listType"),d=a.getAttribute("listIndent"),f=o[0].getAttribute("listIndent")||0,p=Math.max(d-f,0);for(let g of o){let w=cn(g);a.is("element","listItem")&&g.is("element","paragraph")&&l.rename(g,"listItem"),l.setAttributes({listIndent:(w?g.getAttribute("listIndent"):0)+p,listItemId:w?g.getAttribute("listItemId"):fl.next(),listType:c},g)}})}}function Y9(n,e){let t=n.document.selection;if(!t.isCollapsed)return!cb(n);if(e==="forward")return!0;let o=t.getFirstPosition().parent,r=o.previousSibling;return n.schema.isObject(r)?!1:r.isEmpty?!0:lb([o,r])}function Z9(n,e,t,i){n.ui.componentFactory.add(e,()=>{let o=J9(oe,n,e,t,i);return o.set({tooltip:!0,isToggleable:!0}),o}),n.ui.componentFactory.add(`menuBar:${e}`,()=>{let o=J9(be,n,e,t,i);return o.set({role:"menuitemcheckbox",isToggleable:!0}),o})}function J9(n,e,t,i,o){let r=e.commands.get(t),s=new n(e.locale);return s.set({label:i,icon:o}),s.bind("isOn","isEnabled").to(r,"value","isEnabled"),s.on("execute",()=>{e.execute(t),e.editing.view.focus()}),s}var wD=class extends M{static get pluginName(){return"ListUI"}static get isOfficialPlugin(){return!0}init(){let e=this.editor.t;this.editor.ui.componentFactory.has("numberedList")||Z9(this.editor,"numberedList",e("Numbered List"),ee.numberedList),this.editor.ui.componentFactory.has("bulletedList")||Z9(this.editor,"bulletedList",e("Bulleted List"),ee.bulletedList)}},V_=class extends M{static get requires(){return[bD,wD]}static get pluginName(){return"List"}static get isOfficialPlugin(){return!0}};var fbe={},pbe={},gbe={},bbe=[{listStyle:"disc",typeAttribute:"disc",listType:"bulleted"},{listStyle:"circle",typeAttribute:"circle",listType:"bulleted"},{listStyle:"square",typeAttribute:"square",listType:"bulleted"},{listStyle:"decimal",typeAttribute:"1",listType:"numbered"},{listStyle:"decimal-leading-zero",typeAttribute:null,listType:"numbered"},{listStyle:"lower-roman",typeAttribute:"i",listType:"numbered"},{listStyle:"upper-roman",typeAttribute:"I",listType:"numbered"},{listStyle:"lower-alpha",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-alpha",typeAttribute:"A",listType:"numbered"},{listStyle:"lower-latin",typeAttribute:"a",listType:"numbered"},{listStyle:"upper-latin",typeAttribute:"A",listType:"numbered"}];for(let{listStyle:n,typeAttribute:e,listType:t}of bbe)fbe[n]=t,pbe[n]=e,e&&(gbe[e]=n);function dH(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var Nm=dH();function wbe(n){Nm=n}var kbe=/[&<>"']/,vbe=/[&<>"']/g,ybe=/[<>"']|&(?!#?\w+;)/,_be=/[<>"']|&(?!#?\w+;)/g,Cbe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oH=n=>Cbe[n];function gn(n,e){if(e){if(kbe.test(n))return n.replace(vbe,oH)}else if(ybe.test(n))return n.replace(_be,oH);return n}var Ebe=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function uH(n){return n.replace(Ebe,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var Sbe=/(^|[^\[])\^/g;function gt(n,e){n=n.source||n,e=e||"";let t={replace:(i,o)=>(o=o.source||o,o=o.replace(Sbe,"$1"),n=n.replace(i,o),t),getRegex:()=>new RegExp(n,e)};return t}var xbe=/[^\w:]/g,Abe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function rH(n,e,t){if(n){let i;try{i=decodeURIComponent(uH(t)).replace(xbe,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!Abe.test(t)&&(t=Dbe(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}var z_={},Tbe=/^[^:]+:\/*[^/]*$/,Ibe=/^([^:]+:)[\s\S]*$/,Mbe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Dbe(n,e){z_[" "+n]||(Tbe.test(n)?z_[" "+n]=n+"/":z_[" "+n]=H_(n,"/",!0)),n=z_[" "+n];let t=n.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:n.replace(Ibe,"$1")+e:e.charAt(0)==="/"?t?e:n.replace(Mbe,"$1")+e:n+e}var U_={exec:function(){}};function qo(n){let e=1,t,i;for(;e<arguments.length;e++){t=arguments[e];for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n}function sH(n,e){let t=n.replace(/\|/g,(r,s,a)=>{let l=!1,c=s;for(;--c>=0&&a[c]==="\\";)l=!l;return l?"|":" |"}),i=t.split(/ \|/),o=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;o<i.length;o++)i[o]=i[o].trim().replace(/\\\|/g,"|");return i}function H_(n,e,t){let i=n.length;if(i===0)return"";let o=0;for(;o<i;){let r=n.charAt(i-o-1);if(r===e&&!t)o++;else if(r!==e&&t)o++;else break}return n.substr(0,i-o)}function Pbe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=n.length,i=0,o=0;for(;o<t;o++)if(n[o]==="\\")o++;else if(n[o]===e[0])i++;else if(n[o]===e[1]&&(i--,i<0))return o;return-1}function hH(n){n&&n.sanitize&&!n.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function aH(n,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=n),e>>=1,n+=n;return t+n}function lH(n,e,t,i){let o=e.href,r=e.title?gn(e.title):null,s=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){i.state.inLink=!0;let a={type:"link",raw:t,href:o,title:r,text:s,tokens:i.inlineTokens(s,[])};return i.state.inLink=!1,a}else return{type:"image",raw:t,href:o,title:r,text:gn(s)}}function Rbe(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let i=t[1];return e.split(`
`).map(o=>{let r=o.match(/^\s+/);if(r===null)return o;let[s]=r;return s.length>=i.length?o.slice(i.length):o}).join(`
`)}var hb=class{constructor(e){this.options=e||Nm}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:H_(i,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let i=t[0],o=Rbe(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim():t[2],text:o}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){let r=H_(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}let o={type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:[]};return this.lexer.inline(o.text,o.tokens),o}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let i=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(i,[]),text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i,o,r,s,a,l,c,d,f,p,g,w,k=t[1].trim(),C=k.length>1,S={type:"list",raw:"",ordered:C,start:C?+k.slice(0,-1):"",loose:!1,items:[]};k=C?`\\d{1,9}\\${k.slice(-1)}`:`\\${k}`,this.options.pedantic&&(k=C?k:"[*+-]");let T=new RegExp(`^( {0,3}${k})((?: [^\\n]*)?(?:\\n|$))`);for(;e&&(w=!1,!(!(t=T.exec(e))||this.rules.block.hr.test(e)));){if(i=t[0],e=e.substring(i.length),d=t[2].split(`
`,1)[0],f=e.split(`
`,1)[0],this.options.pedantic?(s=2,g=d.trimLeft()):(s=t[2].search(/[^ ]/),s=s>4?1:s,g=d.slice(s),s+=t[1].length),l=!1,!d&&/^ *$/.test(f)&&(i+=f+`
`,e=e.substring(f.length+1),w=!0),!w){let K=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;e&&(p=e.split(`
`,1)[0],d=p,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!K.test(d));){if(d.search(/[^ ]/)>=s||!d.trim())g+=`
`+d.slice(s);else if(!l)g+=`
`+d;else break;!l&&!d.trim()&&(l=!0),i+=p+`
`,e=e.substring(p.length+1)}}S.loose||(c?S.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(o=/^\[[ xX]\] /.exec(g),o&&(r=o[0]!=="[ ] ",g=g.replace(/^\[[ xX]\] +/,""))),S.items.push({type:"list_item",raw:i,task:!!o,checked:r,loose:!1,text:g}),S.raw+=i}S.items[S.items.length-1].raw=i.trimRight(),S.items[S.items.length-1].text=g.trimRight(),S.raw=S.raw.trimRight();let V=S.items.length;for(a=0;a<V;a++){this.lexer.state.top=!1,S.items[a].tokens=this.lexer.blockTokens(S.items[a].text,[]);let K=S.items[a].tokens.filter(O=>O.type==="space"),de=K.every(O=>{let j=O.raw.split(""),z=0;for(let Ue of j)if(Ue===`
`&&(z+=1),z>1)return!0;return!1});!S.loose&&K.length&&de&&(S.loose=!0,S.items[a].loose=!0)}return S}}html(e){let t=this.rules.block.html.exec(e);if(t){let i={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(i.type="paragraph",i.text=this.options.sanitizer?this.options.sanitizer(t[0]):gn(t[0]),i.tokens=[],this.lexer.inline(i.text,i.tokens)),i}}def(e){let t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){let t=this.rules.block.table.exec(e);if(t){let i={type:"table",header:sH(t[1]).map(o=>({text:o})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=t[0];let o=i.align.length,r,s,a,l;for(r=0;r<o;r++)/^ *-+: *$/.test(i.align[r])?i.align[r]="right":/^ *:-+: *$/.test(i.align[r])?i.align[r]="center":/^ *:-+ *$/.test(i.align[r])?i.align[r]="left":i.align[r]=null;for(o=i.rows.length,r=0;r<o;r++)i.rows[r]=sH(i.rows[r],i.header.length).map(c=>({text:c}));for(o=i.header.length,s=0;s<o;s++)i.header[s].tokens=[],this.lexer.inlineTokens(i.header[s].text,i.header[s].tokens);for(o=i.rows.length,s=0;s<o;s++)for(l=i.rows[s],a=0;a<l.length;a++)l[a].tokens=[],this.lexer.inlineTokens(l[a].text,l[a].tokens);return i}}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t){let i={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let i={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}text(e){let t=this.rules.block.text.exec(e);if(t){let i={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:gn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):gn(t[0]):t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;let s=H_(i.slice(0,-1),"\\");if((i.length-s.length)%2===0)return}else{let s=Pbe(t[2],"()");if(s>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let o=t[2],r="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);s&&(o=s[1],r=s[3])}else r=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(i)?o=o.slice(1):o=o.slice(1,-1)),lH(t,{href:o&&o.replace(this.rules.inline._escapes,"$1"),title:r&&r.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let o=(i[2]||i[1]).replace(/\s+/g," ");if(o=t[o.toLowerCase()],!o||!o.href){let r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return lH(i,o,i[0],this.lexer)}}emStrong(e,t,i=""){let o=this.rules.inline.emStrong.lDelim.exec(e);if(!o||o[3]&&i.match(/[\p{L}\p{N}]/u))return;let r=o[1]||o[2]||"";if(!r||r&&(i===""||this.rules.inline.punctuation.exec(i))){let s=o[0].length-1,a,l,c=s,d=0,f=o[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+s);(o=f.exec(t))!=null;){if(a=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!a)continue;if(l=a.length,o[3]||o[4]){c+=l;continue}else if((o[5]||o[6])&&s%3&&!((s+l)%3)){d+=l;continue}if(c-=l,c>0)continue;if(l=Math.min(l,l+c+d),Math.min(s,l)%2){let g=e.slice(1,s+o.index+l);return{type:"em",raw:e.slice(0,s+o.index+l+1),text:g,tokens:this.lexer.inlineTokens(g,[])}}let p=e.slice(2,s+o.index+l-1);return{type:"strong",raw:e.slice(0,s+o.index+l+1),text:p,tokens:this.lexer.inlineTokens(p,[])}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," "),o=/[^ ]/.test(i),r=/^ /.test(i)&&/ $/.test(i);return o&&r&&(i=i.substring(1,i.length-1)),i=gn(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(e,t){let i=this.rules.inline.autolink.exec(e);if(i){let o,r;return i[2]==="@"?(o=gn(this.options.mangle?t(i[1]):i[1]),r="mailto:"+o):(o=gn(i[1]),r=o),{type:"link",raw:i[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}}url(e,t){let i;if(i=this.rules.inline.url.exec(e)){let o,r;if(i[2]==="@")o=gn(this.options.mangle?t(i[0]):i[0]),r="mailto:"+o;else{let s;do s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(s!==i[0]);o=gn(i[0]),i[1]==="www."?r="http://"+o:r=o}return{type:"link",raw:i[0],text:o,href:r,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(e,t){let i=this.rules.inline.text.exec(e);if(i){let o;return this.lexer.state.inRawBlock?o=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):gn(i[0]):i[0]:o=gn(this.options.smartypants?t(i[0]):i[0]),{type:"text",raw:i[0],text:o}}}},ce={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:U_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ce._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;ce._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;ce.def=gt(ce.def).replace("label",ce._label).replace("title",ce._title).getRegex();ce.bullet=/(?:[*+-]|\d{1,9}[.)])/;ce.listItemStart=gt(/^( *)(bull) */).replace("bull",ce.bullet).getRegex();ce.list=gt(ce.list).replace(/bull/g,ce.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ce.def.source+")").getRegex();ce._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";ce._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;ce.html=gt(ce.html,"i").replace("comment",ce._comment).replace("tag",ce._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();ce.paragraph=gt(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex();ce.blockquote=gt(ce.blockquote).replace("paragraph",ce.paragraph).getRegex();ce.normal=qo({},ce);ce.gfm=qo({},ce.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});ce.gfm.table=gt(ce.gfm.table).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex();ce.gfm.paragraph=gt(ce._paragraph).replace("hr",ce.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ce.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ce._tag).getRegex();ce.pedantic=qo({},ce.normal,{html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ce._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:U_,paragraph:gt(ce.normal._paragraph).replace("hr",ce.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ce.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Q={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:U_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:U_,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Q._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Q.punctuation=gt(Q.punctuation).replace(/punctuation/g,Q._punctuation).getRegex();Q.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Q.escapedEmSt=/\\\*|\\_/g;Q._comment=gt(ce._comment).replace("(?:-->|$)","-->").getRegex();Q.emStrong.lDelim=gt(Q.emStrong.lDelim).replace(/punct/g,Q._punctuation).getRegex();Q.emStrong.rDelimAst=gt(Q.emStrong.rDelimAst,"g").replace(/punct/g,Q._punctuation).getRegex();Q.emStrong.rDelimUnd=gt(Q.emStrong.rDelimUnd,"g").replace(/punct/g,Q._punctuation).getRegex();Q._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Q._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Q._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Q.autolink=gt(Q.autolink).replace("scheme",Q._scheme).replace("email",Q._email).getRegex();Q._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Q.tag=gt(Q.tag).replace("comment",Q._comment).replace("attribute",Q._attribute).getRegex();Q._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Q._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Q._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Q.link=gt(Q.link).replace("label",Q._label).replace("href",Q._href).replace("title",Q._title).getRegex();Q.reflink=gt(Q.reflink).replace("label",Q._label).replace("ref",ce._label).getRegex();Q.nolink=gt(Q.nolink).replace("ref",ce._label).getRegex();Q.reflinkSearch=gt(Q.reflinkSearch,"g").replace("reflink",Q.reflink).replace("nolink",Q.nolink).getRegex();Q.normal=qo({},Q);Q.pedantic=qo({},Q.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",Q._label).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Q._label).getRegex()});Q.gfm=qo({},Q.normal,{escape:gt(Q.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Q.gfm.url=gt(Q.gfm.url,"i").replace("email",Q.gfm._extended_email).getRegex();Q.breaks=qo({},Q.gfm,{br:gt(Q.br).replace("{2,}","*").getRegex(),text:gt(Q.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Nbe(n){return n.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function cH(n){let e="",t,i,o=n.length;for(t=0;t<o;t++)i=n.charCodeAt(t),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}var gl=class n{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Nm,this.options.tokenizer=this.options.tokenizer||new hb,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:ce.normal,inline:Q.normal};this.options.pedantic?(t.block=ce.pedantic,t.inline=Q.pedantic):this.options.gfm&&(t.block=ce.gfm,this.options.breaks?t.inline=Q.breaks:t.inline=Q.gfm),this.tokenizer.rules=t}static get rules(){return{block:ce,inline:Q}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(e,t=[]){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let i,o,r,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(i=a.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,l=e.slice(1),c;this.options.extensions.startBlock.forEach(function(d){c=d.call({lexer:this},l),typeof c=="number"&&c>=0&&(a=Math.min(a,c))}),a<1/0&&a>=0&&(r=e.substring(0,a+1))}if(this.state.top&&(i=this.tokenizer.paragraph(r))){o=t[t.length-1],s&&o.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i),s=r.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&o.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):t.push(i);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t){this.inlineQueue.push({src:e,tokens:t})}inlineTokens(e,t=[]){let i,o,r,s=e,a,l,c;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,a.index)+"["+aH("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,a.index)+"["+aH("a",a[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,a.index)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(i=d.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),o=t[t.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),o=t[t.length-1],o&&i.type==="text"&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,s,c)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e,cH)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,cH))){e=e.substring(i.raw.length),t.push(i);continue}if(r=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,f=e.slice(1),p;this.options.extensions.startInline.forEach(function(g){p=g.call({lexer:this},f),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(r=e.substring(0,d+1))}if(i=this.tokenizer.inlineText(r,Nbe)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,o=t[t.length-1],o&&o.type==="text"?(o.raw+=i.raw,o.text+=i.text):t.push(i);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},mb=class{constructor(e){this.options=e||Nm}code(e,t,i){let o=(t||"").match(/\S*/)[0];if(this.options.highlight){let r=this.options.highlight(e,o);r!=null&&r!==e&&(i=!0,e=r)}return e=e.replace(/\n$/,"")+`
`,o?'<pre><code class="'+this.options.langPrefix+gn(o,!0)+'">'+(i?e:gn(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:gn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,i,o){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+o.slug(i)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,i){let o=t?"ol":"ul",r=t&&i!==1?' start="'+i+'"':"";return"<"+o+r+`>
`+e+"</"+o+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){let i=t.header?"th":"td";return(t.align?"<"+i+' align="'+t.align+'">':"<"+i+">")+e+"</"+i+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,i){if(e=rH(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let o='<a href="'+gn(e)+'"';return t&&(o+=' title="'+t+'"'),o+=">"+i+"</a>",o}image(e,t,i){if(e=rH(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let o='<img src="'+e+'" alt="'+i+'"';return t&&(o+=' title="'+t+'"'),o+=this.options.xhtml?"/>":">",o}text(e){return e}},j_=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}},$_=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let i=e,o=0;if(this.seen.hasOwnProperty(i)){o=this.seen[e];do o++,i=e+"-"+o;while(this.seen.hasOwnProperty(i))}return t||(this.seen[e]=o,this.seen[i]=0),i}slug(e,t={}){let i=this.serialize(e);return this.getNextSafeSlug(i,t.dryrun)}},bl=class n{constructor(e){this.options=e||Nm,this.options.renderer=this.options.renderer||new mb,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new j_,this.slugger=new $_}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let i="",o,r,s,a,l,c,d,f,p,g,w,k,C,S,T,V,K,de,O,j=e.length;for(o=0;o<j;o++){if(g=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(O=this.options.extensions.renderers[g.type].call({parser:this},g),O!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(g.type))){i+=O||"";continue}switch(g.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(g.tokens),g.depth,uH(this.parseInline(g.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(g.text,g.lang,g.escaped);continue}case"table":{for(f="",d="",a=g.header.length,r=0;r<a;r++)d+=this.renderer.tablecell(this.parseInline(g.header[r].tokens),{header:!0,align:g.align[r]});for(f+=this.renderer.tablerow(d),p="",a=g.rows.length,r=0;r<a;r++){for(c=g.rows[r],d="",l=c.length,s=0;s<l;s++)d+=this.renderer.tablecell(this.parseInline(c[s].tokens),{header:!1,align:g.align[s]});p+=this.renderer.tablerow(d)}i+=this.renderer.table(f,p);continue}case"blockquote":{p=this.parse(g.tokens),i+=this.renderer.blockquote(p);continue}case"list":{for(w=g.ordered,k=g.start,C=g.loose,a=g.items.length,p="",r=0;r<a;r++)T=g.items[r],V=T.checked,K=T.task,S="",T.task&&(de=this.renderer.checkbox(V),C?T.tokens.length>0&&T.tokens[0].type==="paragraph"?(T.tokens[0].text=de+" "+T.tokens[0].text,T.tokens[0].tokens&&T.tokens[0].tokens.length>0&&T.tokens[0].tokens[0].type==="text"&&(T.tokens[0].tokens[0].text=de+" "+T.tokens[0].tokens[0].text)):T.tokens.unshift({type:"text",text:de}):S+=de),S+=this.parse(T.tokens,C),p+=this.renderer.listitem(S,K,V);i+=this.renderer.list(p,w,k);continue}case"html":{i+=this.renderer.html(g.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(g.tokens));continue}case"text":{for(p=g.tokens?this.parseInline(g.tokens):g.text;o+1<j&&e[o+1].type==="text";)g=e[++o],p+=`
`+(g.tokens?this.parseInline(g.tokens):g.text);i+=t?this.renderer.paragraph(p):p;continue}default:{let z='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(z);return}else throw new Error(z)}}}return i}parseInline(e,t){t=t||this.renderer;let i="",o,r,s,a=e.length;for(o=0;o<a;o++){if(r=e[o],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[r.type]&&(s=this.options.extensions.renderers[r.type].call({parser:this},r),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(r.type))){i+=s||"";continue}switch(r.type){case"escape":{i+=t.text(r.text);break}case"html":{i+=t.html(r.text);break}case"link":{i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{i+=t.image(r.href,r.title,r.text);break}case"strong":{i+=t.strong(this.parseInline(r.tokens,t));break}case"em":{i+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{i+=t.codespan(r.text);break}case"br":{i+=t.br();break}case"del":{i+=t.del(this.parseInline(r.tokens,t));break}case"text":{i+=t.text(r.text);break}default:{let l='Token with "'+r.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}};function pe(n,e,t){if(typeof n>"u"||n===null)throw new Error("marked(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=qo({},pe.defaults,e||{}),hH(e),t){let i=e.highlight,o;try{o=gl.lex(n,e)}catch(a){return t(a)}let r=function(a){let l;if(!a)try{e.walkTokens&&pe.walkTokens(o,e.walkTokens),l=bl.parse(o,e)}catch(c){a=c}return e.highlight=i,a?t(a):t(null,l)};if(!i||i.length<3||(delete e.highlight,!o.length))return r();let s=0;pe.walkTokens(o,function(a){a.type==="code"&&(s++,setTimeout(()=>{i(a.text,a.lang,function(l,c){if(l)return r(l);c!=null&&c!==a.text&&(a.text=c,a.escaped=!0),s--,s===0&&r()})},0))}),s===0&&r();return}try{let i=gl.lex(n,e);return e.walkTokens&&pe.walkTokens(i,e.walkTokens),bl.parse(i,e)}catch(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+gn(i.message+"",!0)+"</pre>";throw i}}pe.options=pe.setOptions=function(n){return qo(pe.defaults,n),wbe(pe.defaults),pe};pe.getDefaults=dH;pe.defaults=Nm;pe.use=function(...n){let e=qo({},...n),t=pe.defaults.extensions||{renderers:{},childTokens:{}},i;n.forEach(o=>{if(o.extensions&&(i=!0,o.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if(r.renderer){let s=t.renderers?t.renderers[r.name]:null;s?t.renderers[r.name]=function(...a){let l=r.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:t.renderers[r.name]=r.renderer}if(r.tokenizer){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[r.level]?t[r.level].unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}r.childTokens&&(t.childTokens[r.name]=r.childTokens)})),o.renderer){let r=pe.defaults.renderer||new mb;for(let s in o.renderer){let a=r[s];r[s]=(...l)=>{let c=o.renderer[s].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}e.renderer=r}if(o.tokenizer){let r=pe.defaults.tokenizer||new hb;for(let s in o.tokenizer){let a=r[s];r[s]=(...l)=>{let c=o.tokenizer[s].apply(r,l);return c===!1&&(c=a.apply(r,l)),c}}e.tokenizer=r}if(o.walkTokens){let r=pe.defaults.walkTokens;e.walkTokens=function(s){o.walkTokens.call(this,s),r&&r.call(this,s)}}i&&(e.extensions=t),pe.setOptions(e)})};pe.walkTokens=function(n,e){for(let t of n)switch(e.call(pe,t),t.type){case"table":{for(let i of t.header)pe.walkTokens(i.tokens,e);for(let i of t.rows)for(let o of i)pe.walkTokens(o.tokens,e);break}case"list":{pe.walkTokens(t.items,e);break}default:pe.defaults.extensions&&pe.defaults.extensions.childTokens&&pe.defaults.extensions.childTokens[t.type]?pe.defaults.extensions.childTokens[t.type].forEach(function(i){pe.walkTokens(t[i],e)}):t.tokens&&pe.walkTokens(t.tokens,e)}};pe.parseInline=function(n,e){if(typeof n>"u"||n===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof n!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected");e=qo({},pe.defaults,e||{}),hH(e);try{let t=gl.lexInline(n,e);return e.walkTokens&&pe.walkTokens(t,e.walkTokens),bl.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+gn(t.message+"",!0)+"</pre>";throw t}};pe.Parser=bl;pe.parser=bl.parse;pe.Renderer=mb;pe.TextRenderer=j_;pe.Lexer=gl;pe.lexer=gl.lex;pe.Tokenizer=hb;pe.Slugger=$_;pe.parse=pe;var sZe=pe.options,aZe=pe.setOptions,lZe=pe.use,cZe=pe.walkTokens,dZe=pe.parseInline;var uZe=bl.parse,hZe=gl.lex;function Obe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])}return n}function SD(n,e){return Array(e+1).join(n)}function Lbe(n){return n.replace(/^\n*/,"")}function Fbe(n){for(var e=n.length;e>0&&n[e-1]===`
`;)e--;return n.substring(0,e)}var Vbe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function AD(n){return TD(n,Vbe)}var pH=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function gH(n){return TD(n,pH)}function Bbe(n){return wH(n,pH)}var bH=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function zbe(n){return TD(n,bH)}function Hbe(n){return wH(n,bH)}function TD(n,e){return e.indexOf(n.nodeName)>=0}function wH(n,e){return n.getElementsByTagName&&e.some(function(t){return n.getElementsByTagName(t).length})}var Hn={};Hn.paragraph={filter:"p",replacement:function(n){return`

`+n+`

`}};Hn.lineBreak={filter:"br",replacement:function(n,e,t){return t.br+`
`}};Hn.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(n,e,t){var i=Number(e.nodeName.charAt(1));if(t.headingStyle==="setext"&&i<3){var o=SD(i===1?"=":"-",n.length);return`

`+n+`
`+o+`

`}else return`

`+SD("#",i)+" "+n+`

`}};Hn.blockquote={filter:"blockquote",replacement:function(n){return n=n.replace(/^\n+|\n+$/g,""),n=n.replace(/^/gm,"> "),`

`+n+`

`}};Hn.list={filter:["ul","ol"],replacement:function(n,e){var t=e.parentNode;return t.nodeName==="LI"&&t.lastElementChild===e?`
`+n:`

`+n+`

`}};Hn.listItem={filter:"li",replacement:function(n,e,t){n=n.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var i=t.bulletListMarker+"   ",o=e.parentNode;if(o.nodeName==="OL"){var r=o.getAttribute("start"),s=Array.prototype.indexOf.call(o.children,e);i=(r?Number(r)+s:s+1)+".  "}return i+n+(e.nextSibling&&!/\n$/.test(n)?`
`:"")}};Hn.indentedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="indented"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){return`

    `+e.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Hn.fencedCodeBlock={filter:function(n,e){return e.codeBlockStyle==="fenced"&&n.nodeName==="PRE"&&n.firstChild&&n.firstChild.nodeName==="CODE"},replacement:function(n,e,t){for(var i=e.firstChild.getAttribute("class")||"",o=(i.match(/language-(\S+)/)||[null,""])[1],r=e.firstChild.textContent,s=t.fence.charAt(0),a=3,l=new RegExp("^"+s+"{3,}","gm"),c;c=l.exec(r);)c[0].length>=a&&(a=c[0].length+1);var d=SD(s,a);return`

`+d+o+`
`+r.replace(/\n$/,"")+`
`+d+`

`}};Hn.horizontalRule={filter:"hr",replacement:function(n,e,t){return`

`+t.hr+`

`}};Hn.inlineLink={filter:function(n,e){return e.linkStyle==="inlined"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e){var t=e.getAttribute("href");t&&(t=t.replace(/([()])/g,"\\$1"));var i=W_(e.getAttribute("title"));return i&&(i=' "'+i.replace(/"/g,'\\"')+'"'),"["+n+"]("+t+i+")"}};Hn.referenceLink={filter:function(n,e){return e.linkStyle==="referenced"&&n.nodeName==="A"&&n.getAttribute("href")},replacement:function(n,e,t){var i=e.getAttribute("href"),o=W_(e.getAttribute("title"));o&&(o=' "'+o+'"');var r,s;switch(t.linkReferenceStyle){case"collapsed":r="["+n+"][]",s="["+n+"]: "+i+o;break;case"shortcut":r="["+n+"]",s="["+n+"]: "+i+o;break;default:var a=this.references.length+1;r="["+n+"]["+a+"]",s="["+a+"]: "+i+o}return this.references.push(s),r},references:[],append:function(n){var e="";return this.references.length&&(e=`

`+this.references.join(`
`)+`

`,this.references=[]),e}};Hn.emphasis={filter:["em","i"],replacement:function(n,e,t){return n.trim()?t.emDelimiter+n+t.emDelimiter:""}};Hn.strong={filter:["strong","b"],replacement:function(n,e,t){return n.trim()?t.strongDelimiter+n+t.strongDelimiter:""}};Hn.code={filter:function(n){var e=n.previousSibling||n.nextSibling,t=n.parentNode.nodeName==="PRE"&&!e;return n.nodeName==="CODE"&&!t},replacement:function(n){if(!n)return"";n=n.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(n)?" ":"",t="`",i=n.match(/`+/gm)||[];i.indexOf(t)!==-1;)t=t+"`";return t+e+n+e+t}};Hn.image={filter:"img",replacement:function(n,e){var t=W_(e.getAttribute("alt")),i=e.getAttribute("src")||"",o=W_(e.getAttribute("title")),r=o?' "'+o+'"':"";return i?"!["+t+"]("+i+r+")":""}};function W_(n){return n?n.replace(/(\n+\s*)+/g,`
`):""}function kH(n){this.options=n,this._keep=[],this._remove=[],this.blankRule={replacement:n.blankReplacement},this.keepReplacement=n.keepReplacement,this.defaultRule={replacement:n.defaultReplacement},this.array=[];for(var e in n.rules)this.array.push(n.rules[e])}kH.prototype={add:function(n,e){this.array.unshift(e)},keep:function(n){this._keep.unshift({filter:n,replacement:this.keepReplacement})},remove:function(n){this._remove.unshift({filter:n,replacement:function(){return""}})},forNode:function(n){if(n.isBlank)return this.blankRule;var e;return(e=_D(this.array,n,this.options))||(e=_D(this._keep,n,this.options))||(e=_D(this._remove,n,this.options))?e:this.defaultRule},forEach:function(n){for(var e=0;e<this.array.length;e++)n(this.array[e],e)}};function _D(n,e,t){for(var i=0;i<n.length;i++){var o=n[i];if(Ube(o,e,t))return o}}function Ube(n,e,t){var i=n.filter;if(typeof i=="string"){if(i===e.nodeName.toLowerCase())return!0}else if(Array.isArray(i)){if(i.indexOf(e.nodeName.toLowerCase())>-1)return!0}else if(typeof i=="function"){if(i.call(n,e,t))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function jbe(n){var e=n.element,t=n.isBlock,i=n.isVoid,o=n.isPre||function(f){return f.nodeName==="PRE"};if(!(!e.firstChild||o(e))){for(var r=null,s=!1,a=null,l=mH(a,e,o);l!==e;){if(l.nodeType===3||l.nodeType===4){var c=l.data.replace(/[ \r\n\t]+/g," ");if((!r||/ $/.test(r.data))&&!s&&c[0]===" "&&(c=c.substr(1)),!c){l=CD(l);continue}l.data=c,r=l}else if(l.nodeType===1)t(l)||l.nodeName==="BR"?(r&&(r.data=r.data.replace(/ $/,"")),r=null,s=!1):i(l)||o(l)?(r=null,s=!0):r&&(s=!1);else{l=CD(l);continue}var d=mH(a,l,o);a=l,l=d}r&&(r.data=r.data.replace(/ $/,""),r.data||CD(r))}}function CD(n){var e=n.nextSibling||n.parentNode;return n.parentNode.removeChild(n),e}function mH(n,e,t){return n&&n.parentNode===e||t(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}var ID=typeof window<"u"?window:{};function $be(){var n=ID.DOMParser,e=!1;try{new n().parseFromString("","text/html")&&(e=!0)}catch{}return e}function Wbe(){var n=function(){};return qbe()?n.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:n.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},n}function qbe(){var n=!1;try{document.implementation.createHTMLDocument("").open()}catch{ID.ActiveXObject&&(n=!0)}return n}var Gbe=$be()?ID.DOMParser:Wbe();function Kbe(n,e){var t;if(typeof n=="string"){var i=Qbe().parseFromString('<x-turndown id="turndown-root">'+n+"</x-turndown>","text/html");t=i.getElementById("turndown-root")}else t=n.cloneNode(!0);return jbe({element:t,isBlock:AD,isVoid:gH,isPre:e.preformattedCode?Ybe:null}),t}var ED;function Qbe(){return ED=ED||new Gbe,ED}function Ybe(n){return n.nodeName==="PRE"||n.nodeName==="CODE"}function Zbe(n,e){return n.isBlock=AD(n),n.isCode=n.nodeName==="CODE"||n.parentNode.isCode,n.isBlank=Jbe(n),n.flankingWhitespace=Xbe(n,e),n}function Jbe(n){return!gH(n)&&!zbe(n)&&/^\s*$/i.test(n.textContent)&&!Bbe(n)&&!Hbe(n)}function Xbe(n,e){if(n.isBlock||e.preformattedCode&&n.isCode)return{leading:"",trailing:""};var t=ewe(n.textContent);return t.leadingAscii&&fH("left",n,e)&&(t.leading=t.leadingNonAscii),t.trailingAscii&&fH("right",n,e)&&(t.trailing=t.trailingNonAscii),{leading:t.leading,trailing:t.trailing}}function ewe(n){var e=n.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:e[1],leadingAscii:e[2],leadingNonAscii:e[3],trailing:e[4],trailingNonAscii:e[5],trailingAscii:e[6]}}function fH(n,e,t){var i,o,r;return n==="left"?(i=e.previousSibling,o=/ $/):(i=e.nextSibling,o=/^ /),i&&(i.nodeType===3?r=o.test(i.nodeValue):t.preformattedCode&&i.nodeName==="CODE"?r=!1:i.nodeType===1&&!AD(i)&&(r=o.test(i.textContent))),r}var twe=Array.prototype.reduce,nwe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function xD(n){if(!(this instanceof xD))return new xD(n);var e={rules:Hn,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,i){return i.isBlock?`

`:""},keepReplacement:function(t,i){return i.isBlock?`

`+i.outerHTML+`

`:i.outerHTML},defaultReplacement:function(t,i){return i.isBlock?`

`+t+`

`:t}};this.options=Obe({},e,n),this.rules=new kH(this.options)}xD.prototype={turndown:function(n){if(!rwe(n))throw new TypeError(n+" is not a string, or an element/document/fragment node.");if(n==="")return"";var e=vH.call(this,new Kbe(n,this.options));return iwe.call(this,e)},use:function(n){if(Array.isArray(n))for(var e=0;e<n.length;e++)this.use(n[e]);else if(typeof n=="function")n(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(n,e){return this.rules.add(n,e),this},keep:function(n){return this.rules.keep(n),this},remove:function(n){return this.rules.remove(n),this},escape:function(n){return nwe.reduce(function(e,t){return e.replace(t[0],t[1])},n)}};function vH(n){var e=this;return twe.call(n.childNodes,function(t,i){i=new Zbe(i,e.options);var o="";return i.nodeType===3?o=i.isCode?i.nodeValue:e.escape(i.nodeValue):i.nodeType===1&&(o=owe.call(e,i)),yH(t,o)},"")}function iwe(n){var e=this;return this.rules.forEach(function(t){typeof t.append=="function"&&(n=yH(n,t.append(e.options)))}),n.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function owe(n){var e=this.rules.forNode(n),t=vH.call(this,n),i=n.flankingWhitespace;return(i.leading||i.trailing)&&(t=t.trim()),i.leading+e.replacement(t,n,this.options)+i.trailing}function yH(n,e){var t=Fbe(n),i=Lbe(e),o=Math.max(n.length-t.length,e.length-i.length),r=`

`.substring(0,o);return t+r+i}function rwe(n){return n!=null&&(typeof n=="string"||n.nodeType&&(n.nodeType===1||n.nodeType===9||n.nodeType===11))}var swe=Array.prototype.indexOf,awe=Array.prototype.every,q_={};q_.tableCell={filter:["th","td"],replacement:function(n,e){return CH(n,e)}};q_.tableRow={filter:"tr",replacement:function(n,e){var t="",i={left:":--",right:"--:",center:":-:"};if(_H(e))for(var o=0;o<e.childNodes.length;o++){var r="---",s=(e.childNodes[o].getAttribute("align")||"").toLowerCase();s&&(r=i[s]||r),t+=CH(r,e.childNodes[o])}return`
`+n+(t?`
`+t:"")}};q_.table={filter:function(n){return n.nodeName==="TABLE"&&_H(n.rows[0])},replacement:function(n){return n=n.replace(`

`,`
`),`

`+n+`

`}};q_.tableSection={filter:["thead","tbody","tfoot"],replacement:function(n){return n}};function _H(n){var e=n.parentNode;return e.nodeName==="THEAD"||e.firstChild===n&&(e.nodeName==="TABLE"||lwe(e))&&awe.call(n.childNodes,function(t){return t.nodeName==="TH"})}function lwe(n){var e=n.previousSibling;return n.nodeName==="TBODY"&&(!e||e.nodeName==="THEAD"&&/^\s*$/i.test(e.textContent))}function CH(n,e){var t=swe.call(e.parentNode.childNodes,e),i=" ";return t===0&&(i="| "),i+n+" |"}var EZe=new RegExp(/\b(?:(?:https?|ftp):\/\/|www\.)/.source+/(?![-_])(?:[-_a-z0-9\u00a1-\uffff]{1,63}\.)+(?:[a-z\u00a1-\uffff]{2,63})/.source+/(?:[^\s<>]*)/.source,"gi");function EH(n,e){let t=(i,o,r)=>{if(!r.consumable.consume(o.item,i.name))return;let s=o.attributeNewValue,a=r.writer,l=r.mapper.toViewElement(o.item),c=[...l.getChildren()].find(f=>f.getCustomProperty("media-content"));a.remove(c);let d=n.getMediaViewElement(a,s,e);a.insert(a.createPositionAt(l,0),d)};return i=>{i.on("attribute:url:media",t)}}function cwe(n,e,t){return e.setCustomProperty("media",!0,n),$o(n,e,{label:t})}function SH(n,e,t,i){return n.createContainerElement("figure",{class:"media"},[e.getMediaViewElement(n,t,i),n.createSlot()])}function xH(n){let e=n.getSelectedElement();return e&&e.is("element","media")?e:null}function AH(n,e,t,i){n.change(o=>{let r=o.createElement("media",{url:e});n.insertObject(r,t,null,{setSelection:"on",findOptimalPosition:i?"auto":void 0})})}var MD=class extends te{refresh(){let e=this.editor.model,t=e.document.selection,i=xH(t);this.value=i?i.getAttribute("url"):void 0,this.isEnabled=uwe(t)||dwe(t,e)}execute(e){let t=this.editor.model,i=t.document.selection,o=xH(i);o?t.change(r=>{r.setAttribute("url",e,o)}):AH(t,e,i,!0)}};function dwe(n,e){let i=md(n,e).start.parent;return i.isEmpty&&!e.schema.isLimit(i)&&(i=i.parent),e.schema.checkChild(i,"media")}function uwe(n){let e=n.getSelectedElement();return!!e&&e.name==="media"}var hwe='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>',mwe="0 0 64 42",DD=class{locale;providerDefinitions;constructor(e,t){let i=t.providers,o=t.extraProviders||[],r=new Set(t.removeProviders),s=i.concat(o).filter(a=>{let l=a.name;return l?!r.has(l):(Ve("media-embed-no-provider-name",{provider:a}),!1)});this.locale=e,this.providerDefinitions=s}hasMedia(e){return!!this._getMedia(e)}getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i)}_getMedia(e){if(!e)return new G_(this.locale);e=e.trim();for(let t of this.providerDefinitions){let i=t.html,o=$e(t.url);for(let r of o){let s=this._getUrlMatches(e,r);if(s)return new G_(this.locale,e,s,i)}}return null}_getUrlMatches(e,t){let i=e.match(t);if(i)return i;let o=e.replace(/^https?:\/\//,"");return i=o.match(t),i||(o=o.replace(/^www\./,""),i=o.match(t),i)?i:null}},G_=class{url;_locale;_match;_previewRenderer;constructor(e,t,i,o){this.url=this._getValidUrl(t),this._locale=e,this._match=i,this._previewRenderer=o}getViewElement(e,t){let i={},o;if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){this.url&&(i["data-oembed-url"]=this.url),t.renderForEditingView&&(i.class="ck-media__wrapper");let r=this._getPreviewHtml(t);o=e.createRawElement("div",i,(s,a)=>{a.setContentOf(s,r)})}else this.url&&(i.url=this.url),o=e.createEmptyElement(t.elementName,i);return e.setCustomProperty("media-content",!0,o),o}_getPreviewHtml(e){return this._previewRenderer?this._previewRenderer(this._match):this.url&&e.renderForEditingView?this._getPlaceholderHtml():""}_getPlaceholderHtml(){let e=new Ir,t=this._locale.t;return e.content=hwe,e.viewBox=mwe,new Ln({tag:"div",attributes:{class:"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{class:"ck-media__placeholder__icon"},children:[e]},{tag:"a",attributes:{class:"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url,"data-cke-tooltip-text":t("Open media in new tab")},children:[{tag:"span",attributes:{class:"ck-media__placeholder__url__text"},children:[this.url]}]}]}).render().outerHTML}_getValidUrl(e){return e?e.match(/^https?/)?e:"https://"+e:null}},Om=class extends M{static get pluginName(){return"MediaEmbedEditing"}static get isOfficialPlugin(){return!0}registry;constructor(e){super(e),e.config.define("mediaEmbed",{elementName:"oembed",providers:[{name:"dailymotion",url:[/^dailymotion\.com\/video\/(\w+)/,/^dai.ly\/(\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; "><iframe src="https://www.dailymotion.com/embed/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" width="480" height="270" allowfullscreen allow="autoplay"></iframe></div>`},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;"><iframe src="https://open.spotify.com/embed/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe></div>`},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)(?:&t=(\d+))?/,/^(?:m\.)?youtube\.com\/shorts\/([\w-]+)(?:\?t=(\d+))?/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)(?:\?t=(\d+))?/,/^youtube\.com\/embed\/([\w-]+)(?:\?start=(\d+))?/,/^youtu\.be\/([\w-]+)(?:\?t=(\d+))?/],html:t=>{let i=t[1],o=t[2];return`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://www.youtube.com/embed/${i}${o?`?start=${o}`:""}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe></div>`}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:t=>`<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;"><iframe src="https://player.vimeo.com/video/${t[1]}" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>`},{name:"instagram",url:[/^instagram\.com\/p\/(\w+)/,/^instagram\.com\/reel\/(\w+)/]},{name:"twitter",url:[/^twitter\.com/,/^x\.com/]},{name:"googleMaps",url:[/^google\.com\/maps/,/^goo\.gl\/maps/,/^maps\.google\.com/,/^maps\.app\.goo\.gl/]},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]}),this.registry=new DD(e.locale,e.config.get("mediaEmbed"))}init(){let e=this.editor,t=e.model.schema,i=e.t,o=e.conversion,r=e.config.get("mediaEmbed.previewsInData"),s=e.config.get("mediaEmbed.elementName"),a=this.registry;e.commands.add("mediaEmbed",new MD(e)),t.register("media",{inheritAllFrom:"$blockObject",allowAttributes:["url"]}),o.for("dataDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{let d=l.getAttribute("url");return SH(c,a,d,{elementName:s,renderMediaPreview:!!d&&r})}}),o.for("dataDowncast").add(EH(a,{elementName:s,renderMediaPreview:r})),o.for("editingDowncast").elementToStructure({model:"media",view:(l,{writer:c})=>{let d=l.getAttribute("url"),f=SH(c,a,d,{elementName:s,renderForEditingView:!0});return cwe(f,c,i("media widget"))}}),o.for("editingDowncast").add(EH(a,{elementName:s,renderForEditingView:!0})),o.for("upcast").elementToElement({view:l=>["oembed",s].includes(l.name)&&l.getAttribute("url")?{name:!0}:null,model:(l,{writer:c})=>{let d=l.getAttribute("url");return a.hasMedia(d)?c.createElement("media",{url:d}):null}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":!0}},model:(l,{writer:c})=>{let d=l.getAttribute("data-oembed-url");return a.hasMedia(d)?c.createElement("media",{url:d}):null}}).add(l=>{let c=(d,f,p)=>{if(!p.consumable.consume(f.viewItem,{name:!0,classes:"media"}))return;let{modelRange:g,modelCursor:w}=p.convertChildren(f.viewItem,f.modelCursor);f.modelRange=g,f.modelCursor=w,lt(g.getItems())||p.consumable.revert(f.viewItem,{name:!0,classes:"media"})};l.on("element:figure",c)})}},fwe=/^(?:http(s)?:\/\/)?[\w-]+\.[\w-.~:/?#[\]@!$&'()*+,;=%]+$/,PD=class extends M{static get requires(){return[pd,zn,Fs]}static get pluginName(){return"AutoMediaEmbed"}static get isOfficialPlugin(){return!0}_timeoutId;_positionToInsert;constructor(e){super(e),this._timeoutId=null,this._positionToInsert=null}init(){let e=this.editor,t=e.model.document,i=e.plugins.get("ClipboardPipeline");this.listenTo(i,"inputTransformation",()=>{let r=t.selection.getFirstRange(),s=Kt.fromPosition(r.start);s.stickiness="toPrevious";let a=Kt.fromPosition(r.end);a.stickiness="toNext",t.once("change:data",()=>{this._embedMediaBetweenPositions(s,a),s.detach(),a.detach()},{priority:"high"})}),e.commands.get("undo").on("execute",()=>{this._timeoutId&&(U.window.clearTimeout(this._timeoutId),this._positionToInsert.detach(),this._timeoutId=null,this._positionToInsert=null)},{priority:"high"})}_embedMediaBetweenPositions(e,t){let i=this.editor,o=i.plugins.get(Om).registry,r=new pn(e,t),s=r.getWalker({ignoreElementEnd:!0}),a="";for(let c of s)c.item.is("$textProxy")&&(a+=c.item.data);if(a=a.trim(),!a.match(fwe)){r.detach();return}if(!o.hasMedia(a)){r.detach();return}if(!i.commands.get("mediaEmbed").isEnabled){r.detach();return}this._positionToInsert=Kt.fromPosition(e),this._timeoutId=U.window.setTimeout(()=>{i.model.change(c=>{this._timeoutId=null,c.remove(r),r.detach();let d=null;this._positionToInsert.root.rootName!=="$graveyard"&&(d=this._positionToInsert),AH(i.model,a,d,!1),this._positionToInsert.detach(),this._positionToInsert=null}),i.plugins.get(zn).requestUndoOnBackspace()},100)}},RD=class extends Y{focusTracker;keystrokes;urlInputView;_validators;_urlInputViewInfoDefault;_urlInputViewInfoTip;constructor(e,t){super(t),this.focusTracker=new Et,this.keystrokes=new Ft,this.set("mediaURLInputValue",""),this.urlInputView=this._createUrlInput(),this._validators=e,this.setTemplate({tag:"form",attributes:{class:["ck","ck-media-form","ck-responsive-form"],tabindex:"-1"},children:[this.urlInputView]})}render(){super.render(),dd({view:this}),this.focusTracker.add(this.urlInputView.element),this.keystrokes.listenTo(this.element)}destroy(){super.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy()}focus(){this.urlInputView.focus()}get url(){return this.urlInputView.fieldView.element.value.trim()}set url(e){this.urlInputView.fieldView.value=e.trim()}isValid(){this.resetFormStatus();for(let e of this._validators){let t=e(this);if(t)return this.urlInputView.errorText=t,!1}return!0}resetFormStatus(){this.urlInputView.errorText=null,this.urlInputView.infoText=this._urlInputViewInfoDefault}_createUrlInput(){let e=this.locale.t,t=new Ho(this.locale,ud),i=t.fieldView;return this._urlInputViewInfoDefault=e("Paste the media URL in the input."),this._urlInputViewInfoTip=e("Tip: Paste the URL into the content to embed faster."),t.label=e("Media URL"),t.infoText=this._urlInputViewInfoDefault,i.inputMode="url",i.on("input",()=>{t.infoText=i.element.value?this._urlInputViewInfoTip:this._urlInputViewInfoDefault,this.mediaURLInputValue=i.element.value.trim()}),t}},pwe='<svg viewBox="0 0 22 20" xmlns="http://www.w3.org/2000/svg"><path d="M1.587 1.5c-.612 0-.601-.029-.601.551v14.84c0 .59-.01.559.591.559h18.846c.602 0 .591.03.591-.56V2.052c0-.58.01-.55-.591-.55H1.587Zm.701.971h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-14.24 1h13.008v12H4.467l.029-12Zm-2.208 1h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003v1H2.288v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h1.003l-.029 1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Zm-16.448 2h.974v1h-.974v-1Zm16.448 0h1.003v1h-1.003v-1Z"/><path d="M8.374 6.648a.399.399 0 0 1 .395-.4.402.402 0 0 1 .2.049l5.148 2.824a.4.4 0 0 1 0 .7l-5.148 2.824a.403.403 0 0 1-.595-.35V6.648Z"/></svg>',ND=class extends M{static get requires(){return[Om,wm]}static get pluginName(){return"MediaEmbedUI"}static get isOfficialPlugin(){return!0}_formView;init(){let e=this.editor;e.ui.componentFactory.add("mediaEmbed",()=>{let t=this.editor.locale.t,i=this._createDialogButton(oe);return i.tooltip=!0,i.label=t("Insert media"),i}),e.ui.componentFactory.add("menuBar:mediaEmbed",()=>{let t=this.editor.locale.t,i=this._createDialogButton(be);return i.label=t("Media"),i})}_createDialogButton(e){let t=this.editor,i=new e(t.locale),o=t.commands.get("mediaEmbed"),r=this.editor.plugins.get("Dialog");return i.icon=pwe,i.bind("isEnabled").to(o,"isEnabled"),i.on("execute",()=>{r.id==="mediaEmbed"?r.hide():this._showDialog()}),i}_showDialog(){let e=this.editor,t=e.plugins.get("Dialog"),i=e.commands.get("mediaEmbed"),o=e.locale.t;if(!this._formView){let r=e.plugins.get(Om).registry;this._formView=new(bm(RD))(gwe(e.t,r),e.locale),this._formView.on("submit",()=>this._handleSubmitForm())}t.show({id:"mediaEmbed",title:o("Insert media"),content:this._formView,isModal:!0,onShow:()=>{this._formView.url=i.value||"",this._formView.resetFormStatus(),this._formView.urlInputView.fieldView.select()},actionButtons:[{label:o("Cancel"),withText:!0,onExecute:()=>t.hide()},{label:o("Accept"),class:"ck-button-action",withText:!0,onExecute:()=>this._handleSubmitForm()}]})}_handleSubmitForm(){let e=this.editor,t=e.plugins.get("Dialog");this._formView.isValid()&&(e.execute("mediaEmbed",this._formView.url),t.hide(),e.editing.view.focus())}};function gwe(n,e){return[t=>{if(!t.url.length)return n("The URL must not be empty.")},t=>{if(!e.hasMedia(t.url))return n("This media URL is not supported.")}]}var K_=class extends M{static get requires(){return[Om,ND,PD,Ei]}static get pluginName(){return"MediaEmbed"}static get isOfficialPlugin(){return!0}};var BZe=[_e.arrowup,_e.arrowdown,_e.esc],zZe=[_e.enter,_e.tab];function bwe(n){let e=[{name:"address",isVoid:!1},{name:"article",isVoid:!1},{name:"aside",isVoid:!1},{name:"blockquote",isVoid:!1},{name:"details",isVoid:!1},{name:"dialog",isVoid:!1},{name:"dd",isVoid:!1},{name:"div",isVoid:!1},{name:"dl",isVoid:!1},{name:"dt",isVoid:!1},{name:"fieldset",isVoid:!1},{name:"figcaption",isVoid:!1},{name:"figure",isVoid:!1},{name:"footer",isVoid:!1},{name:"form",isVoid:!1},{name:"h1",isVoid:!1},{name:"h2",isVoid:!1},{name:"h3",isVoid:!1},{name:"h4",isVoid:!1},{name:"h5",isVoid:!1},{name:"h6",isVoid:!1},{name:"header",isVoid:!1},{name:"hgroup",isVoid:!1},{name:"hr",isVoid:!0},{name:"li",isVoid:!1},{name:"main",isVoid:!1},{name:"nav",isVoid:!1},{name:"ol",isVoid:!1},{name:"p",isVoid:!1},{name:"section",isVoid:!1},{name:"table",isVoid:!1},{name:"tbody",isVoid:!1},{name:"td",isVoid:!1},{name:"th",isVoid:!1},{name:"thead",isVoid:!1},{name:"tr",isVoid:!1},{name:"ul",isVoid:!1}],t=e.map(s=>s.name).join("|"),i=n.replace(new RegExp(`</?(${t})( .*?)?>`,"g"),`
$&
`).replace(/<br[^>]*>/g,`$&
`).split(`
`),o=0,r=!1;return i.filter(s=>s.length).map(s=>(r=vwe(s,r),wwe(s,e)?OD(s,o++):kwe(s,e)?OD(s,--o):r==="middle"||r==="last"?s:OD(s,o))).join(`
`)}function wwe(n,e){return e.some(t=>!(t.isVoid||!new RegExp(`<${t.name}( .*?)?>`).test(n)))}function kwe(n,e){return e.some(t=>new RegExp(`</${t.name}>`).test(n))}function OD(n,e,t="    "){return`${t.repeat(Math.max(0,e))}${n}`}function vwe(n,e){return new RegExp("<pre( .*?)?>").test(n)?"first":new RegExp("</pre>").test(n)?"last":e==="first"||e==="middle"?"middle":!1}var ywe='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z"/><path d="M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z"/></svg>',Q_="SourceEditingMode",Y_=class extends M{static get pluginName(){return"SourceEditing"}static get isOfficialPlugin(){return!0}static get requires(){return[nl]}_elementReplacer;_replacedRoots;_dataFromRoots;constructor(e){super(e),this.set("isSourceEditingMode",!1),this._elementReplacer=new $h,this._replacedRoots=new Map,this._dataFromRoots=new Map,e.config.define("sourceEditing.allowCollaborationFeatures",!1)}init(){this._checkCompatibility();let e=this.editor,t=e.locale.t;e.ui.componentFactory.add("sourceEditing",()=>{let i=this._createButton(oe);return i.set({label:t("Source"),icon:ywe,tooltip:!0,class:"ck-source-editing-button"}),i}),e.ui.componentFactory.add("menuBar:sourceEditing",()=>{let i=this._createButton(be);return i.set({label:t("Show source"),role:"menuitemcheckbox"}),i}),this._isAllowedToHandleSourceEditingMode()&&(this.on("change:isSourceEditingMode",(i,o,r)=>{r?(this._hideVisibleDialog(),this._showSourceEditing(),this._disableCommands()):(this._hideSourceEditing(),this._enableCommands())}),this.on("change:isEnabled",(i,o,r)=>this._handleReadOnlyMode(!r)),this.listenTo(e,"change:isReadOnly",(i,o,r)=>this._handleReadOnlyMode(r))),e.data.on("get",()=>{this.isSourceEditingMode&&this.updateEditorData()},{priority:"high"})}updateEditorData(){let e=this.editor,t={};for(let[i,o]of this._replacedRoots){let r=this._dataFromRoots.get(i),s=o.dataset.value;r!==s&&(t[i]=s,this._dataFromRoots.set(i,s))}Object.keys(t).length&&e.data.set(t,{batchType:{isUndoable:!0},suppressErrorInCollaboration:!0})}_checkCompatibility(){let e=this.editor,t=e.config.get("sourceEditing.allowCollaborationFeatures");if(!t&&e.plugins.has("RealTimeCollaborativeEditing"))throw new _("source-editing-incompatible-with-real-time-collaboration",null);!t&&["CommentsEditing","TrackChangesEditing","RevisionHistory"].some(o=>e.plugins.has(o))&&console.warn("You initialized the editor with the source editing feature and at least one of the collaboration features. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the collaboration features."),e.plugins.has("RestrictedEditingModeEditing")&&console.warn("You initialized the editor with the source editing feature and restricted editing feature. Please be advised that the source editing feature may not work, and be careful when editing document source that contains markers created by the restricted editing feature.")}_showSourceEditing(){let e=this.editor,t=e.editing.view,i=e.model;i.change(o=>{o.setSelection(null),o.removeSelectionAttribute(i.document.selection.getAttributeKeys())});for(let[o,r]of t.domRoots){let s=_we(e.data.get({rootName:o})),a=Dt(r.ownerDocument,"textarea",{rows:"1","aria-label":"Source code editing area"}),l=Dt(r.ownerDocument,"div",{class:"ck-source-editing-area","data-value":s},[a]);a.value=s,a.setSelectionRange(0,0),a.addEventListener("input",()=>{l.dataset.value=a.value,e.ui.update()}),t.change(c=>{let d=t.document.getRoot(o);c.addClass("ck-hidden",d)}),e.ui.setEditableElement("sourceEditing:"+o,a),this._replacedRoots.set(o,l),this._elementReplacer.replace(r,l),this._dataFromRoots.set(o,s)}this._focusSourceEditing()}_hideSourceEditing(){let t=this.editor.editing.view;this.updateEditorData(),t.change(i=>{for(let[o]of this._replacedRoots)i.removeClass("ck-hidden",t.document.getRoot(o))}),this._elementReplacer.restore(),this._replacedRoots.clear(),this._dataFromRoots.clear(),t.focus()}_focusSourceEditing(){let e=this.editor,[t]=this._replacedRoots.values(),i=t.querySelector("textarea");e.editing.view.document.isFocused=!1,i.focus()}_disableCommands(){let e=this.editor;for(let t of e.commands.commands())t.forceDisabled(Q_);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").forceDisabled(Q_)}_enableCommands(){let e=this.editor;for(let t of e.commands.commands())t.clearForceDisabled(Q_);e.plugins.has("CommentsArchiveUI")&&e.plugins.get("CommentsArchiveUI").clearForceDisabled(Q_)}_handleReadOnlyMode(e){if(this.isSourceEditingMode)for(let[,t]of this._replacedRoots)t.querySelector("textarea").readOnly=e}_isAllowedToHandleSourceEditingMode(){let t=this.editor.ui.view.editable;return t&&!t.hasExternalElement}_hideVisibleDialog(){if(this.editor.plugins.has("Dialog")){let e=this.editor.plugins.get("Dialog");e.isOpen&&e.hide()}}_createButton(e){let t=this.editor,i=new e(t.locale);return i.set({withText:!0,isToggleable:!0}),i.bind("isOn").to(this,"isSourceEditingMode"),i.bind("isEnabled").to(this,"isEnabled",t,"isReadOnly",t.plugins.get(nl),"hasAny",(o,r,s)=>!(!o||r||s)),this.listenTo(i,"execute",()=>{this.isSourceEditingMode=!this.isSourceEditingMode}),i}};function _we(n){return Cwe(n)?bwe(n):n}function Cwe(n){return n.startsWith("<")}var xwe=["resumeEditor"];function Awe(n,e){if(n&1){let t=Ul();u(0,"a",24),R("click",function(){let o=Ao(t).$implicit,r=Mo(2);return To(r.removeTag(o))}),m(1),h()}if(n&2){let t=e.$implicit;wt(),Qr(t.trim())}}function Twe(n,e){if(n&1&&ff(0,Awe,2,1,"a",23,mf),n&2){let t=Mo();pf(t.post.tags.split(";"))}}var Z_=class n extends Ce{resumeEditor;editor=g_;errorMessage="";deleteMessageEnabled=!1;operationText="Insert";postDataService=L(Na);alertService=L(vh);menuItems=[{label:"Save",action:()=>this.submit()},{label:"View post",action:()=>this.viewPost()},{label:"List posts",action:()=>this.router.navigateByUrl("/list")}];post={title:"...",content:"...",tags:"aaa; bbb; ccc",status:0};config={htmlSupport:{allow:[{name:/.*/,attributes:/.*/,classes:/.*/,styles:/.*/}],disallow:[]},toolbar:["undo","redo","|","heading","|","bold","italic","underline","|","link","mediaEmbed","codeBlock","highlight","htmlEmbed","sourceEditing","|","bulletedList","numberedList","indent","outdent"],plugins:[S_,s_,k_,v_,A_,M_,a_,l_,R_,V_,K_,Im,Fs,f_,__,C_,Y_],codeBlock:{languages:[{language:"cs",label:"C#"},{language:"javascript",label:"JavaScript"},{language:"html",label:"HTML"},{language:"css",label:"CSS"},{language:"javascript",label:"JavaScript"},{language:"typescript",label:"TypeScript"}]}};ngOnInit(){super.ngOnInit();let e=this.route.snapshot.params["slug?"];e!==void 0&&(this.operationText="Update",this.getPost(e).subscribe(()=>{}))}submit(){this.post.id?(this.post.content=this.post.content.replace('<div class="close-button"></div>','<button class="close-button" aria-label="Dismiss alert" type="button" data-close=""><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 3.44 3.44"><path fill="#000" fill-rule="evenodd" d="M3.23.59L2.096 1.717 3.23 2.85c.103.104.103.273 0 .38-.106.102-.274.102-.38 0L1.72 2.096.588 3.23c-.104.102-.273.102-.377 0-.102-.107-.102-.276 0-.38l1.134-1.13L.21.588C.108.484.108.315.21.21.316.107.485.107.59.21l1.13 1.133L2.85.21c.106-.103.274-.103.38 0 .103.104.103.273 0 .38z" clip-rule="evenodd"></path></svg></span></button>'),this.postDataService.updatePost(this.post).subscribe({next:e=>{if(e){this.alertService.showAlert({title:"UPDATE",type:"success",message:"The post has been updated successfully"});let t=this.post.title.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/viewer",t])}else this.errorMessage="Unable to save customer"},error:e=>{console.log(e)},complete:()=>{}})):this.postDataService.insertPost(this.post).subscribe({next:e=>{e?(this.alertService.showAlert({title:"CREATE",type:"success",message:"The post has been added successfully"}),this.router.navigate(["/main"])):this.errorMessage="Unable to add customer"},error:e=>{console.log(e)},complete:()=>{}})}getPost(e){let t=this.postDataService.getPostBySlug(e);return t.subscribe({next:i=>{this.post=i},error:i=>{console.log(i)},complete:()=>{}}),t}viewPost(){let e=this.post.title.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/viewer",e])}addTag(e){if(e.trim()){let i=this.post.tags.split(";").map(o=>o.trim()).filter(o=>o.length>0);i.push(e.trim()),this.post.tags=i.join("; ")}}removeTag(e){let i=this.post.tags.split(";").map(o=>o.trim()).filter(o=>o!==e.trim());this.post.tags=i.join("; ")}cancel(e){e.preventDefault(),this.router.navigate(["/main"])}delete(e){e.preventDefault(),this.postDataService.deletePost(this.post.id).subscribe({next:t=>{t.status?(alert("The customer has been deleted successfully"),this.router.navigate(["/main"])):this.errorMessage="Unable to delete customer"},error:t=>{console.log(t)},complete:()=>{}})}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Io(n)))(i||n)}})();static \u0275cmp=ne({type:n,selectors:[["app-editor"]],viewQuery:function(t,i){if(t&1&&g5(xwe,5),t&2){let o;rS(o=sS())&&(i.resumeEditor=o.first)}},standalone:!0,features:[me,le],decls:32,vars:6,consts:[["tagInput",""],[3,"menuItems"],["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],["type","text","placeholder","my title...",1,"h2","title-editor","text-center","uppercase",3,"ngModelChange","ngModel"],[3,"ngModelChange","editor","config","ngModel"],[1,"tag-list-editor","text-center"],[1,"add-tag-editor"],["type","text","placeholder","Add new tag",3,"keydown.enter"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"],[1,"button","hollow-button","tiny-button"],[1,"button","hollow-button","tiny-button",3,"click"]],template:function(t,i){if(t&1){let o=Ul();b(0,"app-menu",1),u(1,"div",2)(2,"div",3)(3,"div",4),b(4,"img",5),h()(),u(5,"div",6)(6,"div",7)(7,"div",8)(8,"article",9)(9,"a",10),R("click",function(){return Ao(o),To(i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}}))}),b(10,"img",11),h(),u(11,"header")(12,"input",12),o0("ngModelChange",function(s){return Ao(o),aS(i.post.title,s)||(i.post.title=s),To(s)}),h()(),u(13,"div")(14,"ckeditor",13),o0("ngModelChange",function(s){return Ao(o),aS(i.post.content,s)||(i.post.content=s),To(s)}),h()(),u(15,"footer")(16,"div",14),Ii(17,Twe,2,0),h(),u(18,"div",15)(19,"input",16,0),R("keydown.enter",function(){Ao(o);let s=b5(20);return i.addTag(s.value),To(s.value="")}),h()()()()()()()(),u(21,"footer",17)(22,"div",18)(23,"div",7)(24,"div",8)(25,"p",19),m(26,"Copyright \xA9 2025 "),u(27,"a",20),m(28,"Prolog.Red"),h(),b(29,"img",21),u(30,"span",22),m(31," All Rights Reserved "),h()()()()()()}t&2&&($n("menuItems",i.menuItems),wt(12),i0("ngModel",i.post.title),wt(2),$n("editor",i.editor)("config",i.config),i0("ngModel",i.post.content),wt(3),hf(i.post.tags.length>0?17:-1))},dependencies:[PF,DF,sr,kh,Ov,AF,uT,Ji]})};var J_=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-login-failed"]],standalone:!0,features:[le],decls:2,vars:0,template:function(t,i){t&1&&(u(0,"p"),m(1,"login-failed works!"),h())}})};var X_=class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}static \u0275fac=function(t){return new(t||n)(Ge(NS,16))};static \u0275pipe=EE({name:"bypassHtmlSanitizer",type:n,pure:!0,standalone:!0})};function Iwe(n,e){if(n&1&&(u(0,"a",21),m(1),h()),n&2){let t=e.$implicit;tu("data-open","modal-"+t.trim().replaceAll(" ","-")),wt(),Qr(t.trim())}}function Mwe(n,e){if(n&1&&ff(0,Iwe,2,2,"a",21,mf),n&2){let t=Mo();pf(t.post.tags.split(";"))}}function Dwe(n,e){if(n&1&&(u(0,"a",21),m(1),h()),n&2){let t=e.$implicit;tu("data-open","modal-"+t.trim().replaceAll(" ","-")),wt(),Qr(t.trim())}}function Pwe(n,e){if(n&1&&ff(0,Dwe,2,2,"a",21,mf),n&2){let t=Mo();pf(t.post.tags.split(";"))}}var e1=class n extends Ce{postDataService=L(Na);menuItems=[{label:"Edit post",action:()=>this.edit()},{label:"List posts",action:()=>this.router.navigateByUrl("/list")}];post={title:"...",content:"...",tags:"aaa; bbb; ccc",status:0};ngOnInit(){super.ngOnInit();let e=this.route.snapshot.params.slug;e!==void 0&&this.getPost(e)}getPost(e){this.postDataService.getPostBySlug(e).subscribe({next:t=>{this.post=t},error:t=>{console.log(t)},complete:()=>{}})}edit(){let e=this.post.title.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/editor",e])}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Io(n)))(i||n)}})();static \u0275cmp=ne({type:n,selectors:[["app-viewer"]],standalone:!0,features:[me,le],decls:34,vars:7,consts:[[3,"menuItems"],["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"text-center","uppercase"],[1,"text-center"],[1,"spacer"],[3,"innerHTML"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"],[1,"button","hollow-button","tiny-button"]],template:function(t,i){t&1&&(b(0,"app-menu",0),u(1,"div",1)(2,"div",2)(3,"div",3),b(4,"img",4),h()(),u(5,"div",5)(6,"div",6)(7,"div",7)(8,"article",8)(9,"a",9),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"blog"}})}),b(10,"img",10),h(),u(11,"header")(12,"h2",11),m(13),h(),u(14,"div",12),Ii(15,Mwe,2,0),h()(),b(16,"hr",13)(17,"div",14),k5(18,"bypassHtmlSanitizer"),b(19,"hr",13),u(20,"footer")(21,"div",12),Ii(22,Pwe,2,0),h()()()()()()(),u(23,"footer",15)(24,"div",16)(25,"div",6)(26,"div",7)(27,"p",17),m(28,"Copyright \xA9 2025 "),u(29,"a",18),m(30,"Prolog.Red"),h(),b(31,"img",19),u(32,"span",20),m(33," All Rights Reserved "),h()()()()()()),t&2&&($n("menuItems",i.menuItems),wt(13),Qr(i.post.title),wt(2),hf(i.post.tags.length>0?15:-1),wt(2),$n("innerHTML",v5(18,5,i.post.content),kO),wt(5),hf(i.post.tags.length>0?22:-1))},dependencies:[sr,X_]})};function Rwe(n,e){if(n&1){let t=Ul();u(0,"ul",12)(1,"li"),m(2),u(3,"a",20),R("click",function(){let o=Ao(t).$implicit,r=Mo();return To(r.editPost(o.title))}),m(4,"Edit"),h(),u(5,"a",20),R("click",function(){let o=Ao(t).$implicit,r=Mo();return To(r.viewPost(o.title))}),m(6,"View"),h()()()}if(n&2){let t=e.$implicit;wt(2),Yr(" ",t.title," ")}}var t1=class n extends Ce{postDataService=L(Na);authService=L(ph);menuItems=[{label:"Logout",action:()=>this.authService.logout()},{label:"Create new post",action:()=>this.router.navigateByUrl("/editor/")}];posts=[];ngOnInit(){super.ngOnInit(),this.getPosts()}getPosts(){this.postDataService.getPosts().subscribe({next:e=>{this.posts=e},error:e=>{console.log(e)},complete:()=>{}})}editPost(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/editor",t])}viewPost(e){let t=e.toLocaleLowerCase().replace(/\s+/g,"_");this.router.navigate(["/viewer",t])}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Io(n)))(i||n)}})();static \u0275cmp=ne({type:n,selectors:[["app-list"]],standalone:!0,features:[me,le],decls:28,vars:2,consts:[[3,"menuItems"],["id","inner-page"],[1,"bg"],[1,"stars"],["src","./assets/images/illustrations/stars-inner.svg","alt","stars background",1,"animated","infinite","flash"],["id","single-app"],[1,"row"],[1,"small-16","columns"],[1,"card"],[1,"back-button",3,"click"],["src","assets/images/icons/icon-close.svg","alt","go back"],[1,"title-editor","text-center","uppercase"],[1,""],["class","",4,"ngFor","ngForOf"],[1,"main-footer"],[1,"copyright"],[1,"text-center","copy"],["href","#/"],["src","./assets/images/icons/icon-rocket.svg","alt",""],[1,"hide-on-mobile"],[1,"button","hollow-button","tiny-button","grid-item",3,"click"]],template:function(t,i){t&1&&(b(0,"app-menu",0),u(1,"div",1)(2,"div",2)(3,"div",3),b(4,"img",4),h()(),u(5,"div",5)(6,"div",6)(7,"div",7)(8,"article",8)(9,"a",9),R("click",function(){return i.navigateWithAnimation(["main"],{queryParams:{scrollTo:"projects"}})}),b(10,"img",10),h(),u(11,"header")(12,"h2",11),m(13,"List of posts"),h()(),u(14,"div",12),Ii(15,Rwe,7,1,"ul",13),h(),b(16,"footer"),h()()()()(),u(17,"footer",14)(18,"div",15)(19,"div",6)(20,"div",7)(21,"p",16),m(22,"Copyright \xA9 2025 "),u(23,"a",17),m(24,"Prolog.Red"),h(),b(25,"img",18),u(26,"span",19),m(27," All Rights Reserved "),h()()()()()()),t&2&&($n("menuItems",i.menuItems),wt(15),$n("ngForOf",i.posts))},dependencies:[Ji,f0,sr]})};var TH=[{path:"",redirectTo:"main",pathMatch:"full"},{path:"main",component:hv},{path:"list",component:t1,canActivate:[tg]},{path:"editor/:slug?",component:Z_,canActivate:[tg]},{path:"viewer/:slug",component:e1},{path:"login-failed",component:J_},{path:"clients/equans",component:mv},{path:"clients/akzonobel",component:fv},{path:"clients/olympic",component:pv},{path:"clients/baxter",component:gv},{path:"clients/gsk",component:bv},{path:"clients/labima",component:wv},{path:"clients/fib",component:kv},{path:"clients/credit-general",component:vv},{path:"clients/engie",component:yv},{path:"clients/tott-systems",component:_v},{path:"clients/jpass",component:Cv},{path:"clients/sopres",component:Ev},{path:"clients/tplan",component:Sv},{path:"clients/transnubel",component:xv},{path:"clients/schenk",component:Av},{path:"clients/coca-cola",component:Tv},{path:"clients/kjs",component:Iv}];function Nwe(n,e){console.log(e)}function IH(){return new Zp({auth:{clientId:Ra.msalConfig.auth.clientId,authority:Ra.msalConfig.auth.authority,redirectUri:"/",postLogoutRedirectUri:"/"},cache:{cacheLocation:ct.LocalStorage},system:{allowNativeBroker:!1,loggerOptions:{loggerCallback:Nwe,logLevel:st.Info,piiLoggingEnabled:!1}}})}function MH(){let n=new Map;return n.set(Ra.apiConfig.uri,Ra.apiConfig.scopes),{interactionType:W.Redirect,protectedResourceMap:n}}function DH(){return{interactionType:W.Redirect,authRequest:{scopes:[...Ra.apiConfig.scopes]},loginFailedRoute:"/login-failed"}}var He=function(n){return n[n.State=0]="State",n[n.Transition=1]="Transition",n[n.Sequence=2]="Sequence",n[n.Group=3]="Group",n[n.Animate=4]="Animate",n[n.Keyframes=5]="Keyframes",n[n.Style=6]="Style",n[n.Trigger=7]="Trigger",n[n.Reference=8]="Reference",n[n.AnimateChild=9]="AnimateChild",n[n.AnimateRef=10]="AnimateRef",n[n.Query=11]="Query",n[n.Stagger=12]="Stagger",n}(He||{}),Rr="*";function PH(n,e=null){return{type:He.Sequence,steps:n,options:e}}function LD(n){return{type:He.Style,styles:n,offset:null}}var wl=class{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},fb=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,o=0,r=this.players.length;r==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++t==r&&this._onFinish()}),s.onDestroy(()=>{++i==r&&this._onDestroy()}),s.onStart(()=>{++o==r&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let t=e*this.totalTime;this.players.forEach(i=>{let o=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(o)})}getPosition(){let e=this.players.reduce((t,i)=>t===null||i.totalTime>t.totalTime?i:t,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let t=e=="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},n1="!";function RH(n){return new F(3e3,!1)}function Owe(){return new F(3100,!1)}function Lwe(){return new F(3101,!1)}function Fwe(n){return new F(3001,!1)}function Vwe(n){return new F(3003,!1)}function Bwe(n){return new F(3004,!1)}function zwe(n,e){return new F(3005,!1)}function Hwe(){return new F(3006,!1)}function Uwe(){return new F(3007,!1)}function jwe(n,e){return new F(3008,!1)}function $we(n){return new F(3002,!1)}function Wwe(n,e,t,i,o){return new F(3010,!1)}function qwe(){return new F(3011,!1)}function Gwe(){return new F(3012,!1)}function Kwe(){return new F(3200,!1)}function Qwe(){return new F(3202,!1)}function Ywe(){return new F(3013,!1)}function Zwe(n){return new F(3014,!1)}function Jwe(n){return new F(3015,!1)}function Xwe(n){return new F(3016,!1)}function e0e(n,e){return new F(3404,!1)}function t0e(n){return new F(3502,!1)}function n0e(n){return new F(3503,!1)}function i0e(){return new F(3300,!1)}function o0e(n){return new F(3504,!1)}function r0e(n){return new F(3301,!1)}function s0e(n,e){return new F(3302,!1)}function a0e(n){return new F(3303,!1)}function l0e(n,e){return new F(3400,!1)}function c0e(n){return new F(3401,!1)}function d0e(n){return new F(3402,!1)}function u0e(n,e){return new F(3505,!1)}function kl(n){switch(n.length){case 0:return new wl;case 1:return n[0];default:return new fb(n)}}function GH(n,e,t=new Map,i=new Map){let o=[],r=[],s=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),d=c==s,f=d&&a||new Map;l.forEach((p,g)=>{let w=g,k=p;if(g!=="offset")switch(w=n.normalizePropertyName(w,o),k){case n1:k=t.get(g);break;case Rr:k=i.get(g);break;default:k=n.normalizeStyleValue(g,w,k,o);break}f.set(w,k)}),d||r.push(f),a=f,s=c}),o.length)throw t0e(o);return r}function rP(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&FD(t,"start",n)));break;case"done":n.onDone(()=>i(t&&FD(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&FD(t,"destroy",n)));break}}function FD(n,e,t){let i=t.totalTime,o=!!t.disabled,r=sP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,o),s=n._data;return s!=null&&(r._data=s),r}function sP(n,e,t,i,o="",r=0,s){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:o,totalTime:r,disabled:!!s}}function Wi(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function NH(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var h0e=typeof document>"u"?null:document.documentElement;function aP(n){let e=n.parentNode||n.host||null;return e===h0e?null:e}function m0e(n){return n.substring(1,6)=="ebkit"}var vd=null,OH=!1;function f0e(n){vd||(vd=p0e()||{},OH=vd.style?"WebkitAppearance"in vd.style:!1);let e=!0;return vd.style&&!m0e(n)&&(e=n in vd.style,!e&&OH&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vd.style)),e}function p0e(){return typeof document<"u"?document.body:null}function KH(n,e){for(;e;){if(e===n)return!0;e=aP(e)}return!1}function QH(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var lP=(()=>{class n{validateStyleProperty(t){return f0e(t)}containsElement(t,i){return KH(t,i)}getParentElement(t){return aP(t)}query(t,i,o){return QH(t,i,o)}computeStyle(t,i,o){return o||""}animate(t,i,o,r,s,a=[],l){return new wl(o,r)}static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})(),Cd=class{static{this.NOOP=new lP}},Ed=class{};var g0e=1e3,YH="{{",b0e="}}",ZH="ng-enter",jD="ng-leave",i1="ng-trigger",l1=".ng-trigger",LH="ng-animating",$D=".ng-animating";function Vs(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:WD(parseFloat(e[1]),e[2])}function WD(n,e){switch(e){case"s":return n*g0e;default:return n}}function c1(n,e,t){return n.hasOwnProperty("duration")?n:w0e(n,e,t)}function w0e(n,e,t){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,o,r=0,s="";if(typeof n=="string"){let a=n.match(i);if(a===null)return e.push(RH(n)),{duration:0,delay:0,easing:""};o=WD(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(r=WD(parseFloat(l),a[4]));let c=a[5];c&&(s=c)}else o=n;if(!t){let a=!1,l=e.length;o<0&&(e.push(Owe()),a=!0),r<0&&(e.push(Lwe()),a=!0),a&&e.splice(l,0,RH(n))}return{duration:o,delay:r,easing:s}}function k0e(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Nr(n,e,t){e.forEach((i,o)=>{let r=cP(o);t&&!t.has(o)&&t.set(o,n.style[r]),n.style[r]=i})}function _d(n,e){e.forEach((t,i)=>{let o=cP(i);n.style[o]=""})}function pb(n){return Array.isArray(n)?n.length==1?n[0]:PH(n):n}function v0e(n,e,t){let i=e.params||{},o=JH(n);o.length&&o.forEach(r=>{i.hasOwnProperty(r)||t.push(Fwe(r))})}var qD=new RegExp(`${YH}\\s*(.+?)\\s*${b0e}`,"g");function JH(n){let e=[];if(typeof n=="string"){let t;for(;t=qD.exec(n);)e.push(t[1]);qD.lastIndex=0}return e}function bb(n,e,t){let i=`${n}`,o=i.replace(qD,(r,s)=>{let a=e[s];return a==null&&(t.push(Vwe(s)),a=""),a.toString()});return o==i?n:o}var y0e=/-+([a-z0-9])/g;function cP(n){return n.replace(y0e,(...e)=>e[1].toUpperCase())}function _0e(n,e){return n===0||e===0}function C0e(n,e,t){if(t.size&&e.length){let i=e[0],o=[];if(t.forEach((r,s)=>{i.has(s)||o.push(s),i.set(s,r)}),o.length)for(let r=1;r<e.length;r++){let s=e[r];o.forEach(a=>s.set(a,dP(n,a)))}}return e}function $i(n,e,t){switch(e.type){case He.Trigger:return n.visitTrigger(e,t);case He.State:return n.visitState(e,t);case He.Transition:return n.visitTransition(e,t);case He.Sequence:return n.visitSequence(e,t);case He.Group:return n.visitGroup(e,t);case He.Animate:return n.visitAnimate(e,t);case He.Keyframes:return n.visitKeyframes(e,t);case He.Style:return n.visitStyle(e,t);case He.Reference:return n.visitReference(e,t);case He.AnimateChild:return n.visitAnimateChild(e,t);case He.AnimateRef:return n.visitAnimateRef(e,t);case He.Query:return n.visitQuery(e,t);case He.Stagger:return n.visitStagger(e,t);default:throw Bwe(e.type)}}function dP(n,e){return window.getComputedStyle(n)[e]}var E0e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),d1=class extends Ed{normalizePropertyName(e,t){return cP(e)}normalizeStyleValue(e,t,i,o){let r="",s=i.toString().trim();if(E0e.has(t)&&i!==0&&i!=="0")if(typeof i=="number")r="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&o.push(zwe(e,i))}return s+r}};var u1="*";function S0e(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>x0e(i,t,e)):t.push(n),t}function x0e(n,e,t){if(n[0]==":"){let l=A0e(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(Jwe(n)),e;let o=i[1],r=i[2],s=i[3];e.push(FH(o,s));let a=o==u1&&s==u1;r[0]=="<"&&!a&&e.push(FH(s,o))}function A0e(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(Xwe(n)),"* => *"}}var o1=new Set(["true","1"]),r1=new Set(["false","0"]);function FH(n,e){let t=o1.has(n)||r1.has(n),i=o1.has(e)||r1.has(e);return(o,r)=>{let s=n==u1||n==o,a=e==u1||e==r;return!s&&t&&typeof o=="boolean"&&(s=o?o1.has(n):r1.has(n)),!a&&i&&typeof r=="boolean"&&(a=r?o1.has(e):r1.has(e)),s&&a}}var XH=":self",T0e=new RegExp(`s*${XH}s*,?`,"g");function eU(n,e,t,i){return new GD(n).build(e,t,i)}var VH="",GD=class{constructor(e){this._driver=e}build(e,t,i){let o=new KD(t);return this._resetContextStyleTimingState(o),$i(this,pb(e),o)}_resetContextStyleTimingState(e){e.currentQuerySelector=VH,e.collectedStyles=new Map,e.collectedStyles.set(VH,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,o=t.depCount=0,r=[],s=[];return e.name.charAt(0)=="@"&&t.errors.push(Hwe()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==He.State){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,r.push(this.visitState(l,t))}),l.name=c}else if(a.type==He.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,o+=l.depCount,s.push(l)}else t.errors.push(Uwe())}),{type:He.Trigger,name:e.name,states:r,transitions:s,queryCount:i,depCount:o,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),o=e.options&&e.options.params||null;if(i.containsDynamicStyles){let r=new Set,s=o||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{JH(l).forEach(c=>{s.hasOwnProperty(c)||r.add(c)})})}),r.size&&t.errors.push(jwe(e.name,[...r.values()]))}return{type:He.State,name:e.name,style:i,options:o?{params:o}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=$i(this,pb(e.animation),t),o=S0e(e.expr,t.errors);return{type:He.Transition,matchers:o,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:yd(e.options)}}visitSequence(e,t){return{type:He.Sequence,steps:e.steps.map(i=>$i(this,i,t)),options:yd(e.options)}}visitGroup(e,t){let i=t.currentTime,o=0,r=e.steps.map(s=>{t.currentTime=i;let a=$i(this,s,t);return o=Math.max(o,t.currentTime),a});return t.currentTime=o,{type:He.Group,steps:r,options:yd(e.options)}}visitAnimate(e,t){let i=P0e(e.timings,t.errors);t.currentAnimateTimings=i;let o,r=e.styles?e.styles:LD({});if(r.type==He.Keyframes)o=this.visitKeyframes(r,t);else{let s=e.styles,a=!1;if(!s){a=!0;let c={};i.easing&&(c.easing=i.easing),s=LD(c)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(s,t);l.isEmptyStep=a,o=l}return t.currentAnimateTimings=null,{type:He.Animate,timings:i,style:o,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],o=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of o)typeof a=="string"?a===Rr?i.push(a):t.errors.push($we(a)):i.push(new Map(Object.entries(a)));let r=!1,s=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(s=a.get("easing"),a.delete("easing")),!r)){for(let l of a.values())if(l.toString().indexOf(YH)>=0){r=!0;break}}}),{type:He.Style,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,o=t.currentTime,r=t.currentTime;i&&r>0&&(r-=i.duration+i.delay),e.styles.forEach(s=>{typeof s!="string"&&s.forEach((a,l)=>{let c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l),f=!0;d&&(r!=o&&r>=d.startTime&&o<=d.endTime&&(t.errors.push(Wwe(l,d.startTime,d.endTime,r,o)),f=!1),r=d.startTime),f&&c.set(l,{startTime:r,endTime:o}),t.options&&v0e(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:He.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(qwe()),i;let o=1,r=0,s=[],a=!1,l=!1,c=0,d=e.steps.map(S=>{let T=this._makeStyleAst(S,t),V=T.offset!=null?T.offset:D0e(T.styles),K=0;return V!=null&&(r++,K=T.offset=V),l=l||K<0||K>1,a=a||K<c,c=K,s.push(K),T});l&&t.errors.push(Gwe()),a&&t.errors.push(Kwe());let f=e.steps.length,p=0;r>0&&r<f?t.errors.push(Qwe()):r==0&&(p=o/(f-1));let g=f-1,w=t.currentTime,k=t.currentAnimateTimings,C=k.duration;return d.forEach((S,T)=>{let V=p>0?T==g?1:p*T:s[T],K=V*C;t.currentTime=w+k.delay+K,k.duration=K,this._validateStyleAst(S,t),S.offset=V,i.styles.push(S)}),i}visitReference(e,t){return{type:He.Reference,animation:$i(this,pb(e.animation),t),options:yd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:He.AnimateChild,options:yd(e.options)}}visitAnimateRef(e,t){return{type:He.AnimateRef,animation:this.visitReference(e.animation,t),options:yd(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,o=e.options||{};t.queryCount++,t.currentQuery=e;let[r,s]=I0e(e.selector);t.currentQuerySelector=i.length?i+" "+r:r,Wi(t.collectedStyles,t.currentQuerySelector,new Map);let a=$i(this,pb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:He.Query,selector:r,limit:o.limit||0,optional:!!o.optional,includeSelf:s,animation:a,originalSelector:e.selector,options:yd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(Ywe());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:c1(e.timings,t.errors,!0);return{type:He.Stagger,animation:$i(this,pb(e.animation),t),timings:i,options:null}}};function I0e(n){let e=!!n.split(/\s*,\s*/).find(t=>t==XH);return e&&(n=n.replace(T0e,"")),n=n.replace(/@\*/g,l1).replace(/@\w+/g,t=>l1+"-"+t.slice(1)).replace(/:animating/g,$D),[n,e]}function M0e(n){return n?v({},n):null}var KD=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function D0e(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function P0e(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let r=c1(n,e).duration;return VD(r,0,"")}let t=n;if(t.split(/\s+/).some(r=>r.charAt(0)=="{"&&r.charAt(1)=="{")){let r=VD(0,0,"");return r.dynamic=!0,r.strValue=t,r}let o=c1(t,e);return VD(o.duration,o.delay,o.easing)}function yd(n){return n?(n=v({},n),n.params&&(n.params=M0e(n.params))):n={},n}function VD(n,e,t){return{duration:n,delay:e,easing:t}}function uP(n,e,t,i,o,r,s=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:o,delay:r,totalTime:o+r,easing:s,subTimeline:a}}var wb=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},R0e=1,N0e=":enter",O0e=new RegExp(N0e,"g"),L0e=":leave",F0e=new RegExp(L0e,"g");function tU(n,e,t,i,o,r=new Map,s=new Map,a,l,c=[]){return new QD().buildKeyframes(n,e,t,i,o,r,s,a,l,c)}var QD=class{buildKeyframes(e,t,i,o,r,s,a,l,c,d=[]){c=c||new wb;let f=new YD(e,t,c,o,r,d,[]);f.options=l;let p=l.delay?Vs(l.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([s],null,f.errors,l),$i(this,i,f);let g=f.timelines.filter(w=>w.containsAnimation());if(g.length&&a.size){let w;for(let k=g.length-1;k>=0;k--){let C=g[k];if(C.element===t){w=C;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([a],null,f.errors,l)}return g.length?g.map(w=>w.buildKeyframes()):[uP(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let o=t.createSubContext(e.options),r=t.currentTimeline.currentTime,s=this._visitSubInstructions(i,o,o.options);r!=s&&t.transformIntoNewTimeline(s)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let o of e){let r=o?.delay;if(r){let s=typeof r=="number"?r:Vs(bb(r,o?.params??{},t.errors));i.delayNextStep(s)}}}_visitSubInstructions(e,t,i){let r=t.currentTimeline.currentTime,s=i.duration!=null?Vs(i.duration):null,a=i.delay!=null?Vs(i.delay):null;return s!==0&&e.forEach(l=>{let c=t.appendInstructionToTimeline(l,s,a);r=Math.max(r,c.duration+c.delay)}),r}visitReference(e,t){t.updateOptions(e.options,!0),$i(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,o=t,r=e.options;if(r&&(r.params||r.delay)&&(o=t.createSubContext(r),o.transformIntoNewTimeline(),r.delay!=null)){o.previousNode.type==He.Style&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=h1);let s=Vs(r.delay);o.delayNextStep(s)}e.steps.length&&(e.steps.forEach(s=>$i(this,s,o)),o.currentTimeline.applyStylesToKeyframe(),o.subContextCount>i&&o.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],o=t.currentTimeline.currentTime,r=e.options&&e.options.delay?Vs(e.options.delay):0;e.steps.forEach(s=>{let a=t.createSubContext(e.options);r&&a.delayNextStep(r),$i(this,s,a),o=Math.max(o,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(s=>t.currentTimeline.mergeTimelineCollectedStyles(s)),t.transformIntoNewTimeline(o),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,o=t.params?bb(i,t.params,t.errors):i;return c1(o,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),o=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),o.snapshotCurrentStyles());let r=e.style;r.type==He.Keyframes?this.visitKeyframes(r,t):(t.incrementTime(i.duration),this.visitStyle(r,t),o.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,o=t.currentAnimateTimings;!o&&i.hasCurrentStyleProperties()&&i.forwardFrame();let r=o&&o.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(r):i.setStyles(e.styles,r,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,o=t.currentTimeline.duration,r=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*r),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(o+r),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,o=e.options||{},r=o.delay?Vs(o.delay):0;r&&(t.previousNode.type===He.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=h1);let s=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!o.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;let f=t.createSubContext(e.options,c);r&&f.delayNextStep(r),c===t.element&&(l=f.currentTimeline),$i(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe();let p=f.currentTimeline.currentTime;s=Math.max(s,p)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(s),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,o=t.currentTimeline,r=e.timings,s=Math.abs(r.duration),a=s*(t.currentQueryTotal-1),l=s*t.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let d=t.currentTimeline;l&&d.delayNextStep(l);let f=d.currentTime;$i(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=o.currentTime-f+(o.startTime-i.currentTimeline.startTime)}},h1={},YD=class n{constructor(e,t,i,o,r,s,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=o,this._leaveClassName=r,this.errors=s,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=h1,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new m1(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,o=this.options;i.duration!=null&&(o.duration=Vs(i.duration)),i.delay!=null&&(o.delay=Vs(i.delay));let r=i.params;if(r){let s=o.params;s||(s=this.options.params={}),Object.keys(r).forEach(a=>{(!t||!s.hasOwnProperty(a))&&(s[a]=bb(r[a],s,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(o=>{i[o]=t[o]})}}return e}createSubContext(e=null,t,i){let o=t||this.element,r=new n(this._driver,o,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(o,i||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(e),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(e){return this.previousNode=h1,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let o={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},r=new ZD(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,o,e.stretchStartingKeyframe);return this.timelines.push(r),o}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,o,r,s){let a=[];if(o&&a.push(this.element),e.length>0){e=e.replace(O0e,"."+this._enterClassName),e=e.replace(F0e,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!r&&a.length==0&&s.push(Zwe(t)),a}},m1=class n{constructor(e,t,i,o){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=o,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=R0e,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Rr),this._currentKeyframe.set(t,Rr);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,o){t&&this._previousKeyframe.set("easing",t);let r=o&&o.params||{},s=V0e(e,this._globalTimelineStyles);for(let[a,l]of s){let c=bb(l,r,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Rr),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let o=this._styleSummary.get(i);(!o||t.time>o.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,o=[];this._keyframes.forEach((a,l)=>{let c=new Map([...this._backFill,...a]);c.forEach((d,f)=>{d===n1?e.add(f):d===Rr&&t.add(f)}),i||c.set("offset",l/this.duration),o.push(c)});let r=[...e.values()],s=[...t.values()];if(i){let a=o[0],l=new Map(a);a.set("offset",0),l.set("offset",1),o=[a,l]}return uP(this.element,o,r,s,this.duration,this.startTime,this.easing,!1)}},ZD=class extends m1{constructor(e,t,i,o,r,s,a=!1){super(e,t,s.delay),this.keyframes=i,this.preStyleProps=o,this.postStyleProps=r,this._stretchStartingKeyframe=a,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:o}=this.timings;if(this._stretchStartingKeyframe&&t){let r=[],s=i+t,a=t/s,l=new Map(e[0]);l.set("offset",0),r.push(l);let c=new Map(e[0]);c.set("offset",BH(a)),r.push(c);let d=e.length-1;for(let f=1;f<=d;f++){let p=new Map(e[f]),g=p.get("offset"),w=t+g*i;p.set("offset",BH(w/s)),r.push(p)}i=s,t=0,o="",e=r}return uP(this.element,e,this.preStyleProps,this.postStyleProps,i,t,o,!0)}};function BH(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function V0e(n,e){let t=new Map,i;return n.forEach(o=>{if(o==="*"){i??=e.keys();for(let r of i)t.set(r,Rr)}else for(let[r,s]of o)t.set(r,s)}),t}function zH(n,e,t,i,o,r,s,a,l,c,d,f,p){return{type:0,element:n,triggerName:e,isRemovalTransition:o,fromState:t,fromStyles:r,toState:i,toStyles:s,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:f,errors:p}}var BD={},f1=class{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,o){return B0e(this.ast.matchers,e,t,i,o)}buildStyles(e,t,i){let o=this._stateStyles.get("*");return e!==void 0&&(o=this._stateStyles.get(e?.toString())||o),o?o.buildStyles(t,i):new Map}build(e,t,i,o,r,s,a,l,c,d){let f=[],p=this.ast.options&&this.ast.options.params||BD,g=a&&a.params||BD,w=this.buildStyles(i,g,f),k=l&&l.params||BD,C=this.buildStyles(o,k,f),S=new Set,T=new Map,V=new Map,K=o==="void",de={params:nU(k,p),delay:this.ast.options?.delay},O=d?[]:tU(e,t,this.ast.animation,r,s,w,C,de,c,f),j=0;return O.forEach(z=>{j=Math.max(z.duration+z.delay,j)}),f.length?zH(t,this._triggerName,i,o,K,w,C,[],[],T,V,j,f):(O.forEach(z=>{let Ue=z.element,ri=Wi(T,Ue,new Set);z.preStyleProps.forEach(vl=>ri.add(vl));let Vm=Wi(V,Ue,new Set);z.postStyleProps.forEach(vl=>Vm.add(vl)),Ue!==t&&S.add(Ue)}),zH(t,this._triggerName,i,o,K,w,C,O,[...S.values()],T,V,j))}};function B0e(n,e,t,i,o){return n.some(r=>r(e,t,i,o))}function nU(n,e){let t=v({},e);return Object.entries(n).forEach(([i,o])=>{o!=null&&(t[i]=o)}),t}var JD=class{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,o=nU(e,this.defaultParams);return this.styles.styles.forEach(r=>{typeof r!="string"&&r.forEach((s,a)=>{s&&(s=bb(s,o,t));let l=this.normalizer.normalizePropertyName(a,t);s=this.normalizer.normalizeStyleValue(a,l,s,t),i.set(a,s)})}),i}};function z0e(n,e,t){return new XD(n,e,t)}var XD=class{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(o=>{let r=o.options&&o.options.params||{};this.states.set(o.name,new JD(o.style,r,i))}),HH(this.states,"true","1"),HH(this.states,"false","0"),t.transitions.forEach(o=>{this.transitionFactories.push(new f1(e,o,this.states))}),this.fallbackTransition=H0e(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,o){return this.transitionFactories.find(s=>s.match(e,t,i,o))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function H0e(n,e,t){let i=[(s,a)=>!0],o={type:He.Sequence,steps:[],options:null},r={type:He.Transition,animation:o,matchers:i,options:null,queryCount:0,depCount:0};return new f1(n,r,e)}function HH(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var U0e=new wb,eP=class{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){let i=[],o=[],r=eU(this._driver,t,i,o);if(i.length)throw n0e(i);o.length&&void 0,this._animations.set(e,r)}_buildPlayer(e,t,i){let o=e.element,r=GH(this._normalizer,e.keyframes,t,i);return this._driver.animate(o,r,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let o=[],r=this._animations.get(e),s,a=new Map;if(r?(s=tU(this._driver,t,r,ZH,jD,new Map,new Map,i,U0e,o),s.forEach(d=>{let f=Wi(a,d.element,new Map);d.postStyleProps.forEach(p=>f.set(p,null))})):(o.push(i0e()),s=[]),o.length)throw o0e(o);a.forEach((d,f)=>{d.forEach((p,g)=>{d.set(g,this._driver.computeStyle(f,g,Rr))})});let l=s.map(d=>{let f=a.get(d.element);return this._buildPlayer(d,new Map,f)}),c=kl(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw r0e(e);return t}listen(e,t,i,o){let r=sP(t,"","","");return rP(this._getPlayer(e),i,r,o),()=>{}}command(e,t,i,o){if(i=="register"){this.register(e,o[0]);return}if(i=="create"){let s=o[0]||{};this.create(e,t,s);return}let r=this._getPlayer(e);switch(i){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(o[0]));break;case"destroy":this.destroy(e);break}}},UH="ng-animate-queued",j0e=".ng-animate-queued",zD="ng-animate-disabled",$0e=".ng-animate-disabled",W0e="ng-star-inserted",q0e=".ng-star-inserted",G0e=[],iU={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},K0e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Go="__ng_removed",kb=class{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),o=i?e.value:e;if(this.value=Y0e(o),i){let r=e,{value:s}=r,a=Bt(r,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(o=>{i[o]==null&&(i[o]=t[o])})}}},gb="void",HD=new kb(gb),tP=class{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,bo(t,this._hostClassName)}listen(e,t,i,o){if(!this._triggers.has(t))throw s0e(i,t);if(i==null||i.length==0)throw a0e(t);if(!Z0e(i))throw l0e(i,t);let r=Wi(this._elementListeners,e,[]),s={name:t,phase:i,callback:o};r.push(s);let a=Wi(this._engine.statesByElement,e,new Map);return a.has(t)||(bo(e,i1),bo(e,i1+"-"+t),a.set(t,HD)),()=>{this._engine.afterFlush(()=>{let l=r.indexOf(s);l>=0&&r.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw c0e(e);return t}trigger(e,t,i,o=!0){let r=this._getTrigger(t),s=new vb(this.id,t,e),a=this._engine.statesByElement.get(e);a||(bo(e,i1),bo(e,i1+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),c=new kb(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=HD),!(c.value===gb)&&l.value===c.value){if(!eke(l.params,c.params)){let k=[],C=r.matchStyles(l.value,l.params,k),S=r.matchStyles(c.value,c.params,k);k.length?this._engine.reportError(k):this._engine.afterFlush(()=>{_d(e,C),Nr(e,S)})}return}let p=Wi(this._engine.playersByElement,e,[]);p.forEach(k=>{k.namespaceId==this.id&&k.triggerName==t&&k.queued&&k.destroy()});let g=r.matchTransition(l.value,c.value,e,c.params),w=!1;if(!g){if(!o)return;g=r.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:c,player:s,isFallbackTransition:w}),w||(bo(e,UH),s.onStart(()=>{Lm(e,UH)})),s.onDone(()=>{let k=this.players.indexOf(s);k>=0&&this.players.splice(k,1);let C=this._engine.playersByElement.get(e);if(C){let S=C.indexOf(s);S>=0&&C.splice(S,1)}}),this.players.push(s),p.push(s),s}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(o=>o.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,l1,!0);i.forEach(o=>{if(o[Go])return;let r=this._engine.fetchNamespacesByElement(o);r.size?r.forEach(s=>s.triggerLeaveAnimation(o,t,!1,!0)):this.clearElementCache(o)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(o=>this.clearElementCache(o)))}triggerLeaveAnimation(e,t,i,o){let r=this._engine.statesByElement.get(e),s=new Map;if(r){let a=[];if(r.forEach((l,c)=>{if(s.set(c,l.value),this._triggers.has(c)){let d=this.trigger(e,c,gb,o);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,s),i&&kl(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let o=new Set;t.forEach(r=>{let s=r.name;if(o.has(s))return;o.add(s);let l=this._triggers.get(s).fallbackTransition,c=i.get(s)||HD,d=new kb(gb),f=new vb(this.id,s,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:s,transition:l,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let o=!1;if(i.totalAnimations){let r=i.players.length?i.playersByQueriedElement.get(e):[];if(r&&r.length)o=!0;else{let s=e;for(;s=s.parentNode;)if(i.statesByElement.get(s)){o=!0;break}}}if(this.prepareLeaveAnimationListeners(e),o)i.markElementAsRemoved(this.id,e,!1,t);else{let r=e[Go];(!r||r===iU)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){bo(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let o=i.player;if(o.destroyed)return;let r=i.element,s=this._elementListeners.get(r);s&&s.forEach(a=>{if(a.name==i.triggerName){let l=sP(r,i.triggerName,i.fromState.value,i.toState.value);l._data=e,rP(i.player,a.phase,l,a.callback)}}),o.markedForDestroy?this._engine.afterFlush(()=>{o.destroy()}):t.push(i)}),this._queue=[],t.sort((i,o)=>{let r=i.transition.ast.depCount,s=o.transition.ast.depCount;return r==0||s==0?r-s:this._engine.driver.containsElement(i.element,o.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},nP=class{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(o,r)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new tP(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,o=this.namespacesByHostElement;if(i.length-1>=0){let s=!1,a=this.driver.getParentElement(t);for(;a;){let l=o.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),s=!0;break}a=this.driver.getParentElement(a)}s||i.unshift(e)}else i.push(e);return o.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let o=this._namespaceLookup[e];o&&o.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let o=this._namespaceList.indexOf(i);o>=0&&this._namespaceList.splice(o,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let o of i.values())if(o.namespaceId){let r=this._fetchNamespace(o.namespaceId);r&&t.add(r)}}return t}trigger(e,t,i,o){if(s1(t)){let r=this._fetchNamespace(e);if(r)return r.trigger(t,i,o),!0}return!1}insertNode(e,t,i,o){if(!s1(t))return;let r=t[Go];if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;let s=this.collectedLeaveElements.indexOf(t);s>=0&&this.collectedLeaveElements.splice(s,1)}if(e){let s=this._fetchNamespace(e);s&&s.insertNode(t,i)}o&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),bo(e,zD)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Lm(e,zD))}removeNode(e,t,i){if(s1(t)){let o=e?this._fetchNamespace(e):null;o?o.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let r=this.namespacesByHostElement.get(t);r&&r.id!==e&&r.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,o,r){this.collectedLeaveElements.push(t),t[Go]={namespaceId:e,setForRemoval:o,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:r}}listen(e,t,i,o,r){return s1(t)?this._fetchNamespace(e).listen(t,i,o,r):()=>{}}_buildInstruction(e,t,i,o,r){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,o,e.fromState.options,e.toState.options,t,r)}destroyInnerAnimations(e){let t=this.driver.query(e,l1,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,$D,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return kl(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Go];if(t&&t.setForRemoval){if(e[Go]=iU,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(zD)&&this.markElementAsDisabled(e,!1),this.driver.query(e,$0e,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,o)=>this._balanceNamespaceList(i,o)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let o=this.collectedEnterElements[i];bo(o,W0e)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let o=0;o<i.length;o++)i[o]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let o=this.collectedLeaveElements[i];this.processLeaveNode(o)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?kl(t).onDone(()=>{i.forEach(o=>o())}):i.forEach(o=>o())}}reportError(e){throw d0e(e)}_flushAnimations(e,t){let i=new wb,o=[],r=new Map,s=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(J=>{d.add(J);let se=this.driver.query(J,j0e,!0);for(let ue=0;ue<se.length;ue++)d.add(se[ue])});let f=this.bodyNode,p=Array.from(this.statesByElement.keys()),g=WH(p,this.collectedEnterElements),w=new Map,k=0;g.forEach((J,se)=>{let ue=ZH+k++;w.set(se,ue),J.forEach(Xe=>bo(Xe,ue))});let C=[],S=new Set,T=new Set;for(let J=0;J<this.collectedLeaveElements.length;J++){let se=this.collectedLeaveElements[J],ue=se[Go];ue&&ue.setForRemoval&&(C.push(se),S.add(se),ue.hasAnimation?this.driver.query(se,q0e,!0).forEach(Xe=>S.add(Xe)):T.add(se))}let V=new Map,K=WH(p,Array.from(S));K.forEach((J,se)=>{let ue=jD+k++;V.set(se,ue),J.forEach(Xe=>bo(Xe,ue))}),e.push(()=>{g.forEach((J,se)=>{let ue=w.get(se);J.forEach(Xe=>Lm(Xe,ue))}),K.forEach((J,se)=>{let ue=V.get(se);J.forEach(Xe=>Lm(Xe,ue))}),C.forEach(J=>{this.processLeaveNode(J)})});let de=[],O=[];for(let J=this._namespaceList.length-1;J>=0;J--)this._namespaceList[J].drainQueuedTransitions(t).forEach(ue=>{let Xe=ue.player,dn=ue.element;if(de.push(Xe),this.collectedEnterElements.length){let Tn=dn[Go];if(Tn&&Tn.setForMove){if(Tn.previousTriggersValues&&Tn.previousTriggersValues.has(ue.triggerName)){let yl=Tn.previousTriggersValues.get(ue.triggerName),qi=this.statesByElement.get(ue.element);if(qi&&qi.has(ue.triggerName)){let yb=qi.get(ue.triggerName);yb.value=yl,qi.set(ue.triggerName,yb)}}Xe.destroy();return}}let Ko=!f||!this.driver.containsElement(f,dn),xi=V.get(dn),Bs=w.get(dn),Rt=this._buildInstruction(ue,i,Bs,xi,Ko);if(Rt.errors&&Rt.errors.length){O.push(Rt);return}if(Ko){Xe.onStart(()=>_d(dn,Rt.fromStyles)),Xe.onDestroy(()=>Nr(dn,Rt.toStyles)),o.push(Xe);return}if(ue.isFallbackTransition){Xe.onStart(()=>_d(dn,Rt.fromStyles)),Xe.onDestroy(()=>Nr(dn,Rt.toStyles)),o.push(Xe);return}let fP=[];Rt.timelines.forEach(Tn=>{Tn.stretchStartingKeyframe=!0,this.disabledNodes.has(Tn.element)||fP.push(Tn)}),Rt.timelines=fP,i.append(dn,Rt.timelines);let cU={instruction:Rt,player:Xe,element:dn};s.push(cU),Rt.queriedElements.forEach(Tn=>Wi(a,Tn,[]).push(Xe)),Rt.preStyleProps.forEach((Tn,yl)=>{if(Tn.size){let qi=l.get(yl);qi||l.set(yl,qi=new Set),Tn.forEach((yb,_1)=>qi.add(_1))}}),Rt.postStyleProps.forEach((Tn,yl)=>{let qi=c.get(yl);qi||c.set(yl,qi=new Set),Tn.forEach((yb,_1)=>qi.add(_1))})});if(O.length){let J=[];O.forEach(se=>{J.push(u0e(se.triggerName,se.errors))}),de.forEach(se=>se.destroy()),this.reportError(J)}let j=new Map,z=new Map;s.forEach(J=>{let se=J.element;i.has(se)&&(z.set(se,se),this._beforeAnimationBuild(J.player.namespaceId,J.instruction,j))}),o.forEach(J=>{let se=J.element;this._getPreviousPlayers(se,!1,J.namespaceId,J.triggerName,null).forEach(Xe=>{Wi(j,se,[]).push(Xe),Xe.destroy()})});let Ue=C.filter(J=>qH(J,l,c)),ri=new Map;$H(ri,this.driver,T,c,Rr).forEach(J=>{qH(J,l,c)&&Ue.push(J)});let vl=new Map;g.forEach((J,se)=>{$H(vl,this.driver,new Set(J),l,n1)}),Ue.forEach(J=>{let se=ri.get(J),ue=vl.get(J);ri.set(J,new Map([...se?.entries()??[],...ue?.entries()??[]]))});let y1=[],hP=[],mP={};s.forEach(J=>{let{element:se,player:ue,instruction:Xe}=J;if(i.has(se)){if(d.has(se)){ue.onDestroy(()=>Nr(se,Xe.toStyles)),ue.disabled=!0,ue.overrideTotalTime(Xe.totalTime),o.push(ue);return}let dn=mP;if(z.size>1){let xi=se,Bs=[];for(;xi=xi.parentNode;){let Rt=z.get(xi);if(Rt){dn=Rt;break}Bs.push(xi)}Bs.forEach(Rt=>z.set(Rt,dn))}let Ko=this._buildAnimation(ue.namespaceId,Xe,j,r,vl,ri);if(ue.setRealPlayer(Ko),dn===mP)y1.push(ue);else{let xi=this.playersByElement.get(dn);xi&&xi.length&&(ue.parentPlayer=kl(xi)),o.push(ue)}}else _d(se,Xe.fromStyles),ue.onDestroy(()=>Nr(se,Xe.toStyles)),hP.push(ue),d.has(se)&&o.push(ue)}),hP.forEach(J=>{let se=r.get(J.element);if(se&&se.length){let ue=kl(se);J.setRealPlayer(ue)}}),o.forEach(J=>{J.parentPlayer?J.syncPlayerEvents(J.parentPlayer):J.destroy()});for(let J=0;J<C.length;J++){let se=C[J],ue=se[Go];if(Lm(se,jD),ue&&ue.hasAnimation)continue;let Xe=[];if(a.size){let Ko=a.get(se);Ko&&Ko.length&&Xe.push(...Ko);let xi=this.driver.query(se,$D,!0);for(let Bs=0;Bs<xi.length;Bs++){let Rt=a.get(xi[Bs]);Rt&&Rt.length&&Xe.push(...Rt)}}let dn=Xe.filter(Ko=>!Ko.destroyed);dn.length?J0e(this,se,dn):this.processLeaveNode(se)}return C.length=0,y1.forEach(J=>{this.players.push(J),J.onDone(()=>{J.destroy();let se=this.players.indexOf(J);this.players.splice(se,1)}),J.play()}),y1}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,o,r){let s=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(s=a)}else{let a=this.playersByElement.get(e);if(a){let l=!r||r==gb;a.forEach(c=>{c.queued||!l&&c.triggerName!=o||s.push(c)})}}return(i||o)&&(s=s.filter(a=>!(i&&i!=a.namespaceId||o&&o!=a.triggerName))),s}_beforeAnimationBuild(e,t,i){let o=t.triggerName,r=t.element,s=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:o;for(let l of t.timelines){let c=l.element,d=c!==r,f=Wi(i,c,[]);this._getPreviousPlayers(c,d,s,a,t.toState).forEach(g=>{let w=g.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),g.destroy(),f.push(g)})}_d(r,t.fromStyles)}_buildAnimation(e,t,i,o,r,s){let a=t.triggerName,l=t.element,c=[],d=new Set,f=new Set,p=t.timelines.map(w=>{let k=w.element;d.add(k);let C=k[Go];if(C&&C.removedBeforeQueried)return new wl(w.duration,w.delay);let S=k!==l,T=X0e((i.get(k)||G0e).map(j=>j.getRealPlayer())).filter(j=>{let z=j;return z.element?z.element===k:!1}),V=r.get(k),K=s.get(k),de=GH(this._normalizer,w.keyframes,V,K),O=this._buildPlayer(w,de,T);if(w.subTimeline&&o&&f.add(k),S){let j=new vb(e,a,k);j.setRealPlayer(O),c.push(j)}return O});c.forEach(w=>{Wi(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>Q0e(this.playersByQueriedElement,w.element,w))}),d.forEach(w=>bo(w,LH));let g=kl(p);return g.onDestroy(()=>{d.forEach(w=>Lm(w,LH)),Nr(l,t.toStyles)}),f.forEach(w=>{Wi(o,w,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new wl(e.duration,e.delay)}},vb=class{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new wl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(o=>rP(e,i,void 0,o))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Wi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Q0e(n,e,t){let i=n.get(e);if(i){if(i.length){let o=i.indexOf(t);i.splice(o,1)}i.length==0&&n.delete(e)}return i}function Y0e(n){return n??null}function s1(n){return n&&n.nodeType===1}function Z0e(n){return n=="start"||n=="done"}function jH(n,e){let t=n.style.display;return n.style.display=e??"none",t}function $H(n,e,t,i,o){let r=[];t.forEach(l=>r.push(jH(l)));let s=[];i.forEach((l,c)=>{let d=new Map;l.forEach(f=>{let p=e.computeStyle(c,f,o);d.set(f,p),(!p||p.length==0)&&(c[Go]=K0e,s.push(c))}),n.set(c,d)});let a=0;return t.forEach(l=>jH(l,r[a++])),s}function WH(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,o=new Set(e),r=new Map;function s(a){if(!a)return i;let l=r.get(a);if(l)return l;let c=a.parentNode;return t.has(c)?l=c:o.has(c)?l=i:l=s(c),r.set(a,l),l}return e.forEach(a=>{let l=s(a);l!==i&&t.get(l).push(a)}),t}function bo(n,e){n.classList?.add(e)}function Lm(n,e){n.classList?.remove(e)}function J0e(n,e,t){kl(t).onDone(()=>n.processLeaveNode(e))}function X0e(n){let e=[];return oU(n,e),e}function oU(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof fb?oU(i.players,e):e.push(i)}}function eke(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let o=0;o<t.length;o++){let r=t[o];if(!e.hasOwnProperty(r)||n[r]!==e[r])return!1}return!0}function qH(n,e,t){let i=t.get(n);if(!i)return!1;let o=e.get(n);return o?i.forEach(r=>o.add(r)):e.set(n,i),t.delete(n),!0}var Fm=class{constructor(e,t,i){this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(o,r)=>{},this._transitionEngine=new nP(e.body,t,i),this._timelineEngine=new eP(e.body,t,i),this._transitionEngine.onRemovalComplete=(o,r)=>this.onRemovalComplete(o,r)}registerTrigger(e,t,i,o,r){let s=e+"-"+o,a=this._triggerCache[s];if(!a){let l=[],c=[],d=eU(this._driver,r,l,c);if(l.length)throw e0e(o,l);c.length&&void 0,a=z0e(o,d,this._normalizer),this._triggerCache[s]=a}this._transitionEngine.registerTrigger(t,o,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,o){this._transitionEngine.insertNode(e,t,i,o)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,o){if(i.charAt(0)=="@"){let[r,s]=NH(i),a=o;this._timelineEngine.command(r,t,s,a)}else this._transitionEngine.trigger(e,t,i,o)}listen(e,t,i,o,r){if(i.charAt(0)=="@"){let[s,a]=NH(i);return this._timelineEngine.listen(s,t,a,r)}return this._transitionEngine.listen(e,t,i,o,r)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function tke(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=UD(e[0]),e.length>1&&(i=UD(e[e.length-1]))):e instanceof Map&&(t=UD(e)),t||i?new iP(n,t,i):null}var iP=class n{static{this.initialStylesByElement=new WeakMap}constructor(e,t,i){this._element=e,this._startStyles=t,this._endStyles=i,this._state=0;let o=n.initialStylesByElement.get(e);o||n.initialStylesByElement.set(e,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Nr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nr(this._element,this._initialStyles),this._endStyles&&(Nr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_d(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_d(this._element,this._endStyles),this._endStyles=null),Nr(this._element,this._initialStyles),this._state=3)}};function UD(n){let e=null;return n.forEach((t,i)=>{nke(i)&&(e=e||new Map,e.set(i,t))}),e}function nke(n){return n==="display"||n==="position"}var p1=class{constructor(e,t,i,o){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=o,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,o)=>{o!=="offset"&&e.set(o,this._finished?i:dP(this.element,o))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},g1=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return KH(e,t)}getParentElement(e){return aP(e)}query(e,t,i){return QH(e,t,i)}computeStyle(e,t,i){return dP(e,t)}animate(e,t,i,o,r,s=[]){let a=o==0?"both":"forwards",l={duration:i,delay:o,fill:a};r&&(l.easing=r);let c=new Map,d=s.filter(g=>g instanceof p1);_0e(i,o)&&d.forEach(g=>{g.currentSnapshot.forEach((w,k)=>c.set(k,w))});let f=k0e(t).map(g=>new Map(g));f=C0e(e,f,c);let p=tke(e,f);return new p1(e,f,l,p)}};var a1="@",rU="@.disabled",b1=class{constructor(e,t,i,o){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=o,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,o=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,o)}removeChild(e,t,i){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,o){this.delegate.setAttribute(e,t,i,o)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,o){this.delegate.setStyle(e,t,i,o)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==a1&&t==rU?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},oP=class extends b1{constructor(e,t,i,o,r){super(t,i,o,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==a1?t.charAt(1)=="."&&t==rU?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if(t.charAt(0)==a1){let o=ike(e),r=t.slice(1),s="";return r.charAt(0)!=a1&&([r,s]=oke(r)),this.engine.listen(this.namespaceId,o,r,s,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,i,a)})}return this.delegate.listen(e,t,i)}};function ike(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function oke(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var w1=class{constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,t.onRemovalComplete=(o,r)=>{r?.removeChild(null,o)}}createRenderer(e,t){let i="",o=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let c=this._rendererCache,d=c.get(o);if(!d){let f=()=>c.delete(o);d=new b1(i,o,this.engine,f),c.set(o,d)}return d}let r=t.id,s=t.id+"-"+this._currentId;this._currentId++,this.engine.register(s,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(r,s,e,c.name,c)};return t.data.animation.forEach(a),new oP(this,s,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let o=this._animationCallbacksBuffer;o.length==0&&queueMicrotask(()=>{this._zone.run(()=>{o.forEach(r=>{let[s,a]=r;s(a)}),this._animationCallbacksBuffer=[]})}),o.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var ske=(()=>{class n extends Fm{constructor(t,i,o){super(t,i,o)}ngOnDestroy(){this.flush()}static{this.\u0275fac=function(i){return new(i||n)($(wn),$(Cd),$(Ed))}}static{this.\u0275prov=G({token:n,factory:n.\u0275fac})}}return n})();function ake(){return new d1}function lke(n,e,t){return new w1(n,e,t)}var sU=[{provide:Ed,useFactory:ake},{provide:Fm,useClass:ske},{provide:Qs,useFactory:lke,deps:[y0,Fm,ot]}],xtt=[{provide:Cd,useFactory:()=>new g1},{provide:UE,useValue:"BrowserAnimations"},...sU],cke=[{provide:Cd,useClass:lP},{provide:UE,useValue:"NoopAnimations"},...sU];function aU(){return[...cke]}var lU={providers:[S5({eventCoalescing:!0}),G3(TH),SE(RS),aU(),X5(e3(),t3()),{provide:uv,useFactory:IH},{provide:Xp,useFactory:DH},{provide:uF,useFactory:MH},fh,tg,eg]};var k1=class n{constructor(e){this.alertService=e}showAlert=!1;incommingAlert={title:"",message:"",type:"danger"};ngOnInit(){this.alertService.alertRequest$.pipe(at(e=>{this.incommingAlert=e,this.showAlert=!0}),j1(5e3),at(()=>{this.showAlert=!1})).subscribe()}static \u0275fac=function(t){return new(t||n)(Ge(vh))};static \u0275cmp=ne({type:n,selectors:[["app-alert"]],standalone:!0,features:[le],decls:5,vars:10,consts:[[1,"alert-container"],["role","alert"]],template:function(t,i){t&1&&(u(0,"div",0)(1,"div",1)(2,"div"),m(3),h(),m(4),h()()),t&2&&(uf("alert-visible",i.showAlert),wt(),oS("alert alert-bg-",i.incommingAlert.type,""),wt(),oS("alert-title-",i.incommingAlert.type,""),wt(),Yr(" ",i.incommingAlert.title," "),wt(),Yr(" ",i.incommingAlert.message," "))},styles:[".alert-container[_ngcontent-%COMP%]{z-index:99999;display:none;position:fixed;right:1rem;bottom:1rem;background-color:#fff;padding:10px;border-radius:8px}.alert-visible[_ngcontent-%COMP%]{display:block!important}.alert[_ngcontent-%COMP%]{margin:0}.alert-title[_ngcontent-%COMP%], .alert-title-danger[_ngcontent-%COMP%], .alert-title-warning[_ngcontent-%COMP%], .alert-title-success[_ngcontent-%COMP%]{display:inline-block;padding:1px 4px;border-radius:5px;font-weight:700;margin-right:5px;color:#fff}.alert-title-success[_ngcontent-%COMP%]{background-color:#269d42;border:1px solid #1b8534}.alert-title-warning[_ngcontent-%COMP%]{background-color:#8b6b08;border:1px solid #ffc107}.alert-title-danger[_ngcontent-%COMP%]{background-color:#dc351c;border:1px solid #c5321c}"]})};var v1=class n{constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=ne({type:n,selectors:[["app-root"]],standalone:!0,features:[le],decls:1136,vars:0,consts:[["id","modal-c-sharp","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],[1,"spacer"],[1,"text-center","modal-title"],[1,"row"],[1,"small-16","medium-14","medium-centered","columns"],["data-close","","aria-label","Close modal","type","button",1,"close-button"],["src","assets/images/icons/icon-close.svg","alt","go back"],["id","modal-asp-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-web-api","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-razor","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-blazor","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net-core","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-sql-server","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-html","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-css","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-scss","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-javascript","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-typescript","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-jquery","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ajax","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-angular","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-visual-studio","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-entity-framework","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-digipass","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ubikey","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-message-queuing","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-progressive-web-apps","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-aurelia","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-architecture-design","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-okta","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-data-visualization","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-api-management","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-gulp","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dependency-injection","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-tfs","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-active-directory","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-agile","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-enterprise-resource-planning","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-event-driven","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-iis","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-continuous-deployment","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-linq","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-asynchronous","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-design-pattern","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-mvc","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microservices","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-containers","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-docker","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-ci-cd-pipelines","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-performance-tuning","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-signalr","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-web-forms","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-powershell","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-caching","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-maui","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-kubernetes","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-visual-basic","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-on-premise","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-excel-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-word-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-database","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-access-reporting","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-outlook-vba","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-outlook-form","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-mainframe","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-dot-net-framework","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-crystal-reports","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-e-banking","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-barcode-reader","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-vb-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-c-sharp-dot-net","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-autocad-api","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-omnis-studio","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microsoft-graph","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-cognitive-services","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-microsoft-authenticator","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-serverless","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-functions","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-azure-sql-database","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-component","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-directive","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-in-process","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-out-of-process","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"],["id","modal-isolated","data-reveal","","data-close-on-click","true","data-animation-in","fade-in","data-animation-out","fade-out",1,"reveal","small"]],template:function(t,i){t&1&&(b(0,"app-alert")(1,"router-outlet"),u(2,"div",0),b(3,"hr",1),u(4,"h2",2),m(5,"C#"),h(),u(6,"div",3)(7,"div",4),b(8,"hr",1),u(9,"p"),m(10,`C# (pronounced "C-sharp") is a modern, object-oriented programming language developed by Microsoft. It's designed for building a wide range of applications, from web and mobile apps to games and enterprise software. It's versatile, powerful, and integrates seamlessly with the .NET framework`),h(),b(11,"hr",1),u(12,"small"),m(13,"AI generated content"),h()()(),u(14,"button",5),b(15,"img",6),h()(),u(16,"div",7),b(17,"hr",1),u(18,"h2",2),m(19,"Asp.Net"),h(),u(20,"div",3)(21,"div",4),b(22,"hr",1),u(23,"p"),m(24,"ASP.NET is an open-source web framework developed by Microsoft for building modern web applications and services. It enables developers to create dynamic web pages, APIs, and real-time applications with the robust .NET platform."),h(),b(25,"hr",1),u(26,"small"),m(27,"AI generated content"),h()()(),u(28,"button",5),b(29,"img",6),h()(),u(30,"div",8),b(31,"hr",1),u(32,"h2",2),m(33,"Web API"),h(),u(34,"div",3)(35,"div",4),b(36,"hr",1),u(37,"p"),m(38,"A Web API (Application Programming Interface) is a tool that allows different software applications to communicate with each other over the web. It enables developers to create HTTP requests and receive responses, making it easier to integrate and exchange data between different systems. Web APIs are essential for building modern web applications, services, and connecting various devices and platforms. They're like the digital glue that holds everything together in the web ecosystem."),h(),b(39,"hr",1),u(40,"small"),m(41,"AI generated content"),h()()(),u(42,"button",5),b(43,"img",6),h()(),u(44,"div",9),b(45,"hr",1),u(46,"h2",2),m(47,"Razor"),h(),u(48,"div",3)(49,"div",4),b(50,"hr",1),u(51,"p"),m(52,"Razor is a syntax used in ASP.NET for embedding server-based code into web pages. It allows developers to create dynamic web content by mixing HTML with C# or VB.NET code seamlessly. Razor is known for its simplicity and ease of use, making it a popular choice for building interactive and data-driven web applications. Think of it as the glue that holds your web pages and server-side logic together, allowing for a smooth, dynamic user experience."),h(),b(53,"hr",1),u(54,"small"),m(55,"AI generated content"),h()()(),u(56,"button",5),b(57,"img",6),h()(),u(58,"div",10),b(59,"hr",1),u(60,"h2",2),m(61,"Blazor"),h(),u(62,"div",3)(63,"div",4),b(64,"hr",1),u(65,"p"),m(66,"Blazor is a web framework developed by Microsoft for building interactive web applications using C#. What makes Blazor stand out is that it allows you to use C# for both client-side and server-side code, rather than JavaScript, creating a more seamless and efficient development process. It leverages WebAssembly to run C# code directly in the browser, providing a highly responsive and dynamic user experience. Whether you're creating a single-page application (SPA) or more complex web apps, Blazor offers a versatile and powerful platform to build on."),h(),b(67,"hr",1),u(68,"small"),m(69,"AI generated content"),h()()(),u(70,"button",5),b(71,"img",6),h()(),u(72,"div",11),b(73,"hr",1),u(74,"h2",2),m(75,".Net Core"),h(),u(76,"div",3)(77,"div",4),b(78,"hr",1),u(79,"p"),m(80,".NET Core is an open-source, cross-platform framework developed by Microsoft for building modern applications. Unlike the traditional .NET Framework, which is limited to Windows, .NET Core can run on Windows, macOS, and Linux. It supports a variety of application types, including web, mobile, desktop, cloud, and IoT. .NET Core is known for its performance, flexibility, and ability to work seamlessly with microservices and containerization technologies like Docker. It's the go-to choice for developers looking to build high-performance, scalable, and cross-platform applications."),h(),b(81,"hr",1),u(82,"small"),m(83,"AI generated content"),h()()(),u(84,"button",5),b(85,"img",6),h()(),u(86,"div",12),b(87,"hr",1),u(88,"h2",2),m(89,"Sql Server"),h(),u(90,"div",3)(91,"div",4),b(92,"hr",1),u(93,"p"),m(94,"SQL Server is a relational database management system (RDBMS) developed by Microsoft. It's used to store and retrieve data as requested by other software applications, whether those applications run on the same computer or on another computer across a network. SQL Server is known for its high performance, scalability, and security features. It supports SQL (Structured Query Language), the standard language for managing and manipulating databases."),h(),b(95,"hr",1),u(96,"small"),m(97,"AI generated content"),h()()(),u(98,"button",5),b(99,"img",6),h()(),u(100,"div",13),b(101,"hr",1),u(102,"h2",2),m(103,"HTML"),h(),u(104,"div",3)(105,"div",4),b(106,"hr",1),u(107,"p"),m(108,"HTML (HyperText Markup Language) is the standard language used to create and structure web pages. It uses a series of elements or tags to define the different parts of a webpage, such as headings, paragraphs, links, images, and other types of content. HTML is the backbone of web development, providing the basic structure that is then enhanced by CSS and JavaScript. If the web were a house, HTML would be the framework holding it all together."),h(),b(109,"hr",1),u(110,"small"),m(111,"AI generated content"),h()()(),u(112,"button",5),b(113,"img",6),h()(),u(114,"div",14),b(115,"hr",1),u(116,"h2",2),m(117,"CSS"),h(),u(118,"div",3)(119,"div",4),b(120,"hr",1),u(121,"p"),m(122,"CSS (Cascading Style Sheets) is a language used for describing the presentation of a document written in HTML or XML. It controls the layout, colors, fonts, and overall visual aesthetics of web pages. CSS helps to make the web visually appealing and user-friendly by separating content from design."),h(),b(123,"hr",1),u(124,"small"),m(125,"AI generated content"),h()()(),u(126,"button",5),b(127,"img",6),h()(),u(128,"div",15),b(129,"hr",1),u(130,"h2",2),m(131,"SCSS"),h(),u(132,"div",3)(133,"div",4),b(134,"hr",1),u(135,"p"),m(136,"SCSS (Sassy CSS) is a syntax of SASS (Syntactically Awesome Style Sheets), which is an extension of CSS. It adds more powerful features like variables, nested rules, and mixins, making it easier to write and maintain large stylesheets. SCSS syntax is similar to CSS, so you can start using it without a steep learning curve, but it offers more flexibility and control over the styling process. It's like CSS on steroids, designed to make your life as a web developer much simpler and more efficient."),h(),b(137,"hr",1),u(138,"small"),m(139,"AI generated content"),h()()(),u(140,"button",5),b(141,"img",6),h()(),u(142,"div",16),b(143,"hr",1),u(144,"h2",2),m(145,"JavaScript"),h(),u(146,"div",3)(147,"div",4),b(148,"hr",1),u(149,"p"),m(150,"JavaScript is a versatile, high-level programming language primarily used to create interactive effects within web browsers. It's an essential part of web development, enabling dynamic content, such as interactive forms, animations, and real-time updates. JavaScript is key to modern web experiences, providing the ability to make web pages more engaging and functional. It\u2019s like the magic wand that brings web pages to life."),h(),b(151,"hr",1),u(152,"small"),m(153,"AI generated content"),h()()(),u(154,"button",5),b(155,"img",6),h()(),u(156,"div",17),b(157,"hr",1),u(158,"h2",2),m(159,"TypeScript"),h(),u(160,"div",3)(161,"div",4),b(162,"hr",1),u(163,"p"),m(164,"TypeScript is a superset of JavaScript developed by Microsoft. It adds static typing to the language, which helps developers catch errors early in the development process. TypeScript code is transpiled into plain JavaScript, ensuring compatibility with all existing JavaScript environments. This makes it a powerful tool for building large-scale applications, as it provides robust tooling for error checking, autocomplete, and other development enhancements. Essentially, it's JavaScript with superpowers."),h(),b(165,"hr",1),u(166,"small"),m(167,"AI generated content"),h()()(),u(168,"button",5),b(169,"img",6),h()(),u(170,"div",18),b(171,"hr",1),u(172,"h2",2),m(173,"jQuery"),h(),u(174,"div",3)(175,"div",4),b(176,"hr",1),u(177,"p"),m(178,"jQuery is a fast, small, and feature-rich JavaScript library designed to simplify HTML document traversal, event handling, animation, and Ajax interactions. With its easy-to-use API that works across a multitude of browsers, jQuery significantly reduces the complexity of JavaScript programming, making it easier to create dynamic web content. It\u2019s like the Swiss Army knife of JavaScript libraries, helping you do more with less code."),h(),b(179,"hr",1),u(180,"small"),m(181,"AI generated content"),h()()(),u(182,"button",5),b(183,"img",6),h()(),u(184,"div",19),b(185,"hr",1),u(186,"h2",2),m(187,"Ajax"),h(),u(188,"div",3)(189,"div",4),b(190,"hr",1),u(191,"p"),m(192,"AJAX (Asynchronous JavaScript and XML) is a technique used in web development to create asynchronous web applications. It allows web pages to be updated asynchronously by exchanging small amounts of data with the server behind the scenes. This means that parts of a web page can be updated without needing to reload the entire page, resulting in a more dynamic and faster user experience. It's like magic for creating seamless, interactive web applications."),h(),b(193,"hr",1),u(194,"small"),m(195,"AI generated content"),h()()(),u(196,"button",5),b(197,"img",6),h()(),u(198,"div",20),b(199,"hr",1),u(200,"h2",2),m(201,"Angular"),h(),u(202,"div",3)(203,"div",4),b(204,"hr",1),u(205,"p"),m(206,"Angular is a popular front-end framework for building dynamic web applications. Developed and maintained by Google, it allows developers to use HTML as their template language and extend HTML's syntax to express application components clearly. Angular is known for its robust performance and wide adoption in the development community, making it a go-to choice for scalable and maintainable web applications."),h(),b(207,"hr",1),u(208,"small"),m(209,"AI generated content"),h()()(),u(210,"button",5),b(211,"img",6),h()(),u(212,"div",21),b(213,"hr",1),u(214,"h2",2),m(215,"Visual Studio"),h(),u(216,"div",3)(217,"div",4),b(218,"hr",1),u(219,"p"),m(220,"Visual Studio is an integrated development environment (IDE) created by Microsoft. It's used for developing computer programs, websites, web apps, web services, and mobile apps. With features like intelligent code completion, debugging, and version control, Visual Studio supports various programming languages and is highly customizable. It's like the Swiss Army knife for developers, offering a comprehensive set of tools to streamline the development process from start to finish."),h(),b(221,"hr",1),u(222,"small"),m(223,"AI generated content"),h()()(),u(224,"button",5),b(225,"img",6),h()(),u(226,"div",22),b(227,"hr",1),u(228,"h2",2),m(229,".Net"),h(),u(230,"div",3)(231,"div",4),b(232,"hr",1),u(233,"p"),m(234,".NET is a free, open-source, cross-platform framework developed by Microsoft for building a wide range of applications. It supports multiple programming languages, including C#, F#, and Visual Basic, and allows developers to create web, mobile, desktop, cloud, and IoT applications. .NET is designed to provide a consistent programming model across various platforms and devices, making it a versatile and powerful choice for developers."),h(),b(235,"hr",1),u(236,"small"),m(237,"AI generated content"),h()()(),u(238,"button",5),b(239,"img",6),h()(),u(240,"div",23),b(241,"hr",1),u(242,"h2",2),m(243,"Entity Framework"),h(),u(244,"div",3)(245,"div",4),b(246,"hr",1),u(247,"p"),m(248,"Entity Framework (EF) is an object-relational mapping (ORM) framework for .NET applications. It allows developers to work with a database using .NET objects, eliminating the need for most of the data-access code. EF simplifies data manipulation by letting you query, insert, update, and delete data using standard .NET syntax. It's like having a translator between your application and your database, making data operations more intuitive and easier to manage. Whether you're working with a new database or an existing one, EF can streamline your data access process, saving you a ton of time and effort."),h(),b(249,"hr",1),u(250,"small"),m(251,"AI generated content"),h()()(),u(252,"button",5),b(253,"img",6),h()(),u(254,"div",24),b(255,"hr",1),u(256,"h2",2),m(257,"Digpass"),h(),u(258,"div",3)(259,"div",4),b(260,"hr",1),u(261,"p"),m(262,"Digipass is a brand of hardware security tokens and authentication products developed by OneSpan. These devices are used to provide strong authentication and secure electronic signatures for applications and transactions over the internet. Digipass products come in various form factors, including one-button tokens, e-signature devices, card readers, PKI tokens, and Bluetooth-enabled devices."),h(),b(263,"hr",1),u(264,"small"),m(265,"AI generated content"),h()()(),u(266,"button",5),b(267,"img",6),h()(),u(268,"div",25),b(269,"hr",1),u(270,"h2",2),m(271,"Ubikey"),h(),u(272,"div",3)(273,"div",4),b(274,"hr",1),u(275,"p"),m(276,"YubiKey is a hardware authentication device developed by Yubico. It's designed to provide strong two-factor (2FA) and multi-factor (MFA) authentication for various online services. YubiKey is like a digital key that provides an extra layer of security for your online accounts, making it much harder for unauthorized users to gain access."),h(),b(277,"hr",1),u(278,"small"),m(279,"AI generated content"),h()()(),u(280,"button",5),b(281,"img",6),h()(),u(282,"div",26),b(283,"hr",1),u(284,"h2",2),m(285,"Message Queuing"),h(),u(286,"div",3)(287,"div",4),b(288,"hr",1),u(289,"p"),m(290,"Message queuing is a method of communication between different parts of a system where messages are placed in a queue and processed asynchronously. This means that the sender and receiver do not need to interact with the message queue at the same time. Message queuing is commonly used in distributed systems, microservices architectures, and serverless computing to enhance communication and workflow management."),h(),b(291,"hr",1),u(292,"small"),m(293,"AI generated content"),h()()(),u(294,"button",5),b(295,"img",6),h()(),u(296,"div",27),b(297,"hr",1),u(298,"h2",2),m(299,"Azure"),h(),u(300,"div",3)(301,"div",4),b(302,"hr",1),u(303,"p"),m(304,"Azure is Microsoft's cloud computing platform, offering a wide range of services for building, deploying, and managing applications and services through Microsoft-managed data centers."),h(),b(305,"hr",1),u(306,"small"),m(307,"AI generated content"),h()()(),u(308,"button",5),b(309,"img",6),h()(),u(310,"div",28),b(311,"hr",1),u(312,"h2",2),m(313,"Progressive Web Apps"),h(),u(314,"div",3)(315,"div",4),b(316,"hr",1),u(317,"p"),m(318,"Progressive Web Apps (PWAs) are web applications that combine the best features of web and mobile apps. They aim to provide an app-like experience directly in a web browser. PWAs offer a seamless, reliable, and engaging experience, making them a popular choice for modern web development. It's like having the best of both web and mobile worlds in one package."),h(),b(319,"hr",1),u(320,"small"),m(321,"AI generated content"),h()()(),u(322,"button",5),b(323,"img",6),h()(),u(324,"div",29),b(325,"hr",1),u(326,"h2",2),m(327,"Aurelia"),h(),u(328,"div",3)(329,"div",4),b(330,"hr",1),u(331,"p"),m(332,"Aurelia is a modern front-end framework for building browser, mobile, and desktop applications. It's a collection of modular JavaScript components that can be used together to create powerful applications. Aurelia is designed to be simple, powerful, and unobtrusive, allowing developers to build components using vanilla JavaScript or TypeScript."),h(),b(333,"hr",1),u(334,"small"),m(335,"AI generated content"),h()()(),u(336,"button",5),b(337,"img",6),h()(),u(338,"div",30),b(339,"hr",1),u(340,"h2",2),m(341,"Architecture Design"),h(),u(342,"div",3)(343,"div",4),b(344,"hr",1),u(345,"p"),m(346,"When it comes to architecture design in web development, it's all about creating digital spaces that are both functional and aesthetically pleasing. Think of it as constructing a building online: you need a solid foundation (clean code), functional layouts (user interfaces), and an engaging facade (visual design)."),h(),b(347,"hr",1),u(348,"small"),m(349,"AI generated content"),h()()(),u(350,"button",5),b(351,"img",6),h()(),u(352,"div",31),b(353,"hr",1),u(354,"h2",2),m(355,"Okta"),h(),u(356,"div",3)(357,"div",4),b(358,"hr",1),u(359,"p"),m(360,"Okta is a cloud-based identity and access management service that helps organizations manage and secure user access to various applications and resources. It provides features like single sign-on (SSO), multi-factor authentication (MFA), and user lifecycle management, making it easier for users to securely access multiple applications with one set of credentials. Okta is designed to be flexible and integrates with a wide range of applications and services, ensuring secure and seamless access for employees, customers, and partners."),h(),b(361,"hr",1),u(362,"small"),m(363,"AI generated content"),h()()(),u(364,"button",5),b(365,"img",6),h()(),u(366,"div",32),b(367,"hr",1),u(368,"h2",2),m(369,"Data Visualization"),h(),u(370,"div",3)(371,"div",4),b(372,"hr",1),u(373,"p"),m(374,"Data visualization is like translating complex data into visual context, making it easier for people to understand patterns, trends, and insights. Think of it as the architecture of information."),h(),b(375,"hr",1),u(376,"small"),m(377,"AI generated content"),h()()(),u(378,"button",5),b(379,"img",6),h()(),u(380,"div",33),b(381,"hr",1),u(382,"h2",2),m(383,"API Management"),h(),u(384,"div",3)(385,"div",4),b(386,"hr",1),u(387,"p"),m(388,"API management is all about efficiently handling the lifecycle of APIs (Application Programming Interfaces). It involves creating, publishing, securing, and monitoring APIs to ensure they work seamlessly across different environments. Think of it as the traffic controller for data exchange between applications, making sure everything flows smoothly and securely."),h(),b(389,"hr",1),u(390,"small"),m(391,"AI generated content"),h()()(),u(392,"button",5),b(393,"img",6),h()(),u(394,"div",34),b(395,"hr",1),u(396,"h2",2),m(397,"Gulp"),h(),u(398,"div",3)(399,"div",4),b(400,"hr",1),u(401,"p"),m(402,"Gulp is a toolkit for automating tasks in your development workflow. Built on Node.js, it streamlines repetitive tasks like minifying files, compiling CSS from Sass, or running tests. By using Gulp, you can improve your productivity, making your development process faster and more efficient. It's like having a super-efficient assistant that takes care of all the mundane tasks for you."),h(),b(403,"hr",1),u(404,"small"),m(405,"AI generated content"),h()()(),u(406,"button",5),b(407,"img",6),h()(),u(408,"div",35),b(409,"hr",1),u(410,"h2",2),m(411,"Dependency Injection"),h(),u(412,"div",3)(413,"div",4),b(414,"hr",1),u(415,"p"),m(416,"Dependency injection is a technique in software design that makes a system more flexible and easier to maintain. Instead of having a class create its dependencies, they are provided from the outside. It\u2019s like having a builder on a construction site being handed the exact tools they need, right when they need them, rather than having to search for each one themselves. Keeps everything organized and efficient."),h(),b(417,"hr",1),u(418,"small"),m(419,"AI generated content"),h()()(),u(420,"button",5),b(421,"img",6),h()(),u(422,"div",36),b(423,"hr",1),u(424,"h2",2),m(425,"TFS"),h(),u(426,"div",3)(427,"div",4),b(428,"hr",1),u(429,"p"),m(430,"Team Foundation Server (TFS) is a powerful tool developed by Microsoft for managing software development projects. It provides version control, project management, continuous integration, and build automation capabilities. TFS helps teams collaborate more effectively by tracking work items, managing source code, and automating builds and releases. However, it's worth noting that TFS has been rebranded as Azure DevOps Server. This rebranding brings many of the features from the cloud-based Azure DevOps Services to the on-premises server product."),h(),b(431,"hr",1),u(432,"small"),m(433,"AI generated content"),h()()(),u(434,"button",5),b(435,"img",6),h()(),u(436,"div",37),b(437,"hr",1),u(438,"h2",2),m(439,"Azure Active Directory"),h(),u(440,"div",3)(441,"div",4),b(442,"hr",1),u(443,"p"),m(444,"Azure Active Directory (now known as Microsoft Entra ID) is a cloud-based identity and access management service by Microsoft. It helps organizations manage user identities and control access to resources, both within their own environments and across multiple cloud services. With features like secure adaptive access, seamless user experiences, and risk-based conditional access policies, it ensures that only authorized users can access the right resources at the right times."),h(),b(445,"hr",1),u(446,"small"),m(447,"AI generated content"),h()()(),u(448,"button",5),b(449,"img",6),h()(),u(450,"div",38),b(451,"hr",1),u(452,"h2",2),m(453,"Agile"),h(),u(454,"div",3)(455,"div",4),b(456,"hr",1),u(457,"p"),m(458,'Agile is a methodology that emphasizes flexibility, collaboration, and customer satisfaction. It breaks projects into small, manageable units called "sprints," allowing teams to adapt and respond to changing requirements quickly. Think of it like steering a ship where you can change direction smoothly instead of trying to turn a massive vessel all at once.'),h(),b(459,"hr",1),u(460,"small"),m(461,"AI generated content"),h()()(),u(462,"button",5),b(463,"img",6),h()(),u(464,"div",39),b(465,"hr",1),u(466,"h2",2),m(467,"Enterprise Resource Planning"),h(),u(468,"div",3)(469,"div",4),b(470,"hr",1),u(471,"p"),m(472,"Enterprise Resource Planning (ERP) is a powerful software platform that helps organizations manage and integrate various essential business processes. These processes can include finance, human resources, supply chain, manufacturing, services, procurement, and more. By consolidating these functions into a single system, ERPs streamline operations, improve efficiency, and provide real-time data insights."),h(),b(473,"hr",1),u(474,"small"),m(475,"AI generated content"),h()()(),u(476,"button",5),b(477,"img",6),h()(),u(478,"div",40),b(479,"hr",1),u(480,"h2",2),m(481,"Event Driven"),h(),u(482,"div",3)(483,"div",4),b(484,"hr",1),u(485,"p"),m(486,"Event-driven architecture revolves around using events to trigger and communicate between decoupled services. It's like a sophisticated relay race, where the baton (event) gets passed along to the next runner (service) when the time is right. Perfect for systems that need to react to changes swiftly, like real-time analytics or IoT applications."),h(),b(487,"hr",1),u(488,"small"),m(489,"AI generated content"),h()()(),u(490,"button",5),b(491,"img",6),h()(),u(492,"div",41),b(493,"hr",1),u(494,"h2",2),m(495,"IIS"),h(),u(496,"div",3)(497,"div",4),b(498,"hr",1),u(499,"p"),m(500,"IIS (Internet Information Services) is a flexible, secure, and manageable web server created by Microsoft. It's used to host websites, services, and applications on the web. IIS supports various protocols, including HTTP, HTTPS, FTP, FTPS, and SMTP, making it a versatile choice for handling web traffic. It integrates seamlessly with .NET, making it a powerful tool for deploying ASP.NET applications. It's also known for its scalability and robust features, allowing developers to manage and deploy their web applications efficiently."),h(),b(501,"hr",1),u(502,"small"),m(503,"AI generated content"),h()()(),u(504,"button",5),b(505,"img",6),h()(),u(506,"div",42),b(507,"hr",1),u(508,"h2",2),m(509,"Continuous Deployment"),h(),u(510,"div",3)(511,"div",4),b(512,"hr",1),u(513,"p"),m(514,"Continuous deployment is like the ultimate efficiency upgrade for your software development lifecycle. It automates the entire release process, ensuring that code changes are tested, validated, and automatically deployed to production without human intervention. This means faster updates, quicker fixes, and a more dynamic, responsive product. Ever tried to implement this in your workflow? I imagine it brings a certain thrill of agility and efficiency to the team."),h(),b(515,"hr",1),u(516,"small"),m(517,"AI generated content"),h()()(),u(518,"button",5),b(519,"img",6),h()(),u(520,"div",43),b(521,"hr",1),u(522,"h2",2),m(523,"Linq"),h(),u(524,"div",3)(525,"div",4),b(526,"hr",1),u(527,"p"),m(528,"Language Integrated Query (LINQ) is a powerful .NET component that simplifies querying data from different sources, like databases, collections, and XML files, using a consistent syntax. Think of it as having a universal translator for data queries\u2014regardless of where your data lives, LINQ can help you access and manipulate it smoothly. Have you experimented with LINQ in any of your projects? Its seamless integration with C# is pretty impressive."),h(),b(529,"hr",1),u(530,"small"),m(531,"AI generated content"),h()()(),u(532,"button",5),b(533,"img",6),h()(),u(534,"div",44),b(535,"hr",1),u(536,"h2",2),m(537,"Asynchonous"),h(),u(538,"div",3)(539,"div",4),b(540,"hr",1),u(541,"p"),m(542,"Asynchronous programming is all about executing tasks independently of the main program flow, allowing for more efficient use of resources and smoother performance. It's like having multiple chefs in a kitchen, each working on different dishes without having to wait for one another to finish. This way, you avoid bottlenecks and keep things running smoothly."),h(),b(543,"hr",1),u(544,"small"),m(545,"AI generated content"),h()()(),u(546,"button",5),b(547,"img",6),h()(),u(548,"div",45),b(549,"hr",1),u(550,"h2",2),m(551,"Design Pattern"),h(),u(552,"div",3)(553,"div",4),b(554,"hr",1),u(555,"p"),m(556,"A design pattern is a reusable solution to a common problem in software design. It's a template or guideline that can be applied to a wide range of scenarios to simplify complex problems and improve code efficiency, readability, and maintainability. Design patterns are like blueprints that help you build more robust and scalable software. They offer best practices and solutions that have been tested and proven over time."),h(),b(557,"hr",1),u(558,"small"),m(559,"AI generated content"),h()()(),u(560,"button",5),b(561,"img",6),h()(),u(562,"div",46),b(563,"hr",1),u(564,"h2",2),m(565,"MVC"),h(),u(566,"div",3)(567,"div",4),b(568,"hr",1),u(569,"p"),m(570,"MVC (Model-View-Controller) is a design pattern used in software development. It separates an application into three interconnected components. This separation helps in organizing code and making applications more scalable and maintainable."),h(),b(571,"hr",1),u(572,"small"),m(573,"AI generated content"),h()()(),u(574,"button",5),b(575,"img",6),h()(),u(576,"div",47),b(577,"hr",1),u(578,"h2",2),m(579,"Microservices"),h(),u(580,"div",3)(581,"div",4),b(582,"hr",1),u(583,"p"),m(584,"Microservices is an architectural style where an application is composed of small, independent services that communicate with each other over APIs. Each service is responsible for a specific business capability and can be developed, deployed, and scaled independently. Microservices are like a well-coordinated team where each member handles their own tasks efficiently, ensuring the entire operation runs smoothly. If you're building for the future, microservices provide the flexibility and scalability modern applications need."),h(),b(585,"hr",1),u(586,"small"),m(587,"AI generated content"),h()()(),u(588,"button",5),b(589,"img",6),h()(),u(590,"div",48),b(591,"hr",1),u(592,"h2",2),m(593,"Containers"),h(),u(594,"div",3)(595,"div",4),b(596,"hr",1),u(597,"p"),m(598,"Containers are lightweight, portable, and consistent computing environments that package up software and its dependencies so it can run reliably across different computing environments. They isolate applications from their surroundings, ensuring they run the same way regardless of where they\u2019re deployed. Think of containers as little self-sufficient pods that house your application, shielding it from the chaos of the outside world. Docker is the most popular containerization platform, providing tools to create, deploy, and manage containers."),h(),b(599,"hr",1),u(600,"small"),m(601,"AI generated content"),h()()(),u(602,"button",5),b(603,"img",6),h()(),u(604,"div",49),b(605,"hr",1),u(606,"h2",2),m(607,"Docker"),h(),u(608,"div",3)(609,"div",4),b(610,"hr",1),u(611,"p"),m(612,"Docker is an open-source platform that automates the deployment of applications inside lightweight, portable containers. Containers include everything needed to run the application, such as code, runtime, system tools, and libraries, ensuring consistency across different environments. Think of Docker as a handy tool that packages your app and all its dependencies into a neat little container, allowing it to run seamlessly on any machine."),h(),b(613,"hr",1),u(614,"small"),m(615,"AI generated content"),h()()(),u(616,"button",5),b(617,"img",6),h()(),u(618,"div",50),b(619,"hr",1),u(620,"h2",2),m(621,"CI/CD Pipelines"),h(),u(622,"div",3)(623,"div",4),b(624,"hr",1),u(625,"p"),m(626,"CI/CD pipelines (Continuous Integration / Continuous Deployment) are automated workflows that enable software developers to integrate, test, and deploy code changes more efficiently and frequently. These pipelines are crucial for modern DevOps practices. CI/CD pipelines are like a well-oiled assembly line for your software, ensuring everything runs smoothly from development to deployment. They make sure that new features, bug fixes, and updates are delivered quickly and reliably."),h(),b(627,"hr",1),u(628,"small"),m(629,"AI generated content"),h()()(),u(630,"button",5),b(631,"img",6),h()(),u(632,"div",51),b(633,"hr",1),u(634,"h2",2),m(635,"Performance Tuning"),h(),u(636,"div",3)(637,"div",4),b(638,"hr",1),u(639,"p"),m(640,"Performance tuning is the process of optimizing the performance of your application, database, or system to ensure it runs efficiently and effectively. It involves identifying bottlenecks and improving various aspects to enhance overall performance. Performance tuning is crucial for ensuring your application runs smoothly, scales effectively, and provides a positive user experience. It's like fine-tuning a musical instrument to ensure it plays beautifully."),h(),b(641,"hr",1),u(642,"small"),m(643,"AI generated content"),h()()(),u(644,"button",5),b(645,"img",6),h()(),u(646,"div",52),b(647,"hr",1),u(648,"h2",2),m(649,"SignalR"),h(),u(650,"div",3)(651,"div",4),b(652,"hr",1),u(653,"p"),m(654,"SignalR is an open-source library for ASP.NET developers that simplifies the process of adding real-time web functionality to applications. It enables server-side code to push content to connected clients instantly, without the need for the client to request it. This is particularly useful for applications that require high-frequency updates, such as chat apps, live dashboards, and collaborative tools. SignalR is like a bridge that keeps your server and clients in constant, seamless communication, making it perfect for interactive and dynamic applications."),h(),b(655,"hr",1),u(656,"small"),m(657,"AI generated content"),h()()(),u(658,"button",5),b(659,"img",6),h()(),u(660,"div",53),b(661,"hr",1),u(662,"h2",2),m(663,"Web Forms"),h(),u(664,"div",3)(665,"div",4),b(666,"hr",1),u(667,"p"),m(668,"Web Forms is a part of the ASP.NET framework for building dynamic web pages. It allows developers to create user-friendly, data-driven web applications using a drag-and-drop, event-driven model. Web Forms makes it easy to build complex forms and interfaces by combining server-side and client-side code seamlessly. While it's powerful, it's largely been superseded by more modern frameworks like ASP.NET MVC and ASP.NET Core, which offer better separation of concerns, improved testability, and more control over the HTML markup. If you\u2019re looking to build or maintain legacy applications, Web Forms might still be relevant. But for new projects, exploring newer frameworks might be beneficial."),h(),b(669,"hr",1),u(670,"small"),m(671,"AI generated content"),h()()(),u(672,"button",5),b(673,"img",6),h()(),u(674,"div",54),b(675,"hr",1),u(676,"h2",2),m(677,"PowerShell"),h(),u(678,"div",3)(679,"div",4),b(680,"hr",1),u(681,"p"),m(682,"PowerShell is a cross-platform task automation and configuration management framework, consisting of a command-line shell and an associated scripting language. Developed by Microsoft, it is designed for system administrators and power users to automate the administration of Windows, Linux, and macOS operating systems. PowerShell is like the Swiss Army knife for system administrators, offering a robust set of tools to manage and automate virtually every aspect of a computer system."),h(),b(683,"hr",1),u(684,"small"),m(685,"AI generated content"),h()()(),u(686,"button",5),b(687,"img",6),h()(),u(688,"div",55),b(689,"hr",1),u(690,"h2",2),m(691,"Caching"),h(),u(692,"div",3)(693,"div",4),b(694,"hr",1),u(695,"p"),m(696,"Caching is a technique used to store frequently accessed data in a temporary storage area, or cache, to improve performance and efficiency. By keeping this data close to where it's needed, caching reduces the time it takes to access it, minimizing latency and server load. Think of it as a quick-access drawer for your data, ensuring that the most commonly used items are always within easy reach."),h(),b(697,"hr",1),u(698,"small"),m(699,"AI generated content"),h()()(),u(700,"button",5),b(701,"img",6),h()(),u(702,"div",56),b(703,"hr",1),u(704,"h2",2),m(705,"MAUI"),h(),u(706,"div",3)(707,"div",4),b(708,"hr",1),u(709,"p"),m(710,".NET MAUI (Multi-platform App UI) is a cross-platform framework for building native mobile and desktop apps with C# and XAML. It allows developers to create applications that can run on Android, iOS, macOS, and Windows from a single shared codebase. It's like having a universal toolkit for app development, allowing you to reach a wider audience with less effort."),h(),b(711,"hr",1),u(712,"small"),m(713,"AI generated content"),h()()(),u(714,"button",5),b(715,"img",6),h()(),u(716,"div",57),b(717,"hr",1),u(718,"h2",2),m(719,"Kubernetes"),h(),u(720,"div",3)(721,"div",4),b(722,"hr",1),u(723,"p"),m(724,'Kubernetes, often referred to as "K8s," is an open-source platform designed to automate the deployment, scaling, and management of containerized applications. Originally developed by Google and now maintained by the Cloud Native Computing Foundation (CNCF), Kubernetes helps manage complex containerized applications across different environments. Kubernetes is like a conductor for your containerized applications, ensuring they perform harmoniously and efficiently.'),h(),b(725,"hr",1),u(726,"small"),m(727,"AI generated content"),h()()(),u(728,"button",5),b(729,"img",6),h()(),u(730,"div",58),b(731,"hr",1),u(732,"h2",2),m(733,"Visual Basic"),h(),u(734,"div",3)(735,"div",4),b(736,"hr",1),u(737,"p"),m(738,"Visual Basic (VB) is an event-driven programming language and integrated development environment (IDE) from Microsoft. It was designed to be easy to learn and use, providing a graphical user interface (GUI) for programming that allows programmers to create software applications with ease. VB simplifies programming with its use of objects, making it a popular choice for developing Windows-based applications. Think of it as a more visual and user-friendly way to code."),h(),b(739,"hr",1),u(740,"small"),m(741,"AI generated content"),h()()(),u(742,"button",5),b(743,"img",6),h()(),u(744,"div",59),b(745,"hr",1),u(746,"h2",2),m(747,"On premise"),h(),u(748,"div",3)(749,"div",4),b(750,"hr",1),u(751,"p"),m(752,`"On-premises" (often abbreviated as "on-prem") refers to software, services, or infrastructure that are installed and run on the premises of the organization using them, rather than being hosted remotely by a third-party provider. This means the organization is responsible for managing and maintaining all the hardware, software, and infrastructure required to run the service. On-premises solutions are often contrasted with cloud-based solutions, where services are hosted and managed by external providers. Each approach has its own advantages and trade-offs, depending on the organization's needs and resources.`),h(),b(753,"hr",1),u(754,"small"),m(755,"AI generated content"),h()()(),u(756,"button",5),b(757,"img",6),h()(),u(758,"div",60),b(759,"hr",1),u(760,"h2",2),m(761,"Excel\xAE VBA"),h(),u(762,"div",3)(763,"div",4),b(764,"hr",1),u(765,"p"),m(766,"Excel VBA (Visual Basic for Applications) is a programming language that allows you to automate tasks and extend the functionality of Excel. It provides tools to create macros, manipulate data, and build custom forms and controls within Excel workbooks. VBA is powerful for repetitive tasks, complex calculations, and integrating Excel with other applications."),h(),b(767,"hr",1),u(768,"small"),m(769,"AI generated content"),h()()(),u(770,"button",5),b(771,"img",6),h()(),u(772,"div",61),b(773,"hr",1),u(774,"h2",2),m(775,"Word\xAE VBA"),h(),u(776,"div",3)(777,"div",4),b(778,"hr",1),u(779,"p"),m(780,"Word VBA (Visual Basic for Applications) allows you to automate tasks and extend the functionality of Microsoft Word through macros and custom scripts. With Word VBA, you can manipulate document content, format text, interact with other Office applications, and much more."),h(),b(781,"hr",1),u(782,"small"),m(783,"AI generated content"),h()()(),u(784,"button",5),b(785,"img",6),h()(),u(786,"div",62),b(787,"hr",1),u(788,"h2",2),m(789,"Access\xAE VBA"),h(),u(790,"div",3)(791,"div",4),b(792,"hr",1),u(793,"p"),m(794,"Access VBA (Visual Basic for Applications) is a programming language used to automate tasks and extend the functionality of Microsoft Access. With Access VBA, you can create custom scripts and macros to handle repetitive tasks, manage data, and build interactive forms and reports"),h(),b(795,"hr",1),u(796,"small"),m(797,"AI generated content"),h()()(),u(798,"button",5),b(799,"img",6),h()(),u(800,"div",63),b(801,"hr",1),u(802,"h2",2),m(803,"Access\xAE Database"),h(),u(804,"div",3)(805,"div",4),b(806,"hr",1),u(807,"p"),m(808,"An Access database is a relational database management system (RDBMS) developed by Microsoft. It's designed to help users create, manage, and share databases without needing extensive programming knowledge. Access databases are commonly used for small to medium-sized business applications, personal projects, and as a front-end to more powerful database systems."),h(),b(809,"hr",1),u(810,"small"),m(811,"AI generated content"),h()()(),u(812,"button",5),b(813,"img",6),h()(),u(814,"div",64),b(815,"hr",1),u(816,"h2",2),m(817,"Access\xAE Reporting"),h(),u(818,"div",3)(819,"div",4),b(820,"hr",1),u(821,"p"),m(822,"An Access database is a relational database management system (RDBMS) developed by Microsoft. It's designed to help users create, manage, and share databases without needing extensive programming knowledge. Access databases are commonly used for small to medium-sized business applications, personal projects, and as a front-end to more powerful database systems. Access provides a user-friendly interface to design, format, and generate reports, making it a powerful tool for data analysis and presentation."),h(),b(823,"hr",1),u(824,"small"),m(825,"AI generated content"),h()()(),u(826,"button",5),b(827,"img",6),h()(),u(828,"div",65),b(829,"hr",1),u(830,"h2",2),m(831,"Outlook\xAE VBA"),h(),u(832,"div",3)(833,"div",4),b(834,"hr",1),u(835,"p"),m(836,"Outlook VBA (Visual Basic for Applications) is a programming language that enables you to automate tasks and extend the functionality of Microsoft Outlook. With Outlook VBA, you can create custom scripts and macros to handle repetitive tasks, manage emails, appointments, contacts, and more. Outlook VBA can streamline your email and calendar workflows, saving you time and effort."),h(),b(837,"hr",1),u(838,"small"),m(839,"AI generated content"),h()()(),u(840,"button",5),b(841,"img",6),h()(),u(842,"div",66),b(843,"hr",1),u(844,"h2",2),m(845,"Outlook\xAE Form"),h(),u(846,"div",3)(847,"div",4),b(848,"hr",1),u(849,"p"),m(850,"Outlook form is a customizable interface within Microsoft Outlook that you can design to collect and manage information more efficiently. These forms can be used to create structured emails, manage tasks, collect data, or automate workflows. Think of Outlook forms as a way to enhance the functionality of your emails, tasks, and calendar items, tailored exactly to your requirements. They're like personalized templates that streamline how you gather and manage information."),h(),b(851,"hr",1),u(852,"small"),m(853,"AI generated content"),h()()(),u(854,"button",5),b(855,"img",6),h()(),u(856,"div",67),b(857,"hr",1),u(858,"h2",2),m(859,"Mainframe"),h(),u(860,"div",3)(861,"div",4),b(862,"hr",1),u(863,"p"),m(864,"A mainframe is a powerful, high-performance computer used primarily by large organizations for critical applications like bulk data processing, transaction processing, and enterprise resource planning. Mainframes are known for their reliability, security, and ability to handle vast amounts of data and transactions efficiently. Mainframes are often used by banks, airlines, retailers, and government agencies for their critical operations. Despite the rise of cloud computing, mainframes continue to play a vital role in IT infrastructure due to their unmatched processing power and reliability."),h(),b(865,"hr",1),u(866,"small"),m(867,"AI generated content"),h()()(),u(868,"button",5),b(869,"img",6),h()(),u(870,"div",68),b(871,"hr",1),u(872,"h2",2),m(873,".Net Framework"),h(),u(874,"div",3)(875,"div",4),b(876,"hr",1),u(877,"p"),m(878,"The .NET Framework is a software development framework developed by Microsoft. It provides a comprehensive and consistent programming model for building applications with visually stunning user experiences and seamless communication. The .NET Framework is widely used for developing desktop applications on Windows, and it supports multiple programming languages, including C#, F#, and Visual Basic. It's known for its robustness, extensive library support, and strong community backing."),h(),b(879,"hr",1),u(880,"small"),m(881,"AI generated content"),h()()(),u(882,"button",5),b(883,"img",6),h()(),u(884,"div",69),b(885,"hr",1),u(886,"h2",2),m(887,"Crystal Reports"),h(),u(888,"div",3)(889,"div",4),b(890,"hr",1),u(891,"p"),m(892,"Crystal Reports is a business intelligence application used to create detailed, complex reports from a wide variety of data sources. It's marketed by SAP and is particularly popular among small- and medium-sized businesses. Crystal Reports is a powerful tool for analyzing data and presenting it in a visually appealing and easy-to-understand format."),h(),b(893,"hr",1),u(894,"small"),m(895,"AI generated content"),h()()(),u(896,"button",5),b(897,"img",6),h()(),u(898,"div",70),b(899,"hr",1),u(900,"h2",2),m(901,"e-Banking"),h(),u(902,"div",3)(903,"div",4),b(904,"hr",1),u(905,"p"),m(906,"E-banking, or electronic banking, refers to the use of digital technology to conduct banking transactions and services online. This can include activities like checking account balances, transferring money, paying bills, and applying for loans, all from the comfort of your home or on the go. E-banking has revolutionized the way we manage our finances, making banking more accessible and efficient."),h(),b(907,"hr",1),u(908,"small"),m(909,"AI generated content"),h()()(),u(910,"button",5),b(911,"img",6),h()(),u(912,"div",71),b(913,"hr",1),u(914,"h2",2),m(915,"Barcode Reader"),h(),u(916,"div",3)(917,"div",4),b(918,"hr",1),u(919,"p"),m(920,"A barcode reader is a device that scans and decodes barcodes, converting the barcode data into digital information that can be processed by a computer. Barcode readers are widely used in retail, logistics, healthcare, and other industries to streamline data entry and inventory management."),h(),b(921,"hr",1),u(922,"small"),m(923,"AI generated content"),h()()(),u(924,"button",5),b(925,"img",6),h()(),u(926,"div",72),b(927,"hr",1),u(928,"h2",2),m(929,"VB.Net"),h(),u(930,"div",3)(931,"div",4),b(932,"hr",1),u(933,"p"),m(934,"VB.NET (Visual Basic .NET) is an object-oriented programming language developed by Microsoft. It's an evolution of the classic Visual Basic language, built on the .NET framework. VB.NET is designed for creating Windows-based applications and can be used to develop desktop applications, web applications, and web services. VB.NET is widely used in enterprise environments for building robust and scalable applications."),h(),b(935,"hr",1),u(936,"small"),m(937,"AI generated content"),h()()(),u(938,"button",5),b(939,"img",6),h()(),u(940,"div",73),b(941,"hr",1),u(942,"h2",2),m(943,"C#.Net"),h(),u(944,"div",3)(945,"div",4),b(946,"hr",1),u(947,"p"),m(948,"C#.NET, often just called C#, is a modern, object-oriented programming language developed by Microsoft. It runs on the .NET framework and is used to build a wide range of applications, from web and mobile apps to games and enterprise software. C# is known for its versatility, power, and ease of use, making it a popular choice for developers."),h(),b(949,"hr",1),u(950,"small"),m(951,"AI generated content"),h()()(),u(952,"button",5),b(953,"img",6),h()(),u(954,"div",74),b(955,"hr",1),u(956,"h2",2),m(957,"Autocad API"),h(),u(958,"div",3)(959,"div",4),b(960,"hr",1),u(961,"p"),m(962,"The AutoCAD API allows developers to create custom applications and automate tasks within AutoCAD. It enable developers to extend AutoCAD's functionality, automate repetitive tasks, and create specialized design and drafting applications"),h(),b(963,"hr",1),u(964,"small"),m(965,"AI generated content"),h()()(),u(966,"button",5),b(967,"img",6),h()(),u(968,"div",75),b(969,"hr",1),u(970,"h2",2),m(971,"Omnis Studio"),h(),u(972,"div",3)(973,"div",4),b(974,"hr",1),u(975,"p"),m(976,"Omnis programming refers to using Omnis Studio, a development environment for building cross-platform, multi-developer applications. Omnis Studio supports a variety of programming tasks, including web, mobile, and desktop application development. Omnis programming is ideal for developers looking to create robust, scalable applications with a rich set of tools and functionalities."),h(),b(977,"hr",1),u(978,"small"),m(979,"AI generated content"),h()()(),u(980,"button",5),b(981,"img",6),h()(),u(982,"div",76),b(983,"hr",1),u(984,"h2",2),m(985,"Microsoft Graph"),h(),u(986,"div",3)(987,"div",4),b(988,"hr",1),u(989,"p"),m(990,"Microsoft Graph is a unified API and a gateway to data and intelligence in Microsoft 365. It allows developers to access and interact with data across Microsoft 365, Windows, and Enterprise Mobility + Security platforms. With Microsoft Graph, you can build apps that leverage the vast amount of data available in these services, enabling you to create powerful, people-centric applications."),h(),b(991,"hr",1),u(992,"small"),m(993,"AI generated content"),h()()(),u(994,"button",5),b(995,"img",6),h()(),u(996,"div",77),b(997,"hr",1),u(998,"h2",2),m(999,"Azure Cognitive Services"),h(),u(1e3,"div",3)(1001,"div",4),b(1002,"hr",1),u(1003,"p"),m(1004,"Azure Cognitive Services is a suite of cloud-based APIs and services offered by Microsoft that enable developers to build intelligent and interactive applications. These services leverage advanced machine learning models and artificial intelligence to provide capabilities. Azure Cognitive Services allows developers to integrate these AI capabilities into their applications without needing deep expertise in machine learning or AI. It's designed to be accessible and easy to use, making it possible to quickly add intelligent features to applications."),h(),b(1005,"hr",1),u(1006,"small"),m(1007,"AI generated content"),h()()(),u(1008,"button",5),b(1009,"img",6),h()(),u(1010,"div",78),b(1011,"hr",1),u(1012,"h2",2),m(1013,"Microsoft Authenticator"),h(),u(1014,"div",3)(1015,"div",4),b(1016,"hr",1),u(1017,"p"),m(1018,"Microsoft Authenticator is a mobile app designed to help you securely sign in to your accounts without using a password. It supports multifactor authentication, including biometric verification (like fingerprint or facial recognition) and one-time passcodes. The app is available for both Android and iOS devices."),h(),b(1019,"hr",1),u(1020,"small"),m(1021,"AI generated content"),h()()(),u(1022,"button",5),b(1023,"img",6),h()(),u(1024,"div",79),b(1025,"hr",1),u(1026,"h2",2),m(1027,"Serverless"),h(),u(1028,"div",3)(1029,"div",4),b(1030,"hr",1),u(1031,"p"),m(1032,"Serverless computing is a cloud computing execution model where the cloud provider manages the infrastructure. Developers can build and run applications without worrying about server management, scaling, or capacity planning. The cloud provider handles these tasks, allowing developers to focus solely on writing code."),h(),b(1033,"hr",1),u(1034,"small"),m(1035,"AI generated content"),h()()(),u(1036,"button",5),b(1037,"img",6),h()(),u(1038,"div",80),b(1039,"hr",1),u(1040,"h2",2),m(1041,"Azure Functions"),h(),u(1042,"div",3)(1043,"div",4),b(1044,"hr",1),u(1045,"p"),m(1046,"Azure Functions is a serverless solution provided by Microsoft that allows developers to run event-driven code without having to manage the underlying infrastructure. You can write code that responds to various triggers, such as HTTP requests, timers, or messages from a queue, and Azure Functions will handle the rest."),h(),b(1047,"hr",1),u(1048,"small"),m(1049,"AI generated content"),h()()(),u(1050,"button",5),b(1051,"img",6),h()(),u(1052,"div",81),b(1053,"hr",1),u(1054,"h2",2),m(1055,"Azure Sql Database"),h(),u(1056,"div",3)(1057,"div",4),b(1058,"hr",1),u(1059,"p"),m(1060,"Azure SQL Database is a fully managed platform as a service (PaaS) database engine provided by Microsoft. It handles most of the database management functions such as upgrading, patching, backups, and monitoring without user involvement. This allows developers to focus on building and optimizing their applications."),h(),b(1061,"hr",1),u(1062,"small"),m(1063,"AI generated content"),h()()(),u(1064,"button",5),b(1065,"img",6),h()(),u(1066,"div",82),b(1067,"hr",1),u(1068,"h2",2),m(1069,"Component (Angular)"),h(),u(1070,"div",3)(1071,"div",4),b(1072,"hr",1),u(1073,"p"),m(1074,"An Angular component is a building block of an Angular application, comprising a class, template, and metadata. The class contains logic and data, the template defines the HTML view, and the metadata configures the component's settings, such as its selector and style files. Components help create modular, reusable, and maintainable code structures in Angular applications."),h(),b(1075,"hr",1),u(1076,"small"),m(1077,"AI generated content"),h()()(),u(1078,"button",5),b(1079,"img",6),h()(),u(1080,"div",83),b(1081,"hr",1),u(1082,"h2",2),m(1083,"Directive (Angular)"),h(),u(1084,"div",3)(1085,"div",4),b(1086,"hr",1),u(1087,"p"),m(1088,"In Angular, a directive is a class that allows you to extend or manipulate the behavior of elements in the DOM. By using directives, you can create custom behavior or styling, change the structure of the DOM, and enhance the functionality of your application."),h(),b(1089,"hr",1),u(1090,"small"),m(1091,"AI generated content"),h()()(),u(1092,"button",5),b(1093,"img",6),h()(),u(1094,"div",84),b(1095,"hr",1),u(1096,"h2",2),m(1097,"In Process"),h(),u(1098,"div",3)(1099,"div",4),b(1100,"hr",1),u(1101,"p"),m(1102,"In-process hosting in .NET refers to running an application within the same process as the web server, such as IIS (Internet Information Services). This model improves performance because requests are handled directly within the same process, avoiding the overhead of inter-process communication."),h(),b(1103,"hr",1),u(1104,"small"),m(1105,"AI generated content"),h()()(),u(1106,"button",5),b(1107,"img",6),h()(),u(1108,"div",85),b(1109,"hr",1),u(1110,"h2",2),m(1111,"Out Of Process"),h(),u(1112,"div",3)(1113,"div",4),b(1114,"hr",1),u(1115,"p"),m(1116,"Out-of-process hosting in .NET refers to running an application in a separate process from the web server, such as IIS. This model involves communication between the web server and the application through inter-process communication (IPC), typically using HTTP or TCP. It provides greater isolation and stability, as issues in the application process do not directly impact the web server process."),h(),b(1117,"hr",1),u(1118,"small"),m(1119,"AI generated content"),h()()(),u(1120,"button",5),b(1121,"img",6),h()(),u(1122,"div",86),b(1123,"hr",1),u(1124,"h2",2),m(1125,"Isolated"),h(),u(1126,"div",3)(1127,"div",4),b(1128,"hr",1),u(1129,"p"),m(1130,"In .NET isolated hosting refers to running an application in a separate, sandboxed environment to ensure greater security and stability. This approach limits the application's access to system resources, minimizing the risk of interference or malicious activity. It is particularly useful in multi-tenant environments where applications must be securely separated from each other."),h(),b(1131,"hr",1),u(1132,"small"),m(1133,"AI generated content"),h()()(),u(1134,"button",5),b(1135,"img",6),h()())},dependencies:[Ji,fx,kh,k1],styles:[".menu-button-container[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px}.menu-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#fff}.menu[_ngcontent-%COMP%]{position:absolute;width:max-content;top:40px;right:10px;background:#fff;border:1px solid #ccc;box-shadow:0 2px 10px #0000001a;z-index:1000}.menu[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px}.menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000}"]})};l3(v1,lU).catch(n=>console.error(n));
